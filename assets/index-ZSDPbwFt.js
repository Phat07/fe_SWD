var ade=Object.defineProperty;var ude=(t,e,n)=>e in t?ade(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lde=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Qe=(t,e,n)=>(ude(t,typeof e!="symbol"?e+"":e,n),n);var sft=lde((hft,Py)=>{function dH(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function fH(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var hH={exports:{}},eS={},pH={exports:{}},on={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox=Symbol.for("react.element"),cde=Symbol.for("react.portal"),dde=Symbol.for("react.fragment"),fde=Symbol.for("react.strict_mode"),hde=Symbol.for("react.profiler"),pde=Symbol.for("react.provider"),mde=Symbol.for("react.context"),gde=Symbol.for("react.forward_ref"),vde=Symbol.for("react.suspense"),yde=Symbol.for("react.memo"),xde=Symbol.for("react.lazy"),IB=Symbol.iterator;function bde(t){return t===null||typeof t!="object"?null:(t=IB&&t[IB]||t["@@iterator"],typeof t=="function"?t:null)}var mH={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gH=Object.assign,vH={};function Cg(t,e,n){this.props=t,this.context=e,this.refs=vH,this.updater=n||mH}Cg.prototype.isReactComponent={};Cg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yH(){}yH.prototype=Cg.prototype;function HA(t,e,n){this.props=t,this.context=e,this.refs=vH,this.updater=n||mH}var GA=HA.prototype=new yH;GA.constructor=HA;gH(GA,Cg.prototype);GA.isPureReactComponent=!0;var TB=Array.isArray,xH=Object.prototype.hasOwnProperty,YA={current:null},bH={key:!0,ref:!0,__self:!0,__source:!0};function wH(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)xH.call(e,r)&&!bH.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];o.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:ox,type:t,key:s,ref:i,props:o,_owner:YA.current}}function wde(t,e){return{$$typeof:ox,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qA(t){return typeof t=="object"&&t!==null&&t.$$typeof===ox}function kde(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var NB=/\/+/g;function BI(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kde(""+t.key):e.toString(36)}function Xw(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case ox:case cde:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+BI(i,0):r,TB(o)?(n="",t!=null&&(n=t.replace(NB,"$&/")+"/"),Xw(o,e,n,"",function(l){return l})):o!=null&&(qA(o)&&(o=wde(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(NB,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",TB(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+BI(s,a);i+=Xw(s,e,n,u,o)}else if(u=bde(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+BI(s,a++),i+=Xw(s,e,n,u,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Db(t,e,n){if(t==null)return t;var r=[],o=0;return Xw(t,r,"","",function(s){return e.call(n,s,o++)}),r}function Cde(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ms={current:null},Qw={transition:null},Sde={ReactCurrentDispatcher:Ms,ReactCurrentBatchConfig:Qw,ReactCurrentOwner:YA};on.Children={map:Db,forEach:function(t,e,n){Db(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Db(t,function(){e++}),e},toArray:function(t){return Db(t,function(e){return e})||[]},only:function(t){if(!qA(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};on.Component=Cg;on.Fragment=dde;on.Profiler=hde;on.PureComponent=HA;on.StrictMode=fde;on.Suspense=vde;on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sde;on.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gH({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=YA.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)xH.call(e,u)&&!bH.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:ox,type:t.type,key:o,ref:s,props:r,_owner:i}};on.createContext=function(t){return t={$$typeof:mde,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pde,_context:t},t.Consumer=t};on.createElement=wH;on.createFactory=function(t){var e=wH.bind(null,t);return e.type=t,e};on.createRef=function(){return{current:null}};on.forwardRef=function(t){return{$$typeof:gde,render:t}};on.isValidElement=qA;on.lazy=function(t){return{$$typeof:xde,_payload:{_status:-1,_result:t},_init:Cde}};on.memo=function(t,e){return{$$typeof:yde,type:t,compare:e===void 0?null:e}};on.startTransition=function(t){var e=Qw.transition;Qw.transition={};try{t()}finally{Qw.transition=e}};on.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};on.useCallback=function(t,e){return Ms.current.useCallback(t,e)};on.useContext=function(t){return Ms.current.useContext(t)};on.useDebugValue=function(){};on.useDeferredValue=function(t){return Ms.current.useDeferredValue(t)};on.useEffect=function(t,e){return Ms.current.useEffect(t,e)};on.useId=function(){return Ms.current.useId()};on.useImperativeHandle=function(t,e,n){return Ms.current.useImperativeHandle(t,e,n)};on.useInsertionEffect=function(t,e){return Ms.current.useInsertionEffect(t,e)};on.useLayoutEffect=function(t,e){return Ms.current.useLayoutEffect(t,e)};on.useMemo=function(t,e){return Ms.current.useMemo(t,e)};on.useReducer=function(t,e,n){return Ms.current.useReducer(t,e,n)};on.useRef=function(t){return Ms.current.useRef(t)};on.useState=function(t){return Ms.current.useState(t)};on.useSyncExternalStore=function(t,e,n){return Ms.current.useSyncExternalStore(t,e,n)};on.useTransition=function(){return Ms.current.useTransition()};on.version="18.2.0";pH.exports=on;var D=pH.exports;const ee=Xd(D),KA=dH({__proto__:null,default:ee},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ede=D,_de=Symbol.for("react.element"),Ide=Symbol.for("react.fragment"),Tde=Object.prototype.hasOwnProperty,Nde=Ede.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dde={key:!0,ref:!0,__self:!0,__source:!0};function kH(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)Tde.call(e,r)&&!Dde.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:_de,type:t,key:s,ref:i,props:o,_owner:Nde.current}}eS.Fragment=Ide;eS.jsx=kH;eS.jsxs=kH;hH.exports=eS;var w=hH.exports,oD={},CH={exports:{}},Ri={},SH={exports:{}},EH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,B){var H=F.length;F.push(B);e:for(;0<H;){var X=H-1>>>1,te=F[X];if(0<o(te,B))F[X]=B,F[H]=te,H=X;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var B=F[0],H=F.pop();if(H!==B){F[0]=H;e:for(var X=0,te=F.length,re=te>>>1;X<re;){var ue=2*(X+1)-1,Q=F[ue],ce=ue+1,ke=F[ce];if(0>o(Q,H))ce<te&&0>o(ke,Q)?(F[X]=ke,F[ce]=H,X=ce):(F[X]=Q,F[ue]=H,X=ue);else if(ce<te&&0>o(ke,H))F[X]=ke,F[ce]=H,X=ce;else break e}}return B}function o(F,B){var H=F.sortIndex-B.sortIndex;return H!==0?H:F.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var u=[],l=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var B=n(l);B!==null;){if(B.callback===null)r(l);else if(B.startTime<=F)r(l),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(l)}}function b(F){if(m=!1,x(F),!p)if(n(u)!==null)p=!0,W(C);else{var B=n(l);B!==null&&z(b,B.startTime-F)}}function C(F,B){p=!1,m&&(m=!1,v(I),I=-1),h=!0;var H=f;try{for(x(B),d=n(u);d!==null&&(!(d.expirationTime>B)||F&&!O());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var te=X(d.expirationTime<=B);B=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(u)&&r(u),x(B)}else r(u);d=n(u)}if(d!==null)var re=!0;else{var ue=n(l);ue!==null&&z(b,ue.startTime-B),re=!1}return re}finally{d=null,f=H,h=!1}}var S=!1,E=null,I=-1,T=5,N=-1;function O(){return!(t.unstable_now()-N<T)}function $(){if(E!==null){var F=t.unstable_now();N=F;var B=!0;try{B=E(!0,F)}finally{B?A():(S=!1,E=null)}}else S=!1}var A;if(typeof y=="function")A=function(){y($)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,L=P.port2;P.port1.onmessage=$,A=function(){L.postMessage(null)}}else A=function(){g($,0)};function W(F){E=F,S||(S=!0,A())}function z(F,B){I=g(function(){F(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,W(C))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var H=f;f=B;try{return F()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,B){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=f;f=F;try{return B()}finally{f=H}},t.unstable_scheduleCallback=function(F,B,H){var X=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,F){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=H+te,F={id:c++,callback:B,priorityLevel:F,startTime:H,expirationTime:te,sortIndex:-1},H>X?(F.sortIndex=H,e(l,F),n(u)===null&&F===n(l)&&(m?(v(I),I=-1):m=!0,z(b,H-X))):(F.sortIndex=te,e(u,F),p||h||(p=!0,W(C))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var B=f;return function(){var H=f;f=B;try{return F.apply(this,arguments)}finally{f=H}}}})(EH);SH.exports=EH;var Rde=SH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _H=D,Ti=Rde;function Re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IH=new Set,Fy={};function Bh(t,e){$m(t,e),$m(t+"Capture",e)}function $m(t,e){for(Fy[t]=e,t=0;t<e.length;t++)IH.add(e[t])}var Jl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sD=Object.prototype.hasOwnProperty,Ode=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DB={},RB={};function Ade(t){return sD.call(RB,t)?!0:sD.call(DB,t)?!1:Ode.test(t)?RB[t]=!0:(DB[t]=!0,!1)}function $de(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Mde(t,e,n,r){if(e===null||typeof e>"u"||$de(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ps(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Yo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yo[t]=new Ps(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yo[e]=new Ps(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yo[t]=new Ps(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yo[t]=new Ps(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yo[t]=new Ps(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yo[t]=new Ps(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yo[t]=new Ps(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yo[t]=new Ps(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yo[t]=new Ps(t,5,!1,t.toLowerCase(),null,!1,!1)});var XA=/[\-:]([a-z])/g;function QA(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(XA,QA);Yo[e]=new Ps(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(XA,QA);Yo[e]=new Ps(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(XA,QA);Yo[e]=new Ps(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yo[t]=new Ps(t,1,!1,t.toLowerCase(),null,!1,!1)});Yo.xlinkHref=new Ps("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yo[t]=new Ps(t,1,!1,t.toLowerCase(),null,!0,!0)});function JA(t,e,n,r){var o=Yo.hasOwnProperty(e)?Yo[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Mde(e,n,o,r)&&(n=null),r||o===null?Ade(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hc=_H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rb=Symbol.for("react.element"),Wp=Symbol.for("react.portal"),zp=Symbol.for("react.fragment"),ZA=Symbol.for("react.strict_mode"),iD=Symbol.for("react.profiler"),TH=Symbol.for("react.provider"),NH=Symbol.for("react.context"),e$=Symbol.for("react.forward_ref"),aD=Symbol.for("react.suspense"),uD=Symbol.for("react.suspense_list"),t$=Symbol.for("react.memo"),Wc=Symbol.for("react.lazy"),DH=Symbol.for("react.offscreen"),OB=Symbol.iterator;function gv(t){return t===null||typeof t!="object"?null:(t=OB&&t[OB]||t["@@iterator"],typeof t=="function"?t:null)}var Nr=Object.assign,jI;function Yv(t){if(jI===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jI=e&&e[1]||""}return`
`+jI+t}var WI=!1;function zI(t,e){if(!t||WI)return"";WI=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var o=l.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var u=`
`+o[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=a);break}}}finally{WI=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yv(t):""}function Pde(t){switch(t.tag){case 5:return Yv(t.type);case 16:return Yv("Lazy");case 13:return Yv("Suspense");case 19:return Yv("SuspenseList");case 0:case 2:case 15:return t=zI(t.type,!1),t;case 11:return t=zI(t.type.render,!1),t;case 1:return t=zI(t.type,!0),t;default:return""}}function lD(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zp:return"Fragment";case Wp:return"Portal";case iD:return"Profiler";case ZA:return"StrictMode";case aD:return"Suspense";case uD:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NH:return(t.displayName||"Context")+".Consumer";case TH:return(t._context.displayName||"Context")+".Provider";case e$:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case t$:return e=t.displayName||null,e!==null?e:lD(t.type)||"Memo";case Wc:e=t._payload,t=t._init;try{return lD(t(e))}catch{}}return null}function Fde(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lD(e);case 8:return e===ZA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Od(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lde(t){var e=RH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ob(t){t._valueTracker||(t._valueTracker=Lde(t))}function OH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rk(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cD(t,e){var n=e.checked;return Nr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function AB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Od(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AH(t,e){e=e.checked,e!=null&&JA(t,"checked",e,!1)}function dD(t,e){AH(t,e);var n=Od(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fD(t,e.type,n):e.hasOwnProperty("defaultValue")&&fD(t,e.type,Od(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $B(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fD(t,e,n){(e!=="number"||Rk(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qv=Array.isArray;function im(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Od(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function hD(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Nr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function MB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Re(92));if(qv(n)){if(1<n.length)throw Error(Re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Od(n)}}function $H(t,e){var n=Od(e.value),r=Od(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function PB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pD(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ab,PH=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ab=Ab||document.createElement("div"),Ab.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ab.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ly(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bde=["Webkit","ms","Moz","O"];Object.keys(cy).forEach(function(t){Bde.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cy[e]=cy[t]})});function FH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cy.hasOwnProperty(t)&&cy[t]?(""+e).trim():e+"px"}function LH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=FH(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var jde=Nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mD(t,e){if(e){if(jde[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function gD(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vD=null;function n$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yD=null,am=null,um=null;function FB(t){if(t=ax(t)){if(typeof yD!="function")throw Error(Re(280));var e=t.stateNode;e&&(e=sS(e),yD(t.stateNode,t.type,e))}}function BH(t){am?um?um.push(t):um=[t]:am=t}function jH(){if(am){var t=am,e=um;if(um=am=null,FB(t),e)for(t=0;t<e.length;t++)FB(e[t])}}function WH(t,e){return t(e)}function zH(){}var UI=!1;function UH(t,e,n){if(UI)return t(e,n);UI=!0;try{return WH(t,e,n)}finally{UI=!1,(am!==null||um!==null)&&(zH(),jH())}}function By(t,e){var n=t.stateNode;if(n===null)return null;var r=sS(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Re(231,e,typeof n));return n}var xD=!1;if(Jl)try{var vv={};Object.defineProperty(vv,"passive",{get:function(){xD=!0}}),window.addEventListener("test",vv,vv),window.removeEventListener("test",vv,vv)}catch{xD=!1}function Wde(t,e,n,r,o,s,i,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var dy=!1,Ok=null,Ak=!1,bD=null,zde={onError:function(t){dy=!0,Ok=t}};function Ude(t,e,n,r,o,s,i,a,u){dy=!1,Ok=null,Wde.apply(zde,arguments)}function Vde(t,e,n,r,o,s,i,a,u){if(Ude.apply(this,arguments),dy){if(dy){var l=Ok;dy=!1,Ok=null}else throw Error(Re(198));Ak||(Ak=!0,bD=l)}}function jh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VH(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function LB(t){if(jh(t)!==t)throw Error(Re(188))}function Hde(t){var e=t.alternate;if(!e){if(e=jh(t),e===null)throw Error(Re(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return LB(o),t;if(s===r)return LB(o),e;s=s.sibling}throw Error(Re(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(Re(189))}}if(n.alternate!==r)throw Error(Re(190))}if(n.tag!==3)throw Error(Re(188));return n.stateNode.current===n?t:e}function HH(t){return t=Hde(t),t!==null?GH(t):null}function GH(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GH(t);if(e!==null)return e;t=t.sibling}return null}var YH=Ti.unstable_scheduleCallback,BB=Ti.unstable_cancelCallback,Gde=Ti.unstable_shouldYield,Yde=Ti.unstable_requestPaint,Vr=Ti.unstable_now,qde=Ti.unstable_getCurrentPriorityLevel,r$=Ti.unstable_ImmediatePriority,qH=Ti.unstable_UserBlockingPriority,$k=Ti.unstable_NormalPriority,Kde=Ti.unstable_LowPriority,KH=Ti.unstable_IdlePriority,tS=null,Pu=null;function Xde(t){if(Pu&&typeof Pu.onCommitFiberRoot=="function")try{Pu.onCommitFiberRoot(tS,t,void 0,(t.current.flags&128)===128)}catch{}}var Ga=Math.clz32?Math.clz32:Zde,Qde=Math.log,Jde=Math.LN2;function Zde(t){return t>>>=0,t===0?32:31-(Qde(t)/Jde|0)|0}var $b=64,Mb=4194304;function Kv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mk(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=Kv(a):(s&=i,s!==0&&(r=Kv(s)))}else i=n&~o,i!==0?r=Kv(i):s!==0&&(r=Kv(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ga(e),o=1<<n,r|=t[n],e&=~o;return r}function efe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tfe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Ga(s),a=1<<i,u=o[i];u===-1?(!(a&n)||a&r)&&(o[i]=efe(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function wD(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XH(){var t=$b;return $b<<=1,!($b&4194240)&&($b=64),t}function VI(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sx(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ga(e),t[e]=n}function nfe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Ga(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function o$(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ga(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Pn=0;function QH(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JH,s$,ZH,eG,tG,kD=!1,Pb=[],dd=null,fd=null,hd=null,jy=new Map,Wy=new Map,Yc=[],rfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jB(t,e){switch(t){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":fd=null;break;case"mouseover":case"mouseout":hd=null;break;case"pointerover":case"pointerout":jy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wy.delete(e.pointerId)}}function yv(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=ax(e),e!==null&&s$(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function ofe(t,e,n,r,o){switch(e){case"focusin":return dd=yv(dd,t,e,n,r,o),!0;case"dragenter":return fd=yv(fd,t,e,n,r,o),!0;case"mouseover":return hd=yv(hd,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return jy.set(s,yv(jy.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Wy.set(s,yv(Wy.get(s)||null,t,e,n,r,o)),!0}return!1}function nG(t){var e=Ff(t.target);if(e!==null){var n=jh(e);if(n!==null){if(e=n.tag,e===13){if(e=VH(n),e!==null){t.blockedOn=e,tG(t.priority,function(){ZH(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jw(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=CD(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vD=r,n.target.dispatchEvent(r),vD=null}else return e=ax(n),e!==null&&s$(e),t.blockedOn=n,!1;e.shift()}return!0}function WB(t,e,n){Jw(t)&&n.delete(e)}function sfe(){kD=!1,dd!==null&&Jw(dd)&&(dd=null),fd!==null&&Jw(fd)&&(fd=null),hd!==null&&Jw(hd)&&(hd=null),jy.forEach(WB),Wy.forEach(WB)}function xv(t,e){t.blockedOn===e&&(t.blockedOn=null,kD||(kD=!0,Ti.unstable_scheduleCallback(Ti.unstable_NormalPriority,sfe)))}function zy(t){function e(o){return xv(o,t)}if(0<Pb.length){xv(Pb[0],t);for(var n=1;n<Pb.length;n++){var r=Pb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dd!==null&&xv(dd,t),fd!==null&&xv(fd,t),hd!==null&&xv(hd,t),jy.forEach(e),Wy.forEach(e),n=0;n<Yc.length;n++)r=Yc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yc.length&&(n=Yc[0],n.blockedOn===null);)nG(n),n.blockedOn===null&&Yc.shift()}var lm=hc.ReactCurrentBatchConfig,Pk=!0;function ife(t,e,n,r){var o=Pn,s=lm.transition;lm.transition=null;try{Pn=1,i$(t,e,n,r)}finally{Pn=o,lm.transition=s}}function afe(t,e,n,r){var o=Pn,s=lm.transition;lm.transition=null;try{Pn=4,i$(t,e,n,r)}finally{Pn=o,lm.transition=s}}function i$(t,e,n,r){if(Pk){var o=CD(t,e,n,r);if(o===null)eT(t,e,r,Fk,n),jB(t,r);else if(ofe(o,t,e,n,r))r.stopPropagation();else if(jB(t,r),e&4&&-1<rfe.indexOf(t)){for(;o!==null;){var s=ax(o);if(s!==null&&JH(s),s=CD(t,e,n,r),s===null&&eT(t,e,r,Fk,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else eT(t,e,r,null,n)}}var Fk=null;function CD(t,e,n,r){if(Fk=null,t=n$(r),t=Ff(t),t!==null)if(e=jh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VH(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fk=t,null}function rG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qde()){case r$:return 1;case qH:return 4;case $k:case Kde:return 16;case KH:return 536870912;default:return 16}default:return 16}}var Kc=null,a$=null,Zw=null;function oG(){if(Zw)return Zw;var t,e=a$,n=e.length,r,o="value"in Kc?Kc.value:Kc.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Zw=o.slice(t,1<r?1-r:void 0)}function ek(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fb(){return!0}function zB(){return!1}function Oi(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fb:zB,this.isPropagationStopped=zB,this}return Nr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fb)},persist:function(){},isPersistent:Fb}),e}var Sg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u$=Oi(Sg),ix=Nr({},Sg,{view:0,detail:0}),ufe=Oi(ix),HI,GI,bv,nS=Nr({},ix,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bv&&(bv&&t.type==="mousemove"?(HI=t.screenX-bv.screenX,GI=t.screenY-bv.screenY):GI=HI=0,bv=t),HI)},movementY:function(t){return"movementY"in t?t.movementY:GI}}),UB=Oi(nS),lfe=Nr({},nS,{dataTransfer:0}),cfe=Oi(lfe),dfe=Nr({},ix,{relatedTarget:0}),YI=Oi(dfe),ffe=Nr({},Sg,{animationName:0,elapsedTime:0,pseudoElement:0}),hfe=Oi(ffe),pfe=Nr({},Sg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mfe=Oi(pfe),gfe=Nr({},Sg,{data:0}),VB=Oi(gfe),vfe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yfe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xfe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bfe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xfe[t])?!!e[t]:!1}function l$(){return bfe}var wfe=Nr({},ix,{key:function(t){if(t.key){var e=vfe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ek(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yfe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l$,charCode:function(t){return t.type==="keypress"?ek(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ek(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kfe=Oi(wfe),Cfe=Nr({},nS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HB=Oi(Cfe),Sfe=Nr({},ix,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l$}),Efe=Oi(Sfe),_fe=Nr({},Sg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ife=Oi(_fe),Tfe=Nr({},nS,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nfe=Oi(Tfe),Dfe=[9,13,27,32],c$=Jl&&"CompositionEvent"in window,fy=null;Jl&&"documentMode"in document&&(fy=document.documentMode);var Rfe=Jl&&"TextEvent"in window&&!fy,sG=Jl&&(!c$||fy&&8<fy&&11>=fy),GB=" ",YB=!1;function iG(t,e){switch(t){case"keyup":return Dfe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Up=!1;function Ofe(t,e){switch(t){case"compositionend":return aG(e);case"keypress":return e.which!==32?null:(YB=!0,GB);case"textInput":return t=e.data,t===GB&&YB?null:t;default:return null}}function Afe(t,e){if(Up)return t==="compositionend"||!c$&&iG(t,e)?(t=oG(),Zw=a$=Kc=null,Up=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sG&&e.locale!=="ko"?null:e.data;default:return null}}var $fe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$fe[t.type]:e==="textarea"}function uG(t,e,n,r){BH(r),e=Lk(e,"onChange"),0<e.length&&(n=new u$("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hy=null,Uy=null;function Mfe(t){xG(t,0)}function rS(t){var e=Gp(t);if(OH(e))return t}function Pfe(t,e){if(t==="change")return e}var lG=!1;if(Jl){var qI;if(Jl){var KI="oninput"in document;if(!KI){var KB=document.createElement("div");KB.setAttribute("oninput","return;"),KI=typeof KB.oninput=="function"}qI=KI}else qI=!1;lG=qI&&(!document.documentMode||9<document.documentMode)}function XB(){hy&&(hy.detachEvent("onpropertychange",cG),Uy=hy=null)}function cG(t){if(t.propertyName==="value"&&rS(Uy)){var e=[];uG(e,Uy,t,n$(t)),UH(Mfe,e)}}function Ffe(t,e,n){t==="focusin"?(XB(),hy=e,Uy=n,hy.attachEvent("onpropertychange",cG)):t==="focusout"&&XB()}function Lfe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rS(Uy)}function Bfe(t,e){if(t==="click")return rS(e)}function jfe(t,e){if(t==="input"||t==="change")return rS(e)}function Wfe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ja=typeof Object.is=="function"?Object.is:Wfe;function Vy(t,e){if(Ja(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!sD.call(e,o)||!Ja(t[o],e[o]))return!1}return!0}function QB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function JB(t,e){var n=QB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=QB(n)}}function dG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fG(){for(var t=window,e=Rk();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rk(t.document)}return e}function d$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zfe(t){var e=fG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dG(n.ownerDocument.documentElement,n)){if(r!==null&&d$(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=JB(n,s);var i=JB(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ufe=Jl&&"documentMode"in document&&11>=document.documentMode,Vp=null,SD=null,py=null,ED=!1;function ZB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ED||Vp==null||Vp!==Rk(r)||(r=Vp,"selectionStart"in r&&d$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),py&&Vy(py,r)||(py=r,r=Lk(SD,"onSelect"),0<r.length&&(e=new u$("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vp)))}function Lb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hp={animationend:Lb("Animation","AnimationEnd"),animationiteration:Lb("Animation","AnimationIteration"),animationstart:Lb("Animation","AnimationStart"),transitionend:Lb("Transition","TransitionEnd")},XI={},hG={};Jl&&(hG=document.createElement("div").style,"AnimationEvent"in window||(delete Hp.animationend.animation,delete Hp.animationiteration.animation,delete Hp.animationstart.animation),"TransitionEvent"in window||delete Hp.transitionend.transition);function oS(t){if(XI[t])return XI[t];if(!Hp[t])return t;var e=Hp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hG)return XI[t]=e[n];return t}var pG=oS("animationend"),mG=oS("animationiteration"),gG=oS("animationstart"),vG=oS("transitionend"),yG=new Map,ej="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qd(t,e){yG.set(t,e),Bh(e,[t])}for(var QI=0;QI<ej.length;QI++){var JI=ej[QI],Vfe=JI.toLowerCase(),Hfe=JI[0].toUpperCase()+JI.slice(1);Qd(Vfe,"on"+Hfe)}Qd(pG,"onAnimationEnd");Qd(mG,"onAnimationIteration");Qd(gG,"onAnimationStart");Qd("dblclick","onDoubleClick");Qd("focusin","onFocus");Qd("focusout","onBlur");Qd(vG,"onTransitionEnd");$m("onMouseEnter",["mouseout","mouseover"]);$m("onMouseLeave",["mouseout","mouseover"]);$m("onPointerEnter",["pointerout","pointerover"]);$m("onPointerLeave",["pointerout","pointerover"]);Bh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gfe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xv));function tj(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Vde(r,e,void 0,t),t.currentTarget=null}function xG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&o.isPropagationStopped())break e;tj(o,a,l),s=u}else for(i=0;i<r.length;i++){if(a=r[i],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&o.isPropagationStopped())break e;tj(o,a,l),s=u}}}if(Ak)throw t=bD,Ak=!1,bD=null,t}function tr(t,e){var n=e[DD];n===void 0&&(n=e[DD]=new Set);var r=t+"__bubble";n.has(r)||(bG(e,t,2,!1),n.add(r))}function ZI(t,e,n){var r=0;e&&(r|=4),bG(n,t,r,e)}var Bb="_reactListening"+Math.random().toString(36).slice(2);function Hy(t){if(!t[Bb]){t[Bb]=!0,IH.forEach(function(n){n!=="selectionchange"&&(Gfe.has(n)||ZI(n,!1,t),ZI(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bb]||(e[Bb]=!0,ZI("selectionchange",!1,e))}}function bG(t,e,n,r){switch(rG(e)){case 1:var o=ife;break;case 4:o=afe;break;default:o=i$}n=o.bind(null,e,n,t),o=void 0,!xD||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function eT(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;i=i.return}for(;a!==null;){if(i=Ff(a),i===null)return;if(u=i.tag,u===5||u===6){r=s=i;continue e}a=a.parentNode}}r=r.return}UH(function(){var l=s,c=n$(n),d=[];e:{var f=yG.get(t);if(f!==void 0){var h=u$,p=t;switch(t){case"keypress":if(ek(n)===0)break e;case"keydown":case"keyup":h=kfe;break;case"focusin":p="focus",h=YI;break;case"focusout":p="blur",h=YI;break;case"beforeblur":case"afterblur":h=YI;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=UB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=cfe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Efe;break;case pG:case mG:case gG:h=hfe;break;case vG:h=Ife;break;case"scroll":h=ufe;break;case"wheel":h=Nfe;break;case"copy":case"cut":case"paste":h=mfe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=HB}var m=(e&4)!==0,g=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var y=l,x;y!==null;){x=y;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,v!==null&&(b=By(y,v),b!=null&&m.push(Gy(y,b,x)))),g)break;y=y.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==vD&&(p=n.relatedTarget||n.fromElement)&&(Ff(p)||p[Zl]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Ff(p):null,p!==null&&(g=jh(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=UB,b="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=HB,b="onPointerLeave",v="onPointerEnter",y="pointer"),g=h==null?f:Gp(h),x=p==null?f:Gp(p),f=new m(b,y+"leave",h,n,c),f.target=g,f.relatedTarget=x,b=null,Ff(c)===l&&(m=new m(v,y+"enter",p,n,c),m.target=x,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,v=p,y=0,x=m;x;x=yp(x))y++;for(x=0,b=v;b;b=yp(b))x++;for(;0<y-x;)m=yp(m),y--;for(;0<x-y;)v=yp(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=yp(m),v=yp(v)}m=null}else m=null;h!==null&&nj(d,f,h,m,!1),p!==null&&g!==null&&nj(d,g,p,m,!0)}}e:{if(f=l?Gp(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var C=Pfe;else if(qB(f))if(lG)C=jfe;else{C=Lfe;var S=Ffe}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Bfe);if(C&&(C=C(t,l))){uG(d,C,n,c);break e}S&&S(t,f,l),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&fD(f,"number",f.value)}switch(S=l?Gp(l):window,t){case"focusin":(qB(S)||S.contentEditable==="true")&&(Vp=S,SD=l,py=null);break;case"focusout":py=SD=Vp=null;break;case"mousedown":ED=!0;break;case"contextmenu":case"mouseup":case"dragend":ED=!1,ZB(d,n,c);break;case"selectionchange":if(Ufe)break;case"keydown":case"keyup":ZB(d,n,c)}var E;if(c$)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Up?iG(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(sG&&n.locale!=="ko"&&(Up||I!=="onCompositionStart"?I==="onCompositionEnd"&&Up&&(E=oG()):(Kc=c,a$="value"in Kc?Kc.value:Kc.textContent,Up=!0)),S=Lk(l,I),0<S.length&&(I=new VB(I,t,null,n,c),d.push({event:I,listeners:S}),E?I.data=E:(E=aG(n),E!==null&&(I.data=E)))),(E=Rfe?Ofe(t,n):Afe(t,n))&&(l=Lk(l,"onBeforeInput"),0<l.length&&(c=new VB("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:l}),c.data=E))}xG(d,e)})}function Gy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lk(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=By(t,n),s!=null&&r.unshift(Gy(t,s,o)),s=By(t,e),s!=null&&r.push(Gy(t,s,o))),t=t.return}return r}function yp(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nj(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,o?(u=By(n,s),u!=null&&i.unshift(Gy(n,u,a))):o||(u=By(n,s),u!=null&&i.push(Gy(n,u,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var Yfe=/\r\n?/g,qfe=/\u0000|\uFFFD/g;function rj(t){return(typeof t=="string"?t:""+t).replace(Yfe,`
`).replace(qfe,"")}function jb(t,e,n){if(e=rj(e),rj(t)!==e&&n)throw Error(Re(425))}function Bk(){}var _D=null,ID=null;function TD(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ND=typeof setTimeout=="function"?setTimeout:void 0,Kfe=typeof clearTimeout=="function"?clearTimeout:void 0,oj=typeof Promise=="function"?Promise:void 0,Xfe=typeof queueMicrotask=="function"?queueMicrotask:typeof oj<"u"?function(t){return oj.resolve(null).then(t).catch(Qfe)}:ND;function Qfe(t){setTimeout(function(){throw t})}function tT(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),zy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);zy(e)}function pd(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sj(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eg=Math.random().toString(36).slice(2),_u="__reactFiber$"+Eg,Yy="__reactProps$"+Eg,Zl="__reactContainer$"+Eg,DD="__reactEvents$"+Eg,Jfe="__reactListeners$"+Eg,Zfe="__reactHandles$"+Eg;function Ff(t){var e=t[_u];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zl]||n[_u]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sj(t);t!==null;){if(n=t[_u])return n;t=sj(t)}return e}t=n,n=t.parentNode}return null}function ax(t){return t=t[_u]||t[Zl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Re(33))}function sS(t){return t[Yy]||null}var RD=[],Yp=-1;function Jd(t){return{current:t}}function or(t){0>Yp||(t.current=RD[Yp],RD[Yp]=null,Yp--)}function qn(t,e){Yp++,RD[Yp]=t.current,t.current=e}var Ad={},vs=Jd(Ad),Qs=Jd(!1),uh=Ad;function Mm(t,e){var n=t.type.contextTypes;if(!n)return Ad;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Js(t){return t=t.childContextTypes,t!=null}function jk(){or(Qs),or(vs)}function ij(t,e,n){if(vs.current!==Ad)throw Error(Re(168));qn(vs,e),qn(Qs,n)}function wG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(Re(108,Fde(t)||"Unknown",o));return Nr({},n,r)}function Wk(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ad,uh=vs.current,qn(vs,t),qn(Qs,Qs.current),!0}function aj(t,e,n){var r=t.stateNode;if(!r)throw Error(Re(169));n?(t=wG(t,e,uh),r.__reactInternalMemoizedMergedChildContext=t,or(Qs),or(vs),qn(vs,t)):or(Qs),qn(Qs,n)}var Ol=null,iS=!1,nT=!1;function kG(t){Ol===null?Ol=[t]:Ol.push(t)}function ehe(t){iS=!0,kG(t)}function Zd(){if(!nT&&Ol!==null){nT=!0;var t=0,e=Pn;try{var n=Ol;for(Pn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ol=null,iS=!1}catch(o){throw Ol!==null&&(Ol=Ol.slice(t+1)),YH(r$,Zd),o}finally{Pn=e,nT=!1}}return null}var qp=[],Kp=0,zk=null,Uk=0,Vi=[],Hi=0,lh=null,jl=1,Wl="";function Ef(t,e){qp[Kp++]=Uk,qp[Kp++]=zk,zk=t,Uk=e}function CG(t,e,n){Vi[Hi++]=jl,Vi[Hi++]=Wl,Vi[Hi++]=lh,lh=t;var r=jl;t=Wl;var o=32-Ga(r)-1;r&=~(1<<o),n+=1;var s=32-Ga(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,jl=1<<32-Ga(e)+o|n<<o|r,Wl=s+t}else jl=1<<s|n<<o|r,Wl=t}function f$(t){t.return!==null&&(Ef(t,1),CG(t,1,0))}function h$(t){for(;t===zk;)zk=qp[--Kp],qp[Kp]=null,Uk=qp[--Kp],qp[Kp]=null;for(;t===lh;)lh=Vi[--Hi],Vi[Hi]=null,Wl=Vi[--Hi],Vi[Hi]=null,jl=Vi[--Hi],Vi[Hi]=null}var Si=null,gi=null,mr=!1,Ra=null;function SG(t,e){var n=Zi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uj(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Si=t,gi=pd(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Si=t,gi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lh!==null?{id:jl,overflow:Wl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Si=t,gi=null,!0):!1;default:return!1}}function OD(t){return(t.mode&1)!==0&&(t.flags&128)===0}function AD(t){if(mr){var e=gi;if(e){var n=e;if(!uj(t,e)){if(OD(t))throw Error(Re(418));e=pd(n.nextSibling);var r=Si;e&&uj(t,e)?SG(r,n):(t.flags=t.flags&-4097|2,mr=!1,Si=t)}}else{if(OD(t))throw Error(Re(418));t.flags=t.flags&-4097|2,mr=!1,Si=t}}}function lj(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Si=t}function Wb(t){if(t!==Si)return!1;if(!mr)return lj(t),mr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!TD(t.type,t.memoizedProps)),e&&(e=gi)){if(OD(t))throw EG(),Error(Re(418));for(;e;)SG(t,e),e=pd(e.nextSibling)}if(lj(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gi=pd(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gi=null}}else gi=Si?pd(t.stateNode.nextSibling):null;return!0}function EG(){for(var t=gi;t;)t=pd(t.nextSibling)}function Pm(){gi=Si=null,mr=!1}function p$(t){Ra===null?Ra=[t]:Ra.push(t)}var the=hc.ReactCurrentBatchConfig;function Ta(t,e){if(t&&t.defaultProps){e=Nr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Vk=Jd(null),Hk=null,Xp=null,m$=null;function g$(){m$=Xp=Hk=null}function v$(t){var e=Vk.current;or(Vk),t._currentValue=e}function $D(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cm(t,e){Hk=t,m$=Xp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qs=!0),t.firstContext=null)}function la(t){var e=t._currentValue;if(m$!==t)if(t={context:t,memoizedValue:e,next:null},Xp===null){if(Hk===null)throw Error(Re(308));Xp=t,Hk.dependencies={lanes:0,firstContext:t}}else Xp=Xp.next=t;return e}var Lf=null;function y$(t){Lf===null?Lf=[t]:Lf.push(t)}function _G(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,y$(e)):(n.next=o.next,o.next=n),e.interleaved=n,ec(t,r)}function ec(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zc=!1;function x$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function md(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,bn&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,ec(t,n)}return o=r.interleaved,o===null?(e.next=e,y$(r)):(e.next=o.next,o.next=e),r.interleaved=e,ec(t,n)}function tk(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o$(t,n)}}function cj(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gk(t,e,n,r){var o=t.updateQueue;zc=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var u=a,l=u.next;u.next=null,i===null?s=l:i.next=l,i=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==i&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var d=o.baseState;i=0,c=l=u=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Nr({},d,f);break e;case 2:zc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=d):c=c.next=h,i|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(c===null&&(u=d),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=c,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);dh|=i,t.lanes=i,t.memoizedState=d}}function dj(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Re(191,o));o.call(r)}}}var TG=new _H.Component().refs;function MD(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Nr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var aS={isMounted:function(t){return(t=t._reactInternals)?jh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rs(),o=vd(t),s=Hl(r,o);s.payload=e,n!=null&&(s.callback=n),e=md(t,s,o),e!==null&&(Ya(e,t,o,r),tk(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rs(),o=vd(t),s=Hl(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=md(t,s,o),e!==null&&(Ya(e,t,o,r),tk(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rs(),r=vd(t),o=Hl(n,r);o.tag=2,e!=null&&(o.callback=e),e=md(t,o,r),e!==null&&(Ya(e,t,r,n),tk(e,t,r))}};function fj(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Vy(n,r)||!Vy(o,s):!0}function NG(t,e,n){var r=!1,o=Ad,s=e.contextType;return typeof s=="object"&&s!==null?s=la(s):(o=Js(e)?uh:vs.current,r=e.contextTypes,s=(r=r!=null)?Mm(t,o):Ad),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=aS,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function hj(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&aS.enqueueReplaceState(e,e.state,null)}function PD(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=TG,x$(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=la(s):(s=Js(e)?uh:vs.current,o.context=Mm(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(MD(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&aS.enqueueReplaceState(o,o.state,null),Gk(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function wv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Re(309));var r=n.stateNode}if(!r)throw Error(Re(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=o.refs;a===TG&&(a=o.refs={}),i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(Re(284));if(!n._owner)throw Error(Re(290,t))}return t}function zb(t,e){throw t=Object.prototype.toString.call(e),Error(Re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pj(t){var e=t._init;return e(t._payload)}function DG(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function o(v,y){return v=yd(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function i(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,x,b){return y===null||y.tag!==6?(y=lT(x,v.mode,b),y.return=v,y):(y=o(y,x),y.return=v,y)}function u(v,y,x,b){var C=x.type;return C===zp?c(v,y,x.props.children,b,x.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wc&&pj(C)===y.type)?(b=o(y,x.props),b.ref=wv(v,y,x),b.return=v,b):(b=ak(x.type,x.key,x.props,null,v.mode,b),b.ref=wv(v,y,x),b.return=v,b)}function l(v,y,x,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=cT(x,v.mode,b),y.return=v,y):(y=o(y,x.children||[]),y.return=v,y)}function c(v,y,x,b,C){return y===null||y.tag!==7?(y=Qf(x,v.mode,b,C),y.return=v,y):(y=o(y,x),y.return=v,y)}function d(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=lT(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rb:return x=ak(y.type,y.key,y.props,null,v.mode,x),x.ref=wv(v,null,y),x.return=v,x;case Wp:return y=cT(y,v.mode,x),y.return=v,y;case Wc:var b=y._init;return d(v,b(y._payload),x)}if(qv(y)||gv(y))return y=Qf(y,v.mode,x,null),y.return=v,y;zb(v,y)}return null}function f(v,y,x,b){var C=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:a(v,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rb:return x.key===C?u(v,y,x,b):null;case Wp:return x.key===C?l(v,y,x,b):null;case Wc:return C=x._init,f(v,y,C(x._payload),b)}if(qv(x)||gv(x))return C!==null?null:c(v,y,x,b,null);zb(v,x)}return null}function h(v,y,x,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(x)||null,a(y,v,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Rb:return v=v.get(b.key===null?x:b.key)||null,u(y,v,b,C);case Wp:return v=v.get(b.key===null?x:b.key)||null,l(y,v,b,C);case Wc:var S=b._init;return h(v,y,x,S(b._payload),C)}if(qv(b)||gv(b))return v=v.get(x)||null,c(y,v,b,C,null);zb(y,b)}return null}function p(v,y,x,b){for(var C=null,S=null,E=y,I=y=0,T=null;E!==null&&I<x.length;I++){E.index>I?(T=E,E=null):T=E.sibling;var N=f(v,E,x[I],b);if(N===null){E===null&&(E=T);break}t&&E&&N.alternate===null&&e(v,E),y=s(N,y,I),S===null?C=N:S.sibling=N,S=N,E=T}if(I===x.length)return n(v,E),mr&&Ef(v,I),C;if(E===null){for(;I<x.length;I++)E=d(v,x[I],b),E!==null&&(y=s(E,y,I),S===null?C=E:S.sibling=E,S=E);return mr&&Ef(v,I),C}for(E=r(v,E);I<x.length;I++)T=h(E,v,I,x[I],b),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?I:T.key),y=s(T,y,I),S===null?C=T:S.sibling=T,S=T);return t&&E.forEach(function(O){return e(v,O)}),mr&&Ef(v,I),C}function m(v,y,x,b){var C=gv(x);if(typeof C!="function")throw Error(Re(150));if(x=C.call(x),x==null)throw Error(Re(151));for(var S=C=null,E=y,I=y=0,T=null,N=x.next();E!==null&&!N.done;I++,N=x.next()){E.index>I?(T=E,E=null):T=E.sibling;var O=f(v,E,N.value,b);if(O===null){E===null&&(E=T);break}t&&E&&O.alternate===null&&e(v,E),y=s(O,y,I),S===null?C=O:S.sibling=O,S=O,E=T}if(N.done)return n(v,E),mr&&Ef(v,I),C;if(E===null){for(;!N.done;I++,N=x.next())N=d(v,N.value,b),N!==null&&(y=s(N,y,I),S===null?C=N:S.sibling=N,S=N);return mr&&Ef(v,I),C}for(E=r(v,E);!N.done;I++,N=x.next())N=h(E,v,I,N.value,b),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?I:N.key),y=s(N,y,I),S===null?C=N:S.sibling=N,S=N);return t&&E.forEach(function($){return e(v,$)}),mr&&Ef(v,I),C}function g(v,y,x,b){if(typeof x=="object"&&x!==null&&x.type===zp&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Rb:e:{for(var C=x.key,S=y;S!==null;){if(S.key===C){if(C=x.type,C===zp){if(S.tag===7){n(v,S.sibling),y=o(S,x.props.children),y.return=v,v=y;break e}}else if(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Wc&&pj(C)===S.type){n(v,S.sibling),y=o(S,x.props),y.ref=wv(v,S,x),y.return=v,v=y;break e}n(v,S);break}else e(v,S);S=S.sibling}x.type===zp?(y=Qf(x.props.children,v.mode,b,x.key),y.return=v,v=y):(b=ak(x.type,x.key,x.props,null,v.mode,b),b.ref=wv(v,y,x),b.return=v,v=b)}return i(v);case Wp:e:{for(S=x.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=o(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=cT(x,v.mode,b),y.return=v,v=y}return i(v);case Wc:return S=x._init,g(v,y,S(x._payload),b)}if(qv(x))return p(v,y,x,b);if(gv(x))return m(v,y,x,b);zb(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=o(y,x),y.return=v,v=y):(n(v,y),y=lT(x,v.mode,b),y.return=v,v=y),i(v)):n(v,y)}return g}var Fm=DG(!0),RG=DG(!1),ux={},Fu=Jd(ux),qy=Jd(ux),Ky=Jd(ux);function Bf(t){if(t===ux)throw Error(Re(174));return t}function b$(t,e){switch(qn(Ky,e),qn(qy,t),qn(Fu,ux),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pD(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pD(e,t)}or(Fu),qn(Fu,e)}function Lm(){or(Fu),or(qy),or(Ky)}function OG(t){Bf(Ky.current);var e=Bf(Fu.current),n=pD(e,t.type);e!==n&&(qn(qy,t),qn(Fu,n))}function w$(t){qy.current===t&&(or(Fu),or(qy))}var Sr=Jd(0);function Yk(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rT=[];function k$(){for(var t=0;t<rT.length;t++)rT[t]._workInProgressVersionPrimary=null;rT.length=0}var nk=hc.ReactCurrentDispatcher,oT=hc.ReactCurrentBatchConfig,ch=0,Tr=null,fo=null,_o=null,qk=!1,my=!1,Xy=0,nhe=0;function es(){throw Error(Re(321))}function C$(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ja(t[n],e[n]))return!1;return!0}function S$(t,e,n,r,o,s){if(ch=s,Tr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nk.current=t===null||t.memoizedState===null?ihe:ahe,t=n(r,o),my){s=0;do{if(my=!1,Xy=0,25<=s)throw Error(Re(301));s+=1,_o=fo=null,e.updateQueue=null,nk.current=uhe,t=n(r,o)}while(my)}if(nk.current=Kk,e=fo!==null&&fo.next!==null,ch=0,_o=fo=Tr=null,qk=!1,e)throw Error(Re(300));return t}function E$(){var t=Xy!==0;return Xy=0,t}function vu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _o===null?Tr.memoizedState=_o=t:_o=_o.next=t,_o}function ca(){if(fo===null){var t=Tr.alternate;t=t!==null?t.memoizedState:null}else t=fo.next;var e=_o===null?Tr.memoizedState:_o.next;if(e!==null)_o=e,fo=t;else{if(t===null)throw Error(Re(310));fo=t,t={memoizedState:fo.memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},_o===null?Tr.memoizedState=_o=t:_o=_o.next=t}return _o}function Qy(t,e){return typeof e=="function"?e(t):e}function sT(t){var e=ca(),n=e.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=t;var r=fo,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,u=null,l=s;do{var c=l.lane;if((ch&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=d,i=r):u=u.next=d,Tr.lanes|=c,dh|=c}l=l.next}while(l!==null&&l!==s);u===null?i=r:u.next=a,Ja(r,e.memoizedState)||(qs=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,Tr.lanes|=s,dh|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iT(t){var e=ca(),n=e.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Ja(s,e.memoizedState)||(qs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function AG(){}function $G(t,e){var n=Tr,r=ca(),o=e(),s=!Ja(r.memoizedState,o);if(s&&(r.memoizedState=o,qs=!0),r=r.queue,_$(FG.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||_o!==null&&_o.memoizedState.tag&1){if(n.flags|=2048,Jy(9,PG.bind(null,n,r,o,e),void 0,null),To===null)throw Error(Re(349));ch&30||MG(n,e,o)}return o}function MG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tr.updateQueue,e===null?(e={lastEffect:null,stores:null},Tr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function PG(t,e,n,r){e.value=n,e.getSnapshot=r,LG(e)&&BG(t)}function FG(t,e,n){return n(function(){LG(e)&&BG(t)})}function LG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ja(t,n)}catch{return!0}}function BG(t){var e=ec(t,1);e!==null&&Ya(e,t,1,-1)}function mj(t){var e=vu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qy,lastRenderedState:t},e.queue=t,t=t.dispatch=she.bind(null,Tr,t),[e.memoizedState,t]}function Jy(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Tr.updateQueue,e===null?(e={lastEffect:null,stores:null},Tr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jG(){return ca().memoizedState}function rk(t,e,n,r){var o=vu();Tr.flags|=t,o.memoizedState=Jy(1|e,n,void 0,r===void 0?null:r)}function uS(t,e,n,r){var o=ca();r=r===void 0?null:r;var s=void 0;if(fo!==null){var i=fo.memoizedState;if(s=i.destroy,r!==null&&C$(r,i.deps)){o.memoizedState=Jy(e,n,s,r);return}}Tr.flags|=t,o.memoizedState=Jy(1|e,n,s,r)}function gj(t,e){return rk(8390656,8,t,e)}function _$(t,e){return uS(2048,8,t,e)}function WG(t,e){return uS(4,2,t,e)}function zG(t,e){return uS(4,4,t,e)}function UG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function VG(t,e,n){return n=n!=null?n.concat([t]):null,uS(4,4,UG.bind(null,e,t),n)}function I$(){}function HG(t,e){var n=ca();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&C$(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function GG(t,e){var n=ca();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&C$(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function YG(t,e,n){return ch&21?(Ja(n,e)||(n=XH(),Tr.lanes|=n,dh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qs=!0),t.memoizedState=n)}function rhe(t,e){var n=Pn;Pn=n!==0&&4>n?n:4,t(!0);var r=oT.transition;oT.transition={};try{t(!1),e()}finally{Pn=n,oT.transition=r}}function qG(){return ca().memoizedState}function ohe(t,e,n){var r=vd(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KG(t))XG(e,n);else if(n=_G(t,e,n,r),n!==null){var o=Rs();Ya(n,t,r,o),QG(n,e,r)}}function she(t,e,n){var r=vd(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KG(t))XG(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Ja(a,i)){var u=e.interleaved;u===null?(o.next=o,y$(e)):(o.next=u.next,u.next=o),e.interleaved=o;return}}catch{}finally{}n=_G(t,e,o,r),n!==null&&(o=Rs(),Ya(n,t,r,o),QG(n,e,r))}}function KG(t){var e=t.alternate;return t===Tr||e!==null&&e===Tr}function XG(t,e){my=qk=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QG(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o$(t,n)}}var Kk={readContext:la,useCallback:es,useContext:es,useEffect:es,useImperativeHandle:es,useInsertionEffect:es,useLayoutEffect:es,useMemo:es,useReducer:es,useRef:es,useState:es,useDebugValue:es,useDeferredValue:es,useTransition:es,useMutableSource:es,useSyncExternalStore:es,useId:es,unstable_isNewReconciler:!1},ihe={readContext:la,useCallback:function(t,e){return vu().memoizedState=[t,e===void 0?null:e],t},useContext:la,useEffect:gj,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rk(4194308,4,UG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rk(4194308,4,t,e)},useInsertionEffect:function(t,e){return rk(4,2,t,e)},useMemo:function(t,e){var n=vu();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vu();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ohe.bind(null,Tr,t),[r.memoizedState,t]},useRef:function(t){var e=vu();return t={current:t},e.memoizedState=t},useState:mj,useDebugValue:I$,useDeferredValue:function(t){return vu().memoizedState=t},useTransition:function(){var t=mj(!1),e=t[0];return t=rhe.bind(null,t[1]),vu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Tr,o=vu();if(mr){if(n===void 0)throw Error(Re(407));n=n()}else{if(n=e(),To===null)throw Error(Re(349));ch&30||MG(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,gj(FG.bind(null,r,s,t),[t]),r.flags|=2048,Jy(9,PG.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vu(),e=To.identifierPrefix;if(mr){var n=Wl,r=jl;n=(r&~(1<<32-Ga(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xy++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nhe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ahe={readContext:la,useCallback:HG,useContext:la,useEffect:_$,useImperativeHandle:VG,useInsertionEffect:WG,useLayoutEffect:zG,useMemo:GG,useReducer:sT,useRef:jG,useState:function(){return sT(Qy)},useDebugValue:I$,useDeferredValue:function(t){var e=ca();return YG(e,fo.memoizedState,t)},useTransition:function(){var t=sT(Qy)[0],e=ca().memoizedState;return[t,e]},useMutableSource:AG,useSyncExternalStore:$G,useId:qG,unstable_isNewReconciler:!1},uhe={readContext:la,useCallback:HG,useContext:la,useEffect:_$,useImperativeHandle:VG,useInsertionEffect:WG,useLayoutEffect:zG,useMemo:GG,useReducer:iT,useRef:jG,useState:function(){return iT(Qy)},useDebugValue:I$,useDeferredValue:function(t){var e=ca();return fo===null?e.memoizedState=t:YG(e,fo.memoizedState,t)},useTransition:function(){var t=iT(Qy)[0],e=ca().memoizedState;return[t,e]},useMutableSource:AG,useSyncExternalStore:$G,useId:qG,unstable_isNewReconciler:!1};function Bm(t,e){try{var n="",r=e;do n+=Pde(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function aT(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function FD(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lhe=typeof WeakMap=="function"?WeakMap:Map;function JG(t,e,n){n=Hl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qk||(Qk=!0,YD=r),FD(t,e)},n}function ZG(t,e,n){n=Hl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){FD(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){FD(t,e),typeof r!="function"&&(gd===null?gd=new Set([this]):gd.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function vj(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lhe;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=Che.bind(null,t,e,n),e.then(t,t))}function yj(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xj(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hl(-1,1),e.tag=2,md(n,e,1))),n.lanes|=1),t)}var che=hc.ReactCurrentOwner,qs=!1;function Es(t,e,n,r){e.child=t===null?RG(e,null,n,r):Fm(e,t.child,n,r)}function bj(t,e,n,r,o){n=n.render;var s=e.ref;return cm(e,o),r=S$(t,e,n,r,s,o),n=E$(),t!==null&&!qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,tc(t,e,o)):(mr&&n&&f$(e),e.flags|=1,Es(t,e,r,o),e.child)}function wj(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!M$(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,e8(t,e,s,r,o)):(t=ak(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vy,n(i,r)&&t.ref===e.ref)return tc(t,e,o)}return e.flags|=1,t=yd(s,r),t.ref=e.ref,t.return=e,e.child=t}function e8(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Vy(s,r)&&t.ref===e.ref)if(qs=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(qs=!0);else return e.lanes=t.lanes,tc(t,e,o)}return LD(t,e,n,r,o)}function t8(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qn(Jp,di),di|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qn(Jp,di),di|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,qn(Jp,di),di|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,qn(Jp,di),di|=r;return Es(t,e,o,n),e.child}function n8(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function LD(t,e,n,r,o){var s=Js(n)?uh:vs.current;return s=Mm(e,s),cm(e,o),n=S$(t,e,n,r,s,o),r=E$(),t!==null&&!qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,tc(t,e,o)):(mr&&r&&f$(e),e.flags|=1,Es(t,e,n,o),e.child)}function kj(t,e,n,r,o){if(Js(n)){var s=!0;Wk(e)}else s=!1;if(cm(e,o),e.stateNode===null)ok(t,e),NG(e,n,r),PD(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var u=i.context,l=n.contextType;typeof l=="object"&&l!==null?l=la(l):(l=Js(n)?uh:vs.current,l=Mm(e,l));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||u!==l)&&hj(e,i,r,l),zc=!1;var f=e.memoizedState;i.state=f,Gk(e,r,i,o),u=e.memoizedState,a!==r||f!==u||Qs.current||zc?(typeof c=="function"&&(MD(e,n,c,r),u=e.memoizedState),(a=zc||fj(e,n,a,r,f,u,l))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),i.props=r,i.state=u,i.context=l,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,IG(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ta(e.type,a),i.props=l,d=e.pendingProps,f=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=la(u):(u=Js(n)?uh:vs.current,u=Mm(e,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||f!==u)&&hj(e,i,r,u),zc=!1,f=e.memoizedState,i.state=f,Gk(e,r,i,o);var p=e.memoizedState;a!==d||f!==p||Qs.current||zc?(typeof h=="function"&&(MD(e,n,h,r),p=e.memoizedState),(l=zc||fj(e,n,l,r,f,p,u)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,u)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),i.props=r,i.state=p,i.context=u,r=l):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return BD(t,e,n,r,s,o)}function BD(t,e,n,r,o,s){n8(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&aj(e,n,!1),tc(t,e,s);r=e.stateNode,che.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Fm(e,t.child,null,s),e.child=Fm(e,null,a,s)):Es(t,e,a,s),e.memoizedState=r.state,o&&aj(e,n,!0),e.child}function r8(t){var e=t.stateNode;e.pendingContext?ij(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ij(t,e.context,!1),b$(t,e.containerInfo)}function Cj(t,e,n,r,o){return Pm(),p$(o),e.flags|=256,Es(t,e,n,r),e.child}var jD={dehydrated:null,treeContext:null,retryLane:0};function WD(t){return{baseLanes:t,cachePool:null,transitions:null}}function o8(t,e,n){var r=e.pendingProps,o=Sr.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),qn(Sr,o&1),t===null)return AD(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=dS(i,r,0,null),t=Qf(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=WD(n),e.memoizedState=jD,t):T$(e,i));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return dhe(t,e,i,r,a,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,a=o.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=yd(o,u),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=yd(a,s):(s=Qf(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?WD(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=jD,r}return s=t.child,t=s.sibling,r=yd(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function T$(t,e){return e=dS({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ub(t,e,n,r){return r!==null&&p$(r),Fm(e,t.child,null,n),t=T$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dhe(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=aT(Error(Re(422))),Ub(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=dS({mode:"visible",children:r.children},o,0,null),s=Qf(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fm(e,t.child,null,i),e.child.memoizedState=WD(i),e.memoizedState=jD,s);if(!(e.mode&1))return Ub(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Re(419)),r=aT(s,r,void 0),Ub(t,e,i,r)}if(a=(i&t.childLanes)!==0,qs||a){if(r=To,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,ec(t,o),Ya(r,t,o,-1))}return $$(),r=aT(Error(Re(421))),Ub(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=She.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,gi=pd(o.nextSibling),Si=e,mr=!0,Ra=null,t!==null&&(Vi[Hi++]=jl,Vi[Hi++]=Wl,Vi[Hi++]=lh,jl=t.id,Wl=t.overflow,lh=e),e=T$(e,r.children),e.flags|=4096,e)}function Sj(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$D(t.return,e,n)}function uT(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function s8(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(Es(t,e,r.children,n),r=Sr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sj(t,n,e);else if(t.tag===19)Sj(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(qn(Sr,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Yk(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),uT(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Yk(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}uT(e,!0,n,null,s);break;case"together":uT(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ok(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),dh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Re(153));if(e.child!==null){for(t=e.child,n=yd(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yd(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fhe(t,e,n){switch(e.tag){case 3:r8(e),Pm();break;case 5:OG(e);break;case 1:Js(e.type)&&Wk(e);break;case 4:b$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;qn(Vk,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qn(Sr,Sr.current&1),e.flags|=128,null):n&e.child.childLanes?o8(t,e,n):(qn(Sr,Sr.current&1),t=tc(t,e,n),t!==null?t.sibling:null);qn(Sr,Sr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return s8(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),qn(Sr,Sr.current),r)break;return null;case 22:case 23:return e.lanes=0,t8(t,e,n)}return tc(t,e,n)}var i8,zD,a8,u8;i8=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zD=function(){};a8=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Bf(Fu.current);var s=null;switch(n){case"input":o=cD(t,o),r=cD(t,r),s=[];break;case"select":o=Nr({},o,{value:void 0}),r=Nr({},r,{value:void 0}),s=[];break;case"textarea":o=hD(t,o),r=hD(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bk)}mD(n,r);var i;n=null;for(l in o)if(!r.hasOwnProperty(l)&&o.hasOwnProperty(l)&&o[l]!=null)if(l==="style"){var a=o[l];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Fy.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=o!=null?o[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(i in a)!a.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&a[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Fy.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&tr("scroll",t),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};u8=function(t,e,n,r){n!==r&&(e.flags|=4)};function kv(t,e){if(!mr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ts(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hhe(t,e,n){var r=e.pendingProps;switch(h$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ts(e),null;case 1:return Js(e.type)&&jk(),ts(e),null;case 3:return r=e.stateNode,Lm(),or(Qs),or(vs),k$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wb(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ra!==null&&(XD(Ra),Ra=null))),zD(t,e),ts(e),null;case 5:w$(e);var o=Bf(Ky.current);if(n=e.type,t!==null&&e.stateNode!=null)a8(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Re(166));return ts(e),null}if(t=Bf(Fu.current),Wb(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[_u]=e,r[Yy]=s,t=(e.mode&1)!==0,n){case"dialog":tr("cancel",r),tr("close",r);break;case"iframe":case"object":case"embed":tr("load",r);break;case"video":case"audio":for(o=0;o<Xv.length;o++)tr(Xv[o],r);break;case"source":tr("error",r);break;case"img":case"image":case"link":tr("error",r),tr("load",r);break;case"details":tr("toggle",r);break;case"input":AB(r,s),tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tr("invalid",r);break;case"textarea":MB(r,s),tr("invalid",r)}mD(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&jb(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&jb(r.textContent,a,t),o=["children",""+a]):Fy.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&tr("scroll",r)}switch(n){case"input":Ob(r),$B(r,s,!0);break;case"textarea":Ob(r),PB(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bk)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[_u]=e,t[Yy]=r,i8(t,e,!1,!1),e.stateNode=t;e:{switch(i=gD(n,r),n){case"dialog":tr("cancel",t),tr("close",t),o=r;break;case"iframe":case"object":case"embed":tr("load",t),o=r;break;case"video":case"audio":for(o=0;o<Xv.length;o++)tr(Xv[o],t);o=r;break;case"source":tr("error",t),o=r;break;case"img":case"image":case"link":tr("error",t),tr("load",t),o=r;break;case"details":tr("toggle",t),o=r;break;case"input":AB(t,r),o=cD(t,r),tr("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Nr({},r,{value:void 0}),tr("invalid",t);break;case"textarea":MB(t,r),o=hD(t,r),tr("invalid",t);break;default:o=r}mD(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?LH(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&PH(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ly(t,u):typeof u=="number"&&Ly(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fy.hasOwnProperty(s)?u!=null&&s==="onScroll"&&tr("scroll",t):u!=null&&JA(t,s,u,i))}switch(n){case"input":Ob(t),$B(t,r,!1);break;case"textarea":Ob(t),PB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Od(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?im(t,!!r.multiple,s,!1):r.defaultValue!=null&&im(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Bk)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ts(e),null;case 6:if(t&&e.stateNode!=null)u8(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Re(166));if(n=Bf(Ky.current),Bf(Fu.current),Wb(e)){if(r=e.stateNode,n=e.memoizedProps,r[_u]=e,(s=r.nodeValue!==n)&&(t=Si,t!==null))switch(t.tag){case 3:jb(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jb(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_u]=e,e.stateNode=r}return ts(e),null;case 13:if(or(Sr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mr&&gi!==null&&e.mode&1&&!(e.flags&128))EG(),Pm(),e.flags|=98560,s=!1;else if(s=Wb(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));s[_u]=e}else Pm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ts(e),s=!1}else Ra!==null&&(XD(Ra),Ra=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Sr.current&1?mo===0&&(mo=3):$$())),e.updateQueue!==null&&(e.flags|=4),ts(e),null);case 4:return Lm(),zD(t,e),t===null&&Hy(e.stateNode.containerInfo),ts(e),null;case 10:return v$(e.type._context),ts(e),null;case 17:return Js(e.type)&&jk(),ts(e),null;case 19:if(or(Sr),s=e.memoizedState,s===null)return ts(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)kv(s,!1);else{if(mo!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Yk(t),i!==null){for(e.flags|=128,kv(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qn(Sr,Sr.current&1|2),e.child}t=t.sibling}s.tail!==null&&Vr()>jm&&(e.flags|=128,r=!0,kv(s,!1),e.lanes=4194304)}else{if(!r)if(t=Yk(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),kv(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!mr)return ts(e),null}else 2*Vr()-s.renderingStartTime>jm&&n!==1073741824&&(e.flags|=128,r=!0,kv(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Vr(),e.sibling=null,n=Sr.current,qn(Sr,r?n&1|2:n&1),e):(ts(e),null);case 22:case 23:return A$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?di&1073741824&&(ts(e),e.subtreeFlags&6&&(e.flags|=8192)):ts(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function phe(t,e){switch(h$(e),e.tag){case 1:return Js(e.type)&&jk(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lm(),or(Qs),or(vs),k$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return w$(e),null;case 13:if(or(Sr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));Pm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return or(Sr),null;case 4:return Lm(),null;case 10:return v$(e.type._context),null;case 22:case 23:return A$(),null;case 24:return null;default:return null}}var Vb=!1,is=!1,mhe=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Qp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Or(t,e,r)}else n.current=null}function UD(t,e,n){try{n()}catch(r){Or(t,e,r)}}var Ej=!1;function ghe(t,e){if(_D=Pk,t=fG(),d$(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,u=-1,l=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||o!==0&&d.nodeType!==3||(a=i+o),d!==s||r!==0&&d.nodeType!==3||(u=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++l===o&&(a=i),f===s&&++c===r&&(u=i),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ID={focusedElem:t,selectionRange:n},Pk=!1,nt=e;nt!==null;)if(e=nt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,nt=t;else for(;nt!==null;){e=nt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ta(e.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(b){Or(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,nt=t;break}nt=e.return}return p=Ej,Ej=!1,p}function gy(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&UD(e,n,s)}o=o.next}while(o!==r)}}function lS(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function VD(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function l8(t){var e=t.alternate;e!==null&&(t.alternate=null,l8(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_u],delete e[Yy],delete e[DD],delete e[Jfe],delete e[Zfe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c8(t){return t.tag===5||t.tag===3||t.tag===4}function _j(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c8(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function HD(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bk));else if(r!==4&&(t=t.child,t!==null))for(HD(t,e,n),t=t.sibling;t!==null;)HD(t,e,n),t=t.sibling}function GD(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(GD(t,e,n),t=t.sibling;t!==null;)GD(t,e,n),t=t.sibling}var zo=null,Na=!1;function $c(t,e,n){for(n=n.child;n!==null;)d8(t,e,n),n=n.sibling}function d8(t,e,n){if(Pu&&typeof Pu.onCommitFiberUnmount=="function")try{Pu.onCommitFiberUnmount(tS,n)}catch{}switch(n.tag){case 5:is||Qp(n,e);case 6:var r=zo,o=Na;zo=null,$c(t,e,n),zo=r,Na=o,zo!==null&&(Na?(t=zo,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zo.removeChild(n.stateNode));break;case 18:zo!==null&&(Na?(t=zo,n=n.stateNode,t.nodeType===8?tT(t.parentNode,n):t.nodeType===1&&tT(t,n),zy(t)):tT(zo,n.stateNode));break;case 4:r=zo,o=Na,zo=n.stateNode.containerInfo,Na=!0,$c(t,e,n),zo=r,Na=o;break;case 0:case 11:case 14:case 15:if(!is&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&UD(n,e,i),o=o.next}while(o!==r)}$c(t,e,n);break;case 1:if(!is&&(Qp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Or(n,e,a)}$c(t,e,n);break;case 21:$c(t,e,n);break;case 22:n.mode&1?(is=(r=is)||n.memoizedState!==null,$c(t,e,n),is=r):$c(t,e,n);break;default:$c(t,e,n)}}function Ij(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mhe),e.forEach(function(r){var o=Ehe.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ea(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:zo=a.stateNode,Na=!1;break e;case 3:zo=a.stateNode.containerInfo,Na=!0;break e;case 4:zo=a.stateNode.containerInfo,Na=!0;break e}a=a.return}if(zo===null)throw Error(Re(160));d8(s,i,o),zo=null,Na=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(l){Or(o,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f8(e,t),e=e.sibling}function f8(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ea(e,t),hu(t),r&4){try{gy(3,t,t.return),lS(3,t)}catch(m){Or(t,t.return,m)}try{gy(5,t,t.return)}catch(m){Or(t,t.return,m)}}break;case 1:Ea(e,t),hu(t),r&512&&n!==null&&Qp(n,n.return);break;case 5:if(Ea(e,t),hu(t),r&512&&n!==null&&Qp(n,n.return),t.flags&32){var o=t.stateNode;try{Ly(o,"")}catch(m){Or(t,t.return,m)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&AH(o,s),gD(a,i);var l=gD(a,s);for(i=0;i<u.length;i+=2){var c=u[i],d=u[i+1];c==="style"?LH(o,d):c==="dangerouslySetInnerHTML"?PH(o,d):c==="children"?Ly(o,d):JA(o,c,d,l)}switch(a){case"input":dD(o,s);break;case"textarea":$H(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?im(o,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?im(o,!!s.multiple,s.defaultValue,!0):im(o,!!s.multiple,s.multiple?[]:"",!1))}o[Yy]=s}catch(m){Or(t,t.return,m)}}break;case 6:if(Ea(e,t),hu(t),r&4){if(t.stateNode===null)throw Error(Re(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(m){Or(t,t.return,m)}}break;case 3:if(Ea(e,t),hu(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zy(e.containerInfo)}catch(m){Or(t,t.return,m)}break;case 4:Ea(e,t),hu(t);break;case 13:Ea(e,t),hu(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(R$=Vr())),r&4&&Ij(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(is=(l=is)||c,Ea(e,t),is=l):Ea(e,t),hu(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(nt=t,c=t.child;c!==null;){for(d=nt=c;nt!==null;){switch(f=nt,h=f.child,f.tag){case 0:case 11:case 14:case 15:gy(4,f,f.return);break;case 1:Qp(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Or(r,n,m)}}break;case 5:Qp(f,f.return);break;case 22:if(f.memoizedState!==null){Nj(d);continue}}h!==null?(h.return=f,nt=h):Nj(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{o=d.stateNode,l?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,u=d.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=FH("display",i))}catch(m){Or(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){Or(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ea(e,t),hu(t),r&4&&Ij(t);break;case 21:break;default:Ea(e,t),hu(t)}}function hu(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(c8(n)){var r=n;break e}n=n.return}throw Error(Re(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ly(o,""),r.flags&=-33);var s=_j(t);GD(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=_j(t);HD(t,a,i);break;default:throw Error(Re(161))}}catch(u){Or(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vhe(t,e,n){nt=t,h8(t)}function h8(t,e,n){for(var r=(t.mode&1)!==0;nt!==null;){var o=nt,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Vb;if(!i){var a=o.alternate,u=a!==null&&a.memoizedState!==null||is;a=Vb;var l=is;if(Vb=i,(is=u)&&!l)for(nt=o;nt!==null;)i=nt,u=i.child,i.tag===22&&i.memoizedState!==null?Dj(o):u!==null?(u.return=i,nt=u):Dj(o);for(;s!==null;)nt=s,h8(s),s=s.sibling;nt=o,Vb=a,is=l}Tj(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,nt=s):Tj(t)}}function Tj(t){for(;nt!==null;){var e=nt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:is||lS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!is)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Ta(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dj(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dj(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&zy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}is||e.flags&512&&VD(e)}catch(f){Or(e,e.return,f)}}if(e===t){nt=null;break}if(n=e.sibling,n!==null){n.return=e.return,nt=n;break}nt=e.return}}function Nj(t){for(;nt!==null;){var e=nt;if(e===t){nt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,nt=n;break}nt=e.return}}function Dj(t){for(;nt!==null;){var e=nt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lS(4,e)}catch(u){Or(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(u){Or(e,o,u)}}var s=e.return;try{VD(e)}catch(u){Or(e,s,u)}break;case 5:var i=e.return;try{VD(e)}catch(u){Or(e,i,u)}}}catch(u){Or(e,e.return,u)}if(e===t){nt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,nt=a;break}nt=e.return}}var yhe=Math.ceil,Xk=hc.ReactCurrentDispatcher,N$=hc.ReactCurrentOwner,aa=hc.ReactCurrentBatchConfig,bn=0,To=null,Jr=null,Go=0,di=0,Jp=Jd(0),mo=0,Zy=null,dh=0,cS=0,D$=0,vy=null,Vs=null,R$=0,jm=1/0,Nl=null,Qk=!1,YD=null,gd=null,Hb=!1,Xc=null,Jk=0,yy=0,qD=null,sk=-1,ik=0;function Rs(){return bn&6?Vr():sk!==-1?sk:sk=Vr()}function vd(t){return t.mode&1?bn&2&&Go!==0?Go&-Go:the.transition!==null?(ik===0&&(ik=XH()),ik):(t=Pn,t!==0||(t=window.event,t=t===void 0?16:rG(t.type)),t):1}function Ya(t,e,n,r){if(50<yy)throw yy=0,qD=null,Error(Re(185));sx(t,n,r),(!(bn&2)||t!==To)&&(t===To&&(!(bn&2)&&(cS|=n),mo===4&&qc(t,Go)),Zs(t,r),n===1&&bn===0&&!(e.mode&1)&&(jm=Vr()+500,iS&&Zd()))}function Zs(t,e){var n=t.callbackNode;tfe(t,e);var r=Mk(t,t===To?Go:0);if(r===0)n!==null&&BB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&BB(n),e===1)t.tag===0?ehe(Rj.bind(null,t)):kG(Rj.bind(null,t)),Xfe(function(){!(bn&6)&&Zd()}),n=null;else{switch(QH(r)){case 1:n=r$;break;case 4:n=qH;break;case 16:n=$k;break;case 536870912:n=KH;break;default:n=$k}n=w8(n,p8.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p8(t,e){if(sk=-1,ik=0,bn&6)throw Error(Re(327));var n=t.callbackNode;if(dm()&&t.callbackNode!==n)return null;var r=Mk(t,t===To?Go:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zk(t,r);else{e=r;var o=bn;bn|=2;var s=g8();(To!==t||Go!==e)&&(Nl=null,jm=Vr()+500,Xf(t,e));do try{whe();break}catch(a){m8(t,a)}while(!0);g$(),Xk.current=s,bn=o,Jr!==null?e=0:(To=null,Go=0,e=mo)}if(e!==0){if(e===2&&(o=wD(t),o!==0&&(r=o,e=KD(t,o))),e===1)throw n=Zy,Xf(t,0),qc(t,r),Zs(t,Vr()),n;if(e===6)qc(t,r);else{if(o=t.current.alternate,!(r&30)&&!xhe(o)&&(e=Zk(t,r),e===2&&(s=wD(t),s!==0&&(r=s,e=KD(t,s))),e===1))throw n=Zy,Xf(t,0),qc(t,r),Zs(t,Vr()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(Re(345));case 2:_f(t,Vs,Nl);break;case 3:if(qc(t,r),(r&130023424)===r&&(e=R$+500-Vr(),10<e)){if(Mk(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Rs(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=ND(_f.bind(null,t,Vs,Nl),e);break}_f(t,Vs,Nl);break;case 4:if(qc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-Ga(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=Vr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yhe(r/1960))-r,10<r){t.timeoutHandle=ND(_f.bind(null,t,Vs,Nl),r);break}_f(t,Vs,Nl);break;case 5:_f(t,Vs,Nl);break;default:throw Error(Re(329))}}}return Zs(t,Vr()),t.callbackNode===n?p8.bind(null,t):null}function KD(t,e){var n=vy;return t.current.memoizedState.isDehydrated&&(Xf(t,e).flags|=256),t=Zk(t,e),t!==2&&(e=Vs,Vs=n,e!==null&&XD(e)),t}function XD(t){Vs===null?Vs=t:Vs.push.apply(Vs,t)}function xhe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Ja(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qc(t,e){for(e&=~D$,e&=~cS,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ga(e),r=1<<n;t[n]=-1,e&=~r}}function Rj(t){if(bn&6)throw Error(Re(327));dm();var e=Mk(t,0);if(!(e&1))return Zs(t,Vr()),null;var n=Zk(t,e);if(t.tag!==0&&n===2){var r=wD(t);r!==0&&(e=r,n=KD(t,r))}if(n===1)throw n=Zy,Xf(t,0),qc(t,e),Zs(t,Vr()),n;if(n===6)throw Error(Re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_f(t,Vs,Nl),Zs(t,Vr()),null}function O$(t,e){var n=bn;bn|=1;try{return t(e)}finally{bn=n,bn===0&&(jm=Vr()+500,iS&&Zd())}}function fh(t){Xc!==null&&Xc.tag===0&&!(bn&6)&&dm();var e=bn;bn|=1;var n=aa.transition,r=Pn;try{if(aa.transition=null,Pn=1,t)return t()}finally{Pn=r,aa.transition=n,bn=e,!(bn&6)&&Zd()}}function A$(){di=Jp.current,or(Jp)}function Xf(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Kfe(n)),Jr!==null)for(n=Jr.return;n!==null;){var r=n;switch(h$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&jk();break;case 3:Lm(),or(Qs),or(vs),k$();break;case 5:w$(r);break;case 4:Lm();break;case 13:or(Sr);break;case 19:or(Sr);break;case 10:v$(r.type._context);break;case 22:case 23:A$()}n=n.return}if(To=t,Jr=t=yd(t.current,null),Go=di=e,mo=0,Zy=null,D$=cS=dh=0,Vs=vy=null,Lf!==null){for(e=0;e<Lf.length;e++)if(n=Lf[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Lf=null}return t}function m8(t,e){do{var n=Jr;try{if(g$(),nk.current=Kk,qk){for(var r=Tr.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}qk=!1}if(ch=0,_o=fo=Tr=null,my=!1,Xy=0,N$.current=null,n===null||n.return===null){mo=1,Zy=e,Jr=null;break}e:{var s=t,i=n.return,a=n,u=e;if(e=Go,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=yj(i);if(h!==null){h.flags&=-257,xj(h,i,a,s,e),h.mode&1&&vj(s,l,e),e=h,u=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(u),e.updateQueue=m}else p.add(u);break e}else{if(!(e&1)){vj(s,l,e),$$();break e}u=Error(Re(426))}}else if(mr&&a.mode&1){var g=yj(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),xj(g,i,a,s,e),p$(Bm(u,a));break e}}s=u=Bm(u,a),mo!==4&&(mo=2),vy===null?vy=[s]:vy.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=JG(s,u,e);cj(s,v);break e;case 1:a=u;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(gd===null||!gd.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=ZG(s,a,e);cj(s,b);break e}}s=s.return}while(s!==null)}y8(n)}catch(C){e=C,Jr===n&&n!==null&&(Jr=n=n.return);continue}break}while(!0)}function g8(){var t=Xk.current;return Xk.current=Kk,t===null?Kk:t}function $$(){(mo===0||mo===3||mo===2)&&(mo=4),To===null||!(dh&268435455)&&!(cS&268435455)||qc(To,Go)}function Zk(t,e){var n=bn;bn|=2;var r=g8();(To!==t||Go!==e)&&(Nl=null,Xf(t,e));do try{bhe();break}catch(o){m8(t,o)}while(!0);if(g$(),bn=n,Xk.current=r,Jr!==null)throw Error(Re(261));return To=null,Go=0,mo}function bhe(){for(;Jr!==null;)v8(Jr)}function whe(){for(;Jr!==null&&!Gde();)v8(Jr)}function v8(t){var e=b8(t.alternate,t,di);t.memoizedProps=t.pendingProps,e===null?y8(t):Jr=e,N$.current=null}function y8(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=phe(n,e),n!==null){n.flags&=32767,Jr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mo=6,Jr=null;return}}else if(n=hhe(n,e,di),n!==null){Jr=n;return}if(e=e.sibling,e!==null){Jr=e;return}Jr=e=t}while(e!==null);mo===0&&(mo=5)}function _f(t,e,n){var r=Pn,o=aa.transition;try{aa.transition=null,Pn=1,khe(t,e,n,r)}finally{aa.transition=o,Pn=r}return null}function khe(t,e,n,r){do dm();while(Xc!==null);if(bn&6)throw Error(Re(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Re(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nfe(t,s),t===To&&(Jr=To=null,Go=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hb||(Hb=!0,w8($k,function(){return dm(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=aa.transition,aa.transition=null;var i=Pn;Pn=1;var a=bn;bn|=4,N$.current=null,ghe(t,n),f8(n,t),zfe(ID),Pk=!!_D,ID=_D=null,t.current=n,vhe(n),Yde(),bn=a,Pn=i,aa.transition=s}else t.current=n;if(Hb&&(Hb=!1,Xc=t,Jk=o),s=t.pendingLanes,s===0&&(gd=null),Xde(n.stateNode),Zs(t,Vr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Qk)throw Qk=!1,t=YD,YD=null,t;return Jk&1&&t.tag!==0&&dm(),s=t.pendingLanes,s&1?t===qD?yy++:(yy=0,qD=t):yy=0,Zd(),null}function dm(){if(Xc!==null){var t=QH(Jk),e=aa.transition,n=Pn;try{if(aa.transition=null,Pn=16>t?16:t,Xc===null)var r=!1;else{if(t=Xc,Xc=null,Jk=0,bn&6)throw Error(Re(331));var o=bn;for(bn|=4,nt=t.current;nt!==null;){var s=nt,i=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(nt=l;nt!==null;){var c=nt;switch(c.tag){case 0:case 11:case 15:gy(8,c,s)}var d=c.child;if(d!==null)d.return=c,nt=d;else for(;nt!==null;){c=nt;var f=c.sibling,h=c.return;if(l8(c),c===l){nt=null;break}if(f!==null){f.return=h,nt=f;break}nt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}nt=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,nt=i;else e:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:gy(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,nt=v;break e}nt=s.return}}var y=t.current;for(nt=y;nt!==null;){i=nt;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,nt=x;else e:for(i=y;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lS(9,a)}}catch(C){Or(a,a.return,C)}if(a===i){nt=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,nt=b;break e}nt=a.return}}if(bn=o,Zd(),Pu&&typeof Pu.onPostCommitFiberRoot=="function")try{Pu.onPostCommitFiberRoot(tS,t)}catch{}r=!0}return r}finally{Pn=n,aa.transition=e}}return!1}function Oj(t,e,n){e=Bm(n,e),e=JG(t,e,1),t=md(t,e,1),e=Rs(),t!==null&&(sx(t,1,e),Zs(t,e))}function Or(t,e,n){if(t.tag===3)Oj(t,t,n);else for(;e!==null;){if(e.tag===3){Oj(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gd===null||!gd.has(r))){t=Bm(n,t),t=ZG(e,t,1),e=md(e,t,1),t=Rs(),e!==null&&(sx(e,1,t),Zs(e,t));break}}e=e.return}}function Che(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rs(),t.pingedLanes|=t.suspendedLanes&n,To===t&&(Go&n)===n&&(mo===4||mo===3&&(Go&130023424)===Go&&500>Vr()-R$?Xf(t,0):D$|=n),Zs(t,e)}function x8(t,e){e===0&&(t.mode&1?(e=Mb,Mb<<=1,!(Mb&130023424)&&(Mb=4194304)):e=1);var n=Rs();t=ec(t,e),t!==null&&(sx(t,e,n),Zs(t,n))}function She(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),x8(t,n)}function Ehe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Re(314))}r!==null&&r.delete(e),x8(t,n)}var b8;b8=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qs.current)qs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qs=!1,fhe(t,e,n);qs=!!(t.flags&131072)}else qs=!1,mr&&e.flags&1048576&&CG(e,Uk,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ok(t,e),t=e.pendingProps;var o=Mm(e,vs.current);cm(e,n),o=S$(null,e,r,t,o,n);var s=E$();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Js(r)?(s=!0,Wk(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,x$(e),o.updater=aS,e.stateNode=o,o._reactInternals=e,PD(e,r,t,n),e=BD(null,e,r,!0,s,n)):(e.tag=0,mr&&s&&f$(e),Es(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ok(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=Ihe(r),t=Ta(r,t),o){case 0:e=LD(null,e,r,t,n);break e;case 1:e=kj(null,e,r,t,n);break e;case 11:e=bj(null,e,r,t,n);break e;case 14:e=wj(null,e,r,Ta(r.type,t),n);break e}throw Error(Re(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ta(r,o),LD(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ta(r,o),kj(t,e,r,o,n);case 3:e:{if(r8(e),t===null)throw Error(Re(387));r=e.pendingProps,s=e.memoizedState,o=s.element,IG(t,e),Gk(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Bm(Error(Re(423)),e),e=Cj(t,e,r,n,o);break e}else if(r!==o){o=Bm(Error(Re(424)),e),e=Cj(t,e,r,n,o);break e}else for(gi=pd(e.stateNode.containerInfo.firstChild),Si=e,mr=!0,Ra=null,n=RG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pm(),r===o){e=tc(t,e,n);break e}Es(t,e,r,n)}e=e.child}return e;case 5:return OG(e),t===null&&AD(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,TD(r,o)?i=null:s!==null&&TD(r,s)&&(e.flags|=32),n8(t,e),Es(t,e,i,n),e.child;case 6:return t===null&&AD(e),null;case 13:return o8(t,e,n);case 4:return b$(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fm(e,null,r,n):Es(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ta(r,o),bj(t,e,r,o,n);case 7:return Es(t,e,e.pendingProps,n),e.child;case 8:return Es(t,e,e.pendingProps.children,n),e.child;case 12:return Es(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,qn(Vk,r._currentValue),r._currentValue=i,s!==null)if(Ja(s.value,i)){if(s.children===o.children&&!Qs.current){e=tc(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Hl(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),$D(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(Re(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),$D(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Es(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,cm(e,n),o=la(o),r=r(o),e.flags|=1,Es(t,e,r,n),e.child;case 14:return r=e.type,o=Ta(r,e.pendingProps),o=Ta(r.type,o),wj(t,e,r,o,n);case 15:return e8(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ta(r,o),ok(t,e),e.tag=1,Js(r)?(t=!0,Wk(e)):t=!1,cm(e,n),NG(e,r,o),PD(e,r,o,n),BD(null,e,r,!0,t,n);case 19:return s8(t,e,n);case 22:return t8(t,e,n)}throw Error(Re(156,e.tag))};function w8(t,e){return YH(t,e)}function _he(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(t,e,n,r){return new _he(t,e,n,r)}function M$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ihe(t){if(typeof t=="function")return M$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===e$)return 11;if(t===t$)return 14}return 2}function yd(t,e){var n=t.alternate;return n===null?(n=Zi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ak(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")M$(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case zp:return Qf(n.children,o,s,e);case ZA:i=8,o|=8;break;case iD:return t=Zi(12,n,e,o|2),t.elementType=iD,t.lanes=s,t;case aD:return t=Zi(13,n,e,o),t.elementType=aD,t.lanes=s,t;case uD:return t=Zi(19,n,e,o),t.elementType=uD,t.lanes=s,t;case DH:return dS(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TH:i=10;break e;case NH:i=9;break e;case e$:i=11;break e;case t$:i=14;break e;case Wc:i=16,r=null;break e}throw Error(Re(130,t==null?t:typeof t,""))}return e=Zi(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function Qf(t,e,n,r){return t=Zi(7,t,r,e),t.lanes=n,t}function dS(t,e,n,r){return t=Zi(22,t,r,e),t.elementType=DH,t.lanes=n,t.stateNode={isHidden:!1},t}function lT(t,e,n){return t=Zi(6,t,null,e),t.lanes=n,t}function cT(t,e,n){return e=Zi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function The(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=VI(0),this.expirationTimes=VI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=VI(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function P$(t,e,n,r,o,s,i,a,u){return t=new The(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Zi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},x$(s),t}function Nhe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function k8(t){if(!t)return Ad;t=t._reactInternals;e:{if(jh(t)!==t||t.tag!==1)throw Error(Re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Js(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(t.tag===1){var n=t.type;if(Js(n))return wG(t,n,e)}return e}function C8(t,e,n,r,o,s,i,a,u){return t=P$(n,r,!0,t,o,s,i,a,u),t.context=k8(null),n=t.current,r=Rs(),o=vd(n),s=Hl(r,o),s.callback=e??null,md(n,s,o),t.current.lanes=o,sx(t,o,r),Zs(t,r),t}function fS(t,e,n,r){var o=e.current,s=Rs(),i=vd(o);return n=k8(n),e.context===null?e.context=n:e.pendingContext=n,e=Hl(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=md(o,e,i),t!==null&&(Ya(t,o,i,s),tk(t,o,i)),i}function eC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Aj(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function F$(t,e){Aj(t,e),(t=t.alternate)&&Aj(t,e)}function Dhe(){return null}var S8=typeof reportError=="function"?reportError:function(t){console.error(t)};function L$(t){this._internalRoot=t}hS.prototype.render=L$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Re(409));fS(t,e,null,null)};hS.prototype.unmount=L$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fh(function(){fS(null,t,null,null)}),e[Zl]=null}};function hS(t){this._internalRoot=t}hS.prototype.unstable_scheduleHydration=function(t){if(t){var e=eG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yc.length&&e!==0&&e<Yc[n].priority;n++);Yc.splice(n,0,t),n===0&&nG(t)}};function B$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $j(){}function Rhe(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var l=eC(i);s.call(l)}}var i=C8(e,r,t,0,null,!1,!1,"",$j);return t._reactRootContainer=i,t[Zl]=i.current,Hy(t.nodeType===8?t.parentNode:t),fh(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var l=eC(u);a.call(l)}}var u=P$(t,0,!1,null,null,!1,!1,"",$j);return t._reactRootContainer=u,t[Zl]=u.current,Hy(t.nodeType===8?t.parentNode:t),fh(function(){fS(e,u,n,r)}),u}function mS(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var u=eC(i);a.call(u)}}fS(e,i,t,o)}else i=Rhe(n,e,t,o,r);return eC(i)}JH=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kv(e.pendingLanes);n!==0&&(o$(e,n|1),Zs(e,Vr()),!(bn&6)&&(jm=Vr()+500,Zd()))}break;case 13:fh(function(){var r=ec(t,1);if(r!==null){var o=Rs();Ya(r,t,1,o)}}),F$(t,1)}};s$=function(t){if(t.tag===13){var e=ec(t,134217728);if(e!==null){var n=Rs();Ya(e,t,134217728,n)}F$(t,134217728)}};ZH=function(t){if(t.tag===13){var e=vd(t),n=ec(t,e);if(n!==null){var r=Rs();Ya(n,t,e,r)}F$(t,e)}};eG=function(){return Pn};tG=function(t,e){var n=Pn;try{return Pn=t,e()}finally{Pn=n}};yD=function(t,e,n){switch(e){case"input":if(dD(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=sS(r);if(!o)throw Error(Re(90));OH(r),dD(r,o)}}}break;case"textarea":$H(t,n);break;case"select":e=n.value,e!=null&&im(t,!!n.multiple,e,!1)}};WH=O$;zH=fh;var Ohe={usingClientEntryPoint:!1,Events:[ax,Gp,sS,BH,jH,O$]},Cv={findFiberByHostInstance:Ff,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Ahe={bundleType:Cv.bundleType,version:Cv.version,rendererPackageName:Cv.rendererPackageName,rendererConfig:Cv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HH(t),t===null?null:t.stateNode},findFiberByHostInstance:Cv.findFiberByHostInstance||Dhe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gb.isDisabled&&Gb.supportsFiber)try{tS=Gb.inject(Ahe),Pu=Gb}catch{}}Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ohe;Ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B$(e))throw Error(Re(200));return Nhe(t,e,null,n)};Ri.createRoot=function(t,e){if(!B$(t))throw Error(Re(299));var n=!1,r="",o=S8;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=P$(t,1,!1,null,null,n,!1,r,o),t[Zl]=e.current,Hy(t.nodeType===8?t.parentNode:t),new L$(e)};Ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Re(188)):(t=Object.keys(t).join(","),Error(Re(268,t)));return t=HH(e),t=t===null?null:t.stateNode,t};Ri.flushSync=function(t){return fh(t)};Ri.hydrate=function(t,e,n){if(!pS(e))throw Error(Re(200));return mS(null,t,e,!0,n)};Ri.hydrateRoot=function(t,e,n){if(!B$(t))throw Error(Re(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=S8;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=C8(e,null,t,1,n??null,o,!1,s,i),t[Zl]=e.current,Hy(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new hS(e)};Ri.render=function(t,e,n){if(!pS(e))throw Error(Re(200));return mS(null,t,e,!1,n)};Ri.unmountComponentAtNode=function(t){if(!pS(t))throw Error(Re(40));return t._reactRootContainer?(fh(function(){mS(null,null,t,!1,function(){t._reactRootContainer=null,t[Zl]=null})}),!0):!1};Ri.unstable_batchedUpdates=O$;Ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pS(n))throw Error(Re(200));if(t==null||t._reactInternals===void 0)throw Error(Re(38));return mS(t,e,n,!1,r)};Ri.version="18.2.0-next-9e3b772b8-20220608";function E8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E8)}catch(t){console.error(t)}}E8(),CH.exports=Ri;var _g=CH.exports;const jf=Xd(_g);var Mj=_g;oD.createRoot=Mj.createRoot,oD.hydrateRoot=Mj.hydrateRoot;var _8={exports:{}},$he="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Mhe=$he,Phe=Mhe;function I8(){}function T8(){}T8.resetWarningCache=I8;var Fhe=function(){function t(r,o,s,i,a,u){if(u!==Phe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:T8,resetWarningCache:I8};return n.PropTypes=n,n};_8.exports=Fhe();var zn=_8.exports;const ye=Xd(zn);var $d=ee.createContext(null);function Lhe(t){t()}var N8=Lhe,Bhe=function(e){return N8=e},jhe=function(){return N8};function Whe(){var t=jhe(),e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t(function(){for(var o=e;o;)o.callback(),o=o.next})},get:function(){for(var o=[],s=e;s;)o.push(s),s=s.next;return o},subscribe:function(o){var s=!0,i=n={callback:o,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Pj={notify:function(){},get:function(){return[]}};function D8(t,e){var n,r=Pj;function o(d){return u(),r.subscribe(d)}function s(){r.notify()}function i(){c.onStateChange&&c.onStateChange()}function a(){return!!n}function u(){n||(n=e?e.addNestedSub(i):t.subscribe(i),r=Whe())}function l(){n&&(n(),n=void 0,r.clear(),r=Pj)}var c={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:i,isSubscribed:a,trySubscribe:u,tryUnsubscribe:l,getListeners:function(){return r}};return c}var QD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?D.useLayoutEffect:D.useEffect;function zhe(t){var e=t.store,n=t.context,r=t.children,o=D.useMemo(function(){var a=D8(e);return{store:e,subscription:a}},[e]),s=D.useMemo(function(){return e.getState()},[e]);QD(function(){var a=o.subscription;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),function(){a.tryUnsubscribe(),a.onStateChange=null}},[o,s]);var i=n||$d;return ee.createElement(i.Provider,{value:o},r)}function JD(){return JD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JD.apply(this,arguments)}function R8(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}var O8={exports:{}},Ln={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oo=typeof Symbol=="function"&&Symbol.for,j$=Oo?Symbol.for("react.element"):60103,W$=Oo?Symbol.for("react.portal"):60106,gS=Oo?Symbol.for("react.fragment"):60107,vS=Oo?Symbol.for("react.strict_mode"):60108,yS=Oo?Symbol.for("react.profiler"):60114,xS=Oo?Symbol.for("react.provider"):60109,bS=Oo?Symbol.for("react.context"):60110,z$=Oo?Symbol.for("react.async_mode"):60111,wS=Oo?Symbol.for("react.concurrent_mode"):60111,kS=Oo?Symbol.for("react.forward_ref"):60112,CS=Oo?Symbol.for("react.suspense"):60113,Uhe=Oo?Symbol.for("react.suspense_list"):60120,SS=Oo?Symbol.for("react.memo"):60115,ES=Oo?Symbol.for("react.lazy"):60116,Vhe=Oo?Symbol.for("react.block"):60121,Hhe=Oo?Symbol.for("react.fundamental"):60117,Ghe=Oo?Symbol.for("react.responder"):60118,Yhe=Oo?Symbol.for("react.scope"):60119;function Ai(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case j$:switch(t=t.type,t){case z$:case wS:case gS:case yS:case vS:case CS:return t;default:switch(t=t&&t.$$typeof,t){case bS:case kS:case ES:case SS:case xS:return t;default:return e}}case W$:return e}}}function A8(t){return Ai(t)===wS}Ln.AsyncMode=z$;Ln.ConcurrentMode=wS;Ln.ContextConsumer=bS;Ln.ContextProvider=xS;Ln.Element=j$;Ln.ForwardRef=kS;Ln.Fragment=gS;Ln.Lazy=ES;Ln.Memo=SS;Ln.Portal=W$;Ln.Profiler=yS;Ln.StrictMode=vS;Ln.Suspense=CS;Ln.isAsyncMode=function(t){return A8(t)||Ai(t)===z$};Ln.isConcurrentMode=A8;Ln.isContextConsumer=function(t){return Ai(t)===bS};Ln.isContextProvider=function(t){return Ai(t)===xS};Ln.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===j$};Ln.isForwardRef=function(t){return Ai(t)===kS};Ln.isFragment=function(t){return Ai(t)===gS};Ln.isLazy=function(t){return Ai(t)===ES};Ln.isMemo=function(t){return Ai(t)===SS};Ln.isPortal=function(t){return Ai(t)===W$};Ln.isProfiler=function(t){return Ai(t)===yS};Ln.isStrictMode=function(t){return Ai(t)===vS};Ln.isSuspense=function(t){return Ai(t)===CS};Ln.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===gS||t===wS||t===yS||t===vS||t===CS||t===Uhe||typeof t=="object"&&t!==null&&(t.$$typeof===ES||t.$$typeof===SS||t.$$typeof===xS||t.$$typeof===bS||t.$$typeof===kS||t.$$typeof===Hhe||t.$$typeof===Ghe||t.$$typeof===Yhe||t.$$typeof===Vhe)};Ln.typeOf=Ai;O8.exports=Ln;var qhe=O8.exports,$8=qhe,Khe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xhe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},M8={};M8[$8.ForwardRef]=Khe;M8[$8.Memo]=Xhe;var Zn={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _S=60103,IS=60106,lx=60107,cx=60108,dx=60114,fx=60109,hx=60110,px=60112,mx=60113,U$=60120,gx=60115,vx=60116,P8=60121,F8=60122,L8=60117,B8=60129,j8=60131;if(typeof Symbol=="function"&&Symbol.for){var Wo=Symbol.for;_S=Wo("react.element"),IS=Wo("react.portal"),lx=Wo("react.fragment"),cx=Wo("react.strict_mode"),dx=Wo("react.profiler"),fx=Wo("react.provider"),hx=Wo("react.context"),px=Wo("react.forward_ref"),mx=Wo("react.suspense"),U$=Wo("react.suspense_list"),gx=Wo("react.memo"),vx=Wo("react.lazy"),P8=Wo("react.block"),F8=Wo("react.server.block"),L8=Wo("react.fundamental"),B8=Wo("react.debug_trace_mode"),j8=Wo("react.legacy_hidden")}function iu(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case _S:switch(t=t.type,t){case lx:case dx:case cx:case mx:case U$:return t;default:switch(t=t&&t.$$typeof,t){case hx:case px:case vx:case gx:case fx:return t;default:return e}}case IS:return e}}}var Qhe=fx,Jhe=_S,Zhe=px,epe=lx,tpe=vx,npe=gx,rpe=IS,ope=dx,spe=cx,ipe=mx;Zn.ContextConsumer=hx;Zn.ContextProvider=Qhe;Zn.Element=Jhe;Zn.ForwardRef=Zhe;Zn.Fragment=epe;Zn.Lazy=tpe;Zn.Memo=npe;Zn.Portal=rpe;Zn.Profiler=ope;Zn.StrictMode=spe;Zn.Suspense=ipe;Zn.isAsyncMode=function(){return!1};Zn.isConcurrentMode=function(){return!1};Zn.isContextConsumer=function(t){return iu(t)===hx};Zn.isContextProvider=function(t){return iu(t)===fx};Zn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===_S};Zn.isForwardRef=function(t){return iu(t)===px};Zn.isFragment=function(t){return iu(t)===lx};Zn.isLazy=function(t){return iu(t)===vx};Zn.isMemo=function(t){return iu(t)===gx};Zn.isPortal=function(t){return iu(t)===IS};Zn.isProfiler=function(t){return iu(t)===dx};Zn.isStrictMode=function(t){return iu(t)===cx};Zn.isSuspense=function(t){return iu(t)===mx};Zn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===lx||t===dx||t===B8||t===cx||t===mx||t===U$||t===j8||typeof t=="object"&&t!==null&&(t.$$typeof===vx||t.$$typeof===gx||t.$$typeof===fx||t.$$typeof===hx||t.$$typeof===px||t.$$typeof===L8||t.$$typeof===P8||t[0]===F8)};Zn.typeOf=iu;function W8(){var t=D.useContext($d);return t}function z8(t){t===void 0&&(t=$d);var e=t===$d?W8:function(){return D.useContext(t)};return function(){var r=e(),o=r.store;return o}}var ape=z8();function upe(t){t===void 0&&(t=$d);var e=t===$d?ape:z8(t);return function(){var r=e();return r.dispatch}}var Ao=upe(),lpe=function(e,n){return e===n};function cpe(t,e,n,r){var o=D.useReducer(function(p){return p+1},0),s=o[1],i=D.useMemo(function(){return D8(n,r)},[n,r]),a=D.useRef(),u=D.useRef(),l=D.useRef(),c=D.useRef(),d=n.getState(),f;try{if(t!==u.current||d!==l.current||a.current){var h=t(d);c.current===void 0||!e(h,c.current)?f=h:f=c.current}else f=c.current}catch(p){throw a.current&&(p.message+=`
The error may be correlated with this previous error:
`+a.current.stack+`

`),p}return QD(function(){u.current=t,l.current=d,c.current=f,a.current=void 0}),QD(function(){function p(){try{var m=n.getState();if(m===l.current)return;var g=u.current(m);if(e(g,c.current))return;c.current=g,l.current=m}catch(v){a.current=v}s()}return i.onStateChange=p,i.trySubscribe(),p(),function(){return i.tryUnsubscribe()}},[n,i]),f}function dpe(t){t===void 0&&(t=$d);var e=t===$d?W8:function(){return D.useContext(t)};return function(r,o){o===void 0&&(o=lpe);var s=e(),i=s.store,a=s.subscription,u=cpe(r,o,i,a);return D.useDebugValue(u),u}}var Tt=dpe();Bhe(_g.unstable_batchedUpdates);/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function e0(){return e0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e0.apply(this,arguments)}var Qc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qc||(Qc={}));const Fj="popstate";function fpe(t){t===void 0&&(t={});function e(r,o){let{pathname:s,search:i,hash:a}=r.location;return ZD("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:tC(o)}return ppe(e,n,null,t)}function qr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function V$(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hpe(){return Math.random().toString(36).substr(2,8)}function Lj(t,e){return{usr:t.state,key:t.key,idx:e}}function ZD(t,e,n,r){return n===void 0&&(n=null),e0({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ig(e):e,{state:n,key:e&&e.key||r||hpe()})}function tC(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ig(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ppe(t,e,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a=Qc.Pop,u=null,l=c();l==null&&(l=0,i.replaceState(e0({},i.state,{idx:l}),""));function c(){return(i.state||{idx:null}).idx}function d(){a=Qc.Pop;let g=c(),v=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:v})}function f(g,v){a=Qc.Push;let y=ZD(m.location,g,v);n&&n(y,g),l=c()+1;let x=Lj(y,l),b=m.createHref(y);try{i.pushState(x,"",b)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;o.location.assign(b)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,v){a=Qc.Replace;let y=ZD(m.location,g,v);n&&n(y,g),l=c();let x=Lj(y,l),b=m.createHref(y);i.replaceState(x,"",b),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let v=o.location.origin!=="null"?o.location.origin:o.location.href,y=typeof g=="string"?g:tC(g);return qr(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let m={get action(){return a},get location(){return t(o,i)},listen(g){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(Fj,d),u=g,()=>{o.removeEventListener(Fj,d),u=null}},createHref(g){return e(o,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(g){return i.go(g)}};return m}var Bj;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Bj||(Bj={}));function mpe(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Ig(e):e,o=H$(r.pathname||"/",n);if(o==null)return null;let s=U8(t);gpe(s);let i=null;for(let a=0;i==null&&a<s.length;++a)i=Epe(s[a],Tpe(o));return i}function U8(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(s,i,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};u.relativePath.startsWith("/")&&(qr(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=xd([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(qr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),U8(s.children,e,c,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:Cpe(l,s.index),routesMeta:c})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))o(s,i);else for(let u of V8(s.path))o(s,i,u)}),e}function V8(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=V8(r.join("/")),a=[];return a.push(...i.map(u=>u===""?s:[s,u].join("/"))),o&&a.push(...i),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function gpe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Spe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vpe=/^:[\w-]+$/,ype=3,xpe=2,bpe=1,wpe=10,kpe=-2,jj=t=>t==="*";function Cpe(t,e){let n=t.split("/"),r=n.length;return n.some(jj)&&(r+=kpe),e&&(r+=xpe),n.filter(o=>!jj(o)).reduce((o,s)=>o+(vpe.test(s)?ype:s===""?bpe:wpe),r)}function Spe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function Epe(t,e){let{routesMeta:n}=t,r={},o="/",s=[];for(let i=0;i<n.length;++i){let a=n[i],u=i===n.length-1,l=o==="/"?e:e.slice(o.length)||"/",c=_pe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let d=a.route;s.push({params:r,pathname:xd([o,c.pathname]),pathnameBase:Ape(xd([o,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(o=xd([o,c.pathnameBase]))}return s}function _pe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ipe(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((l,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=a[d]||"";i=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?l[f]=void 0:l[f]=Npe(p||"",f),l},{}),pathname:s,pathnameBase:i,pattern:t}}function Ipe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),V$(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function Tpe(t){try{return decodeURI(t)}catch(e){return V$(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Npe(t,e){try{return decodeURIComponent(t)}catch(n){return V$(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function H$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Dpe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?Ig(t):t;return{pathname:n?n.startsWith("/")?n:Rpe(n,e):e,search:$pe(r),hash:Mpe(o)}}function Rpe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function dT(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ope(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function G$(t,e){let n=Ope(t);return e?n.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Y$(t,e,n,r){r===void 0&&(r=!1);let o;typeof t=="string"?o=Ig(t):(o=e0({},t),qr(!o.pathname||!o.pathname.includes("?"),dT("?","pathname","search",o)),qr(!o.pathname||!o.pathname.includes("#"),dT("#","pathname","hash",o)),qr(!o.search||!o.search.includes("#"),dT("#","search","hash",o)));let s=t===""||o.pathname==="",i=s?"/":o.pathname,a;if(i==null)a=n;else{let d=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),d-=1;o.pathname=f.join("/")}a=d>=0?e[d]:"/"}let u=Dpe(o,a),l=i&&i!=="/"&&i.endsWith("/"),c=(s||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const xd=t=>t.join("/").replace(/\/\/+/g,"/"),Ape=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$pe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Mpe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ppe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const H8=["post","put","patch","delete"];new Set(H8);const Fpe=["get",...H8];new Set(Fpe);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function t0(){return t0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t0.apply(this,arguments)}const q$=D.createContext(null),Lpe=D.createContext(null),ef=D.createContext(null),TS=D.createContext(null),pc=D.createContext({outlet:null,matches:[],isDataRoute:!1}),G8=D.createContext(null);function Bpe(t,e){let{relative:n}=e===void 0?{}:e;Tg()||qr(!1);let{basename:r,navigator:o}=D.useContext(ef),{hash:s,pathname:i,search:a}=q8(t,{relative:n}),u=i;return r!=="/"&&(u=i==="/"?r:xd([r,i])),o.createHref({pathname:u,search:a,hash:s})}function Tg(){return D.useContext(TS)!=null}function Wh(){return Tg()||qr(!1),D.useContext(TS).location}function Y8(t){D.useContext(ef).static||D.useLayoutEffect(t)}function xr(){let{isDataRoute:t}=D.useContext(pc);return t?Jpe():jpe()}function jpe(){Tg()||qr(!1);let t=D.useContext(q$),{basename:e,future:n,navigator:r}=D.useContext(ef),{matches:o}=D.useContext(pc),{pathname:s}=Wh(),i=JSON.stringify(G$(o,n.v7_relativeSplatPath)),a=D.useRef(!1);return Y8(()=>{a.current=!0}),D.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=Y$(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:xd([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,i,s,t])}function yx(){let{matches:t}=D.useContext(pc),e=t[t.length-1];return e?e.params:{}}function q8(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(ef),{matches:o}=D.useContext(pc),{pathname:s}=Wh(),i=JSON.stringify(G$(o,r.v7_relativeSplatPath));return D.useMemo(()=>Y$(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function Wpe(t,e){return zpe(t,e)}function zpe(t,e,n,r){Tg()||qr(!1);let{navigator:o}=D.useContext(ef),{matches:s}=D.useContext(pc),i=s[s.length-1],a=i?i.params:{};i&&i.pathname;let u=i?i.pathnameBase:"/";i&&i.route;let l=Wh(),c;if(e){var d;let g=typeof e=="string"?Ig(e):e;u==="/"||(d=g.pathname)!=null&&d.startsWith(u)||qr(!1),c=g}else c=l;let f=c.pathname||"/",h=u==="/"?f:f.slice(u.length)||"/",p=mpe(t,{pathname:h}),m=Ype(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:xd([u,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:xd([u,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return e&&m?D.createElement(TS.Provider,{value:{location:t0({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Qc.Pop}},m):m}function Upe(){let t=Qpe(),e=Ppe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:o},n):null,null)}const Vpe=D.createElement(Upe,null);class Hpe extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(pc.Provider,{value:this.props.routeContext},D.createElement(G8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Gpe(t){let{routeContext:e,match:n,children:r}=t,o=D.useContext(q$);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(pc.Provider,{value:e},r)}function Ype(t,e,n,r){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,a=(o=n)==null?void 0:o.errors;if(a!=null){let c=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));c>=0||qr(!1),i=i.slice(0,Math.min(i.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){u=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,d,f)=>{let h,p=!1,m=null,g=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||Vpe,u&&(l<0&&f===0?(Zpe("route-fallback",!1),p=!0,g=null):l===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,f+1)),y=()=>{let x;return h?x=m:p?x=g:d.route.Component?x=D.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,D.createElement(Gpe,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?D.createElement(Hpe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var K8=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(K8||{}),nC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(nC||{});function qpe(t){let e=D.useContext(q$);return e||qr(!1),e}function Kpe(t){let e=D.useContext(Lpe);return e||qr(!1),e}function Xpe(t){let e=D.useContext(pc);return e||qr(!1),e}function X8(t){let e=Xpe(),n=e.matches[e.matches.length-1];return n.route.id||qr(!1),n.route.id}function Qpe(){var t;let e=D.useContext(G8),n=Kpe(nC.UseRouteError),r=X8(nC.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Jpe(){let{router:t}=qpe(K8.UseNavigateStable),e=X8(nC.UseNavigateStable),n=D.useRef(!1);return Y8(()=>{n.current=!0}),D.useCallback(function(o,s){s===void 0&&(s={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,t0({fromRouteId:e},s)))},[t,e])}const Wj={};function Zpe(t,e,n){!e&&!Wj[t]&&(Wj[t]=!0)}function Sv(t){let{to:e,replace:n,state:r,relative:o}=t;Tg()||qr(!1);let{future:s,static:i}=D.useContext(ef),{matches:a}=D.useContext(pc),{pathname:u}=Wh(),l=xr(),c=Y$(e,G$(a,s.v7_relativeSplatPath),u,o==="path"),d=JSON.stringify(c);return D.useEffect(()=>l(JSON.parse(d),{replace:n,state:r,relative:o}),[l,d,o,n,r]),null}function lo(t){qr(!1)}function eme(t){let{basename:e="/",children:n=null,location:r,navigationType:o=Qc.Pop,navigator:s,static:i=!1,future:a}=t;Tg()&&qr(!1);let u=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:u,navigator:s,static:i,future:t0({v7_relativeSplatPath:!1},a)}),[u,a,s,i]);typeof r=="string"&&(r=Ig(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=D.useMemo(()=>{let g=H$(c,u);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:o}},[u,c,d,f,h,p,o]);return m==null?null:D.createElement(ef.Provider,{value:l},D.createElement(TS.Provider,{children:n,value:m}))}function tme(t){let{children:e,location:n}=t;return Wpe(eR(e),n)}new Promise(()=>{});function eR(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,o)=>{if(!D.isValidElement(r))return;let s=[...e,o];if(r.type===D.Fragment){n.push.apply(n,eR(r.props.children,s));return}r.type!==lo&&qr(!1),!r.props.index||!r.props.children||qr(!1);let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=eR(r.props.children,s)),n.push(i)}),n}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tR(){return tR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tR.apply(this,arguments)}function nme(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function rme(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ome(t,e){return t.button===0&&(!e||e==="_self")&&!rme(t)}function nR(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function sme(t,e){let n=nR(t);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(s=>{n.append(o,s)})}),n}const ime=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],ame="startTransition",zj=KA[ame];function ume(t){let{basename:e,children:n,future:r,window:o}=t,s=D.useRef();s.current==null&&(s.current=fpe({window:o,v5Compat:!0}));let i=s.current,[a,u]=D.useState({action:i.action,location:i.location}),{v7_startTransition:l}=r||{},c=D.useCallback(d=>{l&&zj?zj(()=>u(d)):u(d)},[u,l]);return D.useLayoutEffect(()=>i.listen(c),[i,c]),D.createElement(eme,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:i,future:r})}const lme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cme=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oa=D.forwardRef(function(e,n){let{onClick:r,relative:o,reloadDocument:s,replace:i,state:a,target:u,to:l,preventScrollReset:c,unstable_viewTransition:d}=e,f=nme(e,ime),{basename:h}=D.useContext(ef),p,m=!1;if(typeof l=="string"&&cme.test(l)&&(p=l,lme))try{let x=new URL(window.location.href),b=l.startsWith("//")?new URL(x.protocol+l):new URL(l),C=H$(b.pathname,h);b.origin===x.origin&&C!=null?l=C+b.search+b.hash:m=!0}catch{}let g=Bpe(l,{relative:o}),v=dme(l,{replace:i,state:a,target:u,preventScrollReset:c,relative:o,unstable_viewTransition:d});function y(x){r&&r(x),x.defaultPrevented||v(x)}return D.createElement("a",tR({},f,{href:p||g,onClick:m||s?r:y,ref:n,target:u}))});var Uj;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uj||(Uj={}));var Vj;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Vj||(Vj={}));function dme(t,e){let{target:n,replace:r,state:o,preventScrollReset:s,relative:i,unstable_viewTransition:a}=e===void 0?{}:e,u=xr(),l=Wh(),c=q8(t,{relative:i});return D.useCallback(d=>{if(ome(d,n)){d.preventDefault();let f=r!==void 0?r:tC(l)===tC(c);u(t,{replace:f,state:o,preventScrollReset:s,relative:i,unstable_viewTransition:a})}},[l,u,c,r,o,n,t,s,i,a])}function fme(t){let e=D.useRef(nR(t)),n=D.useRef(!1),r=Wh(),o=D.useMemo(()=>sme(r.search,n.current?null:e.current),[r.search]),s=xr(),i=D.useCallback((a,u)=>{const l=nR(typeof a=="function"?a(o):a);n.current=!0,s("?"+l,u)},[s,o]);return[o,i]}var Q8={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",i=0;i<arguments.length;i++){var a=arguments[i];a&&(s=o(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var i="";for(var a in s)e.call(s,a)&&s[a]&&(i=o(i,a));return i}function o(s,i){return i?s?s+" "+i:s+i:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Q8);var xx=Q8.exports;const Ae=Xd(xx);function Hj(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function hme(t){var e=pme(t,"string");return typeof e=="symbol"?e:String(e)}function pme(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mme(t,e,n){var r=D.useRef(t!==void 0),o=D.useState(e),s=o[0],i=o[1],a=t!==void 0,u=r.current;return r.current=a,!a&&u&&s!==e&&i(e),[a?t:s,D.useCallback(function(l){for(var c=arguments.length,d=new Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];n&&n.apply(void 0,[l].concat(d)),i(l)},[n])]}function NS(t,e){return Object.keys(e).reduce(function(n,r){var o,s=n,i=s[Hj(r)],a=s[r],u=R8(s,[Hj(r),r].map(hme)),l=e[r],c=mme(a,i,t[l]),d=c[0],f=c[1];return JD({},u,(o={},o[r]=d,o[l]=f,o))},t)}function rR(t,e){return rR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},rR(t,e)}function gme(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,rR(t,e)}const vme=["xxl","xl","lg","md","sm","xs"],yme="xs",DS=D.createContext({prefixes:{},breakpoints:vme,minBreakpoint:yme});function ct(t,e){const{prefixes:n}=D.useContext(DS);return t||n[e]||e}function J8(){const{breakpoints:t}=D.useContext(DS);return t}function Z8(){const{minBreakpoint:t}=D.useContext(DS);return t}function K$(){const{dir:t}=D.useContext(DS);return t==="rtl"}function bx(t){return t&&t.ownerDocument||document}function xme(t){var e=bx(t);return e&&e.defaultView||window}function bme(t,e){return xme(t).getComputedStyle(t,e)}var wme=/([A-Z])/g;function kme(t){return t.replace(wme,"-$1").toLowerCase()}var Cme=/^ms-/;function Yb(t){return kme(t).replace(Cme,"-ms-")}var Sme=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Eme(t){return!!(t&&Sme.test(t))}function Gl(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(Yb(e))||bme(t).getPropertyValue(Yb(e));Object.keys(e).forEach(function(o){var s=e[o];!s&&s!==0?t.style.removeProperty(Yb(o)):Eme(o)?r+=o+"("+s+") ":n+=Yb(o)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}const Gj={disabled:!1},eY=ee.createContext(null);var _me=function(e){return e.scrollTop},Qv="unmounted",Uc="exited",Aa="entering",Pl="entered",n0="exiting",mc=function(t){gme(e,t);function e(r,o){var s;s=t.call(this,r,o)||this;var i=o,a=i&&!i.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Uc,s.appearStatus=Aa):u=Pl:r.unmountOnExit||r.mountOnEnter?u=Qv:u=Uc,s.state={status:u},s.nextCallback=null,s}e.getDerivedStateFromProps=function(o,s){var i=o.in;return i&&s.status===Qv?{status:Uc}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var s=null;if(o!==this.props){var i=this.state.status;this.props.in?i!==Aa&&i!==Pl&&(s=Aa):(i===Aa||i===Pl)&&(s=n0)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,s,i,a;return s=i=a=o,o!=null&&typeof o!="number"&&(s=o.exit,i=o.enter,a=o.appear!==void 0?o.appear:i),{exit:s,enter:i,appear:a}},n.updateStatus=function(o,s){if(o===void 0&&(o=!1),s!==null)if(this.cancelNextCallback(),s===Aa){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:jf.findDOMNode(this);i&&_me(i)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Uc&&this.setState({status:Qv})},n.performEnter=function(o){var s=this,i=this.props.enter,a=this.context?this.context.isMounting:o,u=this.props.nodeRef?[a]:[jf.findDOMNode(this),a],l=u[0],c=u[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!o&&!i||Gj.disabled){this.safeSetState({status:Pl},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Aa},function(){s.props.onEntering(l,c),s.onTransitionEnd(f,function(){s.safeSetState({status:Pl},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var o=this,s=this.props.exit,i=this.getTimeouts(),a=this.props.nodeRef?void 0:jf.findDOMNode(this);if(!s||Gj.disabled){this.safeSetState({status:Uc},function(){o.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:n0},function(){o.props.onExiting(a),o.onTransitionEnd(i.exit,function(){o.safeSetState({status:Uc},function(){o.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,s){s=this.setNextCallback(s),this.setState(o,s)},n.setNextCallback=function(o){var s=this,i=!0;return this.nextCallback=function(a){i&&(i=!1,s.nextCallback=null,o(a))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(o,s){this.setNextCallback(s);var i=this.props.nodeRef?this.props.nodeRef.current:jf.findDOMNode(this),a=o==null&&!this.props.addEndListener;if(!i||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===Qv)return null;var s=this.props,i=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=R8(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ee.createElement(eY.Provider,{value:null},typeof i=="function"?i(o,a):ee.cloneElement(ee.Children.only(i),a))},e}(ee.Component);mc.contextType=eY;mc.propTypes={};function xp(){}mc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:xp,onEntering:xp,onEntered:xp,onExit:xp,onExiting:xp,onExited:xp};mc.UNMOUNTED=Qv;mc.EXITED=Uc;mc.ENTERING=Aa;mc.ENTERED=Pl;mc.EXITING=n0;const Ime=mc,Ng=!!(typeof window<"u"&&window.document&&window.document.createElement);var oR=!1,sR=!1;try{var fT={get passive(){return oR=!0},get once(){return sR=oR=!0}};Ng&&(window.addEventListener("test",fT,fT),window.removeEventListener("test",fT,!0))}catch{}function X$(t,e,n,r){if(r&&typeof r!="boolean"&&!sR){var o=r.once,s=r.capture,i=n;!sR&&o&&(i=n.__once||function a(u){this.removeEventListener(e,a,s),n.call(this,u)},n.__once=i),t.addEventListener(e,i,oR?r:s)}t.addEventListener(e,n,r)}function iR(t,e,n,r){var o=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,o),n.__once&&t.removeEventListener(e,n.__once,o)}function Jc(t,e,n,r){return X$(t,e,n,r),function(){iR(t,e,n,r)}}function Tme(t,e,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),t){var o=document.createEvent("HTMLEvents");o.initEvent(e,n,r),t.dispatchEvent(o)}}function Nme(t){var e=Gl(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function Dme(t,e,n){n===void 0&&(n=5);var r=!1,o=setTimeout(function(){r||Tme(t,"transitionend",!0)},e+n),s=Jc(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(o),s()}}function tY(t,e,n,r){n==null&&(n=Nme(t)||0);var o=Dme(t,n,r),s=Jc(t,"transitionend",e);return function(){o(),s()}}function Yj(t,e){const n=Gl(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function RS(t,e){const n=Yj(t,"transitionDuration"),r=Yj(t,"transitionDelay"),o=tY(t,s=>{s.target===t&&(o(),e(s))},n+r)}function Ev(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...o){e.apply(this,o),n.apply(this,o)}},null)}function Q$(t){t.offsetHeight}const qj=t=>!t||typeof t=="function"?t:e=>{t.current=e};function Rme(t,e){const n=qj(t),r=qj(e);return o=>{n&&n(o),r&&r(o)}}function zh(t,e){return D.useMemo(()=>Rme(t,e),[t,e])}function Ome(t){return t&&"setState"in t?jf.findDOMNode(t):t??null}const Ame=ee.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:o,onExited:s,addEndListener:i,children:a,childRef:u,...l},c)=>{const d=D.useRef(null),f=zh(d,u),h=S=>{f(Ome(S))},p=S=>E=>{S&&d.current&&S(d.current,E)},m=D.useCallback(p(t),[t]),g=D.useCallback(p(e),[e]),v=D.useCallback(p(n),[n]),y=D.useCallback(p(r),[r]),x=D.useCallback(p(o),[o]),b=D.useCallback(p(s),[s]),C=D.useCallback(p(i),[i]);return w.jsx(Ime,{ref:c,...l,onEnter:m,onEntered:v,onEntering:g,onExit:y,onExited:b,onExiting:x,addEndListener:C,nodeRef:d,children:typeof a=="function"?(S,E)=>a(S,{...E,ref:h}):ee.cloneElement(a,{ref:h})})}),OS=Ame,$me={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Mme(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,r=e[n],o=$me[t];return r+parseInt(Gl(e,o[0]),10)+parseInt(Gl(e,o[1]),10)}const Pme={[Uc]:"collapse",[n0]:"collapsing",[Aa]:"collapsing",[Pl]:"collapse show"},Fme=ee.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:o,className:s,children:i,dimension:a="height",in:u=!1,timeout:l=300,mountOnEnter:c=!1,unmountOnExit:d=!1,appear:f=!1,getDimensionValue:h=Mme,...p},m)=>{const g=typeof a=="function"?a():a,v=D.useMemo(()=>Ev(S=>{S.style[g]="0"},t),[g,t]),y=D.useMemo(()=>Ev(S=>{const E=`scroll${g[0].toUpperCase()}${g.slice(1)}`;S.style[g]=`${S[E]}px`},e),[g,e]),x=D.useMemo(()=>Ev(S=>{S.style[g]=null},n),[g,n]),b=D.useMemo(()=>Ev(S=>{S.style[g]=`${h(g,S)}px`,Q$(S)},r),[r,h,g]),C=D.useMemo(()=>Ev(S=>{S.style[g]=null},o),[g,o]);return w.jsx(OS,{ref:m,addEndListener:RS,...p,"aria-expanded":p.role?u:null,onEnter:v,onEntering:y,onEntered:x,onExit:b,onExiting:C,childRef:i.ref,in:u,timeout:l,mountOnEnter:c,unmountOnExit:d,appear:f,children:(S,E)=>ee.cloneElement(i,{...E,className:Ae(s,i.props.className,Pme[S],g==="width"&&"collapse-horizontal")})})}),Lme=Fme;function nY(t){const e=D.useRef(t);return D.useEffect(()=>{e.current=t},[t]),e}function gr(t){const e=nY(t);return D.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const AS=t=>D.forwardRef((e,n)=>w.jsx("div",{...e,ref:n,className:Ae(e.className,t)}));function rY(){return D.useState(null)}function Bme(t,e,n,r=!1){const o=gr(n);D.useEffect(()=>{const s=typeof t=="function"?t():t;return s.addEventListener(e,o,r),()=>s.removeEventListener(e,o,r)},[t])}function J$(){const t=D.useRef(!0),e=D.useRef(()=>t.current);return D.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function oY(t){const e=D.useRef(null);return D.useEffect(()=>{e.current=t}),e.current}const jme=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Wme=typeof document<"u",rC=Wme||jme?D.useLayoutEffect:D.useEffect,zme=["as","disabled"];function Ume(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Vme(t){return!t||t.trim()==="#"}function Z$({tagName:t,disabled:e,href:n,target:r,rel:o,role:s,onClick:i,tabIndex:a=0,type:u}){t||(n!=null||r!=null||o!=null?t="a":t="button");const l={tagName:t};if(t==="button")return[{type:u||"button",disabled:e},l];const c=f=>{if((e||t==="a"&&Vme(n))&&f.preventDefault(),e){f.stopPropagation();return}i==null||i(f)},d=f=>{f.key===" "&&(f.preventDefault(),c(f))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?o:void 0,onClick:c,onKeyDown:d},l]}const eM=D.forwardRef((t,e)=>{let{as:n,disabled:r}=t,o=Ume(t,zme);const[s,{tagName:i}]=Z$(Object.assign({tagName:n,disabled:r},o));return w.jsx(i,Object.assign({},o,s,{ref:e}))});eM.displayName="Button";const Hme=["onKeyDown"];function Gme(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Yme(t){return!t||t.trim()==="#"}const sY=D.forwardRef((t,e)=>{let{onKeyDown:n}=t,r=Gme(t,Hme);const[o]=Z$(Object.assign({tagName:"a"},r)),s=gr(i=>{o.onKeyDown(i),n==null||n(i)});return Yme(r.href)||r.role==="button"?w.jsx("a",Object.assign({ref:e},r,o,{onKeyDown:s})):w.jsx("a",Object.assign({ref:e},r,{onKeyDown:n}))});sY.displayName="Anchor";const r0=sY,qme={[Aa]:"show",[Pl]:"show"},iY=D.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...o},s)=>{const i={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...o},a=D.useCallback((u,l)=>{Q$(u),r==null||r(u,l)},[r]);return w.jsx(OS,{ref:s,addEndListener:RS,...i,onEnter:a,childRef:e.ref,children:(u,l)=>D.cloneElement(e,{...l,className:Ae("fade",t,e.props.className,qme[u],n[u])})})});iY.displayName="Fade";const wx=iY,Kme={"aria-label":ye.string,onClick:ye.func,variant:ye.oneOf(["white"])},tM=D.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},o)=>w.jsx("button",{ref:o,type:"button",className:Ae("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));tM.displayName="CloseButton";tM.propTypes=Kme;const Xme=tM,aY=D.forwardRef(({bsPrefix:t,bg:e="primary",pill:n=!1,text:r,className:o,as:s="span",...i},a)=>{const u=ct(t,"badge");return w.jsx(s,{ref:a,...i,className:Ae(o,u,n&&"rounded-pill",r&&`text-${r}`,e&&`bg-${e}`)})});aY.displayName="Badge";const Jf=aY,uY=D.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:o=!1,disabled:s=!1,className:i,...a},u)=>{const l=ct(e,"btn"),[c,{tagName:d}]=Z$({tagName:t,disabled:s,...a}),f=d;return w.jsx(f,{...c,...a,ref:u,disabled:s,className:Ae(i,l,o&&"active",n&&`${l}-${n}`,r&&`${l}-${r}`,a.href&&s&&"disabled")})});uY.displayName="Button";const vt=uY,lY=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"card-body"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));lY.displayName="CardBody";const cY=lY,dY=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"card-footer"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));dY.displayName="CardFooter";const Qme=dY,fY=D.createContext(null);fY.displayName="CardHeaderContext";const hY=fY,pY=D.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},o)=>{const s=ct(t,"card-header"),i=D.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return w.jsx(hY.Provider,{value:i,children:w.jsx(n,{ref:o,...r,className:Ae(e,s)})})});pY.displayName="CardHeader";const Jme=pY,mY=D.forwardRef(({bsPrefix:t,className:e,variant:n,as:r="img",...o},s)=>{const i=ct(t,"card-img");return w.jsx(r,{ref:s,className:Ae(n?`${i}-${n}`:i,e),...o})});mY.displayName="CardImg";const Zme=mY,gY=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"card-img-overlay"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));gY.displayName="CardImgOverlay";const ege=gY,vY=D.forwardRef(({className:t,bsPrefix:e,as:n="a",...r},o)=>(e=ct(e,"card-link"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));vY.displayName="CardLink";const tge=vY,nge=AS("h6"),yY=D.forwardRef(({className:t,bsPrefix:e,as:n=nge,...r},o)=>(e=ct(e,"card-subtitle"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));yY.displayName="CardSubtitle";const rge=yY,xY=D.forwardRef(({className:t,bsPrefix:e,as:n="p",...r},o)=>(e=ct(e,"card-text"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));xY.displayName="CardText";const oge=xY,sge=AS("h5"),bY=D.forwardRef(({className:t,bsPrefix:e,as:n=sge,...r},o)=>(e=ct(e,"card-title"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));bY.displayName="CardTitle";const ige=bY,wY=D.forwardRef(({bsPrefix:t,className:e,bg:n,text:r,border:o,body:s=!1,children:i,as:a="div",...u},l)=>{const c=ct(t,"card");return w.jsx(a,{ref:l,...u,className:Ae(e,c,n&&`bg-${n}`,r&&`text-${r}`,o&&`border-${o}`),children:s?w.jsx(cY,{children:i}):i})});wY.displayName="Card";const me=Object.assign(wY,{Img:Zme,Title:ige,Subtitle:rge,Body:cY,Link:tge,Text:oge,Header:Jme,Footer:Qme,ImgOverlay:ege});function age(t,e){const n=D.useRef(!0);D.useEffect(()=>{if(n.current){n.current=!1;return}return t()},e)}function uge(t){const e=D.useRef(t);return e.current=t,e}function nM(t){const e=uge(t);D.useEffect(()=>()=>e.current(),[])}const aR=2**31-1;function kY(t,e,n){const r=n-Date.now();t.current=r<=aR?setTimeout(e,r):setTimeout(()=>kY(t,e,n),aR)}function lge(){const t=J$(),e=D.useRef();return nM(()=>clearTimeout(e.current)),D.useMemo(()=>{const n=()=>clearTimeout(e.current);function r(o,s=0){t()&&(n(),s<=aR?e.current=setTimeout(o,s):kY(e,o,Date.now()+s))}return{set:r,clear:n,handleRef:e}},[])}const CY=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"carousel-caption"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));CY.displayName="CarouselCaption";const cge=CY,SY=D.forwardRef(({as:t="div",bsPrefix:e,className:n,...r},o)=>{const s=Ae(n,ct(e,"carousel-item"));return w.jsx(t,{ref:o,...r,className:s})});SY.displayName="CarouselItem";const dge=SY;function Kj(t,e){let n=0;return D.Children.map(t,r=>D.isValidElement(r)?e(r,n++):r)}function fge(t,e){let n=0;D.Children.forEach(t,r=>{D.isValidElement(r)&&e(r,n++)})}function hge(t,e){return D.Children.toArray(t).some(n=>D.isValidElement(n)&&n.type===e)}const pge=40;function mge(t){if(!t||!t.style||!t.parentNode||!t.parentNode.style)return!1;const e=getComputedStyle(t);return e.display!=="none"&&e.visibility!=="hidden"&&getComputedStyle(t.parentNode).display!=="none"}const EY=D.forwardRef(({defaultActiveIndex:t=0,...e},n)=>{const{as:r="div",bsPrefix:o,slide:s=!0,fade:i=!1,controls:a=!0,indicators:u=!0,indicatorLabels:l=[],activeIndex:c,onSelect:d,onSlide:f,onSlid:h,interval:p=5e3,keyboard:m=!0,onKeyDown:g,pause:v="hover",onMouseOver:y,onMouseOut:x,wrap:b=!0,touch:C=!0,onTouchStart:S,onTouchMove:E,onTouchEnd:I,prevIcon:T=w.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:N="Previous",nextIcon:O=w.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:$="Next",variant:A,className:P,children:L,...W}=NS({defaultActiveIndex:t,...e},{activeIndex:"onSelect"}),z=ct(o,"carousel"),F=K$(),B=D.useRef(null),[H,X]=D.useState("next"),[te,re]=D.useState(!1),[ue,Q]=D.useState(!1),[ce,ke]=D.useState(c||0);D.useEffect(()=>{!ue&&c!==ce&&(B.current?X(B.current):X((c||0)>ce?"next":"prev"),s&&Q(!0),ke(c||0))},[c,ue,ce,s]),D.useEffect(()=>{B.current&&(B.current=null)});let Ce=0,_e;fge(L,(wt,Mt)=>{++Ce,Mt===c&&(_e=wt.props.interval)});const Le=nY(_e),Ie=D.useCallback(wt=>{if(ue)return;let Mt=ce-1;if(Mt<0){if(!b)return;Mt=Ce-1}B.current="prev",d==null||d(Mt,wt)},[ue,ce,d,b,Ce]),Pe=gr(wt=>{if(ue)return;let Mt=ce+1;if(Mt>=Ce){if(!b)return;Mt=0}B.current="next",d==null||d(Mt,wt)}),Ue=D.useRef();D.useImperativeHandle(n,()=>({element:Ue.current,prev:Ie,next:Pe}));const lt=gr(()=>{!document.hidden&&mge(Ue.current)&&(F?Ie():Pe())}),Me=H==="next"?"start":"end";age(()=>{s||(f==null||f(ce,Me),h==null||h(ce,Me))},[ce]);const Ke=`${z}-item-${H}`,xt=`${z}-item-${Me}`,_t=D.useCallback(wt=>{Q$(wt),f==null||f(ce,Me)},[f,ce,Me]),tn=D.useCallback(()=>{Q(!1),h==null||h(ce,Me)},[h,ce,Me]),Ot=D.useCallback(wt=>{if(m&&!/input|textarea/i.test(wt.target.tagName))switch(wt.key){case"ArrowLeft":wt.preventDefault(),F?Pe(wt):Ie(wt);return;case"ArrowRight":wt.preventDefault(),F?Ie(wt):Pe(wt);return}g==null||g(wt)},[m,g,Ie,Pe,F]),jt=D.useCallback(wt=>{v==="hover"&&re(!0),y==null||y(wt)},[v,y]),sn=D.useCallback(wt=>{re(!1),x==null||x(wt)},[x]),An=D.useRef(0),Ne=D.useRef(0),ze=lge(),Be=D.useCallback(wt=>{An.current=wt.touches[0].clientX,Ne.current=0,v==="hover"&&re(!0),S==null||S(wt)},[v,S]),It=D.useCallback(wt=>{wt.touches&&wt.touches.length>1?Ne.current=0:Ne.current=wt.touches[0].clientX-An.current,E==null||E(wt)},[E]),At=D.useCallback(wt=>{if(C){const Mt=Ne.current;Math.abs(Mt)>pge&&(Mt>0?Ie(wt):Pe(wt))}v==="hover"&&ze.set(()=>{re(!1)},p||void 0),I==null||I(wt)},[C,v,Ie,Pe,ze,p,I]),wr=p!=null&&!te&&!ue,Wt=D.useRef();D.useEffect(()=>{var wt,Mt;if(!wr)return;const cr=F?Ie:Pe;return Wt.current=window.setInterval(document.visibilityState?lt:cr,(wt=(Mt=Le.current)!=null?Mt:p)!=null?wt:void 0),()=>{Wt.current!==null&&clearInterval(Wt.current)}},[wr,Ie,Pe,Le,p,lt,F]);const ks=D.useMemo(()=>u&&Array.from({length:Ce},(wt,Mt)=>cr=>{d==null||d(Mt,cr)}),[u,Ce,d]);return w.jsxs(r,{ref:Ue,...W,onKeyDown:Ot,onMouseOver:jt,onMouseOut:sn,onTouchStart:Be,onTouchMove:It,onTouchEnd:At,className:Ae(P,z,s&&"slide",i&&`${z}-fade`,A&&`${z}-${A}`),children:[u&&w.jsx("div",{className:`${z}-indicators`,children:Kj(L,(wt,Mt)=>w.jsx("button",{type:"button","data-bs-target":"","aria-label":l!=null&&l.length?l[Mt]:`Slide ${Mt+1}`,className:Mt===ce?"active":void 0,onClick:ks?ks[Mt]:void 0,"aria-current":Mt===ce},Mt))}),w.jsx("div",{className:`${z}-inner`,children:Kj(L,(wt,Mt)=>{const cr=Mt===ce;return s?w.jsx(OS,{in:cr,onEnter:cr?_t:void 0,onEntered:cr?tn:void 0,addEndListener:RS,children:(Xr,Bi)=>D.cloneElement(wt,{...Bi,className:Ae(wt.props.className,cr&&Xr!=="entered"&&Ke,(Xr==="entered"||Xr==="exiting")&&"active",(Xr==="entering"||Xr==="exiting")&&xt)})}):D.cloneElement(wt,{className:Ae(wt.props.className,cr&&"active")})})}),a&&w.jsxs(w.Fragment,{children:[(b||c!==0)&&w.jsxs(r0,{className:`${z}-control-prev`,onClick:Ie,children:[T,N&&w.jsx("span",{className:"visually-hidden",children:N})]}),(b||c!==Ce-1)&&w.jsxs(r0,{className:`${z}-control-next`,onClick:Pe,children:[O,$&&w.jsx("span",{className:"visually-hidden",children:$})]})]})]})});EY.displayName="Carousel";const ps=Object.assign(EY,{Caption:cge,Item:dge});function gge({as:t,bsPrefix:e,className:n,...r}){e=ct(e,"col");const o=J8(),s=Z8(),i=[],a=[];return o.forEach(u=>{const l=r[u];delete r[u];let c,d,f;typeof l=="object"&&l!=null?{span:c,offset:d,order:f}=l:c=l;const h=u!==s?`-${u}`:"";c&&i.push(c===!0?`${e}${h}`:`${e}${h}-${c}`),f!=null&&a.push(`order${h}-${f}`),d!=null&&a.push(`offset${h}-${d}`)}),[{...r,className:Ae(n,...i,...a)},{as:t,bsPrefix:e,spans:i}]}const _Y=D.forwardRef((t,e)=>{const[{className:n,...r},{as:o="div",bsPrefix:s,spans:i}]=gge(t);return w.jsx(o,{...r,ref:e,className:Ae(n,!i.length&&s)})});_Y.displayName="Col";const rt=_Y,IY=D.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:r,...o},s)=>{const i=ct(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return w.jsx(n,{ref:s,...o,className:Ae(r,e?`${i}${a}`:i)})});IY.displayName="Container";const Fs=IY;var vge=Function.prototype.bind.call(Function.prototype.call,[].slice);function Al(t,e){return vge(t.querySelectorAll(e))}function TY(t,e,n){const r=D.useRef(t!==void 0),[o,s]=D.useState(e),i=t!==void 0,a=r.current;return r.current=i,!i&&a&&o!==e&&s(e),[i?t:o,D.useCallback((...u)=>{const[l,...c]=u;let d=n==null?void 0:n(l,...c);return s(l),d},[n])]}function NY(){const[,t]=D.useReducer(e=>!e,!1);return t}const yge=D.createContext(null),$S=yge;var Xj=Object.prototype.hasOwnProperty;function Qj(t,e,n){for(n of t.keys())if(xy(n,e))return n}function xy(t,e){var n,r,o;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&xy(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(o=r,o&&typeof o=="object"&&(o=Qj(e,o),!o)||!e.has(o))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(o=r[0],o&&typeof o=="object"&&(o=Qj(e,o),!o)||!xy(r[1],e.get(o)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(Xj.call(t,n)&&++r&&!Xj.call(e,n)||!(n in e)||!xy(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function xge(t){const e=J$();return[t[0],D.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var ei="top",da="bottom",fa="right",ti="left",rM="auto",kx=[ei,da,fa,ti],Wm="start",o0="end",bge="clippingParents",DY="viewport",_v="popper",wge="reference",Jj=kx.reduce(function(t,e){return t.concat([e+"-"+Wm,e+"-"+o0])},[]),RY=[].concat(kx,[rM]).reduce(function(t,e){return t.concat([e,e+"-"+Wm,e+"-"+o0])},[]),kge="beforeRead",Cge="read",Sge="afterRead",Ege="beforeMain",_ge="main",Ige="afterMain",Tge="beforeWrite",Nge="write",Dge="afterWrite",Rge=[kge,Cge,Sge,Ege,_ge,Ige,Tge,Nge,Dge];function Lu(t){return t.split("-")[0]}function Ni(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function hh(t){var e=Ni(t).Element;return t instanceof e||t instanceof Element}function Bu(t){var e=Ni(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function oM(t){if(typeof ShadowRoot>"u")return!1;var e=Ni(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Zf=Math.max,oC=Math.min,zm=Math.round;function uR(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function OY(){return!/^((?!chrome|android).)*safari/i.test(uR())}function Um(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,s=1;e&&Bu(t)&&(o=t.offsetWidth>0&&zm(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&zm(r.height)/t.offsetHeight||1);var i=hh(t)?Ni(t):window,a=i.visualViewport,u=!OY()&&n,l=(r.left+(u&&a?a.offsetLeft:0))/o,c=(r.top+(u&&a?a.offsetTop:0))/s,d=r.width/o,f=r.height/s;return{width:d,height:f,top:c,right:l+d,bottom:c+f,left:l,x:l,y:c}}function sM(t){var e=Um(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function AY(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&oM(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Md(t){return t?(t.nodeName||"").toLowerCase():null}function nc(t){return Ni(t).getComputedStyle(t)}function Oge(t){return["table","td","th"].indexOf(Md(t))>=0}function tf(t){return((hh(t)?t.ownerDocument:t.document)||window.document).documentElement}function MS(t){return Md(t)==="html"?t:t.assignedSlot||t.parentNode||(oM(t)?t.host:null)||tf(t)}function Zj(t){return!Bu(t)||nc(t).position==="fixed"?null:t.offsetParent}function Age(t){var e=/firefox/i.test(uR()),n=/Trident/i.test(uR());if(n&&Bu(t)){var r=nc(t);if(r.position==="fixed")return null}var o=MS(t);for(oM(o)&&(o=o.host);Bu(o)&&["html","body"].indexOf(Md(o))<0;){var s=nc(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function Cx(t){for(var e=Ni(t),n=Zj(t);n&&Oge(n)&&nc(n).position==="static";)n=Zj(n);return n&&(Md(n)==="html"||Md(n)==="body"&&nc(n).position==="static")?e:n||Age(t)||e}function iM(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function by(t,e,n){return Zf(t,oC(e,n))}function $ge(t,e,n){var r=by(t,e,n);return r>n?n:r}function $Y(){return{top:0,right:0,bottom:0,left:0}}function MY(t){return Object.assign({},$Y(),t)}function PY(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Mge=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,MY(typeof e!="number"?e:PY(e,kx))};function Pge(t){var e,n=t.state,r=t.name,o=t.options,s=n.elements.arrow,i=n.modifiersData.popperOffsets,a=Lu(n.placement),u=iM(a),l=[ti,fa].indexOf(a)>=0,c=l?"height":"width";if(!(!s||!i)){var d=Mge(o.padding,n),f=sM(s),h=u==="y"?ei:ti,p=u==="y"?da:fa,m=n.rects.reference[c]+n.rects.reference[u]-i[u]-n.rects.popper[c],g=i[u]-n.rects.reference[u],v=Cx(s),y=v?u==="y"?v.clientHeight||0:v.clientWidth||0:0,x=m/2-g/2,b=d[h],C=y-f[c]-d[p],S=y/2-f[c]/2+x,E=by(b,S,C),I=u;n.modifiersData[r]=(e={},e[I]=E,e.centerOffset=E-S,e)}}function Fge(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||AY(e.elements.popper,o)&&(e.elements.arrow=o))}const Lge={name:"arrow",enabled:!0,phase:"main",fn:Pge,effect:Fge,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Vm(t){return t.split("-")[1]}var Bge={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jge(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:zm(n*o)/o||0,y:zm(r*o)/o||0}}function eW(t){var e,n=t.popper,r=t.popperRect,o=t.placement,s=t.variation,i=t.offsets,a=t.position,u=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=i.x,h=f===void 0?0:f,p=i.y,m=p===void 0?0:p,g=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=g.x,m=g.y;var v=i.hasOwnProperty("x"),y=i.hasOwnProperty("y"),x=ti,b=ei,C=window;if(l){var S=Cx(n),E="clientHeight",I="clientWidth";if(S===Ni(n)&&(S=tf(n),nc(S).position!=="static"&&a==="absolute"&&(E="scrollHeight",I="scrollWidth")),S=S,o===ei||(o===ti||o===fa)&&s===o0){b=da;var T=d&&S===C&&C.visualViewport?C.visualViewport.height:S[E];m-=T-r.height,m*=u?1:-1}if(o===ti||(o===ei||o===da)&&s===o0){x=fa;var N=d&&S===C&&C.visualViewport?C.visualViewport.width:S[I];h-=N-r.width,h*=u?1:-1}}var O=Object.assign({position:a},l&&Bge),$=c===!0?jge({x:h,y:m},Ni(n)):{x:h,y:m};if(h=$.x,m=$.y,u){var A;return Object.assign({},O,(A={},A[b]=y?"0":"",A[x]=v?"0":"",A.transform=(C.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",A))}return Object.assign({},O,(e={},e[b]=y?m+"px":"",e[x]=v?h+"px":"",e.transform="",e))}function Wge(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,s=n.adaptive,i=s===void 0?!0:s,a=n.roundOffsets,u=a===void 0?!0:a,l={placement:Lu(e.placement),variation:Vm(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,eW(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,eW(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const zge={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Wge,data:{}};var qb={passive:!0};function Uge(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,s=o===void 0?!0:o,i=r.resize,a=i===void 0?!0:i,u=Ni(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&l.forEach(function(c){c.addEventListener("scroll",n.update,qb)}),a&&u.addEventListener("resize",n.update,qb),function(){s&&l.forEach(function(c){c.removeEventListener("scroll",n.update,qb)}),a&&u.removeEventListener("resize",n.update,qb)}}const Vge={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Uge,data:{}};var Hge={left:"right",right:"left",bottom:"top",top:"bottom"};function uk(t){return t.replace(/left|right|bottom|top/g,function(e){return Hge[e]})}var Gge={start:"end",end:"start"};function tW(t){return t.replace(/start|end/g,function(e){return Gge[e]})}function aM(t){var e=Ni(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function uM(t){return Um(tf(t)).left+aM(t).scrollLeft}function Yge(t,e){var n=Ni(t),r=tf(t),o=n.visualViewport,s=r.clientWidth,i=r.clientHeight,a=0,u=0;if(o){s=o.width,i=o.height;var l=OY();(l||!l&&e==="fixed")&&(a=o.offsetLeft,u=o.offsetTop)}return{width:s,height:i,x:a+uM(t),y:u}}function qge(t){var e,n=tf(t),r=aM(t),o=(e=t.ownerDocument)==null?void 0:e.body,s=Zf(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=Zf(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+uM(t),u=-r.scrollTop;return nc(o||n).direction==="rtl"&&(a+=Zf(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:i,x:a,y:u}}function lM(t){var e=nc(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function FY(t){return["html","body","#document"].indexOf(Md(t))>=0?t.ownerDocument.body:Bu(t)&&lM(t)?t:FY(MS(t))}function wy(t,e){var n;e===void 0&&(e=[]);var r=FY(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),s=Ni(r),i=o?[s].concat(s.visualViewport||[],lM(r)?r:[]):r,a=e.concat(i);return o?a:a.concat(wy(MS(i)))}function lR(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Kge(t,e){var n=Um(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function nW(t,e,n){return e===DY?lR(Yge(t,n)):hh(e)?Kge(e,n):lR(qge(tf(t)))}function Xge(t){var e=wy(MS(t)),n=["absolute","fixed"].indexOf(nc(t).position)>=0,r=n&&Bu(t)?Cx(t):t;return hh(r)?e.filter(function(o){return hh(o)&&AY(o,r)&&Md(o)!=="body"}):[]}function Qge(t,e,n,r){var o=e==="clippingParents"?Xge(t):[].concat(e),s=[].concat(o,[n]),i=s[0],a=s.reduce(function(u,l){var c=nW(t,l,r);return u.top=Zf(c.top,u.top),u.right=oC(c.right,u.right),u.bottom=oC(c.bottom,u.bottom),u.left=Zf(c.left,u.left),u},nW(t,i,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function LY(t){var e=t.reference,n=t.element,r=t.placement,o=r?Lu(r):null,s=r?Vm(r):null,i=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,u;switch(o){case ei:u={x:i,y:e.y-n.height};break;case da:u={x:i,y:e.y+e.height};break;case fa:u={x:e.x+e.width,y:a};break;case ti:u={x:e.x-n.width,y:a};break;default:u={x:e.x,y:e.y}}var l=o?iM(o):null;if(l!=null){var c=l==="y"?"height":"width";switch(s){case Wm:u[l]=u[l]-(e[c]/2-n[c]/2);break;case o0:u[l]=u[l]+(e[c]/2-n[c]/2);break}}return u}function s0(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,s=n.strategy,i=s===void 0?t.strategy:s,a=n.boundary,u=a===void 0?bge:a,l=n.rootBoundary,c=l===void 0?DY:l,d=n.elementContext,f=d===void 0?_v:d,h=n.altBoundary,p=h===void 0?!1:h,m=n.padding,g=m===void 0?0:m,v=MY(typeof g!="number"?g:PY(g,kx)),y=f===_v?wge:_v,x=t.rects.popper,b=t.elements[p?y:f],C=Qge(hh(b)?b:b.contextElement||tf(t.elements.popper),u,c,i),S=Um(t.elements.reference),E=LY({reference:S,element:x,strategy:"absolute",placement:o}),I=lR(Object.assign({},x,E)),T=f===_v?I:S,N={top:C.top-T.top+v.top,bottom:T.bottom-C.bottom+v.bottom,left:C.left-T.left+v.left,right:T.right-C.right+v.right},O=t.modifiersData.offset;if(f===_v&&O){var $=O[o];Object.keys(N).forEach(function(A){var P=[fa,da].indexOf(A)>=0?1:-1,L=[ei,da].indexOf(A)>=0?"y":"x";N[A]+=$[L]*P})}return N}function Jge(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,s=n.rootBoundary,i=n.padding,a=n.flipVariations,u=n.allowedAutoPlacements,l=u===void 0?RY:u,c=Vm(r),d=c?a?Jj:Jj.filter(function(p){return Vm(p)===c}):kx,f=d.filter(function(p){return l.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=s0(t,{placement:m,boundary:o,rootBoundary:s,padding:i})[Lu(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function Zge(t){if(Lu(t)===rM)return[];var e=uk(t);return[tW(t),e,tW(e)]}function eve(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,u=n.fallbackPlacements,l=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,m=n.allowedAutoPlacements,g=e.options.placement,v=Lu(g),y=v===g,x=u||(y||!p?[uk(g)]:Zge(g)),b=[g].concat(x).reduce(function(ue,Q){return ue.concat(Lu(Q)===rM?Jge(e,{placement:Q,boundary:c,rootBoundary:d,padding:l,flipVariations:p,allowedAutoPlacements:m}):Q)},[]),C=e.rects.reference,S=e.rects.popper,E=new Map,I=!0,T=b[0],N=0;N<b.length;N++){var O=b[N],$=Lu(O),A=Vm(O)===Wm,P=[ei,da].indexOf($)>=0,L=P?"width":"height",W=s0(e,{placement:O,boundary:c,rootBoundary:d,altBoundary:f,padding:l}),z=P?A?fa:ti:A?da:ei;C[L]>S[L]&&(z=uk(z));var F=uk(z),B=[];if(s&&B.push(W[$]<=0),a&&B.push(W[z]<=0,W[F]<=0),B.every(function(ue){return ue})){T=O,I=!1;break}E.set(O,B)}if(I)for(var H=p?3:1,X=function(Q){var ce=b.find(function(ke){var Ce=E.get(ke);if(Ce)return Ce.slice(0,Q).every(function(_e){return _e})});if(ce)return T=ce,"break"},te=H;te>0;te--){var re=X(te);if(re==="break")break}e.placement!==T&&(e.modifiersData[r]._skip=!0,e.placement=T,e.reset=!0)}}const tve={name:"flip",enabled:!0,phase:"main",fn:eve,requiresIfExists:["offset"],data:{_skip:!1}};function rW(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function oW(t){return[ei,fa,da,ti].some(function(e){return t[e]>=0})}function nve(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,s=e.modifiersData.preventOverflow,i=s0(e,{elementContext:"reference"}),a=s0(e,{altBoundary:!0}),u=rW(i,r),l=rW(a,o,s),c=oW(u),d=oW(l);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const rve={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nve};function ove(t,e,n){var r=Lu(t),o=[ti,ei].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=s[0],a=s[1];return i=i||0,a=(a||0)*o,[ti,fa].indexOf(r)>=0?{x:a,y:i}:{x:i,y:a}}function sve(t){var e=t.state,n=t.options,r=t.name,o=n.offset,s=o===void 0?[0,0]:o,i=RY.reduce(function(c,d){return c[d]=ove(d,e.rects,s),c},{}),a=i[e.placement],u=a.x,l=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=i}const ive={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sve};function ave(t){var e=t.state,n=t.name;e.modifiersData[n]=LY({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const uve={name:"popperOffsets",enabled:!0,phase:"read",fn:ave,data:{}};function lve(t){return t==="x"?"y":"x"}function cve(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,s=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,m=p===void 0?0:p,g=s0(e,{boundary:u,rootBoundary:l,padding:d,altBoundary:c}),v=Lu(e.placement),y=Vm(e.placement),x=!y,b=iM(v),C=lve(b),S=e.modifiersData.popperOffsets,E=e.rects.reference,I=e.rects.popper,T=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,N=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$={x:0,y:0};if(S){if(s){var A,P=b==="y"?ei:ti,L=b==="y"?da:fa,W=b==="y"?"height":"width",z=S[b],F=z+g[P],B=z-g[L],H=h?-I[W]/2:0,X=y===Wm?E[W]:I[W],te=y===Wm?-I[W]:-E[W],re=e.elements.arrow,ue=h&&re?sM(re):{width:0,height:0},Q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:$Y(),ce=Q[P],ke=Q[L],Ce=by(0,E[W],ue[W]),_e=x?E[W]/2-H-Ce-ce-N.mainAxis:X-Ce-ce-N.mainAxis,Le=x?-E[W]/2+H+Ce+ke+N.mainAxis:te+Ce+ke+N.mainAxis,Ie=e.elements.arrow&&Cx(e.elements.arrow),Pe=Ie?b==="y"?Ie.clientTop||0:Ie.clientLeft||0:0,Ue=(A=O==null?void 0:O[b])!=null?A:0,lt=z+_e-Ue-Pe,Me=z+Le-Ue,Ke=by(h?oC(F,lt):F,z,h?Zf(B,Me):B);S[b]=Ke,$[b]=Ke-z}if(a){var xt,_t=b==="x"?ei:ti,tn=b==="x"?da:fa,Ot=S[C],jt=C==="y"?"height":"width",sn=Ot+g[_t],An=Ot-g[tn],Ne=[ei,ti].indexOf(v)!==-1,ze=(xt=O==null?void 0:O[C])!=null?xt:0,Be=Ne?sn:Ot-E[jt]-I[jt]-ze+N.altAxis,It=Ne?Ot+E[jt]+I[jt]-ze-N.altAxis:An,At=h&&Ne?$ge(Be,Ot,It):by(h?Be:sn,Ot,h?It:An);S[C]=At,$[C]=At-Ot}e.modifiersData[r]=$}}const dve={name:"preventOverflow",enabled:!0,phase:"main",fn:cve,requiresIfExists:["offset"]};function fve(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function hve(t){return t===Ni(t)||!Bu(t)?aM(t):fve(t)}function pve(t){var e=t.getBoundingClientRect(),n=zm(e.width)/t.offsetWidth||1,r=zm(e.height)/t.offsetHeight||1;return n!==1||r!==1}function mve(t,e,n){n===void 0&&(n=!1);var r=Bu(e),o=Bu(e)&&pve(e),s=tf(e),i=Um(t,o,n),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((Md(e)!=="body"||lM(s))&&(a=hve(e)),Bu(e)?(u=Um(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=uM(s))),{x:i.left+a.scrollLeft-u.x,y:i.top+a.scrollTop-u.y,width:i.width,height:i.height}}function gve(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function o(s){n.add(s.name);var i=[].concat(s.requires||[],s.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var u=e.get(a);u&&o(u)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||o(s)}),r}function vve(t){var e=gve(t);return Rge.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function yve(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function xve(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var sW={placement:"bottom",modifiers:[],strategy:"absolute"};function iW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function bve(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,s=o===void 0?sW:o;return function(a,u,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},sW,s),modifiersData:{},elements:{reference:a,popper:u},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(v){var y=typeof v=="function"?v(c.options):v;m(),c.options=Object.assign({},s,c.options,y),c.scrollParents={reference:hh(a)?wy(a):a.contextElement?wy(a.contextElement):[],popper:wy(u)};var x=vve(xve([].concat(r,c.options.modifiers)));return c.orderedModifiers=x.filter(function(b){return b.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var v=c.elements,y=v.reference,x=v.popper;if(iW(y,x)){c.rects={reference:mve(y,Cx(x),c.options.strategy==="fixed"),popper:sM(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(N){return c.modifiersData[N.name]=Object.assign({},N.data)});for(var b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var C=c.orderedModifiers[b],S=C.fn,E=C.options,I=E===void 0?{}:E,T=C.name;typeof S=="function"&&(c=S({state:c,options:I,name:T,instance:h})||c)}}}},update:yve(function(){return new Promise(function(g){h.forceUpdate(),g(c)})}),destroy:function(){m(),f=!0}};if(!iW(a,u))return h;h.setOptions(l).then(function(g){!f&&l.onFirstUpdate&&l.onFirstUpdate(g)});function p(){c.orderedModifiers.forEach(function(g){var v=g.name,y=g.options,x=y===void 0?{}:y,b=g.effect;if(typeof b=="function"){var C=b({state:c,name:v,instance:h,options:x}),S=function(){};d.push(C||S)}})}function m(){d.forEach(function(g){return g()}),d=[]}return h}}const wve=bve({defaultModifiers:[rve,uve,zge,Vge,ive,tve,dve,Lge]}),kve=["enabled","placement","strategy","modifiers"];function Cve(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}const Sve={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Eve={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(o=>o.trim()!==n.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:r}=t.elements,o=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&o==="tooltip"&&"setAttribute"in r){const s=r.getAttribute("aria-describedby");if(s&&s.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",s?`${s},${n.id}`:n.id)}}},_ve=[];function Ive(t,e,n={}){let{enabled:r=!0,placement:o="bottom",strategy:s="absolute",modifiers:i=_ve}=n,a=Cve(n,kve);const u=D.useRef(i),l=D.useRef(),c=D.useCallback(()=>{var g;(g=l.current)==null||g.update()},[]),d=D.useCallback(()=>{var g;(g=l.current)==null||g.forceUpdate()},[]),[f,h]=xge(D.useState({placement:o,update:c,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),p=D.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:g})=>{const v={},y={};Object.keys(g.elements).forEach(x=>{v[x]=g.styles[x],y[x]=g.attributes[x]}),h({state:g,styles:v,attributes:y,update:c,forceUpdate:d,placement:g.placement})}}),[c,d,h]),m=D.useMemo(()=>(xy(u.current,i)||(u.current=i),u.current),[i]);return D.useEffect(()=>{!l.current||!r||l.current.setOptions({placement:o,strategy:s,modifiers:[...m,p,Sve]})},[s,o,p,r,m]),D.useEffect(()=>{if(!(!r||t==null||e==null))return l.current=wve(t,e,Object.assign({},a,{placement:o,strategy:s,modifiers:[...m,Eve,p]})),()=>{l.current!=null&&(l.current.destroy(),l.current=void 0,h(g=>Object.assign({},g,{attributes:{},styles:{popper:{}}})))}},[r,t,e]),f}function sC(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var Tve=function(){},Nve=Tve;const Dve=Xd(Nve),aW=()=>{};function Rve(t){return t.button===0}function Ove(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const hT=t=>t&&("current"in t?t.current:t),uW={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Ave(t,e=aW,{disabled:n,clickTrigger:r="click"}={}){const o=D.useRef(!1),s=D.useRef(!1),i=D.useCallback(l=>{const c=hT(t);Dve(!!c,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),o.current=!c||Ove(l)||!Rve(l)||!!sC(c,l.target)||s.current,s.current=!1},[t]),a=gr(l=>{const c=hT(t);c&&sC(c,l.target)&&(s.current=!0)}),u=gr(l=>{o.current||e(l)});D.useEffect(()=>{var l,c;if(n||t==null)return;const d=bx(hT(t)),f=d.defaultView||window;let h=(l=f.event)!=null?l:(c=f.parent)==null?void 0:c.event,p=null;uW[r]&&(p=Jc(d,uW[r],a,!0));const m=Jc(d,r,i,!0),g=Jc(d,r,y=>{if(y===h){h=void 0;return}u(y)});let v=[];return"ontouchstart"in d.documentElement&&(v=[].slice.call(d.body.children).map(y=>Jc(y,"mousemove",aW))),()=>{p==null||p(),m(),g(),v.forEach(y=>y())}},[t,n,r,i,a,u])}function $ve(t){const e={};return Array.isArray(t)?(t==null||t.forEach(n=>{e[n.name]=n}),e):t||e}function Mve(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function Pve({enabled:t,enableEvents:e,placement:n,flip:r,offset:o,fixed:s,containerPadding:i,arrowElement:a,popperConfig:u={}}){var l,c,d,f,h;const p=$ve(u.modifiers);return Object.assign({},u,{placement:n,enabled:t,strategy:s?"fixed":u.strategy,modifiers:Mve(Object.assign({},p,{eventListeners:{enabled:e,options:(l=p.eventListeners)==null?void 0:l.options},preventOverflow:Object.assign({},p.preventOverflow,{options:i?Object.assign({padding:i},(c=p.preventOverflow)==null?void 0:c.options):(d=p.preventOverflow)==null?void 0:d.options}),offset:{options:Object.assign({offset:o},(f=p.offset)==null?void 0:f.options)},arrow:Object.assign({},p.arrow,{enabled:!!a,options:Object.assign({},(h=p.arrow)==null?void 0:h.options,{element:a})}),flip:Object.assign({enabled:!!r},p.flip)}))})}const Fve=["children"];function Lve(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}const Bve=()=>{};function BY(t={}){const e=D.useContext($S),[n,r]=rY(),o=D.useRef(!1),{flip:s,offset:i,rootCloseEvent:a,fixed:u=!1,placement:l,popperConfig:c={},enableEventListeners:d=!0,usePopper:f=!!e}=t,h=(e==null?void 0:e.show)==null?!!t.show:e.show;h&&!o.current&&(o.current=!0);const p=S=>{e==null||e.toggle(!1,S)},{placement:m,setMenu:g,menuElement:v,toggleElement:y}=e||{},x=Ive(y,v,Pve({placement:l||m||"bottom-start",enabled:f,enableEvents:d??h,offset:i,flip:s,fixed:u,arrowElement:n,popperConfig:c})),b=Object.assign({ref:g||Bve,"aria-labelledby":y==null?void 0:y.id},x.attributes.popper,{style:x.styles.popper}),C={show:h,placement:m,hasShown:o.current,toggle:e==null?void 0:e.toggle,popper:f?x:null,arrowProps:f?Object.assign({ref:r},x.attributes.arrow,{style:x.styles.arrow}):{}};return Ave(v,p,{clickTrigger:a,disabled:!h}),[b,C]}const jve={usePopper:!0};function cM(t){let{children:e}=t,n=Lve(t,Fve);const[r,o]=BY(n);return w.jsx(w.Fragment,{children:e(r,o)})}cM.displayName="DropdownMenu";cM.defaultProps=jve;const iC={prefix:String(Math.round(Math.random()*1e10)),current:0},jY=ee.createContext(iC),Wve=ee.createContext(!1);let zve=!!(typeof window<"u"&&window.document&&window.document.createElement),pT=new WeakMap;function Uve(t=!1){let e=D.useContext(jY),n=D.useRef(null);if(n.current===null&&!t){var r,o;let s=(o=ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||o===void 0||(r=o.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(s){let i=pT.get(s);i==null?pT.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==i.state&&(e.current=i.id,pT.delete(s))}n.current=++e.current}return n.current}function Vve(t){let e=D.useContext(jY);e===iC&&!zve&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Uve(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function Hve(t){let e=ee.useId(),[n]=D.useState(Kve()),r=n?"react-aria":`react-aria${iC.prefix}`;return t||`${r}-${e}`}const WY=typeof ee.useId=="function"?Hve:Vve;function Gve(){return!1}function Yve(){return!0}function qve(t){return()=>{}}function Kve(){return typeof ee.useSyncExternalStore=="function"?ee.useSyncExternalStore(qve,Gve,Yve):D.useContext(Wve)}const zY=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},lW=()=>{};function UY(){const t=WY(),{show:e=!1,toggle:n=lW,setToggle:r,menuElement:o}=D.useContext($S)||{},s=D.useCallback(a=>{n(!e,a)},[e,n]),i={id:t,ref:r||lW,onClick:s,"aria-expanded":!!e};return o&&zY(o)&&(i["aria-haspopup"]=!0),[i,{show:e,toggle:n}]}function VY({children:t}){const[e,n]=UY();return w.jsx(w.Fragment,{children:t(e,n)})}VY.displayName="DropdownToggle";const Xve=D.createContext(null),ph=(t,e=null)=>t!=null?String(t):e||null,Ju=Xve,HY=D.createContext(null);HY.displayName="NavContext";const dM=HY,Qve="data-rr-ui-",Jve="rrUi";function Dg(t){return`${Qve}${t}`}function Zve(t){return`${Jve}${t}`}const eye=["eventKey","disabled","onClick","active","as"];function tye(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function GY({key:t,href:e,active:n,disabled:r,onClick:o}){const s=D.useContext(Ju),i=D.useContext(dM),{activeKey:a}=i||{},u=ph(t,e),l=n==null&&t!=null?ph(a)===u:n;return[{onClick:gr(d=>{r||(o==null||o(d),s&&!d.isPropagationStopped()&&s(u,d))}),"aria-disabled":r||void 0,"aria-selected":l,[Dg("dropdown-item")]:""},{isActive:l}]}const YY=D.forwardRef((t,e)=>{let{eventKey:n,disabled:r,onClick:o,active:s,as:i=eM}=t,a=tye(t,eye);const[u]=GY({key:n,href:a.href,disabled:r,onClick:o,active:s});return w.jsx(i,Object.assign({},a,{ref:e},u))});YY.displayName="DropdownItem";const qY=D.createContext(Ng?window:void 0);qY.Provider;function PS(){return D.useContext(qY)}function cW(){const t=NY(),e=D.useRef(null),n=D.useCallback(r=>{e.current=r,t()},[t]);return[e,n]}function Sx({defaultShow:t,show:e,onSelect:n,onToggle:r,itemSelector:o=`* [${Dg("dropdown-item")}]`,focusFirstItemOnShow:s,placement:i="bottom-start",children:a}){const u=PS(),[l,c]=TY(e,t,r),[d,f]=cW(),h=d.current,[p,m]=cW(),g=p.current,v=oY(l),y=D.useRef(null),x=D.useRef(!1),b=D.useContext(Ju),C=D.useCallback((O,$,A=$==null?void 0:$.type)=>{c(O,{originalEvent:$,source:A})},[c]),S=gr((O,$)=>{n==null||n(O,$),C(!1,$,"select"),$.isPropagationStopped()||b==null||b(O,$)}),E=D.useMemo(()=>({toggle:C,placement:i,show:l,menuElement:h,toggleElement:g,setMenu:f,setToggle:m}),[C,i,l,h,g,f,m]);h&&v&&!l&&(x.current=h.contains(h.ownerDocument.activeElement));const I=gr(()=>{g&&g.focus&&g.focus()}),T=gr(()=>{const O=y.current;let $=s;if($==null&&($=d.current&&zY(d.current)?"keyboard":!1),$===!1||$==="keyboard"&&!/^key.+$/.test(O))return;const A=Al(d.current,o)[0];A&&A.focus&&A.focus()});D.useEffect(()=>{l?T():x.current&&(x.current=!1,I())},[l,x,I,T]),D.useEffect(()=>{y.current=null});const N=(O,$)=>{if(!d.current)return null;const A=Al(d.current,o);let P=A.indexOf(O)+$;return P=Math.max(0,Math.min(P,A.length)),A[P]};return Bme(D.useCallback(()=>u.document,[u]),"keydown",O=>{var $,A;const{key:P}=O,L=O.target,W=($=d.current)==null?void 0:$.contains(L),z=(A=p.current)==null?void 0:A.contains(L);if(/input|textarea/i.test(L.tagName)&&(P===" "||P!=="Escape"&&W||P==="Escape"&&L.type==="search")||!W&&!z||P==="Tab"&&(!d.current||!l))return;y.current=O.type;const B={originalEvent:O,source:O.type};switch(P){case"ArrowUp":{const H=N(L,-1);H&&H.focus&&H.focus(),O.preventDefault();return}case"ArrowDown":if(O.preventDefault(),!l)c(!0,B);else{const H=N(L,1);H&&H.focus&&H.focus()}return;case"Tab":X$(L.ownerDocument,"keyup",H=>{var X;(H.key==="Tab"&&!H.target||!((X=d.current)!=null&&X.contains(H.target)))&&c(!1,B)},{once:!0});break;case"Escape":P==="Escape"&&(O.preventDefault(),O.stopPropagation()),c(!1,B);break}}),w.jsx(Ju.Provider,{value:S,children:w.jsx($S.Provider,{value:E,children:a})})}Sx.displayName="Dropdown";Sx.Menu=cM;Sx.Toggle=VY;Sx.Item=YY;const KY=D.createContext({});KY.displayName="DropdownContext";const XY=KY,QY=D.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:r="separator",...o},s)=>(e=ct(e,"dropdown-divider"),w.jsx(n,{ref:s,className:Ae(t,e),role:r,...o})));QY.displayName="DropdownDivider";const nye=QY,JY=D.forwardRef(({className:t,bsPrefix:e,as:n="div",role:r="heading",...o},s)=>(e=ct(e,"dropdown-header"),w.jsx(n,{ref:s,className:Ae(t,e),role:r,...o})));JY.displayName="DropdownHeader";const rye=JY,ZY=D.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:r=!1,onClick:o,active:s,as:i=r0,...a},u)=>{const l=ct(t,"dropdown-item"),[c,d]=GY({key:n,href:a.href,disabled:r,onClick:o,active:s});return w.jsx(i,{...a,...c,ref:u,className:Ae(e,l,d.isActive&&"active",r&&"disabled")})});ZY.displayName="DropdownItem";const oye=ZY,e7=D.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},o)=>(e=ct(e,"dropdown-item-text"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));e7.displayName="DropdownItemText";const sye=e7,t7=D.createContext(null);t7.displayName="InputGroupContext";const fM=t7,n7=D.createContext(null);n7.displayName="NavbarContext";const Uh=n7;function r7(t,e){return t}function o7(t,e,n){const r=n?"top-end":"top-start",o=n?"top-start":"top-end",s=n?"bottom-end":"bottom-start",i=n?"bottom-start":"bottom-end",a=n?"right-start":"left-start",u=n?"right-end":"left-end",l=n?"left-start":"right-start",c=n?"left-end":"right-end";let d=t?i:s;return e==="up"?d=t?o:r:e==="end"?d=t?c:l:e==="start"?d=t?u:a:e==="down-centered"?d="bottom":e==="up-centered"&&(d="top"),d}const s7=D.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:r,flip:o=!0,show:s,renderOnMount:i,as:a="div",popperConfig:u,variant:l,...c},d)=>{let f=!1;const h=D.useContext(Uh),p=ct(t,"dropdown-menu"),{align:m,drop:g,isRTL:v}=D.useContext(XY);n=n||m;const y=D.useContext(fM),x=[];if(n)if(typeof n=="object"){const O=Object.keys(n);if(O.length){const $=O[0],A=n[$];f=A==="start",x.push(`${p}-${$}-${A}`)}}else n==="end"&&(f=!0);const b=o7(f,g,v),[C,{hasShown:S,popper:E,show:I,toggle:T}]=BY({flip:o,rootCloseEvent:r,show:s,usePopper:!h&&x.length===0,offset:[0,2],popperConfig:u,placement:b});if(C.ref=zh(r7(d),C.ref),rC(()=>{I&&(E==null||E.update())},[I]),!S&&!i&&!y)return null;typeof a!="string"&&(C.show=I,C.close=()=>T==null?void 0:T(!1),C.align=n);let N=c.style;return E!=null&&E.placement&&(N={...c.style,...C.style},c["x-placement"]=E.placement),w.jsx(a,{...c,...C,style:N,...(x.length||h)&&{"data-bs-popper":"static"},className:Ae(e,p,I&&"show",f&&`${p}-end`,l&&`${p}-${l}`,...x)})});s7.displayName="DropdownMenu";const iye=s7,i7=D.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:r,as:o=vt,...s},i)=>{const a=ct(t,"dropdown-toggle"),u=D.useContext($S);r!==void 0&&(s.bsPrefix=r);const[l]=UY();return l.ref=zh(l.ref,r7(i)),w.jsx(o,{className:Ae(n,a,e&&`${a}-split`,(u==null?void 0:u.show)&&"show"),...l,...s})});i7.displayName="DropdownToggle";const aye=i7,a7=D.forwardRef((t,e)=>{const{bsPrefix:n,drop:r="down",show:o,className:s,align:i="start",onSelect:a,onToggle:u,focusFirstItemOnShow:l,as:c="div",navbar:d,autoClose:f=!0,...h}=NS(t,{show:"onToggle"}),p=D.useContext(fM),m=ct(n,"dropdown"),g=K$(),v=E=>f===!1?E==="click":f==="inside"?E!=="rootClose":f==="outside"?E!=="select":!0,y=gr((E,I)=>{var T,N;!((T=I.originalEvent)==null||(N=T.target)==null)&&N.classList.contains("dropdown-toggle")&&I.source==="mousedown"||(I.originalEvent.currentTarget===document&&(I.source!=="keydown"||I.originalEvent.key==="Escape")&&(I.source="rootClose"),v(I.source)&&(u==null||u(E,I)))}),b=o7(i==="end",r,g),C=D.useMemo(()=>({align:i,drop:r,isRTL:g}),[i,r,g]),S={down:m,"down-centered":`${m}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return w.jsx(XY.Provider,{value:C,children:w.jsx(Sx,{placement:b,show:o,onSelect:a,onToggle:y,focusFirstItemOnShow:l,itemSelector:`.${m}-item:not(.disabled):not(:disabled)`,children:p?h.children:w.jsx(c,{...h,ref:e,className:Ae(s,o&&"show",S[r])})})})});a7.displayName="Dropdown";const Iv=Object.assign(a7,{Toggle:aye,Menu:iye,Item:oye,ItemText:sye,Divider:nye,Header:rye});ye.string,ye.bool,ye.bool,ye.bool,ye.bool;const u7=D.forwardRef(({bsPrefix:t,className:e,fluid:n=!1,rounded:r=!1,roundedCircle:o=!1,thumbnail:s=!1,...i},a)=>(t=ct(t,"img"),w.jsx("img",{ref:a,...i,className:Ae(e,n&&`${t}-fluid`,r&&"rounded",o&&"rounded-circle",s&&`${t}-thumbnail`)})));u7.displayName="Image";const l7=u7,uye={type:ye.string,tooltip:ye.bool,as:ye.elementType},hM=D.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...o},s)=>w.jsx(t,{...o,ref:s,className:Ae(e,`${n}-${r?"tooltip":"feedback"}`)}));hM.displayName="Feedback";hM.propTypes=uye;const c7=hM,lye=D.createContext({}),rc=lye,d7=D.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:o=!1,isInvalid:s=!1,as:i="input",...a},u)=>{const{controlId:l}=D.useContext(rc);return e=ct(e,"form-check-input"),w.jsx(i,{...a,ref:u,type:r,id:t||l,className:Ae(n,e,o&&"is-valid",s&&"is-invalid")})});d7.displayName="FormCheckInput";const FS=d7,f7=D.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},o)=>{const{controlId:s}=D.useContext(rc);return t=ct(t,"form-check-label"),w.jsx("label",{...r,ref:o,htmlFor:n||s,className:Ae(e,t)})});f7.displayName="FormCheckLabel";const cR=f7,h7=D.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:o=!1,disabled:s=!1,isValid:i=!1,isInvalid:a=!1,feedbackTooltip:u=!1,feedback:l,feedbackType:c,className:d,style:f,title:h="",type:p="checkbox",label:m,children:g,as:v="input",...y},x)=>{e=ct(e,"form-check"),n=ct(n,"form-switch");const{controlId:b}=D.useContext(rc),C=D.useMemo(()=>({controlId:t||b}),[b,t]),S=!g&&m!=null&&m!==!1||hge(g,cR),E=w.jsx(FS,{...y,type:p==="switch"?"checkbox":p,ref:x,isValid:i,isInvalid:a,disabled:s,as:v});return w.jsx(rc.Provider,{value:C,children:w.jsx("div",{style:f,className:Ae(d,S&&e,r&&`${e}-inline`,o&&`${e}-reverse`,p==="switch"&&n),children:g||w.jsxs(w.Fragment,{children:[E,S&&w.jsx(cR,{title:h,children:m}),l&&w.jsx(c7,{type:c,tooltip:u,children:l})]})})})});h7.displayName="FormCheck";const aC=Object.assign(h7,{Input:FS,Label:cR}),p7=D.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:o,className:s,isValid:i=!1,isInvalid:a=!1,plaintext:u,readOnly:l,as:c="input",...d},f)=>{const{controlId:h}=D.useContext(rc);return t=ct(t,"form-control"),w.jsx(c,{...d,type:e,size:r,ref:f,readOnly:l,id:o||h,className:Ae(s,u?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,i&&"is-valid",a&&"is-invalid")})});p7.displayName="FormControl";const m7=Object.assign(p7,{Feedback:c7}),g7=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"form-floating"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));g7.displayName="FormFloating";const cye=g7,v7=D.forwardRef(({controlId:t,as:e="div",...n},r)=>{const o=D.useMemo(()=>({controlId:t}),[t]);return w.jsx(rc.Provider,{value:o,children:w.jsx(e,{...n,ref:r})})});v7.displayName="FormGroup";const y7=v7,x7=D.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:o,htmlFor:s,...i},a)=>{const{controlId:u}=D.useContext(rc);e=ct(e,"form-label");let l="col-form-label";typeof n=="string"&&(l=`${l} ${l}-${n}`);const c=Ae(o,e,r&&"visually-hidden",n&&l);return s=s||u,n?w.jsx(rt,{ref:a,as:"label",className:c,htmlFor:s,...i}):w.jsx(t,{ref:a,className:c,htmlFor:s,...i})});x7.displayName="FormLabel";const dye=x7,b7=D.forwardRef(({bsPrefix:t,className:e,id:n,...r},o)=>{const{controlId:s}=D.useContext(rc);return t=ct(t,"form-range"),w.jsx("input",{...r,type:"range",ref:o,className:Ae(e,t),id:n||s})});b7.displayName="FormRange";const fye=b7,w7=D.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:o=!1,isInvalid:s=!1,id:i,...a},u)=>{const{controlId:l}=D.useContext(rc);return t=ct(t,"form-select"),w.jsx("select",{...a,size:n,ref:u,className:Ae(r,t,e&&`${t}-${e}`,o&&"is-valid",s&&"is-invalid"),id:i||l})});w7.displayName="FormSelect";const hye=w7,k7=D.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...o},s)=>(t=ct(t,"form-text"),w.jsx(n,{...o,ref:s,className:Ae(e,t,r&&"text-muted")})));k7.displayName="FormText";const pye=k7,C7=D.forwardRef((t,e)=>w.jsx(aC,{...t,ref:e,type:"switch"}));C7.displayName="Switch";const mye=Object.assign(C7,{Input:aC.Input,Label:aC.Label}),S7=D.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:o,...s},i)=>(t=ct(t,"form-floating"),w.jsxs(y7,{ref:i,className:Ae(e,t),controlId:r,...s,children:[n,w.jsx("label",{htmlFor:r,children:o})]})));S7.displayName="FloatingLabel";const gye=S7,vye={_ref:ye.any,validated:ye.bool,as:ye.elementType},pM=D.forwardRef(({className:t,validated:e,as:n="form",...r},o)=>w.jsx(n,{...r,ref:o,className:Ae(t,e&&"was-validated")}));pM.displayName="Form";pM.propTypes=vye;const ve=Object.assign(pM,{Group:y7,Control:m7,Floating:cye,Check:aC,Switch:mye,Label:dye,Text:pye,Range:fye,Select:hye,FloatingLabel:gye}),E7=D.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},o)=>(e=ct(e,"input-group-text"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));E7.displayName="InputGroupText";const mM=E7,yye=t=>w.jsx(mM,{children:w.jsx(FS,{type:"checkbox",...t})}),xye=t=>w.jsx(mM,{children:w.jsx(FS,{type:"radio",...t})}),_7=D.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:r,as:o="div",...s},i)=>{t=ct(t,"input-group");const a=D.useMemo(()=>({}),[]);return w.jsx(fM.Provider,{value:a,children:w.jsx(o,{ref:i,...s,className:Ae(r,t,e&&`${t}-${e}`,n&&"has-validation")})})});_7.displayName="InputGroup";const bye=Object.assign(_7,{Text:mM,Radio:xye,Checkbox:yye}),wye=D.createContext(null),Rg=wye,kye=["as","active","eventKey"];function Cye(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function I7({key:t,onClick:e,active:n,id:r,role:o,disabled:s}){const i=D.useContext(Ju),a=D.useContext(dM),u=D.useContext(Rg);let l=n;const c={role:o};if(a){!o&&a.role==="tablist"&&(c.role="tab");const d=a.getControllerId(t??null),f=a.getControlledId(t??null);c[Dg("event-key")]=t,c.id=d||r,l=n==null&&t!=null?a.activeKey===t:n,(l||!(u!=null&&u.unmountOnExit)&&!(u!=null&&u.mountOnEnter))&&(c["aria-controls"]=f)}return c.role==="tab"&&(c["aria-selected"]=l,l||(c.tabIndex=-1),s&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=gr(d=>{s||(e==null||e(d),t!=null&&i&&!d.isPropagationStopped()&&i(t,d))}),[c,{isActive:l}]}const T7=D.forwardRef((t,e)=>{let{as:n=eM,active:r,eventKey:o}=t,s=Cye(t,kye);const[i,a]=I7(Object.assign({key:ph(o,s.href),active:r},s));return i[Dg("active")]=a.isActive,w.jsx(n,Object.assign({},s,i,{ref:e}))});T7.displayName="NavItem";const Sye=T7,Eye=["as","onSelect","activeKey","role","onKeyDown"];function _ye(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}const dW=()=>{},fW=Dg("event-key"),N7=D.forwardRef((t,e)=>{let{as:n="div",onSelect:r,activeKey:o,role:s,onKeyDown:i}=t,a=_ye(t,Eye);const u=NY(),l=D.useRef(!1),c=D.useContext(Ju),d=D.useContext(Rg);let f,h;d&&(s=s||"tablist",o=d.activeKey,f=d.getControlledId,h=d.getControllerId);const p=D.useRef(null),m=x=>{const b=p.current;if(!b)return null;const C=Al(b,`[${fW}]:not([aria-disabled=true])`),S=b.querySelector("[aria-selected=true]");if(!S||S!==document.activeElement)return null;const E=C.indexOf(S);if(E===-1)return null;let I=E+x;return I>=C.length&&(I=0),I<0&&(I=C.length-1),C[I]},g=(x,b)=>{x!=null&&(r==null||r(x,b),c==null||c(x,b))},v=x=>{if(i==null||i(x),!d)return;let b;switch(x.key){case"ArrowLeft":case"ArrowUp":b=m(-1);break;case"ArrowRight":case"ArrowDown":b=m(1);break;default:return}b&&(x.preventDefault(),g(b.dataset[Zve("EventKey")]||null,x),l.current=!0,u())};D.useEffect(()=>{if(p.current&&l.current){const x=p.current.querySelector(`[${fW}][aria-selected=true]`);x==null||x.focus()}l.current=!1});const y=zh(e,p);return w.jsx(Ju.Provider,{value:g,children:w.jsx(dM.Provider,{value:{role:s,activeKey:ph(o),getControlledId:f||dW,getControllerId:h||dW},children:w.jsx(n,Object.assign({},a,{onKeyDown:v,ref:y,role:s}))})})});N7.displayName="Nav";const Iye=Object.assign(N7,{Item:Sye});var Kb;function hW(t){if((!Kb&&Kb!==0||t)&&Ng){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Kb=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Kb}function mT(t){t===void 0&&(t=bx());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function Tye(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const pW=Dg("modal-open");class Nye{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return Tye(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",o=this.getElement();e.style={overflow:o.style.overflow,[r]:o.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(Gl(o,r)||"0",10)+e.scrollBarWidth}px`),o.setAttribute(pW,""),Gl(o,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(pW),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const gM=Nye,gT=(t,e)=>Ng?t==null?(e||bx()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Dye(t,e){const n=PS(),[r,o]=D.useState(()=>gT(t,n==null?void 0:n.document));if(!r){const s=gT(t);s&&o(s)}return D.useEffect(()=>{e&&r&&e(r)},[e,r]),D.useEffect(()=>{const s=gT(t);s!==r&&o(s)},[t,r]),r}function vM({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:o}){const s=D.useRef(null),i=D.useRef(e),a=gr(n);D.useEffect(()=>{e?i.current=!0:a(s.current)},[e,a]);const u=zh(s,t.ref),l=D.cloneElement(t,{ref:u});return e?l:o||!i.current&&r?null:l}function Rye({in:t,onTransition:e}){const n=D.useRef(null),r=D.useRef(!0),o=gr(e);return rC(()=>{if(!n.current)return;let s=!1;return o({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,o]),rC(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function Oye({children:t,in:e,onExited:n,onEntered:r,transition:o}){const[s,i]=D.useState(!e);e&&s&&i(!1);const a=Rye({in:!!e,onTransition:l=>{const c=()=>{l.isStale()||(l.in?r==null||r(l.element,l.initial):(i(!0),n==null||n(l.element)))};Promise.resolve(o(l)).then(c,d=>{throw l.in||i(!0),d})}}),u=zh(a,t.ref);return s&&!e?null:D.cloneElement(t,{ref:u})}function mW(t,e,n){return t?w.jsx(t,Object.assign({},n)):e?w.jsx(Oye,Object.assign({},n,{transition:e})):w.jsx(vM,Object.assign({},n))}function Aye(t){return t.code==="Escape"||t.keyCode===27}const $ye=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Mye(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}let vT;function Pye(t){return vT||(vT=new gM({ownerDocument:t==null?void 0:t.document})),vT}function Fye(t){const e=PS(),n=t||Pye(e),r=D.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:D.useCallback(o=>{r.current.dialog=o},[]),setBackdropRef:D.useCallback(o=>{r.current.backdrop=o},[])})}const D7=D.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:o,style:s,children:i,backdrop:a=!0,keyboard:u=!0,onBackdropClick:l,onEscapeKeyDown:c,transition:d,runTransition:f,backdropTransition:h,runBackdropTransition:p,autoFocus:m=!0,enforceFocus:g=!0,restoreFocus:v=!0,restoreFocusOptions:y,renderDialog:x,renderBackdrop:b=Me=>w.jsx("div",Object.assign({},Me)),manager:C,container:S,onShow:E,onHide:I=()=>{},onExit:T,onExited:N,onExiting:O,onEnter:$,onEntering:A,onEntered:P}=t,L=Mye(t,$ye);const W=PS(),z=Dye(S),F=Fye(C),B=J$(),H=oY(n),[X,te]=D.useState(!n),re=D.useRef(null);D.useImperativeHandle(e,()=>F,[F]),Ng&&!H&&n&&(re.current=mT(W==null?void 0:W.document)),n&&X&&te(!1);const ue=gr(()=>{if(F.add(),Le.current=Jc(document,"keydown",Ce),_e.current=Jc(document,"focus",()=>setTimeout(ce),!0),E&&E(),m){var Me,Ke;const xt=mT((Me=(Ke=F.dialog)==null?void 0:Ke.ownerDocument)!=null?Me:W==null?void 0:W.document);F.dialog&&xt&&!sC(F.dialog,xt)&&(re.current=xt,F.dialog.focus())}}),Q=gr(()=>{if(F.remove(),Le.current==null||Le.current(),_e.current==null||_e.current(),v){var Me;(Me=re.current)==null||Me.focus==null||Me.focus(y),re.current=null}});D.useEffect(()=>{!n||!z||ue()},[n,z,ue]),D.useEffect(()=>{X&&Q()},[X,Q]),nM(()=>{Q()});const ce=gr(()=>{if(!g||!B()||!F.isTopModal())return;const Me=mT(W==null?void 0:W.document);F.dialog&&Me&&!sC(F.dialog,Me)&&F.dialog.focus()}),ke=gr(Me=>{Me.target===Me.currentTarget&&(l==null||l(Me),a===!0&&I())}),Ce=gr(Me=>{u&&Aye(Me)&&F.isTopModal()&&(c==null||c(Me),Me.defaultPrevented||I())}),_e=D.useRef(),Le=D.useRef(),Ie=(...Me)=>{te(!0),N==null||N(...Me)};if(!z)return null;const Pe=Object.assign({role:r,ref:F.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},L,{style:s,className:o,tabIndex:-1});let Ue=x?x(Pe):w.jsx("div",Object.assign({},Pe,{children:D.cloneElement(i,{role:"document"})}));Ue=mW(d,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:T,onExiting:O,onExited:Ie,onEnter:$,onEntering:A,onEntered:P,children:Ue});let lt=null;return a&&(lt=b({ref:F.setBackdropRef,onClick:ke}),lt=mW(h,p,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:lt})),w.jsx(w.Fragment,{children:jf.createPortal(w.jsxs(w.Fragment,{children:[lt,Ue]}),z)})});D7.displayName="Modal";const R7=Object.assign(D7,{Manager:gM});function Lye(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function Bye(t,e){t.classList?t.classList.add(e):Lye(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function gW(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function jye(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=gW(t.className,e):t.setAttribute("class",gW(t.className&&t.className.baseVal||"",e))}const bp={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class O7 extends gM{adjustAndStore(e,n,r){const o=n.style[e];n.dataset[e]=o,Gl(n,{[e]:`${parseFloat(Gl(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],Gl(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(Bye(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";Al(n,bp.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),Al(n,bp.STICKY_CONTENT).forEach(s=>this.adjustAndStore(o,s,-e.scrollBarWidth)),Al(n,bp.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(o,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();jye(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";Al(n,bp.FIXED_CONTENT).forEach(s=>this.restore(r,s)),Al(n,bp.STICKY_CONTENT).forEach(s=>this.restore(o,s)),Al(n,bp.NAVBAR_TOGGLER).forEach(s=>this.restore(o,s))}}let yT;function A7(t){return yT||(yT=new O7(t)),yT}const $7=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"modal-body"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));$7.displayName="ModalBody";const Wye=$7,zye=D.createContext({onHide(){}}),yM=zye,M7=D.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:o,fullscreen:s,children:i,scrollable:a,...u},l)=>{t=ct(t,"modal");const c=`${t}-dialog`,d=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return w.jsx("div",{...u,ref:l,className:Ae(c,e,o&&`${t}-${o}`,r&&`${c}-centered`,a&&`${c}-scrollable`,s&&d),children:w.jsx("div",{className:Ae(`${t}-content`,n),children:i})})});M7.displayName="ModalDialog";const P7=M7,F7=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"modal-footer"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));F7.displayName="ModalFooter";const Uye=F7,Vye=D.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:o,...s},i)=>{const a=D.useContext(yM),u=gr(()=>{a==null||a.onHide(),r==null||r()});return w.jsxs("div",{ref:i,...s,children:[o,n&&w.jsx(Xme,{"aria-label":t,variant:e,onClick:u})]})}),L7=Vye,B7=D.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...o},s)=>(t=ct(t,"modal-header"),w.jsx(L7,{ref:s,...o,className:Ae(e,t),closeLabel:n,closeButton:r})));B7.displayName="ModalHeader";const Hye=B7,Gye=AS("h4"),j7=D.forwardRef(({className:t,bsPrefix:e,as:n=Gye,...r},o)=>(e=ct(e,"modal-title"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));j7.displayName="ModalTitle";const Yye=j7;function qye(t){return w.jsx(wx,{...t,timeout:null})}function Kye(t){return w.jsx(wx,{...t,timeout:null})}const W7=D.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:o,children:s,dialogAs:i=P7,"data-bs-theme":a,"aria-labelledby":u,"aria-describedby":l,"aria-label":c,show:d=!1,animation:f=!0,backdrop:h=!0,keyboard:p=!0,onEscapeKeyDown:m,onShow:g,onHide:v,container:y,autoFocus:x=!0,enforceFocus:b=!0,restoreFocus:C=!0,restoreFocusOptions:S,onEntered:E,onExit:I,onExiting:T,onEnter:N,onEntering:O,onExited:$,backdropClassName:A,manager:P,...L},W)=>{const[z,F]=D.useState({}),[B,H]=D.useState(!1),X=D.useRef(!1),te=D.useRef(!1),re=D.useRef(null),[ue,Q]=rY(),ce=zh(W,Q),ke=gr(v),Ce=K$();t=ct(t,"modal");const _e=D.useMemo(()=>({onHide:ke}),[ke]);function Le(){return P||A7({isRTL:Ce})}function Ie(Be){if(!Ng)return;const It=Le().getScrollbarWidth()>0,At=Be.scrollHeight>bx(Be).documentElement.clientHeight;F({paddingRight:It&&!At?hW():void 0,paddingLeft:!It&&At?hW():void 0})}const Pe=gr(()=>{ue&&Ie(ue.dialog)});nM(()=>{iR(window,"resize",Pe),re.current==null||re.current()});const Ue=()=>{X.current=!0},lt=Be=>{X.current&&ue&&Be.target===ue.dialog&&(te.current=!0),X.current=!1},Me=()=>{H(!0),re.current=tY(ue.dialog,()=>{H(!1)})},Ke=Be=>{Be.target===Be.currentTarget&&Me()},xt=Be=>{if(h==="static"){Ke(Be);return}if(te.current||Be.target!==Be.currentTarget){te.current=!1;return}v==null||v()},_t=Be=>{p?m==null||m(Be):(Be.preventDefault(),h==="static"&&Me())},tn=(Be,It)=>{Be&&Ie(Be),N==null||N(Be,It)},Ot=Be=>{re.current==null||re.current(),I==null||I(Be)},jt=(Be,It)=>{O==null||O(Be,It),X$(window,"resize",Pe)},sn=Be=>{Be&&(Be.style.display=""),$==null||$(Be),iR(window,"resize",Pe)},An=D.useCallback(Be=>w.jsx("div",{...Be,className:Ae(`${t}-backdrop`,A,!f&&"show")}),[f,A,t]),Ne={...n,...z};Ne.display="block";const ze=Be=>w.jsx("div",{role:"dialog",...Be,style:Ne,className:Ae(e,t,B&&`${t}-static`,!f&&"show"),onClick:h?xt:void 0,onMouseUp:lt,"data-bs-theme":a,"aria-label":c,"aria-labelledby":u,"aria-describedby":l,children:w.jsx(i,{...L,onMouseDown:Ue,className:r,contentClassName:o,children:s})});return w.jsx(yM.Provider,{value:_e,children:w.jsx(R7,{show:d,ref:ce,backdrop:h,container:y,keyboard:!0,autoFocus:x,enforceFocus:b,restoreFocus:C,restoreFocusOptions:S,onEscapeKeyDown:_t,onShow:g,onHide:v,onEnter:tn,onEntering:jt,onEntered:E,onExit:Ot,onExiting:T,onExited:sn,manager:Le(),transition:f?qye:void 0,backdropTransition:f?Kye:void 0,renderBackdrop:An,renderDialog:ze})})});W7.displayName="Modal";const Zt=Object.assign(W7,{Body:Wye,Header:Hye,Title:Yye,Footer:Uye,Dialog:P7,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var vW={exports:{}},dR={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function o(i,a,u,l,c,d){var f=l||"<<anonymous>>",h=d||u;if(a[u]==null)return i?new Error("Required "+c+" `"+h+"` was not specified "+("in `"+f+"`.")):null;for(var p=arguments.length,m=Array(p>6?p-6:0),g=6;g<p;g++)m[g-6]=arguments[g];return r.apply(void 0,[a,u,f,c,h].concat(m))}var s=o.bind(null,!1);return s.isRequired=o.bind(null,!0),s}t.exports=e.default})(dR,dR.exports);var Xye=dR.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=Xye,r=o(n);function o(i){return i&&i.__esModule?i:{default:i}}function s(){for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];function l(){for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];var h=null;return a.forEach(function(p){if(h==null){var m=p.apply(void 0,d);m!=null&&(h=m)}}),h}return(0,r.default)(l)}t.exports=e.default})(vW,vW.exports);const z7=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"nav-item"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));z7.displayName="NavItem";const Qye=z7,U7=D.forwardRef(({bsPrefix:t,className:e,as:n=r0,active:r,eventKey:o,disabled:s=!1,...i},a)=>{t=ct(t,"nav-link");const[u,l]=I7({key:ph(o,i.href),active:r,disabled:s,...i});return w.jsx(n,{...i,...u,ref:a,disabled:s,className:Ae(e,t,s&&"disabled",l.isActive&&"active")})});U7.displayName="NavLink";const Jye=U7,V7=D.forwardRef((t,e)=>{const{as:n="div",bsPrefix:r,variant:o,fill:s=!1,justify:i=!1,navbar:a,navbarScroll:u,className:l,activeKey:c,...d}=NS(t,{activeKey:"onSelect"}),f=ct(r,"nav");let h,p,m=!1;const g=D.useContext(Uh),v=D.useContext(hY);return g?(h=g.bsPrefix,m=a??!0):v&&({cardHeaderBsPrefix:p}=v),w.jsx(Iye,{as:n,ref:e,activeKey:c,className:Ae(l,{[f]:!m,[`${h}-nav`]:m,[`${h}-nav-scroll`]:m&&u,[`${p}-${o}`]:!!p,[`${f}-${o}`]:!!o,[`${f}-fill`]:s,[`${f}-justified`]:i}),...d})});V7.displayName="Nav";const pn=Object.assign(V7,{Item:Qye,Link:Jye}),H7=D.forwardRef(({bsPrefix:t,className:e,as:n,...r},o)=>{t=ct(t,"navbar-brand");const s=n||(r.href?"a":"span");return w.jsx(s,{...r,ref:o,className:Ae(e,t)})});H7.displayName="NavbarBrand";const Zye=H7,G7=D.forwardRef(({children:t,bsPrefix:e,...n},r)=>{e=ct(e,"navbar-collapse");const o=D.useContext(Uh);return w.jsx(Lme,{in:!!(o&&o.expanded),...n,children:w.jsx("div",{ref:r,className:e,children:t})})});G7.displayName="NavbarCollapse";const e0e=G7,Y7=D.forwardRef(({bsPrefix:t,className:e,children:n,label:r="Toggle navigation",as:o="button",onClick:s,...i},a)=>{t=ct(t,"navbar-toggler");const{onToggle:u,expanded:l}=D.useContext(Uh)||{},c=gr(d=>{s&&s(d),u&&u()});return o==="button"&&(i.type="button"),w.jsx(o,{...i,ref:a,onClick:c,"aria-label":r,className:Ae(e,t,!l&&"collapsed"),children:n||w.jsx("span",{className:`${t}-icon`})})});Y7.displayName="NavbarToggle";const t0e=Y7,fR=new WeakMap,yW=(t,e)=>{if(!t||!e)return;const n=fR.get(e)||new Map;fR.set(e,n);let r=n.get(t);return r||(r=e.matchMedia(t),r.refCount=0,n.set(r.media,r)),r};function n0e(t,e=typeof window>"u"?void 0:window){const n=yW(t,e),[r,o]=D.useState(()=>n?n.matches:!1);return rC(()=>{let s=yW(t,e);if(!s)return o(!1);let i=fR.get(e);const a=()=>{o(s.matches)};return s.refCount++,s.addListener(a),a(),()=>{s.removeListener(a),s.refCount--,s.refCount<=0&&(i==null||i.delete(s.media)),s=void 0}},[t]),r}function r0e(t){const e=Object.keys(t);function n(a,u){return a===u?u:a?`${a} and ${u}`:u}function r(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function o(a){const u=r(a);let l=t[u];return typeof l=="number"?l=`${l-.2}px`:l=`calc(${l} - 0.2px)`,`(max-width: ${l})`}function s(a){let u=t[a];return typeof u=="number"&&(u=`${u}px`),`(min-width: ${u})`}function i(a,u,l){let c;typeof a=="object"?(c=a,l=u,u=!0):(u=u||!0,c={[a]:u});let d=D.useMemo(()=>Object.entries(c).reduce((f,[h,p])=>((p==="up"||p===!0)&&(f=n(f,s(h))),(p==="down"||p===!0)&&(f=n(f,o(h))),f),""),[JSON.stringify(c)]);return n0e(d,l)}return i}const o0e=r0e({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),q7=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"offcanvas-body"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));q7.displayName="OffcanvasBody";const s0e=q7,i0e={[Aa]:"show",[Pl]:"show"},K7=D.forwardRef(({bsPrefix:t,className:e,children:n,in:r=!1,mountOnEnter:o=!1,unmountOnExit:s=!1,appear:i=!1,...a},u)=>(t=ct(t,"offcanvas"),w.jsx(OS,{ref:u,addEndListener:RS,in:r,mountOnEnter:o,unmountOnExit:s,appear:i,...a,childRef:n.ref,children:(l,c)=>D.cloneElement(n,{...c,className:Ae(e,n.props.className,(l===Aa||l===n0)&&`${t}-toggling`,i0e[l])})})));K7.displayName="OffcanvasToggling";const a0e=K7,X7=D.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...o},s)=>(t=ct(t,"offcanvas-header"),w.jsx(L7,{ref:s,...o,className:Ae(e,t),closeLabel:n,closeButton:r})));X7.displayName="OffcanvasHeader";const u0e=X7,l0e=AS("h5"),Q7=D.forwardRef(({className:t,bsPrefix:e,as:n=l0e,...r},o)=>(e=ct(e,"offcanvas-title"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));Q7.displayName="OffcanvasTitle";const c0e=Q7;function d0e(t){return w.jsx(a0e,{...t})}function f0e(t){return w.jsx(wx,{...t})}const J7=D.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":r,placement:o="start",responsive:s,show:i=!1,backdrop:a=!0,keyboard:u=!0,scroll:l=!1,onEscapeKeyDown:c,onShow:d,onHide:f,container:h,autoFocus:p=!0,enforceFocus:m=!0,restoreFocus:g=!0,restoreFocusOptions:v,onEntered:y,onExit:x,onExiting:b,onEnter:C,onEntering:S,onExited:E,backdropClassName:I,manager:T,renderStaticNode:N=!1,...O},$)=>{const A=D.useRef();t=ct(t,"offcanvas");const{onToggle:P}=D.useContext(Uh)||{},[L,W]=D.useState(!1),z=o0e(s||"xs","up");D.useEffect(()=>{W(s?i&&!z:i)},[i,s,z]);const F=gr(()=>{P==null||P(),f==null||f()}),B=D.useMemo(()=>({onHide:F}),[F]);function H(){return T||(l?(A.current||(A.current=new O7({handleContainerOverflow:!1})),A.current):A7())}const X=(Q,...ce)=>{Q&&(Q.style.visibility="visible"),C==null||C(Q,...ce)},te=(Q,...ce)=>{Q&&(Q.style.visibility=""),E==null||E(...ce)},re=D.useCallback(Q=>w.jsx("div",{...Q,className:Ae(`${t}-backdrop`,I)}),[I,t]),ue=Q=>w.jsx("div",{...Q,...O,className:Ae(e,s?`${t}-${s}`:t,`${t}-${o}`),"aria-labelledby":r,children:n});return w.jsxs(w.Fragment,{children:[!L&&(s||N)&&ue({}),w.jsx(yM.Provider,{value:B,children:w.jsx(R7,{show:L,ref:$,backdrop:a,container:h,keyboard:u,autoFocus:p,enforceFocus:m&&!l,restoreFocus:g,restoreFocusOptions:v,onEscapeKeyDown:c,onShow:d,onHide:F,onEnter:X,onEntering:S,onEntered:y,onExit:x,onExiting:b,onExited:te,manager:H(),transition:d0e,backdropTransition:f0e,renderBackdrop:re,renderDialog:ue})})]})});J7.displayName="Offcanvas";const h0e=Object.assign(J7,{Body:s0e,Header:u0e,Title:c0e}),Z7=D.forwardRef((t,e)=>{const n=D.useContext(Uh);return w.jsx(h0e,{ref:e,show:!!(n!=null&&n.expanded),...t,renderStaticNode:!0})});Z7.displayName="NavbarOffcanvas";const p0e=Z7,eq=D.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},o)=>(e=ct(e,"navbar-text"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));eq.displayName="NavbarText";const m0e=eq,tq=D.forwardRef((t,e)=>{const{bsPrefix:n,expand:r=!0,variant:o="light",bg:s,fixed:i,sticky:a,className:u,as:l="nav",expanded:c,onToggle:d,onSelect:f,collapseOnSelect:h=!1,...p}=NS(t,{expanded:"onToggle"}),m=ct(n,"navbar"),g=D.useCallback((...x)=>{f==null||f(...x),h&&c&&(d==null||d(!1))},[f,h,c,d]);p.role===void 0&&l!=="nav"&&(p.role="navigation");let v=`${m}-expand`;typeof r=="string"&&(v=`${v}-${r}`);const y=D.useMemo(()=>({onToggle:()=>d==null?void 0:d(!c),bsPrefix:m,expanded:!!c,expand:r}),[m,c,r,d]);return w.jsx(Uh.Provider,{value:y,children:w.jsx(Ju.Provider,{value:g,children:w.jsx(l,{ref:e,...p,className:Ae(u,m,r&&v,o&&`${m}-${o}`,s&&`bg-${s}`,a&&`sticky-${a}`,i&&`fixed-${i}`)})})})});tq.displayName="Navbar";const xT=Object.assign(tq,{Brand:Zye,Collapse:e0e,Offcanvas:p0e,Text:m0e,Toggle:t0e}),xM=D.forwardRef(({active:t=!1,disabled:e=!1,className:n,style:r,activeLabel:o="(current)",children:s,linkStyle:i,linkClassName:a,as:u=r0,...l},c)=>{const d=t||e?"span":u;return w.jsx("li",{ref:c,style:r,className:Ae(n,"page-item",{active:t,disabled:e}),children:w.jsxs(d,{className:Ae("page-link",a),style:i,...l,children:[s,t&&o&&w.jsx("span",{className:"visually-hidden",children:o})]})})});xM.displayName="PageItem";const g0e=xM;function Ex(t,e,n=t){const r=D.forwardRef(({children:o,...s},i)=>w.jsxs(xM,{...s,ref:i,children:[w.jsx("span",{"aria-hidden":"true",children:o||e}),w.jsx("span",{className:"visually-hidden",children:n})]}));return r.displayName=t,r}const v0e=Ex("First","«"),y0e=Ex("Prev","‹","Previous"),x0e=Ex("Ellipsis","…","More"),b0e=Ex("Next","›"),w0e=Ex("Last","»"),nq=D.forwardRef(({bsPrefix:t,className:e,size:n,...r},o)=>{const s=ct(t,"pagination");return w.jsx("ul",{ref:o,...r,className:Ae(e,s,n&&`${s}-${n}`)})});nq.displayName="Pagination";const xW=Object.assign(nq,{First:v0e,Prev:y0e,Ellipsis:x0e,Item:g0e,Next:b0e,Last:w0e}),rq=D.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},o)=>{const s=ct(t,"row"),i=J8(),a=Z8(),u=`${s}-cols`,l=[];return i.forEach(c=>{const d=r[c];delete r[c];let f;d!=null&&typeof d=="object"?{cols:f}=d:f=d;const h=c!==a?`-${c}`:"";f!=null&&l.push(`${u}${h}-${f}`)}),w.jsx(n,{ref:o,...r,className:Ae(e,s,...l)})});rq.displayName="Row";const Vt=rq,oq=D.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:r,as:o="div",className:s,...i},a)=>{t=ct(t,"spinner");const u=`${t}-${n}`;return w.jsx(o,{ref:a,...i,className:Ae(s,u,r&&`${u}-${r}`,e&&`text-${e}`)})});oq.displayName="Spinner";const k0e=oq,C0e=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],S0e=["activeKey","getControlledId","getControllerId"],E0e=["as"];function hR(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function sq(t){let{active:e,eventKey:n,mountOnEnter:r,transition:o,unmountOnExit:s,role:i="tabpanel",onEnter:a,onEntering:u,onEntered:l,onExit:c,onExiting:d,onExited:f}=t,h=hR(t,C0e);const p=D.useContext(Rg);if(!p)return[Object.assign({},h,{role:i}),{eventKey:n,isActive:e,mountOnEnter:r,transition:o,unmountOnExit:s,onEnter:a,onEntering:u,onEntered:l,onExit:c,onExiting:d,onExited:f}];const{activeKey:m,getControlledId:g,getControllerId:v}=p,y=hR(p,S0e),x=ph(n);return[Object.assign({},h,{role:i,id:g(n),"aria-labelledby":v(n)}),{eventKey:n,isActive:e==null&&x!=null?ph(m)===x:e,transition:o||y.transition,mountOnEnter:r??y.mountOnEnter,unmountOnExit:s??y.unmountOnExit,onEnter:a,onEntering:u,onEntered:l,onExit:c,onExiting:d,onExited:f}]}const iq=D.forwardRef((t,e)=>{let{as:n="div"}=t,r=hR(t,E0e);const[o,{isActive:s,onEnter:i,onEntering:a,onEntered:u,onExit:l,onExiting:c,onExited:d,mountOnEnter:f,unmountOnExit:h,transition:p=vM}]=sq(r);return w.jsx(Rg.Provider,{value:null,children:w.jsx(Ju.Provider,{value:null,children:w.jsx(p,{in:s,onEnter:i,onEntering:a,onEntered:u,onExit:l,onExiting:c,onExited:d,mountOnEnter:f,unmountOnExit:h,children:w.jsx(n,Object.assign({},o,{ref:e,hidden:!s,"aria-hidden":!s}))})})})});iq.displayName="TabPanel";const aq=t=>{const{id:e,generateChildId:n,onSelect:r,activeKey:o,defaultActiveKey:s,transition:i,mountOnEnter:a,unmountOnExit:u,children:l}=t,[c,d]=TY(o,s,r),f=WY(e),h=D.useMemo(()=>n||((m,g)=>f?`${f}-${g}-${m}`:null),[f,n]),p=D.useMemo(()=>({onSelect:d,activeKey:c,transition:i,mountOnEnter:a||!1,unmountOnExit:u||!1,getControlledId:m=>h(m,"tabpane"),getControllerId:m=>h(m,"tab")}),[d,c,i,a,u,h]);return w.jsx(Rg.Provider,{value:p,children:w.jsx(Ju.Provider,{value:d||null,children:l})})};aq.Panel=iq;const _0e=aq;function uq(t){return typeof t=="boolean"?t?wx:vM:t}const lq=({transition:t,...e})=>w.jsx(_0e,{...e,transition:uq(t)});lq.displayName="TabContainer";const I0e=lq,cq=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},o)=>(e=ct(e,"tab-content"),w.jsx(n,{ref:o,className:Ae(t,e),...r})));cq.displayName="TabContent";const T0e=cq,dq=D.forwardRef(({bsPrefix:t,transition:e,...n},r)=>{const[{className:o,as:s="div",...i},{isActive:a,onEnter:u,onEntering:l,onEntered:c,onExit:d,onExiting:f,onExited:h,mountOnEnter:p,unmountOnExit:m,transition:g=wx}]=sq({...n,transition:uq(e)}),v=ct(t,"tab-pane");return w.jsx(Rg.Provider,{value:null,children:w.jsx(Ju.Provider,{value:null,children:w.jsx(g,{in:a,onEnter:u,onEntering:l,onEntered:c,onExit:d,onExiting:f,onExited:h,mountOnEnter:p,unmountOnExit:m,children:w.jsx(s,{...i,ref:r,className:Ae(o,v,a&&"active")})})})})});dq.displayName="TabPane";const N0e=dq,D0e={eventKey:ye.oneOfType([ye.string,ye.number]),title:ye.node.isRequired,disabled:ye.bool,tabClassName:ye.string,tabAttrs:ye.object},fq=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};fq.propTypes=D0e;const $a=Object.assign(fq,{Container:I0e,Content:T0e,Pane:N0e}),R0e=D.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:r,borderless:o,hover:s,size:i,variant:a,responsive:u,...l},c)=>{const d=ct(t,"table"),f=Ae(e,d,a&&`${d}-${a}`,i&&`${d}-${i}`,n&&`${d}-${typeof n=="string"?`striped-${n}`:"striped"}`,r&&`${d}-bordered`,o&&`${d}-borderless`,s&&`${d}-hover`),h=w.jsx("table",{...l,className:f,ref:c});if(u){let p=`${d}-responsive`;return typeof u=="string"&&(p=`${p}-${u}`),w.jsx("div",{className:p,children:h})}return h}),Vh=R0e;var hq={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},bW=ee.createContext&&ee.createContext(hq),O0e=["attr","size","title"];function A0e(t,e){if(t==null)return{};var n=$0e(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $0e(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function uC(){return uC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uC.apply(this,arguments)}function wW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function lC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wW(Object(n),!0).forEach(function(r){M0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M0e(t,e,n){return e=P0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P0e(t){var e=F0e(t,"string");return typeof e=="symbol"?e:String(e)}function F0e(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pq(t){return t&&t.map((e,n)=>ee.createElement(e.tag,lC({key:n},e.attr),pq(e.child)))}function ga(t){return e=>ee.createElement(L0e,uC({attr:lC({},t.attr)},e),pq(t.child))}function L0e(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=A0e(t,O0e),a=o||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),ee.createElement("svg",uC({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:u,style:lC(lC({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ee.createElement("title",null,s),t.children)};return bW!==void 0?ee.createElement(bW.Consumer,null,n=>e(n)):e(hq)}function bT(t){return ga({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34l-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z"},child:[]}]})(t)}function kW(t){return ga({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function B0e(t){return ga({tag:"svg",attr:{viewBox:"0 0 256 512"},child:[{tag:"path",attr:{d:"M128 0c35.346 0 64 28.654 64 64s-28.654 64-64 64c-35.346 0-64-28.654-64-64S92.654 0 128 0m119.283 354.179l-48-192A24 24 0 0 0 176 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H80a24 24 0 0 0-23.283 18.179l-48 192C4.935 369.305 16.383 384 32 384h56v104c0 13.255 10.745 24 24 24h32c13.255 0 24-10.745 24-24V384h56c15.591 0 27.071-14.671 23.283-29.821z"},child:[]}]})(t)}function j0e(t){return ga({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504.971 199.362l-22.627-22.627c-9.373-9.373-24.569-9.373-33.941 0l-5.657 5.657L329.608 69.255l5.657-5.657c9.373-9.373 9.373-24.569 0-33.941L312.638 7.029c-9.373-9.373-24.569-9.373-33.941 0L154.246 131.48c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l5.657-5.657 39.598 39.598-81.04 81.04-5.657-5.657c-12.497-12.497-32.758-12.497-45.255 0L9.373 412.118c-12.497 12.497-12.497 32.758 0 45.255l45.255 45.255c12.497 12.497 32.758 12.497 45.255 0l114.745-114.745c12.497-12.497 12.497-32.758 0-45.255l-5.657-5.657 81.04-81.04 39.598 39.598-5.657 5.657c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l124.451-124.451c9.372-9.372 9.372-24.568 0-33.941z"},child:[]}]})(t)}function mq(t){return ga({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function W0e(t){return ga({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M96 0c35.346 0 64 28.654 64 64s-28.654 64-64 64-64-28.654-64-64S60.654 0 96 0m48 144h-11.36c-22.711 10.443-49.59 10.894-73.28 0H48c-26.51 0-48 21.49-48 48v136c0 13.255 10.745 24 24 24h16v136c0 13.255 10.745 24 24 24h64c13.255 0 24-10.745 24-24V352h16c13.255 0 24-10.745 24-24V192c0-26.51-21.49-48-48-48z"},child:[]}]})(t)}function z0e(t){return ga({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function CW(t){return ga({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function U0e(t){return ga({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function V0e(t){const[e,n]=ee.useState(new Date),r=o=>{const s={weekday:"long",year:"numeric",month:"long",day:"numeric"};return o.toLocaleDateString("en-US",s)};return ee.useEffect(()=>{const o=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(o)},[]),w.jsxs("div",{children:[w.jsx("strong",{children:e.toLocaleTimeString()}),w.jsx("br",{}),r(e)]})}function gq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=gq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Zc(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=gq(t))&&(r&&(r+=" "),r+=e);return r}const i0=t=>typeof t=="number"&&!isNaN(t),eh=t=>typeof t=="string",vi=t=>typeof t=="function",lk=t=>eh(t)||vi(t)?t:null,pR=t=>D.isValidElement(t)||eh(t)||vi(t)||i0(t);function H0e(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:o}=t;requestAnimationFrame(()=>{o.minHeight="initial",o.height=r+"px",o.transition=`all ${n}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,n)})})}function LS(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:o=!0,collapseDuration:s=300}=t;return function(i){let{children:a,position:u,preventExitTransition:l,done:c,nodeRef:d,isIn:f,playToast:h}=i;const p=r?`${e}--${u}`:e,m=r?`${n}--${u}`:n,g=D.useRef(0);return D.useLayoutEffect(()=>{const v=d.current,y=p.split(" "),x=b=>{b.target===d.current&&(h(),v.removeEventListener("animationend",x),v.removeEventListener("animationcancel",x),g.current===0&&b.type!=="animationcancel"&&v.classList.remove(...y))};v.classList.add(...y),v.addEventListener("animationend",x),v.addEventListener("animationcancel",x)},[]),D.useEffect(()=>{const v=d.current,y=()=>{v.removeEventListener("animationend",y),o?H0e(v,c,s):c()};f||(l?y():(g.current=1,v.className+=` ${m}`,v.addEventListener("animationend",y)))},[f]),ee.createElement(ee.Fragment,null,a)}}function SW(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Ds=new Map;let a0=[];const mR=new Set,G0e=t=>mR.forEach(e=>e(t)),vq=()=>Ds.size>0;function yq(t,e){var n;if(e)return!((n=Ds.get(e))==null||!n.isToastActive(t));let r=!1;return Ds.forEach(o=>{o.isToastActive(t)&&(r=!0)}),r}function xq(t,e){pR(t)&&(vq()||a0.push({content:t,options:e}),Ds.forEach(n=>{n.buildToast(t,e)}))}function EW(t,e){Ds.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function Y0e(t){const{subscribe:e,getSnapshot:n,setProps:r}=D.useRef(function(s){const i=s.containerId||1;return{subscribe(a){const u=function(c,d,f){let h=1,p=0,m=[],g=[],v=[],y=d;const x=new Map,b=new Set,C=()=>{v=Array.from(x.values()),b.forEach(I=>I())},S=I=>{g=I==null?[]:g.filter(T=>T!==I),C()},E=I=>{const{toastId:T,onOpen:N,updateId:O,children:$}=I.props,A=O==null;I.staleId&&x.delete(I.staleId),x.set(T,I),g=[...g,I.props.toastId].filter(P=>P!==I.staleId),C(),f(SW(I,A?"added":"updated")),A&&vi(N)&&N(D.isValidElement($)&&$.props)};return{id:c,props:y,observe:I=>(b.add(I),()=>b.delete(I)),toggle:(I,T)=>{x.forEach(N=>{T!=null&&T!==N.props.toastId||vi(N.toggle)&&N.toggle(I)})},removeToast:S,toasts:x,clearQueue:()=>{p-=m.length,m=[]},buildToast:(I,T)=>{if((te=>{let{containerId:re,toastId:ue,updateId:Q}=te;const ce=re?re!==c:c!==1,ke=x.has(ue)&&Q==null;return ce||ke})(T))return;const{toastId:N,updateId:O,data:$,staleId:A,delay:P}=T,L=()=>{S(N)},W=O==null;W&&p++;const z={...y,style:y.toastStyle,key:h++,...Object.fromEntries(Object.entries(T).filter(te=>{let[re,ue]=te;return ue!=null})),toastId:N,updateId:O,data:$,closeToast:L,isIn:!1,className:lk(T.className||y.toastClassName),bodyClassName:lk(T.bodyClassName||y.bodyClassName),progressClassName:lk(T.progressClassName||y.progressClassName),autoClose:!T.isLoading&&(F=T.autoClose,B=y.autoClose,F===!1||i0(F)&&F>0?F:B),deleteToast(){const te=x.get(N),{onClose:re,children:ue}=te.props;vi(re)&&re(D.isValidElement(ue)&&ue.props),f(SW(te,"removed")),x.delete(N),p--,p<0&&(p=0),m.length>0?E(m.shift()):C()}};var F,B;z.closeButton=y.closeButton,T.closeButton===!1||pR(T.closeButton)?z.closeButton=T.closeButton:T.closeButton===!0&&(z.closeButton=!pR(y.closeButton)||y.closeButton);let H=I;D.isValidElement(I)&&!eh(I.type)?H=D.cloneElement(I,{closeToast:L,toastProps:z,data:$}):vi(I)&&(H=I({closeToast:L,toastProps:z,data:$}));const X={content:H,props:z,staleId:A};y.limit&&y.limit>0&&p>y.limit&&W?m.push(X):i0(P)?setTimeout(()=>{E(X)},P):E(X)},setProps(I){y=I},setToggle:(I,T)=>{x.get(I).toggle=T},isToastActive:I=>g.some(T=>T===I),getSnapshot:()=>y.newestOnTop?v.reverse():v}}(i,s,G0e);Ds.set(i,u);const l=u.observe(a);return a0.forEach(c=>xq(c.content,c.options)),a0=[],()=>{l(),Ds.delete(i)}},setProps(a){var u;(u=Ds.get(i))==null||u.setProps(a)},getSnapshot(){var a;return(a=Ds.get(i))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const o=D.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!o)return[];const i=new Map;return o.forEach(a=>{const{position:u}=a.props;i.has(u)||i.set(u,[]),i.get(u).push(a)}),Array.from(i,a=>s(a[0],a[1]))},isToastActive:yq,count:o==null?void 0:o.length}}function q0e(t){const[e,n]=D.useState(!1),[r,o]=D.useState(!1),s=D.useRef(null),i=D.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:u,closeToast:l,onClick:c,closeOnClick:d}=t;var f,h;function p(){n(!0)}function m(){n(!1)}function g(x){const b=s.current;i.canDrag&&b&&(i.didMove=!0,e&&m(),i.delta=t.draggableDirection==="x"?x.clientX-i.start:x.clientY-i.start,i.start!==x.clientX&&(i.canCloseOnClick=!1),b.style.transform=`translate3d(${t.draggableDirection==="x"?`${i.delta}px, var(--y)`:`0, calc(${i.delta}px + var(--y))`},0)`,b.style.opacity=""+(1-Math.abs(i.delta/i.removalDistance)))}function v(){document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",v);const x=s.current;if(i.canDrag&&i.didMove&&x){if(i.canDrag=!1,Math.abs(i.delta)>i.removalDistance)return o(!0),t.closeToast(),void t.collapseAll();x.style.transition="transform 0.2s, opacity 0.2s",x.style.removeProperty("transform"),x.style.removeProperty("opacity")}}(h=Ds.get((f={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||h.setToggle(f.id,f.fn),D.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",p),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",m)}},[t.pauseOnFocusLoss]);const y={onPointerDown:function(x){if(t.draggable===!0||t.draggable===x.pointerType){i.didMove=!1,document.addEventListener("pointermove",g),document.addEventListener("pointerup",v);const b=s.current;i.canCloseOnClick=!0,i.canDrag=!0,b.style.transition="none",t.draggableDirection==="x"?(i.start=x.clientX,i.removalDistance=b.offsetWidth*(t.draggablePercent/100)):(i.start=x.clientY,i.removalDistance=b.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(x){const{top:b,bottom:C,left:S,right:E}=s.current.getBoundingClientRect();x.nativeEvent.type!=="touchend"&&t.pauseOnHover&&x.clientX>=S&&x.clientX<=E&&x.clientY>=b&&x.clientY<=C?m():p()}};return a&&u&&(y.onMouseEnter=m,t.stacked||(y.onMouseLeave=p)),d&&(y.onClick=x=>{c&&c(x),i.canCloseOnClick&&l()}),{playToast:p,pauseToast:m,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:y}}function K0e(t){let{delay:e,isRunning:n,closeToast:r,type:o="default",hide:s,className:i,style:a,controlledProgress:u,progress:l,rtl:c,isIn:d,theme:f}=t;const h=s||u&&l===0,p={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};u&&(p.transform=`scaleX(${l})`);const m=Zc("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":c}),g=vi(i)?i({rtl:c,type:o,defaultClassName:m}):Zc(m,i),v={[u&&l>=1?"onTransitionEnd":"onAnimationEnd"]:u&&l<1?null:()=>{d&&r()}};return ee.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},ee.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${o}`}),ee.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:g,style:p,...v}))}let X0e=1;const bq=()=>""+X0e++;function Q0e(t){return t&&(eh(t.toastId)||i0(t.toastId))?t.toastId:bq()}function ky(t,e){return xq(t,e),e.toastId}function cC(t,e){return{...e,type:e&&e.type||t,toastId:Q0e(e)}}function Xb(t){return(e,n)=>ky(e,cC(t,n))}function Rt(t,e){return ky(t,cC("default",e))}Rt.loading=(t,e)=>ky(t,cC("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Rt.promise=function(t,e,n){let r,{pending:o,error:s,success:i}=e;o&&(r=eh(o)?Rt.loading(o,n):Rt.loading(o.render,{...n,...o}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(c,d,f)=>{if(d==null)return void Rt.dismiss(r);const h={type:c,...a,...n,data:f},p=eh(d)?{render:d}:d;return r?Rt.update(r,{...h,...p}):Rt(p.render,{...h,...p}),f},l=vi(t)?t():t;return l.then(c=>u("success",i,c)).catch(c=>u("error",s,c)),l},Rt.success=Xb("success"),Rt.info=Xb("info"),Rt.error=Xb("error"),Rt.warning=Xb("warning"),Rt.warn=Rt.warning,Rt.dark=(t,e)=>ky(t,cC("default",{theme:"dark",...e})),Rt.dismiss=function(t){(function(e){var n;if(vq()){if(e==null||eh(n=e)||i0(n))Ds.forEach(o=>{o.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){var r;(r=Ds.get(e.containerId))!=null&&r.removeToast(e.id)||Ds.forEach(o=>{o.removeToast(e.id)})}}else a0=a0.filter(o=>e!=null&&o.options.toastId!==e)})(t)},Rt.clearWaitingQueue=function(t){t===void 0&&(t={}),Ds.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},Rt.isActive=yq,Rt.update=function(t,e){e===void 0&&(e={});const n=((r,o)=>{var s;let{containerId:i}=o;return(s=Ds.get(i||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:o}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:bq()};s.toastId!==t&&(s.staleId=t);const i=s.render||o;delete s.render,ky(i,s)}},Rt.done=t=>{Rt.update(t,{progress:1})},Rt.onChange=function(t){return mR.add(t),()=>{mR.delete(t)}},Rt.play=t=>EW(!0,t),Rt.pause=t=>EW(!1,t);const J0e=typeof window<"u"?D.useLayoutEffect:D.useEffect,Qb=t=>{let{theme:e,type:n,isLoading:r,...o}=t;return ee.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...o})},wT={info:function(t){return ee.createElement(Qb,{...t},ee.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ee.createElement(Qb,{...t},ee.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ee.createElement(Qb,{...t},ee.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ee.createElement(Qb,{...t},ee.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ee.createElement("div",{className:"Toastify__spinner"})}},Z0e=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:o,playToast:s}=q0e(t),{closeButton:i,children:a,autoClose:u,onClick:l,type:c,hideProgressBar:d,closeToast:f,transition:h,position:p,className:m,style:g,bodyClassName:v,bodyStyle:y,progressClassName:x,progressStyle:b,updateId:C,role:S,progress:E,rtl:I,toastId:T,deleteToast:N,isIn:O,isLoading:$,closeOnClick:A,theme:P}=t,L=Zc("Toastify__toast",`Toastify__toast-theme--${P}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":I},{"Toastify__toast--close-on-click":A}),W=vi(m)?m({rtl:I,position:p,type:c,defaultClassName:L}):Zc(L,m),z=function(X){let{theme:te,type:re,isLoading:ue,icon:Q}=X,ce=null;const ke={theme:te,type:re};return Q===!1||(vi(Q)?ce=Q({...ke,isLoading:ue}):D.isValidElement(Q)?ce=D.cloneElement(Q,ke):ue?ce=wT.spinner():(Ce=>Ce in wT)(re)&&(ce=wT[re](ke))),ce}(t),F=!!E||!u,B={closeToast:f,type:c,theme:P};let H=null;return i===!1||(H=vi(i)?i(B):D.isValidElement(i)?D.cloneElement(i,B):function(X){let{closeToast:te,theme:re,ariaLabel:ue="close"}=X;return ee.createElement("button",{className:`Toastify__close-button Toastify__close-button--${re}`,type:"button",onClick:Q=>{Q.stopPropagation(),te(Q)},"aria-label":ue},ee.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ee.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(B)),ee.createElement(h,{isIn:O,done:N,position:p,preventExitTransition:n,nodeRef:r,playToast:s},ee.createElement("div",{id:T,onClick:l,"data-in":O,className:W,...o,style:g,ref:r},ee.createElement("div",{...O&&{role:S},className:vi(v)?v({type:c}):Zc("Toastify__toast-body",v),style:y},z!=null&&ee.createElement("div",{className:Zc("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!$})},z),ee.createElement("div",null,a)),H,ee.createElement(K0e,{...C&&!F?{key:`pb-${C}`}:{},rtl:I,theme:P,delay:u,isRunning:e,isIn:O,closeToast:f,hide:d,type:c,style:b,className:x,controlledProgress:F,progress:E||0})))},BS=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},exe=LS(BS("bounce",!0));LS(BS("slide",!0));LS(BS("zoom"));LS(BS("flip"));const txe={position:"top-right",transition:exe,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function nxe(t){let e={...txe,...t};const n=t.stacked,[r,o]=D.useState(!0),s=D.useRef(null),{getToastToRender:i,isToastActive:a,count:u}=Y0e(e),{className:l,style:c,rtl:d,containerId:f}=e;function h(m){const g=Zc("Toastify__toast-container",`Toastify__toast-container--${m}`,{"Toastify__toast-container--rtl":d});return vi(l)?l({position:m,rtl:d,defaultClassName:g}):Zc(g,lk(l))}function p(){n&&(o(!0),Rt.play())}return J0e(()=>{if(n){var m;const g=s.current.querySelectorAll('[data-in="true"]'),v=12,y=(m=e.position)==null?void 0:m.includes("top");let x=0,b=0;Array.from(g).reverse().forEach((C,S)=>{const E=C;E.classList.add("Toastify__toast--stacked"),S>0&&(E.dataset.collapsed=`${r}`),E.dataset.pos||(E.dataset.pos=y?"top":"bot");const I=x*(r?.2:1)+(r?0:v*S);E.style.setProperty("--y",`${y?I:-1*I}px`),E.style.setProperty("--g",`${v}`),E.style.setProperty("--s",""+(1-(r?b:0))),x+=E.offsetHeight,b+=.025})}},[r,u,n]),ee.createElement("div",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{n&&(o(!1),Rt.pause())},onMouseLeave:p},i((m,g)=>{const v=g.length?{...c}:{...c,pointerEvents:"none"};return ee.createElement("div",{className:h(m),style:v,key:`container-${m}`},g.map(y=>{let{content:x,props:b}=y;return ee.createElement(Z0e,{...b,stacked:n,collapseAll:p,isIn:a(b.toastId,b.containerId),style:b.style,key:`toast-${b.key}`},x)}))}))}const ui=()=>{var m;const[t,e]=ee.useState(!1),[n,r]=D.useState(!1),[o,s]=D.useState(""),i=Tt(g=>g.USER.currentUser);console.log("user",i);const a=xr(),u=()=>{e(!t)},l=()=>{r(!n)},[c,d]=D.useState(!1),f=()=>d(!c),h=g=>{g.key==="Enter"&&(console.log("Searching for:",o),r(!1),a(`/auction?search=${o}`))},p=g=>{g.preventDefault(),localStorage.removeItem("ACCESS_TOKEN"),a("/login")};return w.jsxs("div",{style:{position:"relative"},children:[w.jsx(nxe,{position:"top-right",autoClose:2e3}),w.jsx("header",{style:{padding:"20px",zIndex:1},children:w.jsx(Fs,{fluid:!0,children:w.jsxs(Vt,{children:[w.jsx(rt,{md:3,children:w.jsx(Oa,{to:"/",style:{textDecoration:"none",color:"black"},children:w.jsx("h1",{className:"logo",style:{cursor:"pointer"},children:"Auction Orchid"})})}),w.jsx(rt,{md:6,children:w.jsxs(xT,{bg:"#ffff",style:{fontWeight:"500"},expand:"md",children:[w.jsx(xT.Toggle,{"aria-controls":"navbarNav"}),w.jsx(xT.Collapse,{id:"navbarNav",children:w.jsx(pn,{className:"mr-auto",children:((m=i==null?void 0:i.role_id)==null?void 0:m.title)==="HOST"?w.jsxs("div",{className:"dropdown",onMouseEnter:u,onMouseLeave:u,children:[w.jsx(pn.Link,{href:"#",className:"products-link",style:{color:t?"#3A43A7":"black",width:"160px"},children:"Products"}),t&&w.jsxs("div",{className:"dropdown-content",children:[w.jsx(Oa,{to:"/manage-auction",children:"Auction"}),w.jsx(Oa,{to:"/manage-product",children:"Product"})]})]}):w.jsxs(w.Fragment,{children:[w.jsx(pn.Link,{className:"md-6",style:{marginRight:"10px"},children:w.jsx(Oa,{to:"/notyetauction-customer",style:{textDecoration:"none",color:"black"},children:"Danh sách công bố"})}),w.jsx(pn.Link,{className:"md-6",style:{marginRight:"10px"},children:w.jsx(Oa,{to:"/abouttoauction-customer",style:{textDecoration:"none",color:"black"},children:"Danh sách sắp đấu giá"})}),w.jsx(pn.Link,{className:"md-6",style:{marginRight:"10px"},children:w.jsx(Oa,{to:"/room-auction",style:{textDecoration:"none",color:"black"},children:"Phòng đấu giá"})})]})})})]})}),w.jsx(rt,{md:2,className:"d-flex justify-content-end align-items-center",children:w.jsx(V0e,{})}),w.jsx(rt,{md:1,className:"d-flex justify-content-center align-items-center",children:i?w.jsxs(Iv,{show:c,onToggle:()=>d(!c),align:{lg:"end"},className:"d-flex justify-content-end align-items-center",children:[w.jsx(l7,{onClick:f,src:i.image,alt:"User",style:{width:"50%",height:"auto",cursor:"pointer"},roundedCircle:!0}),w.jsxs(Iv.Menu,{children:[w.jsxs(Iv.Item,{href:"/profile",eventKey:"1",className:"d-flex justify-content-left align-items-center",children:[w.jsx(U0e,{style:{marginRight:"5px"}}),"Profile"]}),w.jsx(Iv.Divider,{}),w.jsxs(Iv.Item,{href:"#",className:"d-flex justify-content-left align-items-center",onClick:g=>{p(g)},children:[w.jsx(mq,{style:{marginRight:"5px"}})," Log Out"]})]})]}):w.jsx(w.Fragment,{children:w.jsx("a",{href:"/login",children:w.jsx("button",{className:"login-button-red",style:{fontWeight:"500"},children:"Login"})})})})]})})}),n&&w.jsx("div",{className:`search-popup ${n?"active":""}`,children:w.jsxs("div",{className:"search-popup-content",style:{display:"flex"},children:[w.jsx("input",{type:"text",placeholder:"Search...",onChange:g=>s(g.target.value),onKeyPress:h}),w.jsx("button",{onClick:l,children:"X"})]})})]})};function rxe(t){var n;const e=Tt(r=>r.USER.currentUser);return console.log("user",e),w.jsx(Fs,{fluid:!0,style:{backgroundColor:"#B41712",borderTopLeftRadius:"10px",borderTopRightRadius:"10px",overflow:"hidden",padding:"20px"},children:w.jsxs(Vt,{children:[w.jsx(rt,{xs:2,md:1,lg:1,children:w.jsx(l7,{src:"../../../public/assets/images/logos/logo_1.jpg",alt:"Orchid",style:{width:"100%",height:"auto"},rounded:!0})}),w.jsxs(rt,{xs:10,md:11,lg:11,children:[w.jsx("h1",{style:{color:"#fff",textAlign:"center"},children:"Welcome to Orchid Auction!"}),w.jsx("p",{style:{color:"#fff"},children:"As one of the auction houses in Vietnam, Orchid Auction is the unit pioneering the application of information technology in auction activities. Orchid Auction is the official online auction organizer in Vietnam, on February 15, 2024."})]}),((n=e==null?void 0:e.role_id)==null?void 0:n.title)==="HOST"?"":w.jsx("div",{style:{textAlign:"left"},children:w.jsx(Oa,{to:"/room-auction",children:w.jsx(vt,{variant:"danger",children:"Join the Auction"})})})]})})}const _W=["We are proud to be one of the largest auction houses in Vietnam","Online Bids has always been a pioneer in applying information technology to auction activities.","With the operating motto: “Bringing outstanding economic efficiency”","We hope to satisfy you and look forward to accompanying you in the development process."];function oxe(){const[t,e]=D.useState(0);return D.useEffect(()=>{const n=setTimeout(()=>{t<_W.length-1?e(t+1):e(0)},3e3);return()=>clearTimeout(n)},[t]),w.jsx("div",{style:{backgroundColor:"#0F1A2A",height:"60px",overflow:"hidden",marginBottom:"20px",borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px",color:"white"},children:w.jsx("h5",{style:{textAlign:"center",paddingTop:"15px"},children:_W[t]})})}var wq={},kq={},jS={},Cq={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=e})(Cq);var sxe="Expected a function",IW=NaN,ixe="[object Symbol]",axe=/^\s+|\s+$/g,uxe=/^[-+]0x[0-9a-f]+$/i,lxe=/^0b[01]+$/i,cxe=/^0o[0-7]+$/i,dxe=parseInt,fxe=typeof mi=="object"&&mi&&mi.Object===Object&&mi,hxe=typeof self=="object"&&self&&self.Object===Object&&self,pxe=fxe||hxe||Function("return this")(),mxe=Object.prototype,gxe=mxe.toString,vxe=Math.max,yxe=Math.min,kT=function(){return pxe.Date.now()};function xxe(t,e,n){var r,o,s,i,a,u,l=0,c=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(sxe);e=TW(e)||0,gR(n)&&(c=!!n.leading,d="maxWait"in n,s=d?vxe(TW(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function h(S){var E=r,I=o;return r=o=void 0,l=S,i=t.apply(I,E),i}function p(S){return l=S,a=setTimeout(v,e),c?h(S):i}function m(S){var E=S-u,I=S-l,T=e-E;return d?yxe(T,s-I):T}function g(S){var E=S-u,I=S-l;return u===void 0||E>=e||E<0||d&&I>=s}function v(){var S=kT();if(g(S))return y(S);a=setTimeout(v,m(S))}function y(S){return a=void 0,f&&r?h(S):(r=o=void 0,i)}function x(){a!==void 0&&clearTimeout(a),l=0,r=u=o=a=void 0}function b(){return a===void 0?i:y(kT())}function C(){var S=kT(),E=g(S);if(r=arguments,o=this,u=S,E){if(a===void 0)return p(u);if(d)return a=setTimeout(v,e),h(u)}return a===void 0&&(a=setTimeout(v,e)),i}return C.cancel=x,C.flush=b,C}function gR(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function bxe(t){return!!t&&typeof t=="object"}function wxe(t){return typeof t=="symbol"||bxe(t)&&gxe.call(t)==ixe}function TW(t){if(typeof t=="number")return t;if(wxe(t))return IW;if(gR(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=gR(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(axe,"");var n=lxe.test(t);return n||cxe.test(t)?dxe(t.slice(2),n?2:8):uxe.test(t)?IW:+t}var kxe=xxe,Ve={},bM={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(D);function n(o){return o&&o.__esModule?o:{default:o}}var r={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(s){return e.default.createElement("ul",{style:{display:"block"}},s)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(s){return e.default.createElement("button",null,s+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null};t.default=r})(bM);Object.defineProperty(Ve,"__esModule",{value:!0});Ve.checkSpecKeys=Ve.checkNavigable=Ve.changeSlide=Ve.canUseDOM=Ve.canGoNext=void 0;Ve.clamp=Eq;Ve.extractObject=void 0;Ve.filterSettings=Fxe;Ve.validSettings=Ve.swipeStart=Ve.swipeMove=Ve.swipeEnd=Ve.slidesOnRight=Ve.slidesOnLeft=Ve.slideHandler=Ve.siblingDirection=Ve.safePreventDefault=Ve.lazyStartIndex=Ve.lazySlidesOnRight=Ve.lazySlidesOnLeft=Ve.lazyEndIndex=Ve.keyHandler=Ve.initializedState=Ve.getWidth=Ve.getTrackLeft=Ve.getTrackCSS=Ve.getTrackAnimateCSS=Ve.getTotalSlides=Ve.getSwipeDirection=Ve.getSlideCount=Ve.getRequiredLazySlides=Ve.getPreClones=Ve.getPostClones=Ve.getOnDemandLazySlides=Ve.getNavigableIndexes=Ve.getHeight=void 0;var Cxe=Sq(D),Sxe=Sq(bM);function Sq(t){return t&&t.__esModule?t:{default:t}}function u0(t){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0(t)}function NW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NW(Object(n),!0).forEach(function(r){Exe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Exe(t,e,n){return e=_xe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _xe(t){var e=Ixe(t,"string");return u0(e)=="symbol"?e:String(e)}function Ixe(t,e){if(u0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(u0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eq(t,e,n){return Math.max(e,Math.min(t,n))}var fm=Ve.safePreventDefault=function(e){var n=["onTouchStart","onTouchMove","onWheel"];n.includes(e._reactName)||e.preventDefault()},_q=Ve.getOnDemandLazySlides=function(e){for(var n=[],r=Iq(e),o=Tq(e),s=r;s<o;s++)e.lazyLoadedList.indexOf(s)<0&&n.push(s);return n};Ve.getRequiredLazySlides=function(e){for(var n=[],r=Iq(e),o=Tq(e),s=r;s<o;s++)n.push(s);return n};var Iq=Ve.lazyStartIndex=function(e){return e.currentSlide-Txe(e)},Tq=Ve.lazyEndIndex=function(e){return e.currentSlide+Nxe(e)},Txe=Ve.lazySlidesOnLeft=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0},Nxe=Ve.lazySlidesOnRight=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow},vR=Ve.getWidth=function(e){return e&&e.offsetWidth||0},Nq=Ve.getHeight=function(e){return e&&e.offsetHeight||0},Dq=Ve.getSwipeDirection=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r,o,s,i;return r=e.startX-e.curX,o=e.startY-e.curY,s=Math.atan2(o,r),i=Math.round(s*180/Math.PI),i<0&&(i=360-Math.abs(i)),i<=45&&i>=0||i<=360&&i>=315?"left":i>=135&&i<=225?"right":n===!0?i>=35&&i<=135?"up":"down":"vertical"},Rq=Ve.canGoNext=function(e){var n=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(n=!1),n};Ve.extractObject=function(e,n){var r={};return n.forEach(function(o){return r[o]=e[o]}),r};Ve.initializedState=function(e){var n=Cxe.default.Children.count(e.children),r=e.listRef,o=Math.ceil(vR(r)),s=e.trackRef&&e.trackRef.node,i=Math.ceil(vR(s)),a;if(e.vertical)a=o;else{var u=e.centerMode&&parseInt(e.centerPadding)*2;typeof e.centerPadding=="string"&&e.centerPadding.slice(-1)==="%"&&(u*=o/100),a=Math.ceil((o-u)/e.slidesToShow)}var l=r&&Nq(r.querySelector('[data-index="0"]')),c=l*e.slidesToShow,d=e.currentSlide===void 0?e.initialSlide:e.currentSlide;e.rtl&&e.currentSlide===void 0&&(d=n-1-e.initialSlide);var f=e.lazyLoadedList||[],h=_q(pr(pr({},e),{},{currentSlide:d,lazyLoadedList:f}));f=f.concat(h);var p={slideCount:n,slideWidth:a,listWidth:o,trackWidth:i,currentSlide:d,slideHeight:l,listHeight:c,lazyLoadedList:f};return e.autoplaying===null&&e.autoplay&&(p.autoplaying="playing"),p};Ve.slideHandler=function(e){var n=e.waitForAnimate,r=e.animating,o=e.fade,s=e.infinite,i=e.index,a=e.slideCount,u=e.lazyLoad,l=e.currentSlide,c=e.centerMode,d=e.slidesToScroll,f=e.slidesToShow,h=e.useCSS,p=e.lazyLoadedList;if(n&&r)return{};var m=i,g,v,y,x={},b={},C=s?i:Eq(i,0,a-1);if(o){if(!s&&(i<0||i>=a))return{};i<0?m=i+a:i>=a&&(m=i-a),u&&p.indexOf(m)<0&&(p=p.concat(m)),x={animating:!0,currentSlide:m,lazyLoadedList:p,targetSlide:m},b={animating:!1,targetSlide:m}}else g=m,m<0?(g=m+a,s?a%d!==0&&(g=a-a%d):g=0):!Rq(e)&&m>l?m=g=l:c&&m>=a?(m=s?a:a-1,g=s?0:a-1):m>=a&&(g=m-a,s?a%d!==0&&(g=0):g=a-f),!s&&m+f>=a&&(g=a-f),v=fC(pr(pr({},e),{},{slideIndex:m})),y=fC(pr(pr({},e),{},{slideIndex:g})),s||(v===y&&(m=g),v=y),u&&(p=p.concat(_q(pr(pr({},e),{},{currentSlide:m})))),h?(x={animating:!0,currentSlide:g,trackStyle:Oq(pr(pr({},e),{},{left:v})),lazyLoadedList:p,targetSlide:C},b={animating:!1,currentSlide:g,trackStyle:dC(pr(pr({},e),{},{left:y})),swipeLeft:null,targetSlide:C}):x={currentSlide:g,trackStyle:dC(pr(pr({},e),{},{left:y})),lazyLoadedList:p,targetSlide:C};return{state:x,nextState:b}};Ve.changeSlide=function(e,n){var r,o,s,i,a,u=e.slidesToScroll,l=e.slidesToShow,c=e.slideCount,d=e.currentSlide,f=e.targetSlide,h=e.lazyLoad,p=e.infinite;if(i=c%u!==0,r=i?0:(c-d)%u,n.message==="previous")s=r===0?u:l-r,a=d-s,h&&!p&&(o=d-s,a=o===-1?c-1:o),p||(a=f-u);else if(n.message==="next")s=r===0?u:r,a=d+s,h&&!p&&(a=(d+u)%c+r),p||(a=f+u);else if(n.message==="dots")a=n.index*n.slidesToScroll;else if(n.message==="children"){if(a=n.index,p){var m=Axe(pr(pr({},e),{},{targetSlide:a}));a>n.currentSlide&&m==="left"?a=a-c:a<n.currentSlide&&m==="right"&&(a=a+c)}}else n.message==="index"&&(a=Number(n.index));return a};Ve.keyHandler=function(e,n,r){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!n?"":e.keyCode===37?r?"next":"previous":e.keyCode===39?r?"previous":"next":""};Ve.swipeStart=function(e,n,r){return e.target.tagName==="IMG"&&fm(e),!n||!r&&e.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};Ve.swipeMove=function(e,n){var r=n.scrolling,o=n.animating,s=n.vertical,i=n.swipeToSlide,a=n.verticalSwiping,u=n.rtl,l=n.currentSlide,c=n.edgeFriction,d=n.edgeDragged,f=n.onEdge,h=n.swiped,p=n.swiping,m=n.slideCount,g=n.slidesToScroll,v=n.infinite,y=n.touchObject,x=n.swipeEvent,b=n.listHeight,C=n.listWidth;if(!r){if(o)return fm(e);s&&i&&a&&fm(e);var S,E={},I=fC(n);y.curX=e.touches?e.touches[0].pageX:e.clientX,y.curY=e.touches?e.touches[0].pageY:e.clientY,y.swipeLength=Math.round(Math.sqrt(Math.pow(y.curX-y.startX,2)));var T=Math.round(Math.sqrt(Math.pow(y.curY-y.startY,2)));if(!a&&!p&&T>10)return{scrolling:!0};a&&(y.swipeLength=T);var N=(u?-1:1)*(y.curX>y.startX?1:-1);a&&(N=y.curY>y.startY?1:-1);var O=Math.ceil(m/g),$=Dq(n.touchObject,a),A=y.swipeLength;return v||(l===0&&($==="right"||$==="down")||l+1>=O&&($==="left"||$==="up")||!Rq(n)&&($==="left"||$==="up"))&&(A=y.swipeLength*c,d===!1&&f&&(f($),E.edgeDragged=!0)),!h&&x&&(x($),E.swiped=!0),s?S=I+A*(b/C)*N:u?S=I-A*N:S=I+A*N,a&&(S=I+A*N),E=pr(pr({},E),{},{touchObject:y,swipeLeft:S,trackStyle:dC(pr(pr({},n),{},{left:S}))}),Math.abs(y.curX-y.startX)<Math.abs(y.curY-y.startY)*.8||y.swipeLength>10&&(E.swiping=!0,fm(e)),E}};Ve.swipeEnd=function(e,n){var r=n.dragging,o=n.swipe,s=n.touchObject,i=n.listWidth,a=n.touchThreshold,u=n.verticalSwiping,l=n.listHeight,c=n.swipeToSlide,d=n.scrolling,f=n.onSwipe,h=n.targetSlide,p=n.currentSlide,m=n.infinite;if(!r)return o&&fm(e),{};var g=u?l/a:i/a,v=Dq(s,u),y={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(d||!s.swipeLength)return y;if(s.swipeLength>g){fm(e),f&&f(v);var x,b,C=m?p:h;switch(v){case"left":case"up":b=C+RW(n),x=c?DW(n,b):b,y.currentDirection=0;break;case"right":case"down":b=C-RW(n),x=c?DW(n,b):b,y.currentDirection=1;break;default:x=C}y.triggerSlideHandler=x}else{var S=fC(n);y.trackStyle=Oq(pr(pr({},n),{},{left:S}))}return y};var Dxe=Ve.getNavigableIndexes=function(e){for(var n=e.infinite?e.slideCount*2:e.slideCount,r=e.infinite?e.slidesToShow*-1:0,o=e.infinite?e.slidesToShow*-1:0,s=[];r<n;)s.push(r),r=o+e.slidesToScroll,o+=Math.min(e.slidesToScroll,e.slidesToShow);return s},DW=Ve.checkNavigable=function(e,n){var r=Dxe(e),o=0;if(n>r[r.length-1])n=r[r.length-1];else for(var s in r){if(n<r[s]){n=o;break}o=r[s]}return n},RW=Ve.getSlideCount=function(e){var n=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var r,o=e.listRef,s=o.querySelectorAll&&o.querySelectorAll(".slick-slide")||[];if(Array.from(s).every(function(u){if(e.vertical){if(u.offsetTop+Nq(u)/2>e.swipeLeft*-1)return r=u,!1}else if(u.offsetLeft-n+vR(u)/2>e.swipeLeft*-1)return r=u,!1;return!0}),!r)return 0;var i=e.rtl===!0?e.slideCount-e.currentSlide:e.currentSlide,a=Math.abs(r.dataset.index-i)||1;return a}else return e.slidesToScroll},wM=Ve.checkSpecKeys=function(e,n){return n.reduce(function(r,o){return r&&e.hasOwnProperty(o)},!0)?null:console.error("Keys Missing:",e)},dC=Ve.getTrackCSS=function(e){wM(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var n,r,o=e.slideCount+2*e.slidesToShow;e.vertical?r=o*e.slideHeight:n=Oxe(e)*e.slideWidth;var s={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var i=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",a=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",u=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";s=pr(pr({},s),{},{WebkitTransform:i,transform:a,msTransform:u})}else e.vertical?s.top=e.left:s.left=e.left;return e.fade&&(s={opacity:1}),n&&(s.width=n),r&&(s.height=r),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?s.marginTop=e.left+"px":s.marginLeft=e.left+"px"),s},Oq=Ve.getTrackAnimateCSS=function(e){wM(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var n=dC(e);return e.useTransform?(n.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,n.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?n.transition="top "+e.speed+"ms "+e.cssEase:n.transition="left "+e.speed+"ms "+e.cssEase,n},fC=Ve.getTrackLeft=function(e){if(e.unslick)return 0;wM(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var n=e.slideIndex,r=e.trackRef,o=e.infinite,s=e.centerMode,i=e.slideCount,a=e.slidesToShow,u=e.slidesToScroll,l=e.slideWidth,c=e.listWidth,d=e.variableWidth,f=e.slideHeight,h=e.fade,p=e.vertical,m=0,g,v,y=0;if(h||e.slideCount===1)return 0;var x=0;if(o?(x=-ck(e),i%u!==0&&n+u>i&&(x=-(n>i?a-(n-i):i%u)),s&&(x+=parseInt(a/2))):(i%u!==0&&n+u>i&&(x=a-i%u),s&&(x=parseInt(a/2))),m=x*l,y=x*f,p?g=n*f*-1+y:g=n*l*-1+m,d===!0){var b,C=r&&r.node;if(b=n+ck(e),v=C&&C.childNodes[b],g=v?v.offsetLeft*-1:0,s===!0){b=o?n+ck(e):n,v=C&&C.children[b],g=0;for(var S=0;S<b;S++)g-=C&&C.children[S]&&C.children[S].offsetWidth;g-=parseInt(e.centerPadding),g+=v&&(c-v.offsetWidth)/2}}return g},ck=Ve.getPreClones=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)},Rxe=Ve.getPostClones=function(e){return e.unslick||!e.infinite?0:e.slideCount},Oxe=Ve.getTotalSlides=function(e){return e.slideCount===1?1:ck(e)+e.slideCount+Rxe(e)},Axe=Ve.siblingDirection=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+$xe(e)?"left":"right":e.targetSlide<e.currentSlide-Mxe(e)?"right":"left"},$xe=Ve.slidesOnRight=function(e){var n=e.slidesToShow,r=e.centerMode,o=e.rtl,s=e.centerPadding;if(r){var i=(n-1)/2+1;return parseInt(s)>0&&(i+=1),o&&n%2===0&&(i+=1),i}return o?0:n-1},Mxe=Ve.slidesOnLeft=function(e){var n=e.slidesToShow,r=e.centerMode,o=e.rtl,s=e.centerPadding;if(r){var i=(n-1)/2+1;return parseInt(s)>0&&(i+=1),!o&&n%2===0&&(i+=1),i}return o?n-1:0};Ve.canUseDOM=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};var Pxe=Ve.validSettings=Object.keys(Sxe.default);function Fxe(t){return Pxe.reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{})}var WS={};Object.defineProperty(WS,"__esModule",{value:!0});WS.Track=void 0;var Vc=Aq(D),CT=Aq(xx),ST=Ve;function Aq(t){return t&&t.__esModule?t:{default:t}}function Hm(t){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hm(t)}function yR(){return yR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yR.apply(this,arguments)}function Lxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mq(r.key),r)}}function Bxe(t,e,n){return e&&OW(t.prototype,e),n&&OW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xR(t,e)}function xR(t,e){return xR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},xR(t,e)}function Wxe(t){var e=$q();return function(){var r=hC(t),o;if(e){var s=hC(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return zxe(this,o)}}function zxe(t,e){if(e&&(Hm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bR(t)}function bR(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($q=function(){return!!t})()}function hC(t){return hC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hC(t)}function AW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AW(Object(n),!0).forEach(function(r){wR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wR(t,e,n){return e=Mq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mq(t){var e=Uxe(t,"string");return Hm(e)=="symbol"?e:String(e)}function Uxe(t,e){if(Hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ET=function(e){var n,r,o,s,i;e.rtl?i=e.slideCount-1-e.index:i=e.index,o=i<0||i>=e.slideCount,e.centerMode?(s=Math.floor(e.slidesToShow/2),r=(i-e.currentSlide)%e.slideCount===0,i>e.currentSlide-s-1&&i<=e.currentSlide+s&&(n=!0)):n=e.currentSlide<=i&&i<e.currentSlide+e.slidesToShow;var a;e.targetSlide<0?a=e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?a=e.targetSlide-e.slideCount:a=e.targetSlide;var u=i===a;return{"slick-slide":!0,"slick-active":n,"slick-center":r,"slick-cloned":o,"slick-current":u}},Vxe=function(e){var n={};return(e.variableWidth===void 0||e.variableWidth===!1)&&(n.width=e.slideWidth),e.fade&&(n.position="relative",e.vertical?n.top=-e.index*parseInt(e.slideHeight):n.left=-e.index*parseInt(e.slideWidth),n.opacity=e.currentSlide===e.index?1:0,n.zIndex=e.currentSlide===e.index?999:998,e.useCSS&&(n.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),n},_T=function(e,n){return e.key||n},Hxe=function(e){var n,r=[],o=[],s=[],i=Vc.default.Children.count(e.children),a=(0,ST.lazyStartIndex)(e),u=(0,ST.lazyEndIndex)(e);return Vc.default.Children.forEach(e.children,function(l,c){var d,f={message:"children",index:c,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(c)>=0?d=l:d=Vc.default.createElement("div",null);var h=Vxe(js(js({},e),{},{index:c})),p=d.props.className||"",m=ET(js(js({},e),{},{index:c}));if(r.push(Vc.default.cloneElement(d,{key:"original"+_T(d,c),"data-index":c,className:(0,CT.default)(m,p),tabIndex:"-1","aria-hidden":!m["slick-active"],style:js(js({outline:"none"},d.props.style||{}),h),onClick:function(y){d.props&&d.props.onClick&&d.props.onClick(y),e.focusOnSelect&&e.focusOnSelect(f)}})),e.infinite&&e.fade===!1){var g=i-c;g<=(0,ST.getPreClones)(e)&&(n=-g,n>=a&&(d=l),m=ET(js(js({},e),{},{index:n})),o.push(Vc.default.cloneElement(d,{key:"precloned"+_T(d,n),"data-index":n,tabIndex:"-1",className:(0,CT.default)(m,p),"aria-hidden":!m["slick-active"],style:js(js({},d.props.style||{}),h),onClick:function(y){d.props&&d.props.onClick&&d.props.onClick(y),e.focusOnSelect&&e.focusOnSelect(f)}}))),n=i+c,n<u&&(d=l),m=ET(js(js({},e),{},{index:n})),s.push(Vc.default.cloneElement(d,{key:"postcloned"+_T(d,n),"data-index":n,tabIndex:"-1",className:(0,CT.default)(m,p),"aria-hidden":!m["slick-active"],style:js(js({},d.props.style||{}),h),onClick:function(y){d.props&&d.props.onClick&&d.props.onClick(y),e.focusOnSelect&&e.focusOnSelect(f)}}))}}),e.rtl?o.concat(r,s).reverse():o.concat(r,s)};WS.Track=function(t){jxe(n,t);var e=Wxe(n);function n(){var r;Lxe(this,n);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=e.call.apply(e,[this].concat(s)),wR(bR(r),"node",null),wR(bR(r),"handleRef",function(a){r.node=a}),r}return Bxe(n,[{key:"render",value:function(){var o=Hxe(this.props),s=this.props,i=s.onMouseEnter,a=s.onMouseOver,u=s.onMouseLeave,l={onMouseEnter:i,onMouseOver:a,onMouseLeave:u};return Vc.default.createElement("div",yR({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},l),o)}}]),n}(Vc.default.PureComponent);var zS={};function Gm(t){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gm(t)}Object.defineProperty(zS,"__esModule",{value:!0});zS.Dots=void 0;var Jb=Pq(D),Gxe=Pq(xx),$W=Ve;function Pq(t){return t&&t.__esModule?t:{default:t}}function MW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Yxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MW(Object(n),!0).forEach(function(r){qxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qxe(t,e,n){return e=Fq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fq(r.key),r)}}function Xxe(t,e,n){return e&&PW(t.prototype,e),n&&PW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fq(t){var e=Qxe(t,"string");return Gm(e)=="symbol"?e:String(e)}function Qxe(t,e){if(Gm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kR(t,e)}function kR(t,e){return kR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},kR(t,e)}function Zxe(t){var e=Lq();return function(){var r=pC(t),o;if(e){var s=pC(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return e1e(this,o)}}function e1e(t,e){if(e&&(Gm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t1e(t)}function t1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lq=function(){return!!t})()}function pC(t){return pC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pC(t)}var n1e=function(e){var n;return e.infinite?n=Math.ceil(e.slideCount/e.slidesToScroll):n=Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,n};zS.Dots=function(t){Jxe(n,t);var e=Zxe(n);function n(){return Kxe(this,n),e.apply(this,arguments)}return Xxe(n,[{key:"clickHandler",value:function(o,s){s.preventDefault(),this.props.clickHandler(o)}},{key:"render",value:function(){for(var o=this.props,s=o.onMouseEnter,i=o.onMouseOver,a=o.onMouseLeave,u=o.infinite,l=o.slidesToScroll,c=o.slidesToShow,d=o.slideCount,f=o.currentSlide,h=n1e({slideCount:d,slidesToScroll:l,slidesToShow:c,infinite:u}),p={onMouseEnter:s,onMouseOver:i,onMouseLeave:a},m=[],g=0;g<h;g++){var v=(g+1)*l-1,y=u?v:(0,$W.clamp)(v,0,d-1),x=y-(l-1),b=u?x:(0,$W.clamp)(x,0,d-1),C=(0,Gxe.default)({"slick-active":u?f>=b&&f<=y:f===b}),S={message:"dots",index:g,slidesToScroll:l,currentSlide:f},E=this.clickHandler.bind(this,S);m=m.concat(Jb.default.createElement("li",{key:g,className:C},Jb.default.cloneElement(this.props.customPaging(g),{onClick:E})))}return Jb.default.cloneElement(this.props.appendDots(m),Yxe({className:this.props.dotsClass},p))}}]),n}(Jb.default.PureComponent);var Ym={};function qm(t){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(t)}Object.defineProperty(Ym,"__esModule",{value:!0});Ym.PrevArrow=Ym.NextArrow=void 0;var hm=jq(D),Bq=jq(xx),r1e=Ve;function jq(t){return t&&t.__esModule?t:{default:t}}function mC(){return mC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mC.apply(this,arguments)}function FW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function gC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FW(Object(n),!0).forEach(function(r){o1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o1e(t,e,n){return e=Uq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Uq(r.key),r)}}function zq(t,e,n){return e&&LW(t.prototype,e),n&&LW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uq(t){var e=s1e(t,"string");return qm(e)=="symbol"?e:String(e)}function s1e(t,e){if(qm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CR(t,e)}function CR(t,e){return CR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},CR(t,e)}function Hq(t){var e=Gq();return function(){var r=vC(t),o;if(e){var s=vC(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return i1e(this,o)}}function i1e(t,e){if(e&&(qm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a1e(t)}function a1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gq=function(){return!!t})()}function vC(t){return vC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vC(t)}Ym.PrevArrow=function(t){Vq(n,t);var e=Hq(n);function n(){return Wq(this,n),e.apply(this,arguments)}return zq(n,[{key:"clickHandler",value:function(o,s){s&&s.preventDefault(),this.props.clickHandler(o,s)}},{key:"render",value:function(){var o={"slick-arrow":!0,"slick-prev":!0},s=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(o["slick-disabled"]=!0,s=null);var i={key:"0","data-role":"none",className:(0,Bq.default)(o),style:{display:"block"},onClick:s},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},u;return this.props.prevArrow?u=hm.default.cloneElement(this.props.prevArrow,gC(gC({},i),a)):u=hm.default.createElement("button",mC({key:"0",type:"button"},i)," ","Previous"),u}}]),n}(hm.default.PureComponent);Ym.NextArrow=function(t){Vq(n,t);var e=Hq(n);function n(){return Wq(this,n),e.apply(this,arguments)}return zq(n,[{key:"clickHandler",value:function(o,s){s&&s.preventDefault(),this.props.clickHandler(o,s)}},{key:"render",value:function(){var o={"slick-arrow":!0,"slick-next":!0},s=this.clickHandler.bind(this,{message:"next"});(0,r1e.canGoNext)(this.props)||(o["slick-disabled"]=!0,s=null);var i={key:"1","data-role":"none",className:(0,Bq.default)(o),style:{display:"block"},onClick:s},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},u;return this.props.nextArrow?u=hm.default.cloneElement(this.props.nextArrow,gC(gC({},i),a)):u=hm.default.createElement("button",mC({key:"1",type:"button"},i)," ","Next"),u}}]),n}(hm.default.PureComponent);var Yq=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(o,s){return o[0]===n?(r=s,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),o=this.__entries__[r];return o&&o[1]},e.prototype.set=function(n,r){var o=t(this.__entries__,n);~o?this.__entries__[o][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,o=t(r,n);~o&&r.splice(o,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var o=0,s=this.__entries__;o<s.length;o++){var i=s[o];n.call(r,i[1],i[0])}},e}()}(),SR=typeof window<"u"&&typeof document<"u"&&window.document===document,yC=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),u1e=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(yC):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),l1e=2;function c1e(t,e){var n=!1,r=!1,o=0;function s(){n&&(n=!1,t()),r&&a()}function i(){u1e(s)}function a(){var u=Date.now();if(n){if(u-o<l1e)return;r=!0}else n=!0,r=!1,setTimeout(i,e);o=u}return a}var d1e=20,f1e=["top","right","bottom","left","width","height","size","weight"],h1e=typeof MutationObserver<"u",p1e=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=c1e(this.refresh.bind(this),d1e)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!SR||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),h1e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!SR||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,o=f1e.some(function(s){return!!~r.indexOf(s)});o&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),qq=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},Km=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||yC},Kq=US(0,0,0,0);function xC(t){return parseFloat(t)||0}function BW(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,o){var s=t["border-"+o+"-width"];return r+xC(s)},0)}function m1e(t){for(var e=["top","right","bottom","left"],n={},r=0,o=e;r<o.length;r++){var s=o[r],i=t["padding-"+s];n[s]=xC(i)}return n}function g1e(t){var e=t.getBBox();return US(0,0,e.width,e.height)}function v1e(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Kq;var r=Km(t).getComputedStyle(t),o=m1e(r),s=o.left+o.right,i=o.top+o.bottom,a=xC(r.width),u=xC(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=BW(r,"left","right")+s),Math.round(u+i)!==n&&(u-=BW(r,"top","bottom")+i)),!x1e(t)){var l=Math.round(a+s)-e,c=Math.round(u+i)-n;Math.abs(l)!==1&&(a-=l),Math.abs(c)!==1&&(u-=c)}return US(o.left,o.top,a,u)}var y1e=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Km(t).SVGGraphicsElement}:function(t){return t instanceof Km(t).SVGElement&&typeof t.getBBox=="function"}}();function x1e(t){return t===Km(t).document.documentElement}function b1e(t){return SR?y1e(t)?g1e(t):v1e(t):Kq}function w1e(t){var e=t.x,n=t.y,r=t.width,o=t.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,i=Object.create(s.prototype);return qq(i,{x:e,y:n,width:r,height:o,top:n,right:e+r,bottom:o+n,left:e}),i}function US(t,e,n,r){return{x:t,y:e,width:n,height:r}}var k1e=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=US(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=b1e(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),C1e=function(){function t(e,n){var r=w1e(n);qq(this,{target:e,contentRect:r})}return t}(),S1e=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new Yq,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Km(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new k1e(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Km(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new C1e(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Xq=typeof WeakMap<"u"?new WeakMap:new Yq,Qq=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=p1e.getInstance(),r=new S1e(e,n,this);Xq.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Qq.prototype[t]=function(){var e;return(e=Xq.get(this))[t].apply(e,arguments)}});var E1e=function(){return typeof yC.ResizeObserver<"u"?yC.ResizeObserver:Qq}();const _1e=Object.freeze(Object.defineProperty({__proto__:null,default:E1e},Symbol.toStringTag,{value:"Module"})),I1e=fH(_1e);Object.defineProperty(jS,"__esModule",{value:!0});jS.InnerSlider=void 0;var Ss=_x(D),T1e=_x(Cq),N1e=_x(kxe),D1e=_x(xx),kr=Ve,R1e=WS,O1e=zS,jW=Ym,A1e=_x(I1e);function _x(t){return t&&t.__esModule?t:{default:t}}function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}function bC(){return bC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bC.apply(this,arguments)}function $1e(t,e){if(t==null)return{};var n=M1e(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function M1e(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function WW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WW(Object(n),!0).forEach(function(r){Jt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zq(r.key),r)}}function F1e(t,e,n){return e&&zW(t.prototype,e),n&&zW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function L1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ER(t,e)}function ER(t,e){return ER=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},ER(t,e)}function B1e(t){var e=Jq();return function(){var r=wC(t),o;if(e){var s=wC(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return j1e(this,o)}}function j1e(t,e){if(e&&(mh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qt(t)}function Qt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jq=function(){return!!t})()}function wC(t){return wC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wC(t)}function Jt(t,e,n){return e=Zq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zq(t){var e=W1e(t,"string");return mh(e)=="symbol"?e:String(e)}function W1e(t,e){if(mh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}jS.InnerSlider=function(t){L1e(n,t);var e=B1e(n);function n(r){var o;P1e(this,n),o=e.call(this,r),Jt(Qt(o),"listRefHandler",function(i){return o.list=i}),Jt(Qt(o),"trackRefHandler",function(i){return o.track=i}),Jt(Qt(o),"adaptHeight",function(){if(o.props.adaptiveHeight&&o.list){var i=o.list.querySelector('[data-index="'.concat(o.state.currentSlide,'"]'));o.list.style.height=(0,kr.getHeight)(i)+"px"}}),Jt(Qt(o),"componentDidMount",function(){if(o.props.onInit&&o.props.onInit(),o.props.lazyLoad){var i=(0,kr.getOnDemandLazySlides)(St(St({},o.props),o.state));i.length>0&&(o.setState(function(u){return{lazyLoadedList:u.lazyLoadedList.concat(i)}}),o.props.onLazyLoad&&o.props.onLazyLoad(i))}var a=St({listRef:o.list,trackRef:o.track},o.props);o.updateState(a,!0,function(){o.adaptHeight(),o.props.autoplay&&o.autoPlay("update")}),o.props.lazyLoad==="progressive"&&(o.lazyLoadTimer=setInterval(o.progressiveLazyLoad,1e3)),o.ro=new A1e.default(function(){o.state.animating?(o.onWindowResized(!1),o.callbackTimers.push(setTimeout(function(){return o.onWindowResized()},o.props.speed))):o.onWindowResized()}),o.ro.observe(o.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(u){u.onfocus=o.props.pauseOnFocus?o.onSlideFocus:null,u.onblur=o.props.pauseOnFocus?o.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",o.onWindowResized):window.attachEvent("onresize",o.onWindowResized)}),Jt(Qt(o),"componentWillUnmount",function(){o.animationEndCallback&&clearTimeout(o.animationEndCallback),o.lazyLoadTimer&&clearInterval(o.lazyLoadTimer),o.callbackTimers.length&&(o.callbackTimers.forEach(function(i){return clearTimeout(i)}),o.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",o.onWindowResized):window.detachEvent("onresize",o.onWindowResized),o.autoplayTimer&&clearInterval(o.autoplayTimer),o.ro.disconnect()}),Jt(Qt(o),"componentDidUpdate",function(i){if(o.checkImagesLoad(),o.props.onReInit&&o.props.onReInit(),o.props.lazyLoad){var a=(0,kr.getOnDemandLazySlides)(St(St({},o.props),o.state));a.length>0&&(o.setState(function(c){return{lazyLoadedList:c.lazyLoadedList.concat(a)}}),o.props.onLazyLoad&&o.props.onLazyLoad(a))}o.adaptHeight();var u=St(St({listRef:o.list,trackRef:o.track},o.props),o.state),l=o.didPropsChange(i);l&&o.updateState(u,l,function(){o.state.currentSlide>=Ss.default.Children.count(o.props.children)&&o.changeSlide({message:"index",index:Ss.default.Children.count(o.props.children)-o.props.slidesToShow,currentSlide:o.state.currentSlide}),o.props.autoplay?o.autoPlay("update"):o.pause("paused")})}),Jt(Qt(o),"onWindowResized",function(i){o.debouncedResize&&o.debouncedResize.cancel(),o.debouncedResize=(0,N1e.default)(function(){return o.resizeWindow(i)},50),o.debouncedResize()}),Jt(Qt(o),"resizeWindow",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=!!(o.track&&o.track.node);if(a){var u=St(St({listRef:o.list,trackRef:o.track},o.props),o.state);o.updateState(u,i,function(){o.props.autoplay?o.autoPlay("update"):o.pause("paused")}),o.setState({animating:!1}),clearTimeout(o.animationEndCallback),delete o.animationEndCallback}}),Jt(Qt(o),"updateState",function(i,a,u){var l=(0,kr.initializedState)(i);i=St(St(St({},i),l),{},{slideIndex:l.currentSlide});var c=(0,kr.getTrackLeft)(i);i=St(St({},i),{},{left:c});var d=(0,kr.getTrackCSS)(i);(a||Ss.default.Children.count(o.props.children)!==Ss.default.Children.count(i.children))&&(l.trackStyle=d),o.setState(l,u)}),Jt(Qt(o),"ssrInit",function(){if(o.props.variableWidth){var i=0,a=0,u=[],l=(0,kr.getPreClones)(St(St(St({},o.props),o.state),{},{slideCount:o.props.children.length})),c=(0,kr.getPostClones)(St(St(St({},o.props),o.state),{},{slideCount:o.props.children.length}));o.props.children.forEach(function(E){u.push(E.props.style.width),i+=E.props.style.width});for(var d=0;d<l;d++)a+=u[u.length-1-d],i+=u[u.length-1-d];for(var f=0;f<c;f++)i+=u[f];for(var h=0;h<o.state.currentSlide;h++)a+=u[h];var p={width:i+"px",left:-a+"px"};if(o.props.centerMode){var m="".concat(u[o.state.currentSlide],"px");p.left="calc(".concat(p.left," + (100% - ").concat(m,") / 2 ) ")}return{trackStyle:p}}var g=Ss.default.Children.count(o.props.children),v=St(St(St({},o.props),o.state),{},{slideCount:g}),y=(0,kr.getPreClones)(v)+(0,kr.getPostClones)(v)+g,x=100/o.props.slidesToShow*y,b=100/y,C=-b*((0,kr.getPreClones)(v)+o.state.currentSlide)*x/100;o.props.centerMode&&(C+=(100-b*x/100)/2);var S={width:x+"%",left:C+"%"};return{slideWidth:b+"%",trackStyle:S}}),Jt(Qt(o),"checkImagesLoad",function(){var i=o.list&&o.list.querySelectorAll&&o.list.querySelectorAll(".slick-slide img")||[],a=i.length,u=0;Array.prototype.forEach.call(i,function(l){var c=function(){return++u&&u>=a&&o.onWindowResized()};if(!l.onclick)l.onclick=function(){return l.parentNode.focus()};else{var d=l.onclick;l.onclick=function(f){d(f),l.parentNode.focus()}}l.onload||(o.props.lazyLoad?l.onload=function(){o.adaptHeight(),o.callbackTimers.push(setTimeout(o.onWindowResized,o.props.speed))}:(l.onload=c,l.onerror=function(){c(),o.props.onLazyLoadError&&o.props.onLazyLoadError()}))})}),Jt(Qt(o),"progressiveLazyLoad",function(){for(var i=[],a=St(St({},o.props),o.state),u=o.state.currentSlide;u<o.state.slideCount+(0,kr.getPostClones)(a);u++)if(o.state.lazyLoadedList.indexOf(u)<0){i.push(u);break}for(var l=o.state.currentSlide-1;l>=-(0,kr.getPreClones)(a);l--)if(o.state.lazyLoadedList.indexOf(l)<0){i.push(l);break}i.length>0?(o.setState(function(c){return{lazyLoadedList:c.lazyLoadedList.concat(i)}}),o.props.onLazyLoad&&o.props.onLazyLoad(i)):o.lazyLoadTimer&&(clearInterval(o.lazyLoadTimer),delete o.lazyLoadTimer)}),Jt(Qt(o),"slideHandler",function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=o.props,l=u.asNavFor,c=u.beforeChange,d=u.onLazyLoad,f=u.speed,h=u.afterChange,p=o.state.currentSlide,m=(0,kr.slideHandler)(St(St(St({index:i},o.props),o.state),{},{trackRef:o.track,useCSS:o.props.useCSS&&!a})),g=m.state,v=m.nextState;if(g){c&&c(p,g.currentSlide);var y=g.lazyLoadedList.filter(function(x){return o.state.lazyLoadedList.indexOf(x)<0});d&&y.length>0&&d(y),!o.props.waitForAnimate&&o.animationEndCallback&&(clearTimeout(o.animationEndCallback),h&&h(p),delete o.animationEndCallback),o.setState(g,function(){l&&o.asNavForIndex!==i&&(o.asNavForIndex=i,l.innerSlider.slideHandler(i)),v&&(o.animationEndCallback=setTimeout(function(){var x=v.animating,b=$1e(v,["animating"]);o.setState(b,function(){o.callbackTimers.push(setTimeout(function(){return o.setState({animating:x})},10)),h&&h(g.currentSlide),delete o.animationEndCallback})},f))})}}),Jt(Qt(o),"changeSlide",function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=St(St({},o.props),o.state),l=(0,kr.changeSlide)(u,i);if(!(l!==0&&!l)&&(a===!0?o.slideHandler(l,a):o.slideHandler(l),o.props.autoplay&&o.autoPlay("update"),o.props.focusOnSelect)){var c=o.list.querySelectorAll(".slick-current");c[0]&&c[0].focus()}}),Jt(Qt(o),"clickHandler",function(i){o.clickable===!1&&(i.stopPropagation(),i.preventDefault()),o.clickable=!0}),Jt(Qt(o),"keyHandler",function(i){var a=(0,kr.keyHandler)(i,o.props.accessibility,o.props.rtl);a!==""&&o.changeSlide({message:a})}),Jt(Qt(o),"selectHandler",function(i){o.changeSlide(i)}),Jt(Qt(o),"disableBodyScroll",function(){var i=function(u){u=u||window.event,u.preventDefault&&u.preventDefault(),u.returnValue=!1};window.ontouchmove=i}),Jt(Qt(o),"enableBodyScroll",function(){window.ontouchmove=null}),Jt(Qt(o),"swipeStart",function(i){o.props.verticalSwiping&&o.disableBodyScroll();var a=(0,kr.swipeStart)(i,o.props.swipe,o.props.draggable);a!==""&&o.setState(a)}),Jt(Qt(o),"swipeMove",function(i){var a=(0,kr.swipeMove)(i,St(St(St({},o.props),o.state),{},{trackRef:o.track,listRef:o.list,slideIndex:o.state.currentSlide}));a&&(a.swiping&&(o.clickable=!1),o.setState(a))}),Jt(Qt(o),"swipeEnd",function(i){var a=(0,kr.swipeEnd)(i,St(St(St({},o.props),o.state),{},{trackRef:o.track,listRef:o.list,slideIndex:o.state.currentSlide}));if(a){var u=a.triggerSlideHandler;delete a.triggerSlideHandler,o.setState(a),u!==void 0&&(o.slideHandler(u),o.props.verticalSwiping&&o.enableBodyScroll())}}),Jt(Qt(o),"touchEnd",function(i){o.swipeEnd(i),o.clickable=!0}),Jt(Qt(o),"slickPrev",function(){o.callbackTimers.push(setTimeout(function(){return o.changeSlide({message:"previous"})},0))}),Jt(Qt(o),"slickNext",function(){o.callbackTimers.push(setTimeout(function(){return o.changeSlide({message:"next"})},0))}),Jt(Qt(o),"slickGoTo",function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i=Number(i),isNaN(i))return"";o.callbackTimers.push(setTimeout(function(){return o.changeSlide({message:"index",index:i,currentSlide:o.state.currentSlide},a)},0))}),Jt(Qt(o),"play",function(){var i;if(o.props.rtl)i=o.state.currentSlide-o.props.slidesToScroll;else if((0,kr.canGoNext)(St(St({},o.props),o.state)))i=o.state.currentSlide+o.props.slidesToScroll;else return!1;o.slideHandler(i)}),Jt(Qt(o),"autoPlay",function(i){o.autoplayTimer&&clearInterval(o.autoplayTimer);var a=o.state.autoplaying;if(i==="update"){if(a==="hovered"||a==="focused"||a==="paused")return}else if(i==="leave"){if(a==="paused"||a==="focused")return}else if(i==="blur"&&(a==="paused"||a==="hovered"))return;o.autoplayTimer=setInterval(o.play,o.props.autoplaySpeed+50),o.setState({autoplaying:"playing"})}),Jt(Qt(o),"pause",function(i){o.autoplayTimer&&(clearInterval(o.autoplayTimer),o.autoplayTimer=null);var a=o.state.autoplaying;i==="paused"?o.setState({autoplaying:"paused"}):i==="focused"?(a==="hovered"||a==="playing")&&o.setState({autoplaying:"focused"}):a==="playing"&&o.setState({autoplaying:"hovered"})}),Jt(Qt(o),"onDotsOver",function(){return o.props.autoplay&&o.pause("hovered")}),Jt(Qt(o),"onDotsLeave",function(){return o.props.autoplay&&o.state.autoplaying==="hovered"&&o.autoPlay("leave")}),Jt(Qt(o),"onTrackOver",function(){return o.props.autoplay&&o.pause("hovered")}),Jt(Qt(o),"onTrackLeave",function(){return o.props.autoplay&&o.state.autoplaying==="hovered"&&o.autoPlay("leave")}),Jt(Qt(o),"onSlideFocus",function(){return o.props.autoplay&&o.pause("focused")}),Jt(Qt(o),"onSlideBlur",function(){return o.props.autoplay&&o.state.autoplaying==="focused"&&o.autoPlay("blur")}),Jt(Qt(o),"render",function(){var i=(0,D1e.default)("slick-slider",o.props.className,{"slick-vertical":o.props.vertical,"slick-initialized":!0}),a=St(St({},o.props),o.state),u=(0,kr.extractObject)(a,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),l=o.props.pauseOnHover;u=St(St({},u),{},{onMouseEnter:l?o.onTrackOver:null,onMouseLeave:l?o.onTrackLeave:null,onMouseOver:l?o.onTrackOver:null,focusOnSelect:o.props.focusOnSelect&&o.clickable?o.selectHandler:null});var c;if(o.props.dots===!0&&o.state.slideCount>=o.props.slidesToShow){var d=(0,kr.extractObject)(a,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),f=o.props.pauseOnDotsHover;d=St(St({},d),{},{clickHandler:o.changeSlide,onMouseEnter:f?o.onDotsLeave:null,onMouseOver:f?o.onDotsOver:null,onMouseLeave:f?o.onDotsLeave:null}),c=Ss.default.createElement(O1e.Dots,d)}var h,p,m=(0,kr.extractObject)(a,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);m.clickHandler=o.changeSlide,o.props.arrows&&(h=Ss.default.createElement(jW.PrevArrow,m),p=Ss.default.createElement(jW.NextArrow,m));var g=null;o.props.vertical&&(g={height:o.state.listHeight});var v=null;o.props.vertical===!1?o.props.centerMode===!0&&(v={padding:"0px "+o.props.centerPadding}):o.props.centerMode===!0&&(v={padding:o.props.centerPadding+" 0px"});var y=St(St({},g),v),x=o.props.touchMove,b={className:"slick-list",style:y,onClick:o.clickHandler,onMouseDown:x?o.swipeStart:null,onMouseMove:o.state.dragging&&x?o.swipeMove:null,onMouseUp:x?o.swipeEnd:null,onMouseLeave:o.state.dragging&&x?o.swipeEnd:null,onTouchStart:x?o.swipeStart:null,onTouchMove:o.state.dragging&&x?o.swipeMove:null,onTouchEnd:x?o.touchEnd:null,onTouchCancel:o.state.dragging&&x?o.swipeEnd:null,onKeyDown:o.props.accessibility?o.keyHandler:null},C={className:i,dir:"ltr",style:o.props.style};return o.props.unslick&&(b={className:"slick-list"},C={className:i}),Ss.default.createElement("div",C,o.props.unslick?"":h,Ss.default.createElement("div",bC({ref:o.listRefHandler},b),Ss.default.createElement(R1e.Track,bC({ref:o.trackRefHandler},u),o.props.children)),o.props.unslick?"":p,o.props.unslick?"":c)}),o.list=null,o.track=null,o.state=St(St({},T1e.default),{},{currentSlide:o.props.initialSlide,targetSlide:o.props.initialSlide?o.props.initialSlide:0,slideCount:Ss.default.Children.count(o.props.children)}),o.callbackTimers=[],o.clickable=!0,o.debouncedResize=null;var s=o.ssrInit();return o.state=St(St({},o.state),s),o}return F1e(n,[{key:"didPropsChange",value:function(o){for(var s=!1,i=0,a=Object.keys(this.props);i<a.length;i++){var u=a[i];if(!o.hasOwnProperty(u)){s=!0;break}if(!(mh(o[u])==="object"||typeof o[u]=="function"||isNaN(o[u]))&&o[u]!==this.props[u]){s=!0;break}}return s||Ss.default.Children.count(this.props.children)!==Ss.default.Children.count(o.children)}}]),n}(Ss.default.Component);var z1e=function(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()},U1e=z1e,V1e=U1e,H1e=function(t){var e=/[height|width]$/;return e.test(t)},UW=function(t){var e="",n=Object.keys(t);return n.forEach(function(r,o){var s=t[r];r=V1e(r),H1e(r)&&typeof s=="number"&&(s=s+"px"),s===!0?e+=r:s===!1?e+="not "+r:e+="("+r+": "+s+")",o<n.length-1&&(e+=" and ")}),e},G1e=function(t){var e="";return typeof t=="string"?t:t instanceof Array?(t.forEach(function(n,r){e+=UW(n),r<t.length-1&&(e+=", ")}),e):UW(t)},Y1e=G1e,IT,VW;function q1e(){if(VW)return IT;VW=1;function t(e){this.options=e,!e.deferSetup&&this.setup()}return t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},IT=t,IT}var TT,HW;function e9(){if(HW)return TT;HW=1;function t(r,o){var s=0,i=r.length,a;for(s;s<i&&(a=o(r[s],s),a!==!1);s++);}function e(r){return Object.prototype.toString.apply(r)==="[object Array]"}function n(r){return typeof r=="function"}return TT={isFunction:n,isArray:e,each:t},TT}var NT,GW;function K1e(){if(GW)return NT;GW=1;var t=q1e(),e=e9().each;function n(r,o){this.query=r,this.isUnconditional=o,this.handlers=[],this.mql=window.matchMedia(r);var s=this;this.listener=function(i){s.mql=i.currentTarget||i,s.assess()},this.mql.addListener(this.listener)}return n.prototype={constuctor:n,addHandler:function(r){var o=new t(r);this.handlers.push(o),this.matches()&&o.on()},removeHandler:function(r){var o=this.handlers;e(o,function(s,i){if(s.equals(r))return s.destroy(),!o.splice(i,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(r){r.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var r=this.matches()?"on":"off";e(this.handlers,function(o){o[r]()})}},NT=n,NT}var DT,YW;function X1e(){if(YW)return DT;YW=1;var t=K1e(),e=e9(),n=e.each,r=e.isFunction,o=e.isArray;function s(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return s.prototype={constructor:s,register:function(i,a,u){var l=this.queries,c=u&&this.browserIsIncapable;return l[i]||(l[i]=new t(i,c)),r(a)&&(a={match:a}),o(a)||(a=[a]),n(a,function(d){r(d)&&(d={match:d}),l[i].addHandler(d)}),this},unregister:function(i,a){var u=this.queries[i];return u&&(a?u.removeHandler(a):(u.clear(),delete this.queries[i])),this}},DT=s,DT}var RT,qW;function Q1e(){if(qW)return RT;qW=1;var t=X1e();return RT=new t,RT}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(D),n=jS,r=i(Y1e),o=i(bM),s=Ve;function i(T){return T&&T.__esModule?T:{default:T}}function a(T){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},a(T)}function u(){return u=Object.assign?Object.assign.bind():function(T){for(var N=1;N<arguments.length;N++){var O=arguments[N];for(var $ in O)Object.prototype.hasOwnProperty.call(O,$)&&(T[$]=O[$])}return T},u.apply(this,arguments)}function l(T,N){var O=Object.keys(T);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(T);N&&($=$.filter(function(A){return Object.getOwnPropertyDescriptor(T,A).enumerable})),O.push.apply(O,$)}return O}function c(T){for(var N=1;N<arguments.length;N++){var O=arguments[N]!=null?arguments[N]:{};N%2?l(Object(O),!0).forEach(function($){C(T,$,O[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(O)):l(Object(O)).forEach(function($){Object.defineProperty(T,$,Object.getOwnPropertyDescriptor(O,$))})}return T}function d(T,N){if(!(T instanceof N))throw new TypeError("Cannot call a class as a function")}function f(T,N){for(var O=0;O<N.length;O++){var $=N[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(T,S($.key),$)}}function h(T,N,O){return N&&f(T.prototype,N),O&&f(T,O),Object.defineProperty(T,"prototype",{writable:!1}),T}function p(T,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(N&&N.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),N&&m(T,N)}function m(T,N){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($,A){return $.__proto__=A,$},m(T,N)}function g(T){var N=x();return function(){var $=b(T),A;if(N){var P=b(this).constructor;A=Reflect.construct($,arguments,P)}else A=$.apply(this,arguments);return v(this,A)}}function v(T,N){if(N&&(a(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(T)}function y(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function x(){try{var T=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x=function(){return!!T})()}function b(T){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},b(T)}function C(T,N,O){return N=S(N),N in T?Object.defineProperty(T,N,{value:O,enumerable:!0,configurable:!0,writable:!0}):T[N]=O,T}function S(T){var N=E(T,"string");return a(N)=="symbol"?N:String(N)}function E(T,N){if(a(T)!="object"||!T)return T;var O=T[Symbol.toPrimitive];if(O!==void 0){var $=O.call(T,N||"default");if(a($)!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(T)}var I=(0,s.canUseDOM)()&&Q1e();t.default=function(T){p(O,T);var N=g(O);function O($){var A;return d(this,O),A=N.call(this,$),C(y(A),"innerSliderRefHandler",function(P){return A.innerSlider=P}),C(y(A),"slickPrev",function(){return A.innerSlider.slickPrev()}),C(y(A),"slickNext",function(){return A.innerSlider.slickNext()}),C(y(A),"slickGoTo",function(P){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return A.innerSlider.slickGoTo(P,L)}),C(y(A),"slickPause",function(){return A.innerSlider.pause("paused")}),C(y(A),"slickPlay",function(){return A.innerSlider.autoPlay("play")}),A.state={breakpoint:null},A._responsiveMediaHandlers=[],A}return h(O,[{key:"media",value:function(A,P){I.register(A,P),this._responsiveMediaHandlers.push({query:A,handler:P})}},{key:"componentDidMount",value:function(){var A=this;if(this.props.responsive){var P=this.props.responsive.map(function(W){return W.breakpoint});P.sort(function(W,z){return W-z}),P.forEach(function(W,z){var F;z===0?F=(0,r.default)({minWidth:0,maxWidth:W}):F=(0,r.default)({minWidth:P[z-1]+1,maxWidth:W}),(0,s.canUseDOM)()&&A.media(F,function(){A.setState({breakpoint:W})})});var L=(0,r.default)({minWidth:P.slice(-1)[0]});(0,s.canUseDOM)()&&this.media(L,function(){A.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(A){I.unregister(A.query,A.handler)})}},{key:"render",value:function(){var A=this,P,L;this.state.breakpoint?(L=this.props.responsive.filter(function(Q){return Q.breakpoint===A.state.breakpoint}),P=L[0].settings==="unslick"?"unslick":c(c(c({},o.default),this.props),L[0].settings)):P=c(c({},o.default),this.props),P.centerMode&&(P.slidesToScroll>1,P.slidesToScroll=1),P.fade&&(P.slidesToShow>1,P.slidesToScroll>1,P.slidesToShow=1,P.slidesToScroll=1);var W=e.default.Children.toArray(this.props.children);W=W.filter(function(Q){return typeof Q=="string"?!!Q.trim():!!Q}),P.variableWidth&&(P.rows>1||P.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),P.variableWidth=!1);for(var z=[],F=null,B=0;B<W.length;B+=P.rows*P.slidesPerRow){for(var H=[],X=B;X<B+P.rows*P.slidesPerRow;X+=P.slidesPerRow){for(var te=[],re=X;re<X+P.slidesPerRow&&(P.variableWidth&&W[re].props.style&&(F=W[re].props.style.width),!(re>=W.length));re+=1)te.push(e.default.cloneElement(W[re],{key:100*B+10*X+re,tabIndex:-1,style:{width:"".concat(100/P.slidesPerRow,"%"),display:"inline-block"}}));H.push(e.default.createElement("div",{key:10*B+X},te))}P.variableWidth?z.push(e.default.createElement("div",{key:B,style:{width:F}},H)):z.push(e.default.createElement("div",{key:B},H))}if(P==="unslick"){var ue="regular slider "+(this.props.className||"");return e.default.createElement("div",{className:ue},W)}else z.length<=P.slidesToShow&&!P.infinite&&(P.unslick=!0);return e.default.createElement(n.InnerSlider,u({style:this.props.style,ref:this.innerSliderRefHandler},(0,s.filterSettings)(P)),z)}}]),O}(e.default.Component)})(kq);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(kq);function n(r){return r&&r.__esModule?r:{default:r}}t.default=e.default})(wq);const J1e=Xd(wq),Z1e=[{id:1,name:"Product 1",image:"../../../public/assets/images/background/background2.jpg",price:"$10",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."},{id:2,name:"Product 2",image:"../../../public/assets/images/background/background2.jpg",price:"$15",description:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},{id:3,name:"Product 3",image:"../../../public/assets/images/background/background2.jpg",price:"$10",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."},{id:4,name:"Product 4",image:"../../../public/assets/images/background/background2.jpg",price:"$15",description:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},{id:5,name:"Product 5",image:"../../../public/assets/images/background/background2.jpg",price:"$10",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."},{id:6,name:"Product 6",image:"../../../public/assets/images/background/background2.jpg",price:"$15",description:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},{id:7,name:"Product 7",image:"../../../public/assets/images/background/background2.jpg",price:"$10",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."},{id:8,name:"Product 8",image:"../../../public/assets/images/background/background2.jpg",price:"$15",description:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},{id:9,name:"Product 9",image:"../../../public/assets/images/background/background2.jpg",price:"$10",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."},{id:10,name:"Product 10",image:"../../../public/assets/images/background/background2.jpg",price:"$15",description:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}],ebe=()=>{const t={dots:!0,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:1200,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0,dots:!0}},{breakpoint:992,settings:{slidesToShow:1,slidesToScroll:1,initialSlide:2}},{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}}]};return w.jsxs(Fs,{children:[w.jsx(Vt,{className:"justify-content-center text-center",style:{marginBottom:"20px"},children:w.jsx(rt,{xs:12,md:8,children:w.jsx("h2",{children:"Tài sản sắp được đấu giá"})})}),w.jsx(J1e,{...t,children:Z1e.map(e=>w.jsxs("div",{className:"product-card-container",style:{marginRight:"10px"},children:[w.jsxs(me.Title,{style:{marginBottom:"1rem",textAlign:"center"},children:[w.jsx("span",{className:"timer-title",children:"Thời gian đấu giá"}),w.jsx("span",{style:{fontWeight:"700"},children:"20:31:26 22/03/2024"})]}),w.jsxs(me,{className:"mb-3 card_product",children:[w.jsx(me.Img,{className:"product-image",variant:"top",src:e.image}),w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:e.name}),w.jsx(me.Text,{children:e.description}),w.jsxs("p",{className:"price",children:["Gía khởi điểm : ",w.jsx("span",{style:{fontWeight:"800",color:"black"},children:"1.680.000 VNĐ"})]}),w.jsx(vt,{variant:"danger",children:"View Details"})]})]})]},e.id))})]})};function li(){return w.jsx(Fs,{fluid:!0,className:"bg-dark text-white p-4 pt-5 pb-5",children:w.jsxs(Vt,{className:"justify-content-center",children:[w.jsxs(rt,{md:6,lg:4,children:[w.jsx("h5",{children:"Về chúng tôi"}),w.jsx("p",{children:"Auction là hệ thống ứng dụng đấu giá trực tuyến cung cấp dịch vụ đấu giá trực tuyến cho người dùng khắp cả nước sử dụng mọi lúc mọi nơi."})]}),w.jsxs(rt,{md:6,lg:2,children:[w.jsx("h5",{children:"Thông Tin"}),w.jsx("ul",{className:"list-unstyled",children:w.jsx("li",{children:w.jsx("a",{href:"https://docs.google.com/document/d/1wHiHLmHivLH5tboGqxfcfztanMaKYAEFcwhX5U0CNeI/edit?fbclid=IwAR3OaRPLB2kXR-c67JIGYy0sFnNy1XmpRuWHeuMAU4ufsUEjtotPbpGF37c",className:"text-white",children:"Quy tắc hệ thống"})})})]}),w.jsxs(rt,{md:6,lg:2,children:[w.jsx("h5",{children:"Tài khoản của tôi"}),w.jsxs("ul",{className:"list-unstyled",children:[w.jsx("li",{children:w.jsx("a",{href:"/login",className:"text-white",children:"Đăng Nhập"})}),w.jsx("li",{children:w.jsx("a",{href:"/shoppingcart",className:"text-white",children:"Giỏ Hàng"})}),w.jsx("li",{children:w.jsx("a",{href:"/profile",className:"text-white",children:"Tài Khoản Của Tôi"})})]})]}),w.jsxs(rt,{md:6,lg:4,children:[w.jsx("h5",{children:"Lưu ý"}),w.jsx("p",{children:"Mọi thông tin và hình ảnh trên website đều được sưu tầm trên Internet. Chúng tôi không sở hữu hay chịu trách nhiệm bất kỳ thông tin nào trên web này. Nếu làm ảnh hưởng đến cá nhân hay tổ chức nào, khi được yêu cầu, chúng tôi sẽ xem xét và gỡ bỏ ngay lập tức."})]})]})})}function gh(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ot(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function l0(t){if(!gh(t)&&typeof t!="number")return!1;const e=ot(t);return!isNaN(Number(e))}const tbe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nbe=(t,e,n)=>{let r;const o=tbe[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function OT(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const rbe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},obe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sbe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ibe={date:OT({formats:rbe,defaultWidth:"full"}),time:OT({formats:obe,defaultWidth:"full"}),dateTime:OT({formats:sbe,defaultWidth:"full"})},abe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ube=(t,e,n,r)=>abe[t];function Tv(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return o[s]}}const lbe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cbe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dbe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fbe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hbe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pbe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mbe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},gbe={ordinalNumber:mbe,era:Tv({values:lbe,defaultWidth:"wide"}),quarter:Tv({values:cbe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Tv({values:dbe,defaultWidth:"wide"}),day:Tv({values:fbe,defaultWidth:"wide"}),dayPeriod:Tv({values:hbe,defaultWidth:"wide",formattingValues:pbe,defaultFormattingWidth:"wide"})};function Nv(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(o);if(!s)return null;const i=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?ybe(a,d=>d.test(i)):vbe(a,d=>d.test(i));let l;l=t.valueCallback?t.valueCallback(u):u,l=n.valueCallback?n.valueCallback(l):l;const c=e.slice(i.length);return{value:l,rest:c}}}function vbe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ybe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function xbe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(o.length);return{value:i,rest:a}}}const bbe=/^(\d+)(th|st|nd|rd)?/i,wbe=/\d+/i,kbe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Cbe={any:[/^b/i,/^(a|c)/i]},Sbe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ebe={any:[/1/i,/2/i,/3/i,/4/i]},_be={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ibe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tbe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nbe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Dbe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Rbe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Obe={ordinalNumber:xbe({matchPattern:bbe,parsePattern:wbe,valueCallback:t=>parseInt(t,10)}),era:Nv({matchPatterns:kbe,defaultMatchWidth:"wide",parsePatterns:Cbe,defaultParseWidth:"any"}),quarter:Nv({matchPatterns:Sbe,defaultMatchWidth:"wide",parsePatterns:Ebe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Nv({matchPatterns:_be,defaultMatchWidth:"wide",parsePatterns:Ibe,defaultParseWidth:"any"}),day:Nv({matchPatterns:Tbe,defaultMatchWidth:"wide",parsePatterns:Nbe,defaultParseWidth:"any"}),dayPeriod:Nv({matchPatterns:Dbe,defaultMatchWidth:"any",parsePatterns:Rbe,defaultParseWidth:"any"})},t9={code:"en-US",formatDistance:nbe,formatLong:ibe,formatRelative:ube,localize:gbe,match:Obe,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Abe={};function Hh(){return Abe}const n9=6048e5,$be=864e5,VS=6e4,HS=36e5,Mbe=1e3;function ju(t){const e=ot(t);return e.setHours(0,0,0,0),e}function kC(t){const e=ot(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function c0(t,e){const n=ju(t),r=ju(e),o=+n-kC(n),s=+r-kC(r);return Math.round((o-s)/$be)}function Mn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function kM(t){const e=ot(t),n=Mn(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Pbe(t){const e=ot(t);return c0(e,kM(e))+1}function oc(t,e){var a,u,l,c;const n=Hh(),r=(e==null?void 0:e.weekStartsOn)??((u=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((c=(l=n.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,o=ot(t),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function Xm(t){return oc(t,{weekStartsOn:1})}function r9(t){const e=ot(t),n=e.getFullYear(),r=Mn(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=Xm(r),s=Mn(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=Xm(s);return e.getTime()>=o.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function Fbe(t){const e=r9(t),n=Mn(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Xm(n)}function CM(t){const e=ot(t),n=+Xm(e)-+Fbe(e);return Math.round(n/n9)+1}function SM(t,e){var c,d,f,h;const n=ot(t),r=n.getFullYear(),o=Hh(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??o.firstWeekContainsDate??((h=(f=o.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=Mn(t,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const a=oc(i,e),u=Mn(t,0);u.setFullYear(r,0,s),u.setHours(0,0,0,0);const l=oc(u,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function Lbe(t,e){var a,u,l,c;const n=Hh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((c=(l=n.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??1,o=SM(t,e),s=Mn(t,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),oc(s,e)}function o9(t,e){const n=ot(t),r=+oc(n,e)-+Lbe(n,e);return Math.round(r/n9)+1}function $n(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Mc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return $n(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):$n(n+1,2)},d(t,e){return $n(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return $n(t.getHours()%12||12,e.length)},H(t,e){return $n(t.getHours(),e.length)},m(t,e){return $n(t.getMinutes(),e.length)},s(t,e){return $n(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return $n(o,e.length)}},wp={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},KW={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Mc.y(t,e)},Y:function(t,e,n,r){const o=SM(t,r),s=o>0?o:1-o;if(e==="YY"){const i=s%100;return $n(i,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):$n(s,e.length)},R:function(t,e){const n=r9(t);return $n(n,e.length)},u:function(t,e){const n=t.getFullYear();return $n(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return $n(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return $n(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Mc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return $n(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=o9(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):$n(o,e.length)},I:function(t,e,n){const r=CM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):$n(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Mc.d(t,e)},D:function(t,e,n){const r=Pbe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):$n(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return $n(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return $n(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return $n(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=wp.noon:r===0?o=wp.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=wp.evening:r>=12?o=wp.afternoon:r>=4?o=wp.morning:o=wp.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Mc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Mc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):$n(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):$n(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Mc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Mc.s(t,e)},S:function(t,e){return Mc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return QW(r);case"XXXX":case"XX":return If(r);case"XXXXX":case"XXX":default:return If(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return QW(r);case"xxxx":case"xx":return If(r);case"xxxxx":case"xxx":default:return If(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+XW(r,":");case"OOOO":default:return"GMT"+If(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+XW(r,":");case"zzzz":default:return"GMT"+If(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return $n(r,e.length)},T:function(t,e,n){const r=t.getTime();return $n(r,e.length)}};function XW(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+e+$n(s,2)}function QW(t,e){return t%60===0?(t>0?"-":"+")+$n(Math.abs(t)/60,2):If(t,e)}function If(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=$n(Math.trunc(r/60),2),s=$n(r%60,2);return n+o+e+s}const JW=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},s9=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Bbe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return JW(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",JW(r,e)).replace("{{time}}",s9(o,e))},CC={p:s9,P:Bbe},jbe=/^D+$/,Wbe=/^Y+$/,zbe=["D","DD","YY","YYYY"];function i9(t){return jbe.test(t)}function a9(t){return Wbe.test(t)}function _R(t,e,n){const r=Ube(t,e,n);if(console.warn(r),zbe.includes(t))throw new RangeError(r)}function Ube(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Vbe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hbe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gbe=/^'([^]*?)'?$/,Ybe=/''/g,qbe=/[a-zA-Z]/;function Qm(t,e,n){var c,d,f,h,p,m,g,v;const r=Hh(),o=(n==null?void 0:n.locale)??r.locale??t9,s=(n==null?void 0:n.firstWeekContainsDate)??((d=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((v=(g=r.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??0,a=ot(t);if(!l0(a))throw new RangeError("Invalid time value");let u=e.match(Hbe).map(y=>{const x=y[0];if(x==="p"||x==="P"){const b=CC[x];return b(y,o.formatLong)}return y}).join("").match(Vbe).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const x=y[0];if(x==="'")return{isToken:!1,value:Kbe(y)};if(KW[x])return{isToken:!0,value:y};if(x.match(qbe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:y}});o.localize.preprocessor&&(u=o.localize.preprocessor(a,u));const l={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return u.map(y=>{if(!y.isToken)return y.value;const x=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&a9(x)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&i9(x))&&_R(x,e,String(t));const b=KW[x[0]];return b(a,x,o.localize,l)}).join("")}function Kbe(t){const e=t.match(Gbe);return e?e[1].replace(Ybe,"'"):t}function u9(t,e){const n=+ot(t);return Mn(t,n+e)}function IR(t,e){return u9(t,e*VS)}function Xbe(t,e){return u9(t,e*HS)}function nf(t,e){const n=ot(t);return isNaN(e)?Mn(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function SC(t,e){const n=e*7;return nf(t,n)}function Za(t,e){const n=ot(t);if(isNaN(e))return Mn(t,NaN);if(!e)return n;const r=n.getDate(),o=Mn(t,n.getTime());o.setMonth(n.getMonth()+e+1,0);const s=o.getDate();return r>=s?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}function l9(t,e){const n=e*3;return Za(t,n)}function Jm(t,e){return Za(t,e*12)}function Qbe(t,e){return nf(t,-e)}function ZW(t,e){return SC(t,-e)}function Zm(t,e){return Za(t,-e)}function Jbe(t,e){return l9(t,-e)}function d0(t,e){return Jm(t,-e)}function ez(t){return ot(t).getSeconds()}function Wu(t){return ot(t).getMinutes()}function zu(t){return ot(t).getHours()}function Zbe(t){return ot(t).getDay()}function tz(t){return ot(t).getDate()}function ls(t){return ot(t).getMonth()}function Zp(t){const e=ot(t);return Math.trunc(e.getMonth()/3)+1}function Kt(t){return ot(t).getFullYear()}function TR(t){return ot(t).getTime()}function ewe(t,e){const n=ot(t);return n.setSeconds(e),n}function dk(t,e){const n=ot(t);return n.setMinutes(e),n}function fk(t,e){const n=ot(t);return n.setHours(e),n}function twe(t){const e=ot(t),n=e.getFullYear(),r=e.getMonth(),o=Mn(t,0);return o.setFullYear(n,r+1,0),o.setHours(0,0,0,0),o.getDate()}function _s(t,e){const n=ot(t),r=n.getFullYear(),o=n.getDate(),s=Mn(t,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const i=twe(s);return n.setMonth(e,Math.min(o,i)),n}function kp(t,e){const n=ot(t),r=Math.trunc(n.getMonth()/3)+1,o=e-r;return _s(n,n.getMonth()+o*3)}function $l(t,e){const n=ot(t);return isNaN(+n)?Mn(t,NaN):(n.setFullYear(e),n)}function nz(t){let e;return t.forEach(n=>{const r=ot(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function rz(t){let e;return t.forEach(function(n){const r=ot(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function EC(t,e){const n=ot(t),r=ot(e),o=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return o*12+s}function _C(t,e){const n=ot(t),r=ot(e);return n.getFullYear()-r.getFullYear()}function c9(t){const e=ot(t);return e.setDate(1),e.setHours(0,0,0,0),e}function NR(t){const e=ot(t),n=e.getMonth(),r=n-n%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function DR(t){const e=ot(t);return e.setHours(23,59,59,999),e}function nwe(t,e){var a,u,l,c;const n=Hh(),r=(e==null?void 0:e.weekStartsOn)??((u=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((c=(l=n.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,o=ot(t),s=o.getDay(),i=(s<r?-7:0)+6-(s-r);return o.setDate(o.getDate()+i),o.setHours(23,59,59,999),o}function rwe(t){const e=ot(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function owe(t){const e=ot(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function swe(t,e){const n=ot(t),r=ot(e);return+n==+r}function iwe(t,e){const n=ju(t),r=ju(e);return+n==+r}function awe(t,e){const n=ot(t),r=ot(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function uwe(t,e){const n=ot(t),r=ot(e);return n.getFullYear()===r.getFullYear()}function lwe(t,e){const n=NR(t),r=NR(e);return+n==+r}function Pd(t,e){const n=ot(t),r=ot(e);return n.getTime()>r.getTime()}function vh(t,e){const n=ot(t),r=ot(e);return+n<+r}function f0(t,e){const n=+ot(t),[r,o]=[+ot(e.start),+ot(e.end)].sort((s,i)=>s-i);return n>=r&&n<=o}function cwe(){return Object.assign({},Hh())}function dwe(t,e){const n=e instanceof Date?Mn(e,0):new e(0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}const fwe=10;class d9{constructor(){Qe(this,"subPriority",0)}validate(e,n){return!0}}class hwe extends d9{constructor(e,n,r,o,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=o,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class pwe extends d9{constructor(){super(...arguments);Qe(this,"priority",fwe);Qe(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:Mn(n,dwe(n,Date))}}class Tn{run(e,n,r,o){const s=this.parse(e,n,r,o);return s?{setter:new hwe(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class mwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",140);Qe(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,o){switch(r){case"G":case"GG":case"GGG":return o.era(n,{width:"abbreviated"})||o.era(n,{width:"narrow"});case"GGGGG":return o.era(n,{width:"narrow"});case"GGGG":default:return o.era(n,{width:"wide"})||o.era(n,{width:"abbreviated"})||o.era(n,{width:"narrow"})}}set(n,r,o){return r.era=o,n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}const Gr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Iu={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Yr(t,e){return t&&{value:e(t.value),rest:t.rest}}function _r(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Tu(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,o=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:r*(o*HS+s*VS+i*Mbe),rest:e.slice(n[0].length)}}function f9(t){return _r(Gr.anyDigitsSigned,t)}function Fr(t,e){switch(t){case 1:return _r(Gr.singleDigit,e);case 2:return _r(Gr.twoDigits,e);case 3:return _r(Gr.threeDigits,e);case 4:return _r(Gr.fourDigits,e);default:return _r(new RegExp("^\\d{1,"+t+"}"),e)}}function IC(t,e){switch(t){case 1:return _r(Gr.singleDigitSigned,e);case 2:return _r(Gr.twoDigitsSigned,e);case 3:return _r(Gr.threeDigitsSigned,e);case 4:return _r(Gr.fourDigitsSigned,e);default:return _r(new RegExp("^-?\\d{1,"+t+"}"),e)}}function EM(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function h9(t,e){const n=e>0,r=n?e:1-e;let o;if(r<=50)o=t||100;else{const s=r+50,i=Math.trunc(s/100)*100,a=t>=s%100;o=t+i-(a?100:0)}return n?o:1-o}function p9(t){return t%400===0||t%4===0&&t%100!==0}class gwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",130);Qe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,o){const s=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return Yr(Fr(4,n),s);case"yo":return Yr(o.ordinalNumber(n,{unit:"year"}),s);default:return Yr(Fr(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,o){const s=n.getFullYear();if(o.isTwoDigitYear){const a=h9(o.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const i=!("era"in r)||r.era===1?o.year:1-o.year;return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class vwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",130);Qe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,o){const s=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Yr(Fr(4,n),s);case"Yo":return Yr(o.ordinalNumber(n,{unit:"year"}),s);default:return Yr(Fr(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,o,s){const i=SM(n,s);if(o.isTwoDigitYear){const u=h9(o.year,i);return n.setFullYear(u,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),oc(n,s)}const a=!("era"in r)||r.era===1?o.year:1-o.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),oc(n,s)}}class ywe extends Tn{constructor(){super(...arguments);Qe(this,"priority",130);Qe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return IC(r==="R"?4:r.length,n)}set(n,r,o){const s=Mn(n,0);return s.setFullYear(o,0,4),s.setHours(0,0,0,0),Xm(s)}}class xwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",130);Qe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return IC(r==="u"?4:r.length,n)}set(n,r,o){return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class bwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",120);Qe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,o){switch(r){case"Q":case"QQ":return Fr(r.length,n);case"Qo":return o.ordinalNumber(n,{unit:"quarter"});case"QQQ":return o.quarter(n,{width:"abbreviated",context:"formatting"})||o.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(n,{width:"wide",context:"formatting"})||o.quarter(n,{width:"abbreviated",context:"formatting"})||o.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,o){return n.setMonth((o-1)*3,1),n.setHours(0,0,0,0),n}}class wwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",120);Qe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,o){switch(r){case"q":case"qq":return Fr(r.length,n);case"qo":return o.ordinalNumber(n,{unit:"quarter"});case"qqq":return o.quarter(n,{width:"abbreviated",context:"standalone"})||o.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(n,{width:"wide",context:"standalone"})||o.quarter(n,{width:"abbreviated",context:"standalone"})||o.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,o){return n.setMonth((o-1)*3,1),n.setHours(0,0,0,0),n}}class kwe extends Tn{constructor(){super(...arguments);Qe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Qe(this,"priority",110)}parse(n,r,o){const s=i=>i-1;switch(r){case"M":return Yr(_r(Gr.month,n),s);case"MM":return Yr(Fr(2,n),s);case"Mo":return Yr(o.ordinalNumber(n,{unit:"month"}),s);case"MMM":return o.month(n,{width:"abbreviated",context:"formatting"})||o.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(n,{width:"wide",context:"formatting"})||o.month(n,{width:"abbreviated",context:"formatting"})||o.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,o){return n.setMonth(o,1),n.setHours(0,0,0,0),n}}class Cwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",110);Qe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,o){const s=i=>i-1;switch(r){case"L":return Yr(_r(Gr.month,n),s);case"LL":return Yr(Fr(2,n),s);case"Lo":return Yr(o.ordinalNumber(n,{unit:"month"}),s);case"LLL":return o.month(n,{width:"abbreviated",context:"standalone"})||o.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(n,{width:"wide",context:"standalone"})||o.month(n,{width:"abbreviated",context:"standalone"})||o.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,o){return n.setMonth(o,1),n.setHours(0,0,0,0),n}}function Swe(t,e,n){const r=ot(t),o=o9(r,n)-e;return r.setDate(r.getDate()-o*7),r}class Ewe extends Tn{constructor(){super(...arguments);Qe(this,"priority",100);Qe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,o){switch(r){case"w":return _r(Gr.week,n);case"wo":return o.ordinalNumber(n,{unit:"week"});default:return Fr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,o,s){return oc(Swe(n,o,s),s)}}function _we(t,e){const n=ot(t),r=CM(n)-e;return n.setDate(n.getDate()-r*7),n}class Iwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",100);Qe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,o){switch(r){case"I":return _r(Gr.week,n);case"Io":return o.ordinalNumber(n,{unit:"week"});default:return Fr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,o){return Xm(_we(n,o))}}const Twe=[31,28,31,30,31,30,31,31,30,31,30,31],Nwe=[31,29,31,30,31,30,31,31,30,31,30,31];class Dwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",90);Qe(this,"subPriority",1);Qe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,o){switch(r){case"d":return _r(Gr.date,n);case"do":return o.ordinalNumber(n,{unit:"date"});default:return Fr(r.length,n)}}validate(n,r){const o=n.getFullYear(),s=p9(o),i=n.getMonth();return s?r>=1&&r<=Nwe[i]:r>=1&&r<=Twe[i]}set(n,r,o){return n.setDate(o),n.setHours(0,0,0,0),n}}class Rwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",90);Qe(this,"subpriority",1);Qe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,o){switch(r){case"D":case"DD":return _r(Gr.dayOfYear,n);case"Do":return o.ordinalNumber(n,{unit:"date"});default:return Fr(r.length,n)}}validate(n,r){const o=n.getFullYear();return p9(o)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,o){return n.setMonth(0,o),n.setHours(0,0,0,0),n}}function _M(t,e,n){var d,f,h,p;const r=Hh(),o=(n==null?void 0:n.weekStartsOn)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,s=ot(t),i=s.getDay(),u=(e%7+7)%7,l=7-o,c=e<0||e>6?e-(i+l)%7:(u+l)%7-(i+l)%7;return nf(s,c)}class Owe extends Tn{constructor(){super(...arguments);Qe(this,"priority",90);Qe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,o){switch(r){case"E":case"EE":case"EEE":return o.day(n,{width:"abbreviated",context:"formatting"})||o.day(n,{width:"short",context:"formatting"})||o.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(n,{width:"short",context:"formatting"})||o.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(n,{width:"wide",context:"formatting"})||o.day(n,{width:"abbreviated",context:"formatting"})||o.day(n,{width:"short",context:"formatting"})||o.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,o,s){return n=_M(n,o,s),n.setHours(0,0,0,0),n}}class Awe extends Tn{constructor(){super(...arguments);Qe(this,"priority",90);Qe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,o,s){const i=a=>{const u=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+u};switch(r){case"e":case"ee":return Yr(Fr(r.length,n),i);case"eo":return Yr(o.ordinalNumber(n,{unit:"day"}),i);case"eee":return o.day(n,{width:"abbreviated",context:"formatting"})||o.day(n,{width:"short",context:"formatting"})||o.day(n,{width:"narrow",context:"formatting"});case"eeeee":return o.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(n,{width:"short",context:"formatting"})||o.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(n,{width:"wide",context:"formatting"})||o.day(n,{width:"abbreviated",context:"formatting"})||o.day(n,{width:"short",context:"formatting"})||o.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,o,s){return n=_M(n,o,s),n.setHours(0,0,0,0),n}}class $we extends Tn{constructor(){super(...arguments);Qe(this,"priority",90);Qe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,o,s){const i=a=>{const u=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+u};switch(r){case"c":case"cc":return Yr(Fr(r.length,n),i);case"co":return Yr(o.ordinalNumber(n,{unit:"day"}),i);case"ccc":return o.day(n,{width:"abbreviated",context:"standalone"})||o.day(n,{width:"short",context:"standalone"})||o.day(n,{width:"narrow",context:"standalone"});case"ccccc":return o.day(n,{width:"narrow",context:"standalone"});case"cccccc":return o.day(n,{width:"short",context:"standalone"})||o.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(n,{width:"wide",context:"standalone"})||o.day(n,{width:"abbreviated",context:"standalone"})||o.day(n,{width:"short",context:"standalone"})||o.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,o,s){return n=_M(n,o,s),n.setHours(0,0,0,0),n}}function Mwe(t){let n=ot(t).getDay();return n===0&&(n=7),n}function Pwe(t,e){const n=ot(t),r=Mwe(n),o=e-r;return nf(n,o)}class Fwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",90);Qe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,o){const s=i=>i===0?7:i;switch(r){case"i":case"ii":return Fr(r.length,n);case"io":return o.ordinalNumber(n,{unit:"day"});case"iii":return Yr(o.day(n,{width:"abbreviated",context:"formatting"})||o.day(n,{width:"short",context:"formatting"})||o.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Yr(o.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Yr(o.day(n,{width:"short",context:"formatting"})||o.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Yr(o.day(n,{width:"wide",context:"formatting"})||o.day(n,{width:"abbreviated",context:"formatting"})||o.day(n,{width:"short",context:"formatting"})||o.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,o){return n=Pwe(n,o),n.setHours(0,0,0,0),n}}class Lwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",80);Qe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,o){switch(r){case"a":case"aa":case"aaa":return o.dayPeriod(n,{width:"abbreviated",context:"formatting"})||o.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(n,{width:"wide",context:"formatting"})||o.dayPeriod(n,{width:"abbreviated",context:"formatting"})||o.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,o){return n.setHours(EM(o),0,0,0),n}}class Bwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",80);Qe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,o){switch(r){case"b":case"bb":case"bbb":return o.dayPeriod(n,{width:"abbreviated",context:"formatting"})||o.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(n,{width:"wide",context:"formatting"})||o.dayPeriod(n,{width:"abbreviated",context:"formatting"})||o.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,o){return n.setHours(EM(o),0,0,0),n}}class jwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",80);Qe(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,o){switch(r){case"B":case"BB":case"BBB":return o.dayPeriod(n,{width:"abbreviated",context:"formatting"})||o.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(n,{width:"wide",context:"formatting"})||o.dayPeriod(n,{width:"abbreviated",context:"formatting"})||o.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,o){return n.setHours(EM(o),0,0,0),n}}class Wwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",70);Qe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,o){switch(r){case"h":return _r(Gr.hour12h,n);case"ho":return o.ordinalNumber(n,{unit:"hour"});default:return Fr(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,o){const s=n.getHours()>=12;return s&&o<12?n.setHours(o+12,0,0,0):!s&&o===12?n.setHours(0,0,0,0):n.setHours(o,0,0,0),n}}class zwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",70);Qe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,o){switch(r){case"H":return _r(Gr.hour23h,n);case"Ho":return o.ordinalNumber(n,{unit:"hour"});default:return Fr(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,o){return n.setHours(o,0,0,0),n}}class Uwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",70);Qe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,o){switch(r){case"K":return _r(Gr.hour11h,n);case"Ko":return o.ordinalNumber(n,{unit:"hour"});default:return Fr(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,o){return n.getHours()>=12&&o<12?n.setHours(o+12,0,0,0):n.setHours(o,0,0,0),n}}class Vwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",70);Qe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,o){switch(r){case"k":return _r(Gr.hour24h,n);case"ko":return o.ordinalNumber(n,{unit:"hour"});default:return Fr(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,o){const s=o<=24?o%24:o;return n.setHours(s,0,0,0),n}}class Hwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",60);Qe(this,"incompatibleTokens",["t","T"])}parse(n,r,o){switch(r){case"m":return _r(Gr.minute,n);case"mo":return o.ordinalNumber(n,{unit:"minute"});default:return Fr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,o){return n.setMinutes(o,0,0),n}}class Gwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",50);Qe(this,"incompatibleTokens",["t","T"])}parse(n,r,o){switch(r){case"s":return _r(Gr.second,n);case"so":return o.ordinalNumber(n,{unit:"second"});default:return Fr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,o){return n.setSeconds(o,0),n}}class Ywe extends Tn{constructor(){super(...arguments);Qe(this,"priority",30);Qe(this,"incompatibleTokens",["t","T"])}parse(n,r){const o=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Yr(Fr(r.length,n),o)}set(n,r,o){return n.setMilliseconds(o),n}}class qwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",10);Qe(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Tu(Iu.basicOptionalMinutes,n);case"XX":return Tu(Iu.basic,n);case"XXXX":return Tu(Iu.basicOptionalSeconds,n);case"XXXXX":return Tu(Iu.extendedOptionalSeconds,n);case"XXX":default:return Tu(Iu.extended,n)}}set(n,r,o){return r.timestampIsSet?n:Mn(n,n.getTime()-kC(n)-o)}}class Kwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",10);Qe(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Tu(Iu.basicOptionalMinutes,n);case"xx":return Tu(Iu.basic,n);case"xxxx":return Tu(Iu.basicOptionalSeconds,n);case"xxxxx":return Tu(Iu.extendedOptionalSeconds,n);case"xxx":default:return Tu(Iu.extended,n)}}set(n,r,o){return r.timestampIsSet?n:Mn(n,n.getTime()-kC(n)-o)}}class Xwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",40);Qe(this,"incompatibleTokens","*")}parse(n){return f9(n)}set(n,r,o){return[Mn(n,o*1e3),{timestampIsSet:!0}]}}class Qwe extends Tn{constructor(){super(...arguments);Qe(this,"priority",20);Qe(this,"incompatibleTokens","*")}parse(n){return f9(n)}set(n,r,o){return[Mn(n,o),{timestampIsSet:!0}]}}const Jwe={G:new mwe,y:new gwe,Y:new vwe,R:new ywe,u:new xwe,Q:new bwe,q:new wwe,M:new kwe,L:new Cwe,w:new Ewe,I:new Iwe,d:new Dwe,D:new Rwe,E:new Owe,e:new Awe,c:new $we,i:new Fwe,a:new Lwe,b:new Bwe,B:new jwe,h:new Wwe,H:new zwe,K:new Uwe,k:new Vwe,m:new Hwe,s:new Gwe,S:new Ywe,X:new qwe,x:new Kwe,t:new Xwe,T:new Qwe},Zwe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eke=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tke=/^'([^]*?)'?$/,nke=/''/g,rke=/\S/,oke=/[a-zA-Z]/;function AT(t,e,n,r){var m,g,v,y,x,b,C,S;const o=cwe(),s=(r==null?void 0:r.locale)??o.locale??t9,i=(r==null?void 0:r.firstWeekContainsDate)??((g=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??o.firstWeekContainsDate??((y=(v=o.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,a=(r==null?void 0:r.weekStartsOn)??((b=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??o.weekStartsOn??((S=(C=o.locale)==null?void 0:C.options)==null?void 0:S.weekStartsOn)??0;if(e==="")return t===""?ot(n):Mn(n,NaN);const u={firstWeekContainsDate:i,weekStartsOn:a,locale:s},l=[new pwe],c=e.match(eke).map(E=>{const I=E[0];if(I in CC){const T=CC[I];return T(E,s.formatLong)}return E}).join("").match(Zwe),d=[];for(let E of c){!(r!=null&&r.useAdditionalWeekYearTokens)&&a9(E)&&_R(E,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&i9(E)&&_R(E,e,t);const I=E[0],T=Jwe[I];if(T){const{incompatibleTokens:N}=T;if(Array.isArray(N)){const $=d.find(A=>N.includes(A.token)||A.token===I);if($)throw new RangeError(`The format string mustn't contain \`${$.fullToken}\` and \`${E}\` at the same time`)}else if(T.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${E}\` and any other token at the same time`);d.push({token:I,fullToken:E});const O=T.run(t,E,s.match,u);if(!O)return Mn(n,NaN);l.push(O.setter),t=O.rest}else{if(I.match(oke))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");if(E==="''"?E="'":I==="'"&&(E=ske(E)),t.indexOf(E)===0)t=t.slice(E.length);else return Mn(n,NaN)}}if(t.length>0&&rke.test(t))return Mn(n,NaN);const f=l.map(E=>E.priority).sort((E,I)=>I-E).filter((E,I,T)=>T.indexOf(E)===I).map(E=>l.filter(I=>I.priority===E).sort((I,T)=>T.subPriority-I.subPriority)).map(E=>E[0]);let h=ot(n);if(isNaN(h.getTime()))return Mn(n,NaN);const p={};for(const E of f){if(!E.validate(h,u))return Mn(n,NaN);const I=E.set(h,p,u);Array.isArray(I)?(h=I[0],Object.assign(p,I[1])):h=I}return Mn(n,h)}function ske(t){return t.match(tke)[1].replace(nke,"'")}function ike(t,e){const n=(e==null?void 0:e.additionalDigits)??2,r=cke(t);let o;if(r.date){const u=dke(r.date,n);o=fke(u.restDateString,u.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);const s=o.getTime();let i=0,a;if(r.time&&(i=hke(r.time),isNaN(i)))return new Date(NaN);if(r.timezone){if(a=pke(r.timezone),isNaN(a))return new Date(NaN)}else{const u=new Date(s+i),l=new Date(0);return l.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),l.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),l}return new Date(s+i+a)}const Zb={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ake=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,uke=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,lke=/^([+-])(\d{2})(?::?(\d{2}))?$/;function cke(t){const e={},n=t.split(Zb.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Zb.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Zb.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const o=Zb.timezone.exec(r);o?(e.time=r.replace(o[1],""),e.timezone=o[1]):e.time=r}return e}function dke(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const o=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?o:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function fke(t,e){if(e===null)return new Date(NaN);const n=t.match(ake);if(!n)return new Date(NaN);const r=!!n[4],o=Dv(n[1]),s=Dv(n[2])-1,i=Dv(n[3]),a=Dv(n[4]),u=Dv(n[5])-1;if(r)return xke(e,a,u)?mke(e,a,u):new Date(NaN);{const l=new Date(0);return!vke(e,s,i)||!yke(e,o)?new Date(NaN):(l.setUTCFullYear(e,s,Math.max(o,i)),l)}}function Dv(t){return t?parseInt(t):1}function hke(t){const e=t.match(uke);if(!e)return NaN;const n=$T(e[1]),r=$T(e[2]),o=$T(e[3]);return bke(n,r,o)?n*HS+r*VS+o*1e3:NaN}function $T(t){return t&&parseFloat(t.replace(",","."))||0}function pke(t){if(t==="Z")return 0;const e=t.match(lke);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;return wke(r,o)?n*(r*HS+o*VS):NaN}function mke(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const o=r.getUTCDay()||7,s=(e-1)*7+n+1-o;return r.setUTCDate(r.getUTCDate()+s),r}const gke=[31,null,31,30,31,30,31,31,30,31,30,31];function m9(t){return t%400===0||t%4===0&&t%100!==0}function vke(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(gke[e]||(m9(t)?29:28))}function yke(t,e){return e>=1&&e<=(m9(t)?366:365)}function xke(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function bke(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function wke(t,e){return e>=0&&e<=59}function kke(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,RR(t,e)}function RR(t,e){return RR=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},RR(t,e)}function Cke(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function oz(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ske(t,e,n){return t===e?!0:t.correspondingElement?t.correspondingElement.classList.contains(n):t.classList.contains(n)}function Eke(t,e,n){if(t===e)return!0;for(;t.parentNode||t.host;){if(t.parentNode&&Ske(t,e,n))return!0;t=t.parentNode||t.host}return t}function _ke(t){return document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY}var Ike=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,n),window.removeEventListener("testPassiveEventSupport",r,n),e}};function Tke(t){return t===void 0&&(t=0),function(){return++t}}var Nke=Tke(),OR,ew={},MT={},Dke=["touchstart","touchmove"],Rke="ignore-react-onclickoutside";function sz(t,e){var n={},r=Dke.indexOf(e)!==-1;return r&&OR&&(n.passive=!t.props.preventDefault),n}function GS(t,e){var n,r,o=t.displayName||t.name||"Component";return r=n=function(s){kke(i,s);function i(u){var l;return l=s.call(this,u)||this,l.__outsideClickHandler=function(c){if(typeof l.__clickOutsideHandlerProp=="function"){l.__clickOutsideHandlerProp(c);return}var d=l.getInstance();if(typeof d.props.handleClickOutside=="function"){d.props.handleClickOutside(c);return}if(typeof d.handleClickOutside=="function"){d.handleClickOutside(c);return}throw new Error("WrappedComponent: "+o+" lacks a handleClickOutside(event) function for processing outside click events.")},l.__getComponentNode=function(){var c=l.getInstance();return e&&typeof e.setClickOutsideRef=="function"?e.setClickOutsideRef()(c):typeof c.setClickOutsideRef=="function"?c.setClickOutsideRef():_g.findDOMNode(c)},l.enableOnClickOutside=function(){if(!(typeof document>"u"||MT[l._uid])){typeof OR>"u"&&(OR=Ike()),MT[l._uid]=!0;var c=l.props.eventTypes;c.forEach||(c=[c]),ew[l._uid]=function(d){if(l.componentNode!==null&&(l.props.preventDefault&&d.preventDefault(),l.props.stopPropagation&&d.stopPropagation(),!(l.props.excludeScrollbar&&_ke(d)))){var f=d.composed&&d.composedPath&&d.composedPath().shift()||d.target;Eke(f,l.componentNode,l.props.outsideClickIgnoreClass)===document&&l.__outsideClickHandler(d)}},c.forEach(function(d){document.addEventListener(d,ew[l._uid],sz(oz(l),d))})}},l.disableOnClickOutside=function(){delete MT[l._uid];var c=ew[l._uid];if(c&&typeof document<"u"){var d=l.props.eventTypes;d.forEach||(d=[d]),d.forEach(function(f){return document.removeEventListener(f,c,sz(oz(l),f))}),delete ew[l._uid]}},l.getRef=function(c){return l.instanceRef=c},l._uid=Nke(),l}var a=i.prototype;return a.getInstance=function(){if(t.prototype&&!t.prototype.isReactComponent)return this;var l=this.instanceRef;return l.getInstance?l.getInstance():l},a.componentDidMount=function(){if(!(typeof document>"u"||!document.createElement)){var l=this.getInstance();if(e&&typeof e.handleClickOutside=="function"&&(this.__clickOutsideHandlerProp=e.handleClickOutside(l),typeof this.__clickOutsideHandlerProp!="function"))throw new Error("WrappedComponent: "+o+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside()}},a.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},a.componentWillUnmount=function(){this.disableOnClickOutside()},a.render=function(){var l=this.props;l.excludeScrollbar;var c=Cke(l,["excludeScrollbar"]);return t.prototype&&t.prototype.isReactComponent?c.ref=this.getRef:c.wrappedRef=this.getRef,c.disableOnClickOutside=this.disableOnClickOutside,c.enableOnClickOutside=this.enableOnClickOutside,D.createElement(t,c)},i}(D.Component),n.displayName="OnClickOutside("+o+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:e&&e.excludeScrollbar||!1,outsideClickIgnoreClass:Rke,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return t.getClass?t.getClass():t},r}function Fd(t){return g9(t)?(t.nodeName||"").toLowerCase():"#document"}function Ei(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gc(t){var e;return(e=(g9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function g9(t){return t instanceof Node||t instanceof Ei(t).Node}function yi(t){return t instanceof Element||t instanceof Ei(t).Element}function Zu(t){return t instanceof HTMLElement||t instanceof Ei(t).HTMLElement}function iz(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ei(t).ShadowRoot}function Ix(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=ha(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function Oke(t){return["table","td","th"].includes(Fd(t))}function IM(t){const e=TM(),n=ha(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Ake(t){let e=eg(t);for(;Zu(e)&&!YS(e);){if(IM(e))return e;e=eg(e)}return null}function TM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function YS(t){return["html","body","#document"].includes(Fd(t))}function ha(t){return Ei(t).getComputedStyle(t)}function qS(t){return yi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function eg(t){if(Fd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||iz(t)&&t.host||gc(t);return iz(e)?e.host:e}function v9(t){const e=eg(t);return YS(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zu(e)&&Ix(e)?e:v9(e)}function h0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=v9(t),s=o===((r=t.ownerDocument)==null?void 0:r.body),i=Ei(o);return s?e.concat(i,i.visualViewport||[],Ix(o)?o:[],i.frameElement&&n?h0(i.frameElement):[]):e.concat(o,h0(o,[],n))}const tg=Math.min,th=Math.max,TC=Math.round,tw=Math.floor,Ld=t=>({x:t,y:t}),$ke={left:"right",right:"left",bottom:"top",top:"bottom"},Mke={start:"end",end:"start"};function Pke(t,e,n){return th(t,tg(e,n))}function KS(t,e){return typeof t=="function"?t(e):t}function ng(t){return t.split("-")[0]}function Tx(t){return t.split("-")[1]}function Fke(t){return t==="x"?"y":"x"}function NM(t){return t==="y"?"height":"width"}function DM(t){return["top","bottom"].includes(ng(t))?"y":"x"}function RM(t){return Fke(DM(t))}function Lke(t,e,n){n===void 0&&(n=!1);const r=Tx(t),o=RM(t),s=NM(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(i=NC(i)),[i,NC(i)]}function Bke(t){const e=NC(t);return[AR(t),e,AR(e)]}function AR(t){return t.replace(/start|end/g,e=>Mke[e])}function jke(t,e,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?s:i;default:return[]}}function Wke(t,e,n,r){const o=Tx(t);let s=jke(ng(t),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),e&&(s=s.concat(s.map(AR)))),s}function NC(t){return t.replace(/left|right|bottom|top/g,e=>$ke[e])}function zke(t){return{top:0,right:0,bottom:0,left:0,...t}}function y9(t){return typeof t!="number"?zke(t):{top:t,right:t,bottom:t,left:t}}function DC(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function az(t,e,n){let{reference:r,floating:o}=t;const s=DM(e),i=RM(e),a=NM(i),u=ng(e),l=s==="y",c=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-o.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Tx(e)){case"start":h[i]-=f*(n&&l?-1:1);break;case"end":h[i]+=f*(n&&l?-1:1);break}return h}const Uke=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),u=await(i.isRTL==null?void 0:i.isRTL(e));let l=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:c,y:d}=az(l,r,u),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:y,y:x,data:b,reset:C}=await v({x:c,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:l,platform:i,elements:{reference:t,floating:e}});c=y??c,d=x??d,h={...h,[g]:{...h[g],...b}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(l=C.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:o}):C.rects),{x:c,y:d}=az(l,f,u)),m=-1)}return{x:c,y:d,placement:f,strategy:o,middlewareData:h}};async function Vke(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=KS(e,t),p=y9(h),g=a[f?d==="floating"?"reference":"floating":d],v=DC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=d==="floating"?{...i.floating,x:r,y:o}:i.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},C=DC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:x,strategy:u}):y);return{top:(v.top-C.top+p.top)/b.y,bottom:(C.bottom-v.bottom+p.bottom)/b.y,left:(v.left-C.left+p.left)/b.x,right:(C.right-v.right+p.right)/b.x}}const Hke=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:u}=e,{element:l,padding:c=0}=KS(t,e)||{};if(l==null)return{};const d=y9(c),f={x:n,y:r},h=RM(o),p=NM(h),m=await i.getDimensions(l),g=h==="y",v=g?"top":"left",y=g?"bottom":"right",x=g?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[h]-f[h]-s.floating[p],C=f[h]-s.reference[h],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let E=S?S[x]:0;(!E||!await(i.isElement==null?void 0:i.isElement(S)))&&(E=a.floating[x]||s.floating[p]);const I=b/2-C/2,T=E/2-m[p]/2-1,N=tg(d[v],T),O=tg(d[y],T),$=N,A=E-m[p]-O,P=E/2-m[p]/2+I,L=Pke($,P,A),W=!u.arrow&&Tx(o)!=null&&P!==L&&s.reference[p]/2-(P<$?N:O)-m[p]/2<0,z=W?P<$?P-$:P-A:0;return{[h]:f[h]+z,data:{[h]:L,centerOffset:P-L-z,...W&&{alignmentOffset:z}},reset:W}}}),Gke=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:u,elements:l}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=KS(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=ng(o),y=ng(a)===a,x=await(u.isRTL==null?void 0:u.isRTL(l.floating)),b=f||(y||!m?[NC(a)]:Bke(a));!f&&p!=="none"&&b.push(...Wke(a,m,p,x));const C=[a,...b],S=await Vke(e,g),E=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&E.push(S[v]),d){const $=Lke(o,i,x);E.push(S[$[0]],S[$[1]])}if(I=[...I,{placement:o,overflows:E}],!E.every($=>$<=0)){var T,N;const $=(((T=s.flip)==null?void 0:T.index)||0)+1,A=C[$];if(A)return{data:{index:$,overflows:I},reset:{placement:A}};let P=(N=I.filter(L=>L.overflows[0]<=0).sort((L,W)=>L.overflows[1]-W.overflows[1])[0])==null?void 0:N.placement;if(!P)switch(h){case"bestFit":{var O;const L=(O=I.map(W=>[W.placement,W.overflows.filter(z=>z>0).reduce((z,F)=>z+F,0)]).sort((W,z)=>W[1]-z[1])[0])==null?void 0:O[0];L&&(P=L);break}case"initialPlacement":P=a;break}if(o!==P)return{reset:{placement:P}}}return{}}}};async function Yke(t,e){const{placement:n,platform:r,elements:o}=t,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=ng(n),a=Tx(n),u=DM(n)==="y",l=["left","top"].includes(i)?-1:1,c=s&&u?-1:1,d=KS(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:f*l}:{x:f*l,y:h*c}}const qke=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=e,u=await Yke(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+u.x,y:s+u.y,data:{...u,placement:i}}}}};function x9(t){const e=ha(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Zu(t),s=o?t.offsetWidth:n,i=o?t.offsetHeight:r,a=TC(n)!==s||TC(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function OM(t){return yi(t)?t:t.contextElement}function pm(t){const e=OM(t);if(!Zu(e))return Ld(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:s}=x9(e);let i=(s?TC(n.width):n.width)/r,a=(s?TC(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Kke=Ld(0);function b9(t){const e=Ei(t);return!TM()||!e.visualViewport?Kke:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Xke(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ei(t)?!1:e}function yh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),s=OM(t);let i=Ld(1);e&&(r?yi(r)&&(i=pm(r)):i=pm(t));const a=Xke(s,n,r)?b9(s):Ld(0);let u=(o.left+a.x)/i.x,l=(o.top+a.y)/i.y,c=o.width/i.x,d=o.height/i.y;if(s){const f=Ei(s),h=r&&yi(r)?Ei(r):r;let p=f,m=p.frameElement;for(;m&&r&&h!==p;){const g=pm(m),v=m.getBoundingClientRect(),y=ha(m),x=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,b=v.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,d*=g.y,u+=x,l+=b,p=Ei(m),m=p.frameElement}}return DC({width:c,height:d,x:u,y:l})}const Qke=[":popover-open",":modal"];function w9(t){return Qke.some(e=>{try{return t.matches(e)}catch{return!1}})}function Jke(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const s=o==="fixed",i=gc(r),a=e?w9(e.floating):!1;if(r===i||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=Ld(1);const c=Ld(0),d=Zu(r);if((d||!d&&!s)&&((Fd(r)!=="body"||Ix(i))&&(u=qS(r)),Zu(r))){const f=yh(r);l=pm(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function Zke(t){return Array.from(t.getClientRects())}function k9(t){return yh(gc(t)).left+qS(t).scrollLeft}function eCe(t){const e=gc(t),n=qS(t),r=t.ownerDocument.body,o=th(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=th(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+k9(t);const a=-n.scrollTop;return ha(r).direction==="rtl"&&(i+=th(e.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function tCe(t,e){const n=Ei(t),r=gc(t),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,u=0;if(o){s=o.width,i=o.height;const l=TM();(!l||l&&e==="fixed")&&(a=o.offsetLeft,u=o.offsetTop)}return{width:s,height:i,x:a,y:u}}function nCe(t,e){const n=yh(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,s=Zu(t)?pm(t):Ld(1),i=t.clientWidth*s.x,a=t.clientHeight*s.y,u=o*s.x,l=r*s.y;return{width:i,height:a,x:u,y:l}}function uz(t,e,n){let r;if(e==="viewport")r=tCe(t,n);else if(e==="document")r=eCe(gc(t));else if(yi(e))r=nCe(e,n);else{const o=b9(t);r={...e,x:e.x-o.x,y:e.y-o.y}}return DC(r)}function C9(t,e){const n=eg(t);return n===e||!yi(n)||YS(n)?!1:ha(n).position==="fixed"||C9(n,e)}function rCe(t,e){const n=e.get(t);if(n)return n;let r=h0(t,[],!1).filter(a=>yi(a)&&Fd(a)!=="body"),o=null;const s=ha(t).position==="fixed";let i=s?eg(t):t;for(;yi(i)&&!YS(i);){const a=ha(i),u=IM(i);!u&&a.position==="fixed"&&(o=null),(s?!u&&!o:!u&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Ix(i)&&!u&&C9(t,i))?r=r.filter(c=>c!==i):o=a,i=eg(i)}return e.set(t,r),r}function oCe(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?rCe(e,this._c):[].concat(n),r],a=i[0],u=i.reduce((l,c)=>{const d=uz(e,c,o);return l.top=th(d.top,l.top),l.right=tg(d.right,l.right),l.bottom=tg(d.bottom,l.bottom),l.left=th(d.left,l.left),l},uz(e,a,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function sCe(t){const{width:e,height:n}=x9(t);return{width:e,height:n}}function iCe(t,e,n){const r=Zu(e),o=gc(e),s=n==="fixed",i=yh(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const u=Ld(0);if(r||!r&&!s)if((Fd(e)!=="body"||Ix(o))&&(a=qS(e)),r){const d=yh(e,!0,s,e);u.x=d.x+e.clientLeft,u.y=d.y+e.clientTop}else o&&(u.x=k9(o));const l=i.left+a.scrollLeft-u.x,c=i.top+a.scrollTop-u.y;return{x:l,y:c,width:i.width,height:i.height}}function lz(t,e){return!Zu(t)||ha(t).position==="fixed"?null:e?e(t):t.offsetParent}function S9(t,e){const n=Ei(t);if(!Zu(t)||w9(t))return n;let r=lz(t,e);for(;r&&Oke(r)&&ha(r).position==="static";)r=lz(r,e);return r&&(Fd(r)==="html"||Fd(r)==="body"&&ha(r).position==="static"&&!IM(r))?n:r||Ake(t)||n}const aCe=async function(t){const e=this.getOffsetParent||S9,n=this.getDimensions;return{reference:iCe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await n(t.floating)}}};function uCe(t){return ha(t).direction==="rtl"}const E9={convertOffsetParentRelativeRectToViewportRelativeRect:Jke,getDocumentElement:gc,getClippingRect:oCe,getOffsetParent:S9,getElementRects:aCe,getClientRects:Zke,getDimensions:sCe,getScale:pm,isElement:yi,isRTL:uCe};function lCe(t,e){let n=null,r;const o=gc(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const h=tw(c),p=tw(o.clientWidth-(l+d)),m=tw(o.clientHeight-(c+f)),g=tw(l),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:th(0,tg(1,u))||1};let x=!0;function b(C){const S=C[0].intersectionRatio;if(S!==u){if(!x)return i();S?i(!1,S):r=setTimeout(()=>{i(!1,1e-7)},100)}x=!1}try{n=new IntersectionObserver(b,{...y,root:o.ownerDocument})}catch{n=new IntersectionObserver(b,y)}n.observe(t)}return i(!0),s}function cCe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=OM(t),c=o||s?[...l?h0(l):[],...h0(e)]:[];c.forEach(v=>{o&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=l&&a?lCe(l,n):null;let f=-1,h=null;i&&(h=new ResizeObserver(v=>{let[y]=v;y&&y.target===l&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(e)})),n()}),l&&!u&&h.observe(l),h.observe(e));let p,m=u?yh(t):null;u&&g();function g(){const v=yh(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(g)}return n(),()=>{var v;c.forEach(y=>{o&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const dCe=Gke,cz=Hke,fCe=(t,e,n)=>{const r=new Map,o={platform:E9,...n},s={...o.platform,_c:r};return Uke(t,e,{...o,platform:s})},hCe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?cz({element:r.current,padding:o}).fn(n):{}:r?cz({element:r,padding:o}).fn(n):{}}}};var hk=typeof document<"u"?D.useLayoutEffect:D.useEffect;function RC(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!RC(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&t.$$typeof)&&!RC(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function _9(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function dz(t,e){const n=_9(t);return Math.round(e*n)/n}function fz(t){const e=D.useRef(t);return hk(()=>{e.current=t}),e}function pCe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:u,open:l}=t,[c,d]=D.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=D.useState(r);RC(f,r)||h(r);const[p,m]=D.useState(null),[g,v]=D.useState(null),y=D.useCallback(z=>{z!==S.current&&(S.current=z,m(z))},[]),x=D.useCallback(z=>{z!==E.current&&(E.current=z,v(z))},[]),b=s||p,C=i||g,S=D.useRef(null),E=D.useRef(null),I=D.useRef(c),T=u!=null,N=fz(u),O=fz(o),$=D.useCallback(()=>{if(!S.current||!E.current)return;const z={placement:e,strategy:n,middleware:f};O.current&&(z.platform=O.current),fCe(S.current,E.current,z).then(F=>{const B={...F,isPositioned:!0};A.current&&!RC(I.current,B)&&(I.current=B,_g.flushSync(()=>{d(B)}))})},[f,e,n,O]);hk(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[l]);const A=D.useRef(!1);hk(()=>(A.current=!0,()=>{A.current=!1}),[]),hk(()=>{if(b&&(S.current=b),C&&(E.current=C),b&&C){if(N.current)return N.current(b,C,$);$()}},[b,C,$,N,T]);const P=D.useMemo(()=>({reference:S,floating:E,setReference:y,setFloating:x}),[y,x]),L=D.useMemo(()=>({reference:b,floating:C}),[b,C]),W=D.useMemo(()=>{const z={position:n,left:0,top:0};if(!L.floating)return z;const F=dz(L.floating,c.x),B=dz(L.floating,c.y);return a?{...z,transform:"translate("+F+"px, "+B+"px)",..._9(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:B}},[n,a,L.floating,c.x,c.y]);return D.useMemo(()=>({...c,update:$,refs:P,elements:L,floatingStyles:W}),[c,$,P,L,W])}const mCe=KA.useInsertionEffect,gCe=mCe||(t=>t());function vCe(t){const e=D.useRef(()=>{});return gCe(()=>{e.current=t}),D.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var I9=typeof document<"u"?D.useLayoutEffect:D.useEffect;function $R(){return $R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$R.apply(this,arguments)}let PT=!1,yCe=0;const hz=()=>"floating-ui-"+yCe++;function xCe(){const[t,e]=D.useState(()=>PT?hz():void 0);return I9(()=>{t==null&&e(hz())},[]),D.useEffect(()=>{PT||(PT=!0)},[]),t}const bCe=KA.useId,T9=bCe||xCe,wCe=D.forwardRef(function(e,n){let{context:{placement:r,elements:{floating:o},middlewareData:{arrow:s}},width:i=14,height:a=7,tipRadius:u=0,strokeWidth:l=0,staticOffset:c,stroke:d,d:f,style:{transform:h,...p}={},...m}=e;const g=T9();if(!o)return null;l*=2;const v=l/2,y=i/2*(u/-8+1),x=a/2*u/4,[b,C]=r.split("-"),S=E9.isRTL(o),E=!!f,I=b==="top"||b==="bottom",T=c&&C==="end"?"bottom":"top";let N=c&&C==="end"?"right":"left";c&&S&&(N=C==="end"?"left":"right");const O=(s==null?void 0:s.x)!=null?c||s.x:"",$=(s==null?void 0:s.y)!=null?c||s.y:"",A=f||"M0,0"+(" H"+i)+(" L"+(i-y)+","+(a-x))+(" Q"+i/2+","+a+" "+y+","+(a-x))+" Z",P={top:E?"rotate(180deg)":"",left:E?"rotate(90deg)":"rotate(-90deg)",bottom:E?"":"rotate(180deg)",right:E?"rotate(-90deg)":"rotate(90deg)"}[b];return D.createElement("svg",$R({},m,{"aria-hidden":!0,ref:n,width:E?i:i+l,height:i,viewBox:"0 0 "+i+" "+(a>i?a:i),style:{position:"absolute",pointerEvents:"none",[N]:O,[T]:$,[b]:I||E?"100%":"calc(100% - "+l/2+"px)",transform:""+P+(h??""),...p}}),l>0&&D.createElement("path",{clipPath:"url(#"+g+")",fill:"none",stroke:d,strokeWidth:l+(f?0:1),d:A}),D.createElement("path",{stroke:l&&!f?m.fill:"none",d:A}),D.createElement("clipPath",{id:g},D.createElement("rect",{x:-v,y:v*(E?-1:1),width:i+l,height:i})))});function kCe(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const CCe=D.createContext(null),SCe=D.createContext(null),ECe=()=>{var t;return((t=D.useContext(CCe))==null?void 0:t.id)||null},_Ce=()=>D.useContext(SCe);function ICe(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:o}=t,[s,i]=D.useState(null),a=((e=t.elements)==null?void 0:e.reference)||s,u=pCe(t),l=_Ce(),c=ECe()!=null,d=vCe((C,S,E)=>{C&&(h.current.openEvent=S),p.emit("openchange",{open:C,event:S,reason:E,nested:c}),r==null||r(C,S,E)}),f=D.useRef(null),h=D.useRef({}),p=D.useState(()=>kCe())[0],m=T9(),g=D.useCallback(C=>{const S=yi(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),contextElement:C}:C;u.refs.setReference(S)},[u.refs]),v=D.useCallback(C=>{(yi(C)||C===null)&&(f.current=C,i(C)),(yi(u.refs.reference.current)||u.refs.reference.current===null||C!==null&&!yi(C))&&u.refs.setReference(C)},[u.refs]),y=D.useMemo(()=>({...u.refs,setReference:v,setPositionReference:g,domReference:f}),[u.refs,v,g]),x=D.useMemo(()=>({...u.elements,domReference:a}),[u.elements,a]),b=D.useMemo(()=>({...u,refs:y,elements:x,dataRef:h,nodeId:o,floatingId:m,events:p,open:n,onOpenChange:d}),[u,o,m,p,n,d,y,x]);return I9(()=>{const C=l==null?void 0:l.nodesRef.current.find(S=>S.id===o);C&&(C.context=b)}),D.useMemo(()=>({...u,context:b,refs:y,elements:x}),[u,y,x,b])}function TCe(t,e){let n=ot(t);return isNaN(+n)?Mn(t,NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=_s(n,e.month)),e.date!=null&&n.setDate(e.date),e.hours!=null&&n.setHours(e.hours),e.minutes!=null&&n.setMinutes(e.minutes),e.seconds!=null&&n.setSeconds(e.seconds),e.milliseconds!=null&&n.setMilliseconds(e.milliseconds),n)}function $o(t,e,n){return e=OC(e),function(r,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(r)}(t,N9()?Reflect.construct(e,n||[],OC(t).constructor):e.apply(t,n))}function N9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N9=function(){return!!t})()}function pz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Fl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(n),!0).forEach(function(r){Y(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D9(t){var e=function(n,r){if(typeof n!="object"||!n)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var s=o.call(n,r||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return typeof e=="symbol"?e:String(e)}function MR(t){return MR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MR(t)}function Mo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D9(r.key),r)}}function Po(t,e,n){return e&&mz(t.prototype,e),n&&mz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y(t,e,n){return(e=D9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p0(){return p0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p0.apply(this,arguments)}function Fo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PR(t,e)}function OC(t){return OC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},OC(t)}function PR(t,e){return PR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},PR(t,e)}function q(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xh(t){return function(e){if(Array.isArray(e))return FT(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return FT(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FT(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function FT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Cy=12,NCe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Gn(t){var e=t?typeof t=="string"||t instanceof String?ike(t):ot(t):new Date;return Hc(e)?e:null}function Hc(t,e){return e=e||new Date("1/1/1000"),l0(t)&&!vh(t,e)}function vr(t,e,n){if(n==="en")return Qm(t,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=wd(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&nh()&&wd(nh())&&(r=wd(nh())),Qm(t,e,{locale:r||null,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function pu(t,e){var n=e.dateFormat,r=e.locale;return t&&vr(t,Array.isArray(n)?n[0]:n,r)||""}function gz(t,e){var n=e.hour,r=n===void 0?0:n,o=e.minute,s=o===void 0?0:o,i=e.second;return fk(dk(ewe(t,i===void 0?0:i),s),r)}function ja(t,e,n){var r=wd(e||nh());return oc(t,{locale:r,weekStartsOn:n})}function bd(t){return c9(t)}function Jv(t){return kM(t)}function vz(t){return NR(t)}function yz(){return ju(Gn())}function ed(t,e){return t&&e?uwe(t,e):!t&&!e}function Ma(t,e){return t&&e?awe(t,e):!t&&!e}function AC(t,e){return t&&e?lwe(t,e):!t&&!e}function Un(t,e){return t&&e?iwe(t,e):!t&&!e}function Wf(t,e){return t&&e?swe(t,e):!t&&!e}function pk(t,e,n){var r,o=ju(e),s=DR(n);try{r=f0(t,{start:o,end:s})}catch{r=!1}return r}function nh(){return(typeof window<"u"?window:globalThis).__localeId__}function wd(t){if(typeof t=="string"){var e=typeof window<"u"?window:globalThis;return e.__localeData__?e.__localeData__[t]:null}return t}function AM(t,e){return vr(_s(Gn(),t),"LLLL",e)}function R9(t,e){return vr(_s(Gn(),t),"LLL",e)}function XS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,o=e.excludeDates,s=e.excludeDateIntervals,i=e.includeDates,a=e.includeDateIntervals,u=e.filterDate;return QS(t,{minDate:n,maxDate:r})||o&&o.some(function(l){return Un(t,l.date?l.date:l)})||s&&s.some(function(l){var c=l.start,d=l.end;return f0(t,{start:c,end:d})})||i&&!i.some(function(l){return Un(t,l)})||a&&!a.some(function(l){var c=l.start,d=l.end;return f0(t,{start:c,end:d})})||u&&!u(Gn(t))||!1}function $M(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.excludeDates,r=e.excludeDateIntervals;return r&&r.length>0?r.some(function(o){var s=o.start,i=o.end;return f0(t,{start:s,end:i})}):n&&n.some(function(o){return Un(t,o.date?o.date:o)})||!1}function O9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,o=e.excludeDates,s=e.includeDates,i=e.filterDate;return QS(t,{minDate:c9(n),maxDate:rwe(r)})||o&&o.some(function(a){return Ma(t,a)})||s&&!s.some(function(a){return Ma(t,a)})||i&&!i(Gn(t))||!1}function LT(t,e,n,r){var o=Kt(t),s=ls(t),i=Kt(e),a=ls(e),u=Kt(r);return o===i&&o===u?s<=n&&n<=a:o<i?u===o&&s<=n||u===i&&a>=n||u<i&&u>o:void 0}function DCe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,o=e.excludeDates,s=e.includeDates,i=e.filterDate;return QS(t,{minDate:n,maxDate:r})||o&&o.some(function(a){return AC(t,a)})||s&&!s.some(function(a){return AC(t,a)})||i&&!i(Gn(t))||!1}function BT(t,e,n){if(!l0(e)||!l0(n))return!1;var r=Kt(e),o=Kt(n);return r<=t&&o>=t}function A9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,o=e.excludeDates,s=e.includeDates,i=e.filterDate,a=new Date(t,0,1);return QS(a,{minDate:kM(n),maxDate:owe(r)})||o&&o.some(function(u){return ed(a,u)})||s&&!s.some(function(u){return ed(a,u)})||i&&!i(Gn(a))||!1}function jT(t,e,n,r){var o=Kt(t),s=Zp(t),i=Kt(e),a=Zp(e),u=Kt(r);return o===i&&o===u?s<=n&&n<=a:o<i?u===o&&s<=n||u===i&&a>=n||u<i&&u>o:void 0}function QS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate;return n&&c0(t,n)<0||r&&c0(t,r)>0}function xz(t,e){return e.some(function(n){return zu(n)===zu(t)&&Wu(n)===Wu(t)})}function bz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.excludeTimes,r=e.includeTimes,o=e.filterTime;return n&&xz(t,n)||r&&!xz(t,r)||o&&!o(t)||!1}function wz(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var o,s=Gn(),i=fk(dk(s,Wu(t)),zu(t)),a=fk(dk(s,Wu(n)),zu(n)),u=fk(dk(s,Wu(r)),zu(r));try{o=!f0(i,{start:a,end:u})}catch{o=!1}return o}function kz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.includeDates,o=Zm(t,1);return n&&EC(n,o)>0||r&&r.every(function(s){return EC(s,o)>0})||!1}function Cz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.maxDate,r=e.includeDates,o=Za(t,1);return n&&EC(o,n)>0||r&&r.every(function(s){return EC(o,s)>0})||!1}function Sz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.includeDates,o=d0(t,1);return n&&_C(n,o)>0||r&&r.every(function(s){return _C(s,o)>0})||!1}function Ez(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.maxDate,r=e.includeDates,o=Jm(t,1);return n&&_C(o,n)>0||r&&r.every(function(s){return _C(o,s)>0})||!1}function $9(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter(function(o){return c0(o,e)>=0});return nz(r)}return n?nz(n):e}function M9(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter(function(o){return c0(o,e)<=0});return rz(r)}return n?rz(n):e}function _z(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,o=t.length;r<o;r++){var s=t[r];if(gh(s)){var i=vr(s,"MM.dd.yyyy"),a=n.get(i)||[];a.includes(e)||(a.push(e),n.set(i,a))}else if(MR(s)==="object"){var u=Object.keys(s),l=u[0],c=s[u[0]];if(typeof l=="string"&&c.constructor===Array)for(var d=0,f=c.length;d<f;d++){var h=vr(c[d],"MM.dd.yyyy"),p=n.get(h)||[];p.includes(l)||(p.push(l),n.set(h,p))}}}return n}function RCe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--holidays",n=new Map;return t.forEach(function(r){var o=r.date,s=r.holidayName;if(gh(o)){var i=vr(o,"MM.dd.yyyy"),a=n.get(i)||{};if(!("className"in a)||a.className!==e||(u=a.holidayNames,l=[s],u.length!==l.length||!u.every(function(d,f){return d===l[f]}))){var u,l;a.className=e;var c=a.holidayNames;a.holidayNames=c?[].concat(xh(c),[s]):[s],n.set(i,a)}}}),n}function OCe(t,e,n,r,o){for(var s=o.length,i=[],a=0;a<s;a++){var u=IR(Xbe(t,zu(o[a])),Wu(o[a])),l=IR(t,(n+1)*r);Pd(u,e)&&vh(u,l)&&i.push(o[a])}return i}function Iz(t){return t<10?"0".concat(t):"".concat(t)}function em(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cy,n=Math.ceil(Kt(t)/e)*e;return{startPeriod:n-(e-1),endPeriod:n}}function Tz(t){var e=t.getSeconds(),n=t.getMilliseconds();return ot(t.getTime()-1e3*e-n)}function Nz(t){if(!gh(t))throw new Error("Invalid date");var e=new Date(t);return e.setHours(0,0,0,0),e}function Dz(t,e){if(!gh(t)||!gh(e))throw new Error("Invalid date received");var n=Nz(t),r=Nz(e);return vh(n,r)}function ACe(t,e,n,r){for(var o=[],s=0;s<2*e+1;s++){var i=t+e-s,a=!0;n&&(a=Kt(n)<=i),r&&a&&(a=Kt(r)>=i),a&&o.push(i)}return o}var $Ce=GS(function(t){function e(n){var r;Mo(this,e),Y(q(r=$o(this,e,[n])),"renderOptions",function(){var a=r.props.year,u=r.state.yearsList.map(function(d){return ee.createElement("div",{className:a===d?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:d,onClick:r.onChange.bind(q(r),d),"aria-selected":a===d?"true":void 0},a===d?ee.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",d)}),l=r.props.minDate?Kt(r.props.minDate):null,c=r.props.maxDate?Kt(r.props.maxDate):null;return c&&r.state.yearsList.find(function(d){return d===c})||u.unshift(ee.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},ee.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),l&&r.state.yearsList.find(function(d){return d===l})||u.push(ee.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},ee.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),u}),Y(q(r),"onChange",function(a){r.props.onChange(a)}),Y(q(r),"handleClickOutside",function(){r.props.onCancel()}),Y(q(r),"shiftYears",function(a){var u=r.state.yearsList.map(function(l){return l+a});r.setState({yearsList:u})}),Y(q(r),"incrementYears",function(){return r.shiftYears(1)}),Y(q(r),"decrementYears",function(){return r.shiftYears(-1)});var o=n.yearDropdownItemNumber,s=n.scrollableYearDropdown,i=o||(s?10:5);return r.state={yearsList:ACe(r.props.year,i,r.props.minDate,r.props.maxDate)},r.dropdownRef=D.createRef(),r}return Fo(e,ee.Component),Po(e,[{key:"componentDidMount",value:function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,o=r?r.find(function(s){return s.ariaSelected}):null;n.scrollTop=o?o.offsetTop+(o.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}}},{key:"render",value:function(){var n=Ae({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return ee.createElement("div",{className:n,ref:this.dropdownRef},this.renderOptions())}}]),e}()),MCe=function(t){function e(){var n;Mo(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Y(q(n=$o(this,e,[].concat(o))),"state",{dropdownVisible:!1}),Y(q(n),"renderSelectOptions",function(){for(var i=n.props.minDate?Kt(n.props.minDate):1900,a=n.props.maxDate?Kt(n.props.maxDate):2100,u=[],l=i;l<=a;l++)u.push(ee.createElement("option",{key:l,value:l},l));return u}),Y(q(n),"onSelectChange",function(i){n.onChange(i.target.value)}),Y(q(n),"renderSelectMode",function(){return ee.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())}),Y(q(n),"renderReadView",function(i){return ee.createElement("div",{key:"read",style:{visibility:i?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(a){return n.toggleDropdown(a)}},ee.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),ee.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))}),Y(q(n),"renderDropdown",function(){return ee.createElement($Ce,{key:"dropdown",year:n.props.year,onChange:n.onChange,onCancel:n.toggleDropdown,minDate:n.props.minDate,maxDate:n.props.maxDate,scrollableYearDropdown:n.props.scrollableYearDropdown,yearDropdownItemNumber:n.props.yearDropdownItemNumber})}),Y(q(n),"renderScrollMode",function(){var i=n.state.dropdownVisible,a=[n.renderReadView(!i)];return i&&a.unshift(n.renderDropdown()),a}),Y(q(n),"onChange",function(i){n.toggleDropdown(),i!==n.props.year&&n.props.onChange(i)}),Y(q(n),"toggleDropdown",function(i){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,i)})}),Y(q(n),"handleYearChange",function(i,a){n.onSelect(i,a),n.setOpen()}),Y(q(n),"onSelect",function(i,a){n.props.onSelect&&n.props.onSelect(i,a)}),Y(q(n),"setOpen",function(){n.props.setOpen&&n.props.setOpen(!0)}),n}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode()}return ee.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)}}]),e}(),PCe=GS(function(t){function e(){var n;Mo(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Y(q(n=$o(this,e,[].concat(o))),"isSelectedMonth",function(i){return n.props.month===i}),Y(q(n),"renderOptions",function(){return n.props.monthNames.map(function(i,a){return ee.createElement("div",{className:n.isSelectedMonth(a)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:i,onClick:n.onChange.bind(q(n),a),"aria-selected":n.isSelectedMonth(a)?"true":void 0},n.isSelectedMonth(a)?ee.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",i)})}),Y(q(n),"onChange",function(i){return n.props.onChange(i)}),Y(q(n),"handleClickOutside",function(){return n.props.onCancel()}),n}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){return ee.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),e}()),FCe=function(t){function e(){var n;Mo(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Y(q(n=$o(this,e,[].concat(o))),"state",{dropdownVisible:!1}),Y(q(n),"renderSelectOptions",function(i){return i.map(function(a,u){return ee.createElement("option",{key:u,value:u},a)})}),Y(q(n),"renderSelectMode",function(i){return ee.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(a){return n.onChange(a.target.value)}},n.renderSelectOptions(i))}),Y(q(n),"renderReadView",function(i,a){return ee.createElement("div",{key:"read",style:{visibility:i?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},ee.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),ee.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},a[n.props.month]))}),Y(q(n),"renderDropdown",function(i){return ee.createElement(PCe,{key:"dropdown",month:n.props.month,monthNames:i,onChange:n.onChange,onCancel:n.toggleDropdown})}),Y(q(n),"renderScrollMode",function(i){var a=n.state.dropdownVisible,u=[n.renderReadView(!a,i)];return a&&u.unshift(n.renderDropdown(i)),u}),Y(q(n),"onChange",function(i){n.toggleDropdown(),i!==n.props.month&&n.props.onChange(i)}),Y(q(n),"toggleDropdown",function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})}),n}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){var n,r=this,o=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(s){return R9(s,r.props.locale)}:function(s){return AM(s,r.props.locale)});switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode(o);break;case"select":n=this.renderSelectMode(o)}return ee.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},n)}}]),e}();function LCe(t,e){for(var n=[],r=bd(t),o=bd(e);!Pd(r,o);)n.push(Gn(r)),r=Za(r,1);return n}var BCe=GS(function(t){function e(n){var r;return Mo(this,e),Y(q(r=$o(this,e,[n])),"renderOptions",function(){return r.state.monthYearsList.map(function(o){var s=TR(o),i=ed(r.props.date,o)&&Ma(r.props.date,o);return ee.createElement("div",{className:i?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:s,onClick:r.onChange.bind(q(r),s),"aria-selected":i?"true":void 0},i?ee.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",vr(o,r.props.dateFormat,r.props.locale))})}),Y(q(r),"onChange",function(o){return r.props.onChange(o)}),Y(q(r),"handleClickOutside",function(){r.props.onCancel()}),r.state={monthYearsList:LCe(r.props.minDate,r.props.maxDate)},r}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){var n=Ae({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return ee.createElement("div",{className:n},this.renderOptions())}}]),e}()),jCe=function(t){function e(){var n;Mo(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Y(q(n=$o(this,e,[].concat(o))),"state",{dropdownVisible:!1}),Y(q(n),"renderSelectOptions",function(){for(var i=bd(n.props.minDate),a=bd(n.props.maxDate),u=[];!Pd(i,a);){var l=TR(i);u.push(ee.createElement("option",{key:l,value:l},vr(i,n.props.dateFormat,n.props.locale))),i=Za(i,1)}return u}),Y(q(n),"onSelectChange",function(i){n.onChange(i.target.value)}),Y(q(n),"renderSelectMode",function(){return ee.createElement("select",{value:TR(bd(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())}),Y(q(n),"renderReadView",function(i){var a=vr(n.props.date,n.props.dateFormat,n.props.locale);return ee.createElement("div",{key:"read",style:{visibility:i?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(u){return n.toggleDropdown(u)}},ee.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),ee.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},a))}),Y(q(n),"renderDropdown",function(){return ee.createElement(BCe,{key:"dropdown",date:n.props.date,dateFormat:n.props.dateFormat,onChange:n.onChange,onCancel:n.toggleDropdown,minDate:n.props.minDate,maxDate:n.props.maxDate,scrollableMonthYearDropdown:n.props.scrollableMonthYearDropdown,locale:n.props.locale})}),Y(q(n),"renderScrollMode",function(){var i=n.state.dropdownVisible,a=[n.renderReadView(!i)];return i&&a.unshift(n.renderDropdown()),a}),Y(q(n),"onChange",function(i){n.toggleDropdown();var a=Gn(parseInt(i));ed(n.props.date,a)&&Ma(n.props.date,a)||n.props.onChange(a)}),Y(q(n),"toggleDropdown",function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})}),n}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode()}return ee.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)}}]),e}(),WCe=function(t){function e(){var n;Mo(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Y(q(n=$o(this,e,[].concat(o))),"dayEl",ee.createRef()),Y(q(n),"handleClick",function(i){!n.isDisabled()&&n.props.onClick&&n.props.onClick(i)}),Y(q(n),"handleMouseEnter",function(i){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(i)}),Y(q(n),"handleOnKeyDown",function(i){i.key===" "&&(i.preventDefault(),i.key="Enter"),n.props.handleOnKeyDown(i)}),Y(q(n),"isSameDay",function(i){return Un(n.props.day,i)}),Y(q(n),"isKeyboardSelected",function(){return!n.props.disabledKeyboardNavigation&&!(n.isSameDay(n.props.selected)||n.isSameWeek(n.props.selected))&&(n.isSameDay(n.props.preSelection)||n.isSameWeek(n.props.preSelection))}),Y(q(n),"isDisabled",function(){return XS(n.props.day,n.props)}),Y(q(n),"isExcluded",function(){return $M(n.props.day,n.props)}),Y(q(n),"isStartOfWeek",function(){return Un(n.props.day,ja(n.props.day,n.props.locale,n.props.calendarStartDay))}),Y(q(n),"isSameWeek",function(i){return n.props.showWeekPicker&&Un(i,ja(n.props.day,n.props.locale,n.props.calendarStartDay))}),Y(q(n),"getHighLightedClass",function(){var i=n.props,a=i.day,u=i.highlightDates;if(!u)return!1;var l=vr(a,"MM.dd.yyyy");return u.get(l)}),Y(q(n),"getHolidaysClass",function(){var i=n.props,a=i.day,u=i.holidays;if(!u)return!1;var l=vr(a,"MM.dd.yyyy");return u.has(l)?[u.get(l).className]:void 0}),Y(q(n),"isInRange",function(){var i=n.props,a=i.day,u=i.startDate,l=i.endDate;return!(!u||!l)&&pk(a,u,l)}),Y(q(n),"isInSelectingRange",function(){var i,a=n.props,u=a.day,l=a.selectsStart,c=a.selectsEnd,d=a.selectsRange,f=a.selectsDisabledDaysInRange,h=a.startDate,p=a.endDate,m=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return!(!(l||c||d)||!m||!f&&n.isDisabled())&&(l&&p&&(vh(m,p)||Wf(m,p))?pk(u,m,p):(c&&h&&(Pd(m,h)||Wf(m,h))||!(!d||!h||p||!Pd(m,h)&&!Wf(m,h)))&&pk(u,h,m))}),Y(q(n),"isSelectingRangeStart",function(){var i;if(!n.isInSelectingRange())return!1;var a=n.props,u=a.day,l=a.startDate,c=a.selectsStart,d=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return Un(u,c?d:l)}),Y(q(n),"isSelectingRangeEnd",function(){var i;if(!n.isInSelectingRange())return!1;var a=n.props,u=a.day,l=a.endDate,c=a.selectsEnd,d=a.selectsRange,f=(i=n.props.selectingDate)!==null&&i!==void 0?i:n.props.preSelection;return Un(u,c||d?f:l)}),Y(q(n),"isRangeStart",function(){var i=n.props,a=i.day,u=i.startDate,l=i.endDate;return!(!u||!l)&&Un(u,a)}),Y(q(n),"isRangeEnd",function(){var i=n.props,a=i.day,u=i.startDate,l=i.endDate;return!(!u||!l)&&Un(l,a)}),Y(q(n),"isWeekend",function(){var i=Zbe(n.props.day);return i===0||i===6}),Y(q(n),"isAfterMonth",function(){return n.props.month!==void 0&&(n.props.month+1)%12===ls(n.props.day)}),Y(q(n),"isBeforeMonth",function(){return n.props.month!==void 0&&(ls(n.props.day)+1)%12===n.props.month}),Y(q(n),"isCurrentDay",function(){return n.isSameDay(Gn())}),Y(q(n),"isSelected",function(){return n.isSameDay(n.props.selected)||n.isSameWeek(n.props.selected)}),Y(q(n),"getClassNames",function(i){var a,u=n.props.dayClassName?n.props.dayClassName(i):void 0;return Ae("react-datepicker__day",u,"react-datepicker__day--"+vr(n.props.day,"ddd",a),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass("react-datepicker__day--highlighted"),n.getHolidaysClass())}),Y(q(n),"getAriaLabel",function(){var i=n.props,a=i.day,u=i.ariaLabelPrefixWhenEnabled,l=u===void 0?"Choose":u,c=i.ariaLabelPrefixWhenDisabled,d=c===void 0?"Not available":c,f=n.isDisabled()||n.isExcluded()?d:l;return"".concat(f," ").concat(vr(a,"PPPP",n.props.locale))}),Y(q(n),"getTitle",function(){var i=n.props,a=i.day,u=i.holidays,l=u===void 0?new Map:u,c=i.excludeDates,d=vr(a,"MM.dd.yyyy"),f=[];return l.has(d)&&f.push.apply(f,xh(l.get(d).holidayNames)),n.isExcluded()&&f.push(c==null?void 0:c.filter(function(h){return Un(h.date?h.date:h,a)}).map(function(h){return h.message})),f.join(", ")}),Y(q(n),"getTabIndex",function(i,a){var u=i||n.props.selected,l=a||n.props.preSelection;return(!n.props.showWeekPicker||!n.props.showWeekNumber&&n.isStartOfWeek())&&(n.isKeyboardSelected()||n.isSameDay(u)&&Un(l,u))?0:-1}),Y(q(n),"handleFocusDay",function(){var i,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=!1;n.getTabIndex()===0&&!a.isInputFocused&&n.isSameDay(n.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(u=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(u=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(u=!0),n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()&&(u=!1),n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()&&(u=!1)),u&&((i=n.dayEl.current)===null||i===void 0||i.focus({preventScroll:!0}))}),Y(q(n),"renderDayContents",function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(tz(n.props.day),n.props.day):tz(n.props.day)}),Y(q(n),"render",function(){return ee.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.handleMouseEnter,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&ee.createElement("span",{className:"overlay"},n.getTitle()))}),n}return Fo(e,ee.Component),Po(e,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(n){this.handleFocusDay(n)}}]),e}(),zCe=function(t){function e(){var n;Mo(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Y(q(n=$o(this,e,[].concat(o))),"weekNumberEl",ee.createRef()),Y(q(n),"handleClick",function(i){n.props.onClick&&n.props.onClick(i)}),Y(q(n),"handleOnKeyDown",function(i){i.key===" "&&(i.preventDefault(),i.key="Enter"),n.props.handleOnKeyDown(i)}),Y(q(n),"isKeyboardSelected",function(){return!n.props.disabledKeyboardNavigation&&!Un(n.props.date,n.props.selected)&&Un(n.props.date,n.props.preSelection)}),Y(q(n),"getTabIndex",function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||Un(n.props.date,n.props.selected)&&Un(n.props.preSelection,n.props.selected))?0:-1}),Y(q(n),"handleFocusWeekNumber",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=!1;n.getTabIndex()===0&&!i.isInputFocused&&Un(n.props.date,n.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(a=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(a=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(a=!0)),a&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})}),n}return Fo(e,ee.Component),Po(e,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(n){this.handleFocusWeekNumber(n)}},{key:"render",value:function(){var n=this.props,r=n.weekNumber,o=n.ariaLabelPrefix,s=o===void 0?"week ":o,i={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!n.onClick,"react-datepicker__week-number--selected":Un(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return ee.createElement("div",{ref:this.weekNumberEl,className:Ae(i),"aria-label":"".concat(s," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),e}(),UCe=function(t){function e(){var n;Mo(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Y(q(n=$o(this,e,[].concat(o))),"handleDayClick",function(i,a){n.props.onDayClick&&n.props.onDayClick(i,a)}),Y(q(n),"handleDayMouseEnter",function(i){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(i)}),Y(q(n),"handleWeekClick",function(i,a,u){if(typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(i,a,u),n.props.showWeekPicker){var l=ja(i,n.props.locale,n.props.calendarStartDay);n.handleDayClick(l,u)}n.props.shouldCloseOnSelect&&n.props.setOpen(!1)}),Y(q(n),"formatWeekNumber",function(i){return n.props.formatWeekNumber?n.props.formatWeekNumber(i):function(a,u){return u&&wd(u)||nh()&&wd(nh()),CM(a)}(i)}),Y(q(n),"renderDays",function(){var i=ja(n.props.day,n.props.locale,n.props.calendarStartDay),a=[],u=n.formatWeekNumber(i);if(n.props.showWeekNumber){var l=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(q(n),i,u):void 0;a.push(ee.createElement(zCe,{key:"W",weekNumber:u,date:i,onClick:l,selected:n.props.selected,preSelection:n.props.preSelection,ariaLabelPrefix:n.props.ariaLabelPrefix,showWeekPicker:n.props.showWeekPicker,showWeekNumber:n.props.showWeekNumber,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,handleOnKeyDown:n.props.handleOnKeyDown,isInputFocused:n.props.isInputFocused,containerRef:n.props.containerRef}))}return a.concat([0,1,2,3,4,5,6].map(function(c){var d=nf(i,c);return ee.createElement(WCe,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:d.valueOf(),day:d,month:n.props.month,onClick:n.handleDayClick.bind(q(n),d),onMouseEnter:n.handleDayMouseEnter.bind(q(n),d),minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,highlightDates:n.props.highlightDates,holidays:n.props.holidays,selectingDate:n.props.selectingDate,filterDate:n.props.filterDate,preSelection:n.props.preSelection,selected:n.props.selected,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,showWeekPicker:n.props.showWeekPicker,showWeekNumber:n.props.showWeekNumber,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,startDate:n.props.startDate,endDate:n.props.endDate,dayClassName:n.props.dayClassName,renderDayContents:n.props.renderDayContents,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,handleOnKeyDown:n.props.handleOnKeyDown,isInputFocused:n.props.isInputFocused,containerRef:n.props.containerRef,inline:n.props.inline,shouldFocusDayInline:n.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:n.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:n.props.monthShowsDuplicateDaysStart,locale:n.props.locale})}))}),Y(q(n),"startOfWeek",function(){return ja(n.props.day,n.props.locale,n.props.calendarStartDay)}),Y(q(n),"isKeyboardSelected",function(){return!n.props.disabledKeyboardNavigation&&!Un(n.startOfWeek(),n.props.selected)&&Un(n.startOfWeek(),n.props.preSelection)}),n}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":Un(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return ee.createElement("div",{className:Ae(n)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),e}(),P9="two_columns",F9="three_columns",L9="four_columns",WT=Y(Y(Y({},P9,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),F9,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),L9,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function Rz(t,e){return t?L9:e?P9:F9}var VCe=function(t){function e(){var n;Mo(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Y(q(n=$o(this,e,[].concat(o))),"MONTH_REFS",xh(Array(12)).map(function(){return ee.createRef()})),Y(q(n),"QUARTER_REFS",xh(Array(4)).map(function(){return ee.createRef()})),Y(q(n),"isDisabled",function(i){return XS(i,n.props)}),Y(q(n),"isExcluded",function(i){return $M(i,n.props)}),Y(q(n),"handleDayClick",function(i,a){n.props.onDayClick&&n.props.onDayClick(i,a,n.props.orderInDisplay)}),Y(q(n),"handleDayMouseEnter",function(i){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(i)}),Y(q(n),"handleMouseLeave",function(){n.props.onMouseLeave&&n.props.onMouseLeave()}),Y(q(n),"isRangeStartMonth",function(i){var a=n.props,u=a.day,l=a.startDate,c=a.endDate;return!(!l||!c)&&Ma(_s(u,i),l)}),Y(q(n),"isRangeStartQuarter",function(i){var a=n.props,u=a.day,l=a.startDate,c=a.endDate;return!(!l||!c)&&AC(kp(u,i),l)}),Y(q(n),"isRangeEndMonth",function(i){var a=n.props,u=a.day,l=a.startDate,c=a.endDate;return!(!l||!c)&&Ma(_s(u,i),c)}),Y(q(n),"isRangeEndQuarter",function(i){var a=n.props,u=a.day,l=a.startDate,c=a.endDate;return!(!l||!c)&&AC(kp(u,i),c)}),Y(q(n),"isInSelectingRangeMonth",function(i){var a,u=n.props,l=u.day,c=u.selectsStart,d=u.selectsEnd,f=u.selectsRange,h=u.startDate,p=u.endDate,m=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return!(!(c||d||f)||!m)&&(c&&p?LT(m,p,i,l):(d&&h||!(!f||!h||p))&&LT(h,m,i,l))}),Y(q(n),"isSelectingMonthRangeStart",function(i){var a;if(!n.isInSelectingRangeMonth(i))return!1;var u=n.props,l=u.day,c=u.startDate,d=u.selectsStart,f=_s(l,i),h=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return Ma(f,d?h:c)}),Y(q(n),"isSelectingMonthRangeEnd",function(i){var a;if(!n.isInSelectingRangeMonth(i))return!1;var u=n.props,l=u.day,c=u.endDate,d=u.selectsEnd,f=u.selectsRange,h=_s(l,i),p=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return Ma(h,d||f?p:c)}),Y(q(n),"isInSelectingRangeQuarter",function(i){var a,u=n.props,l=u.day,c=u.selectsStart,d=u.selectsEnd,f=u.selectsRange,h=u.startDate,p=u.endDate,m=(a=n.props.selectingDate)!==null&&a!==void 0?a:n.props.preSelection;return!(!(c||d||f)||!m)&&(c&&p?jT(m,p,i,l):(d&&h||!(!f||!h||p))&&jT(h,m,i,l))}),Y(q(n),"isWeekInMonth",function(i){var a=n.props.day,u=nf(i,6);return Ma(i,a)||Ma(u,a)}),Y(q(n),"isCurrentMonth",function(i,a){return Kt(i)===Kt(Gn())&&a===ls(Gn())}),Y(q(n),"isCurrentQuarter",function(i,a){return Kt(i)===Kt(Gn())&&a===Zp(Gn())}),Y(q(n),"isSelectedMonth",function(i,a,u){return ls(u)===a&&Kt(i)===Kt(u)}),Y(q(n),"isSelectedQuarter",function(i,a,u){return Zp(i)===a&&Kt(i)===Kt(u)}),Y(q(n),"renderWeeks",function(){for(var i=[],a=n.props.fixedHeight,u=0,l=!1,c=ja(bd(n.props.day),n.props.locale,n.props.calendarStartDay);i.push(ee.createElement(UCe,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:n.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:n.props.disabledDayAriaLabelPrefix,key:u,day:c,month:ls(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,onWeekSelect:n.props.onWeekSelect,formatWeekNumber:n.props.formatWeekNumber,locale:n.props.locale,minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,inline:n.props.inline,shouldFocusDayInline:n.props.shouldFocusDayInline,highlightDates:n.props.highlightDates,holidays:n.props.holidays,selectingDate:n.props.selectingDate,filterDate:n.props.filterDate,preSelection:n.props.preSelection,selected:n.props.selected,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,showWeekNumber:n.props.showWeekNumbers,showWeekPicker:n.props.showWeekPicker,startDate:n.props.startDate,endDate:n.props.endDate,dayClassName:n.props.dayClassName,setOpen:n.props.setOpen,shouldCloseOnSelect:n.props.shouldCloseOnSelect,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,renderDayContents:n.props.renderDayContents,handleOnKeyDown:n.props.handleOnKeyDown,isInputFocused:n.props.isInputFocused,containerRef:n.props.containerRef,calendarStartDay:n.props.calendarStartDay,monthShowsDuplicateDaysEnd:n.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:n.props.monthShowsDuplicateDaysStart})),!l;){u++,c=SC(c,1);var d=a&&u>=6,f=!a&&!n.isWeekInMonth(c);if(d||f){if(!n.props.peekNextMonth)break;l=!0}}return i}),Y(q(n),"onMonthClick",function(i,a){n.handleDayClick(bd(_s(n.props.day,a)),i)}),Y(q(n),"onMonthMouseEnter",function(i){n.handleDayMouseEnter(bd(_s(n.props.day,i)))}),Y(q(n),"handleMonthNavigation",function(i,a){n.isDisabled(a)||n.isExcluded(a)||(n.props.setPreSelection(a),n.MONTH_REFS[i].current&&n.MONTH_REFS[i].current.focus())}),Y(q(n),"onMonthKeyDown",function(i,a){var u=n.props,l=u.selected,c=u.preSelection,d=u.disabledKeyboardNavigation,f=u.showTwoColumnMonthYearPicker,h=u.showFourColumnMonthYearPicker,p=u.setPreSelection,m=i.key;if(m!=="Tab"&&i.preventDefault(),!d){var g=Rz(h,f),v=WT[g].verticalNavigationOffset,y=WT[g].grid;switch(m){case"Enter":n.onMonthClick(i,a),p(l);break;case"ArrowRight":n.handleMonthNavigation(a===11?0:a+1,Za(c,1));break;case"ArrowLeft":n.handleMonthNavigation(a===0?11:a-1,Zm(c,1));break;case"ArrowUp":n.handleMonthNavigation(y[0].includes(a)?a+12-v:a-v,Zm(c,v));break;case"ArrowDown":n.handleMonthNavigation(y[y.length-1].includes(a)?a-12+v:a+v,Za(c,v))}}}),Y(q(n),"onQuarterClick",function(i,a){n.handleDayClick(vz(kp(n.props.day,a)),i)}),Y(q(n),"onQuarterMouseEnter",function(i){n.handleDayMouseEnter(vz(kp(n.props.day,i)))}),Y(q(n),"handleQuarterNavigation",function(i,a){n.isDisabled(a)||n.isExcluded(a)||(n.props.setPreSelection(a),n.QUARTER_REFS[i-1].current&&n.QUARTER_REFS[i-1].current.focus())}),Y(q(n),"onQuarterKeyDown",function(i,a){var u=i.key;if(!n.props.disabledKeyboardNavigation)switch(u){case"Enter":n.onQuarterClick(i,a),n.props.setPreSelection(n.props.selected);break;case"ArrowRight":n.handleQuarterNavigation(a===4?1:a+1,l9(n.props.preSelection,1));break;case"ArrowLeft":n.handleQuarterNavigation(a===1?4:a-1,Jbe(n.props.preSelection,1))}}),Y(q(n),"getMonthClassNames",function(i){var a=n.props,u=a.day,l=a.startDate,c=a.endDate,d=a.selected,f=a.minDate,h=a.maxDate,p=a.preSelection,m=a.monthClassName,g=a.excludeDates,v=a.includeDates,y=m?m(_s(u,i)):void 0,x=_s(u,i);return Ae("react-datepicker__month-text","react-datepicker__month-".concat(i),y,{"react-datepicker__month-text--disabled":(f||h||g||v)&&O9(x,n.props),"react-datepicker__month-text--selected":n.isSelectedMonth(u,i,d),"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&ls(p)===i,"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(i),"react-datepicker__month-text--in-range":LT(l,c,i,u),"react-datepicker__month-text--range-start":n.isRangeStartMonth(i),"react-datepicker__month-text--range-end":n.isRangeEndMonth(i),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(i),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(i),"react-datepicker__month-text--today":n.isCurrentMonth(u,i)})}),Y(q(n),"getTabIndex",function(i){var a=ls(n.props.preSelection);return n.props.disabledKeyboardNavigation||i!==a?"-1":"0"}),Y(q(n),"getQuarterTabIndex",function(i){var a=Zp(n.props.preSelection);return n.props.disabledKeyboardNavigation||i!==a?"-1":"0"}),Y(q(n),"getAriaLabel",function(i){var a=n.props,u=a.chooseDayAriaLabelPrefix,l=u===void 0?"Choose":u,c=a.disabledDayAriaLabelPrefix,d=c===void 0?"Not available":c,f=a.day,h=_s(f,i),p=n.isDisabled(h)||n.isExcluded(h)?d:l;return"".concat(p," ").concat(vr(h,"MMMM yyyy"))}),Y(q(n),"getQuarterClassNames",function(i){var a=n.props,u=a.day,l=a.startDate,c=a.endDate,d=a.selected,f=a.minDate,h=a.maxDate,p=a.preSelection,m=a.disabledKeyboardNavigation;return Ae("react-datepicker__quarter-text","react-datepicker__quarter-".concat(i),{"react-datepicker__quarter-text--disabled":(f||h)&&DCe(kp(u,i),n.props),"react-datepicker__quarter-text--selected":n.isSelectedQuarter(u,i,d),"react-datepicker__quarter-text--keyboard-selected":!m&&Zp(p)===i,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(i),"react-datepicker__quarter-text--in-range":jT(l,c,i,u),"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(i),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(i)})}),Y(q(n),"getMonthContent",function(i){var a=n.props,u=a.showFullMonthYearPicker,l=a.renderMonthContent,c=a.locale,d=a.day,f=R9(i,c),h=AM(i,c);return l?l(i,f,h,d):u?h:f}),Y(q(n),"getQuarterContent",function(i){var a=n.props,u=a.renderQuarterContent,l=function(c,d){return vr(kp(Gn(),c),"QQQ",d)}(i,a.locale);return u?u(i,l):l}),Y(q(n),"renderMonths",function(){var i=n.props,a=i.showTwoColumnMonthYearPicker,u=i.showFourColumnMonthYearPicker,l=i.day,c=i.selected;return WT[Rz(u,a)].grid.map(function(d,f){return ee.createElement("div",{className:"react-datepicker__month-wrapper",key:f},d.map(function(h,p){return ee.createElement("div",{ref:n.MONTH_REFS[h],key:p,onClick:function(m){n.onMonthClick(m,h)},onKeyDown:function(m){n.onMonthKeyDown(m,h)},onMouseEnter:function(){return n.onMonthMouseEnter(h)},tabIndex:n.getTabIndex(h),className:n.getMonthClassNames(h),role:"option","aria-label":n.getAriaLabel(h),"aria-current":n.isCurrentMonth(l,h)?"date":void 0,"aria-selected":n.isSelectedMonth(l,h,c)},n.getMonthContent(h))}))})}),Y(q(n),"renderQuarters",function(){var i=n.props,a=i.day,u=i.selected;return ee.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(l,c){return ee.createElement("div",{key:c,ref:n.QUARTER_REFS[c],role:"option",onClick:function(d){n.onQuarterClick(d,l)},onKeyDown:function(d){n.onQuarterKeyDown(d,l)},onMouseEnter:function(){return n.onQuarterMouseEnter(l)},className:n.getQuarterClassNames(l),"aria-selected":n.isSelectedQuarter(a,l,u),tabIndex:n.getQuarterTabIndex(l),"aria-current":n.isCurrentQuarter(a,l)?"date":void 0},n.getQuarterContent(l))}))}),Y(q(n),"getClassNames",function(){var i=n.props,a=i.selectingDate,u=i.selectsStart,l=i.selectsEnd,c=i.showMonthYearPicker,d=i.showQuarterYearPicker,f=i.showWeekPicker;return Ae("react-datepicker__month",{"react-datepicker__month--selecting-range":a&&(u||l)},{"react-datepicker__monthPicker":c},{"react-datepicker__quarterPicker":d},{"react-datepicker__weekPicker":f})}),n}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){var n=this.props,r=n.showMonthYearPicker,o=n.showQuarterYearPicker,s=n.day,i=n.ariaLabelPrefix,a=i===void 0?"month ":i;return ee.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(a," ").concat(vr(s,"yyyy-MM")),role:"listbox"},r?this.renderMonths():o?this.renderQuarters():this.renderWeeks())}}]),e}(),B9=function(t){function e(){var n;Mo(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return Y(q(n=$o(this,e,[].concat(o))),"state",{height:null}),Y(q(n),"scrollToTheSelectedTime",function(){requestAnimationFrame(function(){n.list&&(n.list.scrollTop=n.centerLi&&e.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-n.header.clientHeight:n.list.clientHeight,n.centerLi))})}),Y(q(n),"handleClick",function(i){(n.props.minTime||n.props.maxTime)&&wz(i,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&bz(i,n.props)||n.props.onChange(i)}),Y(q(n),"isSelectedTime",function(i){return n.props.selected&&(a=n.props.selected,u=i,Tz(a).getTime()===Tz(u).getTime());var a,u}),Y(q(n),"isDisabledTime",function(i){return(n.props.minTime||n.props.maxTime)&&wz(i,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&bz(i,n.props)}),Y(q(n),"liClasses",function(i){var a=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(i):void 0];return n.isSelectedTime(i)&&a.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(i)&&a.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(60*zu(i)+Wu(i))%n.props.intervals!=0&&a.push("react-datepicker__time-list-item--injected"),a.join(" ")}),Y(q(n),"handleOnKeyDown",function(i,a){i.key===" "&&(i.preventDefault(),i.key="Enter"),i.key!=="ArrowUp"&&i.key!=="ArrowLeft"||!i.target.previousSibling||(i.preventDefault(),i.target.previousSibling.focus()),i.key!=="ArrowDown"&&i.key!=="ArrowRight"||!i.target.nextSibling||(i.preventDefault(),i.target.nextSibling.focus()),i.key==="Enter"&&n.handleClick(a),n.props.handleOnKeyDown(i)}),Y(q(n),"renderTimes",function(){for(var i=[],a=n.props.format?n.props.format:"p",u=n.props.intervals,l=n.props.selected||n.props.openToDate||Gn(),c=ju(l),d=n.props.injectTimes&&n.props.injectTimes.sort(function(y,x){return y-x}),f=60*function(y){var x=new Date(y.getFullYear(),y.getMonth(),y.getDate()),b=new Date(y.getFullYear(),y.getMonth(),y.getDate(),24);return Math.round((+b-+x)/36e5)}(l),h=f/u,p=0;p<h;p++){var m=IR(c,p*u);if(i.push(m),d){var g=OCe(c,m,p,u,d);i=i.concat(g)}}var v=i.reduce(function(y,x){return x.getTime()<=l.getTime()?x:y},i[0]);return i.map(function(y,x){return ee.createElement("li",{key:x,onClick:n.handleClick.bind(q(n),y),className:n.liClasses(y),ref:function(b){y===v&&(n.centerLi=b)},onKeyDown:function(b){n.handleOnKeyDown(b,y)},tabIndex:y===v?0:-1,role:"option","aria-selected":n.isSelectedTime(y)?"true":void 0,"aria-disabled":n.isDisabledTime(y)?"true":void 0},vr(y,a,n.props.locale))})}),n}return Fo(e,ee.Component),Po(e,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var n=this,r=this.state.height;return ee.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},ee.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(o){n.header=o}},ee.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),ee.createElement("div",{className:"react-datepicker__time"},ee.createElement("div",{className:"react-datepicker__time-box"},ee.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){n.list=o},style:r?{height:r}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),e}();Y(B9,"calcCenterPosition",function(t,e){return e.offsetTop-(t/2-e.clientHeight/2)});var HCe=function(t){function e(n){var r;return Mo(this,e),Y(q(r=$o(this,e,[n])),"YEAR_REFS",xh(Array(r.props.yearItemNumber)).map(function(){return ee.createRef()})),Y(q(r),"isDisabled",function(o){return XS(o,r.props)}),Y(q(r),"isExcluded",function(o){return $M(o,r.props)}),Y(q(r),"selectingDate",function(){var o;return(o=r.props.selectingDate)!==null&&o!==void 0?o:r.props.preSelection}),Y(q(r),"updateFocusOnPaginate",function(o){var s=(function(){this.YEAR_REFS[o].current.focus()}).bind(q(r));window.requestAnimationFrame(s)}),Y(q(r),"handleYearClick",function(o,s){r.props.onDayClick&&r.props.onDayClick(o,s)}),Y(q(r),"handleYearNavigation",function(o,s){var i=r.props,a=i.date,u=i.yearItemNumber,l=em(a,u).startPeriod;r.isDisabled(s)||r.isExcluded(s)||(r.props.setPreSelection(s),o-l==-1?r.updateFocusOnPaginate(u-1):o-l===u?r.updateFocusOnPaginate(0):r.YEAR_REFS[o-l].current.focus())}),Y(q(r),"isSameDay",function(o,s){return Un(o,s)}),Y(q(r),"isCurrentYear",function(o){return o===Kt(Gn())}),Y(q(r),"isRangeStart",function(o){return r.props.startDate&&r.props.endDate&&ed($l(Gn(),o),r.props.startDate)}),Y(q(r),"isRangeEnd",function(o){return r.props.startDate&&r.props.endDate&&ed($l(Gn(),o),r.props.endDate)}),Y(q(r),"isInRange",function(o){return BT(o,r.props.startDate,r.props.endDate)}),Y(q(r),"isInSelectingRange",function(o){var s=r.props,i=s.selectsStart,a=s.selectsEnd,u=s.selectsRange,l=s.startDate,c=s.endDate;return!(!(i||a||u)||!r.selectingDate())&&(i&&c?BT(o,r.selectingDate(),c):(a&&l||!(!u||!l||c))&&BT(o,l,r.selectingDate()))}),Y(q(r),"isSelectingRangeStart",function(o){if(!r.isInSelectingRange(o))return!1;var s=r.props,i=s.startDate,a=s.selectsStart,u=$l(Gn(),o);return ed(u,a?r.selectingDate():i)}),Y(q(r),"isSelectingRangeEnd",function(o){if(!r.isInSelectingRange(o))return!1;var s=r.props,i=s.endDate,a=s.selectsEnd,u=s.selectsRange,l=$l(Gn(),o);return ed(l,a||u?r.selectingDate():i)}),Y(q(r),"isKeyboardSelected",function(o){var s=Jv($l(r.props.date,o));return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Un(s,Jv(r.props.selected))&&Un(s,Jv(r.props.preSelection))}),Y(q(r),"onYearClick",function(o,s){var i=r.props.date;r.handleYearClick(Jv($l(i,s)),o)}),Y(q(r),"onYearKeyDown",function(o,s){var i=o.key;if(!r.props.disabledKeyboardNavigation)switch(i){case"Enter":r.onYearClick(o,s),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleYearNavigation(s+1,Jm(r.props.preSelection,1));break;case"ArrowLeft":r.handleYearNavigation(s-1,d0(r.props.preSelection,1))}}),Y(q(r),"getYearClassNames",function(o){var s=r.props,i=s.minDate,a=s.maxDate,u=s.selected,l=s.excludeDates,c=s.includeDates,d=s.filterDate;return Ae("react-datepicker__year-text",{"react-datepicker__year-text--selected":o===Kt(u),"react-datepicker__year-text--disabled":(i||a||l||c||d)&&A9(o,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(o),"react-datepicker__year-text--range-start":r.isRangeStart(o),"react-datepicker__year-text--range-end":r.isRangeEnd(o),"react-datepicker__year-text--in-range":r.isInRange(o),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(o),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(o),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(o),"react-datepicker__year-text--today":r.isCurrentYear(o)})}),Y(q(r),"getYearTabIndex",function(o){return r.props.disabledKeyboardNavigation?"-1":o===Kt(r.props.preSelection)?"0":"-1"}),Y(q(r),"getYearContainerClassNames",function(){var o=r.props,s=o.selectingDate,i=o.selectsStart,a=o.selectsEnd,u=o.selectsRange;return Ae("react-datepicker__year",{"react-datepicker__year--selecting-range":s&&(i||a||u)})}),Y(q(r),"getYearContent",function(o){return r.props.renderYearContent?r.props.renderYearContent(o):o}),r}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){for(var n=this,r=[],o=this.props,s=o.date,i=o.yearItemNumber,a=o.onYearMouseEnter,u=o.onYearMouseLeave,l=em(s,i),c=l.startPeriod,d=l.endPeriod,f=function(p){r.push(ee.createElement("div",{ref:n.YEAR_REFS[p-c],onClick:function(m){n.onYearClick(m,p)},onKeyDown:function(m){n.onYearKeyDown(m,p)},tabIndex:n.getYearTabIndex(p),className:n.getYearClassNames(p),onMouseEnter:function(m){return a(m,p)},onMouseLeave:function(m){return u(m,p)},key:p,"aria-current":n.isCurrentYear(p)?"date":void 0},n.getYearContent(p)))},h=c;h<=d;h++)f(h);return ee.createElement("div",{className:this.getYearContainerClassNames()},ee.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},r))}}]),e}(),GCe=function(t){function e(n){var r;return Mo(this,e),Y(q(r=$o(this,e,[n])),"onTimeChange",function(o){r.setState({time:o});var s=r.props.date,i=s instanceof Date&&!isNaN(s)?s:new Date;i.setHours(o.split(":")[0]),i.setMinutes(o.split(":")[1]),r.props.onChange(i)}),Y(q(r),"renderTimeInput",function(){var o=r.state.time,s=r.props,i=s.date,a=s.timeString,u=s.customTimeInput;return u?ee.cloneElement(u,{date:i,value:o,onChange:r.onTimeChange}):ee.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:o,onChange:function(l){r.onTimeChange(l.target.value||a)}})}),r.state={time:r.props.timeString},r}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){return ee.createElement("div",{className:"react-datepicker__input-time-container"},ee.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),ee.createElement("div",{className:"react-datepicker-time__input-container"},ee.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.timeString!==r.time?{time:n.timeString}:null}}]),e}();function YCe(t){var e=t.className,n=t.children;return ee.createElement("div",{className:e},n)}var qCe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],KCe=function(t){function e(n){var r;return Mo(this,e),Y(q(r=$o(this,e,[n])),"handleClickOutside",function(o){r.props.onClickOutside(o)}),Y(q(r),"setClickOutsideRef",function(){return r.containerRef.current}),Y(q(r),"handleDropdownFocus",function(o){(function(){var s=((arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).className||"").split(/\s+/);return qCe.some(function(i){return s.indexOf(i)>=0})})(o.target)&&r.props.onDropdownFocus()}),Y(q(r),"getDateInView",function(){var o=r.props,s=o.preSelection,i=o.selected,a=o.openToDate,u=$9(r.props),l=M9(r.props),c=Gn(),d=a||i||s;return d||(u&&vh(c,u)?u:l&&Pd(c,l)?l:c)}),Y(q(r),"increaseMonth",function(){r.setState(function(o){var s=o.date;return{date:Za(s,1)}},function(){return r.handleMonthChange(r.state.date)})}),Y(q(r),"decreaseMonth",function(){r.setState(function(o){var s=o.date;return{date:Zm(s,1)}},function(){return r.handleMonthChange(r.state.date)})}),Y(q(r),"handleDayClick",function(o,s,i){r.props.onSelect(o,s,i),r.props.setPreSelection&&r.props.setPreSelection(o)}),Y(q(r),"handleDayMouseEnter",function(o){r.setState({selectingDate:o}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(o)}),Y(q(r),"handleMonthMouseLeave",function(){r.setState({selectingDate:null}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()}),Y(q(r),"handleYearMouseEnter",function(o,s){r.setState({selectingDate:$l(Gn(),s)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(o,s)}),Y(q(r),"handleYearMouseLeave",function(o,s){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(o,s)}),Y(q(r),"handleYearChange",function(o){r.props.onYearChange&&(r.props.onYearChange(o),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(o),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(o)}),Y(q(r),"handleMonthChange",function(o){r.handleCustomMonthChange(o),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(o),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(o)}),Y(q(r),"handleCustomMonthChange",function(o){r.props.onMonthChange&&(r.props.onMonthChange(o),r.setState({isRenderAriaLiveMessage:!0}))}),Y(q(r),"handleMonthYearChange",function(o){r.handleYearChange(o),r.handleMonthChange(o)}),Y(q(r),"changeYear",function(o){r.setState(function(s){var i=s.date;return{date:$l(i,o)}},function(){return r.handleYearChange(r.state.date)})}),Y(q(r),"changeMonth",function(o){r.setState(function(s){var i=s.date;return{date:_s(i,o)}},function(){return r.handleMonthChange(r.state.date)})}),Y(q(r),"changeMonthYear",function(o){r.setState(function(s){var i=s.date;return{date:$l(_s(i,ls(o)),Kt(o))}},function(){return r.handleMonthYearChange(r.state.date)})}),Y(q(r),"header",function(){var o=ja(arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.state.date,r.props.locale,r.props.calendarStartDay),s=[];return r.props.showWeekNumbers&&s.push(ee.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),s.concat([0,1,2,3,4,5,6].map(function(i){var a=nf(o,i),u=r.formatWeekday(a,r.props.locale),l=r.props.weekDayClassName?r.props.weekDayClassName(a):void 0;return ee.createElement("div",{key:i,className:Ae("react-datepicker__day-name",l)},u)}))}),Y(q(r),"formatWeekday",function(o,s){return r.props.formatWeekDay?function(i,a,u){return a(vr(i,"EEEE",u))}(o,r.props.formatWeekDay,s):r.props.useWeekdaysShort?function(i,a){return vr(i,"EEE",a)}(o,s):function(i,a){return vr(i,"EEEEEE",a)}(o,s)}),Y(q(r),"decreaseYear",function(){r.setState(function(o){var s=o.date;return{date:d0(s,r.props.showYearPicker?r.props.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})}),Y(q(r),"clearSelectingDate",function(){r.setState({selectingDate:null})}),Y(q(r),"renderPreviousButton",function(){if(!r.props.renderCustomHeader){var o;switch(!0){case r.props.showMonthYearPicker:o=Sz(r.state.date,r.props);break;case r.props.showYearPicker:o=function(g){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=v.minDate,x=v.yearItemNumber,b=x===void 0?Cy:x,C=em(Jv(d0(g,b)),b).endPeriod,S=y&&Kt(y);return S&&S>C||!1}(r.state.date,r.props);break;default:o=kz(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!o)&&!r.props.showTimeSelectOnly){var s=["react-datepicker__navigation","react-datepicker__navigation--previous"],i=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(i=r.decreaseYear),o&&r.props.showDisabledMonthNavigation&&(s.push("react-datepicker__navigation--previous--disabled"),i=null);var a=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,u=r.props,l=u.previousMonthButtonLabel,c=u.previousYearButtonLabel,d=r.props,f=d.previousMonthAriaLabel,h=f===void 0?typeof l=="string"?l:"Previous Month":f,p=d.previousYearAriaLabel,m=p===void 0?typeof c=="string"?c:"Previous Year":p;return ee.createElement("button",{type:"button",className:s.join(" "),onClick:i,onKeyDown:r.props.handleOnKeyDown,"aria-label":a?m:h},ee.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},a?r.props.previousYearButtonLabel:r.props.previousMonthButtonLabel))}}}),Y(q(r),"increaseYear",function(){r.setState(function(o){var s=o.date;return{date:Jm(s,r.props.showYearPicker?r.props.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})}),Y(q(r),"renderNextButton",function(){if(!r.props.renderCustomHeader){var o;switch(!0){case r.props.showMonthYearPicker:o=Ez(r.state.date,r.props);break;case r.props.showYearPicker:o=function(g){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=v.maxDate,x=v.yearItemNumber,b=x===void 0?Cy:x,C=em(Jm(g,b),b).startPeriod,S=y&&Kt(y);return S&&S<C||!1}(r.state.date,r.props);break;default:o=Cz(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!o)&&!r.props.showTimeSelectOnly){var s=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&s.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&s.push("react-datepicker__navigation--next--with-today-button");var i=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(i=r.increaseYear),o&&r.props.showDisabledMonthNavigation&&(s.push("react-datepicker__navigation--next--disabled"),i=null);var a=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,u=r.props,l=u.nextMonthButtonLabel,c=u.nextYearButtonLabel,d=r.props,f=d.nextMonthAriaLabel,h=f===void 0?typeof l=="string"?l:"Next Month":f,p=d.nextYearAriaLabel,m=p===void 0?typeof c=="string"?c:"Next Year":p;return ee.createElement("button",{type:"button",className:s.join(" "),onClick:i,onKeyDown:r.props.handleOnKeyDown,"aria-label":a?m:h},ee.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},a?r.props.nextYearButtonLabel:r.props.nextMonthButtonLabel))}}}),Y(q(r),"renderCurrentMonth",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.state.date,s=["react-datepicker__current-month"];return r.props.showYearDropdown&&s.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&s.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&s.push("react-datepicker__current-month--hasMonthYearDropdown"),ee.createElement("div",{className:s.join(" ")},vr(o,r.props.dateFormat,r.props.locale))}),Y(q(r),"renderYearDropdown",function(){var o=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(r.props.showYearDropdown&&!o)return ee.createElement(MCe,{adjustDateOnChange:r.props.adjustDateOnChange,date:r.state.date,onSelect:r.props.onSelect,setOpen:r.props.setOpen,dropdownMode:r.props.dropdownMode,onChange:r.changeYear,minDate:r.props.minDate,maxDate:r.props.maxDate,year:Kt(r.state.date),scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})}),Y(q(r),"renderMonthDropdown",function(){var o=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(r.props.showMonthDropdown&&!o)return ee.createElement(FCe,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,onChange:r.changeMonth,month:ls(r.state.date),useShortMonthInDropdown:r.props.useShortMonthInDropdown})}),Y(q(r),"renderMonthYearDropdown",function(){var o=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(r.props.showMonthYearDropdown&&!o)return ee.createElement(jCe,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,dateFormat:r.props.dateFormat,onChange:r.changeMonthYear,minDate:r.props.minDate,maxDate:r.props.maxDate,date:r.state.date,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown})}),Y(q(r),"handleTodayButtonClick",function(o){r.props.onSelect(yz(),o),r.props.setPreSelection&&r.props.setPreSelection(yz())}),Y(q(r),"renderTodayButton",function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return ee.createElement("div",{className:"react-datepicker__today-button",onClick:function(o){return r.handleTodayButtonClick(o)}},r.props.todayButton)}),Y(q(r),"renderDefaultHeader",function(o){var s=o.monthDate,i=o.i;return ee.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(s),ee.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(i!==0),r.renderMonthYearDropdown(i!==0),r.renderYearDropdown(i!==0)),ee.createElement("div",{className:"react-datepicker__day-names"},r.header(s)))}),Y(q(r),"renderCustomHeader",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=o.monthDate,i=o.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var a=kz(r.state.date,r.props),u=Cz(r.state.date,r.props),l=Sz(r.state.date,r.props),c=Ez(r.state.date,r.props),d=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return ee.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},r.props.renderCustomHeader(Fl(Fl({},r.state),{},{customHeaderCount:i,monthDate:s,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:a,nextMonthButtonDisabled:u,prevYearButtonDisabled:l,nextYearButtonDisabled:c})),d&&ee.createElement("div",{className:"react-datepicker__day-names"},r.header(s)))}),Y(q(r),"renderYearHeader",function(){var o=r.state.date,s=r.props,i=s.showYearPicker,a=em(o,s.yearItemNumber),u=a.startPeriod,l=a.endPeriod;return ee.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},i?"".concat(u," - ").concat(l):Kt(o))}),Y(q(r),"renderHeader",function(o){switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(o);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(o);default:return r.renderDefaultHeader(o)}}),Y(q(r),"renderMonths",function(){var o;if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var s=[],i=r.props.showPreviousMonths?r.props.monthsShown-1:0,a=Zm(r.state.date,i),u=(o=r.props.monthSelectedIn)!==null&&o!==void 0?o:i,l=0;l<r.props.monthsShown;++l){var c=Za(a,l-u+i),d="month-".concat(l),f=l<r.props.monthsShown-1,h=l>0;s.push(ee.createElement("div",{key:d,ref:function(p){r.monthContainer=p},className:"react-datepicker__month-container"},r.renderHeader({monthDate:c,i:l}),ee.createElement(VCe,{chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,ariaLabelPrefix:r.props.monthAriaLabelPrefix,onChange:r.changeMonthYear,day:c,dayClassName:r.props.dayClassName,calendarStartDay:r.props.calendarStartDay,monthClassName:r.props.monthClassName,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,onWeekSelect:r.props.onWeekSelect,orderInDisplay:l,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.state.selectingDate,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,fixedHeight:r.props.fixedHeight,filterDate:r.props.filterDate,preSelection:r.props.preSelection,setPreSelection:r.props.setPreSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumbers:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,peekNextMonth:r.props.peekNextMonth,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,isInputFocused:r.props.isInputFocused,containerRef:r.containerRef,monthShowsDuplicateDaysEnd:f,monthShowsDuplicateDaysStart:h})))}return s}}),Y(q(r),"renderYears",function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?ee.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader(),ee.createElement(HCe,p0({onDayClick:r.handleDayClick,selectingDate:r.state.selectingDate,clearSelectingDate:r.clearSelectingDate,date:r.state.date},r.props,{onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave}))):void 0}),Y(q(r),"renderTimeSection",function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return ee.createElement(B9,{selected:r.props.selected,openToDate:r.props.openToDate,onChange:r.props.onTimeChange,timeClassName:r.props.timeClassName,format:r.props.timeFormat,includeTimes:r.props.includeTimes,intervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,todayButton:r.props.todayButton,showMonthDropdown:r.props.showMonthDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,monthRef:r.state.monthContainer,injectTimes:r.props.injectTimes,locale:r.props.locale,handleOnKeyDown:r.props.handleOnKeyDown,showTimeSelectOnly:r.props.showTimeSelectOnly})}),Y(q(r),"renderInputTimeSection",function(){var o=new Date(r.props.selected),s=Hc(o)&&r.props.selected?"".concat(Iz(o.getHours()),":").concat(Iz(o.getMinutes())):"";if(r.props.showTimeInput)return ee.createElement(GCe,{date:o,timeString:s,timeInputLabel:r.props.timeInputLabel,onChange:r.props.onTimeChange,customTimeInput:r.props.customTimeInput})}),Y(q(r),"renderAriaLiveRegion",function(){var o,s=em(r.state.date,r.props.yearItemNumber),i=s.startPeriod,a=s.endPeriod;return o=r.props.showYearPicker?"".concat(i," - ").concat(a):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Kt(r.state.date):"".concat(AM(ls(r.state.date),r.props.locale)," ").concat(Kt(r.state.date)),ee.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&o)}),Y(q(r),"renderChildren",function(){if(r.props.children)return ee.createElement("div",{className:"react-datepicker__children-container"},r.props.children)}),r.containerRef=ee.createRef(),r.state={date:r.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},r}return Fo(e,ee.Component),Po(e,[{key:"componentDidMount",value:function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=void n.setState({monthContainer:n.monthContainer}))}},{key:"componentDidUpdate",value:function(n){var r=this;if(!this.props.preSelection||Un(this.props.preSelection,n.preSelection)&&this.props.monthSelectedIn===n.monthSelectedIn)this.props.openToDate&&!Un(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate});else{var o=!Ma(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return o&&r.handleCustomMonthChange(r.state.date)})}}},{key:"render",value:function(){var n=this.props.container||YCe;return ee.createElement("div",{style:{display:"contents"},ref:this.containerRef},ee.createElement(n,{className:Ae("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly})},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Cy}}}]),e}(),XCe=function(t){var e=t.icon,n=t.className,r=n===void 0?"":n,o=t.onClick,s="react-datepicker__calendar-icon";return ee.isValidElement(e)?ee.cloneElement(e,{className:"".concat(e.props.className||""," ").concat(s," ").concat(r),onClick:function(i){typeof e.props.onClick=="function"&&e.props.onClick(i),typeof o=="function"&&o(i)}}):typeof e=="string"?ee.createElement("i",{className:"".concat(s," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:o}):ee.createElement("svg",{className:"".concat(s," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:o},ee.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},j9=function(t){function e(n){var r;return Mo(this,e),(r=$o(this,e,[n])).el=document.createElement("div"),r}return Fo(e,ee.Component),Po(e,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return jf.createPortal(this.props.children,this.el)}}]),e}(),QCe=function(t){return!t.disabled&&t.tabIndex!==-1},W9=function(t){function e(n){var r;return Mo(this,e),Y(q(r=$o(this,e,[n])),"getTabChildren",function(){return Array.prototype.slice.call(r.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(QCe)}),Y(q(r),"handleFocusStart",function(){var o=r.getTabChildren();o&&o.length>1&&o[o.length-1].focus()}),Y(q(r),"handleFocusEnd",function(){var o=r.getTabChildren();o&&o.length>1&&o[0].focus()}),r.tabLoopRef=ee.createRef(),r}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){return this.props.enableTabLoop?ee.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},ee.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,ee.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),e}(),Oz,JCe=(Oz=function(t){function e(){return Mo(this,e),$o(this,e,arguments)}return Fo(e,ee.Component),Po(e,[{key:"render",value:function(){var n,r=this.props,o=r.className,s=r.wrapperClassName,i=r.hidePopper,a=r.popperComponent,u=r.targetComponent,l=r.enableTabLoop,c=r.popperOnKeyDown,d=r.portalId,f=r.portalHost,h=r.popperProps,p=r.showArrow;if(!i){var m=Ae("react-datepicker-popper",o);n=ee.createElement(W9,{enableTabLoop:l},ee.createElement("div",{ref:h.refs.setFloating,style:h.floatingStyles,className:m,"data-placement":h.placement,onKeyDown:c},a,p&&ee.createElement(wCe,{ref:h.arrowRef,context:h.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(n=ee.createElement(this.props.popperContainer,{},n)),d&&!i&&(n=ee.createElement(j9,{portalId:d,portalHost:f},n));var g=Ae("react-datepicker-wrapper",s);return ee.createElement(ee.Fragment,null,ee.createElement("div",{ref:h.refs.setReference,className:g},u),n)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0}}}]),e}(),function(t){var e=Fl(Fl({},t),{},{popperModifiers:t.popperModifiers||[],popperProps:t.popperProps||{},hidePopper:typeof t.hidePopper!="boolean"||t.hidePopper}),n=ee.useRef(),r=ICe(Fl({open:!e.hidePopper,whileElementsMounted:cCe,placement:e.popperPlacement,middleware:[dCe({padding:15}),qke(10),hCe({element:n})].concat(xh(e.popperModifiers))},e.popperProps));return ee.createElement(Oz,p0({},e,{popperProps:Fl(Fl({},r),{},{arrowRef:n})}))}),Az="react-datepicker-ignore-onclickoutside",ZCe=GS(KCe),zT="Date input not valid.",$z=function(t){function e(n){var r;return Mo(this,e),Y(q(r=$o(this,e,[n])),"getPreSelection",function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Gn()}),Y(q(r),"modifyHolidays",function(){var o;return(o=r.props.holidays)===null||o===void 0?void 0:o.reduce(function(s,i){var a=new Date(i.date);return l0(a)?[].concat(xh(s),[Fl(Fl({},i),{},{date:a})]):s},[])}),Y(q(r),"calcInitialState",function(){var o,s=r.getPreSelection(),i=$9(r.props),a=M9(r.props),u=i&&vh(s,ju(i))?i:a&&Pd(s,DR(a))?a:s;return{open:r.props.startOpen||!1,preventFocus:!1,preSelection:(o=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&o!==void 0?o:u,highlightDates:_z(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}}),Y(q(r),"clearPreventFocusTimeout",function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)}),Y(q(r),"setFocus",function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})}),Y(q(r),"setBlur",function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()}),Y(q(r),"setOpen",function(o){var s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];r.setState({open:o,preSelection:o&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:UT},function(){o||r.setState(function(i){return{focused:!!s&&i.focused}},function(){!s&&r.setBlur(),r.setState({inputValue:null})})})}),Y(q(r),"inputOk",function(){return gh(r.state.preSelection)}),Y(q(r),"isCalendarOpen",function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open}),Y(q(r),"handleFocus",function(o){r.state.preventFocus||(r.props.onFocus(o),r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})}),Y(q(r),"sendFocusBackToInput",function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})}),Y(q(r),"cancelFocusInput",function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=null}),Y(q(r),"deferFocusInput",function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)}),Y(q(r),"handleDropdownFocus",function(){r.cancelFocusInput()}),Y(q(r),"handleBlur",function(o){(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&r.props.onBlur(o),r.setState({focused:!1})}),Y(q(r),"handleCalendarClickOutside",function(o){r.props.inline||r.setOpen(!1),r.props.onClickOutside(o),r.props.withPortal&&o.preventDefault()}),Y(q(r),"handleChange",function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];var a=s[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(q(r),s),typeof a.isDefaultPrevented=="function"&&!a.isDefaultPrevented())){r.setState({inputValue:a.target.value,lastPreSelectChange:e2e});var u,l,c,d,f,h,p,m,g=(u=a.target.value,l=r.props.dateFormat,c=r.props.locale,d=r.props.strictParsing,f=r.props.minDate,h=null,p=wd(c)||wd(nh()),m=!0,Array.isArray(l)?(l.forEach(function(v){var y=AT(u,v,new Date,{locale:p,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});d&&(m=Hc(y,f)&&u===vr(y,v,c)),Hc(y,f)&&m&&(h=y)}),h):(h=AT(u,l,new Date,{locale:p,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),d?m=Hc(h)&&u===vr(h,l,c):Hc(h)||(l=l.match(NCe).map(function(v){var y=v[0];if(y==="p"||y==="P"){var x=CC[y];return p?x(v,p.formatLong):y}return v}).join(""),u.length>0&&(h=AT(u,l.slice(0,u.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),Hc(h)||(h=new Date(u))),Hc(h)&&m?h:null));r.props.showTimeSelectOnly&&r.props.selected&&g&&!Un(g,r.props.selected)&&(g=TCe(r.props.selected,{hours:zu(g),minutes:Wu(g),seconds:ez(g)})),!g&&a.target.value||(r.props.showWeekPicker&&(g=ja(g,r.props.locale,r.props.calendarStartDay)),r.setSelected(g,a,!0))}}),Y(q(r),"handleSelect",function(o,s,i){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(s),r.props.showWeekPicker&&(o=ja(o,r.props.locale,r.props.calendarStartDay)),r.setSelected(o,s,!1,i),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(o);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var a=r.props,u=a.startDate,l=a.endDate;!u||l||Dz(o,u)||r.setOpen(!1)}}),Y(q(r),"setSelected",function(o,s,i,a){var u=o;if(r.props.showYearPicker){if(u!==null&&A9(Kt(u),r.props))return}else if(r.props.showMonthYearPicker){if(u!==null&&O9(u,r.props))return}else if(u!==null&&XS(u,r.props))return;var l=r.props,c=l.onChange,d=l.selectsRange,f=l.startDate,h=l.endDate;if(!Wf(r.props.selected,u)||r.props.allowSameDay||d)if(u!==null&&(!r.props.selected||i&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(u=gz(u,{hour:zu(r.props.selected),minute:Wu(r.props.selected),second:ez(r.props.selected)})),r.props.inline||r.setState({preSelection:u}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:a})),d){var p=f&&!h,m=f&&h;!f&&!h?c([u,null],s):p&&(Dz(u,f)?c([u,null],s):c([f,u],s)),m&&c([u,null],s)}else c(u,s);i||(r.props.onSelect(u,s),r.setState({inputValue:null}))}),Y(q(r),"setPreSelection",function(o){var s=r.props.minDate!==void 0,i=r.props.maxDate!==void 0,a=!0;if(o){r.props.showWeekPicker&&(o=ja(o,r.props.locale,r.props.calendarStartDay));var u=ju(o);if(s&&i)a=pk(o,r.props.minDate,r.props.maxDate);else if(s){var l=ju(r.props.minDate);a=Pd(o,l)||Wf(u,l)}else if(i){var c=DR(r.props.maxDate);a=vh(o,c)||Wf(u,c)}}a&&r.setState({preSelection:o})}),Y(q(r),"toggleCalendar",function(){r.setOpen(!r.state.open)}),Y(q(r),"handleTimeChange",function(o){var s=r.props.selected?r.props.selected:r.getPreSelection(),i=r.props.selected?o:gz(s,{hour:zu(o),minute:Wu(o)});r.setState({preSelection:i}),r.props.onChange(i),r.props.shouldCloseOnSelect&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}),Y(q(r),"onInputClick",function(){r.props.disabled||r.props.readOnly||r.setOpen(!0),r.props.onInputClick()}),Y(q(r),"onInputKeyDown",function(o){r.props.onKeyDown(o);var s=o.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if(s==="ArrowDown"||s==="ArrowUp"){o.preventDefault();var i=r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',a=r.calendar.componentNode&&r.calendar.componentNode.querySelector(i);return void(a&&a.focus({preventScroll:!0}))}var u=Gn(r.state.preSelection);s==="Enter"?(o.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===UT?(r.handleSelect(u,o),!r.props.shouldCloseOnSelect&&r.setPreSelection(u)):r.setOpen(!1)):s==="Escape"?(o.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1)):s==="Tab"&&r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:zT})}}else s!=="ArrowDown"&&s!=="ArrowUp"&&s!=="Enter"||r.onInputClick()}),Y(q(r),"onPortalKeyDown",function(o){o.key==="Escape"&&(o.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))}),Y(q(r),"onDayKeyDown",function(o){r.props.onKeyDown(o);var s=o.key,i=o.shiftKey,a=Gn(r.state.preSelection);if(s==="Enter")o.preventDefault(),r.handleSelect(a,o),!r.props.shouldCloseOnSelect&&r.setPreSelection(a);else if(s==="Escape")o.preventDefault(),r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:zT});else if(!r.props.disabledKeyboardNavigation){var u;switch(s){case"ArrowLeft":u=r.props.showWeekPicker?ZW(a,1):Qbe(a,1);break;case"ArrowRight":u=r.props.showWeekPicker?SC(a,1):nf(a,1);break;case"ArrowUp":u=ZW(a,1);break;case"ArrowDown":u=SC(a,1);break;case"PageUp":u=i?d0(a,1):Zm(a,1);break;case"PageDown":u=i?Jm(a,1):Za(a,1);break;case"Home":u=ja(a,r.props.locale,r.props.calendarStartDay);break;case"End":u=nwe(a);break;default:u=null}if(!u)return void(r.props.onInputError&&r.props.onInputError({code:1,msg:zT}));if(o.preventDefault(),r.setState({lastPreSelectChange:UT}),r.props.adjustDateOnChange&&r.setSelected(u),r.setPreSelection(u),r.props.inline){var l=ls(a),c=ls(u),d=Kt(a),f=Kt(u);l!==c||d!==f?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}}),Y(q(r),"onPopperKeyDown",function(o){o.key==="Escape"&&(o.preventDefault(),r.sendFocusBackToInput())}),Y(q(r),"onClearClick",function(o){o&&o.preventDefault&&o.preventDefault(),r.sendFocusBackToInput(),r.props.selectsRange?r.props.onChange([null,null],o):r.props.onChange(null,o),r.setState({inputValue:null})}),Y(q(r),"clear",function(){r.onClearClick()}),Y(q(r),"onScroll",function(o){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?o.target!==document&&o.target!==document.documentElement&&o.target!==document.body||r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(o)&&r.setOpen(!1)}),Y(q(r),"renderCalendar",function(){return r.props.inline||r.isCalendarOpen()?ee.createElement(ZCe,{ref:function(o){r.calendar=o},locale:r.props.locale,calendarStartDay:r.props.calendarStartDay,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,monthAriaLabelPrefix:r.props.monthAriaLabelPrefix,adjustDateOnChange:r.props.adjustDateOnChange,setOpen:r.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,dateFormat:r.props.dateFormatCalendar,useWeekdaysShort:r.props.useWeekdaysShort,formatWeekDay:r.props.formatWeekDay,dropdownMode:r.props.dropdownMode,selected:r.props.selected,preSelection:r.state.preSelection,onSelect:r.handleSelect,onWeekSelect:r.props.onWeekSelect,openToDate:r.props.openToDate,minDate:r.props.minDate,maxDate:r.props.maxDate,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,startDate:r.props.startDate,endDate:r.props.endDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,filterDate:r.props.filterDate,onClickOutside:r.handleCalendarClickOutside,formatWeekNumber:r.props.formatWeekNumber,highlightDates:r.state.highlightDates,holidays:RCe(r.modifyHolidays()),includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,includeTimes:r.props.includeTimes,injectTimes:r.props.injectTimes,inline:r.props.inline,shouldFocusDayInline:r.state.shouldFocusDayInline,peekNextMonth:r.props.peekNextMonth,showMonthDropdown:r.props.showMonthDropdown,showPreviousMonths:r.props.showPreviousMonths,useShortMonthInDropdown:r.props.useShortMonthInDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showWeekNumbers:r.props.showWeekNumbers,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,forceShowMonthNavigation:r.props.forceShowMonthNavigation,showDisabledMonthNavigation:r.props.showDisabledMonthNavigation,scrollableYearDropdown:r.props.scrollableYearDropdown,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,todayButton:r.props.todayButton,weekLabel:r.props.weekLabel,outsideClickIgnoreClass:Az,fixedHeight:r.props.fixedHeight,monthsShown:r.props.monthsShown,monthSelectedIn:r.state.monthSelectedIn,onDropdownFocus:r.handleDropdownFocus,onMonthChange:r.props.onMonthChange,onYearChange:r.props.onYearChange,dayClassName:r.props.dayClassName,weekDayClassName:r.props.weekDayClassName,monthClassName:r.props.monthClassName,timeClassName:r.props.timeClassName,showDateSelect:r.props.showDateSelect,showTimeSelect:r.props.showTimeSelect,showTimeSelectOnly:r.props.showTimeSelectOnly,onTimeChange:r.handleTimeChange,timeFormat:r.props.timeFormat,timeIntervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,className:r.props.calendarClassName,container:r.props.calendarContainer,yearItemNumber:r.props.yearItemNumber,yearDropdownItemNumber:r.props.yearDropdownItemNumber,previousMonthAriaLabel:r.props.previousMonthAriaLabel,previousMonthButtonLabel:r.props.previousMonthButtonLabel,nextMonthAriaLabel:r.props.nextMonthAriaLabel,nextMonthButtonLabel:r.props.nextMonthButtonLabel,previousYearAriaLabel:r.props.previousYearAriaLabel,previousYearButtonLabel:r.props.previousYearButtonLabel,nextYearAriaLabel:r.props.nextYearAriaLabel,nextYearButtonLabel:r.props.nextYearButtonLabel,timeInputLabel:r.props.timeInputLabel,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderCustomHeader:r.props.renderCustomHeader,popperProps:r.props.popperProps,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,onDayMouseEnter:r.props.onDayMouseEnter,onMonthMouseLeave:r.props.onMonthMouseLeave,onYearMouseEnter:r.props.onYearMouseEnter,onYearMouseLeave:r.props.onYearMouseLeave,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showTimeInput:r.props.showTimeInput,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,excludeScrollbar:r.props.excludeScrollbar,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,isInputFocused:r.state.focused,customTimeInput:r.props.customTimeInput,setPreSelection:r.setPreSelection},r.props.children):null}),Y(q(r),"renderAriaLiveRegion",function(){var o,s=r.props,i=s.dateFormat,a=s.locale,u=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return o=r.props.selectsRange?"Selected start date: ".concat(pu(r.props.startDate,{dateFormat:u,locale:a}),". ").concat(r.props.endDate?"End date: "+pu(r.props.endDate,{dateFormat:u,locale:a}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(pu(r.props.selected,{dateFormat:i,locale:a})):r.props.showYearPicker?"Selected year: ".concat(pu(r.props.selected,{dateFormat:"yyyy",locale:a})):r.props.showMonthYearPicker?"Selected month: ".concat(pu(r.props.selected,{dateFormat:"MMMM yyyy",locale:a})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(pu(r.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):"Selected date: ".concat(pu(r.props.selected,{dateFormat:u,locale:a})),ee.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},o)}),Y(q(r),"renderDateInput",function(){var o,s=Ae(r.props.className,Y({},Az,r.state.open)),i=r.props.customInput||ee.createElement("input",{type:"text"}),a=r.props.customInputRef||"ref",u=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?function(l,c,d){if(!l)return"";var f=pu(l,d),h=c?pu(c,d):"";return"".concat(f," - ").concat(h)}(r.props.startDate,r.props.endDate,r.props):pu(r.props.selected,r.props);return ee.cloneElement(i,(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(o={},a,function(l){r.input=l}),"value",u),"onBlur",r.handleBlur),"onChange",r.handleChange),"onClick",r.onInputClick),"onFocus",r.handleFocus),"onKeyDown",r.onInputKeyDown),"id",r.props.id),"name",r.props.name),"form",r.props.form),Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(o,"autoFocus",r.props.autoFocus),"placeholder",r.props.placeholderText),"disabled",r.props.disabled),"autoComplete",r.props.autoComplete),"className",Ae(i.props.className,s)),"title",r.props.title),"readOnly",r.props.readOnly),"required",r.props.required),"tabIndex",r.props.tabIndex),"aria-describedby",r.props.ariaDescribedBy),Y(Y(Y(o,"aria-invalid",r.props.ariaInvalid),"aria-labelledby",r.props.ariaLabelledBy),"aria-required",r.props.ariaRequired)))}),Y(q(r),"renderClearButton",function(){var o=r.props,s=o.isClearable,i=o.disabled,a=o.selected,u=o.startDate,l=o.endDate,c=o.clearButtonTitle,d=o.clearButtonClassName,f=d===void 0?"":d,h=o.ariaLabelClose,p=h===void 0?"Close":h;return!s||a==null&&u==null&&l==null?null:ee.createElement("button",{type:"button",className:Ae("react-datepicker__close-icon",f,{"react-datepicker__close-icon--disabled":i}),disabled:i,"aria-label":p,onClick:r.onClearClick,title:c,tabIndex:-1})}),r.state=r.calcInitialState(),r.preventFocusTimeout=null,r}return Fo(e,ee.Component),Po(e,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(n,r){var o,s;n.inline&&(o=n.selected,s=this.props.selected,o&&s?ls(o)!==ls(s)||Kt(o)!==Kt(s):o!==s)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:_z(this.props.highlightDates)}),r.focused||Wf(n.selected,this.props.selected)||this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&this.props.onCalendarOpen(),r.open===!0&&this.state.open===!1&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var n=this.props,r=n.showIcon,o=n.icon,s=n.calendarIconClassname,i=n.toggleCalendarOnIconClick,a=this.state.open;return ee.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&ee.createElement(XCe,p0({icon:o,className:"".concat(s," ").concat(a&&"react-datepicker-ignore-onclickoutside")},i?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?ee.createElement(W9,{enableTabLoop:this.props.enableTabLoop},ee.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=ee.createElement(j9,{portalId:this.props.portalId,portalHost:this.props.portalHost},r)),ee.createElement("div",null,this.renderInputContainer(),r)}return ee.createElement(JCe,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:n,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop,showArrow:this.props.showPopperArrow})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Cy,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),e}(),e2e="input",UT="navigate";function z9(t){const e=Wh(),[n]=fme();console.log("location",e.search),console.log("search",n.get("search"));const r=Tt(b=>b.AUCTION.auctions);console.log("allAuction",r);const[o,s]=D.useState(null),[i,a]=D.useState(null),[u,l]=D.useState("mode2"),[c,d]=D.useState("not yet auctioned"),[f,h]=D.useState(""),p=b=>{d(b)},m=()=>{l(u==="mode1"?"mode2":"mode1")},[g,v]=D.useState(1),y=8;console.log("time-start",o),console.log("time-end",i);const x=b=>v(b);return w.jsx(Fs,{className:"mb-3",children:w.jsx("div",{className:"app-container",children:w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"},children:w.jsx("div",{style:{paddingTop:"32px",paddingBottom:"26px",borderBottom:"1px solid #E0E0E0",backgroundImage:"url('../../../public/assets/images/background/auction.png')",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"},children:w.jsx("h2",{className:"current-page",children:"Danh sách cuộc đấu giá"})})}),w.jsx("div",{className:"container",children:w.jsxs("div",{className:"row high-padding",children:[w.jsxs("div",{className:"col-lg-3 col-md-4 sidebar-content",children:[w.jsx("div",{className:"blog-widget-item fadeInUp",children:w.jsxs("div",{className:"search-area",children:[w.jsxs("div",{className:"sidebar-widget-title",children:[w.jsxs("div",{className:"sidebar-widget-title-text",children:[w.jsx("h4",{children:"Tìm Kiếm"}),w.jsx("span",{className:"hight-light"})]}),w.jsx("div",{className:"sidebar-widget-title-tools"})]}),w.jsxs("div",{className:"blog-widget-body",style:{position:"relative"},children:[w.jsx("div",{className:"input-with-icon",style:{marginBottom:"20px"},children:w.jsx("input",{type:"text",placeholder:"Nhập từ khóa...",value:f,onChange:b=>h(b.target.value)})}),w.jsxs("div",{className:"date-range",children:[w.jsxs("div",{className:"input-with-date",children:[w.jsx($z,{selected:o,onChange:b=>s(b),selectsStart:!0,startDate:o,endDate:i,placeholderText:"Từ ngày"}),w.jsx(kW,{className:"calendar-icon"})]}),w.jsxs("div",{className:"input-with-date",children:[w.jsx($z,{selected:i,onChange:b=>a(b),selectsEnd:!0,startDate:o,endDate:i,minDate:o,placeholderText:"Đến ngày"}),w.jsx(kW,{className:"calendar-icon"})]})]})]})]})}),w.jsx("aside",{className:"widget",children:w.jsx("div",{className:"blog-widget-item fadeInUp",children:w.jsxs("div",{className:"search-area",children:[w.jsxs("div",{className:"sidebar-widget-title",children:[w.jsxs("div",{className:"sidebar-widget-title-text",children:[w.jsx("h4",{children:"Trạng thái tài sản"}),w.jsx("span",{className:"hight-light"})]}),w.jsx("div",{className:"sidebar-widget-title-tools"})]}),w.jsxs("div",{className:"blog-widget-body",children:[w.jsxs("label",{className:`custom-checkbox ${c==="not yet auctioned"&&"active"}`,children:[w.jsx("input",{type:"checkbox",value:"not yet auctioned",checked:c==="not yet auctioned",onChange:()=>p("not yet auctioned")}),"Chưa diễn ra"]}),w.jsxs("label",{className:`custom-checkbox ${c==="about to auction"&&"active"}`,children:[w.jsx("input",{type:"checkbox",value:"about to auction",checked:c==="about to auction",onChange:()=>p("about to auction")}),"Sắp diễn ra"]}),w.jsxs("label",{className:`custom-checkbox ${c==="auctioning"&&"active"}`,children:[w.jsx("input",{type:"checkbox",value:"auctioning",checked:c==="auctioning",onChange:()=>p("auctioning")}),"Đang diễn ra"]}),w.jsxs("label",{className:`custom-checkbox ${c==="auctioned"&&"active"}`,children:[w.jsx("input",{type:"checkbox",value:"auctioned",checked:c==="auctioned",onChange:()=>p("auctioned")}),"Đã kết thúc"]})]})]})})})]}),w.jsxs("div",{className:"col-lg-9 col-md-8",style:{position:"relative",marginBottom:"1px"},children:[w.jsx("div",{className:"view-list",children:w.jsx(vt,{onClick:m,children:u==="mode1"?"Chế độ 1":"Chế độ 2"})}),w.jsxs("div",{className:`row gy-4 mb-60 d-flex list-item ${u==="mode2"?"flex-column":""}`,style:{marginBottom:`${u==="mode2"?"70px":""}`},children:[r.filter(b=>b.product_id.name.toLowerCase().includes(f.toLowerCase())&&(c==="not yet auctioned"&&b.status==="not yet auctioned"||c==="about to auction"&&b.status==="about to auction"||c==="auctioning"&&b.status==="auctioning"||c==="auctioned"&&b.status==="auctioned")&&(!o||!i||o&&i&&new Date(b.registration_start_time)>=o&&new Date(b.endTime)<=i)).map(b=>{var C,S,E;return w.jsx("div",{className:` col-lg-3 col-md-2 ${u==="mode2"?"mb-2":""}`,children:w.jsx(me,{className:"card_auction",style:{width:`${u==="mode2"?"800px":""}`},children:w.jsxs("div",{style:{display:`${u==="mode2"?"flex":""}`},children:[w.jsx("div",{children:w.jsx(me.Img,{variant:"top",src:(C=b==null?void 0:b.product_id)==null?void 0:C.image[0],style:{width:`${u==="mode2"?"200px":""}`}})}),w.jsx("div",{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:(S=b==null?void 0:b.product_id)==null?void 0:S.name}),w.jsx(me.Text,{children:(E=b==null?void 0:b.product_id)==null?void 0:E.description}),w.jsx(Oa,{to:`/detail/${b._id}`,children:w.jsx(vt,{children:"Chi tiết"})})]})})]})})},b.id)}),w.jsx("div",{className:"row",style:{position:"absolute",bottom:`${u==="mode2"?"0%":"-12%"}`,left:"35%"},children:w.jsx(xW,{children:Array.from({length:Math.ceil(r.length/y)}).map((b,C)=>w.jsx(xW.Item,{active:C+1===g,onClick:()=>x(C+1),children:C+1},C))})})]})]})]})})]})})})}function t2e(t){const e=["../../../public/assets/images/background/1.jpg","../../../public/assets/images/background/2.jpg","../../../public/assets/images/background/3.jpg","../../../public/assets/images/background/4.jpg","../../../public/assets/images/background/5.jpg"],n=Tt(r=>r.USER.currentUser);return console.log("user",n),w.jsx(Fs,{children:w.jsx(Vt,{className:"mb-4",children:w.jsx(rt,{md:12,children:w.jsx(ps,{fade:!0,children:e==null?void 0:e.map((r,o)=>w.jsx(ps.Item,{interval:1500,children:w.jsx("img",{className:"d-block",src:r,alt:`Slide ${o+1}`,style:{height:"400px",objectFit:"cover",width:"100%"}})},o))})})})})}const n2e=()=>{var e;const t=Tt(n=>n.USER.currentUser);return console.log("user",t),w.jsxs("div",{className:"body-container",children:[w.jsx(t2e,{}),w.jsx(rxe,{}),w.jsx(oxe,{}),w.jsx(ebe,{}),((e=t==null?void 0:t.role_id)==null?void 0:e.title)==="HOST"?"":w.jsx(z9,{})]})};function U9(t,e){return function(){return t.apply(e,arguments)}}const{toString:r2e}=Object.prototype,{getPrototypeOf:MM}=Object,JS=(t=>e=>{const n=r2e.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ll=t=>(t=t.toLowerCase(),e=>JS(e)===t),ZS=t=>e=>typeof e===t,{isArray:Og}=Array,m0=ZS("undefined");function o2e(t){return t!==null&&!m0(t)&&t.constructor!==null&&!m0(t.constructor)&&ua(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const V9=ll("ArrayBuffer");function s2e(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&V9(t.buffer),e}const i2e=ZS("string"),ua=ZS("function"),H9=ZS("number"),eE=t=>t!==null&&typeof t=="object",a2e=t=>t===!0||t===!1,mk=t=>{if(JS(t)!=="object")return!1;const e=MM(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},u2e=ll("Date"),l2e=ll("File"),c2e=ll("Blob"),d2e=ll("FileList"),f2e=t=>eE(t)&&ua(t.pipe),h2e=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ua(t.append)&&((e=JS(t))==="formdata"||e==="object"&&ua(t.toString)&&t.toString()==="[object FormData]"))},p2e=ll("URLSearchParams"),m2e=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Nx(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),Og(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),i=s.length;let a;for(r=0;r<i;r++)a=s[r],e.call(null,t[a],a,t)}}function G9(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],e===o.toLowerCase())return o;return null}const Y9=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,q9=t=>!m0(t)&&t!==Y9;function FR(){const{caseless:t}=q9(this)&&this||{},e={},n=(r,o)=>{const s=t&&G9(e,o)||o;mk(e[s])&&mk(r)?e[s]=FR(e[s],r):mk(r)?e[s]=FR({},r):Og(r)?e[s]=r.slice():e[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Nx(arguments[r],n);return e}const g2e=(t,e,n,{allOwnKeys:r}={})=>(Nx(e,(o,s)=>{n&&ua(o)?t[s]=U9(o,n):t[s]=o},{allOwnKeys:r}),t),v2e=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),y2e=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},x2e=(t,e,n,r)=>{let o,s,i;const a={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),s=o.length;s-- >0;)i=o[s],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=n!==!1&&MM(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},b2e=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},w2e=t=>{if(!t)return null;if(Og(t))return t;let e=t.length;if(!H9(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},k2e=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&MM(Uint8Array)),C2e=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=r.next())&&!o.done;){const s=o.value;e.call(t,s[0],s[1])}},S2e=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},E2e=ll("HTMLFormElement"),_2e=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),Mz=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),I2e=ll("RegExp"),K9=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Nx(n,(o,s)=>{let i;(i=e(o,s,t))!==!1&&(r[s]=i||o)}),Object.defineProperties(t,r)},T2e=t=>{K9(t,(e,n)=>{if(ua(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ua(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},N2e=(t,e)=>{const n={},r=o=>{o.forEach(s=>{n[s]=!0})};return Og(t)?r(t):r(String(t).split(e)),n},D2e=()=>{},R2e=(t,e)=>(t=+t,Number.isFinite(t)?t:e),VT="abcdefghijklmnopqrstuvwxyz",Pz="0123456789",X9={DIGIT:Pz,ALPHA:VT,ALPHA_DIGIT:VT+VT.toUpperCase()+Pz},O2e=(t=16,e=X9.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function A2e(t){return!!(t&&ua(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const $2e=t=>{const e=new Array(10),n=(r,o)=>{if(eE(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const s=Og(r)?[]:{};return Nx(r,(i,a)=>{const u=n(i,o+1);!m0(u)&&(s[a]=u)}),e[o]=void 0,s}}return r};return n(t,0)},M2e=ll("AsyncFunction"),P2e=t=>t&&(eE(t)||ua(t))&&ua(t.then)&&ua(t.catch),Se={isArray:Og,isArrayBuffer:V9,isBuffer:o2e,isFormData:h2e,isArrayBufferView:s2e,isString:i2e,isNumber:H9,isBoolean:a2e,isObject:eE,isPlainObject:mk,isUndefined:m0,isDate:u2e,isFile:l2e,isBlob:c2e,isRegExp:I2e,isFunction:ua,isStream:f2e,isURLSearchParams:p2e,isTypedArray:k2e,isFileList:d2e,forEach:Nx,merge:FR,extend:g2e,trim:m2e,stripBOM:v2e,inherits:y2e,toFlatObject:x2e,kindOf:JS,kindOfTest:ll,endsWith:b2e,toArray:w2e,forEachEntry:C2e,matchAll:S2e,isHTMLForm:E2e,hasOwnProperty:Mz,hasOwnProp:Mz,reduceDescriptors:K9,freezeMethods:T2e,toObjectSet:N2e,toCamelCase:_2e,noop:D2e,toFiniteNumber:R2e,findKey:G9,global:Y9,isContextDefined:q9,ALPHABET:X9,generateString:O2e,isSpecCompliantForm:A2e,toJSONObject:$2e,isAsyncFn:M2e,isThenable:P2e};function mn(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}Se.inherits(mn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Se.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Q9=mn.prototype,J9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{J9[t]={value:t}});Object.defineProperties(mn,J9);Object.defineProperty(Q9,"isAxiosError",{value:!0});mn.from=(t,e,n,r,o,s)=>{const i=Object.create(Q9);return Se.toFlatObject(t,i,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),mn.call(i,t.message,e,n,r,o),i.cause=t,i.name=t.name,s&&Object.assign(i,s),i};const F2e=null;function LR(t){return Se.isPlainObject(t)||Se.isArray(t)}function Z9(t){return Se.endsWith(t,"[]")?t.slice(0,-2):t}function Fz(t,e,n){return t?t.concat(e).map(function(o,s){return o=Z9(o),!n&&s?"["+o+"]":o}).join(n?".":""):e}function L2e(t){return Se.isArray(t)&&!t.some(LR)}const B2e=Se.toFlatObject(Se,{},null,function(e){return/^is[A-Z]/.test(e)});function tE(t,e,n){if(!Se.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Se.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!Se.isUndefined(g[m])});const r=n.metaTokens,o=n.visitor||c,s=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Se.isSpecCompliantForm(e);if(!Se.isFunction(o))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(Se.isDate(p))return p.toISOString();if(!u&&Se.isBlob(p))throw new mn("Blob is not supported. Use a Buffer instead.");return Se.isArrayBuffer(p)||Se.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,m,g){let v=p;if(p&&!g&&typeof p=="object"){if(Se.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(Se.isArray(p)&&L2e(p)||(Se.isFileList(p)||Se.endsWith(m,"[]"))&&(v=Se.toArray(p)))return m=Z9(m),v.forEach(function(x,b){!(Se.isUndefined(x)||x===null)&&e.append(i===!0?Fz([m],b,s):i===null?m:m+"[]",l(x))}),!1}return LR(p)?!0:(e.append(Fz(g,m,s),l(p)),!1)}const d=[],f=Object.assign(B2e,{defaultVisitor:c,convertValue:l,isVisitable:LR});function h(p,m){if(!Se.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(p),Se.forEach(p,function(v,y){(!(Se.isUndefined(v)||v===null)&&o.call(e,v,Se.isString(y)?y.trim():y,m,f))===!0&&h(v,m?m.concat(y):[y])}),d.pop()}}if(!Se.isObject(t))throw new TypeError("data must be an object");return h(t),e}function Lz(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function PM(t,e){this._pairs=[],t&&tE(t,this,e)}const eK=PM.prototype;eK.append=function(e,n){this._pairs.push([e,n])};eK.toString=function(e){const n=e?function(r){return e.call(this,r,Lz)}:Lz;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function j2e(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tK(t,e,n){if(!e)return t;const r=n&&n.encode||j2e,o=n&&n.serialize;let s;if(o?s=o(e,n):s=Se.isURLSearchParams(e)?e.toString():new PM(e,n).toString(r),s){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Bz{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Se.forEach(this.handlers,function(r){r!==null&&e(r)})}}const nK={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},W2e=typeof URLSearchParams<"u"?URLSearchParams:PM,z2e=typeof FormData<"u"?FormData:null,U2e=typeof Blob<"u"?Blob:null,V2e={isBrowser:!0,classes:{URLSearchParams:W2e,FormData:z2e,Blob:U2e},protocols:["http","https","file","blob","url","data"]},rK=typeof window<"u"&&typeof document<"u",H2e=(t=>rK&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),G2e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Y2e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rK,hasStandardBrowserEnv:H2e,hasStandardBrowserWebWorkerEnv:G2e},Symbol.toStringTag,{value:"Module"})),Ou={...Y2e,...V2e};function q2e(t,e){return tE(t,new Ou.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,s){return Ou.isNode&&Se.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function K2e(t){return Se.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function X2e(t){const e={},n=Object.keys(t);let r;const o=n.length;let s;for(r=0;r<o;r++)s=n[r],e[s]=t[s];return e}function oK(t){function e(n,r,o,s){let i=n[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),u=s>=n.length;return i=!i&&Se.isArray(o)?o.length:i,u?(Se.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!Se.isObject(o[i]))&&(o[i]=[]),e(n,r,o[i],s)&&Se.isArray(o[i])&&(o[i]=X2e(o[i])),!a)}if(Se.isFormData(t)&&Se.isFunction(t.entries)){const n={};return Se.forEachEntry(t,(r,o)=>{e(K2e(r),o,n,0)}),n}return null}function Q2e(t,e,n){if(Se.isString(t))try{return(e||JSON.parse)(t),Se.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const FM={transitional:nK,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,s=Se.isObject(e);if(s&&Se.isHTMLForm(e)&&(e=new FormData(e)),Se.isFormData(e))return o?JSON.stringify(oK(e)):e;if(Se.isArrayBuffer(e)||Se.isBuffer(e)||Se.isStream(e)||Se.isFile(e)||Se.isBlob(e))return e;if(Se.isArrayBufferView(e))return e.buffer;if(Se.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return q2e(e,this.formSerializer).toString();if((a=Se.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return tE(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),Q2e(e)):e}],transformResponse:[function(e){const n=this.transitional||FM.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(e&&Se.isString(e)&&(r&&!this.responseType||o)){const i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?mn.from(a,mn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ou.classes.FormData,Blob:Ou.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Se.forEach(["delete","get","head","post","put","patch"],t=>{FM.headers[t]={}});const LM=FM,J2e=Se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Z2e=t=>{const e={};let n,r,o;return t&&t.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!n||e[n]&&J2e[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},jz=Symbol("internals");function Rv(t){return t&&String(t).trim().toLowerCase()}function gk(t){return t===!1||t==null?t:Se.isArray(t)?t.map(gk):String(t)}function eSe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const tSe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function HT(t,e,n,r,o){if(Se.isFunction(r))return r.call(this,e,n);if(o&&(e=n),!!Se.isString(e)){if(Se.isString(r))return e.indexOf(r)!==-1;if(Se.isRegExp(r))return r.test(e)}}function nSe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function rSe(t,e){const n=Se.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,s,i){return this[r].call(this,e,o,s,i)},configurable:!0})})}class nE{constructor(e){e&&this.set(e)}set(e,n,r){const o=this;function s(a,u,l){const c=Rv(u);if(!c)throw new Error("header name must be a non-empty string");const d=Se.findKey(o,c);(!d||o[d]===void 0||l===!0||l===void 0&&o[d]!==!1)&&(o[d||u]=gk(a))}const i=(a,u)=>Se.forEach(a,(l,c)=>s(l,c,u));return Se.isPlainObject(e)||e instanceof this.constructor?i(e,n):Se.isString(e)&&(e=e.trim())&&!tSe(e)?i(Z2e(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Rv(e),e){const r=Se.findKey(this,e);if(r){const o=this[r];if(!n)return o;if(n===!0)return eSe(o);if(Se.isFunction(n))return n.call(this,o,r);if(Se.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Rv(e),e){const r=Se.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||HT(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let o=!1;function s(i){if(i=Rv(i),i){const a=Se.findKey(r,i);a&&(!n||HT(r,r[a],a,n))&&(delete r[a],o=!0)}}return Se.isArray(e)?e.forEach(s):s(e),o}clear(e){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const s=n[r];(!e||HT(this,this[s],s,e,!0))&&(delete this[s],o=!0)}return o}normalize(e){const n=this,r={};return Se.forEach(this,(o,s)=>{const i=Se.findKey(r,s);if(i){n[i]=gk(o),delete n[s];return}const a=e?nSe(s):String(s).trim();a!==s&&delete n[s],n[a]=gk(o),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Se.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=e&&Se.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[jz]=this[jz]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=Rv(i);r[a]||(rSe(o,i),r[a]=!0)}return Se.isArray(e)?e.forEach(s):s(e),this}}nE.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Se.reduceDescriptors(nE.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Se.freezeMethods(nE);const Yl=nE;function GT(t,e){const n=this||LM,r=e||n,o=Yl.from(r.headers);let s=r.data;return Se.forEach(t,function(a){s=a.call(n,s,o.normalize(),e?e.status:void 0)}),o.normalize(),s}function sK(t){return!!(t&&t.__CANCEL__)}function Dx(t,e,n){mn.call(this,t??"canceled",mn.ERR_CANCELED,e,n),this.name="CanceledError"}Se.inherits(Dx,mn,{__CANCEL__:!0});function oSe(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new mn("Request failed with status code "+n.status,[mn.ERR_BAD_REQUEST,mn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const sSe=Ou.hasStandardBrowserEnv?{write(t,e,n,r,o,s){const i=[t+"="+encodeURIComponent(e)];Se.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Se.isString(r)&&i.push("path="+r),Se.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function iSe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function aSe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function iK(t,e){return t&&!iSe(e)?aSe(t,e):e}const uSe=Ou.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function o(s){let i=s;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(i){const a=Se.isString(i)?o(i):i;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function lSe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function cSe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o=0,s=0,i;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),c=r[s];i||(i=l),n[o]=u,r[o]=l;let d=s,f=0;for(;d!==o;)f+=n[d++],d=d%t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),l-i<e)return;const h=c&&l-c;return h?Math.round(f*1e3/h):void 0}}function Wz(t,e){let n=0;const r=cSe(50,250);return o=>{const s=o.loaded,i=o.lengthComputable?o.total:void 0,a=s-n,u=r(a),l=s<=i;n=s;const c={loaded:s,total:i,progress:i?s/i:void 0,bytes:a,rate:u||void 0,estimated:u&&i&&l?(i-s)/u:void 0,event:o};c[e?"download":"upload"]=!0,t(c)}}const dSe=typeof XMLHttpRequest<"u",fSe=dSe&&function(t){return new Promise(function(n,r){let o=t.data;const s=Yl.from(t.headers).normalize();let{responseType:i,withXSRFToken:a}=t,u;function l(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}let c;if(Se.isFormData(o)){if(Ou.hasStandardBrowserEnv||Ou.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((c=s.getContentType())!==!1){const[m,...g]=c?c.split(";").map(v=>v.trim()).filter(Boolean):[];s.setContentType([m||"multipart/form-data",...g].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(m+":"+g))}const f=iK(t.baseURL,t.url);d.open(t.method.toUpperCase(),tK(f,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function h(){if(!d)return;const m=Yl.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),v={data:!i||i==="text"||i==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:m,config:t,request:d};oSe(function(x){n(x),l()},function(x){r(x),l()},v),d=null}if("onloadend"in d?d.onloadend=h:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(h)},d.onabort=function(){d&&(r(new mn("Request aborted",mn.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new mn("Network Error",mn.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const v=t.transitional||nK;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new mn(g,v.clarifyTimeoutError?mn.ETIMEDOUT:mn.ECONNABORTED,t,d)),d=null},Ou.hasStandardBrowserEnv&&(a&&Se.isFunction(a)&&(a=a(t)),a||a!==!1&&uSe(f))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&sSe.read(t.xsrfCookieName);m&&s.set(t.xsrfHeaderName,m)}o===void 0&&s.setContentType(null),"setRequestHeader"in d&&Se.forEach(s.toJSON(),function(g,v){d.setRequestHeader(v,g)}),Se.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),i&&i!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",Wz(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",Wz(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=m=>{d&&(r(!m||m.type?new Dx(null,t,d):m),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const p=lSe(f);if(p&&Ou.protocols.indexOf(p)===-1){r(new mn("Unsupported protocol "+p+":",mn.ERR_BAD_REQUEST,t));return}d.send(o||null)})},BR={http:F2e,xhr:fSe};Se.forEach(BR,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const zz=t=>`- ${t}`,hSe=t=>Se.isFunction(t)||t===null||t===!1,aK={getAdapter:t=>{t=Se.isArray(t)?t:[t];const{length:e}=t;let n,r;const o={};for(let s=0;s<e;s++){n=t[s];let i;if(r=n,!hSe(n)&&(r=BR[(i=String(n)).toLowerCase()],r===void 0))throw new mn(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=e?s.length>1?`since :
`+s.map(zz).join(`
`):" "+zz(s[0]):"as no adapter specified";throw new mn("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:BR};function YT(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Dx(null,t)}function Uz(t){return YT(t),t.headers=Yl.from(t.headers),t.data=GT.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),aK.getAdapter(t.adapter||LM.adapter)(t).then(function(r){return YT(t),r.data=GT.call(t,t.transformResponse,r),r.headers=Yl.from(r.headers),r},function(r){return sK(r)||(YT(t),r&&r.response&&(r.response.data=GT.call(t,t.transformResponse,r.response),r.response.headers=Yl.from(r.response.headers))),Promise.reject(r)})}const Vz=t=>t instanceof Yl?t.toJSON():t;function rg(t,e){e=e||{};const n={};function r(l,c,d){return Se.isPlainObject(l)&&Se.isPlainObject(c)?Se.merge.call({caseless:d},l,c):Se.isPlainObject(c)?Se.merge({},c):Se.isArray(c)?c.slice():c}function o(l,c,d){if(Se.isUndefined(c)){if(!Se.isUndefined(l))return r(void 0,l,d)}else return r(l,c,d)}function s(l,c){if(!Se.isUndefined(c))return r(void 0,c)}function i(l,c){if(Se.isUndefined(c)){if(!Se.isUndefined(l))return r(void 0,l)}else return r(void 0,c)}function a(l,c,d){if(d in e)return r(l,c);if(d in t)return r(void 0,l)}const u={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(l,c)=>o(Vz(l),Vz(c),!0)};return Se.forEach(Object.keys(Object.assign({},t,e)),function(c){const d=u[c]||o,f=d(t[c],e[c],c);Se.isUndefined(f)&&d!==a||(n[c]=f)}),n}const uK="1.6.7",BM={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{BM[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Hz={};BM.transitional=function(e,n,r){function o(s,i){return"[Axios v"+uK+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(e===!1)throw new mn(o(i," has been removed"+(n?" in "+n:"")),mn.ERR_DEPRECATED);return n&&!Hz[i]&&(Hz[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,i,a):!0}};function pSe(t,e,n){if(typeof t!="object")throw new mn("options must be an object",mn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const s=r[o],i=e[s];if(i){const a=t[s],u=a===void 0||i(a,s,t);if(u!==!0)throw new mn("option "+s+" must be "+u,mn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new mn("Unknown option "+s,mn.ERR_BAD_OPTION)}}const jR={assertOptions:pSe,validators:BM},Pc=jR.validators;class $C{constructor(e){this.defaults=e,this.interceptors={request:new Bz,response:new Bz}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=rg(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:s}=n;r!==void 0&&jR.assertOptions(r,{silentJSONParsing:Pc.transitional(Pc.boolean),forcedJSONParsing:Pc.transitional(Pc.boolean),clarifyTimeoutError:Pc.transitional(Pc.boolean)},!1),o!=null&&(Se.isFunction(o)?n.paramsSerializer={serialize:o}:jR.assertOptions(o,{encode:Pc.function,serialize:Pc.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=s&&Se.merge(s.common,s[n.method]);s&&Se.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Yl.concat(i,s);const a=[];let u=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(u=u&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let c,d=0,f;if(!u){const p=[Uz.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),f=p.length,c=Promise.resolve(n);d<f;)c=c.then(p[d++],p[d++]);return c}f=a.length;let h=n;for(d=0;d<f;){const p=a[d++],m=a[d++];try{h=p(h)}catch(g){m.call(this,g);break}}try{c=Uz.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=l.length;d<f;)c=c.then(l[d++],l[d++]);return c}getUri(e){e=rg(this.defaults,e);const n=iK(e.baseURL,e.url);return tK(n,e.params,e.paramsSerializer)}}Se.forEach(["delete","get","head","options"],function(e){$C.prototype[e]=function(n,r){return this.request(rg(r||{},{method:e,url:n,data:(r||{}).data}))}});Se.forEach(["post","put","patch"],function(e){function n(r){return function(s,i,a){return this.request(rg(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}$C.prototype[e]=n(),$C.prototype[e+"Form"]=n(!0)});const vk=$C;class jM{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},e(function(s,i,a){r.reason||(r.reason=new Dx(s,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new jM(function(o){e=o}),cancel:e}}}const mSe=jM;function gSe(t){return function(n){return t.apply(null,n)}}function vSe(t){return Se.isObject(t)&&t.isAxiosError===!0}const WR={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(WR).forEach(([t,e])=>{WR[e]=t});const ySe=WR;function lK(t){const e=new vk(t),n=U9(vk.prototype.request,e);return Se.extend(n,vk.prototype,e,{allOwnKeys:!0}),Se.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return lK(rg(t,o))},n}const so=lK(LM);so.Axios=vk;so.CanceledError=Dx;so.CancelToken=mSe;so.isCancel=sK;so.VERSION=uK;so.toFormData=tE;so.AxiosError=mn;so.Cancel=so.CanceledError;so.all=function(e){return Promise.all(e)};so.spread=gSe;so.isAxiosError=vSe;so.mergeConfig=rg;so.AxiosHeaders=Yl;so.formToJSON=t=>oK(Se.isHTMLForm(t)?new FormData(t):t);so.getAdapter=aK.getAdapter;so.HttpStatusCode=ySe;so.default=so;const Nn=so.create({baseURL:"https://be-orchid-auction.onrender.com"}),Xo={addAuction(t,e){return Nn.post("/auctions",t,{headers:{Authorization:`Bearer ${e}`}})},getAllAuction(t){return Nn.get("/auctions",{headers:{Authorization:`Bearer ${t}`}})},getAuctionNotYetAuctionedByUser(t,e){return Nn.get(`/auctions/not-yet/${t}`,{headers:{Authorization:`Bearer ${e}`}})},getAuctionNotYetAuctionedByCustomer(t){return Nn.get("/auctions/not-yet",{headers:{Authorization:`Bearer ${t}`}})},getAuctionAboutToAuctionByUser(t,e){return Nn.get(`/auctions/about-to/${t}`,{headers:{Authorization:`Bearer ${e}`}})},getAuctionAboutToAuctionByCustomer(t){return Nn.get("/auctions/about-to",{headers:{Authorization:`Bearer ${t}`}})},getAuctioningByUser(t,e){return Nn.get(`/auctions/auctioning/${t}`,{headers:{Authorization:`Bearer ${e}`}})},getAuctioningByCustomer(t){return Nn.get("/auctions/auctioning",{headers:{Authorization:`Bearer ${t}`}})},getAuctionedByUser(t,e){return Nn.get(`/auctions/autioned/${t}`,{headers:{Authorization:`Bearer ${e}`}})},getAuctionedByCustomer(t){return Nn.get("/auctions/autioned",{headers:{Authorization:`Bearer ${t}`}})},getAuctionNotYetByMember(t,e){return Nn.get(`/auctions/memberAuctions-not-yet/${t}`,{headers:{Authorization:`Bearer ${e}`}})},getAuctionAboutToByMember(t,e){return Nn.get(`/auctions/memberAuctions-about-to/${t}`,{headers:{Authorization:`Bearer ${e}`}})},getAuctioningByMember(t,e){return Nn.get(`/auctions/memberAuctions-auctioning/${t}`,{headers:{Authorization:`Bearer ${e}`}})},getAuctionedByMember(t,e){return Nn.get(`/auctions/memberAuctions-auctioned/${t}`,{headers:{Authorization:`Bearer ${e}`}})},postAuctionBid(t,e){return Nn.post(`/auctionBid/${t.auctionId}/${t.customerId}/new-bid`,t,{headers:{Authorization:`Bearer ${e}`}})},getMostAuctionBid(t,e){return Nn.get(`/auctions/getMostPriceInAuctionBid/${t.auctionId}`,{headers:{Authorization:`Bearer ${e}`}})},getMemberJoinAuctionBid(t,e){return Nn.get(`/auctionBid/auctionBid-sortDes/${t.auctionId}`,{headers:{Authorization:`Bearer ${e}`}})},getAllMemberInJoinAuctionBid(t,e){return Nn.get(`/auctions/getAllMemberInAuctionBid/${t.auctionId}`,{headers:{Authorization:`Bearer ${e}`}})}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xSe=1e-7,bSe=1e-4;class cK{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class WM{refCount(e){return Ws("refCount")}incRef(e){return Ws("incRef")}timerAvailable(){return!0}time(e){return Ws("time")}read(e){return Ws("read")}readSync(e){return Ws("readSync")}readToGPU(e,n){return Ws("readToGPU")}numDataIds(){return Ws("numDataIds")}disposeData(e,n){return Ws("disposeData")}write(e,n,r){return Ws("write")}move(e,n,r,o,s){return Ws("move")}createTensorFromGPUData(e,n,r){return Ws("createTensorFromGPUData")}memory(){return Ws("memory")}floatPrecision(){return Ws("floatPrecision")}epsilon(){return this.floatPrecision()===32?xSe:bSe}dispose(){return Ws("dispose")}}function Ws(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Op(t,e,n)}function bh(t,e,n){return Math.max(t,Math.min(e,n))}function zM(t){return t%2===0?t:t+1}function Op(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function kSe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function U(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function UM(t,e,n=""){U(En(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function dK(t){U(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function xe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function En(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function og(t){return t%1===0}function zR(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function mm(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Gz(t,e=o=>0,n,r){return new Promise((o,s)=>{let i=0;const a=()=>{if(t()){o();return}i++;const u=e(i);if(n!=null&&i>=n){s();return}r!=null?r(a,u):setTimeout(a,u)};a()})}function fK(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const o=t.slice();return o[r]=e/n,o}function Gt(t,e){const n=e.length;return t=t==null?e.map((r,o)=>o):[].concat(t),U(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),U(t.every(r=>og(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function rf(t,e){const n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||o?null:Gt(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[i]==null||s[i]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function qo(t,e){return $r(t,e)}function $r(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function CSe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function SSe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function hK(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function MC(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function ESe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Rx(t){return typeof t=="string"||t instanceof String}function _Se(t){return typeof t=="boolean"}function UR(t){return typeof t=="number"}function Ag(t){return Array.isArray(t)?Ag(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":UR(t)?"float32":Rx(t)?"string":_Se(t)?"bool":"float32"}function VR(t){return!!(t&&t.constructor&&t.call&&t.apply)}function HR(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function gt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function pK(t,e,n,r=!1){const o=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let i=0;i<s;i++)o[i]=n[t+i]}else{const s=e[0],i=e.slice(1),a=i.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<s;u++)o[u]=pK(t+u*a,i,n,r)}return o}function qa(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((o,s)=>o*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return pK(0,t,e,n)}function ISe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function VM(t,e){const n=Ko(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Ko(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function mK(t,e){const n=t.reduce((r,o)=>r*o,1);if(e==null||e==="float32")return qa(t,new Float32Array(n));if(e==="int32")return qa(t,new Int32Array(n));if(e==="bool")return qa(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function vc(t){t.forEach(e=>{U(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Uu(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function $g(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function HM(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yz="tfjsflags";class TSe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=NSe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const o=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(HM(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);Yz in e&&e[Yz].split(",").forEach(r=>{const[o,s]=r.split(":");this.urlFlags[o]=RSe(o,s)})}}function NSe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(DSe(e,r[0],r[1]),r.join("="))),e}function DSe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function RSe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function fe(){return gK}let gK=null;function OSe(t){gK=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let qT;function vK(){if(qT==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");qT=t}return qT}function ASe(){const t=vK();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function GM(t,e){const n=ASe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const rE="Abs",Ox="Acos",Ax="Acosh",Mg="Add",YM="AddN",qM="All",KM="Any",oE="ArgMax",sE="ArgMin",$x="Asin",Mx="Asinh",Px="Atan",Fx="Atanh",Lx="Atan2",iE="AvgPool",XM="AvgPoolGrad",aE="AvgPool3D",QM="AvgPool3DGrad",uE="BatchMatMul",lE="BatchToSpaceND",JM="Bincount",ZM="BitwiseAnd",$Se="BroadcastTo",yK="BroadcastArgs",Bx="Cast",jx="Ceil",Wx="ClipByValue",eP="Complex",cE="ComplexAbs",dE="Concat",fE="Conv2D",tP="Conv2DBackpropFilter",hE="Conv2DBackpropInput",pE="Conv3D",nP="Conv3DBackpropFilterV2",rP="Conv3DBackpropInputV2",zx="Cos",Ux="Cosh",oP="Cumprod",mE="Cumsum",sP="CropAndResize",iP="DenseBincount",aP="DepthToSpace",gE="DepthwiseConv2dNative",uP="DepthwiseConv2dNativeBackpropFilter",lP="DepthwiseConv2dNativeBackpropInput",xK="Diag",vE="Dilation2D",GR="Dilation2DBackpropInput",YR="Dilation2DBackpropFilter",MSe="Draw",Vx="RealDiv",cP="Einsum",Hx="Elu",dP="EluGrad",Gx="Erf",yE="Equal",Yx="Exp",xE="ExpandDims",qx="Expm1",fP="FFT",hP="Fill",pP="FlipLeftRight",Kx="Floor",Xx="FloorDiv",bE="FusedBatchNorm",wE="GatherV2",bK="GatherNd",kE="Greater",Qx="GreaterEqual",Jx="Identity",mP="IFFT",gP="Imag",Zx="IsFinite",e1="IsInf",t1="IsNan",CE="LeakyRelu",SE="Less",EE="LessEqual",wK="LinSpace",n1="Log",r1="Log1p",_E="LogicalAnd",IE="LogicalNot",TE="LogicalOr",PSe="LogSoftmax",NE="LRN",vP="LRNGrad",DE="Max",o1="Maximum",RE="MaxPool",yP="MaxPoolGrad",OE="MaxPool3D",xP="MaxPool3DGrad",kK="MaxPoolWithArgmax",AE="Mean",$E="Min",s1="Minimum",ME="MirrorPad",i1="Mod",CK="Multinomial",a1="Multiply",PE="Neg",FE="NotEqual",bP="NonMaxSuppressionV3",wP="NonMaxSuppressionV4",kP="NonMaxSuppressionV5",LE="OnesLike",BE="OneHot",jE="Pack",WE="PadV2",u1="Pow",zE="Prelu",UE="Prod",SK="RaggedGather",EK="RaggedRange",_K="RaggedTensorToTensor",CP="Range",SP="Real",l1="Reciprocal",c1="Relu",VE="Reshape",HE="ResizeNearestNeighbor",EP="ResizeNearestNeighborGrad",GE="ResizeBilinear",_P="ResizeBilinearGrad",d1="Relu6",YE="Reverse",f1="Round",h1="Rsqrt",IK="ScatterNd",TK="TensorScatterUpdate",NK="SearchSorted",qE="Select",p1="Selu",KE="Slice",m1="Sin",g1="Sinh",v1="Sign",y1="Sigmoid",x1="Softplus",b1="Sqrt",XE="Sum",QE="SpaceToBatchND",JE="SplitV",ZE="Softmax",DK="SparseFillEmptyRows",RK="SparseReshape",OK="SparseSegmentMean",AK="SparseSegmentSum",$K="SparseToDense",w1="SquaredDifference",IP="Square",TP="StaticRegexReplace",NP="StridedSlice",MK="StringNGrams",PK="StringSplit",FK="StringToHashBucketFast",k1="Sub",C1="Tan",S1="Tanh",E1="Tile",DP="TopK",RP="Transform",gm="Transpose",OP="Unique",e_="Unpack",t_="UnsortedSegmentSum",n_="ZerosLike",_1="Step",FSe="FromPixels",AP="RotateWithOffset",PC="_FusedMatMul",FC="FusedConv2D",LK="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pi(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...t)}function LSe(...t){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LC=GM("kernelRegistry",()=>new Map),qR=GM("gradRegistry",()=>new Map);function qz(t,e){const n=jK(t,e);return LC.get(n)}function Kz(t){return qR.get(t)}function Xz(t){const e=LC.entries(),n=[];for(;;){const{done:r,value:o}=e.next();if(r)break;const[s,i]=o,[a]=s.split("_");a===t&&n.push(i)}return n}function BK(t){const{kernelName:e,backendName:n}=t,r=jK(e,n);LC.has(r)&&pi(`The kernel '${e}' for backend '${n}' is already registered`),LC.set(r,t)}function BSe(t){const{kernelName:e}=t;qR.has(e)&&fe().getBool("DEBUG")&&pi(`Overriding the gradient for '${e}'`),qR.set(e,t)}function jK(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WK(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var zK=Xn,ea=null;try{ea=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Xn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Xn.prototype.__isLong__;Object.defineProperty(Xn.prototype,"__isLong__",{value:!0});function ci(t){return(t&&t.__isLong__)===!0}Xn.isLong=ci;var Qz={},Jz={};function Gh(t,e){var n,r,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(r=Jz[t],r)?r:(n=Qn(t,(t|0)<0?-1:0,!0),o&&(Jz[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(r=Qz[t],r)?r:(n=Qn(t,t<0?-1:0,!1),o&&(Qz[t]=n),n))}Xn.fromInt=Gh;function ta(t,e){if(isNaN(t))return e?zf:na;if(e){if(t<0)return zf;if(t>=UK)return GK}else{if(t<=-eU)return Ks;if(t+1>=eU)return HK}return t<0?ta(-t,e).neg():Qn(t%sg|0,t/sg|0,e)}Xn.fromNumber=ta;function Qn(t,e,n){return new Xn(t,e,n)}Xn.fromBits=Qn;var BC=Math.pow;function $P(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return na;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return $P(t.substring(1),e,n).neg();for(var o=ta(BC(n,8)),s=na,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),u=parseInt(t.substring(i,i+a),n);if(a<8){var l=ta(BC(n,a));s=s.mul(l).add(ta(u))}else s=s.mul(o),s=s.add(ta(u))}return s.unsigned=e,s}Xn.fromString=$P;function au(t,e){return typeof t=="number"?ta(t,e):typeof t=="string"?$P(t,e):Qn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Xn.fromValue=au;var Zz=65536,jSe=1<<24,sg=Zz*Zz,UK=sg*sg,eU=UK/2,tU=Gh(jSe),na=Gh(0);Xn.ZERO=na;var zf=Gh(0,!0);Xn.UZERO=zf;var tm=Gh(1);Xn.ONE=tm;var VK=Gh(1,!0);Xn.UONE=VK;var KR=Gh(-1);Xn.NEG_ONE=KR;var HK=Qn(-1,2147483647,!1);Xn.MAX_VALUE=HK;var GK=Qn(-1,-1,!0);Xn.MAX_UNSIGNED_VALUE=GK;var Ks=Qn(0,-2147483648,!1);Xn.MIN_VALUE=Ks;var We=Xn.prototype;We.toInt=function(){return this.unsigned?this.low>>>0:this.low};We.toNumber=function(){return this.unsigned?(this.high>>>0)*sg+(this.low>>>0):this.high*sg+(this.low>>>0)};We.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ks)){var n=ta(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=ta(BC(e,6),this.unsigned),i=this,a="";;){var u=i.div(s),l=i.sub(u.mul(s)).toInt()>>>0,c=l.toString(e);if(i=u,i.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};We.getHighBits=function(){return this.high};We.getHighBitsUnsigned=function(){return this.high>>>0};We.getLowBits=function(){return this.low};We.getLowBitsUnsigned=function(){return this.low>>>0};We.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ks)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};We.isZero=function(){return this.high===0&&this.low===0};We.eqz=We.isZero;We.isNegative=function(){return!this.unsigned&&this.high<0};We.isPositive=function(){return this.unsigned||this.high>=0};We.isOdd=function(){return(this.low&1)===1};We.isEven=function(){return(this.low&1)===0};We.equals=function(e){return ci(e)||(e=au(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};We.eq=We.equals;We.notEquals=function(e){return!this.eq(e)};We.neq=We.notEquals;We.ne=We.notEquals;We.lessThan=function(e){return this.comp(e)<0};We.lt=We.lessThan;We.lessThanOrEqual=function(e){return this.comp(e)<=0};We.lte=We.lessThanOrEqual;We.le=We.lessThanOrEqual;We.greaterThan=function(e){return this.comp(e)>0};We.gt=We.greaterThan;We.greaterThanOrEqual=function(e){return this.comp(e)>=0};We.gte=We.greaterThanOrEqual;We.ge=We.greaterThanOrEqual;We.compare=function(e){if(ci(e)||(e=au(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};We.comp=We.compare;We.negate=function(){return!this.unsigned&&this.eq(Ks)?Ks:this.not().add(tm)};We.neg=We.negate;We.add=function(e){ci(e)||(e=au(e));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,i=e.high>>>16,a=e.high&65535,u=e.low>>>16,l=e.low&65535,c=0,d=0,f=0,h=0;return h+=s+l,f+=h>>>16,h&=65535,f+=o+u,d+=f>>>16,f&=65535,d+=r+a,c+=d>>>16,d&=65535,c+=n+i,c&=65535,Qn(f<<16|h,c<<16|d,this.unsigned)};We.subtract=function(e){return ci(e)||(e=au(e)),this.add(e.neg())};We.sub=We.subtract;We.multiply=function(e){if(this.isZero())return na;if(ci(e)||(e=au(e)),ea){var n=ea.mul(this.low,this.high,e.low,e.high);return Qn(n,ea.get_high(),this.unsigned)}if(e.isZero())return na;if(this.eq(Ks))return e.isOdd()?Ks:na;if(e.eq(Ks))return this.isOdd()?Ks:na;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(tU)&&e.lt(tU))return ta(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,s=this.low>>>16,i=this.low&65535,a=e.high>>>16,u=e.high&65535,l=e.low>>>16,c=e.low&65535,d=0,f=0,h=0,p=0;return p+=i*c,h+=p>>>16,p&=65535,h+=s*c,f+=h>>>16,h&=65535,h+=i*l,f+=h>>>16,h&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=s*l,d+=f>>>16,f&=65535,f+=i*u,d+=f>>>16,f&=65535,d+=r*c+o*l+s*u+i*a,d&=65535,Qn(h<<16|p,d<<16|f,this.unsigned)};We.mul=We.multiply;We.divide=function(e){if(ci(e)||(e=au(e)),e.isZero())throw Error("division by zero");if(ea){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?ea.div_u:ea.div_s)(this.low,this.high,e.low,e.high);return Qn(n,ea.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?zf:na;var r,o,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return zf;if(e.gt(this.shru(1)))return VK;s=zf}else{if(this.eq(Ks)){if(e.eq(tm)||e.eq(KR))return Ks;if(e.eq(Ks))return tm;var i=this.shr(1);return r=i.div(e).shl(1),r.eq(na)?e.isNegative()?tm:KR:(o=this.sub(e.mul(r)),s=r.add(o.div(e)),s)}else if(e.eq(Ks))return this.unsigned?zf:na;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=na}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:BC(2,a-48),l=ta(r),c=l.mul(e);c.isNegative()||c.gt(o);)r-=u,l=ta(r,this.unsigned),c=l.mul(e);l.isZero()&&(l=tm),s=s.add(l),o=o.sub(c)}return s};We.div=We.divide;We.modulo=function(e){if(ci(e)||(e=au(e)),ea){var n=(this.unsigned?ea.rem_u:ea.rem_s)(this.low,this.high,e.low,e.high);return Qn(n,ea.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};We.mod=We.modulo;We.rem=We.modulo;We.not=function(){return Qn(~this.low,~this.high,this.unsigned)};We.and=function(e){return ci(e)||(e=au(e)),Qn(this.low&e.low,this.high&e.high,this.unsigned)};We.or=function(e){return ci(e)||(e=au(e)),Qn(this.low|e.low,this.high|e.high,this.unsigned)};We.xor=function(e){return ci(e)||(e=au(e)),Qn(this.low^e.low,this.high^e.high,this.unsigned)};We.shiftLeft=function(e){return ci(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Qn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Qn(0,this.low<<e-32,this.unsigned)};We.shl=We.shiftLeft;We.shiftRight=function(e){return ci(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Qn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Qn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};We.shr=We.shiftRight;We.shiftRightUnsigned=function(e){if(ci(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Qn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Qn(n,0,this.unsigned):Qn(n>>>e-32,0,this.unsigned)};We.shru=We.shiftRightUnsigned;We.shr_u=We.shiftRightUnsigned;We.toSigned=function(){return this.unsigned?Qn(this.low,this.high,!1):this};We.toUnsigned=function(){return this.unsigned?this:Qn(this.low,this.high,!0)};We.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};We.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};We.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Xn.fromBytes=function(e,n,r){return r?Xn.fromBytesLE(e,n):Xn.fromBytesBE(e,n)};Xn.fromBytesLE=function(e,n){return new Xn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Xn.fromBytesBE=function(e,n){return new Xn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const YK=Xd(zK),WSe=dH({__proto__:null,default:YK},[zK]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rf=YK||WSe;function r_(t){return Rf.fromString(t,!0,16)}const qK=r_("c3a5c85c97cb3127"),Tf=r_("b492b66fbe98f273"),as=r_("9ae16a3b2f90404f");function XR(t){return t.xor(t.shru(47))}function KK(t,e,n){const r=t.slice(e,e+n);return Rf.fromBytes(Array.from(r),!0,!0)}function Vn(t,e){return KK(t,e,8)}function nU(t,e){return KK(t,e,4)}function ho(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function kd(t,e,n=r_("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function zSe(t,e,n,r,o,s){o=o.add(t),s=ho(s.add(o).add(r),21);const i=o;return o=o.add(e),o=o.add(n),s=s.add(ho(o,44)),[o.add(r),s.add(i)]}function nw(t,e,n,r){return zSe(Vn(t,e),Vn(t,e+8),Vn(t,e+16),Vn(t,e+24),n,r)}function USe(t,e=t.length){if(e>=8){const n=as.add(e*2),r=Vn(t,0).add(as),o=Vn(t,e-8),s=ho(o,37).mul(n).add(r),i=ho(r,25).add(o).mul(n);return kd(s,i,n)}if(e>=4){const n=as.add(e*2),r=nU(t,0);return kd(r.shl(3).add(e),nU(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],o=t[e-1],s=n+(r<<8),i=e+(o<<2);return XR(as.mul(s).xor(qK.mul(i))).mul(as)}return as}function VSe(t,e=t.length){const n=as.add(e*2),r=Vn(t,0).mul(Tf),o=Vn(t,8),s=Vn(t,e-8).mul(n),i=Vn(t,e-16).mul(as);return kd(ho(r.add(o),43).add(ho(s,30)).add(i),r.add(ho(o.add(as),18)).add(s),n)}function HSe(t,e=t.length){const n=as.add(e*2),r=Vn(t,0).mul(as),o=Vn(t,8),s=Vn(t,e-8).mul(n),i=Vn(t,e-16).mul(as),a=ho(r.add(o),43).add(ho(s,30)).add(i),u=kd(a,r.add(ho(o.add(as),18)).add(s),n),l=Vn(t,16).mul(n),c=Vn(t,24),d=a.add(Vn(t,e-32)).mul(n),f=u.add(Vn(t,e-24)).mul(n);return kd(ho(l.add(c),43).add(ho(d,30)).add(f),l.add(ho(c.add(r),18)).add(d),n)}function GSe(t,e=t.length){const n=Rf.fromNumber(81,!0);if(e<=32)return e<=16?USe(t,e):VSe(t,e);if(e<=64)return HSe(t,e);let r=n,o=n.mul(Tf).add(113),s=XR(o.mul(as).add(113)).mul(as),i=[Rf.UZERO,Rf.UZERO],a=[Rf.UZERO,Rf.UZERO];r=r.mul(as).add(Vn(t,0));let u=0;const l=(e-1>>6)*64,c=l+(e-1&63)-63;do r=ho(r.add(o).add(i[0]).add(Vn(t,u+8)),37).mul(Tf),o=ho(o.add(i[1]).add(Vn(t,u+48)),42).mul(Tf),r=r.xor(a[1]),o=o.add(i[0]).add(Vn(t,u+40)),s=ho(s.add(a[0]),33).mul(Tf),i=nw(t,u,i[1].mul(Tf),r.add(a[0])),a=nw(t,u+32,s.add(a[1]),o.add(Vn(t,u+16))),[s,r]=[r,s],u+=64;while(u!==l);const d=Tf.add(s.and(255).shl(1));return u=c,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),r=ho(r.add(o).add(i[0]).add(Vn(t,u+8)),37).mul(d),o=ho(o.add(i[1]).add(Vn(t,u+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(Vn(t,u+40))),s=ho(s.add(a[0]),33).mul(d),i=nw(t,u,i[1].mul(d),r.add(a[0])),a=nw(t,u+32,s.add(a[1]),o.add(Vn(t,u+16))),[s,r]=[r,s],kd(kd(i[0],a[0],d).add(XR(o).mul(qK)).add(s),kd(i[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function of(t,e){return e==="string"?Cd(t):Yh([t],e)}function YSe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Yh(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=wh(t)),fe().getBool("DEBUG")&&CSe(t,e),YSe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Is(){return fe().platform.now()}function Cd(t,e="utf-8"){return e=e||"utf-8",fe().platform.encode(t,e)}function Bd(t,e="utf-8"){return e=e||"utf-8",fe().platform.decode(t,e)}function pa(t){return fe().platform.isTypedArray!=null?fe().platform.isTypedArray(t):WK(t)}function wh(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||HM(t)||t==null||pa(t)&&n)e.push(t);else if(Array.isArray(t)||pa(t))for(let r=0;r<t.length;++r)wh(t[r],e,n);else{let r=-1;for(const o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)wh(t[o],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qSe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new XSe)}profileKernel(e,n,r){let o;const s=()=>{o=r()};let i;const a=Is();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(s);else{s();for(const l of o)l.dataSync();i=Promise.resolve({kernelMs:Is()-a})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<o.length;l++){const c=o[l];c.data().then(d=>{KSe(d,c.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:i.then(l=>l.kernelMs),extraInfo:i.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:o,inputs:s,extraInfo:i}=e;r.forEach(a=>{Promise.all([a.data(),o,i]).then(u=>{this.logger.logKernelProfile(n,a,u[0],u[1],s,u[2])})})}}function KSe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class XSe{logKernelProfile(e,n,r,o,s,i){const a=typeof o=="number"?mm(`${o}ms`,9):o.error,u=mm(e,25),l=n.rank,c=n.size,d=mm(n.shape.toString(),14);let f="";for(const h in s){const p=s[h];if(p!=null){const m=p.shape||n.shape,g=m.length;f+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${u}	%c${a}	%c${l}D ${d}	%c${c}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QSe(t,e,n){const r={},o={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const l=t[u],c=l.inputs;for(const d in c){const f=c[d];let h=!1;for(let p=0;p<e.length;p++)if(r[f.id]){l.outputs.forEach(m=>r[m.id]=!0),h=!0,o[l.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const i={};for(let u=t.length-1;u>=0;u--){const l=t[u],c=l.inputs;for(let d=0;d<l.outputs.length;d++)if(s[l.outputs[d].id]){for(const f in c)s[c[f].id]=!0,i[l.id]=!0;break}}const a=[];for(let u=0;u<t.length;u++){const l=t[u];if(o[l.id]&&i[l.id]){const c={};for(const f in l.inputs){const h=l.inputs[f];r[h.id]&&(c[f]=h)}const d=Object.assign({},l);d.inputs=c,d.outputs=l.outputs,a.push(d)}}return a}function JSe(t,e,n,r){for(let o=e.length-1;o>=0;o--){const s=e[o],i=[];if(s.outputs.forEach(u=>{const l=t[u.id];l!=null?i.push(l):i.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(i);for(const u in s.inputs){if(!(u in a))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(a)}.`);const l=n(()=>a[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=s.inputs[u];if(!En(l.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=l;else{const d=t[c.id];t[c.id]=r(d,l),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rU=20,Ov=3,KT=7;function ZSe(t,e,n,r){const o=gt(e),s=eEe(t,e,n,o),i=e.length,a=yk(t,e,n,o,s),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${i}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(a.map(l=>"    "+l).join(`
`)),u.join(`
`)}function eEe(t,e,n,r){const o=xe(e),s=r[r.length-1],i=new Array(s).fill(0),a=e.length,u=n==="complex64"?ey(t):t;if(a>1)for(let l=0;l<o/s;l++){const c=l*s;for(let d=0;d<s;d++)i[d]=Math.max(i[d],Zv(u[c+d],0,n).length)}return i}function Zv(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(KT))} + ${parseFloat(t[1].toFixed(KT))}j`:Rx(t)?r=`'${t}'`:n==="bool"?r=XK(t):r=parseFloat(t.toFixed(KT)).toString(),mm(r,e)}function XK(t){return t===0?"false":"true"}function yk(t,e,n,r,o,s=!0){const i=n==="complex64"?2:1,a=e[0],u=e.length;if(u===0){if(n==="complex64"){const m=ey(t);return[Zv(m[0],0,n)]}return n==="bool"?[XK(t[0])]:[t[0].toString()]}if(u===1){if(a>rU){const g=Ov*i;let v=Array.from(t.slice(0,g)),y=Array.from(t.slice((a-Ov)*i,a*i));return n==="complex64"&&(v=ey(v),y=ey(y)),["["+v.map((x,b)=>Zv(x,o[b],n)).join(", ")+", ..., "+y.map((x,b)=>Zv(x,o[a-Ov+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?ey(t):Array.from(t)).map((g,v)=>Zv(g,o[v],n)).join(", ")+"]"]}const l=e.slice(1),c=r.slice(1),d=r[0]*i,f=[];if(a>rU){for(let m=0;m<Ov;m++){const g=m*d,v=g+d;f.push(...yk(t.slice(g,v),l,n,c,o,!1))}f.push("...");for(let m=a-Ov;m<a;m++){const g=m*d,v=g+d;f.push(...yk(t.slice(g,v),l,n,c,o,m===a-1))}}else for(let m=0;m<a;m++){const g=m*d,v=g+d;f.push(...yk(t.slice(g,v),l,n,c,o,m===a-1))}const h=u===2?",":"";f[0]="["+(a>0?f[0]+h:"");for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+h;let p=`,
`;for(let m=2;m<u;m++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":p),f}function ey(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class No{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=xe(e),r!=null){const o=r.length;U(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||$r(n,this.size),this.strides=gt(e)}set(e,...n){n.length===0&&(n=[0]),U(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const o of e){if(o<0||o>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Pa().makeTensor(this.values,this.shape,this.dtype)}}let Pa=null,Ap=null;function tEe(t){Pa=t}function nEe(t){Ap=t}class Qr{constructor(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=xe(e),this.strides=gt(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Ap.buffer(this.shape,this.dtype,e)}bufferSync(){return Ap.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return qa(this.shape,e,this.dtype==="complex64")}arraySync(){return qa(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Pa().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Bd(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Pa().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Pa().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Bd(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Pa().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Pa().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Ap.print(this,e)}clone(){return this.throwIfDisposed(),Ap.clone(this)}toString(e=!1){const n=this.dataSync();return ZSe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Ap.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Pa().makeVariable(this,e,n,r)}}Object.defineProperty(Qr,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ge(){return GM("Tensor",()=>Qr)}ge();class jC extends Qr{constructor(e,n,r,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!En(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Pa().disposeTensor(this),this.dataId=e.dataId,Pa().incRef(this,null)}dispose(){Pa().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(jC,Symbol.hasInstance,{value:t=>t instanceof Qr&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var oU;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(oU||(oU={}));var QR;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(QR||(QR={}));var JR;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(JR||(JR={}));var ZR;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(ZR||(ZR={}));var eO;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(eO||(eO={}));const rEe={float32:ZR,int32:QR,bool:JR,complex64:eO};function ri(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return rEe[t][e]}function MP(t){return ri(t,"int32")}function QK(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function JK(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lr(t,e){if(t.dtype===e.dtype)return[t,e];const n=ri(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function ZK(t){const e=[];return eX(t,e,new Set),e}function eX(t,e,n){if(t==null)return;if(t instanceof Qr){e.push(t);return}if(!oEe(t))return;const r=t;for(const o in r){const s=r[o];n.has(s)||(n.add(s),eX(s,e,n))}}function oEe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XT(t){return t.kernelName!=null}class sU{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class ig{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new sU}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(pi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new qSe(this.backendInstance),!0}setupRegisteredKernels(){Xz(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Xz(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof WM)&&typeof r.then=="function"){const o=++this.pendingBackendInitId,s=r.then(i=>o<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,pi(`Initialization of backend ${e} failed`),pi(i.stack||i.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return pi(`Initialization of backend ${e} failed`),pi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:o,asyncInit:s}=this.initializeBackend(r);if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),o=r.backend,s=this.readSync(n),i=o.refCount(n);o.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let o;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,n,r){e();try{const o=r();return n(),o}catch(o){throw n(),o}}nextTensorId(){return ig.nextTensorId++}nextVariableId(){return ig.nextVariableId++}clone(e){const n=ie.runKernel(Jx,{x:e}),r={x:e},o=i=>({x:()=>{const a="float32",u={x:i},l={dtype:a};return ie.runKernel(Bx,u,l)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],o,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(qz(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const o=this.backend.numDataIds();let s=0;r.forEach(u=>{s+=u.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-s-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const o=this.isTapeOn(),s=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let u;const l=XT(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(XT(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const v=qz(p,this.backendName);U(v!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const y=this.backend.numDataIds();u=v.kernelFunc({inputs:m,attrs:g,backend:this.backend});const x=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,y,x);const b=x.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(o){const C=this.getTensorsForGradient(p,m,b);r=this.saveTensorsForBackwardMode(C)}return b}}else{const{forwardFunc:p}=e,m=g=>{o&&(r=g.map(v=>this.keep(this.clone(v))))};a=()=>{const g=this.backend.numDataIds();u=this.tidy(()=>p(this.backend,m));const v=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,g,v),v}}const{inputs:c,attrs:d}=e,f=XT(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(l,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),o&&this.addTapeNode(l,c,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const o=Kz(e);if(o!=null){const s=o.inputsToSave||[],i=o.outputsToSave||[];let a;o.saveAllInputs?(U(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(l=>n[l])):a=s.map(l=>n[l]);const u=r.filter((l,c)=>i[c]);return a.concat(u)}return[]}makeTensor(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;let s=e;r==="string"&&Rx(e[0])&&(s=e.map(u=>Cd(u)));const i=o.write(s,n,r),a=new Qr(n,r,i,this.nextTensorId());if(this.trackTensor(a,o),r==="string"){const u=this.state.tensorInfo.get(i),l=ESe(s);this.state.numBytes+=l-u.bytes,u.bytes=l}return a}makeTensorFromDataId(e,n,r,o){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,o)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:o,dtype:s}=e,i=new Qr(o,s,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,o){r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));const s=new jC(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*MC(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof jC||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*MC(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,o,s,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},u=Kz(e);u!=null&&(o=u.gradFunc),o!=null&&(a.gradient=l=>(l=l.map((c,d)=>{if(c==null){const f=r[d],h=Ko(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return c}),o(l.length>1?l:l[0],s,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=ZK(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const i=this.state.activeScope.track[s];!i.kept&&!r.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===o.id&&this.track(s)})}gradients(e,n,r,o=!1){if(U(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));U(s instanceof Qr,()=>"The result y returned by f() must be a tensor.");const i=QSe(this.state.activeTape,n,s);if(!o&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??sEe(s.shape),JSe(a,i,l=>this.tidy(l),iEe);const u=n.map(l=>a[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const c of l.saved)c.dispose()}),this.state.activeTape=null),{value:s,grads:u}})}customGrad(e){return U(VR(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{U(n.every(a=>a instanceof Qr),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const o={};n.forEach((a,u)=>{o[u]=a});const s=(a,u)=>(r=e(...n,u),U(r.value instanceof Qr,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),U(VR(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(a,u)=>{const l=r.gradFunc(a,u),c=Array.isArray(l)?l:[l];U(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),U(c.every(f=>f instanceof Qr),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:i,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Is(),r=await this.backend.time(e);return r.wallMs=Is()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new sU;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}ig.nextTensorId=0;ig.nextVariableId=0;function sEe(t){const e=VM(xe(t),"float32");return ie.makeTensor(e,t,"float32")}function tX(){const t=vK();if(t._tfengine==null){const e=new TSe(t);t._tfengine=new ig(e)}return OSe(t._tfengine.ENV),tEe(()=>t._tfengine),t._tfengine}const ie=tX();function iEe(t,e){const n={a:t,b:e};return ie.runKernel(Mg,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEe(){return typeof navigator<"u"&&navigator!=null}function nX(t){if(t||aEe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function rX(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const As=fe();As.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});As.registerFlag("IS_BROWSER",()=>rX());As.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");As.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));As.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));As.registerFlag("PROD",()=>!1);As.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>As.getBool("DEBUG"));As.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);As.registerFlag("IS_TEST",()=>!1);As.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>As.getBool("DEBUG"));As.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);As.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);As.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o_(t,e){let n=t;if(pa(t))return e==="string"?[]:[t.length];if(QK(t)){const o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(JK(t))return[t.buffer.size/(e==null?4:MC(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||pa(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&oX(t,r,[]),r}function oX(t,e,n){if(n=n||[],!Array.isArray(t)&&!pa(t)){U(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}U(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),U(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let o=0;o<t.length;++o)oX(t[o],r,n.concat(o))}function iU(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function K(t,e,n,r="numeric"){if(t instanceof ge())return iU(r,t.dtype,e,n),t;let o=Ag(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),iU(r,o,e,n),t==null||!pa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const u=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}const s=o_(t,o);!pa(t)&&!Array.isArray(t)&&(t=[t]);const a=o!=="string"?Yh(t,o):wh(t,[],!0);return ie.makeTensor(a,s,o)}function sX(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,i)=>K(s,`${e}[${i}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uEe="__op";function le(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+uEe;const o=(...s)=>{ie.startScope(n);try{const i=r(...s);return HM(i)&&console.error("Cannot return a Promise inside of tidy."),ie.endScope(i),i}catch(i){throw ie.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(t,e){const n=K(t,"real","complex"),r=K(e,"imag","complex");UM(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const o={real:n,imag:r};return ie.runKernel(eP,o)}const ag=le({complex_:lEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_(t,e,n,r){if(r==null)r=Ag(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(JK(t)||QK(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ie.backend.createTensorFromGPUData(t,e||n,r)}if(!pa(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){vc(e);const o=xe(e),s=xe(n);U(o===s,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${s}`);for(let i=0;i<n.length;++i){const a=n[i],u=i===n.length-1?a!==xe(e.slice(i)):!0;U(n[i]===e[i]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!pa(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Yh(t,r):wh(t,[],!0),ie.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iX(t,e,n){const r=o_(t,n);return s_(t,e,r,n)}class Pg{static join(e){return new Pg(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>pa(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const o=e[r];r!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+o.byteLength;this.shards.push({buffer:o,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const o=n-e,s=new ArrayBuffer(o),i=new Uint8Array(s);let a=0;for(let u=r;u<this.shards.length;u++){const l=this.shards[u],d=e+a-l.start,f=a,p=Math.min(n,l.end)-l.start,m=new Uint8Array(l.buffer,d,p-d);if(i.set(m,f),a+=m.length,n<l.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=cEe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function cEe(t,e){let n=0,r=t.length;for(;n<=r;){const o=Math.floor((r-n)/2)+n,s=e(t[o]);if(s===0)return o;s<0?r=o:n=o+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yu(){return ie}function tO(){return ie.memory()}function de(t,e){return ie.tidy(t,e)}function qt(t){ZK(t).forEach(n=>n.dispose())}function Vu(t){return ie.keep(t)}function aX(t,e,n=1){return ie.registerBackend(t,e,n)}function dEe(){return ie.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aU=4;async function uU(t,e){const n=[],r=[],o=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<o.length;++i){const a=o[i],u=Array.isArray(t)?t[i].tensor:t[a];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);const l={name:a,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const c=new Promise(async d=>{const f=await u.bytes(),h=f.reduce((g,v)=>g+v.length,0)+aU*f.length,p=new Uint8Array(h);let m=0;for(let g=0;g<f.length;g++){const v=f[g],y=new Uint8Array(new Uint32Array([v.length]).buffer);p.set(y,m),m+=aU,p.set(v,m),m+=v.length}d(p)});r.push(c)}else r.push(u.data());e!=null&&(l.group=e),n.push(l)}const s=await Promise.all(r);return{data:fEe(s),specs:n}}function fEe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let o=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),o),o+=s.byteLength}),r.buffer}const PP=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function lU(t){return PP?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function hEe(t){if(PP)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function pEe(t){if(PP){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function mEe(t){return Pg.join(t)}function uX(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:lU(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:lU(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Pg(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rs{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return rs.instance==null&&(rs.instance=new rs),rs.instance}static registerSaveRouter(e){rs.getInstance().saveRouters.push(e)}static registerLoadRouter(e){rs.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return rs.getHandlers(e,"save")}static getLoadHandlers(e,n){return rs.getHandlers(e,"load",n)}static getHandlers(e,n,r){const o=[];return(n==="load"?rs.getInstance().loadRouters:rs.getInstance().saveRouters).forEach(i=>{const a=i(e,r);a!==null&&o.push(a)}),o}}const gEe=t=>rs.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nO="tensorflowjs",rO=1,Uf="models_store",td="model_info_store";function lX(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function oO(t){const e=t.result;e.createObjectStore(Uf,{keyPath:"modelPath"}),e.createObjectStore(td,{keyPath:"modelPath"})}class kh{constructor(e){if(this.indexedDB=lX(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,o)=>{const s=this.indexedDB.open(nO,rO);s.onupgradeneeded=()=>oO(s),s.onsuccess=()=>{const i=s.result;if(n==null){const a=i.transaction(Uf,"readonly"),l=a.objectStore(Uf).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(i.close(),o(l.error)),a.oncomplete=()=>i.close()}else{n.weightData=Pg.join(n.weightData);const a=uX(n),u=i.transaction(td,"readwrite");let l=u.objectStore(td),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return o(f)}let d;c.onsuccess=()=>{d=i.transaction(Uf,"readwrite");const f=d.objectStore(Uf);let h;try{h=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return o(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{l=u.objectStore(td);const m=l.delete(this.modelPath);m.onsuccess=()=>(i.close(),o(h.error)),m.onerror=g=>(i.close(),o(h.error))}},c.onerror=f=>(i.close(),o(c.error)),u.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},s.onerror=i=>o(s.error)})}}kh.URL_SCHEME="indexeddb://";const cX=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(kh.URL_SCHEME)?vEe(t.slice(kh.URL_SCHEME.length)):null;rs.registerSaveRouter(cX);rs.registerLoadRouter(cX);function vEe(t){return new kh(t)}function yEe(t){return t.startsWith(kh.URL_SCHEME)?t.slice(kh.URL_SCHEME.length):t}class xEe{constructor(){this.indexedDB=lX()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(nO,rO);r.onupgradeneeded=()=>oO(r),r.onsuccess=()=>{const o=r.result,s=o.transaction(td,"readonly"),a=s.objectStore(td).getAll();a.onsuccess=()=>{const u={};for(const l of a.result)u[l.modelPath]=l.modelArtifactsInfo;e(u)},a.onerror=u=>(o.close(),n(a.error)),s.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})}async removeModel(e){return e=yEe(e),new Promise((n,r)=>{const o=this.indexedDB.open(nO,rO);o.onupgradeneeded=()=>oO(o),o.onsuccess=()=>{const s=o.result,i=s.transaction(td,"readwrite"),a=i.objectStore(td),u=a.get(e);let l;u.onsuccess=()=>{if(u.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),d=()=>{l=s.transaction(Uf,"readwrite");const h=l.objectStore(Uf).delete(e);h.onsuccess=()=>n(u.result.modelArtifactsInfo),h.onerror=p=>r(u.error)};c.onsuccess=d,c.onerror=f=>(d(),s.close(),r(u.error))}},u.onerror=c=>(s.close(),r(u.error)),i.oncomplete=()=>{l==null?s.close():l.oncomplete=()=>s.close()}},o.onerror=s=>r(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ll="/",$p="tensorflowjs_models",dX="info",bEe="model_topology",wEe="weight_specs",kEe="weight_data",CEe="model_metadata";function fX(t){return{info:[$p,t,dX].join(Ll),topology:[$p,t,bEe].join(Ll),weightSpecs:[$p,t,wEe].join(Ll),weightData:[$p,t,kEe].join(Ll),modelMetadata:[$p,t,CEe].join(Ll)}}function hX(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function SEe(t){const e=t.split(Ll);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ll)}function EEe(t){return t.startsWith(Ch.URL_SCHEME)?t.slice(Ch.URL_SCHEME.length):t}class Ch{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=fX(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=uX(e),s=Pg.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,hEe(s));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:o}}catch{throw hX(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=pEe(i),n}}Ch.URL_SCHEME="localstorage://";const pX=t=>fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ch.URL_SCHEME)?_Ee(t.slice(Ch.URL_SCHEME.length)):null;rs.registerSaveRouter(pX);rs.registerLoadRouter(pX);function _Ee(t){return new Ch(t)}class IEe{constructor(){U(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),U(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=$p+Ll,r=Ll+dX;for(let o=0;o<this.LS.length;++o){const s=this.LS.key(o);if(s.startsWith(n)&&s.endsWith(r)){const i=SEe(s);e[i]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=EEe(e);const n=fX(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return hX(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cU="://";class bu{constructor(){this.managers={}}static getInstance(){return bu.instance==null&&(bu.instance=new bu),bu.instance}static registerManager(e,n){U(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(cU)&&(e=e.slice(0,e.indexOf(cU))),U(e.length>0,()=>"scheme must not be an empty string.");const r=bu.getInstance();U(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=bu.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(bu.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TEe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return WK(e)}}if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new TEe);try{bu.registerManager(Ch.URL_SCHEME,new IEe)}catch{}try{bu.registerManager(kh.URL_SCHEME,new xEe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEe={importFetch:()=>require("node-fetch")};let QT;class DEe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):(QT==null&&(QT=NEe.importFetch()),QT(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new DEe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ht(t,e="float32",n){return e=e||"float32",vc(t),new No(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REe(t,e){const n=K(t,"x","cast");if(!SSe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:e};return ie.runKernel(Bx,r,o)}const Ye=le({cast_:REe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OEe(t){const n={x:K(t,"x","clone","string_or_numeric")};return ie.runKernel(Jx,n)}const rh=le({clone_:OEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */tX();const $Ee={buffer:Ht,cast:Ye,clone:rh,print:AEe};nEe($Ee);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(t,e){let n=K(t,"a","add"),r=K(e,"b","add");[n,r]=Lr(n,r);const o={a:n,b:r};return ie.runKernel(Mg,o)}const De=le({add_:MEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEe(t,e){let n=K(t,"a","floorDiv"),r=K(e,"b","floorDiv");[n,r]=Lr(n,r);const o={a:n,b:r};return ie.runKernel(Xx,o)}const mX=le({floorDiv_:PEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEe(t,e){let n=K(t,"a","div"),r=K(e,"b","div");if([n,r]=Lr(n,r),n.dtype==="int32"&&r.dtype==="int32")return mX(n,r);const o={a:n,b:r},s={};return ie.runKernel(Vx,o,s)}const kt=le({div_:FEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(t,e){let n=K(t,"a","mul"),r=K(e,"b","mul");[n,r]=Lr(n,r);const o={a:n,b:r};return ie.runKernel(a1,o)}const se=le({mul_:LEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BEe(t){const e=K(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ie.runKernel(cE,n)}else{const n={x:e};return ie.runKernel(rE,n)}}const os=le({abs_:BEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEe(t){const n={x:K(t,"x","acos")};return ie.runKernel(Ox,n)}const WEe=le({acos_:jEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t){const n={x:K(t,"x","acosh")};return ie.runKernel(Ax,n)}const UEe=le({acosh_:zEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VEe(t,e=null,n=!1){const o={x:K(t,"x","all","bool")},s={axis:e,keepDims:n};return ie.runKernel(qM,o,s)}const gX=le({all_:VEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HEe(t,e=null,n=!1){const o={x:K(t,"x","any","bool")},s={axis:e,keepDims:n};return ie.runKernel(KM,o,s)}const sO=le({any_:HEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(t,e=0){const r={x:K(t,"x","argMax")},o={axis:e};return ie.runKernel(oE,r,o)}const g0=le({argMax_:GEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YEe(t,e=0){const r={x:K(t,"x","argMin")},o={axis:e};return ie.runKernel(sE,r,o)}const qEe=le({argMin_:YEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(t){const n={x:K(t,"x","asin")};return ie.runKernel($x,n)}const XEe=le({asin_:KEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEe(t){const n={x:K(t,"x","asinh")};return ie.runKernel(Mx,n)}const JEe=le({asinh_:QEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZEe(t){const n={x:K(t,"x","atan")};return ie.runKernel(Px,n)}const e_e=le({atan_:ZEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t_e(t,e){let n=K(t,"a","atan2"),r=K(e,"b","atan2");[n,r]=Lr(n,r);const o={a:n,b:r};return ie.runKernel(Lx,o)}const n_e=le({atan2_:t_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r_e(t){const n={x:K(t,"x","atanh")};return ie.runKernel(Fx,n)}const o_e=le({atanh_:r_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I1(t,e,n,r,o="NHWC",s){const i=t[3],a=[...e,i],u=xc(o);return Lo(t,a,n,s,r,null,null,u)}function va(t,e,n,r,o,s,i="channelsLast"){const[a,u]=v0(e);let l;if(i==="channelsLast")l=[a,u,t[3],t[3]];else if(i==="channelsFirst")l=[a,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Lo(t,l,n,r,o,s,!1,i)}function yc(t,e,n,r,o,s,i="NDHWC"){const[a,u,l]=iO(e);let c,d;if(i==="NDHWC")d="channelsLast",c=[a,u,l,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",c=[a,u,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return sf(t,c,n,r,o,!1,d,s)}function Lo(t,e,n,r,o,s,i=!1,a="channelsLast"){let[u,l,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[u,l,c,d]=t;else if(a==="channelsFirst")[u,d,l,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=e,[m,g]=v0(n),[v,y]=v0(r),x=vm(f,v),b=vm(h,y),{padInfo:C,outHeight:S,outWidth:E}=a_e(o,l,c,m,g,x,b,s,a),I=i?p*d:p;let T;return a==="channelsFirst"?T=[u,I,S,E]:a==="channelsLast"&&(T=[u,S,E,I]),{batchSize:u,dataFormat:a,inHeight:l,inWidth:c,inChannels:d,outHeight:S,outWidth:E,outChannels:I,padInfo:C,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:h,effectiveFilterHeight:x,effectiveFilterWidth:b,dilationHeight:v,dilationWidth:y,inShape:t,outShape:T,filterShape:e}}function sf(t,e,n,r,o,s=!1,i="channelsLast",a){let[u,l,c,d,f]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[u,l,c,d,f]=t;else if(i==="channelsFirst")[u,f,l,c,d]=t;else throw new Error(`Unknown dataFormat ${i}`);const[h,p,m,,g]=e,[v,y,x]=iO(n),[b,C,S]=iO(r),E=vm(h,b),I=vm(p,C),T=vm(m,S),{padInfo:N,outDepth:O,outHeight:$,outWidth:A}=u_e(o,l,c,d,v,y,x,E,I,T,a),P=s?g*f:g;let L;return i==="channelsFirst"?L=[u,P,O,$,A]:i==="channelsLast"&&(L=[u,O,$,A,P]),{batchSize:u,dataFormat:i,inDepth:l,inHeight:c,inWidth:d,inChannels:f,outDepth:O,outHeight:$,outWidth:A,outChannels:P,padInfo:N,strideDepth:v,strideHeight:y,strideWidth:x,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:I,effectiveFilterWidth:T,dilationDepth:b,dilationHeight:C,dilationWidth:S,inShape:t,outShape:L,filterShape:e}}function s_e(t,e,n,r,o){r==null&&(r=FP(t,e,n));const s=t[0],i=t[1],a=y0((s-e+2*r)/n+1,o),u=y0((i-e+2*r)/n+1,o);return[a,u]}function i_e(t,e,n,r,o,s){o==null&&(o=FP(t,e[0],r[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(i[a]=y0((t[a]-e[a]+2*o)/r[a]+1,s));return i}function FP(t,e,n,r=1){const o=vm(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function v0(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function iO(t){return typeof t=="number"?[t,t,t]:t}function vm(t,e){return e<=1?t:t+(t-1)*(e-1)}function a_e(t,e,n,r,o,s,i,a,u){let l,c,d;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=s_e([e,n],s,r,t,a);c=h[0],d=h[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/o);const f=Math.max(0,(c-1)*r+s-e),h=Math.max(0,(d-1)*o+i-n),p=Math.floor(f/2),m=f-p,g=Math.floor(h/2),v=h-g;l={top:p,bottom:m,left:g,right:v,type:"SAME"}}else if(t==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),d=Math.ceil((n-i+1)/o);else if(typeof t=="object"){const f=u==="channelsLast"?t[1][0]:t[2][0],h=u==="channelsLast"?t[1][1]:t[2][1],p=u==="channelsLast"?t[2][0]:t[3][0],m=u==="channelsLast"?t[2][1]:t[3][1];l={top:f,bottom:h,left:p,right:m,type:f===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=y0((e-s+f+h)/r+1,a),d=y0((n-i+p+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:l,outHeight:c,outWidth:d}}function u_e(t,e,n,r,o,s,i,a,u,l,c){let d,f,h,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=i_e([e,n,r,1],[a,u,l],1,[o,s,i],t,c);f=g[0],h=g[1],p=g[2]}else if(t==="same"){f=Math.ceil(e/o),h=Math.ceil(n/s),p=Math.ceil(r/i);const m=(f-1)*o+a-e,g=(h-1)*s+u-n,v=(p-1)*i+l-r,y=Math.floor(m/2),x=m-y,b=Math.floor(g/2),C=g-b,S=Math.floor(v/2),E=v-S;d={top:b,bottom:C,left:S,right:E,front:y,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function y0(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Sh(t){const[e,n,r]=v0(t);return e===1&&n===1&&r===1}function Qo(t,e){return Sh(t)||Sh(e)}function Eh(t){return v0(t).every(e=>e>0)}function xc(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ls(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")U(og(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(o=>{U(og(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l_e(t,e){const r={x:K(t,"x","reshape","string_or_numeric")},o={shape:e};return ie.runKernel(VE,r,o)}const ae=le({reshape_:l_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_e(t,e,n,r,o){const s=K(t,"x","avgPool","float32"),i=1;U(Qo(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=s,u=!1;s.rank===3&&(u=!0,a=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Ls("avgPool",r,o);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o};let d=ie.runKernel(iE,l,c);return d=Ye(d,s.dtype),u?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const LP=le({avgPool_:c_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d_e(t,e,n,r,o,s="NDHWC"){const i=K(t,"x","avgPool3d","float32");let a=i,u=!1;i.rank===4&&(u=!0,a=ae(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),U(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),U(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),U(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Ls("avgPool3d",r,o);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s};let d=ie.runKernel(aE,l,c);return d=Ye(d,a.dtype),u?ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const f_e=le({avgPool3d_:d_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h_e(t,e=0){U(t.length>=1,()=>"Pass at least one tensor to concat");const n=sX(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return rh(n[0]);const r=n,o={axis:e};return ie.runKernel(dE,r,o)}const Os=le({concat_:h_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p_e(t,e,n=!1,r=!1){let o=K(t,"a","matMul"),s=K(e,"b","matMul");[o,s]=Lr(o,s);const i={a:o,b:s},a={transposeA:n,transposeB:r};return ie.runKernel(uE,i,a)}const kn=le({matMul_:p_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m_e(t){const n={x:K(t,"x","sigmoid","float32")};return ie.runKernel(y1,n)}const Fg=le({sigmoid_:m_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g_e(t,e,n){const r=K(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const o={x:r},s={begin:e,size:n};return ie.runKernel(KE,o,s)}const Hn=le({slice_:g_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v_e(t){const n={x:K(t,"x","tanh","float32")};return ie.runKernel(S1,n)}const BP=le({tanh_:v_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_e(t,e,n){const r=K(t,"x","batchToSpaceND"),o=e.reduce((a,u)=>a*u);U(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),U(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),U(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);const s={x:r},i={blockShape:e,crops:n};return ie.runKernel(lE,s,i)}const jP=le({batchToSpaceND_:y_e});function x_e(t){let e;return t.rank===0||t.rank===1?e=ae(t,[1,1,1,t.size]):t.rank===2?e=ae(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_e(t,e,n,r,o,s){s==null&&(s=.001);const i=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),u=K(n,"variance","batchNorm");let l;o!=null&&(l=K(o,"scale","batchNorm"));let c;r!=null&&(c=K(r,"offset","batchNorm")),U(a.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(l==null||a.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:x_e(i),scale:l,offset:c,mean:a,variance:u},h={varianceEpsilon:s},p=ie.runKernel(bE,f,h);return ae(p,i.shape)}const i_=le({batchNorm_:b_e});function w_e(t,e,n,r,o,s){const i=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),u=K(n,"variance","batchNorm");let l;o!=null&&(l=K(o,"scale","batchNorm"));let c;return r!=null&&(c=K(r,"offset","batchNorm")),U(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),U(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),U(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&U(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&U(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),i_(i,a,u,c,l,s)}const k_e=le({batchNorm2d_:w_e});function C_e(t,e,n,r,o,s){const i=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),u=K(n,"variance","batchNorm");let l;o!=null&&(l=K(o,"scale","batchNorm"));let c;return r!=null&&(c=K(r,"offset","batchNorm")),U(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),U(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),U(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&U(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&U(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),i_(i,a,u,c,l,s)}const S_e=le({batchNorm3d_:C_e});function E_e(t,e,n,r,o,s){const i=K(t,"x","batchNorm"),a=K(e,"mean","batchNorm"),u=K(n,"variance","batchNorm");let l;o!=null&&(l=K(o,"scale","batchNorm"));let c;return r!=null&&(c=K(r,"offset","batchNorm")),U(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),U(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),U(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&U(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&U(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),i_(i,a,u,c,l,s)}const __e=le({batchNorm4d_:E_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_e(t,e,n){const r=K(t,"x","bincount"),o=K(e,"weights","bincount");U(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);const s={x:r,weights:o},i={size:n};return ie.runKernel(JM,s,i)}const T_e=le({bincount_:I_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N_e(t,e){let n=K(t,"broadcastTo","x");const r=n.shape;if(vc(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=ae(n,l)}const o=n.shape,s=Array.from(e);for(let l=e.length-1;l>=0;l--)if(o[l]===e[l])s[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return rh(n);const a={x:n},u={reps:s};return ie.runKernel(E1,a,u)}const Sy=le({broadcastTo_:N_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_e(t){const n={x:K(t,"x","ceil","float32")};return ie.runKernel(jx,n)}const R_e=le({ceil_:D_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a_(t,e,n){vc(t),n=n||Ag(e);const r={shape:t,value:e,dtype:n};return ie.runKernel(hP,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O_e(t,e,n){const r=K(t,"x","clipByValue");if(U(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return a_(r.shape,e,r.dtype);const o={x:r},s={clipValueMin:e,clipValueMax:n};return ie.runKernel(Wx,o,s)}const Di=le({clipByValue_:O_e});function A_e(t){return Os(t,0)}const $_e=le({concat1d_:A_e});function M_e(t,e){return Os(t,e)}const P_e=le({concat2d_:M_e});function F_e(t,e){return Os(t,e)}const L_e=le({concat3d_:F_e});function B_e(t,e){return Os(t,e)}const j_e=le({concat4d_:B_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W_e(t,e,n,r,o="NHWC",s=[1,1],i){const a=K(t,"x","conv2d","float32"),u=K(e,"filter","conv2d","float32");let l=a,c=!1;a.rank===3&&(c=!0,l=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),U(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),Ls("conv2d",r,i);const d=o==="NHWC"?l.shape[3]:l.shape[1];U(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),U(Qo(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),U(Eh(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),U(Eh(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:l,filter:u},h={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},p=ie.runKernel(fE,f,h);return c?ae(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const _h=le({conv2d_:W_e});function z_e(t,e,n,r,o="NWC",s=1,i){const a=K(t,"x","conv1d"),u=K(e,"filter","conv1d");let l=a,c=!1;a.rank===2&&(c=!0,l=ae(a,[1,a.shape[0],a.shape[1]])),U(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),U(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),Ls("conv1d",r,i),U(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),U(Qo(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),U(Eh(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),U(Eh(n),()=>"Error in conv1D: Stride should be larger than 0."),U(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=ae(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=ae(l,[l.shape[0],1,l.shape[1],l.shape[2]]),g=_h(f,d,[1,n],r,"NHWC",[1,s],i);return c?ae(g,[g.shape[2],g.shape[3]]):ae(g,[g.shape[0],g.shape[2],g.shape[3]])}const vX=le({conv1d_:z_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U_e(t,e,n,r,o,s="NHWC",i){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,u=e,l=!1;e.rank===3&&(l=!0,u=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),U(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),U(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),U(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?u.shape[3]:u.shape[1];U(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),U(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Ls("conv2dDerInput",o,i);const f={dy:u,filter:n},h={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,inputShape:a},p=ie.runKernel(hE,f,h);return l?ae(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const WP=le({conv2DBackpropInput_:U_e});function V_e(t,e,n,r,o,s){const i=K(t,"x","conv2dTranspose"),a=K(e,"filter","conv2dTranspose");return WP(n,i,a,r,o,"NHWC",s)}const yX=le({conv2dTranspose_:V_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H_e(t,e,n,r,o="NDHWC",s=[1,1,1]){const i=K(t,"x","conv3d"),a=K(e,"filter","conv3d");let u=i,l=!1;i.rank===4&&(l=!0,u=ae(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),U(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),U(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),U(u.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${a.shape[3]}.`),U(Qo(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),U(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),U(Eh(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),U(Eh(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:a},d={strides:n,pad:r,dataFormat:o,dilations:s},f=ie.runKernel(pE,c,d);return l?ae(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const G_e=le({conv3d_:H_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(t,e,n,r,o){U(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,i=e,a=!1;e.rank===4&&(a=!0,i=ae(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const u=s[4],l=i.shape[4];U(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),U(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),U(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),U(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),U(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},d={pad:o,strides:r,inputShape:s},f=ie.runKernel(rP,c,d);return a?ae(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const xX=le({conv3DBackpropInput_:Y_e});function q_e(t,e,n,r,o){const s=K(t,"x","conv3dTranspose"),i=K(e,"filter","conv3dTranspose");return xX(n,s,i,r,o)}const K_e=le({conv3dTranspose_:q_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_e(t){const n={x:K(t,"x","cos","float32")};return ie.runKernel(zx,n)}const zP=le({cos_:X_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q_e(t){const n={x:K(t,"x","cosh","float32")};return ie.runKernel(Ux,n)}const bX=le({cosh_:Q_e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J_e(t,e=0,n=!1,r=!1){const s={x:K(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return ie.runKernel(oP,s,i)}const aO=le({cumprod_:J_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z_e(t,e=0,n=!1,r=!1){const s={x:K(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return ie.runKernel(mE,s,i)}const wX=le({cumsum_:Z_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eIe(t,e,n,r=!1){const o=K(t,"x","denseBincount"),s=K(e,"weights","denseBincount");U(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),U(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),U(n>=0,()=>`size must be non-negative, but got ${n}.`),U(s.size===o.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${s.shape}.`);const i={x:o,weights:s},a={size:n,binaryOutput:r};return ie.runKernel(iP,i,a)}const dU=le({denseBincount_:eIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tIe(t,e,n="NHWC"){const r=K(t,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];U(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),U(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${r.shape}`),U(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),U(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const a={x:r},u={blockSize:e,dataFormat:n};return ie.runKernel(aP,a,u)}const nIe=le({depthToSpace_:tIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rIe(t,e,n,r,o="NHWC",s=[1,1],i){const a=K(t,"x","depthwiseConv2d","float32"),u=K(e,"filter","depthwiseConv2d","float32");let l=a,c=!1;a.rank===3&&(c=!0,l=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),U(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const d=o==="NHWC"?l.shape[3]:l.shape[1];U(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),Ls("depthwiseConv2d",r,i);const f={x:l,filter:u},h={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},p=ie.runKernel(gE,f,h);return c?ae(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const UP=le({depthwiseConv2d_:rIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oIe(t,e,n,r,o=[1,1],s="NHWC"){const i=K(t,"x","dilation2d"),a=K(e,"filter","dilation2d");U(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),U(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),U(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let u=i,l=!1;i.rank===3&&(u=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=!0),U(u.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${a.shape[2]}`);const c={x:u,filter:a},d={strides:n,pad:r,dilations:o},f=ie.runKernel(vE,c,d);return l?ae(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const sIe=le({dilation2d_:oIe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ug(t,e){const n=t.length,r=[];for(let o=0;o<n;o++){const s=n-1-o,i=t[s]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(s)}return r}function io(t,e){const n=[];for(let r=0;r<e.length;r++){const o=t[t.length-r-1],s=e.length-r-1,i=e[s];(o==null||o===1&&i>1)&&n.unshift(s)}return n}function Ft(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let o=0;o<n;o++){let s=t[t.length-o-1];s==null&&(s=1);let i=e[e.length-o-1];if(i==null&&(i=1),s===1)r[n-o-1]=i;else if(i===1)r[n-o-1]=s;else if(s!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-o-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(t,e){let n=K(t,"a","equal","string_or_numeric"),r=K(e,"b","equal","string_or_numeric");[n,r]=Lr(n,r),Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(yE,o)}const el=le({equal_:iIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe(t,e,n){const r=K(e,"a","where"),o=K(n,"b","where"),s=K(t,"condition","where","bool"),i=Ft(Ft(s.shape,r.shape),o.shape),a=Sy(s,i),u=Sy(r,i),l=Sy(o,i),c={condition:a,t:u,e:l};return ie.runKernel(qE,c)}const ms=le({where_:aIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uIe(t){const n={x:K(t,"x","zerosLike")};return ie.runKernel(n_,n)}const dn=le({zerosLike_:uIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lIe(t,e){let n=K(t,"a","div"),r=K(e,"b","div");[n,r]=Lr(n,r);const o=kt(n,r),s=dn(o),i=el(r,s);return ms(i,s,o)}const cIe=le({divNoNan_:lIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t,e){const n=K(t,"t1","dot"),r=K(e,"t2","dot");U((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const o=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(U(o===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${s}.`),n.rank===1&&r.rank===1){const i=ae(n,[1,-1]),a=ae(r,[-1,1]),u=kn(i,a);return ae(u,[])}else if(n.rank===1&&r.rank===2){const i=ae(n,[1,-1]),a=ae(r,[r.shape[0],r.shape[1]]),u=kn(i,a);return ae(u,[u.size])}else if(n.rank===2&&r.rank===1){const i=ae(r,[-1,1]),a=kn(n,i);return ae(a,[a.size])}else{const i=ae(r,[r.shape[0],r.shape[1]]);return kn(n,i)}}const fIe=le({dot_:dIe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hIe(t,...e){const n=e.map((o,s)=>K(o,`tensors${s}`,"einsum")),r={equation:t};return ie.runKernel(cP,n,r)}const Av=le({einsum_:hIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pIe(t){const n={x:K(t,"x","elu","float32")};return ie.runKernel(Hx,n)}const u_=le({elu_:pIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(t){let e=K(t,"x","erf");U(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ye(e,"float32"));const n={x:e};return ie.runKernel(Gx,n)}const gIe=le({erf_:mIe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VP(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function kX(t,e,n){const r=t.length+e.length,o=[];let s=0,i=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[s++]):o.push(e[i++]);return o}function Co(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const o=e.map(s=>t[s]);return[n,o]}function Kr(t,e){const n=e.map(r=>1);return kX(t,n,e)}function Bo(t,e,n){U(VP(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function br(t,e){if(VP(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function af(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Br(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vIe(t,e=null,n=!1){const o={x:K(t,"x","max")},s={reductionIndices:e,keepDims:n};return ie.runKernel(DE,o,s)}const Ka=le({max_:vIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yIe(t,e=null,n=!1){const o={x:K(t,"x","min")},s={axis:e,keepDims:n};return ie.runKernel($E,o,s)}const WC=le({min_:yIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xIe(t,e){let n=K(t,"base","pow"),r=K(e,"exp","pow");[n,r]=Lr(n,r);const o={a:n,b:r};return ie.runKernel(u1,o)}const lg=le({pow_:xIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cn(t,e){if((pa(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&pa(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return s_(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bIe(t){const n={x:K(t,"x","sqrt","float32")};return ie.runKernel(b1,n)}const ys=le({sqrt_:bIe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wIe(t){const e=K(t,"x","square"),n={};return ie.runKernel("Square",{x:e},n)}const Kn=le({square_:wIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kIe(t,e=null,n=!1){let r=K(t,"x","sum");r.dtype==="bool"&&(r=Ye(r,"int32"));const o={x:r},s={axis:e,keepDims:n};return ie.runKernel(XE,o,s)}const yt=le({sum_:kIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CIe(t,e="euclidean",n=null,r=!1){t=K(t,"x","norm");const o=CX(t,e,n);let s=o.shape;if(r){const i=Gt(n,t.shape);s=Kr(o.shape,i)}return ae(o,s)}function CX(t,e,n=null){if(t.rank===0)return os(t);if(t.rank!==1&&n===null)return CX(ae(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return yt(os(t),n);if(e===1/0)return Ka(os(t),n);if(e===-1/0)return WC(os(t),n);if(e==="euclidean"||e===2)return ys(yt(lg(os(t),Cn(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Ka(yt(os(t),n[0]),n[1]-1);if(e===1/0)return Ka(yt(os(t),n[1]),n[0]);if(e===-1/0)return WC(yt(os(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ys(yt(Kn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const l_=le({norm_:CIe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIe(t,e=null,n=!1){return l_(t,"euclidean",e,n)}const EIe=le({euclideanNorm_:SIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ie(t){const n={x:K(t,"x","exp")};return ie.runKernel(Yx,n)}const tl=le({exp_:_Ie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(t,e=0){const n=K(t,"x","expandDims","string_or_numeric");U(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},o={dim:e};return ie.runKernel(xE,r,o)}const Ts=le({expandDims_:IIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TIe(t){const n={x:K(t,"x","expm1")};return ie.runKernel(qx,n)}const NIe=le({expm1_:TIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(t,e){const n=K(t,"x","tile","string_or_numeric");U(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},o={reps:e};return ie.runKernel(E1,r,o)}const Wa=le({tile_:DIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(t,e,n,r="float32"){e==null&&(e=t);const o=Ht([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)o.set(1,a,a);const i=ae(o.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return Wa(Ts(i,0),[n[0],1,1]);if(n.length===2)return Wa(Ts(Ts(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return Wa(Ts(Ts(Ts(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const SX=le({eye_:RIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t){const n={x:K(t,"x","floor","float32")};return ie.runKernel(Kx,n)}const c_=le({floor_:OIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AIe(t,e,n=0,r=0){const o=K(t,"x","gather"),s=K(e,"indices","gather","int32"),i={x:o,indices:s},a={axis:n,batchDims:r};return ie.runKernel(wE,i,a)}const HP=le({gather_:AIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ie(t,e){let n=K(t,"a","greater","string_or_numeric"),r=K(e,"b","greater","string_or_numeric");[n,r]=Lr(n,r),Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(kE,o)}const $i=le({greater_:$Ie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(t,e){let n=K(t,"a","greaterEqual","string_or_numeric"),r=K(e,"b","greaterEqual","string_or_numeric");[n,r]=Lr(n,r),Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(Qx,o)}const qh=le({greaterEqual_:MIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(t){const n={input:K(t,"input","imag")};return ie.runKernel(gP,n)}const GP=le({imag_:PIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FIe(t){const n={x:K(t,"x","isFinite")};return ie.runKernel(Zx,n)}const LIe=le({isFinite_:FIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BIe(t){const n={x:K(t,"x","isInf")};return ie.runKernel(e1,n)}const jIe=le({isInf_:BIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(t){const n={x:K(t,"x","isNaN")};return ie.runKernel(t1,n)}const zIe=le({isNaN_:WIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UIe(t,e=.2){const r={x:K(t,"x","leakyRelu")},o={alpha:e};return ie.runKernel(CE,r,o)}const YP=le({leakyRelu_:UIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VIe(t,e){let n=K(t,"a","less","string_or_numeric"),r=K(e,"b","less","string_or_numeric");[n,r]=Lr(n,r),Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(SE,o)}const zC=le({less_:VIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIe(t,e){let n=K(t,"a","lessEqual","string_or_numeric"),r=K(e,"b","lessEqual","string_or_numeric");[n,r]=Lr(n,r),Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(EE,o)}const Lg=le({lessEqual_:HIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GIe(t,e=5,n=1,r=1,o=.5){const s=K(t,"x","localResponseNormalization");U(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),U(og(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=s,a=!1;s.rank===3&&(a=!0,i=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const u={x:i},l={depthRadius:e,bias:n,alpha:r,beta:o},c=ie.runKernel(NE,u,l);return a?ae(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const YIe=le({localResponseNormalization_:GIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qIe(t){const n={x:K(t,"x","log","float32")};return ie.runKernel(n1,n)}const nl=le({log_:qIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(t){const n={x:K(t,"x","log1p")};return ie.runKernel(r1,n)}const EX=le({log1p_:KIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(t,e){U(VR(t),()=>"The f passed in variableGrads(f) must be a function"),U(e==null||Array.isArray(e)&&e.every(l=>l instanceof jC),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const l in ie.registeredVariables)e.push(ie.registeredVariables[l])}const r=n?e.filter(l=>!l.trainable):null,o=e.length;e=e.filter(l=>l.trainable),U(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const s=!0,{value:i,grads:a}=ie.gradients(t,e,null,s);U(a.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),U(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const u={};return e.forEach((l,c)=>{a[c]!=null&&(u[l.name]=a[c])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:i,grads:u}}function cg(t){return ie.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QIe(t){const n={x:K(t,"x","neg")};return ie.runKernel(PE,n)}const Mr=le({neg_:QIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JIe(t){const n={x:K(t,"x","softplus")};return ie.runKernel(x1,n)}const T1=le({softplus_:JIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZIe(t){const e=K(t,"x","logSigmoid");return cg(r=>({value:Mr(T1(Mr(r))),gradFunc:i=>se(i,Fg(Mr(r)))}))(e)}const eTe=le({logSigmoid_:ZIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTe(t,e){let n=K(t,"a","sub"),r=K(e,"b","sub");[n,r]=Lr(n,r);const o={a:n,b:r};return ie.runKernel(k1,o)}const Ct=le({sub_:tTe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTe(t,e=-1){const n=K(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return cg((o,s)=>{const a=Ka(o,e,!0),u=Ct(o,a),l=Ct(Ye(u,"float32"),nl(yt(tl(u),e,!0)));return s([l]),{value:l,gradFunc:(d,f)=>{const[h]=f,p=!0,m=tl(h);return Ct(d,se(yt(d,e,p),m))}}})(n)}const _X=le({logSoftmax_:nTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTe(t,e=null,n=!1){const r=K(t,"x","logSumExp"),o=Gt(e,r.shape),s=Ka(r,o,!0),i=Ct(r,s),a=tl(i),u=yt(a,o),l=nl(u),c=De(ae(s,l.shape),l);if(n){const d=Kr(c.shape,o);return ae(c,d)}return c}const IX=le({logSumExp_:rTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oTe(t,e){const n=K(t,"a","logicalAnd","bool"),r=K(e,"b","logicalAnd","bool");Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(_E,o)}const sc=le({logicalAnd_:oTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(t){const n={x:K(t,"x","logicalNot","bool")};return ie.runKernel(IE,n)}const qP=le({logicalNot_:sTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t,e){const n=K(t,"a","logicalOr","bool"),r=K(e,"b","logicalOr","bool");Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(TE,o)}const TX=le({logicalOr_:iTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTe(t,e){const n=K(t,"a","logicalXor","bool"),r=K(e,"b","logicalXor","bool");return Ft(n.shape,r.shape),sc(TX(t,e),qP(sc(t,e)))}const uTe=le({logicalXor_:aTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lTe(t,e,n,r,o){const s=K(t,"x","maxPool"),i=1;let a=s,u=!1;s.rank===3&&(u=!0,a=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),U(Qo(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Ls("maxPool",r,o);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o},d=ie.runKernel(RE,l,c);return u?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const KP=le({maxPool_:lTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cTe(t,e=[1,1,1],n,r,o,s="NDHWC"){const i=K(t,"x","maxPool3d");let a=i,u=!1;i.rank===4&&(u=!0,a=ae(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),U(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),U(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Ls("maxPool3d",r,o);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s},d=ie.runKernel(OE,l,c);return u?ae(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const dTe=le({maxPool3d_:cTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fTe(t,e){let n=K(t,"a","maximum"),r=K(e,"b","maximum");[n,r]=Lr(n,r),n.dtype==="bool"&&(n=Ye(n,"int32"),r=Ye(r,"int32")),Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(o1,o)}const uf=le({maximum_:fTe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTe(t,e=null,n=!1){const o={x:K(t,"x","mean")},s={axis:e,keepDims:n};return ie.runKernel(AE,o,s)}const Hr=le({mean_:hTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function po(t,e="float32"){if(vc(t),e==="complex64"){const r=po(t,"float32"),o=po(t,"float32");return ag(r,o)}const n=Ko(xe(t),e);return ie.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lf(t,e="float32"){if(vc(t),e==="complex64"){const r=lf(t,"float32"),o=po(t,"float32");return ag(r,o)}const n=VM(xe(t),e);return ie.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTe(t,e){let n=K(t,"a","minimum"),r=K(e,"b","minimum");[n,r]=Lr(n,r),n.dtype==="bool"&&(n=Ye(n,"int32"),r=Ye(r,"int32")),Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(s1,o)}const x0=le({minimum_:pTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTe(t,e,n){U(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=K(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");U(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)U(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),U(e[a][0]>=0&&e[a][0]<=r.shape[a]-o&&e[a][1]>=0&&e[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},i={x:r};return ie.runKernel(ME,i,s)}const gTe=le({mirrorPad_:mTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(t,e){let n=K(t,"a","mod"),r=K(e,"b","mod");[n,r]=Lr(n,r);const o={a:n,b:r};return ie.runKernel(i1,o)}const yTe=le({mod_:vTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(t,e=null,n=!1){t=K(t,"x","moments");const r=Gt(e,t.shape),o=Hr(t,r,n);let s=o.shape;n||(s=Kr(o.shape,r));const i=Kn(Ct(Ye(t,"float32"),ae(o,s))),a=Hr(i,r,n);return{mean:o,variance:a}}const XP=le({moments_:xTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTe(t,e){let n=K(t,"a","notEqual","string_or_numeric"),r=K(e,"b","notEqual","string_or_numeric");[n,r]=Lr(n,r),Ft(n.shape,r.shape);const o={a:n,b:r};return ie.runKernel(FE,o)}const UC=le({notEqual_:bTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wTe(t,e,n=1,r=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:K(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:r};return ie.runKernel(BE,i,a)}const NX=le({oneHot_:wTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(t){const n={x:K(t,"x","onesLike")};return ie.runKernel(LE,n)}const ma=le({onesLike_:kTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CTe(t,e,n=0){const r=K(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:e,constantValue:n},s={x:r};return ie.runKernel(WE,s,o)}const QP=le({pad_:CTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function STe(t,e,n){const r=K(t,"x","spaceToBatchND");U(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),U(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),U(r.shape.reduce((i,a,u)=>u>0&&u<=e.length?i&&(a+n[u-1][0]+n[u-1][1])%e[u-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const o={x:r},s={blockShape:e,paddings:n};return ie.runKernel(QE,o,s)}const JP=le({spaceToBatchND_:STe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(t,e,n,r,o,s,i){o==null&&(o=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=K(t,"x","maxPool");let u=a,l=!1;a.rank===3&&(l=!0,u=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(Qo(s,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${o}'`);const c=va(u.shape,e,s,o,r),d=[c.dilationHeight,c.dilationWidth];let f;r==="same"?f=ITe([c.filterHeight,c.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,m]=_Te([c.inHeight,c.inWidth],d,f),g=h?r:"valid",v=h?u:JP(u,d,p),x=(n==="avg"?()=>LP(v,e,s,g,i):()=>KP(v,e,s,g,i))(),b=h?x:jP(x,d,m);return l?ae(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function _Te(t,e,n){const r=n.map(c=>c[0]),o=n.map(c=>c[1]),s=t.concat(r,o),i=e.map((c,d)=>(c-s[d]%c)%c),a=o.map((c,d)=>c+i[d]),u=e.map((c,d)=>[r[d],a[d]]),l=e.map((c,d)=>[0,i[d]]);return[u,l]}function ITe(t,e){const r=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),o=r.map(i=>Math.floor(i/2)),s=r.map((i,a)=>i-o[a]);return r.map((i,a)=>[o[a],s[a]])}const TTe=le({pool_:ETe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTe(t,e){const n=K(t,"x","prelu"),r=K(e,"alpha","prelu"),o={x:n,alpha:r};return ie.runKernel(zE,o)}const ZP=le({prelu_:NTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t,e=null,n=!1){let r=K(t,"x","prod");r.dtype==="bool"&&(r=Ye(r,"int32"));const o={x:r},s={axis:e,keepDims:n};return ie.runKernel(UE,o,s)}const RTe=le({prod_:DTe});var eF={exports:{}};eF.exports;(function(t){(function(e,n,r){function o(u){var l=this,c=a();l.next=function(){var d=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=d|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function s(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function i(u,l){var c=new o(u),d=l&&l.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,c),f.state=function(){return s(c,{})}),f}function a(){var u=4022871197,l=function(c){c=String(c);for(var d=0;d<c.length;d++){u+=c.charCodeAt(d);var f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=f*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.alea=i})(mi,t,!1)})(eF);var OTe=eF.exports,tF={exports:{}};tF.exports;(function(t){(function(e,n,r){function o(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function i(a,u){var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xor128=i})(mi,t,!1)})(tF);var ATe=tF.exports,nF={exports:{}};nF.exports;(function(t){(function(e,n,r){function o(a){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(d^d<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function i(a,u){var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xorwow=i})(mi,t,!1)})(nF);var $Te=nF.exports,rF={exports:{}};rF.exports;(function(t){(function(e,n,r){function o(a){var u=this;u.next=function(){var c=u.x,d=u.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,u.i=d+1&7,h};function l(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],c.x=h,c.i=0,f=256;f>0;--f)c.next()}l(u,a)}function s(a,u){return u.x=a.x.slice(),u.i=a.i,u}function i(a,u){a==null&&(a=+new Date);var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(c.x&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xorshift7=i})(mi,t,!1)})(rF);var MTe=rF.exports,oF={exports:{}};oF.exports;(function(t){(function(e,n,r){function o(a){var u=this;u.next=function(){var c=u.w,d=u.X,f=u.i,h,p;return u.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,u.i=f,p+(c^c>>>16)|0};function l(c,d){var f,h,p,m,g,v=[],y=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,y=Math.max(y,d.length)),p=0,m=-32;m<y;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=v[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=g,c.X=v,c.i=p}l(u,a)}function s(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function i(a,u){a==null&&(a=+new Date);var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(c.X&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xor4096=i})(mi,t,!1)})(oF);var PTe=oF.exports,sF={exports:{}};sF.exports;(function(t){(function(e,n,r){function o(a){var u=this,l="";u.next=function(){var d=u.b,f=u.c,h=u.d,p=u.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,u.b=d=d<<20^d>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^p,u.a=p-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=a|0):l+=a;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function s(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function i(a,u){var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.tychei=i})(mi,t,!1)})(sF);var FTe=sF.exports,DX={exports:{}};const LTe={},BTe=Object.freeze(Object.defineProperty({__proto__:null,default:LTe},Symbol.toStringTag,{value:"Module"})),jTe=fH(BTe);(function(t){(function(e,n,r){var o=256,s=6,i=52,a="random",u=r.pow(o,s),l=r.pow(2,i),c=l*2,d=o-1,f;function h(b,C,S){var E=[];C=C==!0?{entropy:!0}:C||{};var I=v(g(C.entropy?[b,x(n)]:b??y(),3),E),T=new p(E),N=function(){for(var O=T.g(s),$=u,A=0;O<l;)O=(O+A)*o,$*=o,A=T.g(1);for(;O>=c;)O/=2,$/=2,A>>>=1;return(O+A)/$};return N.int32=function(){return T.g(4)|0},N.quick=function(){return T.g(4)/4294967296},N.double=N,v(x(T.S),n),(C.pass||S||function(O,$,A,P){return P&&(P.S&&m(P,T),O.state=function(){return m(T,{})}),A?(r[a]=O,$):O})(N,I,"global"in C?C.global:this==r,C.state)}function p(b){var C,S=b.length,E=this,I=0,T=E.i=E.j=0,N=E.S=[];for(S||(b=[S++]);I<o;)N[I]=I++;for(I=0;I<o;I++)N[I]=N[T=d&T+b[I%S]+(C=N[I])],N[T]=C;(E.g=function(O){for(var $,A=0,P=E.i,L=E.j,W=E.S;O--;)$=W[P=d&P+1],A=A*o+W[d&(W[P]=W[L=d&L+$])+(W[L]=$)];return E.i=P,E.j=L,A})(o)}function m(b,C){return C.i=b.i,C.j=b.j,C.S=b.S.slice(),C}function g(b,C){var S=[],E=typeof b,I;if(C&&E=="object")for(I in b)try{S.push(g(b[I],C-1))}catch{}return S.length?S:E=="string"?b:b+"\0"}function v(b,C){for(var S=b+"",E,I=0;I<S.length;)C[d&I]=d&(E^=C[d&I]*19)+S.charCodeAt(I++);return x(C)}function y(){try{var b;return f&&(b=f.randomBytes)?b=b(o):(b=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(b)),x(b)}catch{var C=e.navigator,S=C&&C.plugins;return[+new Date,e,S,e.screen,x(n)]}}function x(b){return String.fromCharCode.apply(0,b)}if(v(r.random(),n),t.exports){t.exports=h;try{f=jTe}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:mi,[],Math)})(DX);var WTe=DX.exports,zTe=OTe,UTe=ATe,VTe=$Te,HTe=MTe,GTe=PTe,YTe=FTe,Kh=WTe;Kh.alea=zTe;Kh.xor128=UTe;Kh.xorwow=VTe;Kh.xorshift7=HTe;Kh.xor4096=GTe;Kh.tychei=YTe;var iF=Kh;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RX{constructor(e,n,r,o,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=s||Math.random();this.random=iF.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let e,n,r=!1;for(;!r;){let o,s,i;do o=2*this.random()-1,s=2*this.random()-1,i=o*o+s*s;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class qTe{constructor(e=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=iF.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(t,e=0,n=1,r,o){if(vc(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new RX(e,n,r,!1,o),i=Ht(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const XTe=le({randomNormal_:KTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(t,e=0,n=1,r="float32",o){vc(t);const s=Ht(t,r),i=new qTe(e,n,null,o);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}const N1=le({randomUniform_:QTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b0(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:t,stop:e,step:n,dtype:r};return ie.runKernel(CP,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(t){const n={input:K(t,"input","real")};return ie.runKernel(SP,n)}const VC=le({real_:JTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTe(t){const n={x:K(t,"x","reciprocal")};return ie.runKernel(l1,n)}const eNe=le({reciprocal_:ZTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t){const n={x:K(t,"x","relu")};return ie.runKernel(c1,n)}const Xh=le({relu_:tNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(t){const n={x:K(t,"x","relu6")};return ie.runKernel(d1,n)}const OX=le({relu6_:nNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(t,e){const r={x:K(t,"x","reverse")},o={dims:e};return ie.runKernel(YE,r,o)}const Ih=le({reverse_:rNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oNe(t){const n={x:K(t,"x","round")};return ie.runKernel(f1,n)}const AX=le({round_:oNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(t){const n={x:K(t,"x","rsqrt","float32")};return ie.runKernel(h1,n)}const $X=le({rsqrt_:sNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t){const n={x:K(t,"x","selu")};return ie.runKernel(p1,n)}const MX=le({selu_:iNe});function aNe(t,e,n,r,o,s=[1,1],i="NHWC"){const a=K(t,"x","separableConv2d"),u=K(e,"depthwiseFilter","separableConv2d"),l=K(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=ae(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),U(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),U(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),U(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),U(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const f=u.shape[2],h=u.shape[3];U(l.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${l.shape[2]}.`);const p=UP(c,u,r,o,i,s),g=_h(p,l,1,"valid",i);return d?ae(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const PX=le({separableConv2d_:aNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uNe(t){const n={x:K(t,"x","sign")};return ie.runKernel(v1,n)}const lNe=le({sign_:uNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(t){const n={x:K(t,"x","sin","float32")};return ie.runKernel(m1,n)}const FX=le({sin_:cNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dNe(t){const n={x:K(t,"x","sinh")};return ie.runKernel(g1,n)}const LX=le({sinh_:dNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe(t,e,n){const r=K(t,"x","slice1d");return U(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Hn(r,[e],[n])}const aF=le({slice1d_:fNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNe(t,e,n){const r=K(t,"x","slice2d");return U(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Hn(r,e,n)}const BX=le({slice2d_:hNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pNe(t,e,n){const r=K(t,"x","slice3d");return U(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Hn(r,e,n)}const uF=le({slice3d_:pNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mNe(t,e,n){const r=K(t,"x","slice4d");return U(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Hn(r,e,n)}const HC=le({slice4d_:mNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(t,e=-1){const n=K(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},o={dim:e};return ie.runKernel(ZE,r,o)}const lF=le({softmax_:gNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ie.runKernel(fP,e)}const jX=le({fft_:vNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yNe(t){U(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ie.runKernel(mP,e)}const uO=le({ifft_:yNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xNe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const o=ae(t,[n,e]);r=uO(o)}else{const o=[n,2*(e-1)],s=ae(VC(t),[n,e]),i=ae(GP(t),[n,e]),a=Ih(Hn(s,[0,1],[n,e-2]),1),u=se(Ih(Hn(i,[0,1],[n,e-2]),1),Cn(-1)),l=Os([s,a],1),c=Os([i,u],1),d=ae(ag(l,c),[o[0],o[1]]);r=uO(d)}if(r=VC(r),t.rank===3&&t.shape[0]!==0){const o=r,s=t.shape[0];r=ae(r,[s,r.shape[0]/s,r.shape[1]]),o.dispose()}return r}const bNe=le({irfft_:xNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wNe(t,e,n=0){const o={x:K(t,"x","split")},s={numOrSizeSplits:e,axis:n};return ie.runKernel(JE,o,s)}const _i=le({split_:wNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kNe(t,e){U(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let o;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,o=Hn(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,o=Os([t,po(p)],t.shape.length-1),n=e}else o=t;const s=dn(o),i=ae(ag(o,s),[r,n]),a=jX(i),u=Math.floor(n/2)+1,l=VC(a),c=GP(a),d=_i(l,[u,n-u],l.shape.length-1),f=_i(c,[u,n-u],c.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=u,ae(ag(d[0],f[0]),h)}const CNe=le({rfft_:kNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNe(t,e){let n=K(t,"a","squaredDifference"),r=K(e,"b","squaredDifference");[n,r]=Lr(n,r),Ft(n.shape,r.shape);const o={a:n,b:r},s={};return ie.runKernel(w1,o,s)}const ENe=le({squaredDifference_:SNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ne(t,e){const n=K(t,"x","squeeze","string_or_numeric");return ae(n,rf(n.shape,e).newShape)}const D1=le({squeeze_:_Ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function INe(t,e=0){const n=sX(t,"tensors","stack","string_or_numeric");U(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&U(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,o={axis:e};return ie.runKernel(jE,r,o)}const ic=le({stack_:INe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t,e=0){const r={x:K(t,"x","step")},o={alpha:e};return ie.runKernel(_1,r,o)}const R1=le({step_:TNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(t,e,n,r,o=0,s=0,i=0,a=0,u=0){const c={x:K(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:u};return ie.runKernel(NP,c,d)}const DNe=le({stridedSlice_:NNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(t){const n={x:K(t,"x","tan","float32")};return ie.runKernel(C1,n)}const ONe=le({tan_:RNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xs(t,e){dK(t);const n=o_(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return s_(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JT(t,e,n){if(dK(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=o_(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return s_(t,e,r,n)}function WX(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(s+` update.rank < ${o}. `);if(t.length<r+(n.rank-o))throw new Error(s+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+t.length-r)throw new Error(s+` update.rank != ${o+t.length-r}`);for(let i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(s+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(s+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${t[i+o]})`)}function ANe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}WX(n,e,t)}function Qh(t,e,n){const r=e.shape.length,o=r>1?e.shape[r-1]:1,s=n.length;let i=1;for(let d=o;d<s;++d)i*=n[d];const a=o<1?1:o,u=xe(e.shape)/a,l=[...gt(n.slice(0,o)),1],c=xe(n);return{sliceRank:o,numUpdates:u,sliceSize:i,strides:l,outputSize:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ne(t,e=1,n=!0){const r=K(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);const s={x:r},i={k:e,sorted:n},[a,u]=ie.runKernel(DP,s,i);return{values:a,indices:u}}const MNe=le({topk_:$Ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNe(t,e=0,n=1,r,o){if(vc(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new RX(e,n,r,!0,o),i=Ht(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const zX=le({truncatedNormal_:PNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNe(t,e=0){const n=K(t,"x","unique","string_or_numeric");U(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},o={axis:e},[s,i]=ie.runKernel(OP,r,o);return{values:s,indices:i}}const LNe=le({unique_:FNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(t,e,n){const r=K(t,"x","unsortedSegmentSum"),o=K(e,"segmentIds","unsortedSegmentSum","int32");U(og(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:o},i={numSegments:n};return ie.runKernel(t_,s,i)}const UX=le({unsortedSegmentSum_:BNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jNe(t,e=0){const n=K(t,"x","unstack","string_or_numeric");U(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},o={axis:e};return ie.runKernel(e_,r,o)}const Th=le({unstack_:jNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WNe(t,e=!0,n,r){return ie.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VX(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Ht(t,"int32"),o=Ht([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const i=r.indexToLoc(n[s]),a=s*t.length;o.values.set(i,a)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zNe(t,e,n){const r=K(t,"x","transpose");if(e==null&&(e=r.shape.map((i,a)=>a).reverse()),U(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{U(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const o={x:r},s={perm:e};return r.dtype==="complex64"?de(()=>{let i=VC(r),a=GP(r);return i=ie.runKernel(gm,{x:i},s),a=ie.runKernel(gm,{x:a},s),n&&(a=Mr(a)),ag(i,a)}):ie.runKernel(gm,o,s)}const cn=le({transpose_:zNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UNe(t,e){if(e==null)return t.shape.slice();if(En(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(t,e,n,r){const o=K(t,"x","dropout");if(U(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),U(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Qr?o.clone():o;const s=UNe(o,n),i=1-e,a=kt(c_(De(N1(s,0,1,"float32",r),i)),i);return se(o,a)}const HNe=le({dropout_:VNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GNe(t,e,n,r,o,s="NHWC",i){let a=t;t.rank===3&&(a=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]])),U(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),U(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),U(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=s==="NHWC"?a.shape[3]:a.shape[1],c=s==="NHWC"?u.shape[3]:u.shape[1];U(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),U(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Ls("conv2dDerFilter",o,i);const d={x:a,dy:u},f={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,filterShape:n};return ie.runKernel(tP,d,f)}const cF=le({conv2DBackpropFilter_:GNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dF(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return se(t,R1(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function fF(t,e){let n=e;const r=io(t.shape,e.shape);return r.length>0&&(n=yt(n,r)),ae(n,t.shape)}function hF(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Xh(t);if(e==="elu")return u_(t);if(e==="relu6")return OX(t);if(e==="prelu")return ZP(t,n);if(e==="leakyrelu")return YP(t,r);if(e==="sigmoid")return Fg(t);throw new Error(`Unknown fused activation ${e}.`)}const pF=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:a,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(u=u||"linear",pF(ie.state.gradientDepth,u)===!1){U(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=_h(t,e,n,r,o,s,i);return a!=null&&(S=De(S,a)),hF(S,u,l,c)}const d=K(t,"x","conv2d","float32"),f=K(e,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=ae(d,[1,d.shape[0],d.shape[1],d.shape[2]])),U(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),U(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Ls("fused conv2d",r,i);const m=o==="NHWC"?h.shape[3]:h.shape[1];U(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),U(Qo(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const g=Lo(h.shape,f.shape,n,s,r,i);let v;a!=null&&(v=K(a,"bias","fused conv2d"),[v]=Lr(v,d),o==="NHWC"?Ft(g.outShape,v.shape):(U(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),U(v.shape.length===0||v.shape[0]===g.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let y;if(l!=null){const S=l.shape;if(U(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)U(S[0]===1||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(S.length===3)try{Ft(S,g.outShape)}catch{const I=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(I)}y=K(l,"prelu weights","fused conv2d")}const x=(S,E)=>{U(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);const[I,T,N,O]=E,$=dF(S,N,u);U(Sh(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const A=WP(T.shape,$,I,n,r),P=cF(T,$,I.shape,n,r),L=[A,P];if(O!=null){const W=fF(O,$);L.push(W)}return L},b={x:h,filter:f,bias:v,preluActivationWeights:y},C={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:u,leakyreluAlpha:c};return a==null?cg((E,I,T)=>{let N=ie.runKernel(FC,b,C);return T([I,E,N]),p&&(N=ae(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:x}})(h,f):cg((E,I,T,N)=>{let O=ie.runKernel(FC,b,C);return N([I,E,O,T]),p&&(O=ae(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:x}})(h,f,v)}const qNe=le({fusedConv2d_:YNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(t,e,n,r,o,s=[1,1],i){let a=t;t.rank===3&&(a=ae(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:a,dy:u},c={strides:r,pad:o,dimRoundingMode:i,dilations:s,filterShape:n};return ie.runKernel(uP,l,c)}const XNe=le({depthwiseConv2dNativeBackpropFilter_:KNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(t,e,n,r,o,s=[1,1],i){let a=e,u=!1;e.rank===3&&(u=!0,a=ae(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:a,filter:n},c={strides:r,pad:o,dimRoundingMode:i,dilations:s,inputShape:t},d=ie.runKernel(lP,l,c);return u?ae(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const JNe=le({depthwiseConv2dNativeBackpropInput_:QNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:o,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(pF(ie.state.gradientDepth,s)===!1){let O=kn(t,e,n,r);return o!=null&&(O=De(O,o)),hF(O,s,i,a)}let u=K(t,"a","fused matMul"),l=K(e,"b","fused matMul");[u,l]=Lr(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=r?l.shape[l.rank-1]:l.shape[l.rank-2],f=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?l.shape[l.rank-2]:l.shape[l.rank-1],p=u.shape.slice(0,-2),m=l.shape.slice(0,-2),g=xe(p),v=xe(m);U(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=Ft(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([f,h]),b=n?ae(u,[g,c,f]):ae(u,[g,f,c]),C=r?ae(l,[v,h,d]):ae(l,[v,d,h]);let S;o!=null&&(S=K(o,"bias","fused matMul"),[S]=Lr(S,u),Ft(x,S.shape));let E;i!=null&&(E=K(i,"prelu weights","fused matMul"));const I=(O,$)=>{const[A,P,L,W]=$,z=dF(ae(O,L.shape),L,s);let F,B;if(!n&&!r?(F=kn(z,P,!1,!0),B=kn(A,z,!0,!1)):!n&&r?(F=kn(z,P,!1,!1),B=kn(z,A,!0,!1)):n&&!r?(F=kn(P,z,!1,!0),B=kn(A,z,!1,!1)):(F=kn(P,z,!0,!0),B=kn(z,A,!0,!0)),o!=null){const H=fF(W,z);return[F,B,H]}else return[F,B]},T={a:b,b:C,bias:S,preluActivationWeights:E},N={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return o==null?cg(($,A,P)=>{const L=ie.runKernel(PC,T,N);return P([$,A,L]),{value:ae(L,x),gradFunc:I}})(b,C):cg(($,A,P,L)=>{const W=ie.runKernel(PC,T,N);return L([$,A,W,P]),{value:ae(W,x),gradFunc:I}})(b,C,S)}const fU=le({fusedMatMul_:ZNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(t,e,n,r,o="bilinear",s=0){const i=K(t,"image","cropAndResize"),a=K(e,"boxes","cropAndResize","float32"),u=K(n,"boxInd","cropAndResize","int32"),l=a.shape[0];U(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),U(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${a.shape}.`),U(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${a.shape}.`),U(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),U(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),U(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const c={image:i,boxes:a,boxInd:u},d={method:o,extrapolationValue:s,cropSize:r};return ie.runKernel(sP,c,d)}const tDe=le({cropAndResize_:eDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nDe(t){const e=K(t,"image","flipLeftRight","float32");U(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ie.runKernel(pP,n,{})}const rDe=le({flipLeftRight_:nDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(t){const e=K(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];U(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),U(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,Wa(e,o)}const sDe=le({grayscaleToRGB_:oDe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(t){const e=K(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];U(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),U(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const o=e.dtype,s=Ye(e,"float32"),i=Xs([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Av("ij,j->i",s,i);break;case 3:a=Av("ijk,k->ij",s,i);break;case 4:a=Av("ijkl,l->ijk",s,i);break;case 5:a=Av("ijklm,m->ijkl",s,i);break;case 6:a=Av("ijklmn,n->ijklm",s,i);break;default:throw new Error("Not a valid tensor rank.")}return a=Ts(a,-1),Ye(a,o)}const aDe=le({rgbToGrayscale_:iDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t,e,n=0,r=.5){const o=K(t,"image","rotateWithOffset","float32");U(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const s={image:o},i={radians:e,fillValue:n,center:r};return ie.runKernel(AP,s,i)}const lDe=le({rotateWithOffset_:uDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bg(t,e,n,r,o,s){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),s==null&&(s=0);const i=t.shape[0];return n=Math.min(n,i),U(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),U(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),U(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),U(e.rank===1,()=>"scores must be a 1D tensor"),U(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),U(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const s=K(t,"boxes","nonMaxSuppression","float32"),i=K(e,"scores","nonMaxSuppression","float32"),a=Bg(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return ie.runKernel(bP,{boxes:s,scores:i},u)}const dDe=le({nonMaxSuppression_:cDe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(t,e,n){const r=hDe(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function hDe(t,e,n){return mDe(t,e,n||pDe)}function pDe(t,e){return t>e?1:t<e?-1:0}function mDe(t,e,n){let r=0,o=t.length,s=0,i=!1;for(;r<o;){s=r+(o-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(o=s,i=!a)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mF(t,e,n,r,o){return yF(t,e,n,r,o,0)}function gF(t,e,n,r,o,s){return yF(t,e,n,r,o,0,!1,s,!0)}function vF(t,e,n,r,o,s){return yF(t,e,n,r,o,s,!0)}function yF(t,e,n,r,o,s,i=!1,a=!1,u=!1){const l=[];for(let g=0;g<e.length;g++)e[g]>o&&l.push({score:e[g],boxIndex:g,suppressBeginIndex:0});l.sort(hU);const c=s>0?-.5/s:0,d=[],f=[];for(;d.length<n&&l.length>0;){const g=l.pop(),{score:v,boxIndex:y,suppressBeginIndex:x}=g;if(v<o)break;let b=!1;for(let C=d.length-1;C>=x;--C){const S=gDe(t,y,d[C]);if(S>=r){b=!0;break}if(g.score=g.score*vDe(r,c,S),g.score<=o)break}g.suppressBeginIndex=d.length,b||(g.score===v?(d.push(y),f.push(g.score)):g.score>o&&fDe(l,g,hU))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=f),u&&(m.validOutputs=h),m}function gDe(t,e,n){const r=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-s)*(u-i),p=(d-l)*(f-c);if(h<=0||p<=0)return 0;const m=Math.max(s,l),g=Math.max(i,c),v=Math.min(a,d),y=Math.min(u,f),x=Math.max(v-m,0)*Math.max(y-g,0);return x/(h+p-x)}function vDe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function hU(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function yDe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const s=K(t,"boxes","nonMaxSuppressionAsync"),i=K(e,"scores","nonMaxSuppressionAsync"),a=Bg(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const u=await Promise.all([s.data(),i.data()]),l=u[0],c=u[1],{selectedIndices:d}=mF(l,c,n,r,o);return s!==t&&s.dispose(),i!==e&&i.dispose(),Xs(d,"int32")}const xDe=yDe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){const i=K(t,"boxes","nonMaxSuppression"),a=K(e,"scores","nonMaxSuppression"),u=Bg(i,a,n,r,o,s);n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,s=u.softNmsSigma;const l={boxes:i,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s},d=ie.runKernel(kP,l,c);return{selectedIndices:d[0],selectedScores:d[1]}}const wDe=le({nonMaxSuppressionWithScore_:bDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function kDe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){const i=K(t,"boxes","nonMaxSuppressionAsync"),a=K(e,"scores","nonMaxSuppressionAsync"),u=Bg(i,a,n,r,o,s);n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,s=u.softNmsSigma;const l=await Promise.all([i.data(),a.data()]),c=l[0],d=l[1],{selectedIndices:f,selectedScores:h}=vF(c,d,n,r,o,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Xs(f,"int32"),selectedScores:Xs(h)}}const CDe=kDe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SDe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){const i=K(t,"boxes","nonMaxSuppression"),a=K(e,"scores","nonMaxSuppression"),u=Bg(i,a,n,r,o,null),l=u.maxOutputSize,c=u.iouThreshold,d=u.scoreThreshold,f={boxes:i,scores:a},h={maxOutputSize:l,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:s},p=ie.runKernel(wP,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const EDe=le({nonMaxSuppressionPadded_:SDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _De(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){const i=K(t,"boxes","nonMaxSuppressionAsync"),a=K(e,"scores","nonMaxSuppressionAsync"),u=Bg(i,a,n,r,o,null),l=u.maxOutputSize,c=u.iouThreshold,d=u.scoreThreshold,[f,h]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:m}=gF(f,h,l,c,d,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Xs(p,"int32"),validOutputs:Cn(m,"int32")}}const IDe=_De;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(t,e,n=!1,r=!1){const o=K(t,"images","resizeBilinear");U(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),U(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),U(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:s},u={alignCorners:n,halfPixelCenters:r,size:e},l=ie.runKernel(GE,a,u);return i?ae(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const HX=le({resizeBilinear_:TDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(t,e,n=!1,r=!1){const o=K(t,"images","resizeNearestNeighbor");U(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),U(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),U(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),U(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=ae(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:s},u={alignCorners:n,halfPixelCenters:r,size:e},l=ie.runKernel(HE,a,u);return i?ae(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const GX=le({resizeNearestNeighbor_:NDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t,e="binary",n=!1,r=.5){const o=K(t,"image","threshold"),s=.2989,i=.587,a=.114,u=o.shape[0]*o.shape[1];let l=se(Xs([r]),255),c,d,f,h;if(U(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),U(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),U(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),U(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[c,d,f]=_i(o,[1,1,1],-1);const g=se(c,s),v=se(d,i),y=se(f,a);h=De(De(g,v),y)}else h=t;if(e==="otsu"){const g=T_e(Ye(AX(h),"int32"),iX([]),256);l=RDe(g,u)}const p=n?Lg(h,l):$i(h,l);return Ye(se(p,255),"int32")}function RDe(t,e){let n=Xs([-1]),r=Xs([0]),o=Xs([0]),s,i,a,u,l,c;for(let d=0;d<t.size-1;d++){s=Hn(t,0,d+1),i=Hn(t,d+1),l=kt(yt(s),e),c=kt(yt(i),e);const f=yt(se(s,b0(0,s.size)));a=kt(f,yt(s));const h=a_(i.shape,s.size),p=De(b0(0,i.size),h),m=se(i,p);u=kt(yt(m),yt(i));const g=Ct(a,u),v=Ct(a,u),y=se(l,c);o=se(se(y,g),v);const x=$i(o,r);r=ms(x,o,r),n=ms(x,Xs([d]),n)}return n}const ODe=le({threshold_:DDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(t,e,n="nearest",r="constant",o=0,s){const i=K(t,"image","transform","float32"),a=K(e,"transforms","transform","float32");U(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),U(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),U(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const u={image:i,transforms:a},l={interpolation:n,fillMode:r,fillValue:o,outputShape:s};return ie.runKernel(RP,u,l)}const $De=le({transform_:ADe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t,e,n){const r=K(t,"a","bandPart");U(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const o=r.shape,[s,i]=r.shape.slice(-2);let a,u;typeof e=="number"?(U(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),U(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=K(e<0?s:e,"numLower","bandPart")):(U(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=ms(zC(e,0),s,x0(e,s))),typeof n=="number"?(U(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),U(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),u=K(n<0?i:n,"numUpper","bandPart")):(U(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=ms(zC(n,0),i,x0(n,i)));const l=ae(b0(0,s,1,"int32"),[-1,1]),c=b0(0,i,1,"int32"),d=Ct(l,c),f=sc(Lg(d,a),qh(d,Mr(u))),h=po([s,i],r.dtype);return ae(ic(Th(ae(r,[-1,s,i])).map(p=>ms(f,p,h))),o)}const PDe=le({bandPart_:MDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(t){let e;if(Array.isArray(t)){e=!1,U(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=t[0].shape[0];for(let s=1;s<t.length;++s)U(t[s].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${o})`)}else e=!0,t=_i(t,t.shape[0],0).map(o=>D1(o,[0]));U(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let o=0;o<t.length;++o)n.push(ie.tidy(()=>{let s=r[o];if(o>0)for(let i=0;i<o;++i){const a=se(yt(se(n[i],s)),n[i]);s=Ct(s,a)}return kt(s,l_(s,"euclidean"))}));return e?ic(n,0):n}const LDe=le({gramSchmidt_:FDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDe(t,e=!1){if(U(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return pU(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((u,l)=>u*l),r=Th(ae(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],s=[];r.forEach(u=>{const[l,c]=pU(u,e);o.push(l),s.push(c)});const i=ae(ic(o,0),t.shape),a=ae(ic(s,0),t.shape);return[i,a]}}function pU(t,e=!1){return ie.tidy(()=>{U(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let o=SX(n),s=rh(t);const i=JT([[1]],[1,1]);let a=rh(i);const u=n>=r?r:n;for(let l=0;l<u;++l){const c=s,d=a,f=o;[a,s,o]=ie.tidy(()=>{const h=Hn(s,[l,l],[n-l,1]),p=l_(h),m=Hn(s,[l,l],[1,1]),g=ms($i(m,0),JT([[-1]]),JT([[1]])),v=Ct(m,se(g,p)),y=kt(h,v);y.shape[0]===1?a=rh(i):a=Os([i,Hn(y,[1,0],[y.shape[0]-1,y.shape[1]])],0);const x=Mr(kt(kn(g,v),p)),b=Hn(s,[l,0],[n-l,r]),C=se(x,a),S=cn(a);if(l===0)s=Ct(b,kn(C,kn(S,b)));else{const T=Ct(b,kn(C,kn(S,b)));s=Os([Hn(s,[0,0],[l,r]),T],0)}const E=cn(C),I=Hn(o,[0,l],[n,o.shape[1]-l]);if(l===0)o=Ct(I,kn(kn(I,a),E));else{const T=Ct(I,kn(kn(I,a),E));o=Os([Hn(o,[0,0],[n,l]),T],1)}return[a,s,o]}),qt([c,d,f])}return!e&&n>r&&(o=Hn(o,[0,0],[n,r]),s=Hn(s,[0,0],[r,r])),[o,s]})}const jDe=le({qr_:BDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zl={flipLeftRight:rDe,grayscaleToRGB:sDe,resizeNearestNeighbor:GX,resizeBilinear:HX,rgbToGrayscale:aDe,rotateWithOffset:lDe,cropAndResize:tDe,nonMaxSuppression:dDe,nonMaxSuppressionAsync:xDe,nonMaxSuppressionWithScore:wDe,nonMaxSuppressionWithScoreAsync:CDe,nonMaxSuppressionPadded:EDe,nonMaxSuppressionPaddedAsync:IDe,threshold:ODe,transform:$De},WDe={bandPart:PDe,gramSchmidt:LDe,qr:jDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zDe=new Map,UDe=new Map;class jg{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Xi{constructor(){this.classNameMap={}}static getMap(){return Xi.instance==null&&(Xi.instance=new Xi),Xi.instance}static register(e){Xi.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Te(t,e,n){U(t.className!=null,()=>"Class being registered does not have the static className property defined."),U(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),U(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,o=e+">"+r;return Xi.register(t),zDe.set(o,t),UDe.set(t,o),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cf extends jg{minimize(e,n=!1,r){const{value:o,grads:s}=this.computeGradients(e,r);if(r!=null){const i=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(i)}else this.applyGradients(s);return qt(s),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return XIe(e,n)}dispose(){this.iterations_!=null&&qt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Cn(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(cf,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YX extends cf{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ie.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=ie.registeredVariables[r],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:de(()=>dn(s).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:de(()=>dn(s).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const u=this.accumulatedGrads[o].variable,l=this.accumulatedUpdates[o].variable;de(()=>{const c=De(se(u,this.rho),se(Kn(a),1-this.rho)),d=se(kt(ys(De(l,this.epsilon)),ys(De(u,this.epsilon))),a),f=De(se(l,this.rho),se(Kn(d),1-this.rho));u.assign(c),l.assign(f);const h=De(se(d,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(qt(this.accumulatedGrads.map(e=>e.variable)),qt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qX extends cf{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=ie.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:de(()=>a_(s.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[o].tensor:e[r];if(i==null)return;const a=this.accumulatedGrads[o].variable;de(()=>{const u=De(a,Kn(i));a.assign(u);const l=De(se(kt(i,ys(De(u,ie.backend.epsilon()))),-this.learningRate),s);s.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&qt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KX extends cf{static get className(){return"Adam"}constructor(e,n,r,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],de(()=>{this.accBeta1=Cn(n).variable(),this.accBeta2=Cn(r).variable()}),o==null&&(this.epsilon=ie.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);de(()=>{const r=Ct(1,this.accBeta1),o=Ct(1,this.accBeta2);n.forEach((s,i)=>{const a=ie.registeredVariables[s],u=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:de(()=>dn(a).variable(u))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${s}/v`,variable:de(()=>dn(a).variable(u))});const l=Array.isArray(e)?e[i].tensor:e[s];if(l==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,f=De(se(c,this.beta1),se(l,1-this.beta1)),h=De(se(d,this.beta2),se(Kn(l),1-this.beta2)),p=kt(f,r),m=kt(h,o);c.assign(f),d.assign(h);const g=De(se(kt(p,De(ys(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(se(this.accBeta1,this.beta1)),this.accBeta2.assign(se(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&qt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&qt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),de(()=>{this.accBeta1.assign(lg(this.beta1,this.iterations_+1)),this.accBeta2.assign(lg(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XX extends cf{static get className(){return"Adamax"}constructor(e,n,r,o=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],de(()=>{this.iteration=Cn(0).variable(),this.accBeta1=Cn(n).variable()}),o==null&&(this.epsilon=ie.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);de(()=>{const r=Ct(1,this.accBeta1),o=kt(-this.learningRate,De(se(this.iteration,this.decay),1));n.forEach((s,i)=>{const a=ie.registeredVariables[s],u=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:dn(a).variable(u)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${s}/v`,variable:dn(a).variable(u)});const l=Array.isArray(e)?e[i].tensor:e[s];if(l==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,f=De(se(c,this.beta1),se(l,1-this.beta1)),h=se(d,this.beta2),p=os(l),m=uf(h,p);c.assign(f),d.assign(m);const g=De(se(kt(o,r),kt(f,De(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(De(this.iteration,1)),this.accBeta1.assign(se(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&qt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&qt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xF extends cf{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=Array.isArray(e)?e[o].tensor:e[r];if(s==null)return;const i=ie.registeredVariables[r];de(()=>{const a=De(se(this.c,s),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Vu(Cn(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QX extends xF{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Cn(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=ie.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:de(()=>dn(s).variable(!1))});const i=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[r];a!=null&&de(()=>{let u;const l=De(se(this.m,i),a);this.useNesterov?u=De(se(this.c,De(a,se(l,this.m))),s):u=De(se(this.c,l),s),i.assign(l),s.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&qt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JX extends cf{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,o=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,o==null&&(this.epsilon=ie.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=ie.registeredVariables[r],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:de(()=>dn(s).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:de(()=>dn(s).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:de(()=>dn(s).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const u=this.accumulatedMeanSquares[o].variable,l=this.accumulatedMoments[o].variable;de(()=>{const c=De(se(u,this.decay),se(Kn(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,f=De(se(d,this.decay),se(a,1-this.decay)),h=kt(se(a,this.learningRate),ys(Ct(c,De(Kn(f),this.epsilon)))),p=De(se(l,this.momentum),h);u.assign(c),d.assign(f),l.assign(p);const m=Ct(s,p);s.assign(m)}else{const d=De(se(u,this.decay),se(Kn(a),1-this.decay)),f=De(se(l,this.momentum),kt(se(a,this.learningRate),ys(De(d,this.epsilon))));u.assign(d),l.assign(f);const h=Ct(s,f);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&qt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&qt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&qt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VDe=[YX,qX,KX,XX,QX,JX,xF];function HDe(){for(const t of VDe)Te(t)}function bF(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(xe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const o=e.shape,s=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const a=t.shape,u=o.slice();u.pop();let l=1;for(let d=s;d<n;++d)l*=a[d],u.push(a[d]);const c=[...gt(t.shape).map(d=>d/l),1].slice(0,s);return[u,i,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lO=-2,GDe=-1;function wF(t,e,n){const r=t.shape.length;U(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),U(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)U(e[o]+n[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function YDe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function kF(t,e,n){const r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function ZX(t,e,n,r){const o=[...t];for(let s=o.length;s<r.length;s++)o.push(1);for(let s=0;s<n;s++)s===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function eQ(t,e,n){return n<=t?n:n-(e-1)}function tQ(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function qDe(t,e,n,r,o,s,i,a,u){const l=t.length;let c=new Array(l),d=new Array(l),f=new Array(l);if(e.length&&n>0){const h=e[0],p=n+1;c=nQ(i,h,p,r,t),d=rQ(a,h,p,o,t),f=ZX(s,h,p,t)}else for(let h=0;h<l;h++)c[h]=sQ(i,r,s,t,h,u),d[h]=iQ(a,o,s,t,h,u),f[h]=oQ(s,h,u);return{begin:c,end:d,strides:f}}function nQ(t,e,n,r,o){const s=[...o],i=tQ(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=0;else{const u=eQ(e,n,a);let l=r[u];t&1<<u&&(l=0),s[a]=l}return s}function rQ(t,e,n,r,o){const s=[...o],i=tQ(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const u=eQ(e,n,a);let l=r[u];t&1<<u&&(l=Number.MAX_SAFE_INTEGER),s[a]=l}for(let a=0;a<s.length;a++){const u=o[a];s[a]<0&&(s[a]+=u),s[a]=bh(0,s[a],o[a])}return s}function oQ(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function sQ(t,e,n,r,o,s){let i=e[o];const a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const u=r[o];return i<0&&(i+=u),i=bh(0,i,u-1),i}function iQ(t,e,n,r,o,s){let i=e[o];const a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const u=r[o];return i<0&&(i+=u),a>0?i=bh(0,i,u):i=bh(-1,i,u-1),i}function CF(t,e,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function SF(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function d_(t,e,n){let r;const o=t.shape.length;typeof e=="number"?r=[e,...new Array(o-1).fill(0)]:e.length<o?r=e.concat(new Array(o-e.length).fill(0)):r=e.slice(),r.forEach(i=>{U(i!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(o).fill(-1):typeof n=="number"?s=[n,...new Array(o-1).fill(-1)]:n.length<o?s=n.concat(new Array(o-n.length).fill(-1)):s=n,s=s.map((i,a)=>i>=0?i:(U(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function EF(t,e,n,r,o,s,i,a,u){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:u};for(let x=0;x<d.dims;x++)c&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};KDe(d,f);let h=!0,p=!0,m=!0;const g=[],v=[];for(let x=0;x<t.length;++x){if(f.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const b=!!(f.shrinkAxisMask&1<<x),C=t[x];if(C===-1){g.push(b?1:-1);continue}const S=[f.beginMask&1<<x,f.endMask&1<<x],E=[f.strides[x]>0?0:-1,f.strides[x]>0?C:C-1];if(b&&f.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[x]===1;const I=!!(f.beginMask&1<<x&&f.endMask&1<<x);if(f.beginValid&&f.endValid){if(b){const $=f.begin[x]<0?C+f.begin[x]:f.begin[x];if(f.begin[x]=$,f.end[x]=f.begin[x]+1,$<0||$>=C)throw Error(`slice index ${f.begin[x]} of dimension ${x} out of bounds.`)}else f.begin[x]=mU(f.begin[x],0,f.strides[x],C,S,E),f.end[x]=mU(f.end[x],1,f.strides[x],C,S,E);const O=f.strides[x]===1&&f.begin[x]===0&&f.end[x]===C;h=h&&O,p=p&&(x===0&&f.strides[x]===1||O)}else h=h&&f.strides[x]===1&&I,p=p&&(x===0&&f.strides[x]===1||I);let T,N=!1;if(f.beginValid&&f.endValid?(T=f.end[x]-f.begin[x],N=!0):b?(T=1,N=!0):I&&C>=0&&(f.strides[x]<0?T=-C:T=C,N=!0),N){let O;T===0||T<0!=f.strides[x]<0?O=0:O=Math.trunc(T/f.strides[x])+(T%f.strides[x]!==0?1:0),g.push(O)}else g.push(-1)}for(let x=0;x<f.finalShapeGatherIndices.length;++x){const b=f.finalShapeGatherIndices[x];b>=0?v.push(g[b]):b===lO&&v.push(1)}return{finalShapeSparse:v.filter((x,b)=>f.finalShapeGatherIndices[b]!==lO),finalShape:v,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function KDe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const o=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(lO),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(GDe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function mU(t,e,n,r,o,s){if(o[e])return n>0?s[e]:s[e+1&1];{const i=t<0?r+t:t;return i<s[0]?s[0]:i>s[1]?s[1]:i}}const XDe=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:wF,computeFlatOffset:SF,computeOutShape:kF,getNormalizedAxes:qDe,isSliceContinous:CF,maskToAxes:YDe,parseSliceParams:d_,sliceInfo:EF,startForAxis:sQ,startIndicesWithElidedDims:nQ,stopForAxis:iQ,stopIndicesWithElidedDims:rQ,stridesForAxis:oQ,stridesWithElidedDims:ZX},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QDe{static sgd(e){return new xF(e)}static momentum(e,n,r=!1){return new QX(e,n,r)}static rmsprop(e,n=.9,r=0,o=null,s=!1){return new JX(e,n,r,o,s)}static adam(e=.001,n=.9,r=.999,o=null){return new KX(e,n,r,o)}static adadelta(e=.001,n=.95,r=null){return new YX(e,n,r)}static adamax(e=.002,n=.9,r=.999,o=null,s=0){return new XX(e,n,r,o,s)}static adagrad(e,n=.1){return new qX(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cp=QDe;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JDe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function aQ(){return new Promise(t=>JDe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _F(t,e){const n=t[0].length;t.forEach((o,s)=>{U(o.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),U(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((o,s)=>{for(let i=0;i<n;i++)U(i===e||o[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${s}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function Hu(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Fa;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Fa||(Fa={}));function uQ(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){const s=n[o],i=r[r.length-n.length+o],a=r[i];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${s} but shape[${o+t}] = ${a}`)}else r[i]=s}return r}function lQ(t){const e={FIRST_DIM_SIZE:Fa.FIRST_DIM_SIZE,VALUE_ROWIDS:Fa.VALUE_ROWIDS,ROW_LENGTHS:Fa.ROW_LENGTHS,ROW_SPLITS:Fa.ROW_SPLITS,ROW_LIMITS:Fa.ROW_LIMITS,ROW_STARTS:Fa.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function cQ(t){return t.length===0?0:t[0]===Fa.FIRST_DIM_SIZE?t.length-1:t.length}function dQ(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){const s=t[o],i=e[o+1];if(s>=0&&i>=0&&s!==1&&s!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${s} but ragged tensor input.flatValues.shape[${o-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IF=30;function f_(t){return t<=IF?t:HR(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TF(t,e,n){const r=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[r,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O1(t,e,n,r=!0){let o=[];if(r)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);const s=e.length;for(let i=0;i<s;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(s+1))}return o}function A1(t,e,n=!0){const r=[];if(n){r.push(e);for(let o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{const o=[],s=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?s.push(i):o.push(i);r.push(...o),r.push(0),r.push(...s)}return r}function $1(t,e,n,r=!0){const o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?o.push(e[s-1]*t[s]):o.push(t[s]/e[s-1]):o.push(t[s]);return o}function NF(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function DF(t,e,n){const r=t.slice(0,1);for(let o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h_=1.7580993408473768,p_=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RF=.3275911,OF=.254829592,AF=-.284496736,$F=1.421413741,MF=-1.453152027,PF=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ac(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function fQ(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function hQ(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function pQ(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function FF(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function mQ(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function gQ(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const s=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(s),r[o]=Math.sin(s)}return{real:n,imag:r}}function vQ(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),o=Math.cos(r),s=Math.sin(r);return{real:o,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZT="->",ZDe=/->/g,gU=",",vU="...";function LF(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(ZDe,"").length)/ZT.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${ZT}").`);const[r,o]=t.split(ZT);U(r.indexOf(vU)===-1,()=>`The ellipsis notation ("${vU}") is not supported yet.`);const s=r.split(gU),i=s.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<o.length;++f){const h=o[f];if(!s.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<r.length;++f){const h=r[f];a.indexOf(h)===-1&&h!==gU&&a.push(h)}const u=new Array(s.length);for(let f=0;f<i;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);u[f]=[];for(let h=0;h<s[f].length;++h)u[f].push(a.indexOf(s[f][h]))}const l=a.length,c=o.length,d=[];for(let f=c;f<l;++f)d.push(f);return{allDims:a,summedDims:d,idDims:u}}function BF(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;const r=[];for(let o=0;o<t;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function jF(t,e,n){const r=new Array(t);for(let o=0;o<n.length;++o){const s=n[o].shape;for(let i=0;i<e[o].length;++i)r[e[o][i]]===void 0?r[e[o][i]]=s[i]:U(r[e[o][i]]===s[i],()=>`Expected dimension ${r[e[o][i]]} at axis ${i} of input shaped ${JSON.stringify(s)}, but got dimension ${s[i]}`)}}function WF(t,e){const n=t,r=[];let o=0;t.length===0&&n.push(-1),o=t.length+1;for(let i=0;i<o;++i)r.push([]);const s=[];for(let i=0;i<n.length;++i){const a=n[i],u=eRe(e,a);for(const l of u)s.indexOf(l)===-1&&(r[i].push(l),s.push(l))}return{path:n,steps:r}}function zF(t){return t.every((e,n)=>e===n)}function eRe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function UF(t,e,n=0){let r=[];if(typeof e=="number")U(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const o=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);U(o<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const i=e.reduce((a,u)=>u>0?a+u:a);e[s]=t.shape[n]-i}U(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yQ(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function xQ(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function bQ(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQ(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function kQ(t,e){return`size ${t} must be non-negative, not ${e}`}function CQ(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function SQ(t,e){const n=xe(t),r=xe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function EQ(t,e){const n=xe(t),r=xe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cO(){return"segment ids must be >= 0"}function _Q(){return"segment ids are not increasing"}function IQ(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function TQ(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQ(t,e){let n=!1,r;for(t<=IF?(r=t,n=!0):r=HR(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=HR(t,r+1);return r}function DQ(t,e,n){const r=[],o=t.length;for(let s=0;s<o;s++)s!==e?r.push(t[s]):r.push(n);return r}function VF(t,e,n,r){const o=e.shape.length,s=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const i=t.shape[n],a=[];let u=1,l=1,c=1;for(let d=0;d<r;++d)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<o;d++)a.push(e.shape[d]);for(let d=n+1;d<s;d++)a.push(t.shape[d]),c*=t.shape[d];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:i,outputShape:a}}const tRe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:VF,computeOutShape:DQ,segOpComputeOptimalWindowSize:NQ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uc(t){try{return t.map(e=>Bd(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function RQ(t){return t.map(e=>Cd(e))}const nRe=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:OF,ERF_A2:AF,ERF_A3:$F,ERF_A4:MF,ERF_A5:PF,ERF_P:RF,PARALLELIZE_THRESHOLD:IF,get RowPartitionType(){return Fa},SELU_SCALE:p_,SELU_SCALEALPHA:h_,applyActivation:hF,assertAndGetBroadcastShape:Ft,assertAxesAreInnerMostDims:Bo,assertParamsConsistent:_F,assignToTypedArray:mQ,axesAreInnerMostDims:VP,calculateShapes:Qh,checkEinsumDimSizes:jF,checkPadOnDimRoundingMode:Ls,combineLocations:kX,combineRaggedTensorToTensorShapes:uQ,complexWithEvenIndex:hQ,complexWithOddIndex:pQ,computeConv2DInfo:Lo,computeConv3DInfo:sf,computeDefaultPad:FP,computeDilation2DInfo:I1,computeOptimalWindowSize:f_,computeOutAndReduceShapes:Co,computeOutShape:Hu,computePool2DInfo:va,computePool3DInfo:yc,convertConv2DDataFormat:xc,decodeEinsumEquation:LF,eitherStridesOrDilationsAreOne:Qo,expandShapeToKeepDim:Kr,exponent:vQ,exponents:gQ,fromStringArrayToUint8:RQ,fromUint8ToStringArray:uc,getAxesPermutation:br,getBroadcastDims:ug,getComplexWithIndex:FF,getEinsumComputePath:WF,getEinsumPermutation:BF,getFusedBiasGradient:fF,getFusedDyActivation:dF,getImageCenter:TF,getInnerMostAxes:Br,getPermuted:A1,getRaggedRank:cQ,getReductionAxes:io,getReshaped:O1,getReshapedPermuted:$1,getRowPartitionTypesHelper:lQ,getSliceBeginCoords:NF,getSliceSize:DF,getSparseFillEmptyRowsIndicesDenseShapeMismatch:yQ,getSparseFillEmptyRowsNegativeIndexErrorMessage:xQ,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:bQ,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:CQ,getSparseReshapeInputOutputMismatchErrorMessage:EQ,getSparseReshapeInputOutputMultipleErrorMessage:SQ,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:wQ,getSparseReshapeNegativeOutputDimErrorMessage:kQ,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:TQ,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:cO,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:_Q,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:IQ,getUndoAxesPermutation:af,isIdentityPermutation:zF,log:LSe,mergeRealAndImagArrays:ac,prepareAndValidate:bF,prepareSplitSize:UF,segment_util:tRe,shouldFuse:pF,slice_util:XDe,splitRealAndImagArrays:fQ,stridesOrDilationsArePositive:Eh,tupleValuesAreOne:Sh,upcastType:ri,validateDefaultValueShape:dQ,validateInput:ANe,validateUpdateShape:WX,warn:pi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */HDe();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OQ={kernelName:rE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,R1(Ye(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rRe={kernelName:Ox,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Kn(Ye(n,"float32")),o=ys(Ct(Cn(1),r));return Mr(kt(t,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oRe={kernelName:Ax,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ys(Ct(Kn(Ye(n,"float32")),1));return kt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sRe={kernelName:Mg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Ft(n.shape,r.shape);return{a:()=>{let a=t;const u=io(n.shape,o);return u.length>0&&(a=yt(a,u)),ae(a,n.shape)},b:()=>{let a=t;const u=io(r.shape,o);return u.length>0&&(a=yt(a,u)),ae(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iRe={kernelName:YM,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,o)=>{n[o]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aRe={kernelName:oE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uRe={kernelName:sE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lRe={kernelName:$x,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,ys(Ct(Cn(1),Kn(Ye(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cRe={kernelName:Mx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ys(De(Cn(1),Kn(Ye(n,"float32"))));return kt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dRe={kernelName:Lx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Ft(n.shape,r.shape);return{a:()=>{const a=De(Kn(n),Kn(r));let u=se(t,kt(r,a));const l=io(n.shape,o);return l.length>0&&(u=yt(u,l)),ae(u,n.shape)},b:()=>{const a=De(Kn(n),Kn(r));let u=Mr(se(t,kt(n,a)));const l=io(r.shape,o);return l.length>0&&(u=yt(u,l)),ae(u,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fRe={kernelName:Px,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,De(Kn(Ye(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hRe={kernelName:Fx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,Ct(Cn(1),Kn(Ye(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pRe(t,e,n,r,o,s){const i=K(t,"dy","avgPool3dGrad"),a=K(e,"input","avgPool3dGrad");let u=i,l=a,c=!1;a.rank===4&&(c=!0,u=ae(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),l=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),U(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),U(l.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),Ls("avgPool3dGrad",o,s);const d={dy:u,input:l},f={filterSize:n,strides:r,pad:o,dimRoundingMode:s},h=ie.runKernel(QM,d,f);return c?ae(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const mRe=le({avgPool3dGrad_:pRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gRe={kernelName:aE,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:s,pad:i,dimRoundingMode:a}=n;return{x:()=>mRe(t,r,o,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(t,e,n,r,o){const s=K(t,"dy","avgPoolGrad"),i=K(e,"input","avgPoolGrad");U(i.rank===s.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`);let a=i,u=s,l=!1;i.rank===3&&(l=!0,a=ae(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=ae(s,[1,s.shape[0],s.shape[1],s.shape[2]])),U(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),U(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:u,input:a},d={filterSize:n,strides:r,pad:o},f=ie.runKernel(XM,c,d);return l?ae(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const yRe=le({avgPoolGrad_:vRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xRe={kernelName:iE,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:s,pad:i}=n;return{x:()=>yRe(t,r,o,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bRe={kernelName:uE,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,o]=e,{transposeA:s,transposeB:i}=n;return!s&&!i?{a:()=>kn(t,o,!1,!0),b:()=>kn(r,t,!0,!1)}:!s&&i?{a:()=>kn(t,o,!1,!1),b:()=>kn(t,r,!0,!1)}:s&&!i?{a:()=>kn(o,t,!1,!0),b:()=>kn(r,t,!1,!1)}:{a:()=>kn(o,t,!0,!0),b:()=>kn(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wRe={kernelName:lE,gradFunc:(t,e,n)=>{const{blockShape:r,crops:o}=n;return{x:()=>JP(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kRe={kernelName:$Se,gradFunc:(t,e,n)=>{const r=n,o=r.inputShape,s=r.shape,i=Array.from(s);for(let u=o.length-1;u>=0;u--)if(o[u]===s[u])i[u]=1;else if(o[u]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${s}].`);const a=[];for(let u=0;u<i.length;u++)i[u]>1&&a.push(u);return{x:()=>yt(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CRe={kernelName:Bx,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SRe={kernelName:jx,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERe={kernelName:Wx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:o,clipValueMax:s}=n;return{x:()=>ms(sc(qh(r,o),Lg(r,s)),t,dn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Re={kernelName:cE,inputsToSave:["x"],gradFunc:OQ.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IRe={kernelName:dE,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(u=>u.shape),{axis:o}=n,s=Gt(o,e[0].shape)[0],i=r.map(u=>u[s]);return _i(t,i,s).map(u=>()=>u)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TRe={kernelName:fE,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{dilations:s,strides:i,pad:a,dataFormat:u}=n;return U(Sh(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>WP(r.shape,t,o,i,a,u),filter:()=>cF(r,t,o.shape,i,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NRe={kernelName:hE,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{strides:s,pad:i,dataFormat:a,dimRoundingMode:u}=n;return{dy:()=>_h(t,o,s,i,a,1,u),filter:()=>cF(t,r,o.shape,s,i,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DRe(t,e,n,r,o){let s=t;t.rank===4&&(s=ae(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=ae(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),U(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),U(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),U(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),U(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),U(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:i},u={strides:r,pad:o,filterShape:n};return ie.runKernel(nP,a,u)}const RRe=le({conv3DBackpropFilter_:DRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ORe={kernelName:pE,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:s}=n;U(Sh(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,a]=e;return{x:()=>xX(i.shape,t,a,o,s),filter:()=>RRe(i,t,a.shape,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ARe={kernelName:zx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(Mr(FX(Ye(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Re={kernelName:Ux,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(LX(Ye(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MRe={kernelName:mE,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o,exclusive:s,reverse:i}=n;return{x:()=>{const a=br([o],r.rank);let u=wX(t,o,s,!i);return a!=null&&(u=cn(u,a)),u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRe={kernelName:gE,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:s,dimRoundingMode:i}=n,a=r??[1,1];U(Sh(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[u,l]=e;return U(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),U(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),U(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),U(Qo(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),Ls("depthwiseConv2d",s,i),{x:()=>JNe(u.shape,t,l,o,s,a,i),filter:()=>XNe(u,t,l.shape,o,s,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FRe={kernelName:vE,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,s={x:r,filter:o,dy:t},i={x:r,filter:o,dy:t};return{x:()=>ie.runKernel(GR,s,n),filter:()=>ie.runKernel(YR,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LRe={kernelName:Hx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ie.runKernel(dP,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BRe={kernelName:Gx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=se(tl(Mr(Kn(n))),2/Math.sqrt(Math.PI));return{x:()=>se(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jRe={kernelName:Yx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WRe={kernelName:xE,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ae(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zRe={kernelName:qx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,tl(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const URe={kernelName:Kx,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VRe={kernelName:Xx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Ft(n.shape,r.shape);return{a:()=>{const a=kt(t,Ye(r,"float32")),u=io(n.shape,o);return u.length>0?ae(yt(a,u),n.shape):a},b:()=>{let a=se(t,Ye(n,"float32"));const u=io(r.shape,o);u.length>0&&(a=ae(yt(a,u),r.shape));const l=Kn(r);return Mr(kt(a,Ye(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HRe={kernelName:bE,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[o,s,i,a]=e,u=a??Cn(1),l=io(s.shape,o.shape),c=[];if(s.rank===1){for(let b=0;b<o.shape.length-1;++b)c.push(o.shape[b]);c.push(1)}const d=Ct(o,s),f=se(t,u),h=$X(De(i,Cn(r))),p=se(se(se(h,h),h),Cn(-.5));return{x:()=>s.rank===1?ae(se(se(t,Wa(ae(h,[1,1,1,s.shape[0]]),c)),u),o.shape):ae(se(se(t,h),u),o.shape),mean:()=>{let b=se(se(h,Cn(-1)),f);return s.rank===1&&(b=yt(b,l)),ae(b,s.shape)},variance:()=>{let b=se(se(p,d),f);return s.rank===1&&(b=yt(b,l)),ae(b,s.shape)},scale:()=>{const b=se(d,h);let C=se(t,b);return s.rank===1&&(C=yt(C,l)),ae(C,s.shape)},offset:()=>{let b=t;return s.rank===1&&(b=yt(b,l)),ae(b,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GRe={kernelName:wE,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,o]=e,{axis:s,batchDims:i}=n,a=Gt(s,r.shape)[0],u=(l,c,d)=>()=>{const f=l.shape,h=c.size,p=f.slice(0,a),m=p.length,g=f.slice(s,f.length).slice(1),v=g.length,y=yU(0,m),x=yU(m+1,m+1+v),b=xU([p,[h],g]),C=ae(d,b),S=ae(c,[h]),E=xU([[m],y,x]),I=cn(C,E);let T=UX(I,S,l.shape[a]);const N=af(E);return T=cn(T,N),T};if(i===1){const l=r.shape[0],c=r.split(l,0);return{x:()=>ic(c.map((h,p)=>u(h,o.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>o}}else return{x:u(r,o,t),indices:()=>o}}};function yU(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function xU(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YRe={kernelName:Qx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>dn(n),b:()=>dn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qRe={kernelName:Jx,gradFunc:t=>({x:()=>Ye(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KRe={kernelName:Zx,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XRe={kernelName:e1,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QRe={kernelName:t1,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JRe={kernelName:CE,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:o}=n,s=$i(r,0);return{x:()=>ms(s,t,se(t,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZRe={kernelName:r1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,De(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOe={kernelName:n1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,Ye(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tOe={kernelName:PSe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;return{logits:()=>{const i=tl(r);return Ct(t,se(yt(t,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nOe(t,e,n,r=5,o=1,s=1,i=.5){const a={x:t,y:e,dy:n},u={depthRadius:r,bias:o,alpha:s,beta:i};return ie.runKernel(vP,a,u)}const rOe=le({localResponseNormalizationBackprop_:nOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oOe={kernelName:NE,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{depthRadius:s,bias:i,alpha:a,beta:u}=n;return{x:()=>rOe(r,o,t,s,i,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQ(t,e,n,r){return e.rank<n.rank&&(e=ae(e,Kr(e.shape,r))),t.rank<n.rank&&(t=ae(t,Kr(t.shape,r))),{x:()=>se(t,Ye(el(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bU={kernelName:DE,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:o}=r,s=e[0],i=e[1],a=Gt(o,s.shape),u=AQ(t,i,s,a);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOe={kernelName:o1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>se(t,Ye(qh(n,r),"float32")),b:()=>se(t,Ye(zC(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(t,e,n,r,o,s,i){const a=K(t,"dy","maxPool3dGrad"),u=K(e,"input","maxPool3dGrad"),l=K(n,"output","maxPool3dGrad");let c=a,d=u,f=l,h=!1;u.rank===4&&(h=!0,c=ae(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=ae(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=ae(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),U(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),U(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),U(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),Ls("maxPool3dGrad",s,i);const p={dy:c,input:d,output:f},m={filterSize:r,strides:o,pad:s,dimRoundingMode:i},g=ie.runKernel(xP,p,m);return h?ae(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const aOe=le({maxPool3dGrad_:iOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uOe={kernelName:OE,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:u}=n;return{x:()=>aOe(t,r,o,s,i,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lOe(t,e,n,r,o,s,i){const a=K(t,"dy","maxPoolGrad"),u=K(e,"input","maxPoolGrad"),l=K(n,"output","maxPoolGrad");U(u.rank===a.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${a.rank})`),U(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),U(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),Ls("maxPoolGrad",s,i);const c={dy:a,input:u,output:l},d={filterSize:r,strides:o,pad:s,dimRoundingMode:i};return ie.runKernel(yP,c,d)}const cOe=le({maxPoolGrad_:lOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dOe={kernelName:RE,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:s,strides:i,pad:a}=n;return{x:()=>cOe(t,r,o,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fOe={kernelName:AE,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n,s=Gt(o,r.shape),a=Co(r.shape,s)[1],u=xe(a);return{x:()=>{const c=r.shape.slice();s.forEach(h=>{c[h]=1});const d=ae(t,c);return kt(se(d,lf(r.shape,"float32")),u)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hOe={kernelName:$E,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:o}=r,[s,i]=e,a=Gt(o,s.shape),u=AQ(t,i,s,a);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pOe={kernelName:s1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>se(t,Ye(Lg(n,r),"float32")),b:()=>se(t,Ye($i(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mOe={kernelName:ME,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,s=o.map(i=>i[0]);return{x:()=>Hn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gOe={kernelName:i1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Ft(n.shape,r.shape);return{a:()=>{const a=io(n.shape,o);return a.length>0?ae(yt(t,a),n.shape):t},b:()=>{const a=se(t,Mr(c_(kt(n,r)))),u=io(r.shape,o);return u.length>0?ae(yt(a,u),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vOe={kernelName:a1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Ft(n.shape,r.shape);return{a:()=>{const a=se(t,Ye(r,"float32")),u=io(n.shape,o);return u.length>0?ae(yt(a,u),n.shape):a},b:()=>{const a=se(t,Ye(n,"float32")),u=io(r.shape,o);return u.length>0?ae(yt(a,u),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yOe={kernelName:PE,gradFunc:t=>({x:()=>Mr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xOe={kernelName:BE,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>po(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bOe={kernelName:LE,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wOe={kernelName:jE,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Th(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wU={kernelName:WE,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,s=o.map(i=>i[0]);return{x:()=>Hn(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kOe={kernelName:u1,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,o]=e,s=n,i=r,a=Ft(s.shape,i.shape);return{a:()=>{const c=Ye(i,"float32");let d=se(t,se(c,lg(s,Ct(c,Cn(1)))));const f=io(s.shape,a);return f.length>0&&(d=yt(d,f)),ae(d,s.shape)},b:()=>{const c=$i(s,0),d=ms(c,nl(s),dn(s));let f=se(t,se(o,d));const h=io(i.shape,a);return h.length>0&&(f=yt(f,h)),ae(f,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe={kernelName:zE,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,o=$i(n,0);return{x:()=>ms(o,t,se(t,r)),alpha:()=>{let s=ms(o,dn(t),se(t,n));const i=io(r.shape,t.shape);return i.length>0&&(s=yt(s,i)),ae(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SOe(t,e,n){const r=t.shape.slice();r[n]=1;const o=ae(e,r),s=aO(t,n,!0,!1),i=aO(t,n,!0,!0),a=se(s,i);return se(o,a)}function EOe(t,e,n){const r=t.shape.length,o=r-n.length,s=br(n,r);let i=t;s!=null&&(i=cn(t,s));const a=i.shape.slice(),l=a.splice(r-n.length,n.length).reduce((f,h)=>f*h,1);a.push(l);const c=i.reshape(a);let d=SOe(c,e,o);if(d=d.reshape(i.shape),s!=null){const f=af(s);d=cn(d,f)}return d}const _Oe={kernelName:UE,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;let s=[];return o==null?s=r.shape.map((i,a)=>a):typeof o=="number"?s=[o]:s=o,{x:()=>EOe(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IOe={kernelName:Vx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Ft(n.shape,r.shape);return{a:()=>{const a=kt(t,Ye(r,"float32")),u=io(n.shape,o);return u.length>0?ae(yt(a,u),n.shape):a},b:()=>{let a=se(t,Ye(n,"float32"));const u=io(r.shape,o);u.length>0&&(a=ae(yt(a,u),r.shape));const l=Kn(r);return Mr(kt(a,Ye(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TOe={kernelName:l1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,Mr(Kn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOe={kernelName:d1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=se(Lg(n,6),R1(n));return{x:()=>se(t,Ye(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe={kernelName:c1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,Ye(R1(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROe={kernelName:VE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ae(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OOe={kernelName:GE,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>ie.runKernel(_P,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AOe={kernelName:HE,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>ie.runKernel(EP,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Oe={kernelName:YE,gradFunc:(t,e,n)=>{const{dims:r}=n,o=Gt(r,t.shape);return{x:()=>Ih(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOe={kernelName:f1,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POe={kernelName:h1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Mr(kt(t,se(lg(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FOe={kernelName:qE,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ye(dn(n),"float32"),t:()=>se(t,Ye(n,t.dtype)),e:()=>se(t,Ye(qP(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOe={kernelName:p1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=$i(n,Cn(0)),o=Cn(h_),s=Cn(p_),i=se(t,s),a=se(se(t,o),tl(Ye(n,"float32")));return ms(r,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe={kernelName:y1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,se(n,Ct(Cn(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jOe={kernelName:v1,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WOe={kernelName:m1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(zP(Ye(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zOe={kernelName:g1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(bX(Ye(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UOe={kernelName:KE,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:o,size:s}=n,i=r.shape,[a,u]=d_(r,o,s),l=[];for(let c=0;c<t.rank;c++)l.push([a[c],i[c]-a[c]-u[c]]);return{x:()=>QP(t,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VOe={kernelName:ZE,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:o}=n,s=!0,i=se(t,r);return{logits:()=>Ct(i,se(yt(i,[o],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HOe={kernelName:x1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,Fg(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kU={kernelName:QE,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:o}=n;return{x:()=>jP(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CU={kernelName:JE,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Os(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GOe={kernelName:b1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,se(ys(Ye(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YOe={kernelName:IP,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,se(Ye(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qOe={kernelName:w1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Cn(2);return{a:()=>se(t,se(o,Ct(n,r))),b:()=>se(t,se(o,Ct(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KOe={kernelName:_1,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XOe={kernelName:k1,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Ft(n.shape,r.shape);return{a:()=>{let a=t;const u=io(n.shape,o);return u.length>0&&(a=yt(a,u)),ae(a,n.shape)},b:()=>{let a=t;const u=io(r.shape,o);return u.length>0&&(a=yt(a,u)),ae(Mr(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QOe={kernelName:XE,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,o=r.shape.slice(),{axis:s}=n;Gt(s,r.shape).forEach(l=>{o[l]=1});const a=ae(t,o),u=se(a,lf(r.shape,"float32"));return{x:()=>u}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JOe={kernelName:C1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>kt(t,Kn(zP(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZOe={kernelName:S1,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(Ct(Cn(1),Kn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eAe={kernelName:E1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:o}=n;return{x:()=>{let i=dn(r);if(r.rank===1)for(let a=0;a<o[0];++a)i=De(i,Hn(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<o[0];++a)for(let u=0;u<o[1];++u)i=De(i,Hn(t,[a*r.shape[0],u*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<o[0];++a)for(let u=0;u<o[1];++u)for(let l=0;l<o[2];++l)i=De(i,Hn(t,[a*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<o[0];++a)for(let u=0;u<o[1];++u)for(let l=0;l<o[2];++l)for(let c=0;c<o[3];++c)i=De(i,Hn(t,[a*r.shape[0],u*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tAe={kernelName:gm,gradFunc:(t,e,n)=>{const r=n,{perm:o}=r,s=af(o);return{x:()=>cn(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nAe={kernelName:e_,gradFunc:(t,e,n)=>{const r=n,{axis:o}=r;return{value:()=>ic(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAe={kernelName:t_,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oAe(t,n)}}};function oAe(t,e){const n=uf(e,dn(e)),r=HP(t,n);let o=qh(e,Cn(0,"int32"));const s=r.rank-o.rank;for(let a=0;a<s;++a)o=Ts(o,a+1);o=sc(o,lf(r.shape,"bool"));const i=dn(r);return ms(o,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sAe={kernelName:n_,gradFunc:t=>({x:()=>dn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iAe=[OQ,rRe,oRe,sRe,iRe,aRe,uRe,lRe,cRe,dRe,fRe,hRe,gRe,xRe,bRe,wRe,kRe,CRe,SRe,ERe,_Re,IRe,NRe,TRe,ORe,ARe,$Re,MRe,PRe,FRe,IOe,LRe,BRe,jRe,WRe,zRe,VRe,URe,HRe,GRe,YRe,qRe,KRe,XRe,QRe,JRe,ZRe,eOe,tOe,oOe,bU,bU,sOe,uOe,dOe,fOe,hOe,pOe,mOe,gOe,vOe,yOe,xOe,bOe,wOe,wU,wU,kOe,COe,_Oe,TOe,NOe,DOe,ROe,OOe,AOe,$Oe,MOe,POe,FOe,LOe,BOe,jOe,WOe,zOe,UOe,VOe,HOe,kU,kU,CU,CU,GOe,qOe,YOe,KOe,XOe,QOe,JOe,ZOe,eAe,tAe,nAe,rAe,sAe];for(const t of iAe)BSe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.abs=function(){return this.throwIfDisposed(),os(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.acos=function(){return this.throwIfDisposed(),WEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.acosh=function(){return this.throwIfDisposed(),UEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.add=function(t){return this.throwIfDisposed(),De(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.all=function(t,e){return this.throwIfDisposed(),gX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.any=function(t,e){return this.throwIfDisposed(),sO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.argMax=function(t){return this.throwIfDisposed(),g0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.argMin=function(t){return this.throwIfDisposed(),qEe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asScalar=function(){return this.throwIfDisposed(),U(this.size===1,()=>"The array must have only 1 element."),ae(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asType=function(t){return this.throwIfDisposed(),Ye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as1D=function(){return this.throwIfDisposed(),ae(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as2D=function(t,e){return this.throwIfDisposed(),ae(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ae(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ae(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.as5D=function(t,e,n,r,o){return this.throwIfDisposed(),ae(this,[t,e,n,r,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asin=function(){return this.throwIfDisposed(),XEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.asinh=function(){return this.throwIfDisposed(),JEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.atan=function(){return this.throwIfDisposed(),e_e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.atan2=function(t){return this.throwIfDisposed(),n_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.atanh=function(){return this.throwIfDisposed(),o_e(this)};ge().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),LP(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),jP(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.batchNorm=function(t,e,n,r,o){return this.throwIfDisposed(),i_(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Sy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cast=function(t){return this.throwIfDisposed(),Ye(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.ceil=function(){return this.throwIfDisposed(),R_e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Di(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Qr&&(t=[t]),Os([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.conv1d=function(t,e,n,r,o,s){return this.throwIfDisposed(),vX(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),yX(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.conv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),_h(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cos=function(){return this.throwIfDisposed(),zP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cosh=function(){return this.throwIfDisposed(),bX(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),aO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),wX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),nIe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.depthwiseConv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),UP(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.dilation2d=function(t,e,n,r,o){return this.throwIfDisposed(),sIe(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.divNoNan=function(t){return this.throwIfDisposed(),cIe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.div=function(t){return this.throwIfDisposed(),kt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.dot=function(t){return this.throwIfDisposed(),fIe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.elu=function(){return this.throwIfDisposed(),u_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.equal=function(t){return this.throwIfDisposed(),el(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.erf=function(){return this.throwIfDisposed(),gIe(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),EIe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.exp=function(){return this.throwIfDisposed(),tl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.expandDims=function(t){return this.throwIfDisposed(),Ts(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.expm1=function(){return this.throwIfDisposed(),NIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.fft=function(){return this.throwIfDisposed(),jX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.flatten=function(){return this.throwIfDisposed(),ae(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.floor=function(){return this.throwIfDisposed(),c_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.floorDiv=function(t){return this.throwIfDisposed(),mX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.gather=function(t,e,n){return this.throwIfDisposed(),HP(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.greaterEqual=function(t){return this.throwIfDisposed(),qh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.greater=function(t){return this.throwIfDisposed(),$i(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.ifft=function(){return this.throwIfDisposed(),uO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.irfft=function(){return this.throwIfDisposed(),bNe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.isFinite=function(){return this.throwIfDisposed(),LIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.isInf=function(){return this.throwIfDisposed(),jIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.isNaN=function(){return this.throwIfDisposed(),zIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.leakyRelu=function(t){return this.throwIfDisposed(),YP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.lessEqual=function(t){return this.throwIfDisposed(),Lg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.less=function(t){return this.throwIfDisposed(),zC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),YIe(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logSigmoid=function(){return this.throwIfDisposed(),eTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logSoftmax=function(t){return this.throwIfDisposed(),_X(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),IX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.log=function(){return this.throwIfDisposed(),nl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.log1p=function(){return this.throwIfDisposed(),EX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalAnd=function(t){return this.throwIfDisposed(),sc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalNot=function(){return this.throwIfDisposed(),qP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalOr=function(t){return this.throwIfDisposed(),TX(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.logicalXor=function(t){return this.throwIfDisposed(),uTe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),kn(this,t,e,n)};ge().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),KP(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.max=function(t,e){return this.throwIfDisposed(),Ka(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.maximum=function(t){return this.throwIfDisposed(),uf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mean=function(t,e){return this.throwIfDisposed(),Hr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.min=function(t,e){return this.throwIfDisposed(),WC(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.minimum=function(t){return this.throwIfDisposed(),x0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),gTe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mod=function(t){return this.throwIfDisposed(),yTe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.mul=function(t){return this.throwIfDisposed(),se(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.neg=function(){return this.throwIfDisposed(),Mr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.norm=function(t,e,n){return this.throwIfDisposed(),l_(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.notEqual=function(t){return this.throwIfDisposed(),UC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),NX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.onesLike=function(){return this.throwIfDisposed(),ma(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.pad=function(t,e){return this.throwIfDisposed(),QP(this,t,e)};ge().prototype.pool=function(t,e,n,r,o,s){return this.throwIfDisposed(),TTe(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.pow=function(t){return this.throwIfDisposed(),lg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.prelu=function(t){return this.throwIfDisposed(),ZP(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.prod=function(t,e){return this.throwIfDisposed(),RTe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reciprocal=function(){return this.throwIfDisposed(),eNe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.relu=function(){return this.throwIfDisposed(),Xh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.relu6=function(){return this.throwIfDisposed(),OX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ae(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reshape=function(t){return this.throwIfDisposed(),ae(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),HX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),GX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.reverse=function(t){return this.throwIfDisposed(),Ih(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.rfft=function(){return this.throwIfDisposed(),CNe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.round=function(){return this.throwIfDisposed(),AX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.rsqrt=function(){return this.throwIfDisposed(),$X(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.selu=function(){return this.throwIfDisposed(),MX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.separableConv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),PX(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sigmoid=function(){return this.throwIfDisposed(),Fg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sign=function(){return this.throwIfDisposed(),lNe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sin=function(){return this.throwIfDisposed(),FX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sinh=function(){return this.throwIfDisposed(),LX(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.slice=function(t,e){return this.throwIfDisposed(),Hn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.softmax=function(t){return this.throwIfDisposed(),lF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.softplus=function(){return this.throwIfDisposed(),T1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),JP(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.split=function(t,e){return this.throwIfDisposed(),_i(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sqrt=function(){return this.throwIfDisposed(),ys(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.square=function(){return this.throwIfDisposed(),Kn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.squaredDifference=function(t){return this.throwIfDisposed(),ENe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.squeeze=function(t){return this.throwIfDisposed(),D1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Qr?[this,t]:[this,...t];return ic(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.step=function(t){return this.throwIfDisposed(),R1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.stridedSlice=function(t,e,n,r,o,s,i,a){return this.throwIfDisposed(),DNe(this,t,e,n,r,o,s,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sub=function(t){return this.throwIfDisposed(),Ct(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.sum=function(t,e){return this.throwIfDisposed(),yt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.tan=function(){return this.throwIfDisposed(),ONe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.tanh=function(){return this.throwIfDisposed(),BP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.tile=function(t){return this.throwIfDisposed(),Wa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.toBool=function(){return this.throwIfDisposed(),Ye(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.toFloat=function(){return this.throwIfDisposed(),Ye(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.toInt=function(){return this.throwIfDisposed(),Ye(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.topk=function(t,e){return this.throwIfDisposed(),MNe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.transpose=function(t){return this.throwIfDisposed(),cn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.unique=function(t){return this.throwIfDisposed(),LNe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),UX(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.unstack=function(t){return this.throwIfDisposed(),Th(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.where=function(t,e){return this.throwIfDisposed(),ms(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ge().prototype.zerosLike=function(){return this.throwIfDisposed(),dn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ku extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ku.prototype)}}class ra extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ra.prototype)}}class ne extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ne.prototype)}}class Lt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Lt.prototype)}}class HF extends Error{constructor(e){super(e),Object.setPrototypeOf(this,HF.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $Q{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Nh(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Cu(t,e){if(!t)throw new HF(e)}function SU(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Ns(t){return t.length===1?t[0]:t}function Dn(t){return Array.isArray(t)?t:[t]}function Ml(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Of(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Wi={};function GF(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function dO(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>dO(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:dO(r))}}}function M1(t,e={},n={},r="object",o=!1){if(typeof t=="string"){const s=t;let i;if(s in n)i=n[s];else if(s in Wi)i=Wi[s];else if(i=e[s],i==null)throw new ne(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const s=t;if(s.className==null||s.config==null)throw new ne(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const i=s.className;let a,u;if(i in n?[a,u]=n[i]:i in Wi?[a,u]=Wi.className:i in e&&([a,u]=e[i]),a==null)throw new ne(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){const l={};for(const h of Object.keys(Wi))l[h]=Wi[h];for(const h of Object.keys(n))l[h]=n[h];const c=s.config;c.customObjects=l;const d=Object.assign({},Wi);for(const h of Object.keys(n))Wi[h]=n[h];dO(s.config);const f=u(a,s.config,n,o);return Wi=Object.assign({},d),f}else{const l=Object.assign({},Wi);for(const d of Object.keys(n))Wi[d]=n[d];const c=new a(s.config);return Wi=Object.assign({},l),c}}}function aAe(t,e){return t<e?-1:t>e?1:0}function rw(t,e){return-1*aAe(t,e)}function Sd(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function uAe(t){if(t==null)throw new ne(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Jh(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ne(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function YF(t,e,n=0,r=1/0){return Cu(n>=0),Cu(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(o=>typeof o===e)}function go(t,e){Array.isArray(t)?(U(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>go(n,`element ${r+1} of ${e}`))):U(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${MQ(t)}.`)}function MQ(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>MQ(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function lAe(t,e,n){let r=n!=null?n():Is(),o;return(...i)=>{const a=n!=null?n():Is();return a-r<e||(r=a,o=t(...i)),o}}function PQ(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let cAe=0;function FQ(){return cAe++}const ow={};function m_(t=""){return t in ow||(ow[t]=0),ow[t]+=1,t+ow[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const dAe=["channelsFirst","channelsLast"],fAe=["nearest","bilinear"],hAe=["valid","same","causal"],pAe=["max","avg"],mAe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Sp=new Map;function jr(t){Jh(dAe,"DataFormat",t)}function gAe(t){Jh(fAe,"InterpolationFormat",t)}function Mi(t){Jh(hAe,"PaddingMode",t)}function LQ(t){Jh(pAe,"PoolMode",t)}const Ey=[],EU="/";function oh(t,e){Ey.push(t);try{const n=e();return Ey.pop(),n}catch(n){throw Ey.pop(),n}}function vAe(){return Ey.length===0?"":Ey.join(EU)+EU}function BQ(t){if(!WQ(t))throw new Error("Not a valid tensor name: '"+t+"'");return vAe()+t}function jQ(t){if(!WQ(t))throw new Error("Not a valid tensor name: '"+t+"'");Sp.has(t)||Sp.set(t,0);const e=Sp.get(t);if(Sp.set(t,Sp.get(t)+1),e>0){const n=`${t}_${e}`;return Sp.set(n,1),n}else return t}const yAe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function WQ(t){return!!t.match(yAe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xAe(t){return t===parseInt(t.toString(),10)}function Ed(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let o=e;o<n;++o)r*=t[o];return r}function dg(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function jd(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function eu(t,e){if(e<t)throw new ne(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let eN;function eo(){return eN==null&&(eN=dEe().epsilon()),eN}function tu(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gu(t,e){return Ye(t,e)}function P1(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ae(t,n)}function bAe(t,e){return de(()=>{if(t.shape.length!==2)throw new ne(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=P1(t,1);return fO(n,[1,e,1])})}function wAe(t){const e=[Ed(t.shape)];return ae(t,e)}function kAe(t){if(t.rank<=1)throw new ne(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Ed(t.shape,1)];return ae(t,e)}function sh(t,e,n){return de(()=>{switch(t.rank){case 1:return aF(t,e,n);case 2:return BX(t,[e,0],[n,t.shape[1]]);case 3:return uF(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return HC(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Hn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Hn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ne(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function tN(t,e,n){return de(()=>{switch(t.rank){case 1:return aF(t,e,n);case 2:return BX(t,[0,e],[t.shape[0],n]);case 3:return uF(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return HC(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function sw(t,e,n,r){return de(()=>{switch(t.rank){case 1:return aF(t,e,n);case 2:switch(r){case 1:return sh(t,e,n);case 2:return tN(t,e,n);default:throw new ne(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return sh(t,e,n);case 2:return uF(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return tN(t,e,n);default:throw new ne(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return sh(t,e,n);case 2:return HC(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return HC(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return tN(t,e,n);default:throw new ne(`The axis is not within the rank of the tensor ${r}`)}default:throw new ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function qF(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Os(t,e)}function _U(t,e){switch(t.rank){case 1:return $_e([t,e]);case 2:return P_e([t,e],0);case 3:return L_e([t,e],0);case 4:return j_e([t,e],0);default:throw new ne(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function fO(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ne(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Wa(t,e)}function g_(t,e=0,n=1,r,o){return XTe(t,e,n,r,o)}function Yu(t,e,n,r){if(t.rank<2||e.rank<2)throw new Lt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const o=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(o!==s)throw new Lt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return fU({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?hO(t.rank,r,tu()):null,activation:n});{const o=t.shape.slice(),s=o.pop();t=ae(t,[-1,s]);const i=e.shape.slice(),a=i.pop(),u=i.pop(),l=[...i,a],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=ae(cn(e,c),[u,-1]);const d=[...o,...l];return ae(fU({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?hO(t.rank,r,tu()):null,activation:n}),d)}}function zQ(t,e,n){return de(()=>(Array.isArray(e)?e=Xs(e,"int32"):e=Ye(e,"int32"),HP(t,e,n)))}function F1(t){return se(t,t)}function hO(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ne(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ae(e,[1,r[0],1,1,1]):ae(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ae(e,[1,1,1,1,r[0]]):ae(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ae(e,[1,r[0],1,1]):ae(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ae(e,[1,1,1,r[0]]):ae(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ae(e,[1,r[0],1]):ae(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ae(e,[1,1,r[0]]):ae(e,[1].concat(r))}else if(t<3)return e;throw new ne(`Unsupported input rank by biasAdd: ${e.rank}`)}function uu(t,e,n){return de(()=>(n==null&&(n=tu()),jr(n),De(t,hO(t.rank,e,n))))}function CAe(t,e=1){if(e!==1)throw new Lt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return u_(t)}function SAe(t){return de(()=>kt(t,De(os(t),1)))}function UQ(t,e,n,r){return de(()=>HNe(t,e,n,r))}function EAe(t){return de(()=>{const e=De(.5,se(.2,t));return Di(e,0,1)})}function L1(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _Ae=["fanIn","fanOut","fanAvg"],IAe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TAe(t){Jh(_Ae,"FanMode",t)}function NAe(t){Jh(IAe,"Distribution",t)}class ya extends jg{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class VQ extends ya{apply(e,n){return po(e,n)}}VQ.className="Zeros";Te(VQ);class KF extends ya{apply(e,n){return lf(e,n)}}KF.className="Ones";Te(KF);class HQ extends ya{constructor(e){if(super(),typeof e!="object")throw new ne(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ne(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return de(()=>se(Cn(this.value),lf(e,n)))}getConfig(){return{value:this.value}}}HQ.className="Constant";Te(HQ);class GQ extends ya{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return N1(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}GQ.className="RandomUniform";Te(GQ);class YQ extends ya{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Lt(`randomNormal does not support dType ${n}.`);return g_(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}YQ.className="RandomNormal";Te(YQ);class qQ extends ya{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Lt(`truncatedNormal does not support dType ${n}.`);return zX(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}qQ.className="TruncatedNormal";Te(qQ);class KQ extends ya{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return de(()=>{if(e.length!==2||e[0]!==e[1])throw new ne("Identity matrix initializer can only be used for 2D square matrices.");return se(this.gain,SX(e[0]))})}getConfig(){return{gain:this.gain}}}KQ.className="Identity";Te(KQ);function DAe(t,e="channelsLast"){let n,r;if(jr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const o=Ed(t,2);n=t[1]*o,r=t[0]*o}else if(e==="channelsLast"){const o=Ed(t,0,t.length-2);n=t[t.length-2]*o,r=t[t.length-1]*o}}else{const o=Ed(t);n=Math.sqrt(o),r=Math.sqrt(o)}return[n,r]}class oi extends ya{constructor(e){if(super(),e.scale<0)throw new ne(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,TAe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,NAe(this.distribution),this.seed=e.seed}apply(e,n){const r=DAe(e),o=r[0],s=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,o):this.mode==="fanOut"?i/=Math.max(1,s):i/=Math.max(1,(o+s)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Lt(`${this.getClassName()} does not support dType ${n}.`);return zX(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return N1(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}oi.className="VarianceScaling";Te(oi);class XF extends oi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return oi.className}}XF.className="GlorotUniform";Te(XF);class QF extends oi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return oi.className}}QF.className="GlorotNormal";Te(QF);class JF extends oi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return oi.className}}JF.className="HeNormal";Te(JF);class ZF extends oi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return oi.className}}ZF.className="HeUniform";Te(ZF);class e3 extends oi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return oi.className}}e3.className="LeCunNormal";Te(e3);class t3 extends oi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return oi.className}}t3.className="LeCunUniform";Te(t3);class XQ extends ya{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return de(()=>{if(e.length<2)throw new Lt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=xe(e.slice(0,-1)),o=e[e.length-1],s=r*o;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const i=[Math.max(o,r),Math.min(o,r)],a=g_(i,0,1,n,this.seed),u=WDe.qr(a,!1);let l=u[0];const d=u[1].flatten().stridedSlice([0],[Math.min(o,r)*Math.min(o,r)],[Math.min(o,r)+1]);return l=se(l,d.sign()),r<o&&(l=l.transpose()),se(Cn(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}XQ.className="Orthogonal";Te(XQ);const IU={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function TU(t,e={}){return M1(t,Xi.getMap().classNameMap,e,"initializer")}function yr(t){return GF(t)}function sr(t){if(typeof t=="string"){const e=t in IU?IU[t]:t;if(e==="GlorotNormal")return new QF;if(e==="GlorotUniform")return new XF;if(e==="HeNormal")return new JF;if(e==="HeUniform")return new ZF;if(e==="LeCunNormal")return new e3;if(e==="LeCunUniform")return new t3;{const n={};return n.className=e,n.config={},TU(n)}}else return t instanceof ya?t:TU(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pO(t){return Array.isArray(t)&&Array.isArray(t[0])}function GC(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Et(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ne(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function vn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ne(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YC(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,o)=>r*o);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const NU="Variable";class RAe{constructor(e,n="float32",r=NU,o=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=FQ(),r=r??NU,this.originalName=BQ(r),this.name=jQ(this.originalName),this.trainable_=o,this.constraint=s,this.val=WNe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),OAe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function OAe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function mO(t){return t.map(e=>e.read())}function n3(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class to{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class rl{constructor(e,n,r,o,s,i,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=o,this.callArgs=s,this.outputTensorIndex=a,this.id=FQ(),i!=null&&(this.originalName=BQ(i),this.name=jQ(this.originalName)),this.rank=n.length}}let AAe=0,v_=class{constructor(e,n){this.callArgs=n,this.id=AAe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},$Ae=0;class Yt extends jg{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=$Ae++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Ml(r)+"_"+m_(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let o=e.dtype;o==null&&(o=e.inputDType),o==null&&(o="float32"),this.dtype=o}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new ra(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ne(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Ns(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Ns(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ku(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new ku(`Layer ${this.name} is not connected, no input to return.`);return Ns(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new ku(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new ku(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ns(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Dn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Dn(this.inputSpec);if(n.length!==r.length)throw new ne(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let o=0;o<n.length;o++){const s=n[o],i=r[o];if(i==null)continue;const a=s.rank;if(i.ndim!=null&&a!==i.ndim)throw new ne(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new ne(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new ne(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&s.dtype!==i.dtype)throw new ne(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${s.dtype}.`);if(i.axes){const u=s.shape;for(const l in i.axes){const c=Number(l),d=i.axes[l],f=c>=0?u[c]:u[u.length+c];if(d!=null&&[d,null].indexOf(f)===-1)throw new ne(`Input ${o} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${d} but got shape ${u}.`)}}if(i.shape!=null)for(let u=0;u<i.shape.length;++u){const l=i.shape[u],c=s.shape[u];if(l!=null&&c!=null&&l!==c)throw new ne(`Input ${o} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Dn(e),o=FAe(e),s=LAe(e);if(o===s)throw new ne("Arguments to apply() must be all SymbolicTensors or all Tensors");return oh(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of Dn(e))i.push(a.shape);this.build(Ns(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=Dn(i),u=[];for(let l of a)r.indexOf(l)!==-1&&(l=l.clone()),u.push(l);if(i=Ns(u),this.activityRegularizer!=null)throw new Lt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=MAe(e),a=this.computeOutputShape(i);let u;const l=PAe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?u=a.map((c,d)=>new rl(l,c,this,Dn(e),n,this.name,d)):u=new rl(l,a,this,Dn(e),n,this.name),this.addInboundNode(e,u,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new Lt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,o)=>{r!=null&&e[o]!=null&&e[o]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new ku(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new ku(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new ra(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return YC(this.weights)}build(e){this.built=!0}getWeights(e=!1){return mO(e?this.trainableWeights:this.weights)}setWeights(e){de(()=>{const n=this.weights;if(n.length!==e.length)throw new ne(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],o=mO(n);for(let s=0;s<o.length;++s){const i=o[s],a=n[s],u=e[s];if(!En(i.shape,u.shape))throw new ne(`Layer weight shape ${i.shape} not compatible with provided weight shape ${u.shape}`);r.push([a,u])}n3(r)})}addWeight(e,n,r,o,s,i,a,u){if(this._addedWeightNames.indexOf(e)!==-1)throw new ne(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(o=u!=null?u():sr("zeros"));const l=o.apply(n,r),c=new RAe(l,r,e,i,a);return l.dispose(),s!=null&&this.addLoss(()=>s.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Dn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const o=this.computeMask(e,r),s=Dn(n),i=Dn(o);if(s.length!==i.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=i[a]}addInboundNode(e,n,r,o,s,i,a=null){const u=Dn(e);n=Dn(n),r=Dn(r),o=Dn(o),s=GC(s),i=GC(i);const l=[],c=[],d=[];for(const f of u)l.push(f.sourceLayer),c.push(f.nodeIndex),d.push(f.tensorIndex);new v_({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:d,inputTensors:u,outputTensors:n,inputMasks:r,outputMasks:o,inputShapes:s,outputShapes:i},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function MAe(t){t=Dn(t);const e=[];for(const n of t)e.push(n.shape);return Ns(e)}function PAe(t){return"float32"}function QQ(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const o=[];for(let s=0;s<r.inboundLayers.length;s++){const i=r.inputTensors[s],a=r.inboundLayers[s],u=r.nodeIndices[s],l=QQ(i,a,u);for(const c of l)o.indexOf(c)===-1&&o.push(c)}return o}}}function FAe(t){let e=!0;for(const n of Dn(t))if(!(n instanceof rl)){e=!1;break}return e}function LAe(t){let e=!0;for(const n of Dn(t))if(n instanceof rl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class B1 extends Yt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:m_("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ne("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ne("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ne("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const o=new rl(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new v_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ne(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}B1.className="InputLayer";Te(B1);function BAe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ne("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new B1({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jAe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ye(e,t.dtype)}catch{throw new ne(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class nd{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof nd)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=jAe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ne(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof rl){if(this.id2Value[e.id]==null)throw new ne(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof rl){if(this.id2Value[e.id]==null)throw new ne(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&qt(this.id2Mask)}}const qC=new $Q,KC=new $Q;function WAe(t){qC!=null&&qC.setMaxEntries(t),KC!=null&&KC.setMaxEntries(t)}function ty(t,e,n,r){const o=n==null?!1:n.training,s=Array.isArray(t),i=s?t:[t],a=i.map(p=>p.name),u=[],l=e.names();for(const p of a)l.indexOf(p)!==-1?u.push(e.getValue(p)):u.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=a.join(",")+"|"+e.names().sort().join(",");let d=qC.get(c),f;if(d==null){const p=zAe(i,e);d=p.sorted,f=p.recipientCounts,qC.put(c,d),KC.put(c,f)}f={},o||Object.assign(f,KC.get(c));const h=new nd(e);for(let p=0;p<d.length;++p){if(r!=null){const T=tO().numTensors;T>r.maxNumTensors&&(r.maxNumTensors=T),T<r.minNumTensors&&(r.minNumTensors=T)}const m=d[p],g=m.sourceLayer;if(g instanceof B1)continue;const v=[],y=[],x=[];let b=!1;for(const T of m.inputs){const N=h.getValue(T),O=h.getMask(T);v.push(N),y.push(O),O!=null&&(b=!0),o||(f[T.name]--,f[T.name]===0&&!e.hasKey(T)&&a.indexOf(T.name)===-1&&!N.isDisposed&&T.sourceLayer.stateful!==!0&&x.push(N))}b&&(n=n||{},n.mask=y[0]);const C=Dn(g.apply(v,n));let S=null;g.supportsMasking&&(S=g.computeMask(v,y));const E=VAe(m),I=Array.isArray(E)?E:[E];for(let T=0;T<I.length;++T){h.hasKey(I[T])||h.add(I[T],C[T],Array.isArray(S)?S[0]:S);const N=a.indexOf(I[T].name);N!==-1&&(u[N]=C[T])}o||qt(x)}return h.disposeMasks(),s?u:u[0]}function zAe(t,e){U(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const o=DU(t[0],e);n=o.sorted,r=o.recipientMap}else{const o=new Set;for(const s of t){const{sorted:i,recipientMap:a}=DU(s,e);for(const u of i)o.has(u.name)||(n.push(u),o.add(u.name));for(const u in a)r[u]==null&&(r[u]=new Set),a[u].forEach(l=>r[u].add(l))}}return{sorted:n,recipientCounts:UAe(r)}}function UAe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function DU(t,e){const n=new Set,r=[],o={};for(const a of e.names())n.add(a);const s=[],i=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const u=i[i.length-1]===s.length-1;if(a.inputs.length===0||u)s.pop(),r.push(a),n.add(a.name),u&&i.pop();else{i.push(s.length-1);for(const l of a.inputs)o[l.name]==null&&(o[l.name]=new Set),o[l.name].add(a.name),!n.has(l.name)&&s.push(l)}}return{sorted:r,recipientMap:o}}function VAe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const o of t.sourceLayer.inboundNodes[r].outputTensors)if(o.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe=fe();HAe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,WAe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r3(t,e){return de(()=>ys(yt(se(t,t),e,!0)))}class j1 extends jg{getConfig(){return{}}}class JQ extends j1{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return de(()=>{const n=r3(e,this.axis),r=Di(n,0,this.maxValue);return se(e,kt(r,De(eo(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}JQ.className="MaxNorm";Te(JQ);class ZQ extends j1{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return de(()=>kt(e,De(eo(),r3(e,this.axis))))}getConfig(){return{axis:this.axis}}}ZQ.className="UnitNorm";Te(ZQ);class eJ extends j1{apply(e){return Xh(e)}}eJ.className="NonNeg";Te(eJ);class tJ extends j1{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return de(()=>{const n=r3(e,this.axis),r=De(se(this.rate,Di(n,this.minValue,this.maxValue)),se(1-this.rate,n));return se(e,kt(r,De(eo(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}tJ.className="MinMaxNorm";Te(tJ);const RU={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ro(t){return GF(t)}function OU(t,e={}){return M1(t,Xi.getMap().classNameMap,e,"constraint")}function oo(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in RU?RU[t]:t,config:{}};return OU(n)}else return t instanceof j1?t:OU(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function wf(t){if(t==null)return;const e=[],n=[],r=[];for(const o in t){const s=t[o];if(typeof s!="number"){const i=s;e.push(i.data()),n.push(o),r.push(i)}}if(e.length>0){const o=await Promise.all(e);for(let s=0;s<o.length;++s)t[n[s]]=o[s][0];qt(r)}}function nJ(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var AU;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(AU||(AU={}));const GAe=125;class w0{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class YAe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class qAe extends w0{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const o in n){const s=n[o];if(typeof s=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+s*r;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;const a=de(()=>De(this.totals[o],se(s,r)));this.totals[o]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:de(()=>{const o=se(kt(1,this.seen),this.totals[r]);n[r]=o,this.totals[r].dispose(),Vu(n[r])}))}}class KAe extends w0{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const i=this.history[s];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const u=i[a];e.push(u.data()),n.push(s),r.push(a)}}const o=await Promise.all(e);for(let s=0;s<o.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=o[s][0]}}class XAe extends w0{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||aQ,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=GAe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");UR(this.yieldEvery)&&(this.maybeWait=lAe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const o=[];this.yield!=null&&(await wf(r),o.push(this.yield(e,n,r))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await wf(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await wf(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await wf(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await wf(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):UR(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await wf(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await wf(e),await this.trainEnd(e))}}function rJ(t,e){return t==null&&(t={}),t instanceof w0?[t]:Array.isArray(t)&&t[0]instanceof w0?t:Dn(t).map(r=>new XAe(r,e))}class Ui{constructor(){}static registerCallbackConstructor(e,n){U(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ui.checkForDuplicate(n),Ui.constructors[e]==null&&(Ui.constructors[e]=[]),Ui.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Ui.constructors)Ui.constructors[+n].forEach(o=>{if(o===e)throw new ne("Duplicate callback constructor.")})}static clear(){Ui.constructors={}}static createCallbacks(e){const n=[];for(const r in Ui.constructors){const o=+r;e>=o&&n.push(...Ui.constructors[o])}return n.map(r=>new r)}}Ui.constructors={};function oJ(t,e,n,r,o,s,i,a,u){const l=new KAe,c=[new qAe,...Ui.createCallbacks(e)];t!=null&&c.push(...t),c.push(l);const d=new YAe(c);return d.setParams({epochs:n,initialEpoch:r,samples:o,steps:s,batchSize:i,verbose:e,doValidation:a,metrics:u}),{callbackList:d,history:l}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ql(t,e={},n=!1){return M1(t,Xi.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XC(t,e){return de(()=>{t.dtype!=="float32"&&(t=Ye(t,"float32"));const n=yt(F1(t),e,!0),r=a_(n.shape,eo()),o=ys(uf(n,r));return kt(t,o)})}function y_(t,e){return de(()=>Hr(F1(Ct(e,t)),-1))}function o3(t,e){return de(()=>Hr(os(Ct(e,t)),-1))}function s3(t,e){return de(()=>{const n=Ct(t,e),r=Di(os(t),eo(),Number.MAX_VALUE),o=os(kt(n,r));return se(100,Hr(o,-1))})}function QAe(t,e){return de(()=>{const n=Di(e,eo(),Number.MAX_VALUE),r=nl(De(1,n)),o=Di(t,eo(),Number.MAX_VALUE),s=nl(De(1,o));return Hr(F1(Ct(r,s)),-1)})}function JAe(t,e){return de(()=>{const n=uf(0,Ct(1,se(t,e)));return Hr(F1(n),-1)})}function ZAe(t,e){return de(()=>{const n=uf(0,Ct(1,se(t,e)));return Hr(n,-1)})}function e$e(t,e){return de(()=>{const n=yt(se(t,e),-1),r=Ka(se(Ct(1,t),e),-1);return uf(0,De(1,Ct(r,n)))})}function t$e(t,e){return de(()=>{const n=Math.log(2),r=Ct(e,t),o=Ct(De(r,T1(se(-2,r))),n);return Hr(o,-1)})}function k0(t,e,n=!1){return de(()=>{if(n)e=lF(e);else{const r=yt(e,e.shape.length-1,!0);e=kt(e,r)}return e=Di(e,eo(),1-eo()),Mr(yt(se(Ye(t,"float32"),nl(e)),e.shape.length-1))})}function QC(t,e,n=!1){return de(()=>{const r=Ye(c_(wAe(t)),"int32");e=Di(e,eo(),1-eo());const o=e.shape,s=ae(NX(r,o[o.length-1]),o);return k0(s,e,n)})}function n$e(t,e){if(!En(t.shape,e.shape))throw new ne(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return de(()=>{const n=Xh(e),r=Mr(os(e));return De(Ct(n,se(e,t)),EX(tl(r)))})}function x_(t,e){return de(()=>{let n;return n=Di(e,eo(),1-eo()),n=nl(kt(n,Ct(1,n))),Hr(n$e(t,n),-1)})}function r$e(t,e){return de(()=>{const n=Di(t,eo(),1),r=Di(e,eo(),1);return yt(se(t,nl(kt(n,r))),-1)})}function o$e(t,e){return de(()=>{const n=nl(De(eo(),e));return Hr(Ct(e,se(t,n)),-1)})}function sJ(t,e){return de(()=>{const n=XC(t,-1),r=XC(e,-1),o=se(n,r);return Mr(yt(o,-1))})}const JC={meanSquaredError:y_,meanAbsoluteError:o3,meanAbsolutePercentageError:s3,meanSquaredLogarithmicError:QAe,squaredHinge:JAe,hinge:ZAe,categoricalHinge:e$e,logcosh:t$e,categoricalCrossentropy:k0,sparseCategoricalCrossentropy:QC,binaryCrossentropy:x_,kullbackLeiblerDivergence:r$e,poisson:o$e,cosineProximity:sJ};function nN(t){if(typeof t=="string"){if(t in JC)return JC[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ne(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iJ(t,e){return de(()=>{const n=se(.5,ma(e)),r=Gu($i(e,n),t.dtype);return Hr(el(t,r),-1)})}function aJ(t,e){return de(()=>Gu(el(g0(t,-1),g0(e,-1)),"float32"))}function s$e(t,e){return de(()=>Ye(yt(sc(el(t,1),el(e,1))),"float32"))}function i$e(t,e){return de(()=>Ye(yt(sc(el(t,0),el(e,1))),"float32"))}function a$e(t,e){return de(()=>{const n=s$e(t,e),r=i$e(t,e),o=De(n,r);return Ye(ms($i(o,0),kt(n,o),0),"float32")})}function u$e(t,e){return x_(t,e)}function l$e(t,e){return t.rank===e.rank&&(t=D1(t,[t.rank-1])),e=g0(e,-1),e.dtype!==t.dtype&&(e=Ye(e,t.dtype)),Ye(el(t,e),"float32")}const c$e=y_,d$e=y_,f$e=o3,h$e=o3,p$e=s3,m$e=s3,uJ=k0,g$e=sJ,lJ=QC,ZC={binaryAccuracy:iJ,categoricalAccuracy:aJ,precision:a$e,categoricalCrossentropy:uJ,sparseCategoricalCrossentropy:lJ,mse:c$e,MSE:d$e,mae:f$e,MAE:h$e,mape:p$e,MAPE:m$e,cosine:g$e};function v$e(t){if(typeof t=="string"&&t in ZC)return ZC[t];if(typeof t!="string"&&t!=null)return t;throw new ne(`Unknown metric ${t}`)}function iw(t){if(Cu(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(JC))if(JC[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(ZC))if(ZC[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function y$e(t){const e={Adagrad:()=>Cp.adagrad(.01),Adadelta:()=>Cp.adadelta(1,.95,eo()),Adam:()=>Cp.adam(.001,.9,.999,eo()),Adamax:()=>Cp.adamax(.002,.9,.999,eo(),0),RMSProp:()=>Cp.rmsprop(.001,.9,0,eo()),SGD:()=>Cp.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ne(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const $U=1*1024*1024;function MU(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!gO(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>$U&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${$U}.`)}}function gO(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!gO(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!gO(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x$e(t,e,n,r=console.log){const o=w$e(t),s=["Layer (type)","Input Shape","Output shape","Param #"];o?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let i;if(!o){s.push("Receives inputs"),i=[];for(const c in t.nodesByDepth)i.push(...t.nodesByDepth[c])}r("_".repeat(e)),e2(s,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)o?k$e(a[c],n,r):C$e(a[c],n,i,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const u=b$e(t),l=YC(t.nonTrainableWeights);r(`Total params: ${u+l}`),r(`Trainable params: ${u}`),r(`Non-trainable params: ${l}`),r("_".repeat(e))}function b$e(t){let e;return t.collectedTrainableWeights!=null?e=YC(t.collectedTrainableWeights):e=YC(t.trainableWeights),e}function w$e(t){let e=!0;const n=[],r=[];for(const o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){e=!1;break}r.push(...o)}if(e)for(const o of t.layers){let s=!1;for(const i of o.inboundNodes)if(r.indexOf(i)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function e2(t,e,n=console.log){let r="";for(let o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=t[o],r=r.slice(0,e[o]),r+=" ".repeat(e[o]-r.length);n(r)}function k$e(t,e,n){let r,o;try{o=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,i=t.getClassName(),a=[`${s} (${i})`,o,r,t.countParams().toString()];e2(a,e,n)}function C$e(t,e,n,r){let o,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const h=d.inboundLayers[f].name,p=d.nodeIndices[f],m=d.tensorIndices[f];i.push(`${h}[${p}][${m}]`)}const a=t.name,u=t.getClassName(),l=i.length===0?"":i[0],c=[`${a} (${u})`,s,o,t.countParams().toString(),l];e2(c,e,r);for(let d=1;d<i.length;++d)e2(["","","","",i[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cJ(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function vO(t,e){if(t===null)return null;if(typeof t=="string")return Of(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const s=t[o];cJ(e,o,s)?n.push(s):n.push(vO(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r];if(r==="name"&&typeof o=="string")n[r]=o;else{const s=Of(r);n[s]=vO(o,s)}}return n}}function yO(t,e){if(t==null)return null;if(typeof t=="string")return Ml(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const s=t[o];cJ(e,o,s)?n.push(s):n.push(yO(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r],s=Ml(r);(r==="name"||r==="className")&&typeof o=="string"?n[s]=o:n[s]=yO(o,r)}return n}}/** @license See the LICENSE file. */const dJ="4.17.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const S$e=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ia extends Yt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const y=this.getClassName().toLowerCase();this.name=m_(y)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Sd(this.inputs).length!==this.inputs.length)throw new ne(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(y=>y.name)}`);Sd(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(y=>y.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const x=y.sourceLayer,b=y.nodeIndex,C=y.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(b),this.outputLayersTensorIndices.push(C)}for(const y of this.inputs){const x=y.sourceLayer,b=y.nodeIndex,C=y.tensorIndex;Cu(b===0,"input layer has >1 nodes"),Cu(C===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(b),this.inputLayersTensorIndices.push(C)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const x=this.inputLayers[y];if(!(x instanceof B1))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(y=>y.shape),this.internalOutputShapes=this.outputs.map(y=>y.shape);const n={},r={},o={},s={},i={},a=[],u=(y,x,b,C,S,E)=>{(C==null||S==null||E==null)&&(C=y.sourceLayer,S=y.nodeIndex,E=y.tensorIndex);const I=C.inboundNodes[S];if(b.indexOf(I)!==-1)throw new ra(`The tensor ${y.name} at layer "${C.name}" is part of a cycle.`);if(x.indexOf(I)!==-1)return;this.containerNodes.add(Ia.nodeKey(C,S)),C.id in i||(i[C.id]=Object.keys(i).length),b.indexOf(I)===-1&&b.push(I);const T=I.inboundLayers.length;for(let N=0;N<T;N++){const O=I.inputTensors[N],$=I.inboundLayers[N],A=I.nodeIndices[N],P=I.tensorIndices[N];u(O,x,b,$,A,P)}for(x.push(I);b.indexOf(I)>=0;)b.splice(b.indexOf(I),1);a.push(I)},l=[],c=[];for(const y of this.outputs)u(y,l,c);const d=a.slice().reverse();for(const y of d){r[y.id]=y,y.id in n||(n[y.id]=0);let x=n[y.id];const b=o[y.outboundLayer.id]==null?0:o[y.outboundLayer.id];x=Math.max(x,b),o[y.outboundLayer.id]=x,s[y.outboundLayer.id]=y.outboundLayer,n[y.id]=x;for(let C=0;C<y.inboundLayers.length;C++){const S=y.inboundLayers[C],E=y.nodeIndices[C],I=S.inboundNodes[E],T=n[I.id]==null?0:n[I.id];n[I.id]=Math.max(x+1,T),r[I.id]=I}}const f={};for(const y in n){const x=n[y];x in f||(f[x]=[]),f[x].push(r[y])}const h={};for(const y in o){const x=o[y];x in h||(h[x]=[]),h[x].push(s[y])}let p=Object.keys(h).map(y=>parseInt(y,10)).sort(rw);this.layers=[];for(const y of p){const x=h[y];x.sort((b,C)=>{const S=i[b.id],E=i[C.id];return S<E?-1:S>E?1:0});for(const b of x)b instanceof Ia&&this.internalContainerRefs.push(b),this.layers.push(b)}this.layersByDepth=h,p=Object.keys(f).map(y=>parseInt(y,10)).sort(rw);const m=this.inputs.slice(),g=[];for(const y of p)for(const x of f[y]){const b=x.outboundLayer;if(b!=null){for(const C of x.inputTensors)if(m.indexOf(C)===-1)throw new ra(`Graph disconnected: cannot obtain value for tensor ${C} at layer "${b.name}". The following previous layers were accessed without issue: ${g}`);for(const C of x.outputTensors)m.push(C);g.push(b.name)}}this.nodesByDepth=f;const v=this.layers.map(y=>y.name);for(const y of v){const x=v.filter(b=>b===y).length;if(x!==1)throw new ra(`The name "${y}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new v_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(y=>null),outputMasks:this.outputs.map(y=>null),inputShapes:this.inputs.map(y=>y.shape),outputShapes:this.outputs.map(y=>y.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ne("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let o=0;const s=S$e(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[u,l]of a.weights.entries()){const c=s?`${l.name.split("/").slice(0,-1).join("/")+"/"}${u}`:l.originalName;if(r[c]!=null)throw new ne(`Duplicate weight name: ${c}`);r[c]=l,o++}const i=[];for(const a in e){let u=a;if(r[a]==null){const l=a.split("/");u=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(r[u]!=null)i.push([r[u],e[a]]);else if(n)throw new ne(`Provided weight data has no target variable: ${a}`);delete r[u]}if(n){const a=[];for(const u in r)a.push(u);if(a.length>0)throw new ne(`${a.length} of ${o} weights are not set: ${a}`)}n3(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),o=["vars","layer_checkpoint_dependencies"],s=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!o.includes(i)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${dJ}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=yO(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return de(()=>{e=Dn(e);const r=new nd;for(let o=0;o<this.inputs.length;++o)r.add(this.inputs[o],e[o]);return ty(this.outputs,r,n)})}computeMask(e,n){return de(()=>{e=Dn(e);let r;return n==null?r=Nh(null,e.length):r=Dn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=GC(e);if(n.length!==this.inputLayers.length)throw new ne(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const u=this.inputLayers[a],l=n[a],c=u.name+"_0_0";r[c]=l}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(rw);if(o.length>1)for(const a of o){const u=this.nodesByDepth[a];for(const l of u){const c=l.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const d=[];for(let m=0;m<l.inboundLayers.length;m++){const g=l.inboundLayers[m],v=l.nodeIndices[m],y=l.tensorIndices[m],x=`${g.name}_${v}_${y}`,b=r[x];d.push(b)}const f=c.computeOutputShape(Ns(d)),h=GC(f),p=c.inboundNodes.indexOf(l);for(let m=0;m<h.length;m++){const g=`${c.name}_${p}_${m}`;r[g]=h[m]}}}const s=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const u=this.outputLayers[a],l=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${u.name}_${l}_${c}`;i.push(d)}for(let a=0;a<i.length;a++){const u=i[a];Cu(u in r),s.push(r[u])}return Ns(s)}runInternalGraph(e,n){n==null&&(n=Nh(null,e.length));const r={};for(let u=0;u<this.inputs.length;++u){const l=this.inputs[u],c=e[u],d=n[u];r[l.id]=[c,d]}const o=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(rw);for(const u of o){const l=this.nodesByDepth[u];for(const c of l){const d=c.outboundLayer,f=c.inputTensors,h=c.outputTensors,p=new Array;for(const m of f)m.id in r&&p.push(r[m.id]);if(p.length===f.length){let m={},g,v,y,x;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[b,C]=p[0];m.mask==null&&(m.mask=C),y=Dn(d.call(b,m)),x=Dn(d.computeMask(b,C)),g=[b],v=[C]}else g=p.map(b=>b[0]),v=p.map(b=>b[1]),m.mask==null&&(m.mask=v),y=Dn(d.call(g,m)),x=Dn(d.computeMask(g,v));if(d.activityRegularizer)throw new Lt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let b=0;b<h.length;++b){const C=h[b],S=y[b],E=x[b];r[C.id]=[S,E]}}}}const s=[],i=[],a=[];for(const u of this.outputs){Cu(u.id in r,`Could not compute output ${u.name} : ${u.id}`);const[l,c]=r[u.id];a.push(l.shape),s.push(l),i.push(c)}return[s,i,a]}buildNodeConversionMap(e){const n={};let r;for(const o of this.layers){r=o instanceof Ia?1:0;for(let s=0;s<o.inboundNodes.length;s++){const i=Ia.nodeKey(o,s);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ne("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ne(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ne(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return de(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const o=Ia.nodeKey(n,r);this.containerNodes.has(o)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const a=i.getClassName(),u=i.getConfig(),l=[];for(let d=0;d<i.inboundNodes.length;d++){const f=i.inboundNodes[d],h=Ia.nodeKey(i,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const m=[];for(let g=0;g<f.inboundLayers.length;g++){const v=f.inboundLayers[g],y=f.nodeIndices[g],x=f.tensorIndices[g],b=Ia.nodeKey(v,y);let C=n[b];C==null&&(C=0),m.push([v.name,C,x,p])}l.push(m)}}}const c={};c.name=i.name,c.className=a,c.config=u,c.inboundNodes=l,r.push(c)}e.layers=r;const o=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],u=this.inputLayersNodeIndices[i],l=Ia.nodeKey(a,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const d=this.inputLayersTensorIndices[i];o.push([a.name,c,d])}e.inputLayers=o;const s=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],u=this.outputLayersNodeIndices[i],l=Ia.nodeKey(a,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const d=this.outputLayersTensorIndices[i];s.push([a.name,c,d])}return e.outputLayers=s,e}static fromConfig(e,n,r={},o=!1){const s={},i={};function a(g,v){g.name in i?i[g.name].push(v):i[g.name]=[v]}function u(g,v){const y=[];let x;for(const b of v){const C=b[0],S=b[1],E=b[2];if(x=b[3]==null?{}:b[3],!(C in s)){a(g,v);return}const I=s[C];if(I.inboundNodes.length<=S){a(g,v);return}const T=I.inboundNodes[S];y.push(T.outputTensors[E])}y.length>0&&g.apply(Ns(y),x)}function l(g){const v=g.name,y=ql(g,n.customObjects!=null?n.customObjects:{});y.setFastWeightInitDuringBuild(o),s[v]=y,g.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new ne(`Corrupted configuration, expected array for nodeData: ${b}`);a(y,b)})}const c=n.name,d=n.layers;for(const g of d)l(g);for(;!uAe(i);)for(const g of d){const v=s[g.name];if(v.name in i){const y=i[v.name];delete i[v.name];for(const x of y)u(v,x)}}const f=[],h=[],p=n.inputLayers;for(const g of p){const v=g[0],y=g[1],x=g[2];Cu(v in s);const C=s[v].inboundNodes[y].outputTensors;f.push(C[x])}const m=n.outputLayers;for(const g of m){const v=g[0],y=g[1],x=g[2];Cu(v in s);const C=s[v].inboundNodes[y].outputTensors;h.push(C[x])}return new e({inputs:f,outputs:h,name:c})}get stateful(){if(this._stateful)throw new ne("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){de(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E$e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(o=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const o=[];return e.forEach(s=>{s in t?o.push(t[s]):o.push(null)}),o}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function fJ(t,e){return E$e(t,e,"classWeight")}async function hJ(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const o=de(()=>{if(t.shape.length===1)return rh(t);if(t.shape.length===2){if(t.shape[1]>1)return g0(t,1);if(t.shape[1]===1)return ae(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await o.data());qt(o);const i=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),Xs(i,"float32")}else return null}function _$e(t,e){return se(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const I$e=32;function pJ(t,e){let n,r;const o=e;n=o.xs,r=o.ys,U(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=PU("input",t.inputNames,n),i=PU("output",t.outputNames,r),a=s[0].shape[0];U(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),U(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<s.length;u++)U(s[u].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${s[u].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let u=0;u<i.length;u++)U(i[u].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${i[u].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:i}}function PU(t,e,n){if(n instanceof Qr)return[n];if(Array.isArray(n))return U(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const o of e){if(n[o]==null)throw new ne(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);r.push(n[o])}return r}}function T$e(t){if(t.length===3)throw new Lt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function N$e(t,e,n){const r=n.batchesPerEpoch!=null;if(U(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),U(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),U(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),U(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),U(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const o=n.validationData!=null;let s,i;if(o)if(FU(n.validationData))U(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=T$e(n.validationData);s=g.xs,i=g.ys}const a=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let l;o?l=u.slice().concat(u.map(g=>"val_"+g)):l=u.slice();const c=rJ(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=oJ(c,d,n.epochs,null,null,D$e(e,n),null,o,l);f.setModel(t),t.history=h,await f.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await f.onEpochBegin(p);let v=0,y=0;for(r||(m=await e.iterator());!r||v<n.batchesPerEpoch;){const x=await m.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:b,ys:C}=pJ(t,x.value),S={};S.batch=y,S.size=b[0].shape[0],await f.onBatchBegin(y,S);const E=[];if(n.classWeight!=null){const N=fJ(n.classWeight,t.outputNames);for(let O=0;O<N.length;++O)E.push(await hJ(C[O],null,N[O]))}const I=b.concat(C).concat(E),T=a(I);qt(I);for(let N=0;N<u.length;++N){const O=u[N],$=T[N];S[O]=$,Vu($)}await f.onBatchEnd(y,S),nJ(S),y++,v++}if(r?v>=n.batchesPerEpoch:x.done){if(o){let b;FU(n.validationData)?b=Dn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):b=Dn(t.evaluate(s,i,{batchSize:n.validationBatchSize==null?I$e:n.validationBatchSize,verbose:0}));for(let C=0;C<t.metricsNames.length;++C)g[`val_${t.metricsNames[C]}`]=b[C]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(p,g),p++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function D$e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function FU(t){return typeof t.iterator=="function"}function R$e(t){return typeof t.next=="function"}async function O$e(t,e,n){n=n||{};const r=n.batches!=null,o=t.testFunction;let s=[];if(n.verbose>0)throw new Lt("Verbose mode is not implemented yet.");U(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=R$e(e)?e:await e.iterator();let a=0,u=0;for(;!r||u<n.batches;){const l=await i.next();if(s=de(()=>{if(l.value){const{xs:c,ys:d}=pJ(t,l.value),f=c.concat(d),h=de(()=>o(f));if(qt(f),u===0)for(let m=0;m<h.length;++m)s.push(Cn(0));const p=f[0].shape[0];for(let m=0;m<h.length;++m){const g=h[m],v=s[m];s[m]=de(()=>De(s[m],se(p,g))),u>0&&qt(v)}qt(h),a+=p,++u}return s}),l.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let l=0;l<s.length;++l){const c=s[l];s[l]=kt(s[l],a),qt(c)}return Ns(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rN(t){U(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function $v(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>sh(r,e,n-e)):sh(t,e,n-e)}function xO(t,e){return de(()=>t==null?null:Array.isArray(t)?t.map(n=>xO(n,e)):zQ(t,e.dtype==="int32"?e:Ye(e,"int32")))}function oN(t,e){const n=[];let r=0,o=null;for(;r<t;)o=r+e,o>=t&&(o=t),n.push([r,o]),r=o;return n}function mJ(t){const e=[];t instanceof Qr&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(P1(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function _a(t,e){if(t==null)return;const n=[];if(e instanceof Qr)n.push(e.id);else if(Array.isArray(e))e.forEach(o=>n.push(o.id));else if(e!=null)for(const o in e){const s=e[o];n.push(s.id)}const r=[];if(t instanceof Qr)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(o=>{n.indexOf(o.id)===-1&&r.push(o)});else if(t!=null)for(const o in t){const s=t[o];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function A$e(t){return t instanceof Qr}function bO(t){return Array.isArray(t)}function LU(t){return!A$e(t)&&!bO(t)}function BU(t,e,n,r=!0,o=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(bO(t)&&t.length>0)i=!0;else if(LU(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new ne(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let s;if(LU(t)){t=t,s=[];for(const i of e){if(t[i]==null)throw new ne(`No data provided for "${i}". Need data for each key in: ${e}`);s.push(t[i])}}else if(bO(t)){if(t=t,t.length!==e.length)throw new ne(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new ne(`The model ${o} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=mJ(s),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=s[i];if(a.shape.length!==n[i].length)throw new ne(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let u=0;u<n[i].length;++u){if(u===0&&!r)continue;const l=a.shape[u],c=n[i][u];if(c!=null&&c>=0&&l!==c)throw new ne(`${o} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function $$e(t,e,n){const r=Sd(t.map(s=>s.shape[0]));r.sort();const o=Sd(e.map(s=>s.shape[0]));if(o.sort(),r.length>1)throw new ne(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(o.length>1)throw new ne(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&o.length>0&&!En(r,o))throw new ne(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${o[0]} target sample(s).`)}function M$e(t,e,n){const r=[y_,x_,k0];for(let o=0;o<t.length;++o){const s=t[o],i=e[o],a=n[o];if(i!=null){if(i===k0&&s.shape[s.shape.length-1]===1)throw new ne(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const u=s.shape.slice(1),l=a.slice(1);for(let c=0;c<u.length;++c){const d=u[c],f=l[c];if(f!=null&&d!==f)throw new ne(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function jU(t,e,n,r=!0,o=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new ne(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new ne(`The model expects ${e.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=s[i];if(a.shape.length!==n[i].length)throw new ne(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let u=0;u<n[i].length;++u){if(u===0&&!r)continue;const l=a.shape[u],c=n[i][u];if(c!=null&&c!==l)throw new ne(`Error when checking ${o}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function P$e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const o of e){let s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const F$e="layers-model";class ym extends Ia{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ne("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");x$e(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=y$e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof cf))throw new ne("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new ne(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(nN(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ne(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>nN(a))}else{const i=nN(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],u=this.outputNames[i];this.feedOutputNames.push(u),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],oh("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const o=P$e(e.metrics,this.outputNames),s=(i,a,u)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([u,i])};oh("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=o[i];(l=>{const c="";let d,f,h;for(const p of l){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[i];g[g.length-1]===1||this.lossFunctions[i]===x_?["accuracy","acc"].indexOf(p)!==-1?f=iJ:["crossentropy","ce"].indexOf(p)!==-1&&(f=u$e):this.lossFunctions[i]===QC?["accuracy","acc"].indexOf(p)!==-1?f=l$e:["crossentropy","ce"].indexOf(p)!==-1&&(f=lJ):["accuracy","acc"].indexOf(p)!==-1?f=aJ:["crossentropy","ce"].indexOf(p)!==-1&&(f=uJ);let v;["accuracy","acc"].indexOf(p)!==-1?v="acc":["crossentropy","ce"].indexOf(p)!==-1&&(v="ce"),h=f,d=c+v}else h=v$e(p),d=c+iw(p);let m;oh(d,()=>{m=h}),s(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const o=r.batchSize==null?32:r.batchSize;rN(o);const i=this.standardizeUserDataXY(e,n,!0,o);try{const a=i[0].concat(i[1]);this.makeTestFunction();const u=this.testFunction,l=this.testLoop(u,a,o,r.verbose,r.steps);return Ns(l)}finally{_a(i[0],e),_a(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),O$e(this,e,n)}checkNumSamples(e,n,r,o="steps"){let s;if(r!=null){if(s=null,n!=null)throw new ne(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new ne(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ne("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),o=r?n:[n],s=this.retrieveSymbolicTensors(o),i=new nd;if(e instanceof Qr&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ne(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let u=0;u<this.inputs.length;++u)i.add(this.inputs[u],e[u])}else for(const u of this.inputs){const l=e[u.name];if(l==null)throw new ne(`No value is provided for the model's input ${u.name}`);i.add(u,l)}const a=ty(s,i);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Nh(null,e.length);let r=e.length;for(const o of this.layers){const s=Array.isArray(o.output)?o.output:[o.output],i=s.map(a=>a.name);for(let a=0;a<e.length;++a){const u=i.indexOf(e[a]);if(u!==-1&&(n[a]=s[u],r--),r===0)break}if(r===0)break}if(r>0){const o=[];throw n.forEach((s,i)=>{s==null&&o.push(e[i])}),new ne(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(e,n=32,r=!1){return de(()=>{const o=this.checkNumSamples(e);if(r)throw new Lt("Verbose predictLoop() is not implemented yet.");const s=oN(o,n),i=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)de(()=>{const l=s[a][0],c=s[a][1],d=$v(e,l,c),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new nd(f);return ty(this.outputs,h)}).forEach((l,c)=>i[c].push(l));return Ns(i.map(a=>Os(a,0)))})}predict(e,n={}){const r=mJ(e);jU(r,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return rN(o),this.predictLoop(r,o)}finally{_a(r,e)}}predictOnBatch(e){jU(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,o){if(this.optimizer_==null)throw new ra("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===QC?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=BU(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=BU(n,this.feedOutputNames,s,!1,"target"),$$e(e,n),M$e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new ne(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,o,s=!0,i){const[a,u]=this.standardizeUserDataXY(e,n,s,i);if(r!=null)throw new Error("sample weight is not supported yet.");let l=null;if(o!=null){const c=fJ(o,this.outputNames);l=[];for(let d=0;d<c.length;++d)l.push(await hJ(u[d],null,c[d]))}return[a,u,l]}testLoop(e,n,r,o=0,s){return de(()=>{const i=this.checkNumSamples(n,r,s,"steps"),a=[];if(o>0)throw new Lt("Verbose mode is not implemented yet.");if(s!=null)throw new Lt("steps mode in testLoop() is not implemented yet");{const u=oN(i,r),l=Xs(eu(0,i));for(let c=0;c<u.length;++c){const d=u[c][0],f=u[c][1],h=sh(l,d,f-d),p=xO(n,h),m=e(p);if(c===0)for(let g=0;g<m.length;++g)a.push(Cn(0));for(let g=0;g<m.length;++g){const v=m[g];a[g]=De(a[g],se(f-d,v))}}for(let c=0;c<a.length;++c)a[c]=kt(a[c],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const o=e[r];let s=o;if(SU(e,o)>1){const i=SU(e.slice(0,r),o);s+=`_${i}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:r[m]});const f=new nd(d),h=ty(this.outputs,f,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let v=g(o[m],h[m]);s[m]!=null&&(v=_$e(v,s[m]));const y=Hr(v);n.push(y),m===0?p=v:p=De(p,v)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const v=this.metricsTensors[m][0],y=this.metricsTensors[m][1];g=Hr(v(o[y],h[y]))}Vu(g),i.push(g)}return p=Hr(p),this.calculateLosses().forEach(m=>{p=De(p,m)}),p},u=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,u)].concat(i)}}makeTestFunction(){this.testFunction=e=>de(()=>{const n=[];let r;const o=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let l=0;l<this.inputs.length;++l)i.push({key:this.inputs[l],value:o[l]});const a=new nd(i),u=ty(this.outputs,a);for(let l=0;l<this.lossFunctions.length;++l){const c=this.lossFunctions[l],d=Hr(c(s[l],u[l]));l===0?r=d:r=De(r,d),n.push(r)}for(let l=0;l<this.metricsTensors.length;++l){const c=this.metricsTensors[l][0],d=this.metricsTensors[l][1],f=Hr(c(s[d],u[d]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let o,s,i,a,u,l,c,d,f;try{const h=r.batchSize==null?32:r.batchSize;rN(h);const m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);o=m[0],s=m[1],f=m[2];let g=!1,v;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)u=r.validationData[0],l=r.validationData[1];else throw r.validationData.length===3?new Lt("validationData including sample weights is not supported yet."):new ne(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const N=await this.standardizeUserData(u,l,null,null,!0,h);c=N[0],d=N[1],v=c.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const T=Math.floor(o[0].shape[0]*(1-r.validationSplit)),N=o[0].shape[0];c=$v(o,T,N),i=o,o=$v(o,0,T),d=$v(s,T,N),a=s,s=$v(s,0,T),v=c.concat(d)}else r.validationSteps!=null&&(g=!0);const y=o.concat(s).concat(f);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let C,S;g?(this.makeTestFunction(),C=this.testFunction,S=b.slice().concat(b.map(T=>"val_"+T))):(C=null,v=[],S=b.slice());const E=rJ(r.callbacks,r.yieldEvery);return await this.fitLoop(x,y,b,h,r.epochs,r.verbose,E,C,v,r.shuffle,S,r.initialEpoch,null,null)}finally{this.isTraining=!1,_a(o,e),_a(s,n),_a(i,e),_a(a,n),_a(c,u),_a(d,l),f!=null&&qt(f)}}async fitLoop(e,n,r,o,s,i,a,u,l,c,d,f,h,p){o==null&&(o=32),s==null&&(s=1),c==null&&(c=!0),f==null&&(f=0);let m=!1;if(u!=null&&l!=null&&(m=!0),p!=null&&(m=!0,h==null))throw new ne("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,o,h,"steps_per_epoch");let v;g!=null&&(v=eu(0,g)),i==null&&(i=1);const{callbackList:y,history:x}=oJ(a,i,s,f,g,h,o,m,d);y.setModel(this),this.history=x,await y.onTrainBegin(),this.stopTraining_=!1;for(let b=f;b<s;++b){await y.onEpochBegin(b);const C={};if(h!=null)throw new Lt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Lt("batch shuffling is not implemneted yet");c&&wSe(v);const S=Xs(v),E=oN(g,o);for(let I=0;I<E.length;++I){const T={};if(await y.onBatchBegin(I,T),de(()=>{const N=E[I][0],O=E[I][1],$=sh(S,N,O-N);T.batch=I,T.size=O-N;const A=xO(n,$),P=e(A);for(let L=0;L<r.length;++L){const W=r[L],z=P[L];T[W]=z,Vu(z)}if(I===E.length-1&&m){const L=this.testLoop(u,l,o);for(let W=0;W<r.length;++W){const z=r[W],F=L[W];Vu(F),C["val_"+z]=F}}}),await y.onBatchEnd(I,T),nJ(T),this.stopTraining_)break}S.dispose()}if(await y.onEpochEnd(b,C),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return N$e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),o=r[0],s=r[1],a=this.makeTrainFunction()(o.concat(s)),u=[];for(const l of a){const c=await l.data();u.push(c[0])}return qt(a),_a(r[0],e),_a(r[1],n),Ns(u)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,o=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let i=0;i<o.length;++i)r&&!o[i].trainable||n.push({name:o[i].originalName,tensor:s[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=tO().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-tO().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ml(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Ml(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const o of n)if(typeof r[o]=="string")e[o]=Ml(r[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ml(iw(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ml(iw(e)));{const e={};for(const n in this.metrics)e[n]=Ml(iw(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=vO(e.optimizer_config),r=ql(n);let o;if(typeof e.loss=="string")o=Of(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(i=>Of(i));else if(e.loss!=null){o={};for(const i in e.loss)o[i]=Of(e.loss[i])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(i=>Of(i));else if(e.metrics!=null){s={};for(const i in e.metrics)s[i]=Of(e.metrics[i])}this.compile({loss:o,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const l=gEe(e);if(l.length===0)throw new ne(`Cannot find any save handlers for URL '${e}'`);if(l.length>1)throw new ne(`Found more than one (${l.length}) save handlers for URL '${e}'`);e=l[0]}if(e.save==null)throw new ne("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await uU(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:F$e,generatedBy:`TensorFlow.js tfjs-layers v${dJ}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const l="optimizer",{data:c,specs:d}=await uU(await this.optimizer.getWeights(),l);r.specs.push(...d),r.data=mEe([r.data,c])}return this.userDefinedMetadata!=null&&(MU(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){MU(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}ym.className="Model";Te(ym);class gJ extends ym{}gJ.className="Functional";Te(gJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class C0 extends ym{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:m_("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ne(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof C0||e instanceof ym;let r;if(n){if(r=e,r.outputs.length!==1)throw new ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ne("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ne("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=BAe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ne(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=QQ(this.outputs[0])}this.inboundNodes=[],new v_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Nh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(vn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ym({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new ra("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new ra("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new ra("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new ra("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},o=!1){let s,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ne("Legacy serialization format not supported yet.");s=n}else U(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof C0))throw new Lt(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const u of s){const c=ql(u,void 0,o);o&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new ne("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ne("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}C0.className="Sequential";Te(C0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Bs=class extends jg{getConfig(){return{}}};class vJ extends Bs{apply(e,n=1){return CAe(e,n)}}vJ.className="elu";Te(vJ);class yJ extends Bs{apply(e){return MX(e)}}yJ.className="selu";Te(yJ);class xJ extends Bs{apply(e){return Xh(e)}}xJ.className="relu";Te(xJ);class bJ extends Bs{apply(e){return de(()=>x0(6,Xh(e)))}}bJ.className="relu6";Te(bJ);class wJ extends Bs{apply(e){return e}}wJ.className="linear";Te(wJ);class kJ extends Bs{apply(e){return Fg(e)}}kJ.className="sigmoid";Te(kJ);class CJ extends Bs{apply(e){return EAe(e)}}CJ.className="hardSigmoid";Te(CJ);class SJ extends Bs{apply(e){return T1(e)}}SJ.className="softplus";Te(SJ);class EJ extends Bs{apply(e){return SAe(e)}}EJ.className="softsign";Te(EJ);class _J extends Bs{apply(e){return BP(e)}}_J.className="tanh";Te(_J);let i3=class extends Bs{apply(e,n=-1){return lF(e,n)}};i3.className="softmax";Te(i3);class IJ extends Bs{apply(e,n=-1){return _X(e,n)}}IJ.className="logSoftmax";Te(IJ);class TJ extends Bs{apply(e,n=1){return de(()=>se(Fg(se(e,n)),e))}}TJ.className="swish";Te(TJ);class NJ extends Bs{apply(e){return de(()=>se(e,BP(T1(e))))}}NJ.className="mish";Te(NJ);function Wd(t){return t.getClassName()}function sN(t,e={}){return M1(t,Xi.getMap().classNameMap,e,"activation")}function zd(t){if(t==null){const e={};return e.className="linear",e.config={},sN(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},sN(e)}else return t instanceof Bs?t:sN(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function L$e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class DJ extends jg{}class RJ extends DJ{constructor(e){super(),L$e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return de(()=>{let n=po([1]);return this.hasL1&&(n=De(n,yt(se(this.l1,os(e))))),this.hasL2&&(n=De(n,yt(se(this.l2,F1(e))))),ae(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}RJ.className="L1L2";Te(RJ);const WU={l1l2:"L1L2"};function jn(t){return GF(t)}function zU(t,e={}){return M1(t,Xi.getMap().classNameMap,e,"regularizer")}function ar(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in WU?WU[t]:t,config:{}};return zU(n)}else return t instanceof DJ?t:zU(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OJ extends Yt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Et(e);let r=Xh(e);return this.maxValue!=null&&(r=Di(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}OJ.className="ReLU";Te(OJ);class AJ extends Yt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Et(e);return YP(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}AJ.className="LeakyReLU";Te(AJ);class $J extends Yt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=sr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ar(e.alphaRegularizer),this.alphaConstraint=oo(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ne(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=vn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)r[o]=e[o];this.inputSpec=[new to({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Et(e),ZP(e,this.alpha.read())}getConfig(){const e={alphaInitializer:yr(this.alphaInitializer),alphaRegularizer:jn(this.alphaRegularizer),alphaConstraint:ro(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}$J.className="PReLU";Te($J);let MJ=class extends Yt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Lt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Et(e);return u_(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};MJ.className="ELU";Te(MJ);class PJ extends Yt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Et(e);return se(r,Ye($i(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}PJ.className="ThresholdedReLU";Te(PJ);class FJ extends Yt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new i3().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return de(()=>{let r=Et(e);const o=n.mask;if(o!=null){const s=se(Ct(lf(r.shape),Ye(o,r.dtype)),Cn(-1e9));r=De(r,s)}return this.axis instanceof Array?this.axis.length>1?tl(Ct(r,IX(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}FJ.className="Softmax";Te(FJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xm(t,e,n){if(typeof t=="number")return Nh(t,e);if(t.length!==e)throw new ne(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const o=t[r];if(!xAe(o))throw new ne(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function Xa(t,e,n,r,o=1){if(t==null)return t;const s=e+(e-1)*(o-1);let i;return n==="same"?i=t:i=t-s+1,Math.floor((i+r-1)/r)}function Su(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+jd([n-e,0]);else if(r==="same")t=t*e;else throw new ne(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a3(t,e){return de(()=>(jr(e),e==="channelsFirst"?cn(t,[0,2,3,1]):t))}function LJ(t,e){return de(()=>(jr(e),e==="channelsFirst"?cn(t,[0,2,3,4,1]):t))}function B$e(t,e,n,r=1,o="valid",s,i=1){return de(()=>{if(s==null&&(s=tu()),jr(s),t.shape.length!==3)throw new ne(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ne(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ne(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(s==="channelsFirst"&&(t=cn(t,[0,2,1])),o==="causal")throw new Lt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=vX(t,e,r,o==="same"?"same":"valid","NWC",i);return n!=null&&(a=uu(a,n)),a})}function UU(t,e,n,r=[1,1],o="valid",s,i,a=null){return de(()=>{if(s==null&&(s=tu()),jr(s),t.rank!==3&&t.rank!==4)throw new ne(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ne(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=a3(t,s);if(o==="causal")throw new Lt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=qNe({x:u,filter:e,strides:r,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(u=cn(u,[0,3,1,2])),u})}function j$e(t,e,n,r=[1,1,1],o="valid",s,i){return de(()=>{if(s==null&&(s=tu()),jr(s),t.rank!==4&&t.rank!==5)throw new ne(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ne(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=LJ(t,s);if(o==="causal")throw new Lt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=G_e(a,e,r,o==="same"?"same":"valid","NDHWC",i),n!=null&&(a=uu(a,n)),s==="channelsFirst"&&(a=cn(a,[0,4,1,2,3])),a})}class b_ extends Yt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",b_.verifyArgs(n),this.rank=e,go(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Lt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=xm(n.kernelSize,e,"kernelSize"),this.strides=xm(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Mi(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,jr(this.dataFormat),this.activation=zd(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=sr(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=oo(n.biasConstraint),this.biasRegularizer=ar(n.biasRegularizer),this.activityRegularizer=ar(n.activityRegularizer),this.dilationRate=xm(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ne(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ne(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ne(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Cu("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!YF(e.kernelSize,"number",1,3))throw new ne(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Wd(this.activation),useBias:this.useBias,biasInitializer:yr(this.biasInitializer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),biasConstraint:ro(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Wg extends b_{constructor(e,n){super(e,n),this.kernel=null,Wg.verifyArgs(n),this.filters=n.filters,go(this.filters,"filters"),this.kernelInitializer=sr(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=oo(n.kernelConstraint),this.kernelRegularizer=ar(n.kernelRegularizer)}build(e){e=vn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ne(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return de(()=>{e=Et(e);let r;const o=this.bias==null?null:this.bias.read(),s=PQ(this.activation.getClassName());if(s!=null&&this.rank===2)r=UU(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=B$e(e,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=UU(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=j$e(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Lt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=vn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const i=Xa(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(i)}let o=[e[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const e={filters:this.filters,kernelInitializer:yr(this.kernelInitializer),kernelRegularizer:jn(this.kernelRegularizer),kernelConstraint:ro(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ne(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class W1 extends Wg{constructor(e){super(2,e),W1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!YF(e.kernelSize,"number",1,2))throw new ne(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}W1.className="Conv2D";Te(W1);class z1 extends Wg{constructor(e){super(3,e),z1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ne(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}z1.className="Conv3D";Te(z1);class BJ extends W1{constructor(e){if(super(e),this.inputSpec=[new to({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ne(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=vn(e),e.length!==4)throw new ne("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ne("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new to({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return de(()=>{let r=Et(e);if(r.shape.length!==4)throw new ne(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,s=o[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const u=o[i],l=o[a],c=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=Su(u,f,c,this.padding),m=Su(l,h,d,this.padding),g=[s,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=cn(r,[0,2,3,1]));let v=yX(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=cn(v,[0,3,1,2])),this.bias!=null&&(v=uu(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(e){e=vn(e);const n=e.slice();let r,o,s;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3):(r=3,o=1,s=2);const i=this.kernelSize[0],a=this.kernelSize[1],u=this.strides[0],l=this.strides[1];return n[r]=this.filters,n[o]=Su(n[o],u,i,this.padding),n[s]=Su(n[s],l,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}BJ.className="Conv2DTranspose";Te(BJ);class jJ extends z1{constructor(e){if(super(e),this.inputSpec=[new to({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ne(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=vn(e),e.length!==5)throw new ne("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ne("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new to({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return de(()=>{let r=Et(e);if(r.shape.length!==5)throw new ne(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,s=o[0];let i,a,u;this.dataFormat==="channelsFirst"?(u=2,i=3,a=4):(u=1,i=2,a=3);const l=o[u],c=o[i],d=o[a],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],v=this.strides[2],y=Su(l,m,f,this.padding),x=Su(c,g,h,this.padding),b=Su(d,v,p,this.padding),C=[s,y,x,b,this.filters];this.dataFormat!=="channelsLast"&&(r=cn(r,[0,2,3,4,1]));let S=K_e(r,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=cn(S,[0,4,1,2,3])),this.bias!==null&&(S=uu(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=vn(e);const n=e.slice();let r,o,s,i;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3,i=4):(r=4,o=1,s=2,i=3);const a=this.kernelSize[0],u=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],d=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[o]=Su(n[o],c,a,this.padding),n[s]=Su(n[s],d,u,this.padding),n[i]=Su(n[i],f,l,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}jJ.className="Conv3DTranspose";Te(jJ);class WJ extends Wg{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ne("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ne("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ne(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=sr(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ar(n.depthwiseRegularizer),this.depthwiseConstraint=oo(n.depthwiseConstraint),this.pointwiseInitializer=sr(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ar(n.pointwiseRegularizer),this.pointwiseConstraint=oo(n.pointwiseConstraint)}build(e){if(e=vn(e),e.length<this.rank+2)throw new ne(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ne(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],o=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new to({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return de(()=>{e=Et(e);let r;if(this.rank===1)throw new Lt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=cn(e,[0,2,3,1])),r=PX(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=uu(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=cn(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=yr(this.depthwiseInitializer),e.pointwiseInitializer=yr(this.pointwiseInitializer),e.depthwiseRegularizer=jn(this.depthwiseRegularizer),e.pointwiseRegularizer=jn(this.pointwiseRegularizer),e.depthwiseConstraint=ro(this.depthwiseConstraint),e.pointwiseConstraint=ro(this.pointwiseConstraint),e}}WJ.className="SeparableConv";class zJ extends WJ{constructor(e){super(2,e)}}zJ.className="SeparableConv2D";Te(zJ);class w_ extends Wg{constructor(e){super(1,e),w_.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!YF(e.kernelSize,"number",1,1))throw new ne(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}w_.className="Conv1D";Te(w_);class UJ extends Yt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return de(()=>{if(e=Et(e),this.dataFormat==="channelsLast"){const r=sw(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return sw(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=sw(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return sw(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}UJ.className="Cropping2D";Te(UJ);class VJ extends Yt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,jr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,gAe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return de(()=>{let r=Et(e);const o=r.shape;if(this.dataFormat==="channelsFirst"){r=cn(r,[0,2,3,1]);const s=this.size[0]*o[2],i=this.size[1]*o[3],a=this.interpolation==="nearest"?zl.resizeNearestNeighbor(r,[s,i]):zl.resizeBilinear(r,[s,i]);return cn(a,[0,3,1,2])}else{const s=this.size[0]*o[1],i=this.size[1]*o[2];return this.interpolation==="nearest"?zl.resizeNearestNeighbor(r,[s,i]):zl.resizeBilinear(r,[s,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}VJ.className="UpSampling2D";Te(VJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function W$e(t,e,n=[1,1],r="valid",o,s){return de(()=>{o==null&&(o=tu()),jr(o);let i=a3(t,o);if(t.rank!==4)throw new ne(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ne(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=UP(i,e,n,r==="same"?"same":"valid","NHWC",s),o==="channelsFirst"&&(i=cn(i,[0,3,1,2])),i})}class HJ extends b_{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=sr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=oo(e.depthwiseConstraint),this.depthwiseRegularizer=ar(e.depthwiseRegularizer)}build(e){if(e=vn(e),e.length<4)throw new ne(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ne(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],o=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return de(()=>{e=Et(e);let r=W$e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=uu(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=vn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Xa(n,this.kernelSize[0],this.padding,this.strides[0]),i=Xa(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,s,i]:[e[0],s,i,o]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=yr(this.depthwiseInitializer),e.depthwiseRegularizer=jn(this.depthwiseRegularizer),e.depthwiseConstraint=ro(this.depthwiseRegularizer),e}}HJ.className="DepthwiseConv2D";Te(HJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GJ(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ne("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function o(s){return s==null||Array.isArray(s)?s:[s]}return e=o(e),n=o(n),{inputs:t,initialState:e,constants:n}}function YJ(t,e,n,r=!1,o,s,i=!1,a=!1){return de(()=>{const u=e.shape.length;if(u<3)throw new ne(`Input should be at least 3D, but is ${u}D.`);const l=[1,0].concat(eu(2,u));if(e=cn(e,l),s!=null)throw new Lt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=Ye(Ye(o,"bool"),"float32"),o.rank===u-1&&(o=Ts(o,-1)),o=cn(o,l)),r&&(e=Ih(e,0),o!=null&&(o=Ih(o,0)));const c=[];let d,f=n;const h=e.shape[0],p=Th(e);let m;o!=null&&(m=Th(o));for(let v=0;v<h;++v){const y=p[v],x=de(()=>t(y,f));if(o==null)d=x[0],f=x[1];else{const b=de(()=>{const C=m[v],S=Ct(ma(C),C),E=De(se(x[0],C),se(f[0],S)),I=f.map((T,N)=>De(se(x[1][N],C),se(T,S)));return{output:E,newStates:I}});d=b.output,f=b.newStates}a&&c.push(d)}let g;return a&&(g=ic(c,1)),[d,g,f]})}class df extends Yt{constructor(e){super(e);let n;if(e.cell==null)throw new ne("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new c3({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ne("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new to({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return eu(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){pO(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let o;if(this.returnSequences?o=[e[0],e[1],r]:o=[e[0],r],this.returnState){const s=[];for(const i of n)s.push([e[0],i]);return[o].concat(s)}else return o}computeMask(e,n){return de(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(s=>null);return[r].concat(o)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Lt("Constants support is not implemented in RNN yet.");pO(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new to({shape:[n,null,...r]});const o=[e[0]].concat(e.slice(2));this.cell.build(o);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!En(this.stateSpec.map(i=>i.shape[i.shape.length-1]),s))throw new ne(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(i=>new to({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){de(()=>{if(!this.stateful)throw new ku("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>po([r,o])):this.states_=[po([r,this.cell.stateSize])];else if(e==null)qt(this.states_),this.keptStates!=null&&(qt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>po([r,o])):this.states_[0]=po([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):qt(this.states_);for(let o=0;o<this.states_.length;++o){const s=e[o],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[r,i];if(!En(s.shape,a))throw new ne(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[o]=s}}this.states_=this.states_.map(o=>Vu(o.clone()))})}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const s=GJ(e,r,o,this.numConstants);e=s.inputs,r=s.initialState,o=s.constants;let i=[],a=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const l of r)this.stateSpec.push(new to({shape:l.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,i=i.concat(o),this.numConstants=o.length),i[0]instanceof rl){const l=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(l,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return de(()=>{const r=n==null?null:n.mask,o=n==null?null:n.training;let s=n==null?null:n.initialState;e=Et(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==i)throw new ne(`RNN Layer has ${i} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},l=YJ((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),c=l[0],d=l[1],f=l[2];this.stateful&&this.resetStates(f,o);const h=this.returnSequences?d:c;return this.returnState?[h].concat(f):h})}getInitialState(e){return de(()=>{let n=po(e.shape);return n=yt(n,[1,2]),n=P1(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?fO(n,[1,r]):n):this.cell.stateSize>1?[fO(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===df.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const o=n.cell,s=ql(o,r);return new e(Object.assign(n,{cell:s}))}}df.className="RNN";Te(df);class k_ extends Yt{}class u3 extends k_{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,go(this.units,"units"),this.activation=zd(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ar(e.kernelRegularizer),this.recurrentRegularizer=ar(e.recurrentRegularizer),this.biasRegularizer=ar(e.biasRegularizer),this.kernelConstraint=oo(e.kernelConstraint),this.recurrentConstraint=oo(e.recurrentConstraint),this.biasConstraint=oo(e.biasConstraint),this.dropout=dg([1,jd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=dg([1,jd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=vn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return de(()=>{if(e=e,e.length!==2)throw new ne(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ud({ones:()=>ma(e),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ud({ones:()=>ma(r),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let s;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?s=Yu(se(e,i),this.kernel.read()):s=Yu(e,this.kernel.read()),this.bias!=null&&(s=uu(s,this.bias.read())),a!=null&&(r=se(r,a));let u=De(s,Yu(r,this.recurrentKernel.read()));return this.activation!=null&&(u=this.activation.apply(u)),[u,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Wd(this.activation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:ro(this.kernelConstraint),recurrentConstraint:ro(this.recurrentConstraint),biasConstraint:ro(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}u3.className="SimpleRNNCell";Te(u3);class qJ extends df{constructor(e){e.cell=new u3(e),super(e)}call(e,n){return de(()=>{this.cell.dropoutMask!=null&&(qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return new e(n)}}qJ.className="SimpleRNN";Te(qJ);class l3 extends k_{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ne("GRUCell does not support reset_after parameter set to true.");this.units=e.units,go(this.units,"units"),this.activation=zd(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=zd(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ar(e.kernelRegularizer),this.recurrentRegularizer=ar(e.recurrentRegularizer),this.biasRegularizer=ar(e.biasRegularizer),this.kernelConstraint=oo(e.kernelConstraint),this.recurrentConstraint=oo(e.recurrentConstraint),this.biasConstraint=oo(e.biasConstraint),this.dropout=dg([1,jd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=dg([1,jd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=vn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return de(()=>{if(e=e,e.length!==2)throw new ne(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ud({ones:()=>ma(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ud({ones:()=>ma(o),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=this.recurrentDropoutMask;let a,u,l;0<this.dropout&&this.dropout<1&&(e=se(e,s[0]));let c=Yu(e,this.kernel.read());this.useBias&&(c=uu(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=se(o,i[0]));const d=this.recurrentKernel.read(),[f,h]=_i(d,[2*this.units,this.units],d.rank-1),p=Yu(o,f),[m,g,v]=_i(c,3,c.rank-1),[y,x]=_i(p,2,p.rank-1);a=this.recurrentActivation.apply(De(m,y)),u=this.recurrentActivation.apply(De(g,x));const b=Yu(se(u,o),h);l=this.activation.apply(De(v,b));const C=De(se(a,o),se(De(1,Mr(a)),l));return[C,C]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Wd(this.activation),recurrentActivation:Wd(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:ro(this.kernelConstraint),recurrentConstraint:ro(this.recurrentConstraint),biasConstraint:ro(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}l3.className="GRUCell";Te(l3);class KJ extends df{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new l3(e),super(e)}call(e,n){return de(()=>{this.cell.dropoutMask!=null&&(qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}KJ.className="GRU";Te(KJ);class C_ extends k_{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,go(this.units,"units"),this.activation=zd(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=zd(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=sr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=ar(e.kernelRegularizer),this.recurrentRegularizer=ar(e.recurrentRegularizer),this.biasRegularizer=ar(e.biasRegularizer),this.kernelConstraint=oo(e.kernelConstraint),this.recurrentConstraint=oo(e.recurrentConstraint),this.biasConstraint=oo(e.biasConstraint),this.dropout=dg([1,jd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=dg([1,jd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=vn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,i=this.units;o=new(n=class extends ya{apply(u,l){const c=s.apply([i]),d=new KF().apply([i]),f=s.apply([i*2]);return _U(_U(c,d),f)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return de(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ne(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ud({ones:()=>ma(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ud({ones:()=>ma(o),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let u,l,c,d;0<this.dropout&&this.dropout<1&&(e=se(e,i[0]));let f=Yu(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=se(o,a[0])),f=De(f,Yu(o,this.recurrentKernel.read())),this.useBias&&(f=uu(f,this.bias.read()));const[h,p,m,g]=_i(f,4,f.rank-1);u=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(p),c=De(se(l,s),se(u,this.activation.apply(m))),d=this.recurrentActivation.apply(g);const v=se(d,this.activation.apply(c));return[v,v,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Wd(this.activation),recurrentActivation:Wd(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jn(this.kernelRegularizer),recurrentRegularizer:jn(this.recurrentRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:ro(this.kernelConstraint),recurrentConstraint:ro(this.recurrentConstraint),biasConstraint:ro(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}C_.className="LSTMCell";Te(C_);class XJ extends df{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new C_(e),super(e)}call(e,n){return de(()=>{this.cell.dropoutMask!=null&&(qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}XJ.className="LSTM";Te(XJ);class c3 extends k_{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return de(()=>{e=e;let r=e.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(r.splice(0,a.stateSize.length)):o.push(r.splice(0,1));o.reverse();const s=[];let i;for(let a=0;a<this.cells.length;++a){const u=this.cells[a];r=o[a],a===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=u.call(i,n),s.push(i.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[i[0]].concat(r)})}build(e){pO(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,o)=>{oh(`RNNCell_${o}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),o={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),o)}static fromConfig(e,n,r={}){const o=[];for(const s of n.cells)o.push(ql(s,r));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return mO(e)}setWeights(e){const n=[];for(const r of this.cells){const o=r.weights.length,s=e.splice(o);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],s[i]])}n3(n)}}c3.className="StackedRNNCells";Te(c3);function Ud(t){const{ones:e,rate:n,training:r=!1,count:o=1,dropoutFunc:s}=t,i=()=>s!=null?s(e(),n):UQ(e(),n),a=()=>L1(i,e,r);return!o||o<=1?Vu(a().clone()):Array(o).fill(void 0).map(a).map(l=>Vu(l.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var z$e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class QJ extends df{constructor(e){if(e.unroll)throw new Lt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Lt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new to({ndim:5})]}call(e,n){return de(()=>{if(this.cell.dropoutMask!=null&&(qt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ne("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return de(()=>{const{stateSize:n}=this.cell,r=e.shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)],i=po(s);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){de(()=>{if(!this.stateful)throw new ku("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)];if(r[0]==null)throw new ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>po(s)):this.states_=[po(s)];else if(e==null)qt(this.states_),this.keptStates!=null&&(qt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>po(s)):this.states_[0]=po(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):qt(this.states_);for(let a=0;a<this.states_.length;++a){const u=e[a],l=s;if(!En(u.shape,l))throw new ne(`State ${a} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${u.shape}`);this.states_[a]=u}}this.states_=this.states_.map(a=>Vu(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:o,padding:s,strides:i,dilationRate:a}=this.cell,u=n==="channelsFirst",l=e[u?3:2],c=e[u?4:3],d=Xa(l,o[0],s,i[0],a[0]),f=Xa(c,o[1],s,i[1],a[1]);return[...e.slice(0,2),...u?[r,d,f]:[d,f,r]]}}QJ.className="ConvRNN2D";class d3 extends C_{constructor(e){const{filters:n,kernelSize:r,strides:o,padding:s,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,go(this.filters,"filters"),this.kernelSize=xm(r,2,"kernelSize"),this.kernelSize.forEach(u=>go(u,"kernelSize")),this.strides=xm(o||1,2,"strides"),this.strides.forEach(u=>go(u,"strides")),this.padding=s||"valid",Mi(this.padding),this.dataFormat=i||"channelsLast",jr(this.dataFormat),this.dilationRate=xm(a||1,2,"dilationRate"),this.dilationRate.forEach(u=>go(u,"dilationRate"))}build(e){var n;e=vn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ne(`The channel dimension of the input should be defined. Found ${e[r]}`);const o=e[r],s=4,i=this.kernelSize.concat([o,this.filters*s]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let u;if(this.unitForgetBias){const l=this.biasInitializer,c=this.filters;u=new(n=class extends ya{apply(f,h){const p=l.apply([c]),m=lf([c]),g=l.apply([c*2]);return qF([p,m,g])}},n.className="CustomInit",n)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return de(()=>{if(e.length!==3)throw new ne(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,o=e[0],s=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ud({ones:()=>ma(o),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const u=this.dropoutMask,l=(H,X,te)=>!X||!X[te]?H:se(X[te],H);let c=l(o,u,0),d=l(o,u,1),f=l(o,u,2),h=l(o,u,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ud({ones:()=>ma(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=l(s,p,0),g=l(s,p,1),v=l(s,p,2),y=l(s,p,3);const x=3,[b,C,S,E]=_i(this.kernel.read(),a,x),[I,T,N,O]=this.useBias?_i(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,b,I,this.padding),d=this.inputConv(d,C,T,this.padding),f=this.inputConv(f,S,N,this.padding),h=this.inputConv(h,E,O,this.padding);const[$,A,P,L]=_i(this.recurrentKernel.read(),a,x);m=this.recurrentConv(m,$),g=this.recurrentConv(g,A),v=this.recurrentConv(v,P),y=this.recurrentConv(y,L);const W=this.recurrentActivation.apply(De(c,m)),z=this.recurrentActivation.apply(De(d,g)),F=De(se(z,i),se(W,this.activation.apply(De(f,v)))),B=se(this.recurrentActivation.apply(De(h,y)),this.activation.apply(F));return[B,B,F]})}getConfig(){const e=super.getConfig(),n=z$e(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,o){const s=_h(e,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?uu(s,r,this.dataFormat):s}recurrentConv(e,n){return _h(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}d3.className="ConvLSTM2DCell";Te(d3);class JJ extends QJ{constructor(e){const n=new d3(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}JJ.className="ConvLSTM2D";Te(JJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class f3 extends Yt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let o=0;o<this.noiseShape.length;++o)r.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return r}call(e,n){return de(()=>{this.invokeCallHook(e,n);const r=Et(e);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,s=this.getNoiseShape(r);return L1(()=>UQ(r,this.rate,s,this.seed),()=>r,o)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}f3.className="Dropout";Te(f3);class ZJ extends f3{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}ZJ.className="SpatialDropout1D";Te(ZJ);class eZ extends Yt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,go(this.units,"units"),this.activation=zd(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=sr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=sr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=oo(e.kernelConstraint),this.biasConstraint=oo(e.biasConstraint),this.kernelRegularizer=ar(e.kernelRegularizer),this.biasRegularizer=ar(e.biasRegularizer),this.activityRegularizer=ar(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=vn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=vn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return de(()=>{this.invokeCallHook(e,n);const r=Et(e),o=PQ(this.activation.getClassName());let s;return o!=null?s=Yu(r,this.kernel.read(),o,this.bias?this.bias.read():null):(s=Yu(r,this.kernel.read()),this.bias!=null&&(s=uu(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:Wd(this.activation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:jn(this.kernelRegularizer),biasRegularizer:jn(this.biasRegularizer),activityRegularizer:jn(this.activityRegularizer),kernelConstraint:ro(this.kernelConstraint),biasConstraint:ro(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}eZ.className="Dense";Te(eZ);class tZ extends Yt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=vn(e);for(const n of e.slice(1))if(n==null)throw new ne(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ed(e,1)]}call(e,n){return de(()=>{this.invokeCallHook(e,n);let r=Et(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const o=[0];for(let s=2;s<r.rank;++s)o.push(s);o.push(1),r=cn(r,o)}return kAe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}tZ.className="Flatten";Te(tZ);class nZ extends Yt{constructor(e){super(e),this.supportsMasking=!0,this.activation=zd(e.activation)}call(e,n){return de(()=>{this.invokeCallHook(e,n);const r=Et(e);return this.activation.apply(r)})}getConfig(){const e={activation:Wd(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}nZ.className="Activation";Te(nZ);class rZ extends Yt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return de(()=>(e=Et(e),bAe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}rZ.className="RepeatVector";Te(rZ);class oZ extends Yt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",o=n.slice();let s=1,i=null;for(let u=0;u<o.length;++u){const l=o[u];if(this.isUnknown(l))if(i===null)i=u;else throw new ne("Can only specifiy one unknown dimension.");else s*=l}const a=Ed(e);if(i!==null){if(s===0||a%s!==0)throw new ne(r);o[i]=a/s}else if(a!==s)throw new ne(r);return o}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return de(()=>{this.invokeCallHook(e,n);const r=Et(e),o=r.shape,s=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return ae(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}oZ.className="Reshape";Te(oZ);class sZ extends Yt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=eu(1,e.dims.length+1);if(!En(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new to({ndim:this.dims.length+1})]}computeOutputShape(e){e=vn(e);const n=e.slice();return this.dims.forEach((r,o)=>{n[o+1]=e[r]}),n}call(e,n){return cn(Et(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}sZ.className="Permute";Te(sZ);class iZ extends Yt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Et(e);return sO(UC(r,this.maskValue),-1)}call(e,n){return de(()=>{this.invokeCallHook(e,n);const r=Et(e),i=sO(UC(r,this.maskValue),-1,!0);return se(r,Ye(i,r.dtype))})}}iZ.className="Masking";Te(iZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class aZ extends Yt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Dn(e.inputLength))}this.inputDim=e.inputDim,go(this.inputDim,"inputDim"),this.outputDim=e.outputDim,go(this.outputDim,"outputDim"),this.embeddingsInitializer=sr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ar(e.embeddingsRegularizer),this.activityRegularizer=ar(e.activityRegularizer),this.embeddingsConstraint=oo(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return de(()=>this.maskZero?(e=Et(e),UC(e,dn(e))):null)}computeOutputShape(e){if(e=vn(e),this.inputLength==null)return[...e,this.outputDim];const n=Dn(this.inputLength);if(n.length!==e.length-1)throw new ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let o=0;o<n.length;++o){const s=n[o],i=e[o+1];if(s!=null&&i!=null&&s!==i)throw new ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return de(()=>{this.invokeCallHook(e,n);let r=Et(e);r.dtype!=="int32"&&(r=Gu(r,"int32"));const o=zQ(this.embeddings.read(),ae(r,[r.size]));return ae(o,vn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:yr(this.embeddingsInitializer),embeddingsRegularizer:jn(this.embeddingsRegularizer),activityRegularizer:jn(this.activityRegularizer),embeddingsConstraint:ro(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}aZ.className="Embedding";Te(aZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Zh extends Yt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Lt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let o=0;o<n.length;++o){const s=e[e.length-n.length+o],i=n[o];if(s==null||i==null||s<0||i<0)r.push(null);else if(s===1)r.push(i);else if(i===1)r.push(s);else{if(s!==i)throw new ne("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[vn(e)]),e=e,e.length<2)throw new ne(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=Sd(n),n.length>1)throw new ne(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const o=e.map(s=>s.length);e.indexOf(null)===-1&&Sd(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return de(()=>{if(e=e,this.reshapeRequired){const r=[],o=e.map(s=>s.rank);if(o.indexOf(null)===-1){const s=jd(o);for(let i of e){const a=i.rank;for(let u=0;u<s-a;++u)i=P1(i,1);r.push(i)}return this.mergeFunction(r)}else{let s=!1;for(const u of e){const l=u.rank;if(l==null){const c=u.shape,d=c[0],f=c.slice(1).concat([d]);let h=ae(u,[d].concat(Ed(c.slice(1))));h=cn(h,[1,0]),h=ae(h,f),r.push(h),s=!0}else if(l>1){const c=eu(1,l).concat([0]);r.push(cn(u,c)),s=!0}else r.push(u)}let i=this.mergeFunction(r);const a=i.rank;if(s){if(a==null){const u=i.shape,l=u.length,c=u[l-1],d=[c].concat(u.slice(0,u.length-1));i=ae(cn(ae(i,[-1,c]),[1,0]),d)}else if(a>1){const u=[a-1].concat(eu(0,a-1));i=cn(i,u)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let o=1;o<e.length;++o){const s=e[o]==null?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const o of e)o!=null&&o[0]!==null&&r.push(o[0]);return r=Sd(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return de(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ne("`mask` should be an Array");if(!Array.isArray(e))throw new ne("`inputs` should be an Array");if(n.length!==e.length)throw new ne(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:Ts(o,0));let r=n[0];for(let o=1;o<n.length-1;++o)r=sc(r,n[o]);return r})}}class uZ extends Zh{constructor(e){super(e)}mergeFunction(e){return de(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=De(n,e[r]);return n})}}uZ.className="Add";Te(uZ);class lZ extends Zh{constructor(e){super(e)}mergeFunction(e){return de(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=se(n,e[r]);return n})}}lZ.className="Multiply";Te(lZ);class cZ extends Zh{constructor(e){super(e)}mergeFunction(e){return de(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=De(n,e[r]);return se(1/e.length,n)})}}cZ.className="Average";Te(cZ);class dZ extends Zh{constructor(e){super(e)}mergeFunction(e){return de(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=uf(n,e[r]);return n})}}dZ.className="Maximum";Te(dZ);class fZ extends Zh{constructor(e){super(e)}mergeFunction(e){return de(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=x0(n,e[r]);return n})}}fZ.className="Minimum";Te(fZ);class hZ extends Zh{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ne("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const o of e)if(o!=null){n=!1;break}if(n)return;const r=[];for(let o=0;o<e.length;++o){const s=e[o].slice();s.splice(this.axis,1);let i=!1;for(const a of r)if(En(a,s)){i=!0;break}i||r.push(s)}if(r.length>1)throw new ne("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return de(()=>qF(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ne("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),o=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[o]==null||s[o]==null){r[o]=null;break}r[o]+=s[o]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ne("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ne("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ne(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return de(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const o=[];for(let i=0;i<e.length;++i)n[i]==null?o.push(Ye(ma(e[i]),"bool")):n[i].rank<e[i].rank?o.push(Ts(n[i],-1)):o.push(n[i]);const s=Os(o,this.axis);return gX(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}hZ.className="Concatenate";Te(hZ);function Mv(t,e){for(;t<0;)t+=e;return t}function U$e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Lt("batchDot is not implemented for tensors of 4D or higher rank yet");if(U(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),U(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Lt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,o=e.shape.length;n==null&&(n=[r-1,o-2]);const s=n;return de(()=>{let i;if(r>o){i=r-o;const u=[];for(let l=0;l<i;++l)u.push(1);e=ae(e,e.shape.concat(u))}else if(o>r){i=o-r;const u=[];for(let l=0;l<i;++l)u.push(1);t=ae(t,t.shape.concat(u))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=yt(se(t,e),s[0]):a=yt(se(cn(t,[1,0]),e),s[1]);else{const u=s[0]!==t.shape.length-1,l=s[1]===e.shape.length-1;a=kn(t,e,u,l)}if(i>0){let u;r>o?u=r+o-3:u=r-1;const l=[];for(let c=u;c<u+i;++c)l.push(c);a=D1(a,l)}return a.shape.length===1&&(a=Ts(a,1)),a})}class pZ extends Zh{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){U(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Lt("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);if(n[o[0]]!==r[o[1]])throw new ne(`Dimension incompatibility: ${n[o[0]]} !== ${r[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ne(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((s,i)=>Mv(s,e[i].shape.length)):o=[Mv(this.axes,n.shape.length),Mv(this.axes,r.shape.length)],this.normalize&&(n=XC(n,o[0]),r=XC(r,o[1])),U$e(n,r,o)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Mv(this.axes,e.length),Mv(this.axes,n.length)],r}computeOutputShape(e){U(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Lt("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);n.splice(o[0],1),r.splice(o[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}pZ.className="Dot";Te(pZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mZ extends Yt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return de(()=>{this.invokeCallHook(e,n);const r=Et(e);return L1(()=>De(g_(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}mZ.className="GaussianNoise";Te(mZ);class gZ extends Yt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return de(()=>{this.invokeCallHook(e,n);const r=Et(e);return this.rate>0&&this.rate<1?L1(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return se(r,g_(r.shape,1,s))},()=>r,n.training||!1):r})}}gZ.className="GaussianDropout";Te(gZ);class vZ extends Yt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Et(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return de(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return L1(()=>{const s=Et(e),u=-1.6732632423543772*1.0507009873554805;let l=qh(N1(r),this.rate);l=Gu(l,"float32");const c=((1-this.rate)*(1+this.rate*u**2))**-.5,d=-c*u*this.rate,f=De(se(s,l),se(De(l,-1),u));return De(se(f,c),d)},()=>Et(e),n.training||!1)}return e})}}vZ.className="AlphaDropout";Te(vZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function S0(t,e,n,r,o,s=.001){let i;if(t.rank===2)i=k_e(t,e,n,r,o,s);else if(t.rank===3)i=S_e(t,e,n,r,o,s);else if(t.rank===4)i=__e(t,e,n,r,o,s);else throw new Lt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function V$e(t,e,n,r,o=.001){return de(()=>{const s=XP(t,r),i=s.mean,a=s.variance;return[S0(t,i,a,n,e,o),i,a]})}function H$e(t,e,n,r,o=.001){return de(()=>{const s=XP(t,r),i=s.mean,a=s.variance,u=[];for(const p of eu(0,t.rank))r.indexOf(p)!==-1?u.push(1):u.push(t.shape[p]);const l=ae(i,u),c=ae(a,u),d=e==null?null:ae(e,u),f=n==null?null:ae(n,u);return[S0(t,l,c,f,d,o),i,a]})}function G$e(t,e,n,r,o=.001){return En(r.slice().sort(),eu(0,t.rank-1))?V$e(t,e,n,r,o):H$e(t,e,n,r,o)}class yZ extends Yt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=sr(e.betaInitializer||"zeros"),this.gammaInitializer=sr(e.gammaInitializer||"ones"),this.movingMeanInitializer=sr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=sr(e.movingVarianceInitializer||"ones"),this.betaConstraint=oo(e.betaConstraint),this.gammaConstraint=oo(e.gammaConstraint),this.betaRegularizer=ar(e.betaRegularizer),this.gammaRegularizer=ar(e.gammaRegularizer)}build(e){e=vn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ne(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new to({ndim:e.length,axes:{[n]:r}})];const o=[r];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return de(()=>{const r=n.training==null?!1:n.training,o=Et(e),s=o.shape,i=s.length,a=eu(0,i),u=this.axis>=0?this.axis:this.axis+i;a.splice(u,1);const l=Nh(1,i);l[u]=s[u];const c=a.slice();c.sort();const d=!En(c,eu(0,i).slice(0,i-1)),f=()=>{if(d){const y=ae(this.movingMean.read(),l),x=ae(this.movingVariance.read(),l),b=this.center?ae(this.beta.read(),l):null,C=this.scale?ae(this.gamma.read(),l):null;return S0(o,y,x,b,C,this.epsilon)}else return S0(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[h,p,m]=G$e(o,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(y,x,b)=>{de(()=>{const C=1-b,S=y.read(),E=se(Ct(S,x),C);y.write(Ct(S,E))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yr(this.betaInitializer),gammaInitializer:yr(this.gammaInitializer),movingMeanInitializer:yr(this.movingMeanInitializer),movingVarianceInitializer:yr(this.movingVarianceInitializer),betaRegularizer:jn(this.betaRegularizer),gammaRegularizer:jn(this.gammaRegularizer),betaConstraint:ro(this.betaConstraint),gammaConstraint:ro(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}yZ.className="BatchNormalization";Te(yZ);class xZ extends Yt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=sr(e.betaInitializer||"zeros"),this.gammaInitializer=sr(e.gammaInitializer||"ones"),this.betaRegularizer=ar(e.betaRegularizer),this.gammaRegularizer=ar(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=vn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==Sd(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),o=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,n){const r=Et(e),o=r.shape,s=o.length;return de(()=>{let{mean:a,variance:u}=XP(r,this.axis,!0);const l=Nh(1,s);for(const m of this.axis)l[m]=o[m];const c=m=>m!=null&&m.shape.length!==s?ae(m,l):m;let d=this.scale?c(this.gamma.read()):null,f=this.center?c(this.beta.read()):null;const h=[],p=[];for(let m=0;m<s;++m)this.axis.indexOf(m)!==-1?(h.push(o[m]),p.push(1)):(h.push(1),p.push(o[m]));return a=Wa(a,h),u=Wa(u,h),d!=null&&(d=Wa(d,p)),f!=null&&(f=Wa(f,p)),S0(r,a,u,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yr(this.betaInitializer),gammaInitializer:yr(this.gammaInitializer),betaRegularizer:jn(this.betaRegularizer),gammaRegularizer:jn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}xZ.className="LayerNormalization";Te(xZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Y$e(t,e,n){return de(()=>{if(t.rank!==4)throw new ne(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ne("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=tu()),n!=="channelsLast"&&n!=="channelsFirst")throw new ne(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],QP(t,r)})}class bZ extends Yt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?tu():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ne(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ne(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ne(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new to({ndim:4})]}computeOutputShape(e){e=vn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return de(()=>Y$e(Et(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}bZ.className="ZeroPadding2D";Te(bZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function S_(t,e,n,r,o,s){return de(()=>{jr(o),LQ(s),Mi(r),n==null&&(n=[1,1]),r==null&&(r="valid"),o==null&&(o=tu()),s==null&&(s="max"),t=a3(t,o);let i;const a=r==="same"?"same":"valid";return s==="max"?i=KP(t,e,n,a):i=LP(t,e,n,a),o==="channelsFirst"&&(i=cn(i,[0,3,1,2])),i})}function wZ(t,e,n,r,o,s){return de(()=>{jr(o),LQ(s),Mi(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),o==null&&(o=tu()),s==null&&(s="max"),t=LJ(t,o);let i;const a=r==="same"?"same":"valid";return s==="max"?i=dTe(t,e,n,a):i=f_e(t,e,n,a),o==="channelsFirst"&&(i=cn(i,[0,4,1,2,3])),i})}class kZ extends Yt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ne(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(go(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ne(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);go(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Mi(this.padding),this.inputSpec=[new to({ndim:3})]}computeOutputShape(e){e=vn(e);const n=Xa(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return de(()=>{this.invokeCallHook(e,n),e=P1(Et(e),2);const r=this.poolingFunction(Et(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return D1(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class CZ extends kZ{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return jr(s),Mi(o),S_(e,n,r,o,s,"max")}}CZ.className="MaxPooling1D";Te(CZ);class SZ extends kZ{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return jr(s),Mi(o),S_(e,n,r,o,s,"avg")}}SZ.className="AveragePooling1D";Te(SZ);class EZ extends Yt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ne(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];go(this.poolSize,"poolSize"),go(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,jr(this.dataFormat),Mi(this.padding),this.inputSpec=[new to({ndim:4})]}computeOutputShape(e){e=vn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Xa(n,this.poolSize[0],this.padding,this.strides[0]),r=Xa(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return de(()=>(this.invokeCallHook(e,n),this.poolingFunction(Et(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class _Z extends EZ{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return jr(s),Mi(o),S_(e,n,r,o,s,"max")}}_Z.className="MaxPooling2D";Te(_Z);class IZ extends EZ{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return jr(s),Mi(o),S_(e,n,r,o,s,"avg")}}IZ.className="AveragePooling2D";Te(IZ);class TZ extends Yt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ne(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];go(this.poolSize,"poolSize"),go(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,jr(this.dataFormat),Mi(this.padding),this.inputSpec=[new to({ndim:5})]}computeOutputShape(e){e=vn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Xa(n,this.poolSize[0],this.padding,this.strides[0]),r=Xa(r,this.poolSize[1],this.padding,this.strides[1]),o=Xa(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,o]:[e[0],n,r,o,e[4]]}call(e,n){return de(()=>(this.invokeCallHook(e,n),this.poolingFunction(Et(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class NZ extends TZ{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return jr(s),Mi(o),wZ(e,n,r,o,s,"max")}}NZ.className="MaxPooling3D";Te(NZ);class DZ extends TZ{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return jr(s),Mi(o),wZ(e,n,r,o,s,"avg")}}DZ.className="AveragePooling3D";Te(DZ);class RZ extends Yt{constructor(e){super(e),this.inputSpec=[new to({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Lt}}class OZ extends RZ{constructor(e){super(e||{})}call(e,n){return de(()=>{const r=Et(e);return Hr(r,1)})}}OZ.className="GlobalAveragePooling1D";Te(OZ);class AZ extends RZ{constructor(e){super(e||{})}call(e,n){return de(()=>{const r=Et(e);return Ka(r,1)})}}AZ.className="GlobalMaxPooling1D";Te(AZ);class $Z extends Yt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,jr(this.dataFormat),this.inputSpec=[new to({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Lt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class MZ extends $Z{call(e,n){return de(()=>{const r=Et(e);return this.dataFormat==="channelsLast"?Hr(r,[1,2]):Hr(r,[2,3])})}}MZ.className="GlobalAveragePooling2D";Te(MZ);class PZ extends $Z{call(e,n){return de(()=>{const r=Et(e);return this.dataFormat==="channelsLast"?Ka(r,[1,2]):Ka(r,[2,3])})}}PZ.className="GlobalMaxPooling2D";Te(PZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class FZ extends Yt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const o=n.layer,s=ql(o,r);delete n.layer;const i={layer:s};return Object.assign(i,n),new e(i)}}class LZ extends FZ{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=vn(e),e.length<3)throw new ne(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=vn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),o=e[1];return[r[0],o].concat(r.slice(1))}call(e,n){return de(()=>(e=Et(e),YJ((i,a)=>[Et(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}LZ.className="TimeDistributed";Te(LZ);function q$e(t){Jh(mAe,"BidirectionalMergeMode",t)}const K$e="concat";class BZ extends FZ{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=ql(r),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=e.layer.getClassName(),o.config=n,this.backwardLayer=ql(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?K$e:e.mergeMode,q$e(this.mergeMode),e.weights)throw new Lt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,o,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,o=[r]):this.mergeMode==null?o=[r,r.slice()]:o=[r],this.returnState?this.mergeMode==null?o.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):Ns(o)}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const s=GJ(e,r,o,this.numConstants);if(e=s.inputs,r=s.initialState,o=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&o==null)return super.apply(e,n);const i=[],a=[];if(r!=null){const l=r.length;if(l%2>0)throw new ne("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const c=r.map(d=>new to({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),a.push(...c)}if(o!=null)throw new Lt("Support for constants in Bidirectional layers is not implemented yet.");const u=i[0]instanceof rl;for(const l of i)if(l instanceof rl!==u)throw new ne("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const l=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(l,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return de(()=>{const r=n.initialState;let o,s;if(r==null)o=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const u=r.slice(0,r.length/2),l=r.slice(r.length/2);o=this.forwardLayer.call(e,Object.assign(n,{initialState:u})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:l}))}let i;this.returnState&&(Array.isArray(o)&&(i=o.slice(1).concat(s.slice(1))),o=o[0],s=s[0]),this.returnSequences&&(s=Ih(s,1));let a;return this.mergeMode==="concat"?a=qF([o,s]):this.mergeMode==="sum"?a=De(o,s):this.mergeMode==="ave"?a=se(.5,De(o,s)):this.mergeMode==="mul"?a=se(o,s):this.mergeMode==null&&(a=[o,s]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){oh(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),oh(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=ql(n.layer);if(delete n.layer,n.numConstants!=null)throw new Lt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=r,new e(o)}}BZ.className="Bidirectional";Te(BZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class jZ extends Yt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return de(()=>(e=Et(e),e.dtype!=="float32"&&(e=Gu(e,"float32")),De(se(e,this.scale),this.offset)))}}jZ.className="Rescaling";Te(jZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:X$e,cropAndResize:Q$e}=zl;class WZ extends Yt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,o,s,i,a,u){return de(()=>{let l,c=!1;const d=n/i,f=r/a,h=(o+n)/i,p=(s+r)/a,m=[d,f,h,p],g=[];e.rank===3?(c=!0,l=ic([e])):l=e;for(let C=0;C<l.shape[0];C++)g.push(m);const v=iX(g,[g.length,4]),y=b0(0,g.length,1,"int32"),b=Q$e(l,v,y,[o,s],"nearest");return Gu(c?Et(Th(b)):b,u)})}upsize(e,n,r,o){return de(()=>{const s=X$e(e,[n,r]);return Gu(s,o)})}call(e,n){return de(()=>{const r=Et(e),o=r.dtype,s=r.shape,i=s[s.length-3],a=s[s.length-2];let u=0;i!==this.height&&(u=Math.floor((i-this.height)/2));let l=0;return a!==this.width&&(l=Math.floor((a-this.width)/2),l===0&&(l=1)),u>=0&&l>=0?this.centerCrop(r,u,l,this.height,this.width,i,a,o):this.upsize(e,this.height,this.width,o)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=vn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}WZ.className="CenterCrop";Te(WZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function J$e(t,e,n,r){let o=Et(t);if(o.dtype!=="int32"&&(o=Gu(o,"int32")),e==="int")return o;const s=o.shape;if(o.rank===0&&(o=Ts(o,-1)),e==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=Ts(o,-1)),o.rank>2)throw new ne(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${o.rank}.`);const i=["multiHot","oneHot"].includes(e),a=o;let u;if(typeof r<"u"&&e==="count"?u=dU(a,r,n,i):u=dU(a,[],n,i),e!=="tfIdf")return u;if(r)return se(u,r);throw new ne("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zZ extends Yt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=vn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return de(()=>{e=Et(e),e.dtype!=="int32"&&(e=Gu(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ne(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Et(n.countWeights)}const o=Ka(e),s=WC(e),i=$i(this.numTokens,o).bufferSync().get(0),a=qh(s,0).bufferSync().get(0);if(!(i&&a))throw new ne(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return J$e(e,this.outputMode,this.numTokens,r)})}}zZ.className="CategoryEncoding";Te(zZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Z$e=["bilinear","nearest"],VU=new Set(Z$e);class UZ extends Yt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(VU.has(e.interpolation))this.interpolation=e.interpolation;else throw new ne(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=vn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return de(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return zl.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return zl.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...VU]} are supported`)})}}UZ.className="Resizing";Te(UZ);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class VZ{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}VZ.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class HZ extends Yt{constructor(e){super(e),this.randomGenerator=new VZ(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}HZ.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const eMe=["bilinear","nearest"],HU=new Set(eMe);class GZ extends HZ{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ne(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ne(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ne(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(HU.has(r))this.interpolation=r;else throw new ne(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=vn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return de(()=>{const r=Et(e);this.imgHeight=r.shape[r.shape.length-3];const o=r.shape[r.shape.length-2];this.widthFactor=N1([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*o;s=Math.round(s);const i=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return zl.resizeBilinear(e,i);case"nearest":return zl.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...HU]} are supported`)}})}}GZ.className="RandomWidth";Te(GZ);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tMe=fe();tMe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var GU;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(GU||(GU={}));var YU;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(YU||(YU={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var qU;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(qU||(qU={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function st(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nMe=VX;class E_ extends WM{nextDataId(){return E_.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new cK(this,yu())}write(e,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&pi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:r,refCount:1}),o}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&Rx(r[0])){const s=r.map(i=>Cd(i));o=this.write(s,e,n)}else o=this.write(r,e,n);return{dataId:o,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,o,s){this.data.set(e,{values:n,dtype:o,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const o=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return ac(o,s)}return ISe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>Bd(o));return Ht(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ht(e.shape,e.dtype,n)}makeOutput(e,n,r){return yu().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Is();return e(),{kernelMs:Is()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){st([e],"where");const n=this.readSync(e.dataId);return nMe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}E_.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YZ(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const rMe=t=>{const{x:e}=t.inputs,n=t.backend;st(e,"abs");let r=new Float32Array(xe(e.shape));const o=n.data.get(e.dataId).values;return r=YZ(o),n.makeOutput(r,e.shape,e.dtype)},oMe={kernelName:rE,backendName:"cpu",kernelFunc:rMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wr(t){return(e,n,r,o,s)=>{const i=Ft(e,n),a=i.length,u=gt(i),l=xe(i),c=qo(s,l),d=e.length,f=n.length,h=gt(e),p=gt(n),m=ug(e,i),g=ug(n,i);if(m.length+g.length===0)for(let v=0;v<c.length;++v)c[v]=t(r[v%r.length],o[v%o.length]);else for(let v=0;v<c.length;++v){const y=$g(v,a,u),x=y.slice(-d);m.forEach(E=>x[E]=0);const b=Uu(x,d,h),C=y.slice(-f);g.forEach(E=>C[E]=0);const S=Uu(C,f,p);c[v]=t(r[b],o[S])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gs(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(a.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(o.shape,"float32",i)},a}const sMe={kernelName:eP,backendName:"cpu",kernelFunc:Gs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2(t,e,n="float32"){if(n==="complex64"){const o=t2(t,e,"float32"),s=t2(t,e,"float32");return Gs({inputs:{real:o,imag:s},backend:t})}const r=Ko(xe(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ol(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const iMe={kernelName:Jx,backendName:"cpu",kernelFunc:ol};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dh(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,s)}const aMe={kernelName:SP,backendName:"cpu",kernelFunc:Dh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qZ(t,e,n,r){if(r==="int32"){const o=Int32Array.from(t);return[e,"int32",o]}if(r==="bool"){const o=Yh([0],n),[s,i]=Wr((a,u)=>a!==u?1:0)(e,[],t,o,"bool");return[i,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Vd(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return ol({inputs:{x:o},backend:n});const c=t2(n,o.shape,o.dtype),d=Vd({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),f=Gs({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),f}if(o.dtype==="complex64"){const c=Dh({inputs:{input:o},backend:n}),d=Vd({inputs:{x:c},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(c),d}if(!hK(o.dtype,s)){const c=ol({inputs:{x:o},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:s}}const i=n.data.get(o.dataId).values,[a,u,l]=qZ(i,o.shape,o.dtype,s);return n.makeTensorInfo(a,u,l)}const uMe={kernelName:Bx,backendName:"cpu",kernelFunc:Vd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ao(t,e,n,r){return n==null?({inputs:o,backend:s})=>{const{a:i,b:a}=o,u=s;st([i,a],t);const l=u.data.get(i.dataId).values,c=u.data.get(a.dataId).values,d=i.dtype==="string"?uc(l):l,f=i.dtype==="string"?uc(c):c,h=r||i.dtype,[p,m]=e(i.shape,a.shape,d,f,h);return u.makeTensorInfo(m,h,p)}:({inputs:o,backend:s})=>{const{a:i,b:a}=o,u=s;if(i.dtype==="complex64"||a.dtype==="complex64"){const l=Vd({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,h=u.data.get(d.dataId).values,p=u.data.get(f.dataId).values,m=Vd({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),g=u.data.get(m.dataId),v=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,x=u.data.get(v.dataId).values,b=u.data.get(y.dataId).values,[C,S,E]=n(i.shape,a.shape,h,p,x,b),I=u.makeTensorInfo(E,"float32",C),T=u.makeTensorInfo(E,"float32",S),N=Gs({inputs:{real:I,imag:T},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(I),u.disposeIntermediateTensorInfo(T),N}else{const l=u.data.get(i.dataId).values,c=u.data.get(a.dataId).values,d=r||i.dtype,[f,h]=e(i.shape,a.shape,l,c,d);return u.makeTensorInfo(h,d,f)}}}function h3(t){return(e,n,r,o,s,i)=>{const a=Ft(e,n),u=xe(a),l=a.length,c=gt(a),d=qo("float32",u),f=qo("float32",u),h=ug(e,a),p=ug(n,a),m=ac(r,o),g=ac(s,i),v=e.length,y=gt(e),x=n.length,b=gt(n);if(h.length+p.length===0)for(let C=0;C<d.length;C++){const S=C%m.length,E=C%g.length,I=t(m[S*2],m[S*2+1],g[E*2],g[E*2+1]);d[C]=I.real,f[C]=I.imag}else for(let C=0;C<d.length;C++){const S=$g(C,l,c),E=S.slice(-v);h.forEach($=>E[$]=0);const I=Uu(E,v,y),T=S.slice(-x);p.forEach($=>T[$]=0);const N=Uu(T,x,b),O=t(m[I*2],m[I*2+1],g[N*2],g[N*2+1]);d[C]=O.real,f[C]=O.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KZ=Wr((t,e)=>t+e),lMe=h3((t,e,n,r)=>({real:t+n,imag:e+r})),fg=ao(Mg,KZ,lMe),cMe={kernelName:Mg,backendName:"cpu",kernelFunc:fg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3(t,e,n,r,o){const s=xe(r),i=Ko(o,n);for(let a=0;a<t.length;a++){const u=t[a];if(u<0)throw new Error("Input x must be non-negative!");u>=o||(s>0?i[u]+=e[a]:i[u]+=1)}return i}function XZ(t,e,n,r=!1){const o=t.shape[0],s=t.shape[1],i=Ht([o,n],e.dtype);for(let a=0;a<o;a++)for(let u=0;u<s;u++){const l=t.get(a,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?i.set(1,a,l):e.size>0?i.set(i.get(a,l)+e.get(a,u),a,l):i.set(i.get(a,l)+1,a,l))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QZ=Wr((t,e)=>t&e),dMe=ao(ZM,QZ),fMe={kernelName:ZM,backendName:"cpu",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cl(t){return(e,n,r)=>{const o=$r(n,e.length);for(let s=0;s<e.length;++s)o[s]=t(e[s],r);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function On(t,e,n){const r=cl(e);return ff(t,r,n)}function ff(t,e,n){return({inputs:r,attrs:o,backend:s})=>{const{x:i}=r;st(i,t);const a=s,u=a.data.get(i.dataId).values;let l;if(i.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");l=uc(u)}else l=u;const c=n||i.dtype,d=e(l,c,o);return a.makeTensorInfo(i.shape,c,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JZ=cl(t=>Math.ceil(t)),hMe=ff(jx,JZ),pMe={kernelName:jx,backendName:"cpu",kernelFunc:hMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZZ(t,e,n,r){const o=$r(n,xe(e));if(r&&n!=="string"){let s=0;t.forEach(i=>{const a=xe(i.shape);o.set(i.vals,s),s+=a})}else{let s=0;t.forEach(i=>{const a=n==="string"?uc(i.vals):i.vals;let u=0;for(let l=0;l<i.shape[0];++l){const c=l*e[1]+s;for(let d=0;d<i.shape[1];++d)o[c+d]=a[u++]}s+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eee=Wr((t,e)=>t===e?1:0),tee=ao(yE,eee,null,"bool"),mMe={kernelName:yE,backendName:"cpu",kernelFunc:tee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nee=cl(t=>Math.exp(t)),ree=ff(Yx,nee,"float32"),gMe={kernelName:Yx,backendName:"cpu",kernelFunc:ree};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oee=cl(t=>Math.expm1(t)),vMe=ff(qx,oee),yMe={kernelName:qx,backendName:"cpu",kernelFunc:vMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const see=cl(t=>Math.floor(t)),xMe=ff(Kx,see),bMe={kernelName:Kx,backendName:"cpu",kernelFunc:xMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iee=Wr((t,e)=>Math.floor(t/e)),wMe=ao(Xx,iee,null,"int32"),kMe={kernelName:Xx,backendName:"cpu",kernelFunc:wMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aee(t,e,n,r,o,s,i,a,u){const l=Ht([r,s],n);for(let c=0;c<r;c++){const d=[];let f=0;for(let h=0;h<o;h++){const p=t[c*o+h];f+=p*i[h],d.push(p)}if(f<0||f>=u/s)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<s;h++)l.values[c*s+h]=e.get(...e.indexToLoc(f*s+h))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uee(t,e,n){const r=Ht(n,t.dtype);for(let o=0;o<r.size;++o){const i=r.indexToLoc(o).slice(),a=i[0],u=i[2],l=e.locToIndex([a,u]);i[2]=e.values[l];const c=t.locToIndex(i);0<=c&&c<t.values.length&&(r.values[o]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lee=Wr((t,e)=>t>e?1:0),CMe=ao(kE,lee,null,"bool"),SMe={kernelName:kE,backendName:"cpu",kernelFunc:CMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cee=Wr((t,e)=>t>=e?1:0),EMe=ao(Qx,cee,null,"bool"),_Me={kernelName:Qx,backendName:"cpu",kernelFunc:EMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dee=Wr((t,e)=>t<e?1:0),IMe=ao(SE,dee,null,"bool"),TMe={kernelName:SE,backendName:"cpu",kernelFunc:IMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fee=Wr((t,e)=>t<=e?1:0),NMe=ao(EE,fee,null,"bool"),DMe={kernelName:EE,backendName:"cpu",kernelFunc:NMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hee(t,e,n){const r=(e-t)/(n-1),o=Ko(n,"float32");o[0]=t;for(let s=1;s<o.length;s++)o[s]=o[s-1]+r;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pee=cl(t=>Math.log(t)),RMe=ff(n1,pee),OMe={kernelName:n1,backendName:"cpu",kernelFunc:RMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mee(t,e,n,r){const o=qo(r,xe(n));for(let s=0;s<o.length;++s){const i=s*e;let a=t[i];for(let u=0;u<e;++u){const l=t[i+u];(Number.isNaN(l)||l>a)&&(a=l)}o[s]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gee=Wr((t,e)=>Math.max(t,e)),AMe=ao(o1,gee),$Me={kernelName:o1,backendName:"cpu",kernelFunc:AMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vee=Wr((t,e)=>Math.min(t,e)),MMe=ao(s1,vee),PMe={kernelName:s1,backendName:"cpu",kernelFunc:MMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3=Wr((t,e)=>t*e),FMe=h3((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),__=ao(a1,m3,FMe),LMe={kernelName:a1,backendName:"cpu",kernelFunc:__};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(t,e,n){const r=of(-1,n);return m3([],e,r,t,n)}function BMe(t){const{inputs:e,backend:n}=t,{x:r}=e;st(r,"neg");const o=n.data.get(r.dataId).values,[s,i]=yee(o,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,s)}const jMe={kernelName:PE,backendName:"cpu",kernelFunc:BMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xee=Wr((t,e)=>t!==e?1:0),WMe=ao(FE,xee,null,"bool"),zMe={kernelName:FE,backendName:"cpu",kernelFunc:WMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3(t,e,n,r,o){const s=e.length,i=xe(e),a=gt(e),u=gt(o),l=qo(n,xe(o));for(let c=0;c<i;++c){const d=$g(c,s,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[r[p]];const h=Uu(f,s,u);l[h]=t[c]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $s(t){const{inputs:e,attrs:n,backend:r}=t,{x:o}=e,{perm:s}=n;st(o,"transpose");const i=o.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=o.shape[s[d]];const u=r.data.get(o.dataId).values,l=g3(u,o.shape,o.dtype,s,a);return{dataId:r.write(l,a,o.dtype),shape:a,dtype:o.dtype}}const UMe={kernelName:gm,backendName:"cpu",kernelFunc:$s};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(t,e,n,r){const[o,s]=Co(t,r),i=ri(e,"int32"),a=Ko(xe(o),i),u=xe(s);for(let l=0;l<a.length;++l){const c=l*u;let d=1;for(let f=0;f<u;++f)d*=n[c+f];a[l]=d}return{outVals:a,outShape:o,outDtype:i}}function VMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;st(o,"prod");const a=o.shape.length,u=Gt(s,o.shape),l=br(u,a);let c=u,d=o;const f=[];l!=null&&(d=$s({inputs:{x:o},backend:n,attrs:{perm:l}}),f.push(d),c=Br(c.length,a));const h=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:g}=bee(d.shape,d.dtype,h,c);let v=m;return i&&(v=Kr(m,u)),f.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(v,g,p)}const HMe={kernelName:UE,backendName:"cpu",kernelFunc:VMe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMe(t,e,n){t.forEach((r,o)=>{if(r<0||r>=n){const s=$g(o,e.length,gt(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function YMe(t,e){for(let n=0;n<t.length;++n){const r=t[n],o=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function qMe(t,e,n,r){const o=[];let s=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);YMe(n,r);let u=1;for(let l=0;l<e.length-1;++l){u*=e[l];const c=e[l+1];for(let d=1;d<u+1;++d)a[l].push(d*c)}for(let l=0;l<t.length;++l){let c=t[l],d=t[l]+1;for(let f=0;f<n.length;++f){const h=n[f],p=f+e.length-1;if(p>=0){const m=a[p],g=m[m.length-1]-h[c];for(let v=c;v<d;++v)a[p].push(h[v+1]+g)}c=h[c],d=h[d]}d!==c&&(o.push([c,d]),s+=d-c)}return{outSplits:a,valueSlices:o,numValues:s}}function KMe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,o=$r("int32",r);e.push(o),t[n].forEach((s,i)=>o[i]=s)}return e}function KU(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function XMe(t,e,n,r,o,s){const i=KU(e,2)[1],a=KU(s,2)[1];let u=0;for(const l of n)for(let c=l[0];c<l[1];++c){for(let d=0;d<r;++d)o[u*a+d]=t[c*i+d];++u}}function QMe(t,e,n,r,o){const s=e.slice();s[0]=o;const i=$r(n,xe(s)),a=t.length,u=a===0?0:a/e[0];return XMe(t,e,r,u,i,s),[i,s]}function wee(t,e,n,r,o,s,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const u=e[0][0]-1;if(GMe(s,i,u),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:d,numValues:f}=qMe(s,i,t,l),h=KMe(c),p=QMe(n,r,o,d,f);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XU=2147483647;function kee(t,e,n,r,o,s,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,u=o.length===0,l=i.length===0,c=[];a||c.push(e[0]),u||c.push(o[0]),l||c.push(i[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=c.length===0?1:c[0],f=$r("int32",d+1);f[0]=0;for(let g=0;g<d;++g){const v=a?t[0]:t[g],y=u?r[0]:r[g],x=l?s[0]:s[g];if(x===0)throw new Error("Requires delta != 0");let b;if(x>0&&y<v||x<0&&y>v)b=0;else if(b=Math.ceil(Math.abs((y-v)/x)),b>XU)throw new Error(`Requires ((limit - start) / delta) <= ${XU}`);f[g+1]=f[g]+b}const h=f[d],p=$r(n,h);let m=0;for(let g=0;g<d;++g){const v=f[g+1]-f[g];let y=a?t[0]:t[g];const x=l?s[0]:s[g];for(let b=0;b<v;++b)p[m++]=y,y+=x}return[f,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var zi=Fa;class n2{constructor(e,n,r,o,s,i,a,u,l,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=o,this.valuesDType=s,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=lQ(c),this.raggedRank=cQ(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===zi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===zi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case zi.VALUE_ROWIDS:return n2.getMaxWidthValueRowID(n);case zi.ROW_SPLITS:return n2.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${zi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let o=0;o<n-1;++o){const s=e[o+1]-e[o];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,o=e[0],s=0;for(let i=1;i<n;++i){const a=e[i];a!==o&&(o=a,s=Math.max(i-r,s),r=i)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return JU(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;dQ(r,n);const o=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=uQ(this.raggedRank,o,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,r){const o=Math.min(e,r),s=[];let i=0;for(let a=0;a<o;++a,i+=n)s.push(i);for(let a=o;a<e;++a)s.push(-1);return U(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,o){const s=e.length,i=[];for(let a=0;a<s-1;++a){const u=e[a+1]-e[a];let l=Math.min(o,u),c=n[a];c===-1&&(l=0);for(let d=0;d<l;++d)i.push(c),c+=r;for(let d=0;d<u-l;++d)i.push(-1)}if(s>0&&i.length!==e[s-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,o){const s=e.length,i=[];if(s===0)return[];let a=0,u=e[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let l=n[u];i.push(l);for(let c=1;c<s;++c){const d=e[c];if(d===u)l>=0&&(++a,a<o?l+=r:l=-1);else{if(a=0,u=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);l=n[d]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,o){const s=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case zi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,o);case zi.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,o);default:throw new Error(`Unsupported partition type: ${zi[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case zi.FIRST_DIM_SIZE:return e[0];case zi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case zi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${zi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let u=o.length-2;u>=0;--u)o[u]=o[u+1]*r[u+1];const s=JU(r,!1),i=$r(this.valuesDType,xe(s));if(o[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,o[0],r[0]);for(let l=1;l<=this.raggedRank;++l)u=this.calculateOutputIndex(l-1,u,o[l],r[l]);this.setOutput(this.raggedRank,u,i,s)}return[s,i]}setOutput(e,n,r,o){if(r.length===0)return;const s=this.values,i=r;let a=o.slice();a=a.slice(e+1);const u=xe(a),l=n.length;let c=this.defaultValue;if(c.length!==u&&c.length!==1){const p=this.defaultValueShape;de(()=>{const m=ae(c,p);c=Sy(m,a).dataSync()})}let d=0,f=0,h=0;for(let p=0;p<=l;++p){let m=p<l?n[p]:-1;if(m===h){++h;continue}if(f<h){const g=s.subarray(d*u),v=i.subarray(f*u),y=(h-f)*u;QU(v,g,y)}if(p>=l){const g=r.length;m=Math.floor(g/u)}if(m>h)if(this.defaultValue.length===1)i.subarray(h*u,m*u).fill(this.defaultValue[0]),h=m;else for(;m>h;){const g=i.slice(h*u);QU(g,c,u),++h}m<0?(d=p+1,f=h):(d=p,f=h,h=f+1)}}}function QU(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function JU(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Cee(t,e,n,r,o,s,i,a,u,l){return new n2(t,e,n,r,o,s,i,a,u,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function See(t,e,n,r){const o=t===e,s=t<e&&n<0,i=e<t&&n>1;if(o||s||i)return Ko(0,r);const a=Math.abs(Math.ceil((e-t)/n)),u=Ko(a,r);e<t&&n===1&&(n=-1),u[0]=t;for(let l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eee=cl(t=>1/Math.sqrt(t)),JMe=ff(h1,Eee),ZMe={kernelName:h1,backendName:"cpu",kernelFunc:JMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vf(t,e,n,r,o,s,i,a,u,l){const c=[r/o,o],d=t.values,f=e.values;if(r===0)return Ht(n,e.dtype);const h=u instanceof No?u:Ht(c,e.dtype);typeof u=="string"||typeof u=="number"?h.values.fill(u):typeof u=="boolean"&&h.values.fill(+u);for(let p=0;p<s;p++){const m=[];let g=0;for(let v=0;v<i;v++){const y=d[p*i+v];m.push(y),g+=y*a[v]}if(g<0||g>=r/o)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let v=0;v<o;v++)l?h.values[g*o+v]+=f[p*o+v]:h.values[g*o+v]=e.rank===0?f[0]:f[p*o+v]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ePe=cl(t=>1/(1+Math.exp(-t))),_ee=On(y1,t=>1/(1+Math.exp(-t))),tPe={kernelName:y1,backendName:"cpu",kernelFunc:_ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iee(t,e,n,r,o){const s=CF(r,e,n),i=xe(n),a=gt(r);if(s){const d=SF(e,a);return o==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const u=o==="string"?uc(t):t,l=Ht(r,o,u),c=Ht(n,o);for(let d=0;d<c.size;++d){const f=c.indexToLoc(d),h=f.map((p,m)=>p+e[m]);c.set(l.get(...h),...f)}return o==="string"?RQ(c.values):c.values}function Rh(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,size:i}=r;st(o,"slice");const[a,u]=d_(o,s,i);wF(o,a,u);const l=n.data.get(o.dataId).values,c=Iee(l,a,u,o.shape,o.dtype);return n.makeTensorInfo(u,o.dtype,c)}const nPe={kernelName:KE,backendName:"cpu",kernelFunc:Rh};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tee(t,e,n,r,o,s,i){const a=e[0],u=s[0],l=new Array(u),c=new Array(a),d=e[1];if(u===0){if(a!==0)throw new Error(yQ(a));const g=$r(n,0),v=$r(o,0);return[g,[0,d],v,l,c]}let f=!0,h=0;const p=new Array(u).fill(0);for(let g=0;g<a;++g){const v=t[g*d];if(v<0)throw new Error(xQ(g,v));if(v>=u)throw new Error(bQ(g,v,u));++p[v],f=f&&v>=h,h=v}let m=!0;for(let g=0;g<u;++g){const v=p[g]===0;l[g]=v,m=m&&!v,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&f){const g=t,v=r;for(let y=0;y<a;++y)c[y]=y;return[g,[a,d],v,l,c]}else{const g=p[u-1],v=$r(n,g*d),y=$r(o,g),x=new Array(u).fill(0);for(let b=0;b<a;++b){const C=t[b*d],S=x[C],E=(C===0?0:p[C-1])+S;x[C]++;for(let I=0;I<d;++I)v[E*d+I]=t[b*d+I];y[E]=r[b],c[b]=E}for(let b=0;b<u;++b)if(x[b]===0){const S=b===0?0:p[b-1];v[S*d+0]=b;for(let E=1;E<d;++E)v[S*d+E]=0;y[S]=i}return[v,[g,d],y,l,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nee(t,e,n,r,o){const s=xe(r),i=e[0],a=o.length,u=[];let l=1,c=-1;for(let g=0;g<a;++g){const v=o[g];if(v===-1){if(c!==-1)throw new Error(wQ(c,g));c=g,u.push(1)}else{if(v<0)throw new Error(kQ(g,v));l*=v,u.push(v)}}if(c!==-1){if(l<=0)throw new Error(CQ());const g=Math.trunc(s/l);if(l*g!==s)throw new Error(SQ(r,u));u[c]=g}if(xe(u)!==s)throw new Error(EQ(r,u));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let g=f-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*u[g+1]}const m=$r(n,i*a);for(let g=0;g<i;++g){let v=0;for(let y=0;y<f;++y)v+=t[g*f+y]*h[y];for(let y=0;y<a;++y)m[g*a+y]=Math.trunc(v/p[y]),v%=p[y]}return[m,[i,a],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3(t,e,n,r,o,s=!1,i=0){const a=r.length,u=[e[0],t.length/e[0]],l=u[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(cO());const f=e.slice();f[0]=d;const h=f.reduce((x,b)=>x*b,1),p=$r(n,h);if(a===0)return d>0&&p.fill(i),[p,f];if(d<=0)throw new Error(cO());let m=0,g=1,v=0,y=o[m];for(;;){let x=0;if(g<a){if(x=o[g],y===x){++g;continue}if(y>=x)throw new Error(_Q())}if(y<0||y>=d)throw new Error(IQ(y,d));y>v&&p.fill(i,v*l,y*l);for(let b=m;b<g;++b){const C=r[b];if(C<0||C>=u[0])throw new Error(TQ(b,r[b],u[0]));for(let S=0;S<l;S++)p[y*l+S]+=t[C*l+S]}if(s)for(let b=0;b<l;b++)p[y*l+b]/=g-m;if(m=g,++g,v=y+1,y=x,g>a)break}return v<d&&p.fill(i,v*l,d*l),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rPe=cl(t=>Math.sqrt(t)),oPe=On(b1,t=>Math.sqrt(t)),sPe={kernelName:b1,backendName:"cpu",kernelFunc:oPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dee=Wr((t,e)=>{const n=t-e;return n*n}),iPe=ao(w1,Dee),aPe={kernelName:w1,backendName:"cpu",kernelFunc:iPe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ree=cl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:o}=e;return t.replace(new RegExp(n,r?"g":""),o)}),uPe=ff(TP,Ree),lPe={kernelName:TP,backendName:"cpu",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oee(t,e,n,r){const o=Ht(t,e.dtype);for(let s=0;s<o.size;s++){const i=o.indexToLoc(s),a=new Array(i.length);for(let u=0;u<a.length;u++)a[u]=i[u]*n[u]+r[u];o.set(e.get(...a),...i)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cPe{constructor(e,n,r,o,s,i){this.separator=Cd(e),this.nGramWidths=n,this.leftPad=Cd(r),this.rightPad=Cd(o),this.padWidth=s,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,o,s,i){for(let a=0;a<s;++a){const u=this.getPadWidth(i),l=Math.max(0,u-a),c=Math.max(0,u-(s-(a+1))),d=i-(l+c),f=n+(l>0?0:a-u);let h=0;h+=l*this.leftPad.length;for(let y=0;y<d;++y)h+=e[f+y].length;h+=c*this.rightPad.length;const p=l+c+d-1;h+=p*this.separator.length,r[o+a]=new Uint8Array(h);const m=r[o+a];let g=0;const v=y=>y.forEach(x=>m[g++]=x);for(let y=0;y<l;++y)v(this.leftPad),v(this.separator);for(let y=0;y<d-1;++y)v(e[f+y]),v(this.separator);if(d>0){v(e[f+d-1]);for(let y=0;y<c;++y)v(this.separator),v(this.rightPad)}else{for(let y=0;y<c-1;++y)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(e,n){const r=e.length,o=n.length;if(o>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let l=1;l<o;++l){let c=n[l]>=u;if(c=c&&n[l]<=r,!c)throw new Error(`Invalid split value ${n[l]}, must be in [${u}, ${r}]`);u=n[l]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const s=o-1,i=$r("int32",o);if(r===0||o===0){const u=new Array(r);for(let l=0;l<=s;++l)i[l]=0;return[u,i]}i[0]=0;for(let u=1;u<=s;++u){const l=n[u]-n[u-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(l,d)}),this.preserveShort&&l>0&&c===0&&(c=1),i[u]=i[u-1]+c}const a=new Array(i[s]);for(let u=0;u<s;++u){const l=n[u];let c=i[u];if(this.nGramWidths.forEach(d=>{const f=n[u+1]-n[u],h=this.getNumNGrams(f,d);this.createNGrams(e,l,a,c,h,d),c+=h}),this.preserveShort&&c===i[u]){const d=n[u+1]-n[u];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,l,a,c,1,f)}}return[a,i]}}function Aee(t,e,n,r,o,s,i,a){return new cPe(n,r,o,s,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let i=t.indexOf(s);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&r.push(a),t=t.subarray(i+1),i=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let o=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const i=t.subarray(o,s);(!n||i.length!==0)&&r.push(i),o=s+1}}function $ee(t,e,n){const r=t.length,o=[];let s=0,i=0;const a=new Array(r);for(let f=0;f<r;++f){const h=o.length;dPe(t[f],e,n,o);const p=o.length-h;a[f]=p,s+=p,i=Math.max(i,p)}const u=$r("int32",s*2),l=new Array(s),c=[r,i];let d=0;for(let f=0;f<r;++f)for(let h=0;h<a[f];++h)u[d*2]=f,u[d*2+1]=h,l[d]=o[d],++d;return[u,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mee(t,e){const n=$r("int32",t.length);for(let r=0;r<t.length;++r)n[r]=GSe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pee=Wr((t,e)=>t-e),fPe=h3((t,e,n,r)=>({real:t-n,imag:e-r})),y3=ao(k1,Pee,fPe),hPe={kernelName:k1,backendName:"cpu",kernelFunc:y3};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fee(t,e){const n=new Array(t.rank);for(let o=0;o<n.length;o++)n[o]=t.shape[o]*e[o];const r=Ht(n,t.dtype);for(let o=0;o<r.values.length;++o){const s=r.indexToLoc(o),i=new Array(t.rank);for(let u=0;u<i.length;u++)i[u]=s[u]%t.shape[u];const a=t.locToIndex(i);r.values[o]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ny=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function Lee(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,u=e-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(a-c)/a)*Math.sign(u-a/2),f=Math.max(n,Math.floor(e-u*c/a+d)),h=Math.min(r,Math.floor(e+(a-u)*c/a+d));Lee(t,e,f,h)}const o=t[e];let s=n,i=r;for(Op(t,n,e),ny(t[r],o)>0&&Op(t,n,r);s<i;){for(Op(t,s,i),s++,i--;ny(t[s],o)<0;)s=s+1;for(;ny(t[i],o)>0;)i=i-1}ny(t[n],o)===0?Op(t,n,i):(i=i+1,Op(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function Bee(t,e,n,r,o){const s=e[e.length-1],[i,a]=[t.length/s,s],u=qo(n,i*r),l=qo("int32",i*r);for(let d=0;d<i;d++){const f=d*a,h=t.subarray(f,f+a);let p=new Array(h.length);h.forEach((y,x)=>p[x]={value:y,index:x}),r<p.length&&(Lee(p,r),p=p.slice(0,r)),o&&p.sort(ny);const m=d*r,g=u.subarray(m,m+r),v=l.subarray(m,m+r);for(let y=0;y<r;y++)g[y]=p[y].value,v[y]=p[y].index}const c=e.slice();return c[c.length-1]=r,[Ht(c,n,u),Ht(c,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jee(t,e,n,r){const o=Gt(e,n)[0],s=[1,n[0],1];for(let p=0;p<o;p++)s[0]*=n[p];s[1]=n[o];for(let p=o+1;p<n.length;p++)s[2]*=n[p];const i=new Map,a=new Int32Array(n[o]),u=new No(s,r,t),l=[],c=s[0]===1&&s[2]===1;for(let p=0;p<n[o];p++){let m;if(c)m=t[p].toString();else{const v=[];for(let y=0;y<s[0];y++)for(let x=0;x<s[2];x++)v.push(u.get(y,p,x));m=v.join(",")}const g=i.get(m);if(g!=null)a[p]=g;else{const v=i.size;i.set(m,v),a[p]=v,l.push(p)}}const d=s.slice();d[1]=i.size;const f=new No(d,r);l.forEach((p,m)=>{for(let g=0;g<s[0];g++)for(let v=0;v<s[2];v++)f.set(u.get(g,p,v),g,m,v)});const h=n.slice();return h[o]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pPe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:KZ,bincountImpl:p3,bincountReduceImpl:XZ,bitwiseAndImpl:QZ,castImpl:qZ,ceilImpl:JZ,concatImpl:ZZ,equalImpl:eee,expImpl:nee,expm1Impl:oee,floorDivImpl:iee,floorImpl:see,gatherNdImpl:aee,gatherV2Impl:uee,greaterEqualImpl:cee,greaterImpl:lee,lessEqualImpl:fee,lessImpl:dee,linSpaceImpl:hee,logImpl:pee,maxImpl:mee,maximumImpl:gee,minimumImpl:vee,multiplyImpl:m3,negImpl:yee,notEqualImpl:xee,prodImpl:bee,raggedGatherImpl:wee,raggedRangeImpl:kee,raggedTensorToTensorImpl:Cee,rangeImpl:See,rsqrtImpl:Eee,scatterImpl:Vf,sigmoidImpl:ePe,simpleAbsImpl:YZ,sliceImpl:Iee,sparseFillEmptyRowsImpl:Tee,sparseReshapeImpl:Nee,sparseSegmentReductionImpl:v3,sqrtImpl:rPe,squaredDifferenceImpl:Dee,staticRegexReplaceImpl:Ree,stridedSliceImpl:Oee,stringNGramsImpl:Aee,stringSplitImpl:$ee,stringToHashBucketFastImpl:Mee,subImpl:Pee,tileImpl:Fee,topKImpl:Bee,transposeImpl:g3,uniqueImpl:jee},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */aX("cpu",()=>new E_,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wee=On(Hx,t=>t>=0?t:Math.exp(t)-1),mPe={kernelName:Hx,backendName:"cpu",kernelFunc:Wee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zee(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:s}=r;st([o],"leakyRelu");const i=xe(o.shape),a=n.data.get(o.dataId).values,u=qo("float32",i);for(let l=0;l<a.length;l++)u[l]=a[l]<0?s*a[l]:a[l];return n.makeTensorInfo(o.shape,"float32",u)}const gPe={kernelName:CE,backendName:"cpu",kernelFunc:zee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vPe=Wr((t,e)=>t<0?e*t:t);function Uee(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e;st([r,o],"prelu");const s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,[a,u]=vPe(r.shape,o.shape,s,i,"float32");return n.makeTensorInfo(u,"float32",a)}const yPe={kernelName:zE,backendName:"cpu",kernelFunc:Uee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vee=On(c1,t=>Math.max(0,t)),xPe={kernelName:c1,backendName:"cpu",kernelFunc:Vee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hee=On(d1,t=>Math.min(Math.max(0,t),6)),bPe={kernelName:d1,backendName:"cpu",kernelFunc:Hee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2(t,e,n,r,o){if(n==="linear")return ol({inputs:{x:e},backend:t});if(n==="relu")return Vee({inputs:{x:e},backend:t});if(n==="elu")return Wee({inputs:{x:e},backend:t});if(n==="relu6")return Hee({inputs:{x:e},backend:t});if(n==="prelu")return Uee({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return zee({inputs:{x:e},backend:t,attrs:{alpha:o}});if(n==="sigmoid")return _ee({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yn(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:s}=r,i=xe(o.shape),a=fK(s,i),u=xe(a);U(i===u,()=>`The new shape (${a}) has ${u} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const l=n.data.get(o.dataId);if(l.complexTensorInfos!=null){const c=l.complexTensorInfos.real,d=l.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const wPe={kernelName:VE,backendName:"cpu",kernelFunc:Yn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gee(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s}=e,{transposeA:i,transposeB:a}=r;st([o,s],"matMul");const u=o.shape.length,l=s.shape.length,c=i?o.shape[u-2]:o.shape[u-1],d=a?s.shape[l-1]:s.shape[l-2],f=i?o.shape[u-1]:o.shape[u-2],h=a?s.shape[l-2]:s.shape[l-1],p=o.shape.slice(0,-2),m=s.shape.slice(0,-2),g=xe(p),v=xe(m),x=Ft(o.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,h]);U(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${o.shape} and ${s.shape} and transposeA=${i} and transposeB=${a} must match.`);const b=i?[g,c,f]:[g,f,c],C=a?[v,h,d]:[v,d,h],S=Yn({inputs:{x:o},backend:n,attrs:{shape:b}}),E=Yn({inputs:{x:s},backend:n,attrs:{shape:C}}),I=i?S.shape[1]:S.shape[2],T=i?S.shape[2]:S.shape[1],N=a?E.shape[1]:E.shape[2],O=Math.max(g,v),$=n.data.get(S.dataId).values,A=n.data.get(E.dataId).values,P=gt(S.shape),L=gt(E.shape),[W,z,F]=i?[P[0],1,P[1]]:[P[0],P[1],1],[B,H,X]=a?[1,L[1],L[0]]:[L[1],1,L[0]],te=T*N,re=Ht([O,T,N],S.dtype),ue=re.values,Q=n.blockSize;for(let ce=0;ce<O;ce++){const ke=ce%g,Ce=ce%v;for(let _e=0;_e<T;_e+=Q){const Le=Math.min(_e+Q,T);for(let Ie=0;Ie<N;Ie+=Q){const Pe=Math.min(Ie+Q,N);for(let Ue=0;Ue<I;Ue+=Q){const lt=Math.min(Ue+Q,I);for(let Me=_e;Me<Le;Me++)for(let Ke=Ie;Ke<Pe;Ke++){let xt=0;for(let _t=Ue;_t<lt;_t++){const tn=$[ke*W+Me*z+_t*F],Ot=A[_t*B+Ke*H+Ce*X];xt+=tn*Ot}ue[ce*te+(Me*N+Ke)]+=xt}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(x,re.dtype,re.values)}const kPe={kernelName:uE,backendName:"cpu",kernelFunc:Gee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s,bias:i,preluActivationWeights:a}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:d}=r;let f,h,p;const m=[];f=Gee({inputs:{a:o,b:s},attrs:{transposeA:u,transposeB:l},backend:n}),i&&(h=fg({inputs:{a:f,b:i},backend:n}),m.push(f),f=h),c&&(p=r2(n,f,c,a,d),m.push(f),f=p);for(const v of m)n.disposeIntermediateTensorInfo(v);return f}const SPe={kernelName:PC,backendName:"cpu",kernelFunc:CPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPe=On(Ox,t=>Math.acos(t)),_Pe={kernelName:Ox,backendName:"cpu",kernelFunc:EPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IPe=On(Ax,t=>Math.acosh(t)),TPe={kernelName:Ax,backendName:"cpu",kernelFunc:IPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(t){const{inputs:e,backend:n}=t,r=e;st(e,"addN");const o=r.map(a=>n.data.get(a.dataId).values),s=Ht(r[0].shape,r[0].dtype),i=s.values;for(let a=0;a<r.length;a++){const u=o[a];for(let l=0;l<i.length;l++)i[l]+=u[l]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const DPe={kernelName:YM,backendName:"cpu",kernelFunc:NPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;st(o,"all");const a=Gt(s,o.shape);let u=a;const l=br(u,o.shape.length);let c=o;l!=null&&(c=$s({inputs:{x:o},backend:n,attrs:{perm:l}}),u=Br(u.length,o.shape.length)),Bo("all",u,c.shape.length);const[d,f]=Co(c.shape,u),h=xe(f),p=Ko(xe(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const y=v*h;let x=m[y];for(let b=0;b<h;++b){const C=m[y+b];x=x&&C}p[v]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const v=Kr(d,a),y=Yn({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),y}return g}const OPe={kernelName:qM,backendName:"cpu",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function APe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;st(o,"any");const a=Gt(s,o.shape);let u=a;const l=br(u,o.shape.length);let c=o;l!=null&&(c=$s({inputs:{x:o},backend:n,attrs:{perm:l}}),u=Br(u.length,o.shape.length)),Bo("any",u,c.shape.length);const[d,f]=Co(c.shape,u),h=xe(f),p=Ko(xe(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const y=v*h;let x=m[y];for(let b=0;b<h;++b){const C=m[y+b];x=x||C}p[v]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const v=Kr(d,a),y=Yn({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),y}return g}const $Pe={kernelName:KM,backendName:"cpu",kernelFunc:APe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;st(o,"argMax");let i=Gt(s,o.shape);const a=br(i,o.shape.length);let u=o;const l=[];a!=null&&(u=$s({inputs:{x:o},backend:n,attrs:{perm:a}}),l.push(u),i=Br(i.length,u.shape.length)),i=[i[0]],Bo("argMax",i,u.shape.length);const[c,d]=Co(u.shape,i),f=xe(c),h=Ko(f,"int32"),p=xe(d),m=n.data.get(u.dataId).values;for(let g=0;g<h.length;++g){const v=g*p;let y=m[v],x=0;for(let b=0;b<p;++b){const C=m[v+b];C>y&&(y=C,x=b)}h[g]=x}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const PPe={kernelName:oE,backendName:"cpu",kernelFunc:MPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;st(o,"argMin");let i=Gt(s,o.shape);const a=br(i,o.shape.length);let u=o;const l=[];a!=null&&(u=$s({inputs:{x:o},backend:n,attrs:{perm:a}}),l.push(u),i=Br(i.length,u.shape.length)),i=[i[0]],Bo("argMin",i,u.shape.length);const[c,d]=Co(u.shape,i),f=xe(c),h=Ko(f,"int32"),p=xe(d),m=n.data.get(u.dataId).values;for(let g=0;g<h.length;++g){const v=g*p;let y=m[v],x=0;for(let b=0;b<p;++b){const C=m[v+b];C<y&&(y=C,x=b)}h[g]=x}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const LPe={kernelName:sE,backendName:"cpu",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BPe=On($x,t=>Math.asin(t)),jPe={kernelName:$x,backendName:"cpu",kernelFunc:BPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WPe=On(Mx,t=>Math.asinh(t)),zPe={kernelName:Mx,backendName:"cpu",kernelFunc:WPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UPe=On(Px,t=>Math.atan(t)),VPe={kernelName:Px,backendName:"cpu",kernelFunc:UPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HPe=Wr((t,e)=>Math.atan2(t,e)),GPe=ao(Lx,HPe),YPe={kernelName:Lx,backendName:"cpu",kernelFunc:GPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qPe=On(Fx,t=>Math.atanh(t)),KPe={kernelName:Fx,backendName:"cpu",kernelFunc:qPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3(t,e,n,r,o,s){const i=o.strideHeight,a=o.strideWidth,u=o.dilationHeight,l=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Ht(o.outShape,n),g=m.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],y=o.outShape[2]*o.outShape[3],x=o.outShape[3];for(let b=0;b<o.batchSize;++b){const C=b*v,S=b*r[0];for(let E=0;E<o.inChannels;++E)for(let I=0;I<o.outHeight;++I){const T=I*i-f,N=Math.max(0,T),O=Math.min(o.inHeight,c+T),$=C+I*y;for(let A=0;A<o.outWidth;++A){const P=A*a-h,L=Math.max(0,P),W=Math.min(o.inWidth,d+P);let z=p,F=0,B=0;for(let X=N;X<O;X+=u){const te=S+X*r[1];for(let re=L;re<W;re+=l){const ue=te+re*r[2],Q=t[ue+E];s==="max"&&Q>z?z=Q:s==="avg"&&(F+=Q,B++)}if(isNaN(z))break}const H=$+A*x+E;g[H]=s==="avg"?F/B:z}}}return m}function Yee(t,e,n,r,o=!1,s=!1){const i=Ht(r.outShape,"int32"),a=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=Ht(e,n,t);for(let g=0;g<r.batchSize;++g)for(let v=0;v<r.inChannels;++v)for(let y=0;y<r.outHeight;++y){const x=y*a-h;let b=x;for(;b<0;)b+=l;const C=Math.min(r.inHeight,d+x);for(let S=0;S<r.outWidth;++S){const E=S*u-p;let I=E;for(;I<0;)I+=c;const T=Math.min(r.inWidth,f+E);let N=Number.NEGATIVE_INFINITY,O=-1;for(let $=b;$<C;$+=l){const A=$-x;for(let P=I;P<T;P+=c){const L=P-E,W=m.get(g,$,P,v);W>N&&(N=W,o?O=s?((g*r.inHeight+$)*r.inWidth+P)*r.inChannels+v:($*r.inWidth+P)*r.inChannels+v:O=A*f+L)}}i.set(O,g,y,S,v)}}return i}function qee(t,e,n,r,o,s){const i=o.strideDepth,a=o.strideHeight,u=o.strideWidth,l=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,h=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,v=o.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Ht(o.outShape,n),b=x.values,C=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],S=o.outShape[2]*o.outShape[3]*o.outShape[4],E=o.outShape[3]*o.outShape[4],I=o.outShape[4];for(let T=0;T<o.batchSize;++T){const N=T*C,O=T*r[0];for(let $=0;$<o.inChannels;++$)for(let A=0;A<o.outDepth;++A){const P=A*i-m;let L=P;for(;L<0;)L+=l;const W=Math.min(o.inDepth,f+P),z=N+A*S;for(let F=0;F<o.outHeight;++F){const B=F*a-g;let H=B;for(;H<0;)H+=c;const X=Math.min(o.inHeight,h+B),te=z+F*E;for(let re=0;re<o.outWidth;++re){const ue=re*u-v;let Q=ue;for(;Q<0;)Q+=d;const ce=Math.min(o.inWidth,p+ue),ke=te+re*I;let Ce=y,_e=0,Le=0;for(let Pe=L;Pe<W;Pe+=l){const Ue=O+Pe*r[1];for(let lt=H;lt<X;lt+=c){const Me=Ue+lt*r[2];for(let Ke=Q;Ke<ce;Ke+=d){const xt=Me+Ke*r[3],_t=t[xt+$];if(s==="max"&&_t>Ce?Ce=_t:s==="avg"&&(_e+=_t,Le++),isNaN(Ce))break}if(isNaN(Ce))break}if(isNaN(Ce))break}const Ie=ke+$;b[Ie]=s==="avg"?_e/Math.max(Le,1):Ce}}}}return x}function XPe(t,e){const n=Ht(e.outShape,"int32"),r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let v=0;v<e.outDepth;++v){const y=v*r-f;let x=y;for(;x<0;)x+=i;const b=Math.min(e.inDepth,l+y);for(let C=0;C<e.outHeight;++C){const S=C*o-h;let E=S;for(;E<0;)E+=a;const I=Math.min(e.inHeight,c+S);for(let T=0;T<e.outWidth;++T){const N=T*s-p;let O=N;for(;O<0;)O+=u;const $=Math.min(e.inWidth,d+N);let A=Number.NEGATIVE_INFINITY,P=-1;for(let L=x;L<b;L+=i){const W=L-y;for(let z=E;z<I;z+=a){const F=z-S;for(let B=O;B<$;B+=u){const H=B-N,X=t.get(m,L,z,B,g);X>=A&&(A=X,P=W*c*d+F*c+H)}}}n.set(P,m,v,C,T,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;st(o,"avgPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:u}=r,l=1;U(Qo(i,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=va(o.shape,s,i,l,a,u);let d;if(c.filterWidth===1&&c.filterHeight===1&&En(c.inShape,c.outShape))d=ol({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=gt(o.shape),p=x3(f,o.shape,o.dtype,h,c,"avg");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const JPe={kernelName:iE,backendName:"cpu",kernelFunc:QPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:u,dataFormat:l}=r;st(o,"avgPool3d");const c=yc(o.shape,s,i,1,a,u,l),d=n.data.get(o.dataId).values,f=qee(d,o.shape,o.dtype,gt(o.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const eFe={kernelName:aE,backendName:"cpu",kernelFunc:ZPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,{filterSize:i,strides:a,pad:u,dimRoundingMode:l}=r;st([o,s],"avgPool3DGrad");const c=yc(s.shape,i,a,1,u,l),d=c.strideDepth,f=c.strideHeight,h=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,v=c.dilationDepth,y=c.dilationHeight,x=c.dilationWidth,b=c.effectiveFilterDepth,C=c.effectiveFilterHeight,S=c.effectiveFilterWidth,E=b-1-c.padInfo.front,I=S-1-c.padInfo.left,T=C-1-c.padInfo.top,N=Ht(s.shape,"float32"),O=1/(p*m*g),$=n.bufferSync(o);for(let A=0;A<c.batchSize;++A)for(let P=0;P<c.inChannels;++P)for(let L=0;L<c.inDepth;++L)for(let W=0;W<c.inHeight;++W)for(let z=0;z<c.inWidth;++z){const F=L-E,B=W-T,H=z-I;let X=0;for(let te=0;te<b;te+=v){const re=(F+te)/d;if(!(re<0||re>=c.outDepth||Math.floor(re)!==re))for(let ue=0;ue<C;ue+=y){const Q=(B+ue)/f;if(!(Q<0||Q>=c.outHeight||Math.floor(Q)!==Q))for(let ce=0;ce<S;ce+=x){const ke=(H+ce)/h;if(ke<0||ke>=c.outWidth||Math.floor(ke)!==ke)continue;const Ce=$.get(A,re,Q,ke,P);X+=Ce}}}N.set(X*O,A,L,W,z,P)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const nFe={kernelName:QM,backendName:"cpu",kernelFunc:tFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s;st([o,s],"avgPoolGrad");const{filterSize:a,strides:u,pad:l}=r,c=va(i.shape,a,u,1,l),d=c.strideHeight,f=c.strideWidth,h=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,v=c.effectiveFilterHeight,y=c.effectiveFilterWidth,x=y-1-c.padInfo.left,b=v-1-c.padInfo.top,C=Ht(i.shape,"float32"),S=1/(h*p),E=n.data.get(o.dataId).values,I=Ht(o.shape,"float32",E);for(let T=0;T<c.batchSize;++T)for(let N=0;N<c.inChannels;++N)for(let O=0;O<c.inHeight;++O)for(let $=0;$<c.inWidth;++$){const A=O-b,P=$-x;let L=0;for(let W=0;W<v;W+=m){const z=(A+W)/d;if(!(z<0||z>=c.outHeight||Math.floor(z)!==z))for(let F=0;F<y;F+=g){const B=(P+F)/f;if(B<0||B>=c.outWidth||Math.floor(B)!==B)continue;const H=I.get(T,z,B,N);L+=H}}C.set(L*S,T,O,$,N)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const oFe={kernelName:XM,backendName:"cpu",kernelFunc:rFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,scale:s,offset:i,mean:a,variance:u}=e;U(a.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),st([o,a,u,s,i],"batchNorm");let{varianceEpsilon:l}=r;l==null&&(l=.001);const c=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(u.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,v=h.length,y=f.length,x=d.length;let b=0,C=0,S=0,E=0;for(let I=0;I<c.length;++I)m[I]=p[b++]+(c[I]-d[C++])*h[S++]/Math.sqrt(f[E++]+l),b>=g&&(b=0),C>=x&&(C=0),S>=v&&(S=0),E>=y&&(E=0);return n.makeTensorInfo(o.shape,o.dtype,m)}const iFe={kernelName:bE,backendName:"cpu",kernelFunc:sFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,crops:i}=r;st([o],"batchToSpaceND");const a=s.reduce((v,y)=>v*y),u=O1(o.shape,s,a),l=A1(u.length,s.length),c=$1(o.shape,s,a),d=NF(i,s.length),f=DF(c,i,s.length),h=Yn({inputs:{x:o},backend:n,attrs:{shape:u}}),p=$s({inputs:{x:h},backend:n,attrs:{perm:l}}),m=Yn({inputs:{x:p},backend:n,attrs:{shape:c}}),g=Rh({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const uFe={kernelName:lE,backendName:"cpu",kernelFunc:aFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i}=r,a=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,l=p3(a,u,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,l)}const cFe={kernelName:JM,backendName:"cpu",kernelFunc:lFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFe(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,a=Ft(Array.from(s),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const fFe={kernelName:yK,backendName:"cpu",kernelFunc:dFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hFe=On(Wx,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),pFe={kernelName:Wx,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mFe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(xe(e.shape)),o=n.data.get(e.dataId),s=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values;for(let l=0;l<a.length;l++){const c=a[l],d=u[l];r[l]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},gFe={kernelName:cE,backendName:"cpu",kernelFunc:mFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hg(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,s)}const vFe={kernelName:gP,backendName:"cpu",kernelFunc:hg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pg(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,s=Gt(o,e[0].shape)[0],i=e.map(m=>m.shape);_F(i,s);let a=Hu(e.map(m=>m.shape),s);if(xe(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const u=e.filter(m=>xe(m.shape)>0);if(u.length===1)return ol({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){const m=u.map(b=>Dh({inputs:{input:b},backend:n})),g=u.map(b=>hg({inputs:{input:b},backend:n})),v=pg({inputs:m,backend:n,attrs:{axis:s}}),y=pg({inputs:g,backend:n,attrs:{axis:s}}),x=Gs({inputs:{real:v,imag:y},backend:n});return m.forEach(b=>n.disposeIntermediateTensorInfo(b)),g.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),x}const l=u.map(m=>{const v=[-1,xe(m.shape.slice(s))];return Yn({inputs:{x:m},backend:n,attrs:{shape:v}})}),c=l.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=Hu(l.map(m=>m.shape),1);const d=l[0].shape[0]===1,f=ZZ(c,a,e[0].dtype,d),h=Hu(u.map(m=>m.shape),s),p=n.makeTensorInfo(h,e[0].dtype,f);return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const yFe={kernelName:dE,backendName:"cpu",kernelFunc:pg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kee(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dataFormat:u,dilations:l,dimRoundingMode:c}=r;st([o,s],"conv2d");const d=xc(u),f=Lo(o.shape,s.shape,i,l,a,c,!1,d),h=f.filterHeight,p=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,v=f.padInfo.left,y=f.padInfo.top,x=f.dataFormat==="channelsLast",b=new No(f.outShape,o.dtype),C=gt(o.shape),S=gt(s.shape),E=C[0],I=x?C[1]:C[2],T=x?C[2]:1,N=x?1:C[1],O=b.strides[0],$=x?b.strides[1]:b.strides[2],A=x?b.strides[2]:1,P=x?1:b.strides[1],L=n.data.get(o.dataId).values,W=n.data.get(s.dataId).values,z=b.values;for(let F=0;F<f.batchSize;++F){const B=F*E,H=F*O;for(let X=0;X<f.outHeight;++X){const te=H+X*$,re=X*f.strideHeight-y;for(let ue=0;ue<h;++ue){const Q=re+ue*m;if(Q<0||Q>=f.inHeight)continue;const ce=ue*S[0],ke=B+Q*I;for(let Ce=0;Ce<f.outWidth;++Ce){const _e=te+Ce*A,Le=Ce*f.strideWidth-v;for(let Ie=0;Ie<p;++Ie){const Pe=Le+Ie*g;if(Pe<0||Pe>=f.inWidth)continue;const Ue=ce+Ie*S[1],lt=ke+Pe*T;let Me=Ue;for(let Ke=0;Ke<f.inChannels;++Ke){const xt=L[lt+Ke*N];for(let _t=0;_t<f.outChannels;++_t)z[_e+_t*P]+=xt*W[Me+_t];Me+=f.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,z)}const xFe={kernelName:fE,backendName:"cpu",kernelFunc:Kee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;st([o,s],"conv2dBackpropFilter");const d=xc(u),f=Lo(o.shape,c,i,1,a,l,!1,d),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=f,v=f.dataFormat==="channelsLast",y=new No(f.filterShape,"float32"),x=f.padInfo.left,b=f.padInfo.top,C=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,E=new No(o.shape,o.dtype,C),I=new No(s.shape,s.dtype,S);for(let T=0;T<m;++T){const N=Math.max(0,Math.ceil((b-T)/h)),O=Math.min(f.outHeight,(f.inHeight+b-T)/h);for(let $=0;$<g;++$){const A=Math.max(0,Math.ceil((x-$)/p)),P=Math.min(f.outWidth,(f.inWidth+x-$)/p);for(let L=0;L<f.inChannels;++L)for(let W=0;W<f.outChannels;++W){let z=0;for(let F=0;F<f.batchSize;++F)for(let B=N;B<O;++B){const H=T+B*h-b;for(let X=A;X<P;++X){const te=$+X*p-x;v?z+=E.get(F,H,te,L)*I.get(F,B,X,W):z+=E.get(F,L,H,te)*I.get(F,W,B,X)}}y.set(z,T,$,L,W)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const wFe={kernelName:tP,backendName:"cpu",kernelFunc:bFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{inputShape:i,strides:a,pad:u,dataFormat:l,dimRoundingMode:c}=r;st([o,s],"conv2dBackpropInput");const d=gt(s.shape),f=gt(o.shape);let h=xc(l);const p=Lo(i,s.shape,a,1,u,c,!1,h),m=new No(p.inShape,"float32"),g=m.values,v=n.data.get(o.dataId).values,y=n.data.get(s.dataId).values,[x,b,C]=d,{batchSize:S,filterHeight:E,filterWidth:I,inChannels:T,inHeight:N,inWidth:O,outChannels:$,outHeight:A,outWidth:P,strideHeight:L,strideWidth:W}=p;h=p.dataFormat;const z=E-1-p.padInfo.top,F=I-1-p.padInfo.left,B=h==="channelsLast",H=m.strides[0],X=B?m.strides[1]:m.strides[2],te=B?m.strides[2]:1,re=B?1:m.strides[1],ue=f[0],Q=B?f[1]:f[2],ce=B?f[2]:1,ke=B?1:f[1];for(let Ce=0;Ce<S;++Ce)for(let _e=0;_e<T;++_e)for(let Le=0;Le<N;++Le){const Ie=Le-z,Pe=Math.max(0,Math.ceil(Ie/L)),Ue=Math.min(A,(E+Ie)/L);for(let lt=0;lt<O;++lt){const Me=lt-F,Ke=Math.max(0,Math.ceil(Me/W)),xt=Math.min(P,(I+Me)/W);let _t=0;for(let Ot=Pe;Ot<Ue;++Ot){const jt=Ot*L-Ie;for(let sn=Ke;sn<xt;++sn){const An=sn*W-Me,Ne=ue*Ce+Q*Ot+ce*sn,ze=x*(E-1-jt)+b*(I-1-An)+C*_e;for(let Be=0;Be<$;++Be){const It=v[Ne+ke*Be],At=y[ze+Be];_t+=It*At}}}const tn=H*Ce+X*Le+te*lt+re*_e;g[tn]=_t}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const CFe={kernelName:hE,backendName:"cpu",kernelFunc:kFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:u}=r;st([o,s],"conv3d");const l=sf(o.shape,s.shape,i,u,a),{filterDepth:c,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:m,padInfo:g}=l,v=g.front,y=g.left,x=g.top,b=new No(l.outShape,o.dtype),C=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,E=b.values,I=gt(o.shape),T=gt(s.shape);for(let N=0;N<l.batchSize;++N){const O=N*I[0],$=N*b.strides[0];for(let A=0;A<l.outDepth;++A){const P=$+A*b.strides[1],L=A*l.strideDepth-v;for(let W=0;W<c;++W){const z=L+W*h;if(z<0||z>=l.inDepth)continue;const F=W*T[0],B=O+z*I[1];for(let H=0;H<l.outHeight;++H){const X=P+H*b.strides[2],te=H*l.strideHeight-x;for(let re=0;re<d;++re){const ue=te+re*p;if(ue<0||ue>=l.inHeight)continue;const Q=F+re*T[1],ce=B+ue*I[2];for(let ke=0;ke<l.outWidth;++ke){const Ce=X+ke*l.outChannels,_e=ke*l.strideWidth-y;for(let Le=0;Le<f;++Le){const Ie=_e+Le*m;if(Ie<0||Ie>=l.inWidth)continue;const Pe=Q+Le*T[2],Ue=ce+Ie*l.inChannels;let lt=Pe;for(let Me=0;Me<l.inChannels;++Me){const Ke=C[Ue+Me];for(let xt=0;xt<l.outChannels;++xt)E[Ce+xt]+=Ke*S[lt+xt];lt+=l.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const EFe={kernelName:pE,backendName:"cpu",kernelFunc:SFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Fe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,filterShape:u}=r;st([o,s],"conv3dBackpropFilterV2");const l=gt(o.shape),c=gt(s.shape),d=sf(o.shape,u,i,1,a),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,y=new No(d.filterShape,"float32"),x=y.values,[b,C,S,E]=y.strides,I=n.data.get(s.dataId).values,[T,N,O,$]=c,A=n.data.get(o.dataId).values,[P,L,W,z]=l,F=d.padInfo.front,B=d.padInfo.left,H=d.padInfo.top;for(let X=0;X<m;++X){const te=Math.max(0,Math.ceil((F-X)/f)),re=Math.min(d.outDepth,(d.inDepth+F-X)/f),ue=X*b;for(let Q=0;Q<g;++Q){const ce=Math.max(0,Math.ceil((H-Q)/h)),ke=Math.min(d.outHeight,(d.inHeight+H-Q)/h),Ce=Q*C+ue;for(let _e=0;_e<v;++_e){const Le=Math.max(0,Math.ceil((B-_e)/p)),Ie=Math.min(d.outWidth,(d.inWidth+B-_e)/p),Pe=_e*S+Ce;for(let Ue=0;Ue<d.inChannels;++Ue){const lt=Ue*E+Pe;for(let Me=0;Me<d.outChannels;++Me){let Ke=0;for(let xt=0;xt<d.batchSize;++xt){const _t=xt*P,tn=xt*T;for(let Ot=te;Ot<re;++Ot){const sn=(X+Ot*f-F)*L+_t,An=Ot*N+tn;for(let Ne=ce;Ne<ke;++Ne){const Be=(Q+Ne*h-H)*W+sn,It=Ne*O+An;for(let At=Le;At<Ie;++At){const Wt=(_e+At*p-B)*z+Be,ks=At*$+It;Ke+=A[Wt+Ue]*I[ks+Me]}}}}x[lt+Me]=Ke}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const IFe={kernelName:nP,backendName:"cpu",kernelFunc:_Fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{pad:i,strides:a,inputShape:u}=r;st([o],"conv3dBackpropInputV2");const l=gt(o.shape),c=gt(s.shape),d=sf(u,s.shape,a,1,i),f=new No(d.inShape,"float32"),h=f.values,[p,m,g,v]=f.strides,y=n.data.get(o.dataId).values,[x,b,C,S]=l,E=n.data.get(s.dataId).values,[I,T,N,O]=c,{batchSize:$,filterDepth:A,filterHeight:P,filterWidth:L,inChannels:W,inDepth:z,inHeight:F,inWidth:B,outChannels:H,outDepth:X,outHeight:te,outWidth:re,strideDepth:ue,strideHeight:Q,strideWidth:ce}=d,ke=A-1-d.padInfo.front,Ce=P-1-d.padInfo.top,_e=L-1-d.padInfo.left;for(let Le=0;Le<$;++Le)for(let Ie=0;Ie<W;++Ie)for(let Pe=0;Pe<z;++Pe){const Ue=Pe-ke,lt=Math.max(0,Math.ceil(Ue/ue)),Me=Math.min(X,(A+Ue)/ue);for(let Ke=0;Ke<F;++Ke){const xt=Ke-Ce,_t=Math.max(0,Math.ceil(xt/Q)),tn=Math.min(te,(P+xt)/Q);for(let Ot=0;Ot<B;++Ot){const jt=Ot-_e,sn=Math.max(0,Math.ceil(jt/ce)),An=Math.min(re,(L+jt)/ce);let Ne=0;for(let ze=lt;ze<Me;++ze){const Be=ze*ue-Ue;for(let It=_t;It<tn;++It){const At=It*Q-xt;for(let wr=sn;wr<An;++wr){const Wt=wr*ce-jt,ks=x*Le+b*ze+C*It+S*wr,wt=I*(A-1-Be)+T*(P-1-At)+N*(L-1-Wt)+O*Ie;for(let Mt=0;Mt<H;++Mt){const cr=y[ks+Mt],Xr=E[wt+Mt];Ne+=cr*Xr}}}}h[p*Le+m*Pe+g*Ke+v*Ot+Ie]=Ne}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const NFe={kernelName:rP,backendName:"cpu",kernelFunc:TFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DFe=On(zx,t=>Math.cos(t)),RFe={kernelName:zx,backendName:"cpu",kernelFunc:DFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OFe=On(Ux,t=>Math.cosh(t)),AFe={kernelName:Ux,backendName:"cpu",kernelFunc:OFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:s,boxInd:i}=e,{cropSize:a,method:u,extrapolationValue:l}=r,[c,d,f,h]=o.shape,p=s.shape[0],[m,g]=a,v=Ht([p,m,g,h],"float32"),y=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,b=n.data.get(o.dataId).values,C=gt(o.shape),S=gt(v.shape);for(let E=0;E<p;E++){const I=E*4,T=y[I],N=y[I+1],O=y[I+2],$=y[I+3],A=x[E];if(A>=c)continue;const P=m>1?(O-T)*(d-1)/(m-1):0,L=g>1?($-N)*(f-1)/(g-1):0;for(let W=0;W<m;W++){const z=m>1?T*(d-1)+W*P:.5*(T+O)*(d-1);if(z<0||z>d-1){for(let F=0;F<g;F++)for(let B=0;B<h;B++){const H=B+F*S[2]+W*S[1]+E*S[0];v.values[H]=l}continue}if(u==="bilinear"){const F=Math.floor(z),B=Math.ceil(z),H=z-F;for(let X=0;X<g;X++){const te=g>1?N*(f-1)+X*L:.5*(N+$)*(f-1);if(te<0||te>f-1){for(let ce=0;ce<h;ce++){const ke=ce+X*S[2]+W*S[1]+E*S[0];v.values[ke]=l}continue}const re=Math.floor(te),ue=Math.ceil(te),Q=te-re;for(let ce=0;ce<h;ce++){let ke=ce+re*C[2]+F*C[1]+A*C[0];const Ce=b[ke];ke=ce+ue*C[2]+F*C[1]+A*C[0];const _e=b[ke];ke=ce+re*C[2]+B*C[1]+A*C[0];const Le=b[ke];ke=ce+ue*C[2]+B*C[1]+A*C[0];const Ie=b[ke],Pe=Ce+(_e-Ce)*Q,Ue=Le+(Ie-Le)*Q;ke=ce+X*S[2]+W*S[1]+E*S[0],v.values[ke]=Pe+(Ue-Pe)*H}}}else for(let F=0;F<g;++F){const B=g>1?N*(f-1)+F*L:.5*(N+$)*(f-1);if(B<0||B>f-1){for(let te=0;te<h;te++){const re=te+F*S[2]+W*S[1]+E*S[0];v.values[re]=l}continue}const H=Math.round(B),X=Math.round(z);for(let te=0;te<h;te++){const re=te+H*C[2]+X*C[1]+A*C[0],ue=te+F*S[2]+W*S[1]+E*S[0];v.values[ue]=b[re]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const MFe={kernelName:sP,backendName:"cpu",kernelFunc:$Fe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;st(o,"cumprod");const u=br([s],o.shape.length);let l=o;u!=null&&(l=$s({inputs:{x:o},backend:n,attrs:{perm:u}}));const c=Br(1,o.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const d=ri(l.dtype,"int32"),f=VM(xe(l.shape),d),h=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],m=a?(v,y)=>v+p-y-1:(v,y)=>v+y;for(let v=0;v<h.length;v+=p)for(let y=0;y<p;y++){const x=m(v,y);if(y===0)f[x]=i?1:h[x];else{const b=m(v,y-1);f[x]=i?h[b]*f[b]:h[x]*f[b]}}const g=n.makeTensorInfo(l.shape,d,f);if(u!=null){const v=af(u),y=$s({inputs:{x:g},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),y}return g}const FFe={kernelName:oP,backendName:"cpu",kernelFunc:PFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;st(o,"cumsum");const u=br([s],o.shape.length);let l=o;u!=null&&(l=$s({inputs:{x:o},backend:n,attrs:{perm:u}}));const c=Br(1,o.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const d=ri(l.dtype,"int32"),f=Ko(xe(l.shape),d),h=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],m=a?(v,y)=>v+p-y-1:(v,y)=>v+y;for(let v=0;v<h.length;v+=p)for(let y=0;y<p;y++){const x=m(v,y);if(y===0)f[x]=i?0:h[x];else{const b=m(v,y-1);f[x]=i?h[b]+f[b]:h[x]+f[b]}}const g=n.makeTensorInfo(l.shape,d,f);if(u!=null){const v=af(u),y=$s({inputs:{x:g},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),y}return g}const BFe={kernelName:mE,backendName:"cpu",kernelFunc:LFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i,binaryOutput:a}=r;if(o.shape.length===1){const u=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,c=p3(u,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}else if(o.shape.length===2){const u=n.bufferSync(o),l=n.bufferSync(s),c=XZ(u,l,i,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const WFe={kernelName:iP,backendName:"cpu",kernelFunc:jFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:s,dataFormat:i}=r;U(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=o.shape[0],u=o.shape[1],l=o.shape[2],c=o.shape[3],d=u*s,f=l*s,h=c/(s*s),p=n.data.get(o.dataId).values,m=new Float32Array(a*d*f*h);let g=0;for(let v=0;v<a;++v)for(let y=0;y<d;++y){const x=Math.floor(y/s),b=y%s;for(let C=0;C<f;++C){const S=Math.floor(C/s),E=C%s,I=(b*s+E)*h;for(let T=0;T<h;++T){const O=T+I+c*(S+l*(x+u*v));m[g++]=p[O]}}}return n.makeTensorInfo([a,d,f,h],o.dtype,m)}const UFe={kernelName:aP,backendName:"cpu",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xee(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:u,dimRoundingMode:l}=r;st([o,s],"depthwiseConv2DNative");const c=gt(o.shape),d=gt(s.shape);let f=u;f==null&&(f=[1,1]),U(Qo(i,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);const h=Lo(o.shape,s.shape,i,f,a,l,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:y}=h,x=y.left,b=y.top,C=h.outChannels/h.inChannels,S=new No(h.outShape,o.dtype),E=n.data.get(o.dataId).values,I=n.data.get(s.dataId).values,T=S.values;for(let N=0;N<h.batchSize;++N){const O=N*c[0],$=N*S.strides[0];for(let A=0;A<h.outHeight;++A){const P=$+A*S.strides[1],L=A*h.strideHeight-b;for(let W=0;W<p;++W){const z=L+W*g;if(z<0||z>=h.inHeight)continue;const F=W*d[0],B=O+z*c[1];for(let H=0;H<h.outWidth;++H){const X=P+H*S.strides[2],te=H*h.strideWidth-x;for(let re=0;re<m;++re){const ue=te+re*v;if(ue<0||ue>=h.inWidth)continue;const Q=F+re*d[1],ce=B+ue*h.inChannels;let ke=X,Ce=Q;for(let _e=0;_e<h.inChannels;++_e){const Le=E[ce+_e];for(let Ie=0;Ie<C;++Ie)T[ke+Ie]+=Le*I[Ce+Ie];ke+=C,Ce+=C}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const VFe={kernelName:gE,backendName:"cpu",kernelFunc:Xee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,dilations:a,pad:u,dimRoundingMode:l,filterShape:c}=r;st([o,s],"depthwiseConv2dNativeBackpropFilter");const d=Lo(o.shape,c,i,a,u,l,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:m}=d,g=new No(d.filterShape,"float32"),v=d.padInfo.left,y=d.padInfo.top,x=d.outChannels/d.inChannels,b=n.data.get(o.dataId).values,C=new No(o.shape,o.dtype,b),S=n.data.get(s.dataId).values,E=new No(s.shape,s.dtype,S);for(let I=0;I<p;++I){const T=Math.max(0,Math.ceil((y-I)/f)),N=Math.min(d.outHeight,(d.inHeight+y-I)/f);for(let O=0;O<m;++O){const $=Math.max(0,Math.ceil((v-O)/h)),A=Math.min(d.outWidth,(d.inWidth+v-O)/h);for(let P=0;P<d.outChannels;++P){const L=Math.trunc(P/x),W=P%x;let z=0;for(let F=0;F<d.batchSize;++F)for(let B=T;B<N;++B){const H=I+B*f-y;for(let X=$;X<A;++X){const te=O+X*h-v;z+=C.get(F,H,te,L)*E.get(F,B,X,P)}}g.set(z,I,O,L,W)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const GFe={kernelName:uP,backendName:"cpu",kernelFunc:HFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YFe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{strides:i,dilations:a,pad:u,dimRoundingMode:l,inputShape:c}=r;st([o,s],"depthwiseConv2DNativeBackpropInput");const d=gt(o.shape),f=gt(s.shape),h=Lo(c,s.shape,i,a,u,l,!0),p=new No(h.inShape,"float32"),m=p.values,[g,v,y]=p.strides,x=n.data.get(o.dataId).values,[b,C,S]=d,E=n.data.get(s.dataId).values,[I,T,N]=f,{batchSize:O,filterHeight:$,filterWidth:A,inChannels:P,inHeight:L,inWidth:W,outChannels:z,outHeight:F,outWidth:B,strideHeight:H,strideWidth:X}=h,te=$-1-h.padInfo.top,re=A-1-h.padInfo.left,ue=z/P;for(let Q=0;Q<O;++Q)for(let ce=0;ce<P;++ce)for(let ke=0;ke<L;++ke){const Ce=ke-te,_e=Math.max(0,Math.ceil(Ce/H)),Le=Math.min(F,($+Ce)/H);for(let Ie=0;Ie<W;++Ie){const Pe=Ie-re,Ue=Math.max(0,Math.ceil(Pe/X)),lt=Math.min(B,(A+Pe)/X);let Me=0;for(let Ke=_e;Ke<Le;++Ke){const xt=Ke*H-Ce;for(let _t=Ue;_t<lt;++_t){const tn=_t*X-Pe,Ot=b*Q+C*Ke+S*_t,jt=I*($-1-xt)+T*(A-1-tn)+N*ce;for(let sn=0;sn<ue;++sn){const An=ce*ue+sn,Ne=x[Ot+An],ze=E[jt+sn];Me+=Ne*ze}}}m[g*Q+v*ke+y*Ie+ce]=Me}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const qFe={kernelName:lP,backendName:"cpu",kernelFunc:YFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KFe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=xe(r.shape),s=n.data.get(r.dataId).values,i=Ht([o,o],r.dtype),a=i.values;for(let l=0;l<s.length;l++)a[l*o+l]=s[l];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,i.dtype,i.values)}const XFe={kernelName:xK,backendName:"cpu",kernelFunc:KFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QFe={kernelName:vE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o}=t,{strides:s,pad:i,dilations:a}=n,u=e,l=u.data.get(r.dataId).values,c=r.shape.length,d=u.data.get(o.dataId).values,f=o.shape.length,{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:v,outWidth:y,padInfo:x,strideHeight:b,strideWidth:C,filterHeight:S,filterWidth:E,dilationHeight:I,dilationWidth:T,outShape:N}=I1(r.shape,o.shape,s,i,"NHWC",a),O=xe(N),$=N.length,A=$r(r.dtype,O);for(let L=0;L<h;++L)for(let W=0;W<v;++W){const z=W*b-x.top;for(let F=0;F<y;++F){const B=F*C-x.left;for(let H=0;H<g;++H){let X=Number.MIN_SAFE_INTEGER;for(let re=0;re<S;++re){const ue=z+re*I;if(ue>=0&&ue<p)for(let Q=0;Q<E;++Q){const ce=B+Q*T;if(ce>=0&&ce<m){const ke=Uu([L,ue,ce,H],c,gt(r.shape)),Ce=Uu([re,Q,H],f,gt(o.shape)),_e=l[ke]+d[Ce];_e>X&&(X=_e)}}}const te=Uu([L,W,F,H],$,gt(N));A[te]=X}}}return{dataId:u.write(Yh(A,r.dtype),N,r.dtype),shape:N,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JFe={kernelName:YR,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:s}=t,{strides:i,pad:a,dilations:u}=n,l=e,c=qa(r.shape,l.data.get(r.dataId).values),d=qa(o.shape,l.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:v,padInfo:y,strideHeight:x,strideWidth:b,filterHeight:C,filterWidth:S,dilationHeight:E,dilationWidth:I,outShape:T}=I1(r.shape,o.shape,i,a,"NHWC",u);U(s.rank===T.length,()=>`Error in ${YR}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);const N=qa(T,l.data.get(s.dataId).values),O=mK(o.shape,o.dtype);for(let A=0;A<f;++A)for(let P=0;P<g;++P){const L=P*x-y.top;for(let W=0;W<v;++W){const z=W*b-y.left;for(let F=0;F<m;++F){let B=Number.MIN_SAFE_INTEGER,H=0,X=0;for(let te=0;te<C;++te){const re=L+te*E;if(re>=0&&re<h)for(let ue=0;ue<S;++ue){const Q=z+ue*I;if(Q>=0&&Q<p){const ce=c[A][re][Q][F]+d[te][ue][F];ce>B&&(B=ce,H=te,X=ue)}}}O[H][X][F]+=N[A][P][W][F]}}}return{dataId:l.write(Yh(O,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZFe={kernelName:GR,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:s}=t,{strides:i,pad:a,dilations:u}=n,l=e,c=qa(r.shape,l.data.get(r.dataId).values),d=qa(o.shape,l.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:v,padInfo:y,strideHeight:x,strideWidth:b,filterHeight:C,filterWidth:S,dilationHeight:E,dilationWidth:I,outShape:T}=I1(r.shape,o.shape,i,a,"NHWC",u);U(s.rank===T.length,()=>`Error in ${GR}, dy must have the same rank as output ${T.length}, but got ${s.rank}`);const N=qa(T,l.data.get(s.dataId).values),O=mK(r.shape,r.dtype);for(let A=0;A<f;++A)for(let P=0;P<g;++P){const L=P*x-y.top;for(let W=0;W<v;++W){const z=W*b-y.left;for(let F=0;F<m;++F){let B=Number.MIN_SAFE_INTEGER,H=L<0?0:L,X=z<0?0:z;for(let te=0;te<C;++te){const re=L+te*E;if(re>=0&&re<h)for(let ue=0;ue<S;++ue){const Q=z+ue*I;if(Q>=0&&Q<p){const ce=c[A][re][Q][F]+d[te][ue][F];ce>B&&(B=ce,H=re,X=Q)}}}O[A][H][X][F]+=N[A][P][W][F]}}}return{dataId:l.write(Yh(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(t){const{inputs:e,backend:n,attrs:r}=t,{image:o}=e,{canvas:s,options:i}=r,{contextOptions:a,imageOptions:u}=i||{},l=(u==null?void 0:u.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=s.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${c} type.`);const[f,h]=o.shape.slice(0,2),p=o.shape.length===2?1:o.shape[2],m=n.data.get(o.dataId).values,g=o.dtype==="float32"?255:1,v=new Uint8ClampedArray(h*f*4);for(let x=0;x<f*h;++x){const b=[0,0,0,255*l];for(let S=0;S<p;S++){const E=m[x*p+S];if(o.dtype==="float32"){if(E<0||E>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${E}.`)}else if(o.dtype==="int32"&&(E<0||E>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${E}.`);p===1?(b[0]=E*g,b[1]=E*g,b[2]=E*g):b[S]=E*g}const C=x*4;v[C+0]=Math.round(b[0]),v[C+1]=Math.round(b[1]),v[C+2]=Math.round(b[2]),v[C+3]=Math.round(b[3])}s.width=h,s.height=f;const y=new ImageData(v,h,f);return d.putImageData(y,0,0),o}const t3e={kernelName:MSe,backendName:"cpu",kernelFunc:e3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;st(o,"sum");let a;o.dtype==="bool"?a=Vd({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=ol({inputs:{x:o},backend:n});const u=a.shape.length,l=Gt(s,a.shape),c=br(l,u);let d=l,f=a;c!=null&&(f=$s({inputs:{x:a},backend:n,attrs:{perm:c}}),d=Br(d.length,u)),Bo("sum",d,f.shape.length);const[h,p]=Co(f.shape,d),m=ri(f.dtype,"int32");let g=t2(n,h,m);const v=xe(p),y=n.data.get(g.dataId).values,x=n.data.get(f.dataId).values;for(let b=0;b<y.length;++b){const C=b*v;let S=0;for(let E=0;E<v;++E)S+=x[C+E];y[b]=S}if(i){const b=Kr(g.shape,l),C=g;g=Yn({inputs:{x:g},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(f),g}const n3e={kernelName:XE,backendName:"cpu",kernelFunc:U1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,s=e,{allDims:i,summedDims:a,idDims:u}=LF(o,s.length);jF(i.length,u,s);const{path:l,steps:c}=WF(a,u),d=c.length;let f=null,h=i.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:v,expandDims:y}=BF(h,u[g]);let x;zF(v)?x=s[g]:(x=$s({inputs:{x:s[g]},backend:n,attrs:{perm:v}}),p.push(x));const b=x.shape.slice();for(let C=0;C<y.length;++C)b.splice(y[C],0,1);En(x.shape,b)||(x=Yn({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),f===null?f=x:(f=__({inputs:{a:x,b:f},backend:n}),p.push(f))}m<d-1&&(l[m]>=0&&(f=U1({inputs:{x:f},backend:n,attrs:{axis:l[m]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const o3e={kernelName:cP,backendName:"cpu",kernelFunc:r3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(t){const{inputs:e,backend:n}=t,{dy:r,y:o}=e;st([r,o],"eluGrad");const s=new Float32Array(xe(o.shape)),i=n.data.get(o.dataId).values,a=n.data.get(r.dataId).values;for(let u=0;u<i.length;++u){const l=i[u];l>=0?s[u]=a[u]:s[u]=a[u]*(l+1)}return n.makeTensorInfo(o.shape,"float32",s)}const i3e={kernelName:dP,backendName:"cpu",kernelFunc:s3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3e=RF,u3e=OF,l3e=AF,c3e=$F,d3e=MF,f3e=PF,h3e=On(Gx,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+a3e*n);return e*(1-((((f3e*r+d3e)*r+c3e)*r+l3e)*r+u3e)*r*Math.exp(-n*n))}),p3e={kernelName:Gx,backendName:"cpu",kernelFunc:h3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2(t){const{inputs:e,backend:n,attrs:r}=t,{input:o}=e,{dim:s}=r,i=o.shape.length,a=o.shape.slice();let u=s;return s<0&&(U(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),u=i+s+1),a.splice(u,0,1),Yn({inputs:{x:o},backend:n,attrs:{shape:a}})}const m3e={kernelName:xE,backendName:"cpu",kernelFunc:o2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3e=Wr((t,e)=>t/e),b3=ao(Vx,g3e),wO={kernelName:Vx,backendName:"cpu",kernelFunc:b3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qee(t,e,n){const r=t.shape,o=r[0],s=r[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,l=[o,s],c=xe(l),d=qo("float32",c),f=qo("float32",c);for(let g=0;g<o;g++){const v=Rh({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,s]}}),y=Rh({inputs:{x:u},backend:n,attrs:{begin:[g,0],size:[1,s]}}),x=Gs({inputs:{real:v,imag:y},backend:n}),{real:b,imag:C}=v3e(x,e,n),S=ac(b,C);for(let E=0;E<s;E++){const I=FF(S,E);d[g*s+E]=I.real,f[g*s+E]=I.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x)}const h=n.makeTensorInfo(l,"float32",d),p=n.makeTensorInfo(l,"float32",f),m=Gs({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}function v3e(t,e,n){const r=xe(t.shape),o=n.data.get(t.dataId),s=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(y3e(r)){const a=kO(s,i,r,e,n),u=[t.shape[0],t.shape[1]];if(e){const l=n.makeTensorInfo(u,"float32",a.real),c=n.makeTensorInfo(u,"float32",a.imag),d=n.makeTensorInfo([],"float32",of(r,"float32")),f=ol({inputs:{x:d},backend:n}),h=wO.kernelFunc({inputs:{a:l,b:d},backend:n}),p=wO.kernelFunc({inputs:{a:c,b:f},backend:n}),m=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=ac(s,i),u=x3e(a,r,e);return fQ(u)}}function y3e(t){return(t&t-1)===0}function kO(t,e,n,r,o){if(n===1)return{real:t,imag:e};const s=ac(t,e),i=n/2,a=hQ(s),u=a.real,l=a.imag,c=[u.length],d=o.makeTensorInfo(c,"float32",u),f=o.makeTensorInfo(c,"float32",l),h=Gs({inputs:{real:d,imag:f},backend:o}),p=pQ(s),m=p.real,g=p.imag,v=[m.length],y=o.makeTensorInfo(v,"float32",m),x=o.makeTensorInfo(v,"float32",g),b=Gs({inputs:{real:y,imag:x},backend:o}),C=kO(u,l,i,r,o),S=C.real,E=C.imag,I=[S.length],T=o.makeTensorInfo(I,"float32",S),N=o.makeTensorInfo(I,"float32",E),O=Gs({inputs:{real:T,imag:N},backend:o}),$=kO(m,g,i,r,o),A=$.real,P=$.imag,L=[A.length],W=o.makeTensorInfo(L,"float32",A),z=o.makeTensorInfo(L,"float32",P),F=Gs({inputs:{real:W,imag:z},backend:o}),B=gQ(n,r),H=[B.real.length],X=o.makeTensorInfo(H,"float32",B.real),te=o.makeTensorInfo(H,"float32",B.imag),re=Gs({inputs:{real:X,imag:te},backend:o}),ue=__({inputs:{a:re,b:F},backend:o}),Q=fg({inputs:{a:O,b:ue},backend:o}),ce=y3({inputs:{a:O,b:ue},backend:o}),ke=Dh({inputs:{input:Q},backend:o}),Ce=Dh({inputs:{input:ce},backend:o}),_e=hg({inputs:{input:Q},backend:o}),Le=hg({inputs:{input:ce},backend:o}),Ie=pg({inputs:[ke,Ce],backend:o,attrs:{axis:0}}),Pe=pg({inputs:[_e,Le],backend:o,attrs:{axis:0}}),Ue=o.data.get(Ie.dataId).values,lt=o.data.get(Pe.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(O),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(X),o.disposeIntermediateTensorInfo(te),o.disposeIntermediateTensorInfo(re),o.disposeIntermediateTensorInfo(ue),o.disposeIntermediateTensorInfo(Q),o.disposeIntermediateTensorInfo(ce),o.disposeIntermediateTensorInfo(ke),o.disposeIntermediateTensorInfo(_e),o.disposeIntermediateTensorInfo(Ce),o.disposeIntermediateTensorInfo(Le),o.disposeIntermediateTensorInfo(Ie),o.disposeIntermediateTensorInfo(Pe),{real:Ue,imag:lt}}function x3e(t,e,n){const r=new Float32Array(e*2);for(let o=0;o<e;o++){let s=0,i=0;for(let a=0;a<e;a++){const u=vQ(o*a,e,n),l=FF(t,a);s+=l.real*u.real-l.imag*u.imag,i+=l.real*u.imag+l.imag*u.real}n&&(s/=e,i/=e),mQ(r,s,i,o)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(t){const{inputs:e,backend:n}=t,{input:r}=e,o=xe(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=Yn({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),u=Qee(a,!1,n),l=Yn({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),l}const w3e={kernelName:fP,backendName:"cpu",kernelFunc:b3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3(t){const{backend:e,attrs:n}=t,{shape:r,value:o,dtype:s}=n,i=s||Ag(o),a=$r(i,xe(r));return C3e(a,o,i),e.makeTensorInfo(r,i,a)}const k3e={kernelName:hP,backendName:"cpu",kernelFunc:w3};function C3e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3e={kernelName:pP,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,o=n,s=qo(r.dtype,xe(r.shape)),[i,a,u,l]=r.shape,c=o.data.get(r.dataId).values;for(let f=0;f<i;f++){const h=f*u*a*l;for(let p=0;p<a;p++){const m=p*(u*l);for(let g=0;g<u;g++){const v=g*l;for(let y=0;y<l;y++){const x=Math.round(u-g-1),b=h+m+v+y;let C=c[b];if(x>=0&&x<u){const S=x*l,E=h+m+S+y;C=c[E]}s[b]=C}}}}return{dataId:o.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let m=Kee({inputs:{x:o,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const g=m;if(c==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const v=Yn({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=fg({inputs:{a:m,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else m=fg({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(g)}if(h){const g=m;if(c==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const v=Yn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=r2(n,m,h,v,p),n.disposeIntermediateTensorInfo(v)}else m=r2(n,m,h,a,p);n.disposeIntermediateTensorInfo(g)}return m}const _3e={kernelName:FC,backendName:"cpu",kernelFunc:E3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let m=Xee({inputs:{x:o,filter:s},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const g=m;m=fg({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=r2(n,m,h,a,p),n.disposeIntermediateTensorInfo(g)}return m}const T3e={kernelName:LK,backendName:"cpu",kernelFunc:I3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,s=xe(r.shape),i=o.shape,a=i[i.length-1],[u,l,c,d]=bF(r,o);if(l===0)return n.makeTensorInfo(u,r.dtype,[]);const f=n.data.get(o.dataId).values,h=n.bufferSync(r),p=aee(f,h,r.dtype,l,a,c,d,r.shape,s);return n.makeTensorInfo(u,r.dtype,p.values)}const D3e={kernelName:bK,backendName:"cpu",kernelFunc:N3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:s}=e,{axis:i,batchDims:a}=r;st([o,s],"gatherV2");const u=Gt(i,o.shape)[0],l=n.data.get(s.dataId).values,c=o.shape[u];for(let b=0;b<l.length;++b){const C=l[b];U(C<=c-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const f=xe(s.shape),h=VF(o,s,u,d),p=Yn({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=Yn({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),g=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],v=n.bufferSync(m),y=n.bufferSync(p),x=uee(y,v,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,x.dtype,x.values)}const O3e={kernelName:wE,backendName:"cpu",kernelFunc:R3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3e(t){const{inputs:e,backend:n}=t,{input:r}=e,o=xe(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=Yn({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),u=Qee(a,!0,n),l=Yn({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),l}const $3e={kernelName:mP,backendName:"cpu",kernelFunc:A3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M3e=On(Zx,t=>Number.isFinite(t)?1:0,"bool"),P3e={kernelName:Zx,backendName:"cpu",kernelFunc:M3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F3e=On(e1,t=>Math.abs(t)===1/0?1:0,"bool"),L3e={kernelName:e1,backendName:"cpu",kernelFunc:F3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B3e=On(t1,t=>Number.isNaN(t)?1:0,"bool"),j3e={kernelName:t1,backendName:"cpu",kernelFunc:B3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W3e(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:s}=n,i=hee(r,o,s);return e.makeTensorInfo([i.length],"float32",i)}const z3e={kernelName:wK,backendName:"cpu",kernelFunc:W3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e=On(r1,t=>Math.log1p(t)),V3e={kernelName:r1,backendName:"cpu",kernelFunc:U3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H3e=Wr((t,e)=>t&&e),G3e=ao(_E,H3e,null,"bool"),Y3e={kernelName:_E,backendName:"cpu",kernelFunc:G3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q3e=On(IE,t=>t?0:1,"bool"),K3e={kernelName:IE,backendName:"cpu",kernelFunc:q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X3e=Wr((t,e)=>t||e),Q3e=ao(TE,X3e,null,"bool"),J3e={kernelName:TE,backendName:"cpu",kernelFunc:Q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:s,bias:i,alpha:a,beta:u}=r;st(o,"LRN");const l=o.shape[3],c=l-1,d=n.data.get(o.dataId).values,f=xe(o.shape),h=new Float32Array(f);function p(m){const g=m%l;let v=m-g+Math.max(0,g-s);const y=m-g+Math.min(g+s,c);let x=0;for(;v<=y;v++){const b=d[v];x+=b*b}return x}for(let m=0;m<f;m++){const g=p(m),v=d[m]*Math.pow(i+a*g,-u);h[m]=v}return n.makeTensorInfo(o.shape,o.dtype,h)}const eLe={kernelName:NE,backendName:"cpu",kernelFunc:Z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,y:s,dy:i}=e,{depthRadius:a,bias:u,alpha:l,beta:c}=r;st(i,"LRNGrad");const d=xe(i.shape),f=i.shape[3],h=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(d),v=d;for(let y=0;y<v;y++){const x=y%f,b=y-x+Math.max(0,x-a),C=y-x+Math.min(f,x+a+1);let S=0;for(let E=b;E<C;E++)S+=Math.pow(p[E],2);S=l*S+u;for(let E=b;E<C;E++){let I=-2*l*c*p[E]*m[y]/S;y===E&&(I+=Math.pow(S,-c)),I*=h[y],g[E]+=I}}return n.makeTensorInfo(i.shape,o.dtype,g)}const nLe={kernelName:vP,backendName:"cpu",kernelFunc:tLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jee(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:s,keepDims:i}=r,a=n;let u=o.shape;const l=u.length,c=Gt(s,u);let d=c;const f=br(d,l);let h=a.data.get(o.dataId).values;if(f!=null){const b=new Array(l);for(let C=0;C<b.length;C++)b[C]=u[f[C]];h=g3(h,u,o.dtype,f,b),d=Br(d.length,l),u=b}st(o,"max"),Bo("max",d,l);const[p,m]=Co(u,d),g=xe(m),v=mee(h,g,p,o.dtype),y=a.write(v,p,o.dtype);let x=p;return i&&(x=Kr(p,c)),{dataId:y,shape:x,dtype:o.dtype}}const rLe={kernelName:DE,backendName:"cpu",kernelFunc:Jee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;st(o,"maxPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:u}=r,l=1;U(Qo(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=va(o.shape,s,i,l,a,u);let d;if(c.filterWidth===1&&c.filterHeight===1&&En(c.inShape,c.outShape))d=ol({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=gt(o.shape),p=x3(f,o.shape,o.dtype,h,c,"max");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const sLe={kernelName:RE,backendName:"cpu",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:u,dataFormat:l}=r;st(o,"maxPool3d");const c=yc(o.shape,s,i,1,a,u,l),d=n.data.get(o.dataId).values,f=qee(d,o.shape,o.dtype,gt(o.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const aLe={kernelName:OE,backendName:"cpu",kernelFunc:iLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,{filterSize:i,strides:a,pad:u,dimRoundingMode:l}=r;st([o,s],"maxPool3DGrad");const c=yc(s.shape,i,a,1,u,l),d=n.bufferSync(s),f=XPe(d,c),h=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,v=c.dilationHeight,y=c.dilationWidth,x=c.effectiveFilterDepth,b=c.effectiveFilterHeight,C=c.effectiveFilterWidth,S=x-1-c.padInfo.front,E=C-1-c.padInfo.left,I=b-1-c.padInfo.top,T=Ht(s.shape,"float32"),N=n.bufferSync(o);for(let O=0;O<c.batchSize;++O)for(let $=0;$<c.inChannels;++$)for(let A=0;A<c.inDepth;++A)for(let P=0;P<c.inHeight;++P)for(let L=0;L<c.inWidth;++L){const W=A-S,z=P-I,F=L-E;let B=0;for(let H=0;H<x;H+=g){const X=(W+H)/h;if(!(X<0||X>=c.outDepth||Math.floor(X)!==X))for(let te=0;te<b;te+=v){const re=(z+te)/p;if(!(re<0||re>=c.outHeight||Math.floor(re)!==re))for(let ue=0;ue<C;ue+=y){const Q=(F+ue)/m;if(Q<0||Q>=c.outWidth||Math.floor(Q)!==Q)continue;const ce=x*b*C-1-f.get(O,X,re,Q,$),ke=H*b*C+te*C+ue,Ce=ce===ke?1:0;if(Ce===0)continue;const _e=N.get(O,X,re,Q,$);B+=_e*Ce}}}T.set(B,O,A,P,L,$)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const lLe={kernelName:xP,backendName:"cpu",kernelFunc:uLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s,output:i}=e,a=s;st([s,i],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:d}=r,f=va(a.shape,u,l,1,c,d),h=n.data.get(a.dataId).values,p=Ht(f.outShape,a.dtype,Yee(h,a.shape,a.dtype,f).values),m=f.strideHeight,g=f.strideWidth,v=f.dilationHeight,y=f.dilationWidth,x=f.effectiveFilterHeight,b=f.effectiveFilterWidth,C=b-1-f.padInfo.left,S=x-1-f.padInfo.top,E=Ht(a.shape,"float32"),I=n.data.get(o.dataId).values,T=Ht(o.shape,"float32",I);for(let N=0;N<f.batchSize;++N)for(let O=0;O<f.inChannels;++O)for(let $=0;$<f.inHeight;++$)for(let A=0;A<f.inWidth;++A){const P=$-S,L=A-C;let W=0;for(let z=0;z<x;z+=v){const F=(P+z)/m;if(!(F<0||F>=f.outHeight||Math.floor(F)!==F))for(let B=0;B<b;B+=y){const H=(L+B)/g;if(H<0||H>=f.outWidth||Math.floor(H)!==H)continue;const X=x*b-1-p.get(N,F,H,O),te=z*b+B,re=X===te?1:0;if(re===0)continue;const ue=T.get(N,F,H,O);W+=ue*re}}E.set(W,N,$,A,O)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const dLe={kernelName:yP,backendName:"cpu",kernelFunc:cLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(t,e,n,r,o){const s=gt(e),i=x3(t,e,n,s,o,"max"),a=Yee(t,e,n,o,!0,r);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hLe={kernelName:kK,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=e,u=n;st(r,"MaxPoolWithArgmax");const l=u.data.get(r.dataId).values,c=va(r.shape,o,s,[1,1],i),[d,f]=fLe(l,r.shape,r.dtype,a,c),h=u.write(d,c.outShape,r.dtype),p=u.write(f,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=Gt(s,o.shape),l=Co(o.shape,a)[1],c=xe(l),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(f);const h=Vd({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=b3({inputs:{a:h,b:f},backend:n});d.push(p);const m=U1({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:i}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const mLe={kernelName:AE,backendName:"cpu",kernelFunc:pLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;st(o,"min");const a=Gt(s,o.shape);let u=a;const l=br(u,o.shape.length);let c=o;l!=null&&(c=$s({inputs:{x:o},backend:n,attrs:{perm:l}}),u=Br(u.length,o.shape.length)),Bo("min",u,c.shape.length);const[d,f]=Co(c.shape,u),h=xe(f),p=Ko(xe(d),c.dtype),m=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const y=v*h;let x=m[y];for(let b=0;b<h;++b){const C=m[y+b];(Number.isNaN(C)||C<x)&&(x=C)}p[v]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const v=Kr(d,a),y=Yn({inputs:{x:g},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(g),y}return g}const vLe={kernelName:$E,backendName:"cpu",kernelFunc:gLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,mode:i}=r;st(o,"mirrorPad");const a=s.map((x,b)=>x[0]+o.shape[b]+x[1]),u=s.map(x=>x[0]),l=s.map((x,b)=>x[0]+o.shape[b]),c=i==="reflect"?0:1,d=n.data.get(o.dataId).values,f=o.shape.length,h=gt(o.shape),p=xe(a),m=a.length,g=gt(a),v=qo(o.dtype,p);for(let x=0;x<p;x++){let b=$g(x,m,g);for(let S=0;S<m;S++)b[S]<u[S]?b[S]=u[S]*2-b[S]-c:b[S]>=l[S]&&(b[S]=(l[S]-1)*2-b[S]+c);b=b.map((S,E)=>S-u[E]);const C=Uu(b,f,h);v[x]=d[C]}return{dataId:n.write(v,a,o.dtype),shape:a,dtype:o.dtype}}const xLe={kernelName:ME,backendName:"cpu",kernelFunc:yLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bLe=Wr((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),wLe=ao(i1,bLe),kLe={kernelName:i1,backendName:"cpu",kernelFunc:wLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:s}=r,i=o.shape.length;let a=s;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const u=Gt([a],o.shape),l=Jee({inputs:{x:o},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=Kr(l.shape,u),d=Yn({inputs:{x:l},backend:n,attrs:{shape:c}}),f=y3({inputs:{a:o,b:d},backend:n}),h=ree({inputs:{x:f},backend:n}),p=U1({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),m=Yn({inputs:{x:p},backend:n,attrs:{shape:c}}),g=b3({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const CLe={kernelName:ZE,backendName:"cpu",kernelFunc:Zee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:s,seed:i,normalized:a}=r;st(o,"multinomial");const u=a?o:Zee({inputs:{logits:o},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],d=n.data.get(u.dataId).values,f=[l,s],h=Ko(xe(f),"int32");for(let p=0;p<l;++p){const m=p*c,g=new Float32Array(c-1);g[0]=d[m];for(let x=1;x<g.length;++x)g[x]=g[x-1]+d[m+x];const v=iF.alea(i.toString()),y=p*s;for(let x=0;x<s;++x){const b=v();h[y+x]=g.length;for(let C=0;C<g.length;C++)if(b<g[C]){h[y+x]=C;break}}}return a||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",h)}const ELe={kernelName:CK,backendName:"cpu",kernelFunc:SLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Le=mF;function ILe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u}=r;st(o,"NonMaxSuppression");const l=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:d}=_Le(l,c,i,a,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const TLe={kernelName:bP,backendName:"cpu",kernelFunc:ILe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe=gF;function DLe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u,padToMaxOutputSize:l}=r;st(o,"NonMaxSuppressionPadded");const c=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:f,validOutputs:h}=NLe(c,d,i,a,u,l);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const RLe={kernelName:wP,backendName:"cpu",kernelFunc:DLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OLe=vF;function ALe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u,softNmsSigma:l}=r;st(o,"NonMaxSuppressionWithScore");const c=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,f=i,h=a,p=u,m=l,{selectedIndices:g,selectedScores:v}=OLe(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const $Le={kernelName:kP,backendName:"cpu",kernelFunc:ALe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MLe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:s,depth:i,onValue:a,offValue:u}=r;st(o,"oneHot");const l=xe(o.shape),c=new Float32Array(l*i);c.fill(u);const d=n.data.get(o.dataId).values;for(let f=0;f<l;++f)d[f]>=0&&d[f]<i&&(c[f*i+d[f]]=a);return n.makeTensorInfo([...o.shape,i],s,c)}const PLe={kernelName:BE,backendName:"cpu",kernelFunc:MLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const o=Dh({inputs:{input:r},backend:n}),s=s2({inputs:{x:o},backend:n}),i=hg({inputs:{input:r},backend:n}),a=s2({inputs:{x:i},backend:n}),u=Gs({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),u}else return w3({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const FLe={kernelName:n_,backendName:"cpu",kernelFunc:s2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ete(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const o=Dh({inputs:{input:r},backend:n}),s=ete({inputs:{x:o},backend:n}),i=hg({inputs:{input:r},backend:n}),a=s2({inputs:{x:i},backend:n}),u=Gs({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),u}else return w3({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const LLe={kernelName:LE,backendName:"cpu",kernelFunc:ete};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tte(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return o2({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const s=e[0].shape,i=e[0].dtype;e.forEach(c=>{UM(s,c.shape,"All tensors passed to stack must have matching shapes"),U(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],u=e.map(c=>{const d=o2({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),l=pg({inputs:u,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const BLe={kernelName:jE,backendName:"cpu",kernelFunc:tte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,constantValue:i}=r;st(o,"pad");const a=s.map((y,x)=>y[0]+o.shape[x]+y[1]),u=s.map(y=>y[0]),l=n.data.get(o.dataId).values,c=xe(o.shape),d=o.shape.length,f=gt(o.shape),h=xe(a),p=a.length,m=gt(a),g=qo(o.dtype,h);i!==0&&g.fill(i);for(let y=0;y<c;y++){const b=$g(y,d,f).map((S,E)=>S+u[E]),C=Uu(b,p,m);g[C]=l[y]}return{dataId:n.write(g,a,o.dtype),shape:a,dtype:o.dtype}}const nte={kernelName:WE,backendName:"cpu",kernelFunc:jLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WLe=Wr((t,e)=>Math.pow(t,e)),zLe=ao(u1,WLe),ULe={kernelName:u1,backendName:"cpu",kernelFunc:zLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VLe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=e,a=o.map(g=>n.data.get(g.dataId).values),u=o.map(g=>g.shape),l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,[d,f,h]=wee(a,u,l,s.shape,s.dtype,c,i.shape),p=d.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(h,s.dtype,f);return p.concat([m])}const HLe={kernelName:SK,backendName:"cpu",kernelFunc:VLe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GLe(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,[l,c]=kee(i,r.shape,r.dtype,a,o.shape,u,s.shape),d=n.makeTensorInfo([l.length],"int32",l),f=n.makeTensorInfo([c.length],r.dtype,c);return[d,f]}const YLe={kernelName:EK,backendName:"cpu",kernelFunc:GLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:u}=r,l=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,f=a.map(g=>n.data.get(g.dataId).values),h=a.map(g=>g.shape),[p,m]=Cee(l,o.shape,c,s.shape,s.dtype,d,i.shape,f,h,u);return n.makeTensorInfo(p,s.dtype,m)}const KLe={kernelName:_K,backendName:"cpu",kernelFunc:qLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XLe(t){const{backend:e,attrs:n}=t,{start:r,stop:o,dtype:s,step:i}=n,a=See(r,o,i,s);return e.makeTensorInfo([a.length],s,a)}const QLe={kernelName:CP,backendName:"cpu",kernelFunc:XLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JLe=On(l1,t=>1/t),ZLe={kernelName:l1,backendName:"cpu",kernelFunc:JLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r;st(o,"resizeBilinear");const u=gt(o.shape),[l,c]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(xe([d,l,c,p])),v=[s&&l>1?f-1:f,s&&c>1?h-1:h],y=[s&&l>1?l-1:l,s&&c>1?c-1:c];let x=0;const b=v[0]/y[0],C=v[1]/y[1];for(let S=0;S<d;S++)for(let E=0;E<l;E++){let I;i?I=b*(E+.5)-.5:I=b*E;const T=Math.max(0,Math.floor(I)),N=I-T,O=Math.min(f-1,Math.ceil(I)),$=S*u[0]+T*u[1],A=S*u[0]+O*u[1];for(let P=0;P<c;P++){let L;i?L=C*(P+.5)-.5:L=C*P;const W=Math.max(0,Math.floor(L)),z=L-W,F=Math.min(h-1,Math.ceil(L)),B=$+W*u[2],H=A+W*u[2],X=$+F*u[2],te=A+F*u[2];for(let re=0;re<p;re++){const ue=m[B+re],Q=m[H+re],ce=m[X+re],ke=m[te+re],Ce=ue+(ce-ue)*z,_e=Q+(ke-Q)*z,Le=Ce+(_e-Ce)*N;g[x++]=Le}}}return n.makeTensorInfo([d,l,c,p],"float32",g)}const t4e={kernelName:GE,backendName:"cpu",kernelFunc:e4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r;st([s,o],"resizeBilinearGrad");const a=gt(o.shape),[u,l,c,d]=o.shape,[,f,h]=s.shape,p=new Float32Array(u*l*c*d),m=[i&&f>1?l-1:l,i&&h>1?c-1:c],g=[i&&f>1?f-1:f,i&&h>1?h-1:h],v=m[0]/g[0],y=m[1]/g[1],x=n.data.get(s.dataId).values;let b=0;for(let C=0;C<u;C++){const S=C*a[0];for(let E=0;E<f;E++){const I=E*v,T=Math.floor(I),N=Math.min(Math.ceil(I),l-1),O=S+T*a[1],$=S+N*a[1],A=I-T,P=1-A;for(let L=0;L<h;L++){const W=L*y,z=Math.floor(W),F=Math.min(Math.ceil(W),c-1),B=W-z,H=1-B,X=O+z*a[2],te=O+F*a[2],re=$+z*a[2],ue=$+F*a[2],Q=P*H,ce=P*B,ke=A*H,Ce=A*B;for(let _e=0;_e<d;_e++){const Le=x[b++];p[X+_e]+=Le*Q,p[te+_e]+=Le*ce,p[re+_e]+=Le*ke,p[ue+_e]+=Le*Ce}}}}return n.makeTensorInfo([u,c,l,d],"float32",p)}const r4e={kernelName:_P,backendName:"cpu",kernelFunc:n4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r;st(o,"resizeNearestNeighbor");const u=gt(o.shape),[l,c]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*l*c*p),v=[s&&l>1?f-1:f,s&&c>1?h-1:h],y=[s&&l>1?l-1:l,s&&c>1?c-1:c],x=v[0]/y[0],b=v[1]/y[1];let C=0;for(let S=0;S<d;S++){const E=S*u[0];for(let I=0;I<l;I++){const T=i?x*(I+.5):x*I;let N=Math.min(f-1,s?Math.round(T):Math.floor(T));i&&(N=Math.max(0,N));const O=E+N*u[1];for(let $=0;$<c;$++){const A=i?b*($+.5):b*$;let P=Math.min(h-1,s?Math.round(A):Math.floor(A));i&&(P=Math.max(0,P));const L=O+P*u[2];for(let W=0;W<p;W++){const z=m[L+W];g[C++]=z}}}}return n.makeTensorInfo([d,l,c,p],o.dtype,g)}const s4e={kernelName:HE,backendName:"cpu",kernelFunc:o4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r;st([s,o],"resizeNearestNeighborGrad");const a=gt(o.shape),u=gt(s.shape),[l,c,d,f]=o.shape,[,h,p]=s.shape,m=new Float32Array(l*c*d*f),g=n.data.get(s.dataId).values,v=[i&&h>1?c-1:c,i&&p>1?d-1:d],y=[i&&h>1?h-1:h,i&&p>1?p-1:p],x=v[0]/y[0],b=v[1]/y[1],C=1/x,S=1/b,E=Math.ceil(C)*2+2,I=Math.ceil(S)*2+2;for(let T=0;T<l;T++){const N=T*a[0];for(let O=0;O<c;O++){const $=N+O*a[1],A=Math.floor(O*C),P=Math.floor(A-E/2);for(let L=0;L<d;L++){const W=$+L*a[2],z=Math.floor(L*S),F=Math.floor(z-I/2);for(let B=0;B<f;B++){let H=0;for(let X=0;X<E;X++){const te=X+P;if(te<0||te>=h)continue;const re=N+te*u[1],ue=te*x,Q=Math.min(c-1,i?Math.round(ue):Math.floor(ue));if(O===Q)for(let ce=0;ce<I;ce++){const ke=ce+F;if(ke<0||ke>=p)continue;const Ce=re+ke*u[2],_e=ke*b,Le=Math.min(d-1,i?Math.round(_e):Math.floor(_e));L===Le&&(H+=g[Ce+B])}}m[W+B]=H}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}const a4e={kernelName:EP,backendName:"cpu",kernelFunc:i4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:s}=r;st(o,"reverse");const i=o.shape.length,a=Gt(s,o.shape);if(i===0)return ol({inputs:{x:o},backend:n});const u=new No(o.shape,o.dtype),l=n.bufferSync(o);for(let c=0;c<u.size;c++){const d=u.indexToLoc(c),f=d.slice();a.forEach(h=>f[h]=o.shape[h]-1-f[h]),u.set(l.get(...f),...d)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}const l4e={kernelName:YE,backendName:"cpu",kernelFunc:u4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c4e={kernelName:AP,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:s,center:i}=e,a=n,u=qo(r.dtype,xe(r.shape)),[l,c,d,f]=r.shape,[h,p]=TF(i,c,d),m=255,g=Math.sin(o),v=Math.cos(o),y=a.data.get(r.dataId).values;for(let b=0;b<l;b++){const C=b*d*c*f;for(let S=0;S<c;S++){const E=S*(d*f);for(let I=0;I<d;I++){const T=I*f;for(let N=0;N<f;N++){const O=[l,S,I,N],$=O[2],A=O[1];let P=($-h)*v-(A-p)*g,L=($-h)*g+(A-p)*v;P=Math.round(P+h),L=Math.round(L+p);let W=s;if(typeof s!="number"&&(N===3?W=m:W=s[N]),P>=0&&P<d&&L>=0&&L<c){const F=L*(d*f),B=P*f,H=C+F+B+N;W=y[H]}const z=C+E+T+N;u[z]=W}}}}return{dataId:a.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e=On(f1,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),f4e={kernelName:f1,backendName:"cpu",kernelFunc:d4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h4e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:s}=e,{shape:i}=r,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=Qh(s,o,i),f=!0,h=n.bufferSync(o),p=n.bufferSync(s),m=Vf(h,p,i,d,l,u,a,c,0,f);return n.makeTensorInfo(i,m.dtype,m.values)}const p4e={kernelName:IK,backendName:"cpu",kernelFunc:h4e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m4e(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<e?n=o+1:r=o;return r}function g4e(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<=e?n=o+1:r=o;return r}function v4e(t,e,n,r,o,s){const i=$r("int32",n*o);for(let a=0;a<n;++a){const u=t.slice(a*r,(a+1)*r),l=a*o;for(let c=0;c<o;++c)i[l+c]=s==="left"?m4e(u,e[c+l]):g4e(u,e[c+l])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y4e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:s}=e,{side:i}=r,a=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,l=v4e(a,u,o.shape[0],o.shape[1],s.shape[1],i);return n.makeTensorInfo(s.shape,"int32",l)}const x4e={kernelName:NK,backendName:"cpu",kernelFunc:y4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b4e(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:s}=e;st([r,o,s],"select");const i=r.shape.length,a=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,c=ri(o.dtype,s.dtype),d=Ko(xe(o.shape),c);let f=0;const h=i===0||i>1||o.shape.length===1?1:xe(o.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<h;m++)a[p]===1?d[f++]=u[p]:d[f++]=l[p];return n.makeTensorInfo(o.shape,c,d)}const w4e={kernelName:qE,backendName:"cpu",kernelFunc:b4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k4e=h_,C4e=p_,S4e=On(p1,t=>t>=0?C4e*t:k4e*(Math.exp(t)-1)),E4e={kernelName:p1,backendName:"cpu",kernelFunc:S4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e=On(v1,t=>t<0?-1:t>0?1:0),I4e={kernelName:v1,backendName:"cpu",kernelFunc:_4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e=On(m1,t=>Math.sin(t)),N4e={kernelName:m1,backendName:"cpu",kernelFunc:T4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4e=On(g1,t=>Math.sinh(t)),R4e={kernelName:g1,backendName:"cpu",kernelFunc:D4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e=11920928955078125e-23,ZU=Math.log(O4e)+2,A4e=On(x1,t=>{const e=t>-ZU,n=t<ZU,r=Math.exp(t);let o;return n?o=r:e?o=t:o=Math.log(1+r),o}),$4e={kernelName:x1,backendName:"cpu",kernelFunc:A4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,paddings:i}=r;st([o],"spaceToBatchND");const a=xe(s),u=[[0,0]];u.push(...i);for(let S=1+s.length;S<o.shape.length;++S)u.push([0,0]);const l=nte.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:u,constantValue:0}}),c=O1(l.shape,s,a,!1),d=A1(c.length,s.length,!1),f=$1(l.shape,s,a,!1),m=Yn({inputs:{x:l},backend:n,attrs:{shape:c}}),y=$s({inputs:{x:m},backend:n,attrs:{perm:d}}),C=Yn({inputs:{x:y},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),C}const P4e={kernelName:QE,backendName:"cpu",kernelFunc:M4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F4e(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values[0],[d,f,h,p,m]=Tee(a,r.shape,r.dtype,u,o.dtype,l,c);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const L4e={kernelName:DK,backendName:"cpu",kernelFunc:F4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.data.get(o.dataId).values),a=n.data.get(r.dataId).values,u=Array.from(n.data.get(s.dataId).values),[l,c,d]=Nee(a,r.shape,r.dtype,i,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const j4e={kernelName:RK,backendName:"cpu",kernelFunc:B4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W4e(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,[l,c]=v3(i,r.shape,r.dtype,a,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const z4e={kernelName:OK,backendName:"cpu",kernelFunc:W4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U4e(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,[l,c]=v3(i,r.shape,r.dtype,a,u);return n.makeTensorInfo(c,r.dtype,l)}const V4e={kernelName:AK,backendName:"cpu",kernelFunc:U4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H4e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:s,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:d,outputSize:f}=Qh(s,o,a),h=!1,p=n.bufferSync(o);let m;switch(s.dtype){case"bool":{const g=n.bufferSync(s),v=!!n.data.get(i.dataId).values[0];m=Vf(p,g,a,f,c,l,u,d,v,h);break}case"float32":{const g=n.bufferSync(s),v=n.data.get(i.dataId).values[0];m=Vf(p,g,a,f,c,l,u,d,v,h);break}case"int32":{const g=n.bufferSync(s),v=n.data.get(i.dataId).values[0];m=Vf(p,g,a,f,c,l,u,d,v,h);break}case"string":{const g=n.bufferSync(s),v=Bd(n.data.get(i.dataId).values[0]);m=Vf(p,g,a,f,c,l,u,d,v,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const G4e={kernelName:$K,backendName:"cpu",kernelFunc:H4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:s,axis:i}=r,a=Gt(i,o.shape)[0],u=UF(o,s,a),l=new Array(o.shape.length).fill(0),c=o.shape.slice();return u.map(d=>{const f=[...c];f[a]=d;const h=Rh({inputs:{x:o},backend:n,attrs:{begin:l,size:f}});return l[a]+=d,h})}const q4e={kernelName:JE,backendName:"cpu",kernelFunc:Y4e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K4e={kernelName:IP,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;st(n,"square");const o=r.data.get(n.dataId).values,s=new Float32Array(o.length);for(let a=0;a<o.length;++a){const u=o[a];s[a]=u*u}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e=On(_1,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),Q4e={kernelName:_1,backendName:"cpu",kernelFunc:X4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,end:i,strides:a,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=r;st(o,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:y,end:x,strides:b}=EF(o.shape,s,i,a,u,l,c,d,f);let C;if(m)C=Yn({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||v){U(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const S=kF(y,x,b),E=Rh({inputs:{x:o},backend:n,attrs:{begin:y,size:S}});C=Yn({inputs:{x:E},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(E)}else{const S=n.bufferSync(o),E=Oee(h,S,b,y);C=n.makeTensorInfo(p,E.dtype,E.values)}return C}const Z4e={kernelName:NP,backendName:"cpu",kernelFunc:J4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eBe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:d}=e,f=n.data.get(c.dataId).values,h=n.data.get(d.dataId).values,[p,m]=Aee(f,h,o,s,i,a,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const tBe={kernelName:MK,backendName:"cpu",kernelFunc:eBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nBe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values[0],[l,c,d]=$ee(a,u,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",l),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const rBe={kernelName:PK,backendName:"cpu",kernelFunc:nBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oBe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(s.dataId).values,a=Mee(i,o);return n.makeTensorInfo(s.shape,"int32",a)}const sBe={kernelName:FK,backendName:"cpu",kernelFunc:oBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iBe=On(C1,t=>Math.tan(t)),aBe={kernelName:C1,backendName:"cpu",kernelFunc:iBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uBe=On(S1,t=>Math.tanh(t)),lBe={kernelName:S1,backendName:"cpu",kernelFunc:uBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cBe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:o,updates:s}=e,{sliceRank:i,numUpdates:a,sliceSize:u,strides:l,outputSize:c}=Qh(s,o,r.shape),d=!1,f=n.bufferSync(o),h=n.bufferSync(s),p=n.bufferSync(r),m=Vf(f,h,r.shape,c,u,a,i,l,p,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const dBe={kernelName:TK,backendName:"cpu",kernelFunc:cBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:s}=r;st(o,"tile");const i=Fee(n.bufferSync(o),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const hBe={kernelName:E1,backendName:"cpu",kernelFunc:fBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:s,sorted:i}=r;st(o,"topk");const a=n.data.get(o.dataId).values,[u,l]=Bee(a,o.shape,o.dtype,s,i);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}const mBe={kernelName:DP,backendName:"cpu",kernelFunc:pBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gBe(t){const{inputs:e,attrs:n,backend:r}=t,{image:o,transforms:s}=e,{interpolation:i,fillMode:a,fillValue:u,outputShape:l}=n,[c,d,f,h]=o.shape,[p,m]=l??[d,f],g=[c,p,m,h],v=gt(o.shape),y=v[0],x=v[1],b=v[2],C=gt(g),S=C[0],E=C[1],I=C[2],T=qo(o.dtype,xe(g));T.fill(u);const N=r.data.get(o.dataId).values,O=r.data.get(s.dataId).values;for(let A=0;A<c;++A){const P=s.shape[0]===1?O:O.subarray(A*8,A*8+8);for(let L=0;L<p;++L)for(let W=0;W<m;++W)for(let z=0;z<h;++z){let F;const B=P[6]*W+P[7]*L+1;if(B===0)continue;const H=(P[0]*W+P[1]*L+P[2])/B,X=(P[3]*W+P[4]*L+P[5])/B,te=eV(H,f,a),re=eV(X,d,a);switch(i){case"nearest":F=kBe(N,d,f,y,x,b,A,re,te,z,u);break;case"bilinear":F=CBe(N,d,f,y,x,b,A,re,te,z,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const ue=A*S+L*E+W*I+z;T[ue]=F}return r.makeTensorInfo(g,o.dtype,T)}return{dataId:r.write(T,g,o.dtype),shape:o.shape,dtype:o.dtype}}const vBe={kernelName:RP,backendName:"cpu",kernelFunc:gBe};function eV(t,e,n){switch(n){case"reflect":return yBe(t,e);case"wrap":return xBe(t,e);case"nearest":return wBe(t,e);case"constant":default:return bBe(t)}}function yBe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return bh(0,n,e-1)}function xBe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return bh(0,n,e-1)}function bBe(t,e){return t}function wBe(t,e){return bh(0,t,e-1)}function ry(t,e,n,r,o,s,i,a,u,l,c){const d=i*r+a*o+u*s+l;return 0<=a&&a<e&&0<=u&&u<n?t[d]:c}function kBe(t,e,n,r,o,s,i,a,u,l,c){const d=Math.round(a),f=Math.round(u);return ry(t,e,n,r,o,s,i,d,f,l,c)}function CBe(t,e,n,r,o,s,i,a,u,l,c){const d=Math.floor(a),f=Math.floor(u),h=d+1,p=f+1,m=(p-u)*ry(t,e,n,r,o,s,i,d,f,l,c)+(u-f)*ry(t,e,n,r,o,s,i,d,p,l,c),g=(p-u)*ry(t,e,n,r,o,s,i,h,f,l,c)+(u-f)*ry(t,e,n,r,o,s,i,h,p,l,c);return(h-a)*m+(a-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SBe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:s}=e;st(s,"unique");const i=r.data.get(s.dataId).values,{outputValues:a,outputShape:u,indices:l}=jee(i,o,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,a),r.makeTensorInfo([l.length],"int32",l)]}const EBe={kernelName:OP,backendName:"cpu",kernelFunc:SBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:s}=r;s<0&&(s+=o.shape.length);const i=o.shape.length,a=o.shape[s],u=new Array(i-1);let l=0;for(let h=0;h<i;h++)h!==s&&(u[l++]=o.shape[h]);const c=new Array(i).fill(0),d=o.shape.slice();d[s]=1;const f=new Array(a);for(let h=0;h<f.length;h++){c[s]=h;const p=Rh({inputs:{x:o},backend:n,attrs:{begin:c,size:d}});f[h]=Yn({inputs:{x:p},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(p)}return f}const IBe={kernelName:e_,backendName:"cpu",kernelFunc:_Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:s}=e,{numSegments:i}=r;st(o,"unsortedSegmentSum");const a=o.shape.length,u=s.shape.length,l=[],c=[],d=a-u;let f=s;for(let p=0;p<d;++p){const m=o2({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=m,c.push(m)}for(let p=0;p<i;++p){const m=of(p,"int32"),g=n.makeTensorInfo([],"int32",m),v=tee({inputs:{a:g,b:f},backend:n}),y=Vd({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),x=__({inputs:{a:y,b:o},backend:n}),b=U1({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});l.push(b),c.push(g),c.push(v),c.push(y),c.push(x),c.push(b)}const h=tte({inputs:l,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const NBe={kernelName:t_,backendName:"cpu",kernelFunc:TBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DBe=[SPe,oMe,_Pe,TPe,cMe,DPe,OPe,$Pe,PPe,LPe,jPe,zPe,VPe,YPe,KPe,JPe,eFe,nFe,oFe,kPe,iFe,uFe,cFe,fMe,fFe,uMe,pMe,pFe,sMe,gFe,yFe,xFe,wFe,CFe,EFe,IFe,NFe,RFe,AFe,MFe,FFe,BFe,WFe,UFe,VFe,GFe,qFe,XFe,QFe,JFe,ZFe,t3e,o3e,mPe,i3e,mMe,p3e,gMe,m3e,yMe,w3e,k3e,S3e,bMe,kMe,_3e,T3e,D3e,O3e,SMe,_Me,iMe,$3e,vFe,P3e,L3e,j3e,gPe,TMe,DMe,z3e,OMe,V3e,Y3e,K3e,J3e,eLe,nLe,rLe,$Me,sLe,aLe,lLe,dLe,hLe,mLe,vLe,PMe,xLe,kLe,ELe,LMe,jMe,TLe,RLe,$Le,zMe,PLe,LLe,BLe,nte,ULe,yPe,HMe,HLe,YLe,KLe,QLe,aMe,wO,ZLe,xPe,bPe,wPe,t4e,r4e,s4e,a4e,l4e,c4e,f4e,ZMe,p4e,x4e,w4e,E4e,tPe,I4e,N4e,R4e,nPe,CLe,$4e,P4e,L4e,j4e,z4e,V4e,G4e,q4e,sPe,K4e,aPe,lPe,Q4e,Z4e,tBe,rBe,sBe,hPe,n3e,aBe,lBe,dBe,hBe,mBe,vBe,UMe,EBe,IBe,NBe,FLe];for(const t of DBe)BK(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Af={},aw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function RBe(t,e){Af[t]=e}function nu(t,e){if(!(t in Af)||e!=null){const r=ABe(t,e);if(r!==null)Af[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Af[t];return n==null||n.isContextLost()?(delete Af[t],nu(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Af[t])}function OBe(t){if(!fe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ABe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??OBe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Af[t]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(aw.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",aw)||n.getContext("experimental-webgl",aw):n.getContext("webgl2",aw)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var E0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(E0||(E0={}));var xi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(xi||(xi={}));var Io;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Io||(Io={}));function V1(t,e){return[e,t]}function $Be(t,e){return t*e}function uw(t){const e=xe(t),n=Math.ceil(e/4);return zR(n)}function zg(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function MBe(t,e){const[n,r]=zg(t,e);return n*r*4}function k3(t,e){const n=t;let r,o,s,i,a,u,l,c,d,f;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,o=n.R16F,s=n.RGBA16F,i=n.RGBA32F,a=n.RED,l=4,c=1,d=n.HALF_FLOAT,f=n.FLOAT,u=n.RGBA8):(r=t.RGBA,o=t.RGBA,s=t.RGBA,i=n.RGBA,a=t.RGBA,l=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,u=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ge(t,e){const n=e();return fe().getBool("DEBUG")&&PBe(t),n}function PBe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+jBe(t,e))}const FBe=596e-10,LBe=65504;function BBe(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||FBe<Math.abs(t)&&Math.abs(t)<LBe)}function jBe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function lw(t,e){return bc(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function WBe(t,e){const n=bc(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ge(t,()=>t.shaderSource(n,e)),Ge(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function zBe(t,e){const n=bc(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ge(t,()=>t.shaderSource(n,e)),Ge(t,()=>t.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw rte(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const UBe=/ERROR: [0-9]+:([0-9]+):/g;function rte(t,e){const n=UBe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],o=t.split(`
`),s=o.length.toString().length+2,i=o.map((d,f)=>mm((f+1).toString(),s)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const u=i.slice(0,r-1),l=i.slice(r-1,r),c=i.slice(r);console.log(u.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${mm(l[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function VBe(t){return bc(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function HBe(t,e){if(Ge(t,()=>t.linkProgram(e)),!fe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function iN(t,e){if(Ge(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function GBe(t,e){const n=bc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ge(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Ge(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function YBe(t,e){const n=bc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ge(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Ge(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function qBe(t){return bc(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function KBe(t,e){const n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function XBe(t){return bc(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function tV(t,e,n,r,o,s,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(Ge(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Ge(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,s,i)),Ge(t,()=>t.enableVertexAttribArray(a)),!0)}function QBe(t,e,n){nje(t,n),Ge(t,()=>t.activeTexture(t.TEXTURE0+n)),Ge(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function JBe(t,e,n){return bc(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function ZBe(t,e,n){return t.getUniformLocation(e,n)}function eje(t,e,n,r){Ge(t,()=>QBe(t,e,r)),Ge(t,()=>t.uniform1i(n,r))}function aN(t,e,n){Ge(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Ge(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function nV(t,e){Ge(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Ge(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function cw(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+tje(t,e))}function tje(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function bc(t,e,n){const r=Ge(t,()=>e());if(r==null)throw new Error(n);return r}function nje(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function mg(t,e=2){return xe(t.slice(0,t.length-e))}function gg(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function dw(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[mg(t),...gg(t)]),e}function rje(t,e=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,u)=>u>=t.length-2?zM(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=rf(t).newShape);let o=xe(t),s=null;t.length<=1&&o<=n?s=[1,o]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const i=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||i)if(e){const a=mg(t);let u=2,l=2;t.length&&([u,l]=gg(t)),o=a*(u/2)*(l/2),s=zR(o).map(c=>c*2)}else s=zR(o);return s}function fw(t){return t%2===0}function i2(t,e){if(t=t.slice(-2),e=e.slice(-2),En(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||fw(n)&&fw(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&fw(t[0])&&fw(e[0])}let uN,lN;function oje(t){if(uN==null){const e=nu(t);uN=e.getParameter(e.MAX_TEXTURE_SIZE)}return uN}function sje(t){if(lN==null){const e=nu(t);lN=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,lN)}function ije(t){if(t===0)return 0;let e;const n=nu(t);return oa(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:oa(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function oa(t,e){return t.getExtension(e)!=null}function rV(t){try{if(nu(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function aje(t){if(t===0)return!1;const e=nu(t);if(t===1){if(!oa(e,"OES_texture_float"))return!1}else if(!oa(e,"EXT_color_buffer_float"))return!1;return CO(e)}function uje(t){if(t===0)return!1;const e=nu(t);if(t===1){if(!oa(e,"OES_texture_float")||!oa(e,"WEBGL_color_buffer_float"))return!1}else{if(oa(e,"EXT_color_buffer_float"))return CO(e);const r="EXT_color_buffer_half_float";if(oa(e,r)){const o=e.getExtension(r);return lje(e,o)}return!1}return CO(e)}function CO(t){const e=k3(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),i}function lje(t,e){const n=k3(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),a}function cje(t){return t!==2?!1:nu(t).fenceSync!=null}function H1(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&U(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ut=fe();ut.registerFlag("HAS_WEBGL",()=>ut.getNumber("WEBGL_VERSION")>0);ut.registerFlag("WEBGL_VERSION",()=>rV(2)?2:rV(1)?1:0);ut.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ut.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ut.get("WEBGL_VERSION")===2);ut.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ut.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ut.registerFlag("WEBGL_PACK",()=>ut.getBool("HAS_WEBGL"));ut.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_CLIP",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_REDUCE",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_LAZILY_UNPACK",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_CONV_IM2COL",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>oje(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>sje(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=ut.getNumber("WEBGL_VERSION");return t===0?0:ije(t)});ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ut.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!nX());ut.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>aje(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ut.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ut.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ut.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>uje(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_FENCE_API_ENABLED",()=>cje(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ut.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ut.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});ut.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>nX()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});ut.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ut.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ut.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ut.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ut.registerFlag("WEBGL_EXP_CONV",()=>!1);ut.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ut.getBool("IS_TEST"));ut.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ut.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ut.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ut.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ws(){let t,e,n,r,o,s,i,a,u,l;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",s="outputColor",i="out vec4 outputColor;",a=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",s="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:s,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:u,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ep(t,e,n="index"){const r=gt(e);return r.map((o,s)=>{const i=`int ${t[s]} = ${n} / ${o}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${o}`:`index -= ${t[s]} * ${o}`;return`${i}; ${a};`}).join("")}function I_(t,e,n="index"){const r=gt(e);return r.map((o,s)=>{const i=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${i}; ${a};`}).join("")}function dje(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),o=new Array(n-1);o[n-2]=r[n-1];for(let s=n-3;s>=0;--s)o[s]=`(${o[s+1]} * ${r[s+1]})`;return o}function fje(t,e,n="index"){const r=t.map((s,i)=>i),o=dje(r,e);return o.map((s,i)=>{const a=`int ${t[i]} = ${n} / ${o[i]}`,u=i===o.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${o[i]}`:`index -= ${t[i]} * ${o[i]}`;return`${a}; ${u};`}).join("")}function C3(t){const e=gt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function S3(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const ote=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:ste}=nRe;function hje(t,e,n){const r=[];if(t.forEach(h=>{const p=xe(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=E3(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const o=r.join(`
`),s=t.map(h=>pje(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=ws(),u=vje(a);let l,c,d=bje(a);return e.isPacked?(l=mje(e.logicalShape,i,n.enableShapeUniforms),c=xje(a)):(l=gje(e.logicalShape,i,n.enableShapeUniforms),c=yje(a)),n.packedInputs&&(d+=Sje),[d,u,c,o,l,s,n.userCode].join(`
`)}function Ug(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Pje(t,e);case 1:return Lje(t,e);case 2:return jje(t,e);case 3:return zje(t,e);case 4:return Vje(t,e);case 5:return Hje(t);case 6:return Gje(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function ite(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return Mje(t);case 1:return Fje(t,e);case 2:return Bje(t,e);case 3:return Wje(t,e);default:return Uje(t,e)}}function pje(t,e,n=!1,r){let o="";n?o+=ite(t,r):o+=Ug(t,r);const s=t.shapeInfo.logicalShape,i=e.logicalShape;return s.length<=i.length&&(n?o+=Yje(t,e):o+=qje(t,e)),o}function mje(t,e,n){switch(t.length){case 0:return ate();case 1:return Eje(t,e,n);case 2:return Aje(t,e,n);case 3:return Ije(t,e,n);default:return Nje(t,e,n)}}function gje(t,e,n){switch(t.length){case 0:return ate();case 1:return _je(t,e,n);case 2:return $je(t,e,n);case 3:return Tje(t,e,n);case 4:return Dje(t,e,n);case 5:return Rje(t,e);case 6:return Oje(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function vje(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function yje(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function xje(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function bje(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${wje}
    ${kje}
    ${Cje}
  `}const wje=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kje=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Cje=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Sje=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ate(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Eje(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function _je(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Ije(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[2]/2),s=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function Tje(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${I_(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=ep(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Nje(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[t.length-1]/2),s=o*Math.ceil(t[t.length-2]/2);let i=s,a="",u="b, r, c";for(let l=2;l<t.length-1;l++)i*=t[t.length-l-1],a=`
      int b${l} = index / ${i};
      index -= b${l} * ${i};
    `+a,u=`b${l}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${u});
    }
  `}function Dje(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${I_(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=ep(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Rje(t,e){const n=ep(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Oje(t,e){const n=ep(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Aje(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(En(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const o=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function $je(t,e,n){return En(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function tp(t){return`offset${t}`}function Mje(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=ws();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Pje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[o,s]=t.shapeInfo.texShape;if(o===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=tp(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,u]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${u}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function Fje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,s=ws();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function Lje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Vg(t)}
      }
    `;const o=t.shapeInfo.texShape,s=o[0],i=o[1];if(i===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=tp(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Bje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=s[0],a=s[1],u=ws();if(s!=null&&En(n,s))return e?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function jje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&En(n,s)){if(e)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=s[0],h=s[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:a}=rf(n),u=i;if(u.length<n.length){const f=Hg(t,u),h=["row","col"];return`
      ${Ug(f,e)}
      float ${o}(int row, int col) {
        return ${o}(${Gg(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Vg(t)}
      }
    `;const l=s[0],c=s[1],d=tp(r);return c===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function Wje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=Hg(t,f),m=["b","row","col"];return`
        ${ite(p,e)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${Gg(m,h)});
        }
      `}const a=ws();if(e)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const u=i[0],l=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${l}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function zje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],i=n[2],{newShape:a,keptDims:u}=rf(n),l=a;if(l.length<n.length){const m=Hg(t,l),g=["row","col","depth"];return`
        ${Ug(m,e)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${Gg(g,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${i}, 1)));
        ${Vg(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],f=c[1],h=t.shapeInfo.flatOffset;if(f===s&&h==null)return e?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===i&&h==null)return e?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=tp(r);return e?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Uje(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=ws();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,i=s.length,a=t.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=u[0],c=u[1],d=Math.ceil(s[i-1]/2);let f=d*Math.ceil(s[i-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)h=`int b${m}, `+h,f*=s[i-m-1],p=`b${m} * ${f} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});
      return ${o.texture2D}(${n}, uv);
    }
  `}function Vje(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],i=n[2]*s,a=n[1]*i,{newShape:u,keptDims:l}=rf(n);if(u.length<n.length){const y=Hg(t,u),x=["row","col","depth","depth2"];return`
      ${Ug(y,e)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${Gg(x,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${s}, 1)));
        ${Vg(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&c==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&c==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const v=tp(r);return e?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function Hje(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],s=e[3]*o,i=e[2]*s,a=e[1]*i,{newShape:u,keptDims:l}=rf(e);if(u.length<e.length){const m=Hg(t,u),g=["row","col","depth","depth2","depth3"];return`
      ${Ug(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Gg(g,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${s}, ${o})) +
          depth3;
        ${Vg(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${s}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=tp(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${s} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Gje(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:s}=rf(e);if(o.length<e.length){const g=Hg(t,o),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${Ug(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Gg(v,s)});
      }
    `}const i=e[5],a=e[4]*i,u=e[3]*a,l=e[2]*u,c=e[1]*l;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${l}, ${u}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${Vg(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],p=f[1];if(p===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${u}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=tp(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${l} + depth * ${u} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Vg(t){const e=t.name,n=xe(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Yje(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=ste(t.shapeInfo.logicalShape,e.logicalShape),u=Fn(i),l=i-s;let c;const d=["x","y","z","w","u","v"];s===0?c="":i<2&&a.length>=1?c="coords = 0;":c=a.map(y=>`coords.${d[y+l]} = 0;`).join(`
`);let f="";i<2&&s>0?f="coords":f=t.shapeInfo.logicalShape.map((y,x)=>`coords.${d[x+l]}`).join(", ");let h="return outputValue;";const m=xe(t.shapeInfo.logicalShape)===1,v=xe(e.logicalShape)===1;if(s===1&&!m&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!v)i===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const y=s-2,x=s-1;a.indexOf(y)>-1&&a.indexOf(x)>-1?h="return vec4(outputValue.x);":a.indexOf(y)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function qje(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===u&&t.shapeInfo.flatOffset==null&&En(i,s))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=Fn(u),c=ste(t.shapeInfo.logicalShape,e.logicalShape),d=u-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":u<2&&c.length>=1?f="coords = 0;":f=c.map(m=>`coords.${h[m+d]} = 0;`).join(`
`);let p="";return u<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${o}() {
      ${l} coords = getOutputCoords();
      ${f}
      return get${r}(${p});
    }
  `}function Fn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function E3(t,e,n){const{newShape:r,keptDims:o}=rf(e),s=e.length,i=t&&s===3&&e[0]===1,a=i?e.slice(1):r,u=!t&&s>1&&!En(e,n)&&r.length<s||i;return{useSqueezeShape:u,uniformShape:u?a:e,keptDims:o}}function Hg(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Gg(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kje(t,e,n,r){const o=n.map((c,d)=>{const f={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(f.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),s=o.map(c=>c.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=hje(o,i,e),u=zBe(t.gl,a),l=t.createProgram(u);return fe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:u,source:a,webGLProgram:l,inShapeInfos:s,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(l),Object.assign({program:e,fragmentShader:u,source:a,webGLProgram:l,inShapeInfos:s,outShapeInfo:i},ute(t,e,l)))}function ute(t,e,n){const r=[],o=[];let s,i,a,u=null,l=null;l=t.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,c),offset:t.getUniformLocation(n,`offset${d}`,c)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,c),f.texShape=t.getUniformLocation(n,`${d}TexShape`,c)),r.push(f)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),i=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const d of e.customUniforms)o.push(t.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:o,infLoc:u,nanLoc:l,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:i}}function oV(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const o=n.logicalShape,s=e[r],i=s.shape;if(!En(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,u=s.isUniform?null:s.texData.texShape;if(!En(a,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${u} must match`)})}function Xje(t,e,n,r,o){e.program.enableShapeUniforms||(oV(e.inShapeInfos,n),oV([e.outShapeInfo],[r]));const s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,i[0],i[1]):t.setOutputMatrixTexture(s.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),fe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let u=0;u<n.length;++u){const l=n[u],{uniform:c,offset:d,shape:f,texShape:h}=e.variablesLocations[u];if(f){const{uniformShape:p}=E3(e.program.packedInputs,l.shape,l.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(f,new Int32Array(p));break;case 2:t.gl.uniform2iv(f,new Int32Array(p));break;case 3:t.gl.uniform3iv(f,new Int32Array(p));break;case 4:t.gl.uniform4iv(f,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,l.texData.texShape[0],l.texData.texShape[1]),c!=null){if(l.isUniform){if(xe(l.shape)<2)t.gl.uniform1f(c,l.uniformValues[0]);else{let p=l.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}l.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,c,u)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const u=gt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(u));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&o)for(let u=0;u<e.program.customUniforms.length;++u){const l=e.program.customUniforms[u],c=e.customUniformLocations[u],d=o[u];if(l.type==="float")t.gl.uniform1fv(c,d);else if(l.type==="vec2")t.gl.uniform2fv(c,d);else if(l.type==="vec3")t.gl.uniform3fv(c,d);else if(l.type==="vec4")t.gl.uniform4fv(c,d);else if(l.type==="int")t.gl.uniform1iv(c,d);else if(l.type==="ivec2")t.gl.uniform2iv(c,d);else if(l.type==="ivec3")t.gl.uniform3iv(c,d);else if(l.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}t.executeProgram()}function Qje(t,e,n){let r="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const u=i.texData.texShape,{useSqueezeShape:l,uniformShape:c,keptDims:d}=E3(t.packedInputs,i.shape,u);let f="",h="",p="";if(c.length===1&&t.packedInputs){const C=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];f=`${C[0]>1}_${C[1]>1}`}else if(c.length===2&&!t.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const C=gt(c);p=`${C[0]===u[1]}_${C[C.length-1]===u[1]}`}const m=i.shape.length,g=c.length===2&&En(i.shape,u),v=xe(i.shape)===1,y=ug(i.shape,n.shape),x=!t.packedInputs&&m===n.shape.length&&En(u,n.texData.texShape),b=t.packedInputs||c.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${m}_${x}_${l?d:""}_${c.length}_${v}_${y}_${g}_${f}_${h}_${p}_${b}_${a}`}else{const u=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${u}_${a}`}});const o=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+o+`${fe().getNumber("WEBGL_VERSION")}`,s}function Jo(t){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jje{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=E0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ws();this.outputShape=e,this.enableShapeUniforms=Jo(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?I_(["r","c","d"],e):ep(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zje{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=E0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=ws();this.outputShape=e,this.enableShapeUniforms=Jo(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?I_(["r","c","d"],e):ep(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eWe{constructor(e){this.variableNames=["A"],this.outTexUsage=xi.DOWNLOAD;const n=ws();this.outputShape=e,this.userCode=`
      ${ote}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tWe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=xi.DOWNLOAD;const n=ws();this.outputShape=e,this.userCode=`
      ${ote}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nWe={R:0,G:1,B:2,A:3};class sV{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=ws();this.outputShape=e,this.enableShapeUniforms=Jo(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let i="";for(let a=0;a<r.length;a++){const u=r[a];i+=`
          if(offset == ${a}) {
            result = values[${nWe[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?S3():C3(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${i}
        }
        ${o.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rWe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=ws();this.outputShape=e,this.enableShapeUniforms=Jo(this.outputShape.length);let o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const u=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?S3():C3(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oWe(t){const e=ws(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return WBe(t,n)}function sWe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return GBe(t,e)}function iWe(t){const e=new Uint16Array([0,1,2,2,1,3]);return YBe(t,e)}function G1(t,e,n,r,o,s){KBe(e,n);const i=qBe(t),a=t.TEXTURE_2D;return Ge(t,()=>t.bindTexture(a,i)),Ge(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Ge(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Ge(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Ge(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?Ge(t,()=>t.texImage2D(a,0,r,e,n,0,o,s,null)):Ge(t,()=>t.texStorage2D(a,1,r,e,n)),Ge(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function lte(t){return t.internalFormatFloat}function aWe(t,e,n,r){const[o,s]=V1(e,n);return G1(t,o,s,lte(r),r.textureFormatFloat,t.FLOAT)}function cte(t){return t.internalFormatHalfFloat}function uWe(t,e,n,r){const[o,s]=V1(e,n);return G1(t,o,s,cte(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function dte(t){return t.downloadTextureFormat}function lWe(t,e,n,r){const[o,s]=V1(e,n);return G1(t,o,s,dte(r),t.RGBA,t.UNSIGNED_BYTE)}function fte(t){return t.internalFormatPackedFloat}function cWe(t,e,n,r){const[o,s]=zg(e,n);return G1(t,o,s,fte(r),t.RGBA,t.FLOAT)}function hte(t){return t.internalFormatPackedHalfFloat}function dWe(t,e,n,r){const[o,s]=zg(e,n);return G1(t,o,s,hte(r),t.RGBA,r.textureTypeHalfFloat)}function fWe(t,e,n){return Ge(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),tV(t,e,"clipSpacePos",n,3,20,0)&&tV(t,e,"uv",n,2,20,12)}function hWe(t,e,n,r,o,s){Ge(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,u;o instanceof Uint8Array?(i=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,u=t.RGBA):(i=new Float32Array(n*r*4),a=t.FLOAT,u=s.internalFormatPackedFloat),i.set(o),fe().getNumber("WEBGL_VERSION")===2?Ge(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,i)):Ge(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,a,i)),Ge(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function pWe(t,e,n){Ge(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?Ge(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ge(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?Ge(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Ge(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Ge(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function mWe(t,e,n,r){const o=t.createBuffer();Ge(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));const a=4*4*e*n;return Ge(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Ge(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Ge(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function gWe(t,e,n){const r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function vWe(t,e,n,r){const[o,s]=V1(e,n),i=4,a=new Uint8Array($Be(e*n,i));return Ge(t,()=>t.readPixels(0,0,o,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function yWe(t,e,n,r,o,s,i,a){const u=t,l=new Float32Array(MBe(s,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function xWe(t,e,n){const r=new Float32Array(e*n*4);return Ge(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cN{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=fe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,RBe(n,e)):this.gl=nu(n),e=this.gl,fe().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>Ge(s,()=>s.createVertexArray()),this.bindVertexArray=i=>Ge(s,()=>s.bindVertexArray(i)),this.deleteVertexArray=i=>Ge(s,()=>s.deleteVertexArray(i)),this.getVertexArray=()=>Ge(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Ge(e,()=>s.createVertexArrayOES()),this.bindVertexArray=i=>Ge(e,()=>s.bindVertexArrayOES(i)),this.deleteVertexArray=i=>Ge(e,()=>s.deleteVertexArrayOES(i)),this.getVertexArray=()=>Ge(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=lw(this.gl,s),oa(this.gl,i))this.textureHalfFloatExtension=lw(this.gl,i);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),oa(this.gl,o))this.colorBufferHalfFloatExtension=lw(this.gl,o);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",oa(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(oa(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=sWe(this.gl),this.indexBuffer=iWe(this.gl),this.framebuffer=XBe(this.gl),this.textureConfig=k3(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Ge(e,()=>e.finish()),Ge(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Ge(e,()=>e.deleteFramebuffer(this.framebuffer)),Ge(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Ge(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Ge(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),aWe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),uWe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),lWe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),pWe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,o){this.throwIfDisposed(),hWe(this.gl,e,n,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),dWe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),cWe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(nV(this.gl,this.framebuffer),this.outputTexture=null),Ge(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>vWe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,o,s,i){return yWe(this.gl,e,n,r,o,s,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return gWe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const o=mWe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){const o=e,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=o.clientWaitSync(s,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},n=s}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>xWe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=oWe(n));const r=VBe(n);Ge(n,()=>n.attachShader(r,this.vertexShader)),Ge(n,()=>n.attachShader(r,e)),HBe(n,r);const o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&iN(n,o),o}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Ge(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),fWe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Ge(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&iN(this.gl,this.program),Ge(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?JBe(this.gl,e,n):ZBe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Ge(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),eje(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[o,s]=zg(n,r);this.setOutputMatrixTextureDriver(e,o,s)}setOutputMatrixWriteRegion(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)}setOutputPackedMatrixWriteRegion(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&iN(this.gl,this.program),cw(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Ge(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ge(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=lw(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Gz(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=bWe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in fe().platform&&(r=fe().platform.setTimeoutCustom.bind(fe().platform)),Gz(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),aN(this.gl,e,this.framebuffer),this.debug&&cw(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(aN(this.gl,this.outputTexture,this.framebuffer),this.debug&&cw(this.gl)):nV(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const o=this.gl;aN(o,e,this.framebuffer),this.debug&&cw(o),this.outputTexture=e,Ge(o,()=>o.viewport(0,0,n,r)),Ge(o,()=>o.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,o){this.throwIfDisposed(),Ge(this.gl,()=>this.gl.scissor(e,n,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function bWe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:wWe,bincountImpl:pte,bincountReduceImpl:kWe,bitwiseAndImpl:CWe,castImpl:SWe,ceilImpl:EWe,concatImpl:_We,equalImpl:IWe,expImpl:TWe,expm1Impl:NWe,floorImpl:DWe,gatherNdImpl:RWe,gatherV2Impl:OWe,greaterImpl:AWe,greaterEqualImpl:$We,lessImpl:MWe,lessEqualImpl:PWe,linSpaceImpl:FWe,logImpl:LWe,maxImpl:BWe,maximumImpl:jWe,minimumImpl:WWe,multiplyImpl:zWe,negImpl:UWe,notEqualImpl:VWe,prodImpl:HWe,raggedGatherImpl:GWe,raggedRangeImpl:YWe,raggedTensorToTensorImpl:qWe,rangeImpl:KWe,rsqrtImpl:XWe,scatterImpl:QWe,sigmoidImpl:JWe,simpleAbsImpl:mte,sliceImpl:ZWe,sparseFillEmptyRowsImpl:eze,sparseReshapeImpl:tze,sparseSegmentReductionImpl:gte,sqrtImpl:nze,staticRegexReplaceImpl:rze,stridedSliceImpl:oze,stringNGramsImpl:sze,stringSplitImpl:ize,stringToHashBucketFastImpl:aze,subImpl:uze,tileImpl:lze,topKImpl:cze,transposeImpl:_3,uniqueImpl:dze}=pPe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function cs(t,e){return e===1?[t]:vte(t,e)}function fze(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hze{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Jo(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=cs("rc",this.rank),r=Fn(this.rank),o=this.getOutOfBoundsCondition(n),s=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let s=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)s=`${e[e.length-1-i]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yte{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Jo(this.outputShape.length);let r="";for(let o=0;o<4;o++){let s="thisRC = rc;";o%2===1&&(s+="thisRC.z += 1;"),o>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${pze(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?S3():C3(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function pze(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?fje(["r","c","d"],"inputShape"):ep(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mze{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const o=aV(n,r),s=uV(e,o,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const i=iV(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const u=this.freeTextures[s].pop();return this.usedTextures[s].push(u),u}let a;return o===Io.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===Io.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===Io.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===Io.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===Io.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,r,o){if(this.freeTextures==null)return;const s=aV(r,o),i=uV(n,s,o);i in this.freeTextures||(this.freeTextures[i]=[]);const a=iV(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,o),u=fe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[i],c=l&&l.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function gze(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function iV(t,e,n,r,o){const s=vze(e,r);let i;if(o){const[u,l]=zg(t[0],t[1]);i=u*l}else{const[u,l]=V1(t[0],t[1]);i=u*l}const a=gze(n,s);return i*a}function vze(t,e){switch(t){case Io.PACKED_2X2_FLOAT32:return fte(e);case Io.PACKED_2X2_FLOAT16:return hte(e);case Io.UNPACKED_FLOAT32:return lte(e);case Io.UNPACKED_FLOAT16:return cte(e);case Io.PACKED_4X1_UNSIGNED_BYTE:return dte(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function yze(t){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Io.PACKED_2X2_FLOAT32:Io.UNPACKED_FLOAT32:t?Io.PACKED_2X2_FLOAT16:Io.UNPACKED_FLOAT16}function aV(t,e){if(t===xi.UPLOAD)return Io.PACKED_2X2_FLOAT32;if(t===xi.RENDER||t==null)return yze(e);if(t===xi.DOWNLOAD||t===xi.PIXELS)return Io.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function uV(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Au{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Jo(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const xa="if (isnan(x)) return x;",xze="return x;",lV="return abs(x);",bze="return (x >= 0.0) ? x : (exp(x) - 1.0);",wze=xa+`
  return (x < 0.0) ? 0.0 : x;
`,kze=xa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Gc="return x;",Cze="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sze="return x;",Eze=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_ze=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ize=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Tze="return 1.0 / (1.0 + exp(-1.0 * x));";class rd{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Jo(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nze{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Jo(this.outputShape.length);const n=e.length,r=cs("rc",n),o=Fn(n),s=fze(n,r),i=r.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dze=VX,Rze=1e-7,Oze=1e-4,hw={};function Aze(t){return t in hw||(hw[t]={}),hw[t]}const $ze=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Mze=600;function Pze(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*Mze/1024/1024}class T_ extends WM{nextDataId(){return T_.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof cN)n=e;else{const r=nu(fe().getNumber("WEBGL_VERSION"),e);n=new cN(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=nu(fe().getNumber("WEBGL_VERSION"));n=new cN(r),this.binaryCache=Aze(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new mze(this.gpgpu),this.numMBBeforeWarning=Pze(),this.texData=new cK(this,yu())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,o,s,i){const a=this.makeTensorInfo(n,r),u=this.texData.get(a.dataId);u.isPacked=!1,u.texture={texture:e,texShape:[o,s]},u.texShape=[o,s];const l=dw(n),c=new sV(l,!1,i),d=this.runWebGLProgram(c,[a],r,[[o,s]]);return d.shape=n,u.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:r,values:e,usage:xi.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,o,s){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:o,values:n,usage:xi.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:o,complexTensorInfos:s,slice:i,shape:a,isPacked:u}=n;if(i!=null){let f;u?f=new rd(a,Gc):f=new Au(a,Gc);const h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:o}],o),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return r;const l=this.activeTimers!=null;let c;l&&(c=Is());let d;if(o==="complex64"){const f=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);d=ac(f,h)}else d=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Is()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:o,slice:s,dtype:i,complexTensorInfos:a,isPacked:u}=n;if(s!=null){let p;u?p=new rd(o,Gc):p=new Au(o,Gc);const m=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:i}],i),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(i!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(p.texture.texture,...uw(o))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];d=ac(m,g)}else if(l==null)d=this.getValuesFromTexture(e);else{const p=xe(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(l,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){const p=this.gpgpu.gl;Ge(p,()=>p.deleteBuffer(l))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&yu().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:o,shape:s,slice:i,dtype:a,isPacked:u,texture:l}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let h;u?h=new rd(s,Gc):h=new Au(s,Gc);const p=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(l==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=yu().makeTensorFromTensorInfo(c),f=this.texData.get(c.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>Bd(o));return Ht(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ht(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!BBe(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:o}=this.texData.get(e),s=xe(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...uw(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(f),p}const i=fe().getBool("WEBGL_PACK")&&o===!0,a=i?dw(n):n,u=i?new tWe(a):new eWe(a),l=this.runWebGLProgram(u,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(l.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(l),d}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=wh(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),i=wh(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=await Promise.all(s);a.kernelMs=kSe(u),a.getExtraProfileInfo=()=>u.map((l,c)=>({name:i[c],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Is(),endMs:null}}endTimer(e){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Is(),e)}async getQueryTime(e){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:o,usage:s,isPacked:i,slice:a}=this.texData.get(e),u=a&&a.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,s,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=$ze){return fe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&xe(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){pi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Dze(e.shape,n)}packedUnaryOp(e,n,r){const o=new rd(e.shape,n),s=this.compileAndRun(o,[e],r);return yu().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const o=mte(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,lV,e.dtype);const n=new Au(e.shape,lV),r=this.compileAndRun(n,[e]);return yu().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&Rx(r[0])){const s=r.map(i=>Cd(i));o=this.write(s,e,n)}else o=this.write(r,e,n);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:n}}makeOutput(e,n,r){return yu().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Nze(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new hze(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[mg(e.shape),...gg(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},s=[mg(n),...gg(n)],i=new yte(s,r),a=!0,u=[r],l=this.runWebGLProgram(i,[o],e.dtype,u,a);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:o,shape:s,dtype:i}=r;if(n!=null){const f=xe(s),h=n[0]*n[1]*4;U(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=dw(s);let u;o?u=new Zje(a):u=new Jje(a);const l=!0,c=[n??uw(a)],d=this.runWebGLProgram(u,[{shape:a,dtype:i,dataId:e}],i,c,l,n);return{dtype:i,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,o,s=!1,i){const a=this.makeTensorInfo(e.outputShape,r),u=this.texData.get(a.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===E0.DENSE){const v=i??uw(e.outputShape);u.texShape=v.map(y=>y*2)}if(e.outTexUsage!=null&&(u.usage=e.outTexUsage),xe(a.shape)===0)return u.values=qo(a.dtype,0),a;const l=[],c=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let y=this.texData.get(v.dataId);if(y.texture==null){if(!e.packedInputs&&xe(v.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:y.values};e.packedInputs&&(y.isPacked=!0,y.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!y.isPacked!=!!e.packedInputs)v=y.isPacked?this.unpackTensor(v):this.packTensor(v),l.push(v),y=this.texData.get(v.dataId);else if(y.isPacked&&!i2(y.shape,v.shape)){const x=v,b=v.shape;v.shape=y.shape,v=this.packedReshape(v,b),l.push(v),y=this.texData.get(v.dataId),x.shape=b}return{shape:v.shape,texData:y,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:u,isUniform:!1},f=Qje(e,c,d),h=this.getAndSaveBinary(f,()=>Kje(this.gpgpu,e,c,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||Xje(this.gpgpu,h,c,d,o),l.forEach(v=>this.disposeIntermediateTensorInfo(v)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=fe().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const v=Is();v-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&s===!1){const v=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),v}return a}compileAndRun(e,n,r,o,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,o,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=de(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=fe().getBool("DEBUG");fe().set("DEBUG",!1);const n=this.abs(Cn(1e-8)).dataSync()[0];if(fe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Rze:Oze}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:o,values:s,texture:i,usage:a,isPacked:u}=n;if(i!=null)return;const l=this.activeTimers!=null;let c;l&&(c=Is());let d=n.texShape;if(d==null&&(d=rje(r,u),n.texShape=d),s!=null){const f=dw(r);let h,p=d[1],m=d[0];const g=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(u||!g)&&([p,m]=zg(d[0],d[1])),u?h=new rWe(f,g):h=new sV(f,g);const v=g?[m,p]:d,y=this.makeTensorInfo(v,o),x=this.texData.get(y.dataId);g?x.usage=xi.PIXELS:x.usage=xi.UPLOAD,x.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),p,m,s);const b=[[m,p]],S=this.runWebGLProgram(h,[y],o,b,!0),E=this.texData.get(S.dataId);n.texShape=E.texShape,n.isPacked=E.isPacked,n.usage=E.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(n.texture=E.texture,n.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(y),l&&(this.uploadWaitMs+=Is()-c)}else{const f=this.acquireTexture(d,a,o,u);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:o}=r;return n!=null&&(r.values=Fze(n,o)),r.values}acquireTexture(e,n,r,o){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,o)}computeBytes(e,n){return e[0]*e[1]*MC(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(o=>{try{this.checkCompletion_(n),o(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await aQ(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(rte(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:o,nanLoc:s,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:u}=ute(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=o,e.nanLoc=s,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=u}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:o,height:s,width:i,channels:a}=e,u=yu().backend;if(!u.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=u.writeTexture(o,n,r,s,i,a);return yu().makeTensorFromDataId(l,n,r,u)}}T_.nextDataId=0;function Fze(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rX()&&aX("webgl",()=>new T_,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Oh{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Ft(n,r),this.enableShapeUniforms=Jo(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const np=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Yg{constructor(e,n,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ft(n,r);const s=this.outputShape.length;this.enableShapeUniforms=Jo(s);let i="";if(o)if(s===0||xe(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Fn(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const u=cs("coords",s);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${u[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${u[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Lze={kernelName:Jx,backendName:"webgl",kernelFunc:si};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hf(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,s=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(s.dataId),a=si({inputs:{x:r},backend:n}),u=si({inputs:{x:o},backend:n});return i.complexTensorInfos={real:a,imag:u},s}const Bze={kernelName:eP,backendName:"webgl",kernelFunc:hf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xte="return (a < 0.) ? b * a : a;",bte=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function jze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:s}=r,i=n.makeTensorInfo([],"float32",of(s,"float32")),a=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Yg(bte,o.shape,i.shape):new Oh(xte,o.shape,i.shape),u=n.runWebGLProgram(a,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),u}const Wze={kernelName:CE,backendName:"webgl",kernelFunc:jze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wte="return (a < 0.) ? b * a : a;",kte=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function zze(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Yg(kte,r.shape,o.shape):new Oh(wte,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],"float32")}const Uze={kernelName:zE,backendName:"webgl",kernelFunc:zze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qg="if (isnan(x)) return x;";function fn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:s})=>{const{x:i}=o,a=s,u=r||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),f=n(d.values,u);return a.makeTensorInfo(i.shape,u,f)}const l=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return l?c=new rd(i.shape,e):c=new Au(i.shape,t),a.runWebGLProgram(c,[i],u)}}function jo({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:s}){return({inputs:i,backend:a})=>{const{a:u,b:l}=i,c=a;if(r&&u.dtype==="complex64"){const p=c.texData.get(u.dataId),m=c.texData.get(l.dataId),[g,v]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(x=>{const[b,C]=x,S={dataId:b.dataId,dtype:b.dtype,shape:u.shape},E={dataId:C.dataId,dtype:C.dtype,shape:l.shape},I=new Oh(t,u.shape,l.shape);return c.runWebGLProgram(I,[S,E],ri(b.dtype,C.dtype))}),y=hf({inputs:{real:g,imag:v},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(v),y}const d=s||ri(u.dtype,l.dtype);if((u.dtype==="string"||l.dtype==="string"||c.shouldExecuteOnCPU([u,l]))&&o!=null){const p=c.texData.get(u.dataId).values,m=c.texData.get(l.dataId).values,g=u.dtype==="string"?uc(p):p,v=u.dtype==="string"?uc(m):m,[y,x]=o(u.shape,l.shape,g,v,d),b=c.makeTensorInfo(x,d),C=c.texData.get(b.dataId);return C.values=y,b}const f=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new Yg(e,u.shape,l.shape,n):h=new Oh(t,u.shape,l.shape),c.runWebGLProgram(h,[u,l],d)}}function _0(t,e=!1){if(t==="linear")return e?Sze:xze;if(t==="relu")return e?_ze:wze;if(t==="elu")return e?Eze:bze;if(t==="relu6")return e?Ize:kze;if(t==="prelu")return e?kte:wte;if(t==="leakyrelu")return e?bte:xte;if(t==="sigmoid")return e?Tze:Cze;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cte{constructor(e,n,r,o=!1,s=!1,i=!1,a=null,u=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Jo(this.outputShape.length);const c=o?e[1]:e[2],d=Math.ceil(c/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",v="";a&&(u?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:l?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");const y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let x="rc.x",b="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(b=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${b};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${y}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cV={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class dV{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ft(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fV="return a * b;";function T3(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,s=ri(r.dtype,o.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),u=n.texData.get(o.dataId),l=new dV(cV.REAL,r.shape,o.shape),c=new dV(cV.IMAG,r.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape}],f=n.runWebGLProgram(l,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=hf({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,o])){const a=n.texData.get(r.dataId),u=n.texData.get(o.dataId),[l,c]=zWe(r.shape,o.shape,a.values,u.values,s),d=n.makeTensorInfo(c,s),f=n.texData.get(d.dataId);return f.values=l,d}let i;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new Yg(fV,r.shape,o.shape):i=new Oh(fV,r.shape,o.shape),n.runWebGLProgram(i,[r,o],s)}const Vze={kernelName:a1,backendName:"webgl",kernelFunc:T3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hze(t,e,n){const r=[mg(t.shape),...gg(t.shape)],o={dtype:t.dtype,shape:r,dataId:t.dataId},s=[mg(e),...gg(e)],i=new yte(s,r),a=!0,u=[r],l=n.runWebGLProgram(i,[o],t.dtype,u,a);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function je(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:s}=r,i=n,a=xe(o.shape),u=fK(s,a),l=xe(u);U(a===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(o.dataId);return c.isPacked&&!i2(o.shape,u)&&!(c.texture!==null&&i2(c.shape,u))?Hze(o,u,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:u,dtype:o.dtype})}const Gze={kernelName:VE,backendName:"webgl",kernelFunc:je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hV{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:s,outSize:i}=e;this.outputShape=[o,i];const a=Math.floor(r/4)*4,u=r%4;let l="sumValue += dot(values, ones);";if(n!=null){const d=1/n;l=`sumValue += dot(values * ${og(d)?d.toPrecision(2):d}, ones);`}let c="";s%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${a};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yze{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:s,outSize:i}=e;this.outputShape=[o,i];let a="0.0",u="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",u="min"):n==="max"&&(a="-1.0 / 1e-20",u="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");const c=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qze(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=f_(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function rp(t,e,n,r){const o=qze(t.shape);let s=t;for(let i=0;i<o.length;i++){const{inSize:a,windowSize:u,outSize:l}=o[i];let c,d;n==="mean"?c=i===0?new hV({windowSize:u,inSize:a,batchSize:t.shape[0],outSize:l},a):new hV({windowSize:u,inSize:a,batchSize:t.shape[0],outSize:l}):c=new Yze({windowSize:u,inSize:a,batchSize:t.shape[0],outSize:l},n),d=s,s=r.runWebGLProgram(c,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kze{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const o=Fn(this.rank),s=Xze(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function Xze(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qze{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=Fn(this.rank),s=vte("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=s[c];const a=`vec2(${i.slice(-2).join()})`,u=`++${s[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${u}) {
        result[1] = ${l};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${u}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N_(t,e,n){const r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Qze(t.shape,e):new Kze(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jze(t,e,n,r){const o=e,s=t.shape.length,i=Gt(o,t.shape);let a=i;const u=br(a,s),l=u!=null;let c=t;l&&(c=N_(t,u,r),a=Br(a.length,s)),Bo("sum",a,s);const[d,f]=Co(c.shape,a);let h=d;n&&(h=Kr(d,i));const p=xe(f),g=xe(t.shape)/p,v=je({inputs:{x:c},attrs:{shape:[g,p]},backend:r}),y=MP(t.dtype),x=rp(v,y,"sum",r),b=je({inputs:{x},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(x),l&&r.disposeIntermediateTensorInfo(c),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;return Jze(o,s,i,n)}const Zze={kernelName:XE,backendName:"webgl",kernelFunc:D_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xs(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{perm:s}=r,i=n,a=o.shape.length,u=new Array(a);for(let c=0;c<u.length;c++)u[c]=o.shape[s[c]];let l;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,f=_3(d,o.shape,o.dtype,s,u);l=i.makeTensorInfo(u,o.dtype);const h=i.texData.get(l.dataId);h.values=f}else l=N_(o,s,i);return l}const eUe={kernelName:gm,backendName:"webgl",kernelFunc:xs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ste=1e3;function a2({a:t,b:e,transposeA:n,transposeB:r,backend:o,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:u=null}){const l=t.shape.length,c=e.shape.length,d=n?t.shape[l-2]:t.shape[l-1],f=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[l-1]:t.shape[l-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),v=xe(m),y=xe(g),b=Ft(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);U(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const C=n?[v,d,h]:[v,h,d],S=r?[y,p,f]:[y,f,p],E=je({inputs:{x:t},backend:o,attrs:{shape:C}}),I=je({inputs:{x:e},backend:o,attrs:{shape:S}}),T=[E,I],N=Math.max(v,y),O=n?E.shape[1]:E.shape[2],$=s!=null,A=i!=null,P=u==="leakyrelu",L=u!=null?_0(u,!0):null,W=$||A||P||L!=null;let z;if((h===1||p===1)&&O>Ste&&W===!1){let B=E,H=I;n&&(B=xs({inputs:{x:E},backend:o,attrs:{perm:[0,2,1]}}),T.push(B)),r&&(H=xs({inputs:{x:I},backend:o,attrs:{perm:[0,2,1]}}),T.push(H));const X=p!==1,te=p===1;let re=B;X&&(re=je({inputs:{x:B},backend:o,attrs:{shape:[N,O,1]}}),T.push(re));const ue=p===1?2:1;let Q=H;te&&(Q=je({inputs:{x:H},backend:o,attrs:{shape:[N,1,O]}}),T.push(Q));const ce=T3({inputs:{a:re,b:Q},backend:o});z=D_({inputs:{x:ce},backend:o,attrs:{axis:ue,keepDims:!0}}),T.push(ce)}else{const B=ri(t.dtype,e.dtype),H=new Cte(C,S,[N,h,p],n,r,$,L,A,P),X=[E,I];if(s!=null&&X.push(s),A&&X.push(i),P){const te=o.makeTensorInfo([],"float32",of(a,"float32"));X.push(te),T.push(te)}z=o.runWebGLProgram(H,X,B)}const F=je({inputs:{x:z},backend:o,attrs:{shape:b}});T.push(z);for(const B of T)o.disposeIntermediateTensorInfo(B);return F}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tUe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s,bias:i,preluActivationWeights:a}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:d}=r;return a2({a:o,b:s,transposeA:u,transposeB:l,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const nUe={kernelName:PC,backendName:"webgl",kernelFunc:tUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pV="return abs(x);";function rUe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),i=mte(s.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let o;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new rd(r.shape,pV):o=new Au(r.shape,pV),n.runWebGLProgram(o,[r],r.dtype)}const oUe={kernelName:rE,backendName:"webgl",kernelFunc:rUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sUe=xa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,iUe=fn({opSnippet:sUe}),aUe={kernelName:Ox,backendName:"webgl",kernelFunc:iUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uUe=xa+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,lUe=fn({opSnippet:uUe}),cUe={kernelName:Ax,backendName:"webgl",kernelFunc:lUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mV="return a + b;",dUe=jo({opSnippet:mV,packedOpSnippet:mV,supportsComplex:!0,cpuKernelImpl:wWe}),fUe={kernelName:Mg,backendName:"webgl",kernelFunc:dUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hUe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pUe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xk(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return si({inputs:{x:r[0]},backend:n});if(r.length>fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(r.length/2),l=xk({inputs:r.slice(0,u),backend:n}),c=xk({inputs:r.slice(u),backend:n});return xk({inputs:[l,c],backend:n})}const o=r.map(u=>u.dtype).reduce((u,l)=>ri(u,l)),s=r.map(u=>u.shape),a=fe().getBool("WEBGL_PACK")?new pUe(r[0].shape,s):new hUe(r[0].shape,s);return n.runWebGLProgram(a,r,o)}const mUe={kernelName:YM,backendName:"webgl",kernelFunc:xk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,u=Gt(s,o.shape);let l=u;const c=br(l,a);let d=o;c!=null&&(d=xs({inputs:{x:o},backend:n,attrs:{perm:c}}),l=Br(l.length,a)),Bo("all",l,a);const[f,h]=Co(d.shape,l),p=xe(h),m=je({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=rp(m,m.dtype,"all",n);let v;if(i){const y=Kr(f,u);v=je({inputs:{x:g},backend:n,attrs:{shape:y}})}else v=je({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),v}const vUe={kernelName:qM,backendName:"webgl",kernelFunc:gUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,u=Gt(s,o.shape);let l=u;const c=br(l,a);let d=o;c!=null&&(d=xs({inputs:{x:o},backend:n,attrs:{perm:c}}),l=Br(l.length,a)),Bo("any",l,a);const[f,h]=Co(d.shape,l),p=xe(h),m=je({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=rp(m,m.dtype,"any",n);let v;if(i){const y=Kr(f,u);v=je({inputs:{x:g},backend:n,attrs:{shape:y}})}else v=je({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),v}const xUe={kernelName:KM,backendName:"webgl",kernelFunc:yUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bUe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:o,batchSize:s,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,i];const a=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wUe{constructor(e,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],i=Math.ceil(s/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,u=a.length,l=Fn(u),c=cs("coords",u);let d,f;if(i===1){f=u+1;const I=Fn(f);d=`
        ${I} sourceLocR = ${I}(${c.join()}, 0);
        ++${c[u-1]};
        ${I} sourceLocG = ${I}(${c.join()}, 0);
        ++${c[u-2]};
        ${I} sourceLocA = ${I}(${c.join()}, 0);
        --${c[u-1]};
        ${I} sourceLocB = ${I}(${c.join()}, 0);
        --${c[u-2]};`}else f=u,d=`
        ${l} sourceLocR = coords;
        ++${c[u-1]};
        ${l} sourceLocG = coords;
        ++${c[u-2]};
        ${l} sourceLocA = coords;
        --${c[u-1]};
        ${l} sourceLocB = coords;
        --${c[u-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],m=h.map(I=>"int "+I),g=cs("sourceLocR",f-1).concat("inIdx.r"),v=cs("sourceLocG",f-1).concat("inIdx.g"),y=cs("sourceLocB",f-1).concat("inIdx.b"),x=cs("sourceLocA",f-1).concat("inIdx.a"),b=r==="max"?"greaterThan":"lessThan",C=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${x.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${y.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,E=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${c[u-1]} < ${a[u-1]-1};
        bool hasNextRow = ${c[u-2]} < ${a[u-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(t,e,n,r=null){let o=e.shape[0],s=e.shape[1];r!=null&&(o=r.shape[0],s=r.shape[1]);const i=f_(s),a={windowSize:i,inSize:s,batchSize:o,outSize:Math.ceil(s/i)},u=new bUe(a,n,r==null),l=[e];r!=null&&l.push(r);const c=t.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;const d=Ete(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function _te(t,e,n,r=null){const o=r!=null?r.shape:e.shape,s=o[o.length-1],i=f_(s),a=new wUe(o,i,n,r==null),u=r==null?[e]:[e,r],l=t.runWebGLProgram(a,u,"int32");if(l.shape.length===e.shape.length){const c=_te(t,e,n,l);return t.disposeIntermediateTensorInfo(l),c}return l}function Ite(t,e,n,r){const o=[n];if(Bo("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,e.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let u=e;a&&(u=t.unpackTensor(e),s.push(u));const[l,c]=Co(u.shape,o),d=xe(c),f=je({inputs:{x:u},backend:t,attrs:{shape:[-1,d]}});s.push(f);const h=Ete(t,f,r);s.push(h);const p=je({inputs:{x:h},backend:t,attrs:{shape:l}});return s.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return _te(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;let i=Gt(s,o.shape);const a=br(i,o.shape.length);let u=o;const l=[];a!=null&&(u=xs({inputs:{x:o},backend:n,attrs:{perm:a}}),l.push(u),i=Br(i.length,u.shape.length)),Bo("argMax",[i[0]],u.shape.length);const c=Ite(n,u,i[0],"max");return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const CUe={kernelName:oE,backendName:"webgl",kernelFunc:kUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;let i=Gt(s,o.shape);const a=br(i,o.shape.length);let u=o;const l=[];a!=null&&(u=xs({inputs:{x:o},backend:n,attrs:{perm:a}}),l.push(u),i=Br(i.length,u.shape.length)),Bo("argMin",[i[0]],u.shape.length);const c=Ite(n,u,i[0],"min");return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const EUe={kernelName:sE,backendName:"webgl",kernelFunc:SUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ue=xa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,IUe=fn({opSnippet:_Ue}),TUe={kernelName:$x,backendName:"webgl",kernelFunc:IUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NUe=xa+"return log(x + sqrt(x * x + 1.0));",DUe=fn({opSnippet:NUe}),RUe={kernelName:Mx,backendName:"webgl",kernelFunc:DUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OUe=xa+`
  return atan(x);
`,AUe=fn({opSnippet:OUe}),$Ue={kernelName:Px,backendName:"webgl",kernelFunc:AUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MUe=I3+`
  return atan(a, b);
`,PUe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+np+`
  return result;
`,FUe=jo({opSnippet:MUe,packedOpSnippet:PUe}),LUe={kernelName:Lx,backendName:"webgl",kernelFunc:FUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BUe=xa+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,jUe=fn({opSnippet:BUe}),WUe={kernelName:Fx,backendName:"webgl",kernelFunc:jUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I0{constructor(e,n,r,o=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(m||(y="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${u});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${I} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?s?g:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let b=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(b="avgValue / max(count, 1.0)");const C=Math.floor(i/4)*4,S=i%4,E=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${u});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${C};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${b});
      }
    `}}class N3{constructor(e,n,r,o=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,u=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,v=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let b="0.0";if(x||(b="-1.0 / 1e-20"),r){const N=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${u}, ${l});
        const ivec3 pads = ivec3(${g}, ${v}, ${y});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${N} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const E=Math.floor(i/4)*4,I=i%4,T=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${u}, ${l});
      const ivec3 pads = ivec3(${g}, ${v}, ${y});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${T}
            }

            int xC = xCCorner + ${E};
            if (${I===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${I===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${I===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${T}
            }
          }
        }
        setOutput(${S});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;H1(o,"avgPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:u}=r,l=1;U(Qo(i,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=va(o.shape,s,i,l,a,u);if(c.filterWidth===1&&c.filterHeight===1&&En(c.inShape,c.outShape))return si({inputs:{x:o},backend:n});const d=new I0(c,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const UUe={kernelName:iE,backendName:"webgl",kernelFunc:zUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:u,dataFormat:l}=r,c=[1,1,1],d=yc(o.shape,s,i,c,a,u,l),f=new N3(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const HUe={kernelName:aE,backendName:"webgl",kernelFunc:VUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GUe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=u-1-e.padInfo.top,d=l-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class YUe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=f-1-e.padInfo.top,g=h-1-e.padInfo.left,v=1/(n*r*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s,{filterSize:a,strides:u,pad:l,dimRoundingMode:c}=r,d=[1,1,1],f=yc(i.shape,a,u,d,l,c),h=new YUe(f);return n.runWebGLProgram(h,[o],i.dtype)}const KUe={kernelName:QM,backendName:"webgl",kernelFunc:qUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s;H1([o,s],"avgPoolGrad");const{filterSize:a,strides:u,pad:l}=r,c=va(i.shape,a,u,1,l),d=new GUe(c);return n.runWebGLProgram(d,[o],i.dtype)}const QUe={kernelName:XM,backendName:"webgl",kernelFunc:XUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JUe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s}=e,{transposeA:i,transposeB:a}=r;return a2({a:o,b:s,transposeA:i,transposeB:a,backend:n})}const ZUe={kernelName:uE,backendName:"webgl",kernelFunc:JUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eVe{constructor(e,n,r,o,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Ft(e,n),Ft(e,r);let a="0.0";o!=null&&(Ft(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="1.0";s!=null&&(Ft(e,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tVe{constructor(e,n,r,o,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ft(e,n),Ft(e,r);let a="vec4(0.0)";o!=null&&(Ft(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="vec4(1.0)";s!=null&&(Ft(e,s),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nVe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:o,variance:s,offset:i,scale:a}=t;U(o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);const l=[r,o,s];let c=null;i!=null&&(c=i.shape,l.push(i));let d=null;a!=null&&(d=a.shape,l.push(a));const f=fe().getBool("WEBGL_PACK_NORMALIZATION")?new tVe(r.shape,o.shape,s.shape,c,d,u):new eVe(r.shape,o.shape,s.shape,c,d,u);return e.runWebGLProgram(f,l,l[0].dtype)},rVe={kernelName:bE,backendName:"webgl",kernelFunc:nVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oVe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Fn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=sVe(this.rank);let o;const s=e.map((i,a)=>`sourceLoc.${SO[a]} = start[${a}] + coords.${SO[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}}const SO=["x","y","z","w","u","v"];function sVe(t){if(t===1)return"sourceLoc";if(t<=6)return SO.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iVe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Fn(this.rank),r=cs("coords",this.rank),o=cs("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${s})`,a=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${o[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${a}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aVe(t,e,n,r){const o=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),i=r.texData.get(s.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=SF(e,gt(t.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};const u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),s}function Kg(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,size:i}=r,[a,u]=d_(o,s,i);if(wF(o,a,u),xe(u)===0)return n.makeTensorInfo(u,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),f=ZWe(d.values,a,u,o.shape,o.dtype);return n.makeTensorInfo(u,o.dtype,f)}const{isPacked:l}=n.texData.get(o.dataId),c=CF(o.shape,a,u);if(l||!c){const d=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iVe(u):new oVe(u),f=[a];return n.runWebGLProgram(d,[o],o.dtype,f)}return n.uploadToGPU(o.dataId),aVe(o,a,u,n)}const uVe={kernelName:KE,backendName:"webgl",kernelFunc:Kg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lVe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,crops:i}=r;U(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((y,x)=>y*x),u=O1(o.shape,s,a),l=A1(u.length,s.length),c=$1(o.shape,s,a),d=NF(i,s.length),f=DF(c,i,s.length),h=[],p=je({inputs:{x:o},backend:n,attrs:{shape:u}}),m=xs({inputs:{x:p},backend:n,attrs:{perm:l}}),g=je({inputs:{x:m},backend:n,attrs:{shape:c}}),v=Kg({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(m),h.push(g),h.forEach(y=>n.disposeIntermediateTensorInfo(y)),v},cVe={kernelName:lE,backendName:"webgl",kernelFunc:lVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i}=r,a=n.readSync(o.dataId),u=n.readSync(s.dataId),l=pte(a,u,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,l)}const fVe={kernelName:JM,backendName:"webgl",kernelFunc:dVe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hVe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,pVe=`
  return float(int(a.r) & int(b.r));
`;function mVe(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=fe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||i===1){const u=n.texData.get(r.dataId).values,l=n.texData.get(o.dataId).values,[c,d]=CWe(r.shape,o.shape,u,l,r.dtype),f=n.makeTensorInfo(d,r.dtype),h=n.texData.get(f.dataId);return h.values=c,f}let a;return s?a=new Yg(hVe,r.shape,o.shape,!1):a=new Oh(pVe,r.shape,o.shape),n.runWebGLProgram(a,[r,o],r.dtype)}const gVe={kernelName:ZM,backendName:"webgl",kernelFunc:mVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,s=n.readSync(r.dataId),i=n.readSync(o.dataId),a=Ft(Array.from(s),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const yVe={kernelName:yK,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xVe="return float(a != b);",Tte=jo({opSnippet:xVe,cpuKernelImpl:VWe,dtype:"bool"}),bVe={kernelName:FE,backendName:"webgl",kernelFunc:Tte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return si({inputs:{x:o.complexTensorInfos.real},backend:n})}const wVe={kernelName:SP,backendName:"webgl",kernelFunc:Y1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kVe="return float(int(x));";function CVe(t,e){const n=new Au(t.shape,kVe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EO(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return si({inputs:{x:o},backend:n});const i=po(o.shape),a=EO({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),u=hf({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),u}if(o.dtype==="complex64"){const i=Y1({inputs:{input:o},backend:n}),a=EO({inputs:{x:i},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(i),a}if(!hK(o.dtype,s)){const i=si({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:s}}if(n.shouldExecuteOnCPU([o])){const i=n.texData.get(o.dataId).values,[a,u,l]=SWe(i,o.shape,o.dtype,s);return n.makeTensorInfo(a,u,l)}if(s==="int32")return CVe(o,n);if(s==="bool"){const i=n.makeTensorInfo([],"bool",qo("bool",1)),u=Tte({inputs:{a:o,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),u}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${s}`)}const SVe={kernelName:Bx,backendName:"webgl",kernelFunc:EO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gV="return ceil(x);",EVe=fn({opSnippet:gV,packedOpSnippet:gV,cpuKernelImpl:EWe}),_Ve={kernelName:jx,backendName:"webgl",kernelFunc:EVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IVe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TVe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{clipValueMin:s,clipValueMax:i}=r;let a;fe().getBool("WEBGL_PACK_CLIP")?a=new TVe(o.shape):a=new IVe(o.shape);const u=[[s],[i]];return n.runWebGLProgram(a,[o],o.dtype,u)}const DVe={kernelName:Wx,backendName:"webgl",kernelFunc:NVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RVe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vV(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function OVe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=n.texData.get(r.dataId),s=new RVe(r.shape),i=[vV(r,o.complexTensorInfos.real),vV(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(s,i,i[0].dtype)}const AVe={kernelName:cE,backendName:"webgl",kernelFunc:OVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Ve{constructor(e){this.outputShape=[],this.outputShape=Hu(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const o=n.length,s=n[n.length-1];r.push(`else setOutput(getT${o}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MVe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Hu(e,n);const r=this.outputShape,o=r.length,s=Fn(o),i=cs("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=e.map((m,g)=>`T${g}`);const u=new Array(e.length-1);u[0]=e[0][n];for(let m=1;m<u.length;m++)u[m]=u[m-1]+e[m][n];const l=a[n],c=a.slice(-2),d=a.join();let f=`if (${l} < ${u[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let m=1;m<u.length;m++){const g=u[m-1];f+=`
        if (${l} < ${u[m]}  && ${l} >= ${u[m-1]}) {
          return getChannel(
            getT${m}(${pw(a,l,g)}),
            vec2(${pw(c,l,g)}));
        }`}const h=u.length,p=u[u.length-1];f+=`
        return getChannel(
          getT${h}(${pw(a,l,p)}),
          vec2(${pw(c,l,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${r[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${r[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${r[o-2]} &&
            ${i[o-1]} < ${r[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function pw(t,e,n){const r=t.indexOf(e);return t.map((s,i)=>i===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R_(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return si({inputs:{x:o.complexTensorInfos.imag},backend:n})}const PVe={kernelName:gP,backendName:"webgl",kernelFunc:R_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oy(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(y=>Y1({inputs:{input:y},backend:n})),p=t.map(y=>R_({inputs:{input:y},backend:n})),m=oy(h,e,n),g=oy(p,e,n),v=hf({inputs:{real:m,imag:g},backend:n});return h.forEach(y=>n.disposeIntermediateTensorInfo(y)),p.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),v}let o=n.shouldExecuteOnCPU(t);if(r==="string"&&(o=!0),o){const h=t.map(b=>{const S=[-1,xe(b.shape.slice(e))];return je({inputs:{x:b},backend:n,attrs:{shape:S}})}),p=h.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),m=Hu(h.map(b=>b.shape),1),g=h[0].shape[0]===1,v=_We(p,m,r,g),y=Hu(t.map(b=>b.shape),e),x=n.makeTensorInfo(y,r,v);return h.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const s=t.filter(h=>xe(h.shape)>0),i=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const h=i?new Au(t[0].shape,Gc):new rd(t[0].shape,Gc);return n.runWebGLProgram(h,t,r)}const a=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const h=[];for(let m=0;m<s.length;m+=a){const g=s.slice(m,m+a);h.push(oy(g,e,n))}const p=oy(h,e,n);for(const m of h)n.disposeIntermediateTensorInfo(m);return p}if(i){const h=new MVe(s.map(p=>p.shape),e);return n.runWebGLProgram(h,s,r)}const{tensors2D:u,outShape:l}=FVe(s,e,n),c=new $Ve(u.map(h=>h.shape)),d=n.runWebGLProgram(c,u,r);u.forEach(h=>n.disposeIntermediateTensorInfo(h));const f=je({inputs:{x:d},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(d),f}function FVe(t,e,n){const r=Hu(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>je({inputs:{x:s},attrs:{shape:[-1,xe(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nte(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,s=Gt(o,e[0].shape)[0],i=e.map(l=>l.shape);_F(i,s);const a=Hu(e.map(l=>l.shape),s);if(xe(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const u=e.filter(l=>xe(l.shape)>0);return u.length===1?si({inputs:{x:u[0]},backend:n}):oy(u,s,n)}const LVe={kernelName:dE,backendName:"webgl",kernelFunc:Nte};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dte{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",v=g?1:2,y=g?2:3,x=g?3:1;let b="",C="";r&&(o?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${y}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${C}
        setOutput(result);
      }
    `}}class BVe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,o=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rte{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Jo(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,d=c;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)f+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;f+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<c;g++)f+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){const v=g*2;if(f+=`
           xC = xCCorner + ${v*u};
           `,a===1){if(v<c&&(i%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,u===1&&v>0?f+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<c)){const y=i%2===0?zM(u):u;u%2===0&&i%2===1||u%2!==0&&i%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${y};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,u>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:f+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):y===1?f+=`
                     xC${v+1} = xTexelC${v};
                     `:f+=`
                     xCOffset = xC + ${y};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<c&&(i%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<c&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<c&&(f+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<c&&(f+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<c&&(f+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",p="";r&&(o?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jVe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Jo(this.outputShape.length);const{dataFormat:r}=n,o=ws(),s=r==="channelsLast",i=s?1:2,a=s?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)l+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Ote({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){const u=t.shape,l=r.texData.get(t.dataId),c=n.inChannels,d=u[0]*u[1]*u[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const v=[];if(s!=null){const b=u2(s.shape,h);b!=null&&(s=je({inputs:{x:s},backend:r,attrs:{shape:b}}),v.push(s))}if(o!=null){const b=u2(o.shape,h);b!=null&&(o=je({inputs:{x:o},backend:r,attrs:{shape:b}}),v.push(o))}if(!((d===1||f===1)&&c>Ste)&&l.isPacked&&h&&l.texture!=null&&u[2]%2!==0&&En(l.shape.slice(-3),u.slice(-3))){const b=u[0]*u[1]*(u[2]+1),C={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},S=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,U(i2(l.shape,C.shape),()=>`packed reshape ${l.shape} to ${C.shape} isn't free`);const E=je({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(E);const I=a2({a:C,b:E,backend:r,transposeA:p,transposeB:m,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i}),T=r.texData.get(I.dataId);U(T.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=S,T.shape=n.outShape,g=si({inputs:{x:I},backend:r}),g.shape=n.outShape,v.push(I)}else{const b=n.outHeight*n.outWidth,C=je({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),S=je({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),E=a2({a:h?C:S,b:h?S:C,transposeA:!h,transposeB:m,backend:r,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i});g=je({inputs:{x:E},backend:r,attrs:{shape:n.outShape}}),v.push(C),v.push(S),v.push(E)}for(const b of v)r.disposeIntermediateTensorInfo(b);return g}function Ate({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:u,filterHeight:l,inChannels:c,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",m=u*l*c,g=f*d,v=[n.batchSize,m,g],y=!0,x=!1,b=[];if(s!=null){const F=u2(s.shape,p);F!=null&&(s=je({inputs:{x:s},backend:r,attrs:{shape:F}}),b.push(s))}if(o!=null){const F=u2(o.shape,p);F!=null&&(o=je({inputs:{x:o},backend:r,attrs:{shape:F}}),b.push(o))}const C=je({inputs:{x:e},backend:r,attrs:{shape:[1,m,xe(e.shape)/m]}});b.push(C);const S=new jVe(v,n),E=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],I=r.runWebGLProgram(S,[t],"float32",E),T=je({inputs:{x:I},backend:r,attrs:{shape:v}});b.push(I),b.push(T);const N=o!=null,O=s!=null,$=a==="leakyrelu",A=a?_0(a,!0):null,P=new Cte(p?T.shape:C.shape,p?C.shape:T.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],y,x,N,A,O,$),L=p?[T,C]:[C,T];if(o&&L.push(o),O&&L.push(s),$){const F=r.makeTensorInfo([],"float32",of(i,"float32"));L.push(F),b.push(F)}const W=r.runWebGLProgram(P,L,"float32"),z=je({inputs:{x:W},backend:r,attrs:{shape:n.outShape}});b.push(W);for(const F of b)r.disposeIntermediateTensorInfo(F);return z}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dataFormat:u,dilations:l,dimRoundingMode:c}=r,d=xc(u),f=Lo(o.shape,s.shape,i,l,a,c,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=Ote({x:o,filter:s,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const m=new Rte(f),g=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(m,[o,s],"float32",g)}else if(fe().getBool("WEBGL_CONV_IM2COL"))h=Ate({x:o,filter:s,convInfo:f,backend:n});else{const m=new Dte(f);h=n.runWebGLProgram(m,[o,s],"float32")}const p=je({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const zVe={kernelName:fE,backendName:"webgl",kernelFunc:WVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UVe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class VVe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,u=r-1-e.padInfo.left,l=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class HVe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class GVe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=n-1-e.padInfo.front,l=r-1-e.padInfo.top,c=o-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${l}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,d=xc(u),f=Lo(o.shape,c,i,1,a,l,!1,d),h=new UVe(f);return n.runWebGLProgram(h,[o,s],"float32")}const qVe={kernelName:tP,backendName:"webgl",kernelFunc:YVe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KVe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Jo(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{inputShape:i,strides:a,pad:u,dataFormat:l,dimRoundingMode:c}=r,d=xc(l),f=Lo(i,s.shape,a,1,u,c,!1,d);if(fe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const h=[[f.strideHeight,f.strideWidth]],p=new KVe(f);return n.runWebGLProgram(p,[o,s],"float32",h)}else{const h=new VVe(f);return n.runWebGLProgram(h,[o,s],"float32")}}const QVe={kernelName:hE,backendName:"webgl",kernelFunc:XVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:u}=r,l=sf(o.shape,s.shape,i,u,a),c=new BVe(l);return n.runWebGLProgram(c,[o,s],"float32")}const ZVe={kernelName:pE,backendName:"webgl",kernelFunc:JVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,filterShape:u}=r,l=sf(o.shape,u,i,1,a),c=new HVe(l);return n.runWebGLProgram(c,[o,s],"float32")}const t6e={kernelName:nP,backendName:"webgl",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{pad:i,strides:a,inputShape:u}=r,l=sf(u,s.shape,a,1,i),c=new GVe(l);return n.runWebGLProgram(c,[o,s],"float32")}const r6e={kernelName:rP,backendName:"webgl",kernelFunc:n6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o6e=qg+`
  return cos(x);
`,s6e=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${np}
  return result;
`,i6e=fn({opSnippet:o6e,packedOpSnippet:s6e}),a6e={kernelName:zx,backendName:"webgl",kernelFunc:i6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,l6e=fn({opSnippet:u6e}),c6e={kernelName:Ux,backendName:"webgl",kernelFunc:l6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d6e{constructor(e,n,r,o,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,u,l]=e,[c]=n,[d,f]=r;this.outputShape=[c,d,f,l];const h=o==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${u-1}.0`],[g,v,y]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,b,C]=f>1?[`${(u-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${b};

        float in_y = ${y};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f6e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:s,boxInd:i}=e,{cropSize:a,method:u,extrapolationValue:l}=r,c=new d6e(o.shape,s.shape,a,u,l);return n.runWebGLProgram(c,[o,s,i],"float32")},h6e={kernelName:sP,backendName:"webgl",kernelFunc:f6e};var T0;(function(t){t.Prod="*",t.Sum="+"})(T0||(T0={}));class yV{constructor(e,n,r,o){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,i=this.op===T0.Prod?"1.0":"0.0",a=r?i:`getX(${xV(s,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1];let l="",c="";r?(l=o?`end != ${u-1}`:"end != 0",c=o?"end + 1":"end - 1"):(l=o?`end + pow2 < ${u}`:"end >= pow2",c=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Fn(s)} coords = getOutputCoords();
        int end = ${bV(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${c};
          ${bV(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${xV(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function xV(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function bV(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $te(t,e,n,r,o,s){const i=e.shape.length,a=br([r],i);let u=e;a!=null&&(u=xs({inputs:{x:e},backend:n,attrs:{perm:a}}));const l=Br(1,i)[0];if(l!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=u.shape[l];let d=si({inputs:{x:u},backend:n});for(let f=0;f<=Math.ceil(Math.log2(c))-1;f++){const h=new yV(t,u.shape,!1,s),p=[[f]],m=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(o){const f=new yV(t,u.shape,o,s),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const f=af(a),h=xs({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;return $te(T0.Prod,o,n,s,i,a)}const m6e={kernelName:oP,backendName:"webgl",kernelFunc:p6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;return $te(T0.Sum,o,n,s,i,a)}const v6e={kernelName:mE,backendName:"webgl",kernelFunc:g6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i,binaryOutput:a}=r;if(o.shape.length===1){const u=n.readSync(o.dataId),l=n.readSync(s.dataId),c=pte(u,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}else if(o.shape.length===2){const u=n.bufferSync(o),l=n.bufferSync(s),c=kWe(u,l,i,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const x6e={kernelName:iP,backendName:"webgl",kernelFunc:y6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b6e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:s,dataFormat:i}=r,a=o.shape[0],u=i==="NHWC"?o.shape[1]:o.shape[2],l=i==="NHWC"?o.shape[2]:o.shape[3],c=i==="NHWC"?o.shape[3]:o.shape[1],d=u*s,f=l*s,h=c/(s*s),p=i==="NHWC"?[a,d,f,h]:[a,h,d,f],m=new b6e(p,s,i);return n.runWebGLProgram(m,[o],o.dtype)}const k6e={kernelName:aP,backendName:"webgl",kernelFunc:w6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mte{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Jo(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,u=e.outChannels/e.inChannels;let l="",c="";r&&(o?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pte{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Jo(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,u=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(f+1)/2;v++){const y=v*2;if(h+=`
          xC = xCCorner + ${y*l};
          `,u===1){if(y<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }
              `,l===1&&y>0?h+=`
                xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                  } else {
                    xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xC${y} = xTexelC${y};
                `,y+1<d)){const x=a%2===0?zM(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                    xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${y+1}.zw = vec2(0.0);
                    }
                    xTexelC${y+1}Ready = 1;
                  }
                  `,l>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                    } else {
                     xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                    }
                    `:h+=`
                    xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                    `):x===1?h+=`
                    xC${y+1} = xTexelC${y};
                    `:h+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                      xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${y+1}.zw = vec2(0.0);
                      }
                      xTexelC${y+1}Ready = 1;
                    }

                    xC${y+1} = xTexelC${y+1};
                    `}}else y<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.0);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
              `,y+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(
                  xTexelC${y}.xy, xTexelC${y+1}.xy);
              `,y+1<d&&(h+=`
                  xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                `)));y<d&&(h+=`
            wTexel = getW(r, ${y}, d1, q);
            dotProd += xC${y} * vec4(wTexel.xz, wTexel.xz);
          `,y+1<d&&(h+=`
              wTexel = getW(r, ${y+1}, d1, q);
              dotProd += xC${y+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",m="";r&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:u,dimRoundingMode:l}=r;let c=u;c==null&&(c=[1,1]),U(Qo(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=Lo(o.shape,s.shape,i,c,a,l,!0);let f;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new Pte(d):f=new Mte(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[o,s],"float32",h)}const S6e={kernelName:gE,backendName:"webgl",kernelFunc:C6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E6e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class _6e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,dilations:a,pad:u,dimRoundingMode:l,filterShape:c}=r,d=Lo(o.shape,c,i,a,u,l,!0),f=new E6e(d);return n.runWebGLProgram(f,[o,s],"float32")}const T6e={kernelName:uP,backendName:"webgl",kernelFunc:I6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{strides:i,dilations:a,pad:u,dimRoundingMode:l,inputShape:c}=r,d=Lo(c,s.shape,i,a,u,l,!0),f=new _6e(d);return n.runWebGLProgram(f,[o,s],"float32")}const D6e={kernelName:lP,backendName:"webgl",kernelFunc:N6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R6e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6e(t){const{inputs:e,backend:n}=t,{x:r}=e,o=[...r.shape,...r.shape],s=xe(r.shape),i=je({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new R6e(s),u=n.runWebGLProgram(a,[i],i.dtype),l=je({inputs:{x:u},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),l}const A6e={kernelName:xK,backendName:"webgl",kernelFunc:O6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $6e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:o,strideHeight:s,strideWidth:i,filterHeight:a,filterWidth:u,dilationHeight:l,dilationWidth:c}=e,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${i});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:u}=r,l=I1(o.shape,s.shape,i,a,"NHWC",u);let c;const d=new $6e(l);c=n.runWebGLProgram(d,[o,s],"float32");const f=je({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),f}const P6e={kernelName:vE,backendName:"webgl",kernelFunc:M6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,s=e,{allDims:i,summedDims:a,idDims:u}=LF(o,s.length);jF(i.length,u,s);const{path:l,steps:c}=WF(a,u),d=c.length;let f=null,h=i.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:v,expandDims:y}=BF(h,u[g]);let x;zF(v)?x=s[g]:(x=xs({inputs:{x:s[g]},backend:n,attrs:{perm:v}}),p.push(x));const b=x.shape.slice();for(let C=0;C<y.length;++C)b.splice(y[C],0,1);En(x.shape,b)||(x=je({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),f===null?f=x:(f=T3({inputs:{a:x,b:f},backend:n}),p.push(f))}m<d-1&&(l[m]>=0&&(f=D_({inputs:{x:f},backend:n,attrs:{axis:l[m]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const L6e={kernelName:cP,backendName:"webgl",kernelFunc:F6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B6e="return (x >= 0.0) ? x : (exp(x) - 1.0);",j6e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,W6e=fn({opSnippet:B6e,packedOpSnippet:j6e}),z6e={kernelName:Hx,backendName:"webgl",kernelFunc:W6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U6e="return (b >= 0.0) ? a : a * (b + 1.0);",V6e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,H6e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:o}=e,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Yg(V6e,r.shape,o.shape):new Oh(U6e,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],r.dtype)},G6e={kernelName:dP,backendName:"webgl",kernelFunc:H6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e=`
  return vec4(equal(a, b));
`,q6e="return float(a == b);",K6e=jo({opSnippet:q6e,packedOpSnippet:Y6e,dtype:"bool",cpuKernelImpl:IWe}),X6e={kernelName:yE,backendName:"webgl",kernelFunc:K6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${RF};
  float a1 = ${OF};
  float a2 = ${AF};
  float a3 = ${$F};
  float a4 = ${MF};
  float a5 = ${PF};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,J6e=fn({opSnippet:Q6e}),Z6e={kernelName:Gx,backendName:"webgl",kernelFunc:J6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e5e=qg+`
  return exp(x);
`,t5e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Fte=fn({opSnippet:e5e,packedOpSnippet:t5e,cpuKernelImpl:TWe,dtype:"float32"}),n5e={kernelName:Yx,backendName:"webgl",kernelFunc:Fte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _O(t){const{inputs:e,attrs:n,backend:r}=t,{dim:o}=n,{input:s}=e,i=s.shape.length,a=s.shape.slice();let u=o;return o<0&&(U(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),u=i+o+1),a.splice(u,0,1),je({inputs:{x:s},backend:r,attrs:{shape:a}})}const r5e={kernelName:xE,backendName:"webgl",kernelFunc:_O};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wV="return exp(x) - 1.0;",o5e=fn({opSnippet:wV,packedOpSnippet:wV,cpuKernelImpl:NWe}),s5e={kernelName:qx,backendName:"webgl",kernelFunc:o5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kV{constructor(e,n,r){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${o}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lte(t,e,n){const r=n.texData.get(t.dataId),o=xe(t.shape),s=t.shape[t.shape.length-1],i=o/s,a=je({inputs:{x:t},backend:n,attrs:{shape:[i,s]}}),u=a.shape,l=new kV("real",u,e),c=new kV("imag",u,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],f=n.runWebGLProgram(l,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=hf({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const m=je({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5e(t){const{inputs:e,backend:n}=t,{input:r}=e;return Lte(r,!1,n)}const a5e={kernelName:fP,backendName:"webgl",kernelFunc:i5e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u5e{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1(t){const{backend:e,attrs:n}=t,{shape:r,value:o}=n;let{dtype:s}=n;if(s=s||Ag(o),s==="string"){const i=$r(s,xe(r));return i.fill(o),e.makeTensorInfo(r,s,i)}else{const i=new u5e(r,o),a=[[o]];return e.runWebGLProgram(i,[],s,a)}}const l5e={kernelName:hP,backendName:"webgl",kernelFunc:q1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c5e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d5e={kernelName:pP,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,o=new c5e(n.shape);return r.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CV="return floor(x);",f5e=fn({opSnippet:CV,packedOpSnippet:CV,cpuKernelImpl:DWe}),h5e={kernelName:Kx,backendName:"webgl",kernelFunc:f5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,m5e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,g5e=jo({opSnippet:p5e,packedOpSnippet:m5e,dtype:"int32"}),v5e={kernelName:Xx,backendName:"webgl",kernelFunc:g5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y5e{constructor(e){this.variableNames=["A"];const n=ws(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x5e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=ws(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b5e={kernelName:FSe,backendName:"webgl",kernelFunc:w5e};let Ep,dN=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function w5e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:o}=e;const{numChannels:s}=r,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[u,l]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=[l,u],d=[l,u,s];if(a||i){const m=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Ep==null||m!==dN)&&(dN=m,Ep=document.createElement("canvas").getContext("2d",{willReadFrequently:dN})),Ep.canvas.width=u,Ep.canvas.height=l,Ep.drawImage(o,0,0,u,l),o=Ep.canvas}const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=xi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const h=fe().getBool("WEBGL_PACK")?new x5e(d):new y5e(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r,m=xc(c),g=Lo(o.shape,s.shape,u,d,l,f,!1,m);let v;const y=[],x=i!=null,b=a!=null,C=h==="leakyrelu",S=()=>{const I=[o,s],T=(N,O)=>{if(O==="NCHW"&&N.shape.length===1&&N.shape[0]!==1){const $=je({inputs:{x:N},backend:n,attrs:{shape:[N.shape[0],1,1]}});return y.push($),$}return N};if(x&&I.push(T(i,c)),b&&I.push(T(a,c)),C){const N=n.makeTensorInfo([],"float32",of(p,"float32"));I.push(N),y.push(N)}return I};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))v=Ote({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){const I=h?_0(h,!0):null,T=new Rte(g,x,I,b,C),N=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],O=S();v=n.runWebGLProgram(T,O,"float32",N)}else if(fe().getBool("WEBGL_CONV_IM2COL"))v=Ate({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const I=h?_0(h,!1):null,T=new Dte(g,x,I,b,C),N=S();v=n.runWebGLProgram(T,N,"float32")}const E=je({inputs:{x:v},backend:n,attrs:{shape:g.outShape}});return y.push(v),y.forEach(I=>n.disposeIntermediateTensorInfo(I)),E}const C5e={kernelName:FC,backendName:"webgl",kernelFunc:k5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:u,pad:l,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,p=[];let m=c;m==null&&(m=[1,1]),U(Qo(u,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${m}'`);const g=Lo(o.shape,s.shape,u,m,l,d,!0),v=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,y=f?_0(f,v):null,x=[o,s],b=i!=null,C=a!=null,S=f==="leakyrelu";if(b&&x.push(i),C&&x.push(a),S){const N=n.makeTensorInfo([],"float32",of(h,"float32"));x.push(N),p.push(N)}let E;v?E=new Pte(g,b,y,C,S):E=new Mte(g,b,y,C,S);const I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=n.runWebGLProgram(E,x,"float32",I);return p.forEach(N=>n.disposeIntermediateTensorInfo(N)),T}const E5e={kernelName:LK,backendName:"webgl",kernelFunc:S5e};class _5e{constructor(e,n,r,o){this.sliceDim=e,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;const s=Fn(r.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5e(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,s=o.shape,i=s[s.length-1],a=xe(r.shape),[u,l,c,d]=bF(r,o),f=je({inputs:{x:o},backend:n,attrs:{shape:[l,i]}}),h=je({inputs:{x:r},backend:n,attrs:{shape:[xe(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,o])||r.dtype==="string"){const v=n.readSync(o.dataId),y=n.bufferSync(r),x=RWe(v,y,r.dtype,l,i,c,d,r.shape,a);return n.makeTensorInfo(u,r.dtype,x.values)}const p=new _5e(i,d,[l,c],r.shape),m=n.runWebGLProgram(p,[h,f],h.dtype),g=je({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const T5e={kernelName:bK,backendName:"webgl",kernelFunc:I5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N5e{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Fn(this.rank),o=D5e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function D5e(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<t.length;o++)o===2?r.push("index"):r.push(`${n[o]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bte(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:s}=e,{axis:i,batchDims:a}=r,u=Gt(i,o.shape)[0];if(fe().get("DEBUG")){const y=n.readSync(s.dataId),x=o.shape[u];for(let b=0;b<y.length;++b){const C=y[b];U(C<=x-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${x-1}]`)}}const l=VF(o,s,u,a),c=xe(s.shape),d=[],f=je({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=je({inputs:{x:s},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});d.push(f),d.push(h);const p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([o,s])||o.dtype==="string"){const y=n.bufferSync(h),x=n.bufferSync(f),b=OWe(x,y,p);return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(l.outputShape,b.dtype,b.values)}const m=new N5e(f.shape,p),g=n.runWebGLProgram(m,[f,h],f.dtype);d.push(g);const v=je({inputs:{x:g},backend:n,attrs:{shape:l.outputShape}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),v}const R5e={kernelName:wE,backendName:"webgl",kernelFunc:Bte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5e="return float(a > b);",A5e=`
  return vec4(greaterThan(a, b));
`,$5e=jo({opSnippet:O5e,packedOpSnippet:A5e,cpuKernelImpl:AWe,dtype:"bool"}),M5e={kernelName:kE,backendName:"webgl",kernelFunc:$5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P5e="return float(a >= b);",F5e=`
  return vec4(greaterThanEqual(a, b));
`,L5e=jo({opSnippet:P5e,packedOpSnippet:F5e,dtype:"bool",cpuKernelImpl:$We}),B5e={kernelName:Qx,backendName:"webgl",kernelFunc:L5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j5e(t){const{inputs:e,backend:n}=t,{input:r}=e;return Lte(r,!0,n)}const W5e={kernelName:mP,backendName:"webgl",kernelFunc:j5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z5e="return float(!isnan(x) && !isinf(x));",U5e=fn({opSnippet:z5e,dtype:"bool"}),V5e={kernelName:Zx,backendName:"webgl",kernelFunc:U5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5e="return float(isinf(x));",G5e=fn({opSnippet:H5e,dtype:"bool"}),Y5e={kernelName:e1,backendName:"webgl",kernelFunc:G5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5e="return float(isnan(x));",K5e=fn({opSnippet:q5e,dtype:"bool"}),X5e={kernelName:t1,backendName:"webgl",kernelFunc:K5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5e="return float(a < b);",J5e=`
  return vec4(lessThan(a, b));
`,Z5e=jo({opSnippet:Q5e,packedOpSnippet:J5e,cpuKernelImpl:MWe,dtype:"bool"}),eHe={kernelName:SE,backendName:"webgl",kernelFunc:Z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tHe="return float(a <= b);",nHe=`
  return vec4(lessThanEqual(a, b));
`,rHe=jo({opSnippet:tHe,packedOpSnippet:nHe,cpuKernelImpl:PWe,dtype:"bool"}),oHe={kernelName:EE,backendName:"webgl",kernelFunc:rHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sHe(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:s}=n,i=FWe(r,o,s);return e.makeTensorInfo([i.length],"float32",i)}const iHe={kernelName:wK,backendName:"webgl",kernelFunc:sHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aHe=qg+`
  return x < 0.0 ? 0./0. : log(x);
`,uHe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,lHe=fn({opSnippet:aHe,packedOpSnippet:uHe,cpuKernelImpl:LWe}),cHe={kernelName:n1,backendName:"webgl",kernelFunc:lHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dHe=qg+`
  return log(1.0 + x);
`,fHe=fn({opSnippet:dHe}),hHe={kernelName:r1,backendName:"webgl",kernelFunc:fHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pHe="return float(a >= 1.0 && b >= 1.0);",mHe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,gHe=jo({opSnippet:pHe,packedOpSnippet:mHe,dtype:"bool"}),vHe={kernelName:_E,backendName:"webgl",kernelFunc:gHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yHe="return float(!(x >= 1.0));",xHe=fn({opSnippet:yHe}),bHe={kernelName:IE,backendName:"webgl",kernelFunc:xHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wHe="return float(a >= 1.0 || b >= 1.0);",kHe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,CHe=jo({opSnippet:wHe,packedOpSnippet:kHe,dtype:"bool"}),SHe={kernelName:TE,backendName:"webgl",kernelFunc:CHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EHe{constructor(e,n,r,o,s){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${o}) * sum`;s===.5?u=`inversesqrt(${l})`:s===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _He{constructor(e,n,r,o,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${o}) * sum`;s===.5?u=`inversesqrt(${l})`:s===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:s,bias:i,alpha:a,beta:u}=r,l=fe().getBool("WEBGL_PACK_NORMALIZATION")?new _He(o.shape,s,i,a,u):new EHe(o.shape,s,i,a,u);return n.runWebGLProgram(l,[o],o.dtype)},THe={kernelName:NE,backendName:"webgl",kernelFunc:IHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NHe{constructor(e,n,r,o,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=o,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o,y:s,dy:i}=e,{depthRadius:a,bias:u,alpha:l,beta:c}=r,d=new NHe(o.shape,a,u,l,c);return n.runWebGLProgram(d,[o,s,i],o.dtype)},RHe={kernelName:vP,backendName:"webgl",kernelFunc:DHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OHe(t,e,n,r){const o=xe(e),i=xe(t.shape)/o,a=je({inputs:{x:t},attrs:{shape:[i,o]},backend:r}),u=rp(a,t.dtype,"max",r),l=je({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jte(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:s,keepDims:i}=r,a=o.shape.length,u=Gt(s,o.shape);let l=u;const c=br(l,a),d=c!=null,f=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(f){const x=n.texData.get(h.dataId).values,b=new Array(a);for(let E=0;E<b.length;E++)b[E]=o.shape[c[E]];const C=_3(x,o.shape,o.dtype,c,b);h=n.makeTensorInfo(b,o.dtype);const S=n.texData.get(h.dataId);S.values=C}else h=N_(o,c,n);l=Br(l.length,a)}Bo("max",l,a);const[p,m]=Co(h.shape,l);let g=p;i&&(g=Kr(p,u));let v;if(f){const x=n.texData.get(h.dataId).values,b=BWe(x,xe(m),g,o.dtype);v=n.makeTensorInfo(g,o.dtype);const C=n.texData.get(v.dataId);C.values=b}else v=OHe(h,m,g,n);return d&&n.disposeIntermediateTensorInfo(h),v}const AHe={kernelName:DE,backendName:"webgl",kernelFunc:jte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $He=I3+`
  return max(a, b);
`,MHe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+np+`
  return result;
`,PHe=jo({opSnippet:$He,packedOpSnippet:MHe,cpuKernelImpl:jWe}),FHe={kernelName:o1,backendName:"webgl",kernelFunc:PHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;H1(o,"maxPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:u}=r,l=1;U(Qo(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=va(o.shape,s,i,l,a,u);if(c.filterWidth===1&&c.filterHeight===1&&En(c.inShape,c.outShape))return si({inputs:{x:o},backend:n});const d=new I0(c,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const BHe={kernelName:RE,backendName:"webgl",kernelFunc:LHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dataFormat:u,dimRoundingMode:l}=r,c=[1,1,1],d=yc(o.shape,s,i,c,a,l,u),f=new N3(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const WHe={kernelName:OE,backendName:"webgl",kernelFunc:jHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zHe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=s-1-e.padInfo.top,u=i-1-e.padInfo.left,l=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class UHe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=u-1-e.padInfo.front,f=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s,{filterSize:a,strides:u,pad:l,dimRoundingMode:c}=r,d=[1,1,1],f=yc(i.shape,a,u,d,l,c),h=new N3(f,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),m=new UHe(f),g=n.runWebGLProgram(m,[o,p],i.dtype);return n.disposeIntermediateTensorInfo(p),g}const HHe={kernelName:xP,backendName:"webgl",kernelFunc:VHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GHe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s,output:i}=e,a=s;H1([s,i],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:d}=r,f=va(a.shape,u,l,1,c,d),h=!0,p=new I0(f,"max",h),m=n.runWebGLProgram(p,[a],a.dtype),g=new zHe(f),v=n.runWebGLProgram(g,[o,m],a.dtype);return n.disposeIntermediateTensorInfo(m),v}const YHe={kernelName:yP,backendName:"webgl",kernelFunc:GHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qHe(t,e,n,r){let o=new I0(n,"max",!1);const s=r.runWebGLProgram(o,[t],"float32");o=new I0(n,"max",!0,!0,e);const i=r.runWebGLProgram(o,[t],"float32");return[s,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KHe={kernelName:kK,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=e,u=n;U(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];U(Qo(s,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${l}'`);const c=va(r.shape,o,s,l,i),[d,f]=qHe(r,a,c,u);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XHe(t,e,n,r){const o=xe(e),i=xe(t.shape)/o,a=je({inputs:{x:t},attrs:{shape:[i,o]},backend:r}),u=rp(a,"float32","mean",r),l=je({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QHe={kernelName:AE,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:o,axis:s}=e,i=n,a=r.shape.length,u=Gt(s,r.shape);let l=u;const c=br(l,a),d=c!=null,f=i.shouldExecuteOnCPU([r]),h=[];let p=r;if(d){if(f){const b=i.texData.get(p.dataId).values,C=new Array(a);for(let I=0;I<C.length;I++)C[I]=r.shape[c[I]];const S=_3(b,r.shape,r.dtype,c,C);p=i.makeTensorInfo(C,r.dtype);const E=i.texData.get(p.dataId);E.values=S}else p=N_(r,c,i);h.push(p),l=Br(l.length,a)}Bo("sum",l,a);const[m,g]=Co(p.shape,l);let v=m;o&&(v=Kr(m,u));const y=XHe(p,g,v,i);for(const x of h)i.disposeIntermediateTensorInfo(x);return y}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,u=Gt(s,o.shape);let l=u;const c=br(l,a);let d=o;c!=null&&(d=xs({inputs:{x:o},backend:n,attrs:{perm:c}}),l=Br(l.length,o.shape.length)),Bo("min",l,a);const[f,h]=Co(d.shape,l),p=xe(h),m=je({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=rp(m,m.dtype,"min",n);let v;if(i){const y=Kr(f,u);v=je({inputs:{x:g},backend:n,attrs:{shape:y}})}else v=je({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),v}const ZHe={kernelName:$E,backendName:"webgl",kernelFunc:JHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eGe=I3+`
  return min(a, b);
`,tGe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+np+`
  return result;
`,nGe=jo({opSnippet:eGe,packedOpSnippet:tGe,cpuKernelImpl:WWe}),rGe={kernelName:s1,backendName:"webgl",kernelFunc:nGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oGe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const o=e.length,s=Fn(o),i=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+e[d]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),l=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sGe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const o=e.length,s=Fn(o),i=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),u=cs("rc",o),l=cs("source",o),c=`${u[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${l.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(o===1){const p=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${d});
        ${u[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${d});
        }
      `}else{const p=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${d});
        ${u[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${d});
        }
        rc = outputLoc;
        ${u[o-2]} += 1;
        if(${u[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${l.join()}), ${d});
          ${u[o-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${l.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iGe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:o,mode:s}=n,i=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sGe(r.shape,o,s):new oGe(r.shape,o,s);return e.runWebGLProgram(i,[r],r.dtype)},aGe={kernelName:ME,backendName:"webgl",kernelFunc:iGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uGe=`if (b == 0.0) return NAN;
  return mod(a, b);`,lGe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+np+`
  return result;
`,cGe=jo({opSnippet:uGe,packedOpSnippet:lGe}),dGe={kernelName:i1,backendName:"webgl",kernelFunc:cGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fGe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hGe=`
if (a == b) {
  return 1.0;
};
return a / b;`,pGe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Wte=jo({opSnippet:hGe,packedOpSnippet:pGe,checkOutOfBounds:!0}),mGe={kernelName:Vx,backendName:"webgl",kernelFunc:Wte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SV="return a - b;",zte=jo({opSnippet:SV,packedOpSnippet:SV,supportsComplex:!0,cpuKernelImpl:uze}),gGe={kernelName:k1,backendName:"webgl",kernelFunc:zte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ute(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:s}=r,i=Gt([s],o.shape),a=jte({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),u=Kr(a.shape,i),l=je({inputs:{x:a},backend:n,attrs:{shape:u}}),c=zte({inputs:{a:o,b:l},backend:n}),d=Fte({inputs:{x:c},backend:n}),f=D_({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),h=je({inputs:{x:f},backend:n,attrs:{shape:u}}),p=Wte({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const vGe={kernelName:ZE,backendName:"webgl",kernelFunc:Ute};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yGe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:s,seed:i,normalized:a}=r,u=a?o:Ute({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),l=u.shape[0],c=u.shape[1],d=new fGe(l,c,s),f=[[i]],h=n.runWebGLProgram(d,[u],"int32",f);return a||n.disposeIntermediateTensorInfo(u),h}const xGe={kernelName:CK,backendName:"webgl",kernelFunc:yGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bGe=xa+`
  return -x;
`,wGe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function kGe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[i,a]=UWe(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}let o;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new rd(r.shape,wGe):o=new Au(r.shape,bGe),n.runWebGLProgram(o,[r],r.dtype)}const CGe={kernelName:PE,backendName:"webgl",kernelFunc:kGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SGe=mF;function EGe(t){pi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u}=r,l=n.readSync(o.dataId),c=n.readSync(s.dataId),{selectedIndices:d}=SGe(l,c,i,a,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const _Ge={kernelName:bP,backendName:"webgl",kernelFunc:EGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IGe=gF;function TGe(t){pi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(o.dataId),d=n.readSync(s.dataId),{selectedIndices:f,validOutputs:h}=IGe(c,d,i,a,u,l);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const NGe={kernelName:wP,backendName:"webgl",kernelFunc:TGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DGe=vF;function RGe(t){pi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(o.dataId),d=n.readSync(s.dataId),f=i,h=a,p=u,m=l,{selectedIndices:g,selectedScores:v}=DGe(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const OGe={kernelName:kP,backendName:"webgl",kernelFunc:RGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AGe{constructor(e,n,r,o){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ge=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:s,depth:i,onValue:a,offValue:u}=r,l=xe(o.shape),c=new AGe(l,i,a,u),d=je({inputs:{x:o},backend:n,attrs:{shape:[l]}}),f=n.runWebGLProgram(c,[d],s);n.disposeIntermediateTensorInfo(d);const h=[...o.shape,i],p=je({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),p},MGe={kernelName:BE,backendName:"webgl",kernelFunc:$Ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const o=Y1({inputs:{input:r},backend:n}),s=l2({inputs:{x:o},backend:n}),i=R_({inputs:{input:r},backend:n}),a=l2({inputs:{x:i},backend:n}),u=hf({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),u}else return q1({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const PGe={kernelName:n_,backendName:"webgl",kernelFunc:l2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vte(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const o=Y1({inputs:{input:r},backend:n}),s=Vte({inputs:{x:o},backend:n}),i=R_({inputs:{input:r},backend:n}),a=l2({inputs:{x:i},backend:n}),u=hf({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),u}else return q1({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const FGe={kernelName:LE,backendName:"webgl",kernelFunc:Vte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LGe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return _O({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const s=e[0].shape,i=e[0].dtype;e.forEach(c=>{UM(s,c.shape,"All tensors passed to stack must have matching shapes"),U(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],u=e.map(c=>{const d=_O({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),l=Nte({inputs:u,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const BGe={kernelName:jE,backendName:"webgl",kernelFunc:LGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jGe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,c)=>l[0]+e[c]+l[1]);const o=e.length,s=Fn(o),i=n.map(l=>l[0]).join(","),a=n.map((l,c)=>l[0]+e[c]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WGe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const o=e.length,s=Fn(o),i=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),u=cs("rc",o),l=cs("source",o),c=`${u[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${l.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${u[o-1]} += 1;
       if(${c}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${u[o-2]} += 1;
       if(${u[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${u[o-1]} += 1;
         if(${c}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=o===1?2:4;m<g;m++)p+=`
        ${f[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${m}] = getChannel(getX(${l.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hte=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,constantValue:i}=r;if(xe(o.shape)===0){const l=s.map((c,d)=>c[0]+o.shape[d]+c[1]);return q1({backend:n,attrs:{shape:l,value:i,dtype:o.dtype}})}const a=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new WGe(o.shape,s,i):new jGe(o.shape,s,i),u=[[i]];return n.runWebGLProgram(a,[o],o.dtype,u)},zGe={kernelName:WE,backendName:"webgl",kernelFunc:Hte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UGe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,VGe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+np+`
  return result;
`,HGe=jo({opSnippet:UGe,packedOpSnippet:VGe}),GGe={kernelName:u1,backendName:"webgl",kernelFunc:HGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,u=[],l=Gt(s,o.shape);let c=l;const d=br(c,a);let f=o;d!=null&&(f=xs({inputs:{x:o},backend:n,attrs:{perm:d}}),c=Br(c.length,a),u.push(f)),Bo("prod",c,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:m,outShape:g,outDtype:v}=HWe(f.shape,f.dtype,p,c);h=n.makeTensorInfo(g,v,m)}else{const[p,m]=Co(f.shape,c),g=xe(m),v=je({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),y=MP(o.dtype),x=rp(v,y,"prod",n);h=je({inputs:{x},backend:n,attrs:{shape:p}}),u.push(v),u.push(x)}if(i){u.push(h);const p=Kr(h.shape,l);h=je({inputs:{x:h},backend:n,attrs:{shape:p}})}return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const qGe={kernelName:UE,backendName:"webgl",kernelFunc:YGe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KGe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=e,{outputRaggedRank:a}=r,u=o.map(v=>n.readSync(v.dataId)),l=o.map(v=>v.shape),c=n.readSync(s.dataId),d=n.readSync(i.dataId),[f,h,p]=GWe(u,l,c,s.shape,s.dtype,d,i.shape,a),m=f.map(v=>n.makeTensorInfo([v.length],"int32",v)),g=n.makeTensorInfo(p,s.dtype,h);return m.concat([g])}const XGe={kernelName:SK,backendName:"webgl",kernelFunc:KGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QGe(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:s}=e,i=n.readSync(r.dataId),a=n.readSync(o.dataId),u=n.readSync(s.dataId),[l,c]=YWe(i,r.shape,r.dtype,a,o.shape,u,s.shape),d=n.makeTensorInfo([l.length],"int32",l),f=n.makeTensorInfo([c.length],r.dtype,c);return[d,f]}const JGe={kernelName:EK,backendName:"webgl",kernelFunc:QGe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZGe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:u}=r,l=n.readSync(o.dataId),c=n.readSync(s.dataId),d=n.readSync(i.dataId),f=a.map(g=>n.readSync(g.dataId)),h=a.map(g=>g.shape),[p,m]=qWe(l,o.shape,c,s.shape,s.dtype,d,i.shape,f,h,u);return n.makeTensorInfo(p,s.dtype,m)}const e8e={kernelName:_K,backendName:"webgl",kernelFunc:ZGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gte=t=>{const{backend:e,attrs:n}=t,{start:r,stop:o,step:s,dtype:i}=n,a=KWe(r,o,s,i);return e.makeTensorInfo([a.length],i,a)},t8e={kernelName:CP,backendName:"webgl",kernelFunc:Gte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8e="return 1.0 / x;",r8e=fn({opSnippet:n8e}),o8e={kernelName:l1,backendName:"webgl",kernelFunc:r8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s8e=xa+`
  return (x < 0.0) ? 0.0 : x;
`,i8e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,a8e=fn({opSnippet:s8e,packedOpSnippet:i8e}),u8e={kernelName:c1,backendName:"webgl",kernelFunc:a8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l8e=xa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,c8e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,d8e=fn({opSnippet:l8e,packedOpSnippet:c8e}),f8e={kernelName:d1,backendName:"webgl",kernelFunc:d8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h8e{constructor(e,n,r,o,s){this.variableNames=["A"],this.outputShape=[];const[i,a,u,l]=e;this.outputShape=[i,n,r,l];const c=[o&&n>1?a-1:a,o&&r>1?u-1:u],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p8e{constructor(e,n,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,u,l]=e;this.outputShape=[i,n,r,l];const c=[o&&n>1?a-1:a,o&&r>1?u-1:u],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r,[u,l]=a,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new p8e(o.shape,u,l,s,i):new h8e(o.shape,u,l,s,i);return n.runWebGLProgram(c,[o],"float32")}const g8e={kernelName:GE,backendName:"webgl",kernelFunc:m8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v8e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,s]=n,[,i,a]=e,u=[r&&i>1?o-1:o,r&&a>1?s-1:s],l=[r&&i>1?i-1:i,r&&a>1?a-1:a],c=u[0]/l[0],d=u[1]/l[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r,a=new v8e(s.shape,o.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const x8e={kernelName:_P,backendName:"webgl",kernelFunc:y8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b8e{constructor(e,n,r,o,s){this.variableNames=["A"],this.outputShape=[];const[i,a,u,l]=e;this.outputShape=[i,n,r,l];const c=[o&&n>1?a-1:a,o&&r>1?u-1:u],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w8e{constructor(e,n,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,u,l]=e;this.outputShape=[i,n,r,l];const c=[o&&n>1?a-1:a,o&&r>1?u-1:u],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r,[u,l]=a,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new w8e(o.shape,u,l,s,i):new b8e(o.shape,u,l,s,i);return n.runWebGLProgram(c,[o],o.dtype)}const C8e={kernelName:HE,backendName:"webgl",kernelFunc:k8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S8e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,s]=n,[,i,a]=e,u=[r&&i>1?o-1:o,r&&a>1?s-1:s],l=[r&&i>1?i-1:i,r&&a>1?a-1:a],c=u[0]/l[0],d=u[1]/l[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r,a=new S8e(s.shape,o.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const _8e={kernelName:EP,backendName:"webgl",kernelFunc:E8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I8e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,u)=>o(u)).join(","),i=Fn(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T8e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const o=cs("rc",r),s=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Fn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(o.slice())};
          if(${s}){
            result.g = ${l(o.slice())};
          }
          if(${i}) {
            result.b = ${c(o.slice())};
            if(${s}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(p){return f(p)}function l(p){return p[r-1]="("+p[r-1]+" + 1)",f(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",f(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",f(p)}function f(p){const m=e.map((y,x)=>h(x,p)),g=m.join(","),v=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${v}))`}function h(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:s}=r,i=o.shape.length,a=Gt(s,o.shape);if(i===0)return si({inputs:{x:o},backend:n});const u=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new T8e(o.shape,a):new I8e(o.shape,a);return n.runWebGLProgram(u,[o],o.dtype)}const D8e={kernelName:YE,backendName:"webgl",kernelFunc:N8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R8e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],o=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O8e={kernelName:AP,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:s,center:i}=e,a=n,u=new R8e(r.shape,s),[l,c]=TF(i,r.shape[1],r.shape[2]),d=[[l,c,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(u,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A8e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,$8e=fn({opSnippet:A8e}),M8e={kernelName:f1,backendName:"webgl",kernelFunc:$8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P8e="return inversesqrt(x);",F8e=fn({opSnippet:P8e,cpuKernelImpl:XWe}),L8e={kernelName:h1,backendName:"webgl",kernelFunc:F8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D3{constructor(e,n,r,o,s,i,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const l=Fn(s.length),c=Fn(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";o===1?h="i":o===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";u&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,v=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B8e{constructor(e,n,r,o,s,i,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const l=Fn(s.length),c=Fn(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";o===1?h="i":o===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";u&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,v=n>1?"strides[j]":"strides",y=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${y};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:s}=e,{shape:i}=r,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=Qh(s,o,i),f=[d/l,l];if(d===0)return n.makeTensorInfo(i,o.dtype);const h=je({inputs:{x:o},backend:n,attrs:{shape:[u,a]}}),p=je({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;fe().getBool("WEBGL_PACK")?g=new B8e(u,a,h.shape.length,p.shape.length,c,f):g=new D3(u,a,h.shape.length,p.shape.length,c,f);const v=n.runWebGLProgram(g,[p,h,m],p.dtype),y=je({inputs:{x:v},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),y}const W8e={kernelName:IK,backendName:"webgl",kernelFunc:j8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z8e{constructor(e,n,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=fe().getNumber("WEBGL_VERSION")===2?s:i,u=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U8e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:s}=e,{side:i}=r,a=new z8e(o.shape[0],o.shape[1],s.shape[1],i),u=[[o.shape[1]]];return n.runWebGLProgram(a,[o,s],"int32",u)}const V8e={kernelName:NK,backendName:"webgl",kernelFunc:U8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H8e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let o,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[];for(let c=0;c<n.length;c++)l.push(`${a[c]}`),c<e&&u.push(`${a[c]}`);o=u.join(),s=l.join()}const i=Fn(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8e(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:s}=e,i=new H8e(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[r,o,s],ri(o.dtype,s.dtype))}const Y8e={kernelName:qE,backendName:"webgl",kernelFunc:G8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q8e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${h_};
  float scale = ${p_};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,K8e=fn({opSnippet:q8e}),X8e={kernelName:p1,backendName:"webgl",kernelFunc:K8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q8e=qg+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,J8e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Z8e=fn({opSnippet:Q8e,packedOpSnippet:J8e,cpuKernelImpl:JWe}),eYe={kernelName:y1,backendName:"webgl",kernelFunc:Z8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tYe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,nYe=fn({opSnippet:tYe}),rYe={kernelName:v1,backendName:"webgl",kernelFunc:nYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oYe=qg+`
  return sin(x);
`,sYe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${np}
  return result;
`,iYe=fn({opSnippet:oYe,packedOpSnippet:sYe}),aYe={kernelName:m1,backendName:"webgl",kernelFunc:iYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uYe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,lYe=fn({opSnippet:uYe}),cYe={kernelName:g1,backendName:"webgl",kernelFunc:lYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dYe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,fYe=fn({opSnippet:dYe}),hYe={kernelName:x1,backendName:"webgl",kernelFunc:fYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pYe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,paddings:i}=r;U(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((v,y)=>v*y),u=[[0,0]];u.push(...i);for(let v=1+s.length;v<o.shape.length;++v)u.push([0,0]);const l=[],c=Hte({inputs:{x:o},backend:n,attrs:{paddings:u,constantValue:0}}),d=O1(c.shape,s,a,!1),f=A1(d.length,s.length,!1),h=$1(c.shape,s,a,!1),p=je({inputs:{x:c},backend:n,attrs:{shape:d}}),m=xs({inputs:{x:p},backend:n,attrs:{perm:f}}),g=je({inputs:{x:m},backend:n,attrs:{shape:h}});return l.push(c),l.push(p),l.push(m),l.forEach(v=>n.disposeIntermediateTensorInfo(v)),g},mYe={kernelName:QE,backendName:"webgl",kernelFunc:pYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gYe(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(r.dataId),u=n.readSync(o.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId)[0],[d,f,h,p,m]=eze(a,r.shape,r.dtype,u,o.dtype,l,c);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const vYe={kernelName:DK,backendName:"webgl",kernelFunc:gYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yYe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.readSync(o.dataId)),a=n.readSync(r.dataId),u=Array.from(n.readSync(s.dataId)),[l,c,d]=tze(a,r.shape,r.dtype,i,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const xYe={kernelName:RK,backendName:"webgl",kernelFunc:yYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bYe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const i=n.readSync(r.dataId),a=n.readSync(o.dataId),u=n.readSync(s.dataId),[l,c]=gte(i,r.shape,r.dtype,a,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const wYe={kernelName:OK,backendName:"webgl",kernelFunc:bYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kYe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const i=n.readSync(r.dataId),a=n.readSync(o.dataId),u=n.readSync(s.dataId),[l,c]=gte(i,r.shape,r.dtype,a,u);return n.makeTensorInfo(c,r.dtype,l)}const CYe={kernelName:AK,backendName:"webgl",kernelFunc:kYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SYe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:s,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:d,outputSize:f}=Qh(s,o,a),h=!1;if(s.dtype==="string"){const v=n.bufferSync(o),y=n.bufferSync(s),x=Bd(n.readSync(i.dataId)[0]),b=QWe(v,y,a,f,c,l,u,d,x,h);return n.makeTensorInfo(a,b.dtype,b.values)}const p=new D3(l,u,o.shape.length,s.shape.length,d,[f,1],h),m=n.runWebGLProgram(p,[s,o,i],s.dtype),g=je({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const EYe={kernelName:$K,backendName:"webgl",kernelFunc:SYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ye(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:s,axis:i}=r,a=Gt(i,o.shape)[0],u=UF(o,s,a),l=o.shape.length,c=new Array(l).fill(0),d=o.shape.slice();return u.map(f=>{const h=[...d];h[a]=f;const p=Kg({inputs:{x:o},backend:n,attrs:{begin:c,size:h}});return c[a]+=f,p})}const IYe={kernelName:JE,backendName:"webgl",kernelFunc:_Ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EV="return sqrt(x);",TYe=fn({opSnippet:EV,packedOpSnippet:EV,cpuKernelImpl:nze}),NYe={kernelName:b1,backendName:"webgl",kernelFunc:TYe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DYe="return x * x;",RYe=fn({opSnippet:DYe}),OYe={kernelName:IP,backendName:"webgl",kernelFunc:RYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _V="return (a - b) * (a - b);",AYe=jo({opSnippet:_V,packedOpSnippet:_V}),$Ye={kernelName:w1,backendName:"webgl",kernelFunc:AYe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(o.dataId),i=uc(s),a=rze(i,"string",r);return n.makeTensorInfo(o.shape,"string",a)}const PYe={kernelName:TP,backendName:"webgl",kernelFunc:MYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FYe({inputs:t,attrs:e,backend:n}){const{x:r}=t,o=xa+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new Au(r.shape,o);return n.runWebGLProgram(s,[r],r.dtype)}const LYe={kernelName:_1,backendName:"webgl",kernelFunc:FYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BYe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const o=r.length,s=Fn(r.length),i=Fn(r.length);let a="";if(o===1)a="coords * strides + begin";else{let u=0;a=r.map((l,c)=>(u++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${u-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,end:i,strides:a,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:y,end:x,strides:b}=EF(o.shape,s,i,a,u,l,c,d,f);let C;if(m)C=je({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||v){U(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const E=kF(y,x,b),I=Kg({inputs:{x:o},backend:n,attrs:{begin:y,size:E}});C=je({inputs:{x:I},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(I)}else if(n.shouldExecuteOnCPU([o])){const I=n.readSync(o.dataId),T=Ht(o.shape,o.dtype,I),N=oze(h,T,b,y);C=n.makeTensorInfo(p,o.dtype,N.values)}else{const I=new BYe(y,b,h);C=n.runWebGLProgram(I,[o],o.dtype)}const S=je({inputs:{x:C},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(C),S}const WYe={kernelName:NP,backendName:"webgl",kernelFunc:jYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zYe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:d}=e,f=n.readSync(c.dataId),h=n.readSync(d.dataId),[p,m]=sze(f,h,o,s,i,a,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const UYe={kernelName:MK,backendName:"webgl",kernelFunc:zYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VYe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(s.dataId),u=n.readSync(i.dataId)[0],[l,c,d]=ize(a,u,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",l),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const HYe={kernelName:PK,backendName:"webgl",kernelFunc:VYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GYe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(s.dataId),a=aze(i,o);return n.makeTensorInfo(s.shape,"int32",a)}const YYe={kernelName:FK,backendName:"webgl",kernelFunc:GYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qYe="return tan(x);",KYe=fn({opSnippet:qYe}),XYe={kernelName:C1,backendName:"webgl",kernelFunc:KYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QYe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,JYe=fn({opSnippet:QYe}),ZYe={kernelName:S1,backendName:"webgl",kernelFunc:JYe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7e(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:o,indices:s,updates:i}=e,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=Qh(i,s,o.shape),f=[d/l,l];if(d===0)return n.makeTensorInfo(o.shape,s.dtype);const h=je({inputs:{x:s},backend:n,attrs:{shape:[u,a]}}),p=je({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),m=je({inputs:{x:o},backend:n,attrs:{shape:f}}),g=new D3(u,a,h.shape.length,p.shape.length,c,f,!1,!0),v=n.runWebGLProgram(g,[p,h,m],m.dtype),y=je({inputs:{x:v},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),y}const t7e={kernelName:TK,backendName:"webgl",kernelFunc:e7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n7e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const o=Fn(this.rank),s=r7e(e);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function r7e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<t.length;o++)r.push(`imod(${n[o]}, ${t[o]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yte(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:s}=r;if(o.dtype==="string"||o.shape.length>5){const u=n.readSync(o.dataId),l=o.dtype==="string"?u.map(f=>Bd(f)):u,c=Ht(o.shape,o.dtype,l),d=lze(c,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new n7e(o.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}const o7e={kernelName:E1,backendName:"webgl",kernelFunc:Yte};class s7e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class i7e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kf(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function IV(t){let e=1;for(;e<t;)e*=2;return e}function a7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:s,sorted:i}=r,a=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=o.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([o])||c<a||s>u){const N=n.readSync(o.dataId),[O,$]=cze(N,l,o.dtype,s,i);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo($.shape,$.dtype,$.values)]}if(s===0)return l[l.length-1]=0,[n.makeTensorInfo(l,o.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(c===1)return[o,q1({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(o):o,m=xe(l)/c,g=je({inputs:{x:h},attrs:{shape:[m,c]},backend:n});f&&kf(n,h);const v=IV(s),y=IV(c);let x=null;const b=()=>x===null?[g,g]:[g,x],C=(N,O,$)=>{const A=b(),P=new s7e($),W=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[N],[O]],z=x;x=n.runWebGLProgram(P,A,"int32",W),kf(n,z)};for(let N=1;N<v;N*=2){const O=N*2;for(let $=N;$>=1;$/=2)C(O,$,[m,y])}for(let N=y;N>v;N/=2){const O=b(),$=new i7e([m,N/2]),P=[[c],[x===null?1:0],[v]],L=x;x=n.runWebGLProgram($,O,"int32",P),kf(n,L);const W=v/2,z=W*2;for(let F=W;F>=1;F/=2)C(z,F,x.shape)}let S=x;x=Kg({inputs:{x},backend:n,attrs:{begin:0,size:[m,s]}}),kf(n,S);let E=Bte({inputs:{x:g,indices:x},backend:n,attrs:{axis:1,batchDims:1}});kf(n,g);const I=l.slice(0,-1);I.push(s),S=x,x=je({inputs:{x},attrs:{shape:I},backend:n}),kf(n,S);const T=E;return E=je({inputs:{x:E},attrs:{shape:I},backend:n}),kf(n,T),[E,x]}const u7e={kernelName:DP,backendName:"webgl",kernelFunc:a7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l7e{constructor(e,n,r,o,s,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=r==="nearest"?1:2;let u;switch(o){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7e(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,transforms:s}=e,{interpolation:i,fillMode:a,fillValue:u,outputShape:l}=r,[c,d,f,h]=o.shape,[p,m]=l??[d,f],g=[c,p,m,h],v=new l7e(d,f,i,a,u,g);return n.runWebGLProgram(v,[o,s],"float32")}const d7e={kernelName:RP,backendName:"webgl",kernelFunc:c7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f7e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:s}=e;H1(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(s.dataId),{outputValues:a,outputShape:u,indices:l}=dze(i,o,s.shape,s.dtype);return[r.makeTensorInfo(u,s.dtype,a),r.makeTensorInfo([l.length],"int32",l)]}const h7e={kernelName:OP,backendName:"webgl",kernelFunc:f7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p7e(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:s}=r;s<0&&(s+=o.shape.length);const i=o,a=i.shape.length,u=o.shape[s],l=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==s&&(l[c++]=i.shape[m]);const d=[],f=new Array(a).fill(0),h=i.shape.slice();h[s]=1;const p=new Array(u);for(let m=0;m<p.length;m++){f[s]=m;const g=Kg({inputs:{x:i},backend:n,attrs:{begin:f,size:h}}),v=je({inputs:{x:g},backend:n,attrs:{shape:l}});p[m]=v,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const m7e={kernelName:e_,backendName:"webgl",kernelFunc:p7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g7e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,o=e.batchSize,s=e.inSize,i=e.numSegments,a=i*Math.ceil(s/r);this.outputShape=[o,a];const u="0.0",l="sumValue",c=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:s}=e,{numSegments:i}=r,a=o.shape.length,u=[];let l=0;const c=br([l],a);let d=o;c!=null&&(d=xs({inputs:{x:o},backend:n,attrs:{perm:c}}),u.push(d),l=Br(1,a)[0]);const f=DQ(d.shape,l,i),h=xe([d.shape[l]]),p=je({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});u.push(p);const m=MP(o.dtype),g=(b,C,S,E,I)=>{const T=b.shape[0],N=b.shape[1],O=NQ(N,I),$={windowSize:O,inSize:N,batchSize:T,numSegments:I},A=new g7e($,C),P=n.compileAndRun(A,[b,S],E);if(u.push(P),P.shape[1]===I)return P;const L=Gte({backend:n,attrs:{start:0,stop:I,step:1,dtype:"float32"}}),W=Yte({inputs:{x:L},backend:n,attrs:{reps:[N/O]}});return u.push(L),u.push(W),g(P,C,W,E,I)},v=g(p,"unsortedSegmentSum",s,m,i),y=je({inputs:{x:v},backend:n,attrs:{shape:f}});let x=y;if(c!=null){u.push(y);const b=af(c);x=xs({inputs:{x},backend:n,attrs:{perm:b}})}return u.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const y7e={kernelName:t_,backendName:"webgl",kernelFunc:v7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x7e=[nUe,oUe,aUe,cUe,fUe,mUe,vUe,xUe,CUe,EUe,TUe,RUe,$Ue,LUe,WUe,UUe,HUe,KUe,QUe,ZUe,rVe,cVe,fVe,gVe,yVe,SVe,_Ve,DVe,Bze,AVe,LVe,zVe,qVe,QVe,ZVe,t6e,r6e,a6e,c6e,h6e,m6e,v6e,x6e,k6e,S6e,T6e,D6e,A6e,P6e,L6e,z6e,G6e,X6e,Z6e,n5e,r5e,s5e,a5e,l5e,d5e,h5e,v5e,b5e,C5e,E5e,T5e,R5e,M5e,B5e,Lze,W5e,PVe,V5e,Y5e,X5e,Wze,eHe,oHe,iHe,cHe,hHe,vHe,bHe,SHe,THe,RHe,AHe,FHe,BHe,WHe,HHe,YHe,KHe,QHe,ZHe,rGe,aGe,dGe,xGe,Vze,CGe,_Ge,NGe,OGe,bVe,MGe,FGe,BGe,zGe,GGe,Uze,qGe,XGe,JGe,e8e,t8e,wVe,mGe,o8e,u8e,f8e,Gze,g8e,x8e,C8e,_8e,D8e,O8e,M8e,L8e,W8e,V8e,Y8e,X8e,eYe,rYe,aYe,cYe,uVe,vGe,hYe,mYe,vYe,xYe,wYe,CYe,EYe,IYe,NYe,OYe,$Ye,PYe,LYe,WYe,UYe,HYe,YYe,gGe,Zze,XYe,ZYe,t7e,o7e,u7e,d7e,eUe,h7e,m7e,y7e,PGe];for(const t of x7e)BK(t);const qte="ALL_AUCTION",Kte="NOT_YET_AUCTION",Xte="ABOUT_TO_AUCTION",Qte="AUCTIONING",Jte="AUCTIONED",Zte="AUCTIONING_CUSTOMER",ene="NOT_YET_AUCTION_CUSTOMER",tne="ABOUT_TO_AUCTION_CUSTOMER",b7e="AUCTIONED_CUSTOMER",nne="GET_MOST_PRICE_AUCTIONID",w7e="GET_MEMBER_PRICE_AUCTIONID",rne="GET_AUCTION_MEMBER_JOIN_AUCTION_ROOM",k7e=t=>({type:qte,payload:t}),C7e=t=>({type:Kte,payload:t}),S7e=t=>({type:ene,payload:t}),E7e=t=>({type:Xte,payload:t}),_7e=t=>({type:tne,payload:t}),I7e=t=>({type:Qte,payload:t}),T7e=t=>({type:Zte,payload:t}),N7e=t=>({type:Jte,payload:t});function pf(t){return e=>{Xo.getAllAuction(t).then(n=>{console.log("dataAuction",n),n.status===200||n.status===201?e(k7e(n.data)):console.log("fail")}).catch(n=>{console.error("Error while fetching all auctions:",n)})}}function TV(t,e){return n=>{Xo.getAuctionNotYetAuctionedByUser(t,e).then(r=>{console.log("dataAuction",r),r.status===200||r.status===201?n(C7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}function NV(t){return e=>{Xo.getAuctionNotYetAuctionedByCustomer(t).then(n=>{console.log("dataAuction",n),n.status===200||n.status===201?e(S7e(n.data)):console.log("fail")}).catch(n=>{console.error("Error while fetching all not yet auctions:",n)})}}function DV(t,e){return n=>{Xo.getAuctionAboutToAuctionByUser(t,e).then(r=>{console.log("dataAuction",r),r.status===200||r.status===201?n(E7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}function RV(t){return e=>{Xo.getAuctionAboutToAuctionByCustomer(t).then(n=>{console.log("dataAuction",n),n.status===200||n.status===201?e(_7e(n.data)):console.log("fail")}).catch(n=>{console.error("Error while fetching all about to auctions:",n)})}}function OV(t,e){return n=>{Xo.getAuctioningByUser(t,e).then(r=>{console.log("dataAuction",r),r.status===200||r.status===201?n(I7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}function one(t){return e=>{Xo.getAuctioningByCustomer(t).then(n=>{console.log("dataAuction",n),n.status===200||n.status===201?e(T7e(n.data)):console.log("fail")}).catch(n=>{console.error("Error while fetching all auctioning:",n)})}}function AV(t,e){return n=>{Xo.getAuctionedByUser(t,e).then(r=>{console.log("dataAuction",r),r.status===200||r.status===201?n(N7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}function D7e(t,e){return async n=>{try{const r=await Xo.addAuction(t,e);r.status===200||r.status===201?Rt.success("New Auction has been added successfully ~"):console.log("fail")}catch(r){r.response&&r.response.status===400?(console.error("Failed to load resource: the server responded with a status of 400 (Bad Request)",r),Rt.error(r.response.data.error)):(console.error("An error occurred while making the request:",r),Rt.error("Lỗi: "+r.message))}}}const sne="GET_AUCTION_MEMBER_AUCTION_NOT_YET",ine="GET_AUCTION_MEMBER_AUCTION_ABOUT_TO",ane="GET_AUCTION_MEMBER_AUCTIONING",une="GET_AUCTION_MEMBER_AUCTIONED",R7e=t=>({type:sne,payload:t}),O7e=t=>({type:ine,payload:t}),A7e=t=>({type:ane,payload:t}),$7e=t=>({type:une,payload:t});function IO(t,e){return n=>{Xo.getAuctionNotYetByMember(t,e).then(r=>{console.log("dataAuction",r),r.status===200||r.status===201?n(R7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}function TO(t,e){return n=>{Xo.getAuctionAboutToByMember(t,e).then(r=>{console.log("dataAuction",r),r.status===200||r.status===201?n(O7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}function NO(t,e){return n=>{Xo.getAuctioningByMember(t,e).then(r=>{console.log("dataAuction",r),r.status===200||r.status===201?n(A7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}function DO(t,e){return n=>{Xo.getAuctionedByMember(t,e).then(r=>{console.log("dataAuction",r),r.status===200||r.status===201?n($7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}const M7e=t=>({type:nne,payload:t});function c2(t,e){return n=>{Xo.getMostAuctionBid(t,e).then(r=>{console.log("mostPrice",r),r.status===200||r.status===201?n(M7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}const P7e=t=>({type:w7e,payload:t});function RO(t,e){return n=>{Xo.getMemberJoinAuctionBid(t,e).then(r=>{console.log("mostPrice",r),r.status===200||r.status===201?n(P7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}function F7e(t,e){return n=>{Xo.postAuctionBid(t,e).then(r=>{if(r.status===200||r.status===201){console.log("successAuction",r);let o={auctionId:t==null?void 0:t.auctionId};n(c2(o,e)),n(RO(o,e)),Rt.success(`Bạn đã đấu giá thành công với số tiền ${t==null?void 0:t.price}`)}else console.log("fail")}).catch(r=>{r.response&&r.response.status===400?(console.error("Failed to load resource: the server responded with a status of 400 (Bad Request)",r),Rt.error(r.response.data.error||r.response.data.message)):(console.error("An error occurred while making the request:",r.response.data.message),Rt.error("Lỗi: "+r.message))})}}const L7e=t=>({type:rne,payload:t});function lne(t,e){return n=>{Xo.getAllMemberInJoinAuctionBid(t,e).then(r=>{console.log("mostPrice",r),r.status===200||r.status===201?n(L7e(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all auctions:",r)})}}const B7e={getConfigMoney(t){return Nn.get("/configs/",{headers:{Authorization:`Bearer ${t}`}})}},cne="CONFIG_MONEY",j7e=t=>({type:cne,payload:t});function R3(t){return e=>{B7e.getConfigMoney(t).then(n=>{console.log("moneyConFig",n),n.status===200||n.status===201?e(j7e(n.data)):console.log("fail")}).catch(n=>{console.error("Error while fetching all config money:",n)})}}function W7e(t){const e=localStorage.getItem("ACCESS_TOKEN");xr();const n=Ao();return D.useEffect(()=>{n(pf(e)),n(R3(e)),n(one(e))},[]),w.jsxs("div",{className:"app-container",style:{backgroundImage:"url(../../../public/assets/images/background/background5.jpg)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsx("div",{className:"body-container",children:w.jsx(n2e,{})}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}const N0={loginUser(t){return Nn.post("/users/login",t)},register(t){return Nn.post("/users/register",t)},getRole(){return Nn.get("/roles")},fetchMe:t=>Nn.get("/users/fetchMe",{headers:{Authorization:`Bearer ${t}`}})},dne="ACT_USER_LOGIN",z7e="ACT_USER_NOT_FETCH_ME",fne="ALL_ROLE";function hne(t,e,n){return{type:dne,payload:{currentUser:t,token:e,role:n}}}const U7e=t=>({type:fne,payload:t});function V7e(){return t=>{N0.getRole().then(e=>{console.log("roles",e),e.status===200||e.status===201?t(U7e(e.data)):console.log("fail")}).catch(e=>{console.error("Error while fetching all products:",e)})}}function H7e(t){return async e=>{try{const n=await N0.register(t);(n.status===200||n.status===201)&&Rt.success("New User has been added successfully ~")}catch(n){console.error("An error occurred whiles making the request:",n),Rt.error("An error occurred while making the request")}}}const G7e=()=>{const[t,e]=D.useState({username:"",password:""}),n=xr(),r=Tt(a=>a.USER.currentUser);console.log("user",r);const o=a=>{const{name:u,value:l,type:c,checked:d}=a.target,f=c==="checkbox"?d:l;e({...t,[u]:f})},s=Ao(),i=async a=>{a.preventDefault(),N0.loginUser(t).then(u=>{console.log("resFetchMe",u);const l=u.data.token,c=u.data.user,d=u.data.user.title;N0.fetchMe(l).then(f=>{s(hne(c,l,d)),Rt.success("Chào mừng đã vào cổng"),n("/")}).catch(f=>alert("Login or password failed"))}).catch(u=>{var l,c;console.log("aaaaa"),console.log("error",u),u&&alert((c=(l=u==null?void 0:u.response)==null?void 0:l.data)==null?void 0:c.message)})};return w.jsx(Fs,{fluid:!0,children:w.jsxs(Vt,{className:"justify-content-center align-items-center",style:{height:"100vh"},children:[w.jsx(rt,{md:6,children:w.jsx("img",{src:"../../../public/assets/images/login/login1.jpg",alt:"Login",style:{width:"100%",height:"100%",objectFit:"cover"}})}),w.jsx(rt,{md:6,children:w.jsxs("div",{className:"p-4",children:[w.jsx("h2",{className:"mb-4",children:"Login to orchid auction "}),w.jsxs("p",{children:["Do not have an account?"," ",w.jsx(Oa,{to:"/signup",style:{textDecoration:"none",border:"1px solid #007BFF",borderRadius:"10px"},children:"Create an account here"})]}),w.jsx("p",{style:{marginTop:"20px",marginBottom:"20px",textCombineUpright:"all",fontWeight:"900"},children:"Or"}),w.jsxs(ve,{onSubmit:i,children:[w.jsx(rt,{children:w.jsxs(ve.Group,{controlId:"formBasicEmail",children:[w.jsx(ve.Label,{children:"Username"}),w.jsx(ve.Control,{type:"text",name:"username",placeholder:"Enter username",style:{width:"500px"},value:t.userName,onChange:o})]})}),w.jsx(rt,{children:w.jsxs(ve.Group,{controlId:"formBasicPassword",children:[w.jsx(ve.Label,{children:"Password"}),w.jsx(ve.Control,{type:"password",name:"password",placeholder:"Password",style:{width:"500px"},value:t.password,onChange:o})]})}),w.jsx(vt,{variant:"primary",type:"submit",style:{width:"500px",marginTop:"20px"},children:"Login"})]})]})})]})})};var Y7e={prefix:"fas",iconName:"user-plus",icon:[640,512,[],"f234","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM504 312V248H440c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V136c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H552v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]};function $V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$V(Object(n),!0).forEach(function(r){bo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d2(t){"@babel/helpers - typeof";return d2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d2(t)}function q7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K7e(t,e,n){return e&&MV(t.prototype,e),n&&MV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O3(t,e){return Q7e(t)||Z7e(t,e)||pne(t,e)||tqe()}function K1(t){return X7e(t)||J7e(t)||pne(t)||eqe()}function X7e(t){if(Array.isArray(t))return OO(t)}function Q7e(t){if(Array.isArray(t))return t}function J7e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Z7e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],o=!0,s=!1,i,a;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(r.push(i.value),!(e&&r.length===e));o=!0);}catch(u){s=!0,a=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function pne(t,e){if(t){if(typeof t=="string")return OO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OO(t,e)}}function OO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var PV=function(){},A3={},mne={},gne=null,vne={mark:PV,measure:PV};try{typeof window<"u"&&(A3=window),typeof document<"u"&&(mne=document),typeof MutationObserver<"u"&&(gne=MutationObserver),typeof performance<"u"&&(vne=performance)}catch{}var nqe=A3.navigator||{},FV=nqe.userAgent,LV=FV===void 0?"":FV,Hd=A3,ir=mne,BV=gne,mw=vne;Hd.document;var wc=!!ir.documentElement&&!!ir.head&&typeof ir.addEventListener=="function"&&typeof ir.createElement=="function",yne=~LV.indexOf("MSIE")||~LV.indexOf("Trident/"),gw,vw,yw,xw,bw,lc="___FONT_AWESOME___",AO=16,xne="fa",bne="svg-inline--fa",Ah="data-fa-i2svg",$O="data-fa-pseudo-element",rqe="data-fa-pseudo-element-pending",$3="data-prefix",M3="data-icon",jV="fontawesome-i2svg",oqe="async",sqe=["HTML","HEAD","STYLE","SCRIPT"],wne=function(){try{return!0}catch{return!1}}(),rr="classic",Ar="sharp",P3=[rr,Ar];function X1(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[rr]}})}var D0=X1((gw={},bo(gw,rr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),bo(gw,Ar,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),gw)),R0=X1((vw={},bo(vw,rr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),bo(vw,Ar,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),vw)),O0=X1((yw={},bo(yw,rr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),bo(yw,Ar,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),yw)),iqe=X1((xw={},bo(xw,rr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),bo(xw,Ar,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),xw)),aqe=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,kne="fa-layers-text",uqe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,lqe=X1((bw={},bo(bw,rr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),bo(bw,Ar,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),bw)),Cne=[1,2,3,4,5,6,7,8,9,10],cqe=Cne.concat([11,12,13,14,15,16,17,18,19,20]),dqe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Hf={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},A0=new Set;Object.keys(R0[rr]).map(A0.add.bind(A0));Object.keys(R0[Ar]).map(A0.add.bind(A0));var fqe=[].concat(P3,K1(A0),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Hf.GROUP,Hf.SWAP_OPACITY,Hf.PRIMARY,Hf.SECONDARY]).concat(Cne.map(function(t){return"".concat(t,"x")})).concat(cqe.map(function(t){return"w-".concat(t)})),_y=Hd.FontAwesomeConfig||{};function hqe(t){var e=ir.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function pqe(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(ir&&typeof ir.querySelector=="function"){var mqe=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];mqe.forEach(function(t){var e=O3(t,2),n=e[0],r=e[1],o=pqe(hqe(n));o!=null&&(_y[r]=o)})}var Sne={styleDefault:"solid",familyDefault:"classic",cssPrefix:xne,replacementClass:bne,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};_y.familyPrefix&&(_y.cssPrefix=_y.familyPrefix);var vg=et(et({},Sne),_y);vg.autoReplaceSvg||(vg.observeMutations=!1);var ht={};Object.keys(Sne).forEach(function(t){Object.defineProperty(ht,t,{enumerable:!0,set:function(n){vg[t]=n,Iy.forEach(function(r){return r(ht)})},get:function(){return vg[t]}})});Object.defineProperty(ht,"familyPrefix",{enumerable:!0,set:function(e){vg.cssPrefix=e,Iy.forEach(function(n){return n(ht)})},get:function(){return vg.cssPrefix}});Hd.FontAwesomeConfig=ht;var Iy=[];function gqe(t){return Iy.push(t),function(){Iy.splice(Iy.indexOf(t),1)}}var Fc=AO,$u={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function vqe(t){if(!(!t||!wc)){var e=ir.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=ir.head.childNodes,r=null,o=n.length-1;o>-1;o--){var s=n[o],i=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(i)>-1&&(r=s)}return ir.head.insertBefore(e,r),t}}var yqe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function $0(){for(var t=12,e="";t-- >0;)e+=yqe[Math.random()*62|0];return e}function Xg(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function F3(t){return t.classList?Xg(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function Ene(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xqe(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(Ene(t[n]),'" ')},"").trim()}function O_(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function L3(t){return t.size!==$u.size||t.x!==$u.x||t.y!==$u.y||t.rotate!==$u.rotate||t.flipX||t.flipY}function bqe(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,o={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),i="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),u={transform:"".concat(s," ").concat(i," ").concat(a)},l={transform:"translate(".concat(r/2*-1," -256)")};return{outer:o,inner:u,path:l}}function wqe(t){var e=t.transform,n=t.width,r=n===void 0?AO:n,o=t.height,s=o===void 0?AO:o,i=t.startCentered,a=i===void 0?!1:i,u="";return a&&yne?u+="translate(".concat(e.x/Fc-r/2,"em, ").concat(e.y/Fc-s/2,"em) "):a?u+="translate(calc(-50% + ".concat(e.x/Fc,"em), calc(-50% + ").concat(e.y/Fc,"em)) "):u+="translate(".concat(e.x/Fc,"em, ").concat(e.y/Fc,"em) "),u+="scale(".concat(e.size/Fc*(e.flipX?-1:1),", ").concat(e.size/Fc*(e.flipY?-1:1),") "),u+="rotate(".concat(e.rotate,"deg) "),u}var kqe=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function _ne(){var t=xne,e=bne,n=ht.cssPrefix,r=ht.replacementClass,o=kqe;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),i=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");o=o.replace(s,".".concat(n,"-")).replace(i,"--".concat(n,"-")).replace(a,".".concat(r))}return o}var WV=!1;function fN(){ht.autoAddCss&&!WV&&(vqe(_ne()),WV=!0)}var Cqe={mixout:function(){return{dom:{css:_ne,insertCss:fN}}},hooks:function(){return{beforeDOMElementCreation:function(){fN()},beforeI2svg:function(){fN()}}}},cc=Hd||{};cc[lc]||(cc[lc]={});cc[lc].styles||(cc[lc].styles={});cc[lc].hooks||(cc[lc].hooks={});cc[lc].shims||(cc[lc].shims=[]);var za=cc[lc],Ine=[],Sqe=function t(){ir.removeEventListener("DOMContentLoaded",t),f2=1,Ine.map(function(e){return e()})},f2=!1;wc&&(f2=(ir.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ir.readyState),f2||ir.addEventListener("DOMContentLoaded",Sqe));function Eqe(t){wc&&(f2?setTimeout(t,0):Ine.push(t))}function Q1(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,o=t.children,s=o===void 0?[]:o;return typeof t=="string"?Ene(t):"<".concat(e," ").concat(xqe(r),">").concat(s.map(Q1).join(""),"</").concat(e,">")}function zV(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var _qe=function(e,n){return function(r,o,s,i){return e.call(n,r,o,s,i)}},hN=function(e,n,r,o){var s=Object.keys(e),i=s.length,a=o!==void 0?_qe(n,o):n,u,l,c;for(r===void 0?(u=1,c=e[s[0]]):(u=0,c=r);u<i;u++)l=s[u],c=a(c,e[l],l,e);return c};function Iqe(t){for(var e=[],n=0,r=t.length;n<r;){var o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((o&1023)<<10)+(s&1023)+65536):(e.push(o),n--)}else e.push(o)}return e}function MO(t){var e=Iqe(t);return e.length===1?e[0].toString(16):null}function Tqe(t,e){var n=t.length,r=t.charCodeAt(e),o;return r>=55296&&r<=56319&&n>e+1&&(o=t.charCodeAt(e+1),o>=56320&&o<=57343)?(r-55296)*1024+o-56320+65536:r}function UV(t){return Object.keys(t).reduce(function(e,n){var r=t[n],o=!!r.icon;return o?e[r.iconName]=r.icon:e[n]=r,e},{})}function PO(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,o=r===void 0?!1:r,s=UV(e);typeof za.hooks.addPack=="function"&&!o?za.hooks.addPack(t,UV(e)):za.styles[t]=et(et({},za.styles[t]||{}),s),t==="fas"&&PO("fa",e)}var ww,kw,Cw,nm=za.styles,Nqe=za.shims,Dqe=(ww={},bo(ww,rr,Object.values(O0[rr])),bo(ww,Ar,Object.values(O0[Ar])),ww),B3=null,Tne={},Nne={},Dne={},Rne={},One={},Rqe=(kw={},bo(kw,rr,Object.keys(D0[rr])),bo(kw,Ar,Object.keys(D0[Ar])),kw);function Oqe(t){return~fqe.indexOf(t)}function Aqe(t,e){var n=e.split("-"),r=n[0],o=n.slice(1).join("-");return r===t&&o!==""&&!Oqe(o)?o:null}var Ane=function(){var e=function(s){return hN(nm,function(i,a,u){return i[u]=hN(a,s,{}),i},{})};Tne=e(function(o,s,i){if(s[3]&&(o[s[3]]=i),s[2]){var a=s[2].filter(function(u){return typeof u=="number"});a.forEach(function(u){o[u.toString(16)]=i})}return o}),Nne=e(function(o,s,i){if(o[i]=i,s[2]){var a=s[2].filter(function(u){return typeof u=="string"});a.forEach(function(u){o[u]=i})}return o}),One=e(function(o,s,i){var a=s[2];return o[i]=i,a.forEach(function(u){o[u]=i}),o});var n="far"in nm||ht.autoFetchSvg,r=hN(Nqe,function(o,s){var i=s[0],a=s[1],u=s[2];return a==="far"&&!n&&(a="fas"),typeof i=="string"&&(o.names[i]={prefix:a,iconName:u}),typeof i=="number"&&(o.unicodes[i.toString(16)]={prefix:a,iconName:u}),o},{names:{},unicodes:{}});Dne=r.names,Rne=r.unicodes,B3=A_(ht.styleDefault,{family:ht.familyDefault})};gqe(function(t){B3=A_(t.styleDefault,{family:ht.familyDefault})});Ane();function j3(t,e){return(Tne[t]||{})[e]}function $qe(t,e){return(Nne[t]||{})[e]}function Gf(t,e){return(One[t]||{})[e]}function $ne(t){return Dne[t]||{prefix:null,iconName:null}}function Mqe(t){var e=Rne[t],n=j3("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Gd(){return B3}var W3=function(){return{prefix:null,iconName:null,rest:[]}};function A_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?rr:n,o=D0[r][t],s=R0[r][t]||R0[r][o],i=t in za.styles?t:null;return s||i||null}var VV=(Cw={},bo(Cw,rr,Object.keys(O0[rr])),bo(Cw,Ar,Object.keys(O0[Ar])),Cw);function $_(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,o=r===void 0?!1:r,s=(e={},bo(e,rr,"".concat(ht.cssPrefix,"-").concat(rr)),bo(e,Ar,"".concat(ht.cssPrefix,"-").concat(Ar)),e),i=null,a=rr;(t.includes(s[rr])||t.some(function(l){return VV[rr].includes(l)}))&&(a=rr),(t.includes(s[Ar])||t.some(function(l){return VV[Ar].includes(l)}))&&(a=Ar);var u=t.reduce(function(l,c){var d=Aqe(ht.cssPrefix,c);if(nm[c]?(c=Dqe[a].includes(c)?iqe[a][c]:c,i=c,l.prefix=c):Rqe[a].indexOf(c)>-1?(i=c,l.prefix=A_(c,{family:a})):d?l.iconName=d:c!==ht.replacementClass&&c!==s[rr]&&c!==s[Ar]&&l.rest.push(c),!o&&l.prefix&&l.iconName){var f=i==="fa"?$ne(l.iconName):{},h=Gf(l.prefix,l.iconName);f.prefix&&(i=null),l.iconName=f.iconName||h||l.iconName,l.prefix=f.prefix||l.prefix,l.prefix==="far"&&!nm.far&&nm.fas&&!ht.autoFetchSvg&&(l.prefix="fas")}return l},W3());return(t.includes("fa-brands")||t.includes("fab"))&&(u.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(u.prefix="fad"),!u.prefix&&a===Ar&&(nm.fass||ht.autoFetchSvg)&&(u.prefix="fass",u.iconName=Gf(u.prefix,u.iconName)||u.iconName),(u.prefix==="fa"||i==="fa")&&(u.prefix=Gd()||"fas"),u}var Pqe=function(){function t(){q7e(this,t),this.definitions={}}return K7e(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var i=o.reduce(this._pullDefinitions,{});Object.keys(i).forEach(function(a){n.definitions[a]=et(et({},n.definitions[a]||{}),i[a]),PO(a,i[a]);var u=O0[rr][a];u&&PO(u,i[a]),Ane()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var o=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(o).map(function(s){var i=o[s],a=i.prefix,u=i.iconName,l=i.icon,c=l[2];n[a]||(n[a]={}),c.length>0&&c.forEach(function(d){typeof d=="string"&&(n[a][d]=l)}),n[a][u]=l}),n}}]),t}(),HV=[],rm={},bm={},Fqe=Object.keys(bm);function Lqe(t,e){var n=e.mixoutsTo;return HV=t,rm={},Object.keys(bm).forEach(function(r){Fqe.indexOf(r)===-1&&delete bm[r]}),HV.forEach(function(r){var o=r.mixout?r.mixout():{};if(Object.keys(o).forEach(function(i){typeof o[i]=="function"&&(n[i]=o[i]),d2(o[i])==="object"&&Object.keys(o[i]).forEach(function(a){n[i]||(n[i]={}),n[i][a]=o[i][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(i){rm[i]||(rm[i]=[]),rm[i].push(s[i])})}r.provides&&r.provides(bm)}),n}function FO(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var s=rm[t]||[];return s.forEach(function(i){e=i.apply(null,[e].concat(r))}),e}function $h(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=rm[t]||[];o.forEach(function(s){s.apply(null,n)})}function dc(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return bm[t]?bm[t].apply(null,e):void 0}function LO(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Gd();if(e)return e=Gf(n,e)||e,zV(Mne.definitions,n,e)||zV(za.styles,n,e)}var Mne=new Pqe,Bqe=function(){ht.autoReplaceSvg=!1,ht.observeMutations=!1,$h("noAuto")},jqe={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return wc?($h("beforeI2svg",e),dc("pseudoElements2svg",e),dc("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;ht.autoReplaceSvg===!1&&(ht.autoReplaceSvg=!0),ht.observeMutations=!0,Eqe(function(){zqe({autoReplaceSvgRoot:n}),$h("watch",e)})}},Wqe={icon:function(e){if(e===null)return null;if(d2(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Gf(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=A_(e[0]);return{prefix:r,iconName:Gf(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(ht.cssPrefix,"-"))>-1||e.match(aqe))){var o=$_(e.split(" "),{skipLookups:!0});return{prefix:o.prefix||Gd(),iconName:Gf(o.prefix,o.iconName)||o.iconName}}if(typeof e=="string"){var s=Gd();return{prefix:s,iconName:Gf(s,e)||e}}}},Pi={noAuto:Bqe,config:ht,dom:jqe,parse:Wqe,library:Mne,findIconDefinition:LO,toHtml:Q1},zqe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?ir:n;(Object.keys(za.styles).length>0||ht.autoFetchSvg)&&wc&&ht.autoReplaceSvg&&Pi.dom.i2svg({node:r})};function M_(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return Q1(r)})}}),Object.defineProperty(t,"node",{get:function(){if(wc){var r=ir.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function Uqe(t){var e=t.children,n=t.main,r=t.mask,o=t.attributes,s=t.styles,i=t.transform;if(L3(i)&&n.found&&!r.found){var a=n.width,u=n.height,l={x:a/u/2,y:.5};o.style=O_(et(et({},s),{},{"transform-origin":"".concat(l.x+i.x/16,"em ").concat(l.y+i.y/16,"em")}))}return[{tag:"svg",attributes:o,children:e}]}function Vqe(t){var e=t.prefix,n=t.iconName,r=t.children,o=t.attributes,s=t.symbol,i=s===!0?"".concat(e,"-").concat(ht.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:et(et({},o),{},{id:i}),children:r}]}]}function z3(t){var e=t.icons,n=e.main,r=e.mask,o=t.prefix,s=t.iconName,i=t.transform,a=t.symbol,u=t.title,l=t.maskId,c=t.titleId,d=t.extra,f=t.watchable,h=f===void 0?!1:f,p=r.found?r:n,m=p.width,g=p.height,v=o==="fak",y=[ht.replacementClass,s?"".concat(ht.cssPrefix,"-").concat(s):""].filter(function(T){return d.classes.indexOf(T)===-1}).filter(function(T){return T!==""||!!T}).concat(d.classes).join(" "),x={children:[],attributes:et(et({},d.attributes),{},{"data-prefix":o,"data-icon":s,class:y,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};h&&(x.attributes[Ah]=""),u&&(x.children.push({tag:"title",attributes:{id:x.attributes["aria-labelledby"]||"title-".concat(c||$0())},children:[u]}),delete x.attributes.title);var C=et(et({},x),{},{prefix:o,iconName:s,main:n,mask:r,maskId:l,transform:i,symbol:a,styles:et(et({},b),d.styles)}),S=r.found&&n.found?dc("generateAbstractMask",C)||{children:[],attributes:{}}:dc("generateAbstractIcon",C)||{children:[],attributes:{}},E=S.children,I=S.attributes;return C.children=E,C.attributes=I,a?Vqe(C):Uqe(C)}function GV(t){var e=t.content,n=t.width,r=t.height,o=t.transform,s=t.title,i=t.extra,a=t.watchable,u=a===void 0?!1:a,l=et(et(et({},i.attributes),s?{title:s}:{}),{},{class:i.classes.join(" ")});u&&(l[Ah]="");var c=et({},i.styles);L3(o)&&(c.transform=wqe({transform:o,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);var d=O_(c);d.length>0&&(l.style=d);var f=[];return f.push({tag:"span",attributes:l,children:[e]}),s&&f.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),f}function Hqe(t){var e=t.content,n=t.title,r=t.extra,o=et(et(et({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=O_(r.styles);s.length>0&&(o.style=s);var i=[];return i.push({tag:"span",attributes:o,children:[e]}),n&&i.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),i}var pN=za.styles;function BO(t){var e=t[0],n=t[1],r=t.slice(4),o=O3(r,1),s=o[0],i=null;return Array.isArray(s)?i={tag:"g",attributes:{class:"".concat(ht.cssPrefix,"-").concat(Hf.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ht.cssPrefix,"-").concat(Hf.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(ht.cssPrefix,"-").concat(Hf.PRIMARY),fill:"currentColor",d:s[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:i}}var Gqe={found:!1,width:512,height:512};function Yqe(t,e){!wne&&!ht.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function jO(t,e){var n=e;return e==="fa"&&ht.styleDefault!==null&&(e=Gd()),new Promise(function(r,o){if(dc("missingIconAbstract"),n==="fa"){var s=$ne(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&pN[e]&&pN[e][t]){var i=pN[e][t];return r(BO(i))}Yqe(t,e),r(et(et({},Gqe),{},{icon:ht.showMissingIcons&&t?dc("missingIconAbstract")||{}:{}}))})}var YV=function(){},WO=ht.measurePerformance&&mw&&mw.mark&&mw.measure?mw:{mark:YV,measure:YV},sy='FA "6.5.1"',qqe=function(e){return WO.mark("".concat(sy," ").concat(e," begins")),function(){return Pne(e)}},Pne=function(e){WO.mark("".concat(sy," ").concat(e," ends")),WO.measure("".concat(sy," ").concat(e),"".concat(sy," ").concat(e," begins"),"".concat(sy," ").concat(e," ends"))},U3={begin:qqe,end:Pne},bk=function(){};function qV(t){var e=t.getAttribute?t.getAttribute(Ah):null;return typeof e=="string"}function Kqe(t){var e=t.getAttribute?t.getAttribute($3):null,n=t.getAttribute?t.getAttribute(M3):null;return e&&n}function Xqe(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(ht.replacementClass)}function Qqe(){if(ht.autoReplaceSvg===!0)return wk.replace;var t=wk[ht.autoReplaceSvg];return t||wk.replace}function Jqe(t){return ir.createElementNS("http://www.w3.org/2000/svg",t)}function Zqe(t){return ir.createElement(t)}function Fne(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?Jqe:Zqe:n;if(typeof t=="string")return ir.createTextNode(t);var o=r(t.tag);Object.keys(t.attributes||[]).forEach(function(i){o.setAttribute(i,t.attributes[i])});var s=t.children||[];return s.forEach(function(i){o.appendChild(Fne(i,{ceFn:r}))}),o}function e9e(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var wk={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(o){n.parentNode.insertBefore(Fne(o),n)}),n.getAttribute(Ah)===null&&ht.keepOriginalSource){var r=ir.createComment(e9e(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~F3(n).indexOf(ht.replacementClass))return wk.replace(e);var o=new RegExp("".concat(ht.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,u){return u===ht.replacementClass||u.match(o)?a.toSvg.push(u):a.toNode.push(u),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var i=r.map(function(a){return Q1(a)}).join(`
`);n.setAttribute(Ah,""),n.innerHTML=i}};function KV(t){t()}function Lne(t,e){var n=typeof e=="function"?e:bk;if(t.length===0)n();else{var r=KV;ht.mutateApproach===oqe&&(r=Hd.requestAnimationFrame||KV),r(function(){var o=Qqe(),s=U3.begin("mutate");t.map(o),s(),n()})}}var V3=!1;function Bne(){V3=!0}function zO(){V3=!1}var h2=null;function XV(t){if(BV&&ht.observeMutations){var e=t.treeCallback,n=e===void 0?bk:e,r=t.nodeCallback,o=r===void 0?bk:r,s=t.pseudoElementsCallback,i=s===void 0?bk:s,a=t.observeMutationsRoot,u=a===void 0?ir:a;h2=new BV(function(l){if(!V3){var c=Gd();Xg(l).forEach(function(d){if(d.type==="childList"&&d.addedNodes.length>0&&!qV(d.addedNodes[0])&&(ht.searchPseudoElements&&i(d.target),n(d.target)),d.type==="attributes"&&d.target.parentNode&&ht.searchPseudoElements&&i(d.target.parentNode),d.type==="attributes"&&qV(d.target)&&~dqe.indexOf(d.attributeName))if(d.attributeName==="class"&&Kqe(d.target)){var f=$_(F3(d.target)),h=f.prefix,p=f.iconName;d.target.setAttribute($3,h||c),p&&d.target.setAttribute(M3,p)}else Xqe(d.target)&&o(d.target)})}}),wc&&h2.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function t9e(){h2&&h2.disconnect()}function n9e(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,o){var s=o.split(":"),i=s[0],a=s.slice(1);return i&&a.length>0&&(r[i]=a.join(":").trim()),r},{})),n}function r9e(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",o=$_(F3(t));return o.prefix||(o.prefix=Gd()),e&&n&&(o.prefix=e,o.iconName=n),o.iconName&&o.prefix||(o.prefix&&r.length>0&&(o.iconName=$qe(o.prefix,t.innerText)||j3(o.prefix,MO(t.innerText))),!o.iconName&&ht.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(o.iconName=t.firstChild.data)),o}function o9e(t){var e=Xg(t.attributes).reduce(function(o,s){return o.name!=="class"&&o.name!=="style"&&(o[s.name]=s.value),o},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return ht.autoA11y&&(n?e["aria-labelledby"]="".concat(ht.replacementClass,"-title-").concat(r||$0()):(e["aria-hidden"]="true",e.focusable="false")),e}function s9e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:$u,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function QV(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=r9e(t),r=n.iconName,o=n.prefix,s=n.rest,i=o9e(t),a=FO("parseNodeAttributes",{},t),u=e.styleParser?n9e(t):[];return et({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:o,transform:$u,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:u,attributes:i}},a)}var i9e=za.styles;function jne(t){var e=ht.autoReplaceSvg==="nest"?QV(t,{styleParser:!1}):QV(t);return~e.extra.classes.indexOf(kne)?dc("generateLayersText",t,e):dc("generateSvgReplacementMutation",t,e)}var Yd=new Set;P3.map(function(t){Yd.add("fa-".concat(t))});Object.keys(D0[rr]).map(Yd.add.bind(Yd));Object.keys(D0[Ar]).map(Yd.add.bind(Yd));Yd=K1(Yd);function JV(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!wc)return Promise.resolve();var n=ir.documentElement.classList,r=function(d){return n.add("".concat(jV,"-").concat(d))},o=function(d){return n.remove("".concat(jV,"-").concat(d))},s=ht.autoFetchSvg?Yd:P3.map(function(c){return"fa-".concat(c)}).concat(Object.keys(i9e));s.includes("fa")||s.push("fa");var i=[".".concat(kne,":not([").concat(Ah,"])")].concat(s.map(function(c){return".".concat(c,":not([").concat(Ah,"])")})).join(", ");if(i.length===0)return Promise.resolve();var a=[];try{a=Xg(t.querySelectorAll(i))}catch{}if(a.length>0)r("pending"),o("complete");else return Promise.resolve();var u=U3.begin("onTree"),l=a.reduce(function(c,d){try{var f=jne(d);f&&c.push(f)}catch(h){wne||h.name==="MissingIcon"&&console.error(h)}return c},[]);return new Promise(function(c,d){Promise.all(l).then(function(f){Lne(f,function(){r("active"),r("complete"),o("pending"),typeof e=="function"&&e(),u(),c()})}).catch(function(f){u(),d(f)})})}function a9e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;jne(t).then(function(n){n&&Lne([n],e)})}function u9e(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:LO(e||{}),o=n.mask;return o&&(o=(o||{}).icon?o:LO(o||{})),t(r,et(et({},n),{},{mask:o}))}}var l9e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,o=r===void 0?$u:r,s=n.symbol,i=s===void 0?!1:s,a=n.mask,u=a===void 0?null:a,l=n.maskId,c=l===void 0?null:l,d=n.title,f=d===void 0?null:d,h=n.titleId,p=h===void 0?null:h,m=n.classes,g=m===void 0?[]:m,v=n.attributes,y=v===void 0?{}:v,x=n.styles,b=x===void 0?{}:x;if(e){var C=e.prefix,S=e.iconName,E=e.icon;return M_(et({type:"icon"},e),function(){return $h("beforeDOMElementCreation",{iconDefinition:e,params:n}),ht.autoA11y&&(f?y["aria-labelledby"]="".concat(ht.replacementClass,"-title-").concat(p||$0()):(y["aria-hidden"]="true",y.focusable="false")),z3({icons:{main:BO(E),mask:u?BO(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:C,iconName:S,transform:et(et({},$u),o),symbol:i,title:f,maskId:c,titleId:p,extra:{attributes:y,styles:b,classes:g}})})}},c9e={mixout:function(){return{icon:u9e(l9e)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=JV,n.nodeCallback=a9e,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,o=r===void 0?ir:r,s=n.callback,i=s===void 0?function(){}:s;return JV(o,i)},e.generateSvgReplacementMutation=function(n,r){var o=r.iconName,s=r.title,i=r.titleId,a=r.prefix,u=r.transform,l=r.symbol,c=r.mask,d=r.maskId,f=r.extra;return new Promise(function(h,p){Promise.all([jO(o,a),c.iconName?jO(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=O3(m,2),v=g[0],y=g[1];h([n,z3({icons:{main:v,mask:y},prefix:a,iconName:o,transform:u,symbol:l,maskId:d,title:s,titleId:i,extra:f,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(n){var r=n.children,o=n.attributes,s=n.main,i=n.transform,a=n.styles,u=O_(a);u.length>0&&(o.style=u);var l;return L3(i)&&(l=dc("generateAbstractTransformGrouping",{main:s,transform:i,containerWidth:s.width,iconWidth:s.width})),r.push(l||s.icon),{children:r,attributes:o}}}},d9e={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.classes,s=o===void 0?[]:o;return M_({type:"layer"},function(){$h("beforeDOMElementCreation",{assembler:n,params:r});var i=[];return n(function(a){Array.isArray(a)?a.map(function(u){i=i.concat(u.abstract)}):i=i.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(ht.cssPrefix,"-layers")].concat(K1(s)).join(" ")},children:i}]})}}}},f9e={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.title,s=o===void 0?null:o,i=r.classes,a=i===void 0?[]:i,u=r.attributes,l=u===void 0?{}:u,c=r.styles,d=c===void 0?{}:c;return M_({type:"counter",content:n},function(){return $h("beforeDOMElementCreation",{content:n,params:r}),Hqe({content:n.toString(),title:s,extra:{attributes:l,styles:d,classes:["".concat(ht.cssPrefix,"-layers-counter")].concat(K1(a))}})})}}}},h9e={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.transform,s=o===void 0?$u:o,i=r.title,a=i===void 0?null:i,u=r.classes,l=u===void 0?[]:u,c=r.attributes,d=c===void 0?{}:c,f=r.styles,h=f===void 0?{}:f;return M_({type:"text",content:n},function(){return $h("beforeDOMElementCreation",{content:n,params:r}),GV({content:n,transform:et(et({},$u),s),title:a,extra:{attributes:d,styles:h,classes:["".concat(ht.cssPrefix,"-layers-text")].concat(K1(l))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var o=r.title,s=r.transform,i=r.extra,a=null,u=null;if(yne){var l=parseInt(getComputedStyle(n).fontSize,10),c=n.getBoundingClientRect();a=c.width/l,u=c.height/l}return ht.autoA11y&&!o&&(i.attributes["aria-hidden"]="true"),Promise.resolve([n,GV({content:n.innerHTML,width:a,height:u,transform:s,title:o,extra:i,watchable:!0})])}}},p9e=new RegExp('"',"ug"),ZV=[1105920,1112319];function m9e(t){var e=t.replace(p9e,""),n=Tqe(e,0),r=n>=ZV[0]&&n<=ZV[1],o=e.length===2?e[0]===e[1]:!1;return{value:MO(o?e[0]:e),isSecondary:r||o}}function e6(t,e){var n="".concat(rqe).concat(e.replace(":","-"));return new Promise(function(r,o){if(t.getAttribute(n)!==null)return r();var s=Xg(t.children),i=s.filter(function(E){return E.getAttribute($O)===e})[0],a=Hd.getComputedStyle(t,e),u=a.getPropertyValue("font-family").match(uqe),l=a.getPropertyValue("font-weight"),c=a.getPropertyValue("content");if(i&&!u)return t.removeChild(i),r();if(u&&c!=="none"&&c!==""){var d=a.getPropertyValue("content"),f=~["Sharp"].indexOf(u[2])?Ar:rr,h=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(u[2])?R0[f][u[2].toLowerCase()]:lqe[f][l],p=m9e(d),m=p.value,g=p.isSecondary,v=u[0].startsWith("FontAwesome"),y=j3(h,m),x=y;if(v){var b=Mqe(m);b.iconName&&b.prefix&&(y=b.iconName,h=b.prefix)}if(y&&!g&&(!i||i.getAttribute($3)!==h||i.getAttribute(M3)!==x)){t.setAttribute(n,x),i&&t.removeChild(i);var C=s9e(),S=C.extra;S.attributes[$O]=e,jO(y,h).then(function(E){var I=z3(et(et({},C),{},{icons:{main:E,mask:W3()},prefix:h,iconName:x,extra:S,watchable:!0})),T=ir.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(T,t.firstChild):t.appendChild(T),T.outerHTML=I.map(function(N){return Q1(N)}).join(`
`),t.removeAttribute(n),r()}).catch(o)}else r()}else r()})}function g9e(t){return Promise.all([e6(t,"::before"),e6(t,"::after")])}function v9e(t){return t.parentNode!==document.head&&!~sqe.indexOf(t.tagName.toUpperCase())&&!t.getAttribute($O)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function t6(t){if(wc)return new Promise(function(e,n){var r=Xg(t.querySelectorAll("*")).filter(v9e).map(g9e),o=U3.begin("searchPseudoElements");Bne(),Promise.all(r).then(function(){o(),zO(),e()}).catch(function(){o(),zO(),n()})})}var y9e={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=t6,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,o=r===void 0?ir:r;ht.searchPseudoElements&&t6(o)}}},n6=!1,x9e={mixout:function(){return{dom:{unwatch:function(){Bne(),n6=!0}}}},hooks:function(){return{bootstrap:function(){XV(FO("mutationObserverCallbacks",{}))},noAuto:function(){t9e()},watch:function(n){var r=n.observeMutationsRoot;n6?zO():XV(FO("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},r6=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,o){var s=o.toLowerCase().split("-"),i=s[0],a=s.slice(1).join("-");if(i&&a==="h")return r.flipX=!0,r;if(i&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(i){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},b9e={mixout:function(){return{parse:{transform:function(n){return r6(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var o=r.getAttribute("data-fa-transform");return o&&(n.transform=r6(o)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,o=n.transform,s=n.containerWidth,i=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},u="translate(".concat(o.x*32,", ").concat(o.y*32,") "),l="scale(".concat(o.size/16*(o.flipX?-1:1),", ").concat(o.size/16*(o.flipY?-1:1),") "),c="rotate(".concat(o.rotate," 0 0)"),d={transform:"".concat(u," ").concat(l," ").concat(c)},f={transform:"translate(".concat(i/2*-1," -256)")},h={outer:a,inner:d,path:f};return{tag:"g",attributes:et({},h.outer),children:[{tag:"g",attributes:et({},h.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:et(et({},r.icon.attributes),h.path)}]}]}}}},mN={x:0,y:0,width:"100%",height:"100%"};function o6(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function w9e(t){return t.tag==="g"?t.children:[t]}var k9e={hooks:function(){return{parseNodeAttributes:function(n,r){var o=r.getAttribute("data-fa-mask"),s=o?$_(o.split(" ").map(function(i){return i.trim()})):W3();return s.prefix||(s.prefix=Gd()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,o=n.attributes,s=n.main,i=n.mask,a=n.maskId,u=n.transform,l=s.width,c=s.icon,d=i.width,f=i.icon,h=bqe({transform:u,containerWidth:d,iconWidth:l}),p={tag:"rect",attributes:et(et({},mN),{},{fill:"white"})},m=c.children?{children:c.children.map(o6)}:{},g={tag:"g",attributes:et({},h.inner),children:[o6(et({tag:c.tag,attributes:et(et({},c.attributes),h.path)},m))]},v={tag:"g",attributes:et({},h.outer),children:[g]},y="mask-".concat(a||$0()),x="clip-".concat(a||$0()),b={tag:"mask",attributes:et(et({},mN),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},C={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:w9e(f)},b]};return r.push(C,{tag:"rect",attributes:et({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(y,")")},mN)}),{children:r,attributes:o}}}},C9e={provides:function(e){var n=!1;Hd.matchMedia&&(n=Hd.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],o={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:et(et({},o),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=et(et({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:et(et({},o),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:et(et({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:et(et({},i),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:et(et({},o),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:et(et({},i),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:et(et({},o),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:et(et({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},S9e={hooks:function(){return{parseNodeAttributes:function(n,r){var o=r.getAttribute("data-fa-symbol"),s=o===null?!1:o===""?!0:o;return n.symbol=s,n}}}},E9e=[Cqe,c9e,d9e,f9e,h9e,y9e,x9e,b9e,k9e,C9e,S9e];Lqe(E9e,{mixoutsTo:Pi});Pi.noAuto;Pi.config;Pi.library;Pi.dom;var UO=Pi.parse;Pi.findIconDefinition;Pi.toHtml;var _9e=Pi.icon;Pi.layer;Pi.text;Pi.counter;function s6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function od(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s6(Object(n),!0).forEach(function(r){om(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p2(t){"@babel/helpers - typeof";return p2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p2(t)}function om(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I9e(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function T9e(t,e){if(t==null)return{};var n=I9e(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VO(t){return N9e(t)||D9e(t)||R9e(t)||O9e()}function N9e(t){if(Array.isArray(t))return HO(t)}function D9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function R9e(t,e){if(t){if(typeof t=="string")return HO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HO(t,e)}}function HO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A9e(t){var e,n=t.beat,r=t.fade,o=t.beatFade,s=t.bounce,i=t.shake,a=t.flash,u=t.spin,l=t.spinPulse,c=t.spinReverse,d=t.pulse,f=t.fixedWidth,h=t.inverse,p=t.border,m=t.listItem,g=t.flip,v=t.size,y=t.rotation,x=t.pull,b=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":o,"fa-bounce":s,"fa-shake":i,"fa-flash":a,"fa-spin":u,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":d,"fa-fw":f,"fa-inverse":h,"fa-border":p,"fa-li":m,"fa-flip":g===!0,"fa-flip-horizontal":g==="horizontal"||g==="both","fa-flip-vertical":g==="vertical"||g==="both"},om(e,"fa-".concat(v),typeof v<"u"&&v!==null),om(e,"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),om(e,"fa-pull-".concat(x),typeof x<"u"&&x!==null),om(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(b).map(function(C){return b[C]?C:null}).filter(function(C){return C})}function $9e(t){return t=t-0,t===t}function Wne(t){return $9e(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var M9e=["style"];function P9e(t){return t.charAt(0).toUpperCase()+t.slice(1)}function F9e(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),o=Wne(n.slice(0,r)),s=n.slice(r+1).trim();return o.startsWith("webkit")?e[P9e(o)]=s:e[o]=s,e},{})}function zne(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(u){return zne(t,u)}),o=Object.keys(e.attributes||{}).reduce(function(u,l){var c=e.attributes[l];switch(l){case"class":u.attrs.className=c,delete e.attributes.class;break;case"style":u.attrs.style=F9e(c);break;default:l.indexOf("aria-")===0||l.indexOf("data-")===0?u.attrs[l.toLowerCase()]=c:u.attrs[Wne(l)]=c}return u},{attrs:{}}),s=n.style,i=s===void 0?{}:s,a=T9e(n,M9e);return o.attrs.style=od(od({},o.attrs.style),i),t.apply(void 0,[e.tag,od(od({},o.attrs),a)].concat(VO(r)))}var Une=!1;try{Une=!0}catch{}function L9e(){if(!Une&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function i6(t){if(t&&p2(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(UO.icon)return UO.icon(t);if(t===null)return null;if(t&&p2(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function gN(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?om({},t,e):{}}var J1=ee.forwardRef(function(t,e){var n=t.icon,r=t.mask,o=t.symbol,s=t.className,i=t.title,a=t.titleId,u=t.maskId,l=i6(n),c=gN("classes",[].concat(VO(A9e(t)),VO(s.split(" ")))),d=gN("transform",typeof t.transform=="string"?UO.transform(t.transform):t.transform),f=gN("mask",i6(r)),h=_9e(l,od(od(od(od({},c),d),f),{},{symbol:o,title:i,titleId:a,maskId:u}));if(!h)return L9e("Could not find icon",l),null;var p=h.abstract,m={ref:e};return Object.keys(t).forEach(function(g){J1.defaultProps.hasOwnProperty(g)||(m[g]=t[g])}),B9e(p[0],m)});J1.displayName="FontAwesomeIcon";J1.propTypes={beat:ye.bool,border:ye.bool,beatFade:ye.bool,bounce:ye.bool,className:ye.string,fade:ye.bool,flash:ye.bool,mask:ye.oneOfType([ye.object,ye.array,ye.string]),maskId:ye.string,fixedWidth:ye.bool,inverse:ye.bool,flip:ye.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ye.oneOfType([ye.object,ye.array,ye.string]),listItem:ye.bool,pull:ye.oneOf(["right","left"]),pulse:ye.bool,rotation:ye.oneOf([0,90,180,270]),shake:ye.bool,size:ye.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ye.bool,spinPulse:ye.bool,spinReverse:ye.bool,symbol:ye.oneOfType([ye.bool,ye.string]),title:ye.string,titleId:ye.string,transform:ye.oneOfType([ye.string,ye.object]),swapOpacity:ye.bool};J1.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var B9e=zne.bind(null,ee.createElement);function Qg(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(c){try{l(r.next(c))}catch(d){i(d)}}function u(c){try{l(r.throw(c))}catch(d){i(d)}}function l(c){c.done?s(c.value):o(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Jg(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(n=0)),n;)try{if(r=1,o&&(s=l[0]&2?o.return:l[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,l[1])).done)return s;switch(o=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],o=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function a6(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,s=[],i;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function u6(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var j9e=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Z1(t,e){var n=W9e(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function W9e(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),o=j9e.get(r);o&&Object.defineProperty(t,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return t}var z9e=[".DS_Store","Thumbs.db"];function U9e(t){return Qg(this,void 0,void 0,function(){return Jg(this,function(e){return m2(t)&&V9e(t.dataTransfer)?[2,q9e(t.dataTransfer,t.type)]:H9e(t)?[2,G9e(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,Y9e(t)]:[2,[]]})})}function V9e(t){return m2(t)}function H9e(t){return m2(t)&&m2(t.target)}function m2(t){return typeof t=="object"&&t!==null}function G9e(t){return GO(t.target.files).map(function(e){return Z1(e)})}function Y9e(t){return Qg(this,void 0,void 0,function(){var e;return Jg(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return Z1(r)})]}})})}function q9e(t,e){return Qg(this,void 0,void 0,function(){var n,r;return Jg(this,function(o){switch(o.label){case 0:return t.items?(n=GO(t.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(K9e))]):[3,2];case 1:return r=o.sent(),[2,l6(Vne(r))];case 2:return[2,l6(GO(t.files).map(function(s){return Z1(s)}))]}})})}function l6(t){return t.filter(function(e){return z9e.indexOf(e.name)===-1})}function GO(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function K9e(t){if(typeof t.webkitGetAsEntry!="function")return c6(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?Hne(e):c6(t)}function Vne(t){return t.reduce(function(e,n){return u6(u6([],a6(e),!1),a6(Array.isArray(n)?Vne(n):[n]),!1)},[])}function c6(t){var e=t.getAsFile();if(!e)return Promise.reject("".concat(t," is not a File"));var n=Z1(e);return Promise.resolve(n)}function X9e(t){return Qg(this,void 0,void 0,function(){return Jg(this,function(e){return[2,t.isDirectory?Hne(t):Q9e(t)]})})}function Hne(t){var e=t.createReader();return new Promise(function(n,r){var o=[];function s(){var i=this;e.readEntries(function(a){return Qg(i,void 0,void 0,function(){var u,l,c;return Jg(this,function(d){switch(d.label){case 0:if(a.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return u=d.sent(),n(u),[3,4];case 3:return l=d.sent(),r(l),[3,4];case 4:return[3,6];case 5:c=Promise.all(a.map(X9e)),o.push(c),s(),d.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function Q9e(t){return Qg(this,void 0,void 0,function(){return Jg(this,function(e){return[2,new Promise(function(n,r){t.file(function(o){var s=Z1(o,t.fullPath);n(s)},function(o){r(o)})})]})})}var J9e=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",o=(t.type||"").toLowerCase(),s=o.replace(/\/.*$/,"");return n.some(function(i){var a=i.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):o===a})}return!0};function d6(t){return tKe(t)||eKe(t)||Yne(t)||Z9e()}function Z9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eKe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tKe(t){if(Array.isArray(t))return YO(t)}function f6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function h6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(n),!0).forEach(function(r){Gne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M0(t,e){return oKe(t)||rKe(t,e)||Yne(t,e)||nKe()}function nKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yne(t,e){if(t){if(typeof t=="string")return YO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YO(t,e)}}function YO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rKe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],o=!0,s=!1,i,a;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(r.push(i.value),!(e&&r.length===e));o=!0);}catch(u){s=!0,a=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function oKe(t){if(Array.isArray(t))return t}var sKe="file-invalid-type",iKe="file-too-large",aKe="file-too-small",uKe="too-many-files",lKe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:sKe,message:"File type must be ".concat(n)}},p6=function(e){return{code:iKe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},m6=function(e){return{code:aKe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},cKe={code:uKe,message:"Too many files"};function qne(t,e){var n=t.type==="application/x-moz-file"||J9e(t,e);return[n,n?null:lKe(e)]}function Kne(t,e,n){if($f(t.size))if($f(e)&&$f(n)){if(t.size>n)return[!1,p6(n)];if(t.size<e)return[!1,m6(e)]}else{if($f(e)&&t.size<e)return[!1,m6(e)];if($f(n)&&t.size>n)return[!1,p6(n)]}return[!0,null]}function $f(t){return t!=null}function dKe(t){var e=t.files,n=t.accept,r=t.minSize,o=t.maxSize,s=t.multiple,i=t.maxFiles,a=t.validator;return!s&&e.length>1||s&&i>=1&&e.length>i?!1:e.every(function(u){var l=qne(u,n),c=M0(l,1),d=c[0],f=Kne(u,r,o),h=M0(f,1),p=h[0],m=a?a(u):null;return d&&p&&!m})}function g2(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Sw(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function g6(t){t.preventDefault()}function fKe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function hKe(t){return t.indexOf("Edge/")!==-1}function pKe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return fKe(t)||hKe(t)}function mu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];return e.some(function(a){return!g2(r)&&a&&a.apply(void 0,[r].concat(s)),g2(r)})}}function mKe(){return"showOpenFilePicker"in window}function gKe(t){if($f(t)){var e=Object.entries(t).filter(function(n){var r=M0(n,2),o=r[0],s=r[1],i=!0;return Xne(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(s)||!s.every(Qne))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(n,r){var o=M0(r,2),s=o[0],i=o[1];return h6(h6({},n),{},Gne({},s,i))},{});return[{description:"Files",accept:e}]}return t}function vKe(t){if($f(t))return Object.entries(t).reduce(function(e,n){var r=M0(n,2),o=r[0],s=r[1];return[].concat(d6(e),[o],d6(s))},[]).filter(function(e){return Xne(e)||Qne(e)}).join(",")}function yKe(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function xKe(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function Xne(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||/\w+\/[-+.\w]+/g.test(t)}function Qne(t){return/^.*\.[\w]+$/.test(t)}var bKe=["children"],wKe=["open"],kKe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],CKe=["refKey","onChange","onClick"];function SKe(t){return IKe(t)||_Ke(t)||Jne(t)||EKe()}function EKe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IKe(t){if(Array.isArray(t))return qO(t)}function vN(t,e){return DKe(t)||NKe(t,e)||Jne(t,e)||TKe()}function TKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jne(t,e){if(t){if(typeof t=="string")return qO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qO(t,e)}}function qO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function NKe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],o=!0,s=!1,i,a;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(r.push(i.value),!(e&&r.length===e));o=!0);}catch(u){s=!0,a=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function DKe(t){if(Array.isArray(t))return t}function v6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(n),!0).forEach(function(r){KO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v2(t,e){if(t==null)return{};var n=RKe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RKe(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}var H3=D.forwardRef(function(t,e){var n=t.children,r=v2(t,bKe),o=ere(r),s=o.open,i=v2(o,wKe);return D.useImperativeHandle(e,function(){return{open:s}},[s]),ee.createElement(D.Fragment,null,n(Cr(Cr({},i),{},{open:s})))});H3.displayName="Dropzone";var Zne={disabled:!1,getFilesFromEvent:U9e,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};H3.defaultProps=Zne;H3.propTypes={children:ye.func,accept:ye.objectOf(ye.arrayOf(ye.string)),multiple:ye.bool,preventDropOnDocument:ye.bool,noClick:ye.bool,noKeyboard:ye.bool,noDrag:ye.bool,noDragEventsBubbling:ye.bool,minSize:ye.number,maxSize:ye.number,maxFiles:ye.number,disabled:ye.bool,getFilesFromEvent:ye.func,onFileDialogCancel:ye.func,onFileDialogOpen:ye.func,useFsAccessApi:ye.bool,autoFocus:ye.bool,onDragEnter:ye.func,onDragLeave:ye.func,onDragOver:ye.func,onDrop:ye.func,onDropAccepted:ye.func,onDropRejected:ye.func,onError:ye.func,validator:ye.func};var XO={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ere(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Cr(Cr({},Zne),t),n=e.accept,r=e.disabled,o=e.getFilesFromEvent,s=e.maxSize,i=e.minSize,a=e.multiple,u=e.maxFiles,l=e.onDragEnter,c=e.onDragLeave,d=e.onDragOver,f=e.onDrop,h=e.onDropAccepted,p=e.onDropRejected,m=e.onFileDialogCancel,g=e.onFileDialogOpen,v=e.useFsAccessApi,y=e.autoFocus,x=e.preventDropOnDocument,b=e.noClick,C=e.noKeyboard,S=e.noDrag,E=e.noDragEventsBubbling,I=e.onError,T=e.validator,N=D.useMemo(function(){return vKe(n)},[n]),O=D.useMemo(function(){return gKe(n)},[n]),$=D.useMemo(function(){return typeof g=="function"?g:y6},[g]),A=D.useMemo(function(){return typeof m=="function"?m:y6},[m]),P=D.useRef(null),L=D.useRef(null),W=D.useReducer(OKe,XO),z=vN(W,2),F=z[0],B=z[1],H=F.isFocused,X=F.isFileDialogActive,te=D.useRef(typeof window<"u"&&window.isSecureContext&&v&&mKe()),re=function(){!te.current&&X&&setTimeout(function(){if(L.current){var ze=L.current.files;ze.length||(B({type:"closeDialog"}),A())}},300)};D.useEffect(function(){return window.addEventListener("focus",re,!1),function(){window.removeEventListener("focus",re,!1)}},[L,X,A,te]);var ue=D.useRef([]),Q=function(ze){P.current&&P.current.contains(ze.target)||(ze.preventDefault(),ue.current=[])};D.useEffect(function(){return x&&(document.addEventListener("dragover",g6,!1),document.addEventListener("drop",Q,!1)),function(){x&&(document.removeEventListener("dragover",g6),document.removeEventListener("drop",Q))}},[P,x]),D.useEffect(function(){return!r&&y&&P.current&&P.current.focus(),function(){}},[P,y,r]);var ce=D.useCallback(function(Ne){I?I(Ne):console.error(Ne)},[I]),ke=D.useCallback(function(Ne){Ne.preventDefault(),Ne.persist(),Ot(Ne),ue.current=[].concat(SKe(ue.current),[Ne.target]),Sw(Ne)&&Promise.resolve(o(Ne)).then(function(ze){if(!(g2(Ne)&&!E)){var Be=ze.length,It=Be>0&&dKe({files:ze,accept:N,minSize:i,maxSize:s,multiple:a,maxFiles:u,validator:T}),At=Be>0&&!It;B({isDragAccept:It,isDragReject:At,isDragActive:!0,type:"setDraggedFiles"}),l&&l(Ne)}}).catch(function(ze){return ce(ze)})},[o,l,ce,E,N,i,s,a,u,T]),Ce=D.useCallback(function(Ne){Ne.preventDefault(),Ne.persist(),Ot(Ne);var ze=Sw(Ne);if(ze&&Ne.dataTransfer)try{Ne.dataTransfer.dropEffect="copy"}catch{}return ze&&d&&d(Ne),!1},[d,E]),_e=D.useCallback(function(Ne){Ne.preventDefault(),Ne.persist(),Ot(Ne);var ze=ue.current.filter(function(It){return P.current&&P.current.contains(It)}),Be=ze.indexOf(Ne.target);Be!==-1&&ze.splice(Be,1),ue.current=ze,!(ze.length>0)&&(B({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Sw(Ne)&&c&&c(Ne))},[P,c,E]),Le=D.useCallback(function(Ne,ze){var Be=[],It=[];Ne.forEach(function(At){var wr=qne(At,N),Wt=vN(wr,2),ks=Wt[0],wt=Wt[1],Mt=Kne(At,i,s),cr=vN(Mt,2),Xr=cr[0],Bi=cr[1],Dc=T?T(At):null;if(ks&&Xr&&!Dc)Be.push(At);else{var iv=[wt,Bi];Dc&&(iv=iv.concat(Dc)),It.push({file:At,errors:iv.filter(function(cp){return cp})})}}),(!a&&Be.length>1||a&&u>=1&&Be.length>u)&&(Be.forEach(function(At){It.push({file:At,errors:[cKe]})}),Be.splice(0)),B({acceptedFiles:Be,fileRejections:It,type:"setFiles"}),f&&f(Be,It,ze),It.length>0&&p&&p(It,ze),Be.length>0&&h&&h(Be,ze)},[B,a,N,i,s,u,f,h,p,T]),Ie=D.useCallback(function(Ne){Ne.preventDefault(),Ne.persist(),Ot(Ne),ue.current=[],Sw(Ne)&&Promise.resolve(o(Ne)).then(function(ze){g2(Ne)&&!E||Le(ze,Ne)}).catch(function(ze){return ce(ze)}),B({type:"reset"})},[o,Le,ce,E]),Pe=D.useCallback(function(){if(te.current){B({type:"openDialog"}),$();var Ne={multiple:a,types:O};window.showOpenFilePicker(Ne).then(function(ze){return o(ze)}).then(function(ze){Le(ze,null),B({type:"closeDialog"})}).catch(function(ze){yKe(ze)?(A(ze),B({type:"closeDialog"})):xKe(ze)?(te.current=!1,L.current?(L.current.value=null,L.current.click()):ce(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ce(ze)});return}L.current&&(B({type:"openDialog"}),$(),L.current.value=null,L.current.click())},[B,$,A,v,Le,ce,O,a]),Ue=D.useCallback(function(Ne){!P.current||!P.current.isEqualNode(Ne.target)||(Ne.key===" "||Ne.key==="Enter"||Ne.keyCode===32||Ne.keyCode===13)&&(Ne.preventDefault(),Pe())},[P,Pe]),lt=D.useCallback(function(){B({type:"focus"})},[]),Me=D.useCallback(function(){B({type:"blur"})},[]),Ke=D.useCallback(function(){b||(pKe()?setTimeout(Pe,0):Pe())},[b,Pe]),xt=function(ze){return r?null:ze},_t=function(ze){return C?null:xt(ze)},tn=function(ze){return S?null:xt(ze)},Ot=function(ze){E&&ze.stopPropagation()},jt=D.useMemo(function(){return function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=Ne.refKey,Be=ze===void 0?"ref":ze,It=Ne.role,At=Ne.onKeyDown,wr=Ne.onFocus,Wt=Ne.onBlur,ks=Ne.onClick,wt=Ne.onDragEnter,Mt=Ne.onDragOver,cr=Ne.onDragLeave,Xr=Ne.onDrop,Bi=v2(Ne,kKe);return Cr(Cr(KO({onKeyDown:_t(mu(At,Ue)),onFocus:_t(mu(wr,lt)),onBlur:_t(mu(Wt,Me)),onClick:xt(mu(ks,Ke)),onDragEnter:tn(mu(wt,ke)),onDragOver:tn(mu(Mt,Ce)),onDragLeave:tn(mu(cr,_e)),onDrop:tn(mu(Xr,Ie)),role:typeof It=="string"&&It!==""?It:"presentation"},Be,P),!r&&!C?{tabIndex:0}:{}),Bi)}},[P,Ue,lt,Me,Ke,ke,Ce,_e,Ie,C,S,r]),sn=D.useCallback(function(Ne){Ne.stopPropagation()},[]),An=D.useMemo(function(){return function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=Ne.refKey,Be=ze===void 0?"ref":ze,It=Ne.onChange,At=Ne.onClick,wr=v2(Ne,CKe),Wt=KO({accept:N,multiple:a,type:"file",style:{display:"none"},onChange:xt(mu(It,Ie)),onClick:xt(mu(At,sn)),tabIndex:-1},Be,L);return Cr(Cr({},Wt),wr)}},[L,n,a,Ie,r]);return Cr(Cr({},F),{},{isFocused:H&&!r,getRootProps:jt,getInputProps:An,rootRef:P,inputRef:L,open:xt(Pe)})}function OKe(t,e){switch(e.type){case"focus":return Cr(Cr({},t),{},{isFocused:!0});case"blur":return Cr(Cr({},t),{},{isFocused:!1});case"openDialog":return Cr(Cr({},XO),{},{isFileDialogActive:!0});case"closeDialog":return Cr(Cr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Cr(Cr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Cr(Cr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Cr({},XO);default:return t}}function y6(){}function AKe(t){return ga({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(t)}function $Ke(t){return ga({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var tre=function(t,e){return(tre=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(t,e)};function lu(t,e){function n(){this.constructor=t}tre(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function it(t,e,n,r){return new(n||(n=Promise))(function(o,s){function i(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){l.done?o(l.value):new n(function(c){c(l.value)}).then(i,a)}u((r=r.apply(t,e||[])).next())})}function at(t,e){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(c[0]===6&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(d){c=[6,d],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var MKe=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var o=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+o+"."),this.set(e,o)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,o=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(s){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return PKe(r,i[0],i[1]),i.join("=")}),r);"tfjsflags"in o&&o.tfjsflags.split(",").forEach(function(s){var i=s.split(":"),a=i[0],u=i[1];e.urlFlags[a]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(a,u)})}},t}();function PKe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function we(){return nre}var nre=null,y2=new Map,QO=new Map;function rre(t,e){var n=sre(t,e);return y2.get(n)}function FKe(t){return QO.get(t)}function x6(t){for(var e=y2.entries(),n=[];;){var r=e.next(),o=r.done,s=r.value;if(o)break;var i=s[0],a=s[1];i.split("_")[0]===t&&n.push(a)}return n}function ore(t){var e=t.kernelName,n=t.backendName,r=sre(e,n);if(y2.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");y2.set(r,t)}function LKe(t){var e=t.kernelName;QO.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),QO.set(e,t)}function sre(t,e){return e+"_"+t}function JO(t,e,n){return Math.max(t,Math.min(e,n))}function ire(t){return t%2==0?t:t+1}function BKe(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function G(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Rn(t,e,n){n===void 0&&(n=""),G(Do(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function Zg(t){G(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function yg(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||qu(t)&&!n)for(var r=0;r<t.length;++r)yg(t[r],e,n);else e.push(t);return e}function dt(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function Do(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Pr(t){return t%1==0}function jKe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function ZO(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function wm(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function b6(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,o){var s=0,i=function(){if(t())r();else{s++;var a=e(s);n!=null&&s>=n?o():setTimeout(i,a)}};i()})}function WKe(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var s=t.slice();return s[r]=e/n,s}function So(t,e){var n=e.length;return G((t=t==null?e.map(function(r,o){return o}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),G(t.every(function(r){return Pr(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function Mf(t,e){for(var n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||o?null:So(e,t).sort(),i=0,a=0;a<t.length;++a){if(s!=null){if(s[i]===a&&t[a]!==1)throw new Error("Can't squeeze axis "+a+" since its dim '"+t[a]+"' is not 1");(s[i]==null||s[i]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function P0(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function x2(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function zKe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function UKe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function VKe(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function qu(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function are(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function HKe(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=n.length}),e}function G3(t){return typeof t=="string"||t instanceof String}function GKe(t){return typeof t=="boolean"}function YKe(t){return typeof t=="number"}function eb(t){return Array.isArray(t)?eb(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":YKe(t)?"float32":G3(t)?"string":GKe(t)?"bool":"float32"}function eA(t){return!!(t&&t.constructor&&t.call&&t.apply)}function tA(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function Ku(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function ure(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=yg(t)),n&&zKe(t,e),function(s,i){return s instanceof Float32Array&&i==="float32"||s instanceof Int32Array&&i==="int32"||s instanceof Uint8Array&&i==="bool"}(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),o=0;o<r.length;++o)Math.round(t[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+e)}function w6(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,o){return r*o});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function r(o,s,i){var a=new Array;if(s.length===1)for(var u=s[0],l=0;l<u;l++)a[l]=i[o+l];else{u=s[0];var c=s.slice(1),d=c.reduce(function(f,h){return f*h});for(l=0;l<u;l++)a[l]=r(o+l*d,c,i)}return a}(0,t,e)}function lre(t,e){for(var n=tb(t,e),r=0;r<n.length;r++)n[r]=1;return n}function tb(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function Eu(){return we().platform.now()}function cre(t){t.forEach(function(e){G(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function qKe(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",we().platform.encode(t,e)}function b2(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",we().platform.decode(t,e)}function k6(t,e,n){if(e===0)return 0;if(e===1)return t[0];for(var r=t[t.length-1],o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function KKe(t,e,n){if(e===0)return[];if(e===1)return[t];for(var r=new Array(e),o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}var XKe=function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new QKe)}return t.prototype.profileKernel=function(e,n,r){var o,s=this,i=this.backendTimer.time(function(){o=r()});return o.forEach(function(a){a.data().then(function(u){(function(l,c,d){if(c!=="float32")return!1;for(var f=0;f<l.length;f++){var h=l[f];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+d+"'"),!0}})(u,a.dtype,e),i.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),s.logger.logKernelProfile(e,a,u,l.kernelMs,n,c)})})}),o},t}(),QKe=function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,o,s,i){var a=typeof o=="number"?wm(o+"ms",9):o.error,u=wm(e,25),l=n.rank,c=n.size,d=wm(n.shape.toString(),14),f="";for(var h in s){var p=s[h].shape||n.shape,m=p.length;f+=h+": "+m+"D "+(m>0?p:"")+" "}console.log("%c"+u+"	%c"+a+"	%c"+l+"D "+d+"	%c"+c+"	%c"+f+"	%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),C6=20,Pv=3,yN=7;function JKe(t,e,n,r){var o=Ku(e),s=function(l,c,d,f){var h=dt(c),p=f[f.length-1],m=new Array(p).fill(0),g=c.length,v=d==="complex64"?Lv(l):l;if(g>1)for(var y=0;y<h/p;y++)for(var x=y*p,b=0;b<p;b++)m[b]=Math.max(m[b],Fv(v[x+b],0,d).length);return m}(t,e,n,o),i=e.length,a=function l(c,d,f,h,p,m){m===void 0&&(m=!0);var g=f==="complex64"?2:1,v=d[0],y=d.length;if(y===0)return f==="complex64"?[Fv(Lv(c)[0],0,f)]:f==="bool"?[dre(c[0])]:[c[0].toString()];if(y===1){if(v>C6){var x=Pv*g,b=Array.from(c.slice(0,x)),C=Array.from(c.slice((v-Pv)*g,v*g));return f==="complex64"&&(b=Lv(b),C=Lv(C)),["["+b.map(function(L,W){return Fv(L,p[W],f)}).join(", ")+", ..., "+C.map(function(L,W){return Fv(L,p[v-Pv+W],f)}).join(", ")+"]"]}return["["+(f==="complex64"?Lv(c):Array.from(c)).map(function(L,W){return Fv(L,p[W],f)}).join(", ")+"]"]}var S=d.slice(1),E=h.slice(1),I=h[0]*g,T=[];if(v>C6){for(var N=0;N<Pv;N++){var O=($=N*I)+I;T.push.apply(T,l(c.slice($,O),S,f,E,p,!1))}for(T.push("..."),N=v-Pv;N<v;N++)O=($=N*I)+I,T.push.apply(T,l(c.slice($,O),S,f,E,p,N===v-1))}else for(N=0;N<v;N++){var $;O=($=N*I)+I,T.push.apply(T,l(c.slice($,O),S,f,E,p,N===v-1))}var A=y===2?",":"";for(T[0]="["+T[0]+A,N=1;N<T.length-1;N++)T[N]=" "+T[N]+A;var P=`,
`;for(N=2;N<y;N++)P+=`
`;return T[T.length-1]=" "+T[T.length-1]+"]"+(m?"":P),T}(t,e,n,o,s),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(a.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function Fv(t,e,n){return wm(Array.isArray(t)?parseFloat(t[0].toFixed(yN))+" + "+parseFloat(t[1].toFixed(yN))+"j":G3(t)?"'"+t+"'":n==="bool"?dre(t):parseFloat(t.toFixed(yN)).toString(),e)}function dre(t){return t===0?"false":"true"}function Lv(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var F0=function(){function t(e,n,r){var o=this;if(this.dtype=n,this.shape=e.slice(),this.size=dt(e),r!=null){var s=r.length;G(s===this.size,function(){return"Length of values '"+s+"' does not match the size inferred by the shape '"+o.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||x2(n,this.size),this.strides=Ku(e)}return t.prototype.set=function(e){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),G(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var s=this.locToIndex(r);this.values[s]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,o=0,s=e;o<s.length;o++){var i=s[o];if(i<0||i>=this.shape[r]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(a)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Nu().makeTensor(this.values,this.shape,this.dtype)},t}(),Nu=null,pe=null,fre=null,Er=function(){function t(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=dt(e),this.strides=Ku(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),G(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,o){return this.throwIfDisposed(),this.reshape([e,n,r,o])},t.prototype.as5D=function(e,n,r,o,s){return this.throwIfDisposed(),this.reshape([e,n,r,o,s])},t.prototype.asType=function(e){return this.throwIfDisposed(),pe.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return it(this,void 0,void 0,function(){var e;return at(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,pe.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return pe.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return it(this,void 0,void 0,function(){var e;return at(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,w6(this.shape,e)]}})})},t.prototype.arraySync=function(){return w6(this.shape,this.dataSync())},t.prototype.data=function(){return it(this,void 0,void 0,function(){var e,n;return at(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Nu().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map(function(o){return b2(o)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var e=Nu().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(n){return b2(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return it(this,void 0,void 0,function(){var e;return at(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Nu().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Nu().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),pe.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),pe.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),pe.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),pe.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),pe.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),pe.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),pe.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),JKe(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),pe.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),pe.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),pe.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),pe.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),pe.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),pe.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),pe.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),pe.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),pe.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),pe.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),pe.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),pe.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,o,s){return r===void 0&&(r=.001),fre("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,s,o,r)},t.prototype.batchNorm=function(e,n,r,o,s){return s===void 0&&(s=.001),this.throwIfDisposed(),pe.batchNorm(this,e,n,r,o,s)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),pe.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),pe.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),pe.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),pe.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),pe.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),pe.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),pe.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),pe.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),pe.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),pe.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),pe.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),pe.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),pe.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),pe.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),pe.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),pe.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),pe.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),pe.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),pe.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),pe.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),pe.div(this,e)},t.prototype.divNoNan=function(e){return this.throwIfDisposed(),pe.divNoNan(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),pe.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),pe.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),pe.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),pe.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),pe.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),pe.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),pe.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),pe.modStrict(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),pe.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),pe.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),pe.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),pe.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),pe.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),pe.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),pe.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),pe.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),pe.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),pe.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),pe.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),pe.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),pe.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),pe.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),pe.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),pe.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),pe.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),pe.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),pe.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),pe.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),pe.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),pe.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),pe.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),pe.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),pe.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),pe.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),pe.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),pe.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),pe.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),pe.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),pe.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),pe.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),pe.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),pe.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),pe.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),pe.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),pe.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),pe.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),pe.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),pe.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),pe.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),pe.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),pe.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),pe.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),pe.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),pe.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),pe.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),pe.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),pe.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),pe.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),pe.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),pe.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),pe.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),pe.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),pe.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),pe.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),pe.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),pe.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),pe.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),pe.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),pe.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),pe.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),pe.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),pe.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),pe.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),pe.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,o,s,i){return o===void 0&&(o="NWC"),s===void 0&&(s=1),this.throwIfDisposed(),pe.conv1d(this,e,n,r,o,s,i)},t.prototype.conv2d=function(e,n,r,o,s,i){return o===void 0&&(o="NHWC"),s===void 0&&(s=[1,1]),this.throwIfDisposed(),pe.conv2d(this,e,n,r,o,s,i)},t.prototype.conv2dTranspose=function(e,n,r,o,s){return this.throwIfDisposed(),pe.conv2dTranspose(this,e,n,r,o,s)},t.prototype.depthwiseConv2D=function(e,n,r,o,s,i){return o===void 0&&(o="NHWC"),s===void 0&&(s=[1,1]),this.throwIfDisposed(),pe.depthwiseConv2d(this,e,n,r,o,s,i)},t.prototype.separableConv2d=function(e,n,r,o,s,i){return s===void 0&&(s=[1,1]),i===void 0&&(i="NHWC"),this.throwIfDisposed(),pe.separableConv2d(this,e,n,r,o,s,i)},t.prototype.avgPool=function(e,n,r,o){return this.throwIfDisposed(),pe.avgPool(this,e,n,r,o)},t.prototype.maxPool=function(e,n,r,o){return this.throwIfDisposed(),pe.maxPool(this,e,n,r,o)},t.prototype.localResponseNormalization=function(e,n,r,o){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),pe.localResponseNormalization(this,e,n,r,o)},t.prototype.pool=function(e,n,r,o,s){return this.throwIfDisposed(),pe.pool(this,e,n,r,o,s)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Nu().makeVariable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),pe.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),pe.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),pe.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),pe.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,o,s,i,a,u){return o===void 0&&(o=0),s===void 0&&(s=0),i===void 0&&(i=0),a===void 0&&(a=0),u===void 0&&(u=0),this.throwIfDisposed(),pe.stridedSlice(this,e,n,r,o,s,i,a,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),pe.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),pe.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),pe.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),pe.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),pe.spectral.irfft(this)},t}();Object.defineProperty(Er,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var S6,nA,rA,oA,sA,xg=function(t){function e(n,r,o,s){var i=t.call(this,n.shape,n.dtype,n.dataId,s)||this;return i.trainable=r,i.name=o,i}return lu(e,t),e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Do(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Nu().disposeTensor(this),this.dataId=n.dataId,Nu().incRef(this,null)},e.prototype.dispose=function(){Nu().disposeVariable(this),this.isDisposedInternal=!0},e}(Er);Object.defineProperty(xg,Symbol.hasInstance,{value:function(t){return t instanceof Er&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(S6||(S6={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(nA||(nA={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(rA||(rA={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(oA||(oA={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(sA||(sA={}));var ZKe={float32:oA,int32:nA,bool:rA,complex64:sA};function Vo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return ZKe[t][e]}function xN(t){return Vo(t,"int32")}function Dr(t,e){if(t.dtype===e.dtype)return[t,e];var n=Vo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function eXe(t,e){G(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function hre(t){var e=[];return function n(r,o,s){if(r!=null){if(r instanceof Er)return void o.push(r);if(i=r,!(!Array.isArray(i)&&typeof i!="object")){var i,a=r;for(var u in a){var l=a[u];s.has(l)||(s.add(l),n(l,o,s))}}}}(t,e,new Set),e}var bN,E6=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),tXe=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new E6}return t.prototype.ready=function(){return it(this,void 0,void 0,function(){var e,n,r;return at(this,function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,o.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(r)]:[3,4];case 3:return o.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return it(this,void 0,void 0,function(){var n,r,o;return at(this,function(s){switch(s.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return o=s.sent(),[3,3];case 2:o=r,s.label=3;case 3:if(!o)return[2,!1];s.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new XKe(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var e=this;x6(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)})},t.prototype.disposeRegisteredKernels=function(e){var n=this;x6(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[e])})},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var o=r.factory();if(Promise.resolve(o)===o){var s=++this.pendingBackendInitId,i=o.then(function(a){return!(s<n.pendingBackendInitId)&&(n.registry[e]=a,n.pendingBackendInit=null,!0)}).catch(function(a){return!(s<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(a.stack||a.message),!1)});return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=o,{success:!0,asyncInit:!1}}catch(a){return console.warn("Initialization of backend "+e+" failed"),console.warn(a.stack||a.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],o=this.initializeBackend(r),s=o.success,i=o.asyncInit;if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){var r=this.state.tensorInfo.get(n),o=r.backend,s=this.readSync(n);o.disposeData(n),r.backend=e,e.move(n,s,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,n){var r,o=this,s=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=e}return this.scopedRun(function(){return o.startScope(s)},function(){return o.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var o=r();return n(),o}catch(s){throw n(),s}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[n],function(o){return{x:function(){return o.toFloat()}}},[]),n},t.prototype.runKernel=function(e,n,r,o,s){return this.runKernelFunc(null,n,null,e,r,o,s)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,n,r){var o=this.backend.numDataIds(),s=0;r.forEach(function(u){s+=u.dtype==="complex64"?3:1});var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-s-i;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+e+"'")},t.prototype.runKernelFunc=function(e,n,r,o,s,i,a){var u,l=this;i===void 0&&(i=[]),a===void 0&&(a=[]);var c=[],d=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var f,h=function(y){d&&(c=y.map(function(x){return l.keep(l.clone(x))}))},p=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,v=rre(o,this.backendName);return f=v!=null?function(){var y=l.backend.numDataIds();g=v.kernelFunc({inputs:n,attrs:s,backend:l.backend});var x=Array.isArray(g)?g:[g];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,y,x);var b=x.map(function(S){var E=S.dataId,I=S.shape,T=S.dtype;return l.makeTensorFromDataId(E,I,T)}),C=b.filter(function(S,E){return a[E]});return h((i||[]).slice().concat(C)),b}:function(){var y=l.backend.numDataIds();g=l.tidy(function(){return e(l.backend,h)});var x=Array.isArray(g)?g:[g];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,y,x),x},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(o,n,function(){return f()}):f()}),d&&this.addTapeNode(o,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(y){return n[y].shape}),outputShapes:u.map(function(y){return y.shape})}),Array.isArray(g)?u:u[0]},t.prototype.makeTensor=function(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;var s=e;r==="string"&&G3(e[0])&&(s=e.map(function(c){return qKe(c)}));var i=o.write(s,n,r),a=new Er(n,r,i,this.nextTensorId());if(this.incRef(a,o),r==="string"){var u=this.state.tensorInfo.get(i),l=HKe(s);this.state.numBytes+=l-u.bytes,u.bytes=l}return a},t.prototype.makeTensorFromDataId=function(e,n,r,o){var s=new Er(n,r=r||"float32",e,this.nextTensorId());return this.incRef(s,o),s},t.prototype.makeVariable=function(e,n,r,o){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.asType(o));var s=new xg(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error("Variable with name "+s.name+" was already registered");return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s},t.prototype.incRef=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*are(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof xg||this.track(e)},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return it(this,void 0,void 0,function(){var n,r;return at(this,function(o){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(s){return s.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r,o,s){var i=this,a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},u=FKe(e);u!=null&&(o=u.gradFunc),o!=null&&(a.gradient=function(l){return l=l.map(function(c,d){if(c==null){var f=r[d],h=tb(f.size,f.dtype);return i.makeTensor(h,f.shape,f.dtype)}return c}),o(l.length>1?l:l[0],s)}),this.state.activeTape.push(a)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=hre(e),o=new Set(r.map(function(u){return u.id})),s=0;s<this.state.activeScope.track.length;s++){var i=this.state.activeScope.track[s];i.kept||o.has(i.id)||i.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==a.id||n.track(u)})},t.prototype.gradients=function(e,n,r,o){var s=this;if(o===void 0&&(o=!1),G(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var i=this.scopedRun(function(){return s.startTape()},function(){return s.endTape()},function(){return s.tidy("forward",e)});G(i instanceof Er,function(){return"The result y returned by f() must be a tensor."});var a=function(u,l,c){for(var d={},f={},h=0;h<l.length;h++)d[l[h].id]=!0;for(h=0;h<u.length;h++){var p=(S=u[h]).inputs;for(var m in p){for(var g=p[m],v=!1,y=0;y<l.length;y++)if(d[g.id]){S.outputs.forEach(function(N){return d[N.id]=!0}),v=!0,f[S.id]=!0;break}if(v)break}}var x={};x[c.id]=!0;var b={};for(h=u.length-1;h>=0;h--)for(p=(S=u[h]).inputs,y=0;y<S.outputs.length;y++)if(x[S.outputs[y].id]){for(var m in p)x[p[m].id]=!0,b[S.id]=!0;break}var C=[];for(h=0;h<u.length;h++){var S;if(f[(S=u[h]).id]&&b[S.id]){var E={};for(var m in S.inputs){var I=S.inputs[m];d[I.id]&&(E[m]=I)}var T=Object.assign({},S);T.inputs=E,T.outputs=S.outputs,C.push(T)}}return C}(this.state.activeTape,n,i);if(!o&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[i.id]=r??(u=i.shape,l=lre(dt(u),"float32"),oe.makeTensor(l,u,"float32")),function(f,h,p){for(var m=function(v){var y=h[v],x=[];if(y.outputs.forEach(function(E){var I=f[E.id];I!=null?x.push(I):x.push(null)}),y.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+y.kernelName+".");var b=y.gradient(x),C=function(E){if(!(E in b))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(b)+".");var I=p(function(){return b[E]()});if(I.dtype!=="float32")throw new Error("Error in gradient for op "+y.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+I.dtype+"'");var T=y.inputs[E];if(!Do(I.shape,T.shape))throw new Error("Error in gradient for op "+y.kernelName+". The gradient of input '"+E+"' has shape '"+I.shape+"', which does not match the shape of the input '"+T.shape+"'");if(f[T.id]==null)f[T.id]=I;else{var N=f[T.id];f[T.id]=N.add(I),N.dispose()}};for(var S in y.inputs)C(S)},g=h.length-1;g>=0;g--)m(g)}(c,a,function(f){return s.tidy(f)});var d=n.map(function(f){return c[f.id]});return s.state.gradientDepth===0&&(s.state.activeTape.forEach(function(f){for(var h=0,p=f.saved;h<p.length;h++)p[h].dispose()}),s.state.activeTape=null),{value:i,grads:d}})},t.prototype.customGrad=function(e){var n=this;return G(eA(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];G(o.every(function(a){return a instanceof Er}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i={};return o.forEach(function(a,u){i[u]=a}),n.runKernelFunc(function(a,u){return G((r=e.apply(void 0,o.concat([u]))).value instanceof Er,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),G(eA(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},i,function(a,u){var l=r.gradFunc(a,u),c=Array.isArray(l)?l:[l];G(c.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),G(c.every(function(f){return f instanceof Er}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var d={};return c.forEach(function(f,h){d[h]=function(){return f}}),d})}},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.time=function(e){return it(this,void 0,void 0,function(){var n,r;return at(this,function(o){switch(o.label){case 0:return n=Eu(),[4,this.backend.time(e)];case 1:return(r=o.sent()).wallMs=Eu()-n,[2,r]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new E6,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),oe=function(){var t=function(){if(bN==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}bN=n}return bN}();if(t._tfengine==null){var e=new MKe(t);t._tfengine=new tXe(e)}return function(n){nre=n}(t._tfengine.ENV),Nu=function(){return t._tfengine},t._tfengine}();function pre(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var _l=we();_l.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),_l.registerFlag("IS_BROWSER",function(){return pre()}),_l.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),_l.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),_l.registerFlag("PROD",function(){return!1}),_l.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return _l.getBool("DEBUG")}),_l.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),_l.registerFlag("IS_TEST",function(){return!1});var L0,bi,hi,Nf={},wN={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function nXe(t,e){Nf[t]=e}function dl(t){t in Nf||(Nf[t]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(o){if(typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(o){o.preventDefault(),delete Nf[n]},!1),n===1?r.getContext("webgl",wN)||r.getContext("experimental-webgl",wN):r.getContext("webgl2",wN)}(t));var e=Nf[t];return e.isContextLost()?(delete Nf[t],dl(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Nf[t])}function P_(t,e){return[e,t]}function Ty(t){var e=dt(t);return ZO(Math.ceil(e/4))}function nb(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Y3(t,e){var n,r,o,s,i,a,u,l,c,d=t;return we().getNumber("WEBGL_VERSION")===2?(n=d.R32F,r=d.R16F,o=d.RGBA16F,s=d.RGBA32F,i=d.RED,a=4,u=1,l=d.HALF_FLOAT,c=d.FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,s=d.RGBA,i=t.RGBA,a=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:s,textureFormatFloat:i,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function ft(t,e,n){var r=n();return e&&function(o){var s=o.getError();if(s!==o.NO_ERROR)throw new Error("WebGL Error: "+iXe(o,s))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(L0||(L0={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(bi||(bi={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(hi||(hi={}));var rXe=596e-10,oXe=65504;function sXe(t){return!!(we().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||rXe<Math.abs(t)&&Math.abs(t)<oXe)}function iXe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Ew(t,e,n){return kc(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function aXe(t,e,n){var r=kc(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ft(t,e,function(){return t.shaderSource(r,n)}),ft(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function uXe(t,e,n){var r=kc(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ft(t,e,function(){return t.shaderSource(r,n)}),ft(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(o,s){var i=lXe.exec(s);if(i==null)return console.log("Couldn't parse line number in error: "+s),void console.log(o);for(var a=+i[1],u=o.split(`
`),l=u.length.toString().length+2,c=u.map(function(g,v){return wm((v+1).toString(),l)+g}),d=0,f=0;f<c.length;f++)d=Math.max(c[f].length,d);var h=c.slice(0,a-1),p=c.slice(a-1,a),m=c.slice(a);console.log(h.join(`
`)),console.log(s.split(`
`)[0]),console.log("%c "+wm(p[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var kN,CN,lXe=/ERROR: [0-9]+:([0-9]+):/g;function cXe(t,e){return kc(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function dXe(t,e,n){if(ft(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function SN(t,e,n){if(ft(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function fXe(t,e,n){var r=kc(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ft(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ft(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function hXe(t,e,n){var r=kc(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ft(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),ft(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function pXe(t,e){return kc(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function mXe(t,e){var n=we().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function gXe(t,e){return kc(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function _6(t,e,n,r,o,s,i,a){var u=t.getAttribLocation(n,r);return u!==-1&&(ft(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,o)}),ft(t,e,function(){return t.vertexAttribPointer(u,s,t.FLOAT,!1,i,a)}),ft(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function vXe(t,e,n,r){kXe(t,r),ft(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),ft(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function yXe(t,e,n,r){return kc(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function xXe(t,e,n){return t.getUniformLocation(e,n)}function bXe(t,e,n,r,o,s){ft(t,e,function(){return vXe(t,e,r,s)}),ft(t,e,function(){return t.uniform1i(o,s)})}function EN(t,e,n,r){ft(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),ft(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function I6(t,e,n){ft(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),ft(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function _w(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+wXe(t,e))}function wXe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function kc(t,e,n,r){var o=ft(t,e,function(){return n()});if(o==null)throw new Error(r);return o}function kXe(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function w2(t,e){return e===void 0&&(e=2),dt(t.slice(0,t.length-e))}function k2(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function _N(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[w2(t)].concat(k2(t))),e}function CXe(t,e){var n;e===void 0&&(e=!1);var r=we().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?ire(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var o=Mf(t);t=o.newShape}var s=dt(t);if(t.length<=1&&s<=r)return[1,s];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var i=w2(t),a=2,u=2;return t.length&&(a=(n=k2(t))[0],u=n[1]),ZO(s=i*(a/2)*(u/2)).map(function(l){return 2*l})}return ZO(s)}function Iw(t){return t%2==0}function Tw(t,e){if(Do(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||Iw(n)&&Iw(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Iw(t[0])&&Iw(e[0])}function SXe(t){if(kN==null){var e=dl(t);kN=e.getParameter(e.MAX_TEXTURE_SIZE)}return kN}function EXe(t){if(CN==null){var e=dl(t);CN=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,CN)}function _Xe(t){if(t===0)return 0;var e=dl(t);return sa(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:sa(e,"EXT_disjoint_timer_query")?1:0}function sa(t,e){return t.getExtension(e)!=null}function T6(t){try{if(dl(t)!=null)return!0}catch{return!1}return!1}function IXe(t){if(t===0)return!1;var e=dl(t);if(t===1){if(!sa(e,"OES_texture_float"))return!1}else if(!sa(e,"EXT_color_buffer_float"))return!1;return iA(e)}function TXe(t){if(t===0)return!1;var e=dl(t);if(t!==1){if(sa(e,"EXT_color_buffer_float"))return iA(e);if(sa(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(r,o){var s=Y3(r,o),i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,s.internalFormatHalfFloat,1,1,0,s.textureFormatFloat,s.textureTypeHalfFloat,null);var a=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(i),r.deleteFramebuffer(a),u}(e,n)}return!1}return!!sa(e,"OES_texture_float")&&!!sa(e,"WEBGL_color_buffer_float")&&iA(e)}function iA(t){var e=Y3(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),o}function NXe(t){return t===2&&dl(t).fenceSync!=null}var Nt=we();function mre(t){we().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Je(t,e){return oe.tidy(t,e)}function ni(t){hre(t).forEach(function(e){return e.dispose()})}function DXe(t){return oe.keep(t)}function C2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];we().getBool("IS_TEST")||console.warn.apply(console,t)}function mf(t,e){var n=t;if(qu(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||qu(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&we().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function o(s,i,a){if(a=a||[],!Array.isArray(s)&&!qu(s))return void G(i.length===0,function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array/TypedArray of "+i[0]+" elements"});G(i.length>0,function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+s.length+" elements"}),G(s.length===i[0],function(){return"Element arr["+a.join("][")+"] should have "+i[0]+" elements, but has "+s.length+" elements"});for(var u=i.slice(1),l=0;l<s.length;++l)o(s[l],u,a.concat(l))}(t,r,[]),r}function N6(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function V(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof Er)return N6(r,t.dtype,e,n),t;var o=eb(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),N6(r,o,e,n),t==null||!qu(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var s=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+s+"'")}var i=mf(t,o);qu(t)||Array.isArray(t)||(t=[t]);var a=o!=="string"?ure(t,o,we().getBool("DEBUG")):yg(t,[],!0);return oe.makeTensor(a,i,o)}function S2(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(o,s){return V(o,e+"["+s+"]",n)},r)}function gre(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function RXe(t,e,n){for(var r=t.length+e.length,o=[],s=0,i=0,a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[s++]):o.push(e[i++]);return o}function ss(t,e){for(var n=[],r=t.length,o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);return[n,e.map(function(s){return t[s]})]}function ii(t,e){return RXe(t,e.map(function(n){return 1}),e)}function fi(t,e,n){G(gre(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function fl(t,e){if(gre(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(o){return n.push(o)}),n}function q3(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function hl(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function OXe(t,e){var n=t[0].length;t.forEach(function(o,s){G(o.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+s+"] must be the same as the rank of the rest ("+n+")"})}),G(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(o,s){for(var i=0;i<n;i++)G(i===e||o[i]===r[i],function(){return"Error in concat"+n+"D: Shape of tensors["+s+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+s+"."})})}function bg(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function Z(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];oe.startScope(n);try{var a=r.apply(void 0,s);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),oe.endScope(a),a}catch(u){throw oe.endScope(null),u}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}Nt.registerFlag("HAS_WEBGL",function(){return Nt.getNumber("WEBGL_VERSION")>0}),Nt.registerFlag("WEBGL_VERSION",function(){return T6(2)?2:T6(1)?1:0}),Nt.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Nt.get("WEBGL_VERSION")===2}),Nt.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Nt.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Nt.registerFlag("WEBGL_PACK",function(){return Nt.getBool("HAS_WEBGL")}),Nt.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Nt.getBool("WEBGL_PACK")}),Nt.registerFlag("WEBGL_PACK_CLIP",function(){return Nt.getBool("WEBGL_PACK")}),Nt.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Nt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Nt.getBool("WEBGL_PACK")}),Nt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Nt.getBool("WEBGL_PACK")}),Nt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Nt.getBool("WEBGL_PACK")}),Nt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Nt.getBool("WEBGL_PACK")}),Nt.registerFlag("WEBGL_PACK_REDUCE",function(){return Nt.getBool("WEBGL_PACK")}),Nt.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Nt.getBool("WEBGL_PACK")}),Nt.registerFlag("WEBGL_CONV_IM2COL",function(){return Nt.getBool("WEBGL_PACK")}),Nt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return SXe(Nt.getNumber("WEBGL_VERSION"))}),Nt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return EXe(Nt.getNumber("WEBGL_VERSION"))}),Nt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=Nt.getNumber("WEBGL_VERSION");return t===0?0:_Xe(t)}),Nt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Nt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),Nt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return IXe(Nt.getNumber("WEBGL_VERSION"))}),Nt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Nt.getBool("WEBGL_FORCE_F16_TEXTURES")&&Nt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Nt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return TXe(Nt.getNumber("WEBGL_VERSION"))}),Nt.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return NXe(Nt.getNumber("WEBGL_VERSION"))}),Nt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Nt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),fre=mre;var Uo=Z({complex_:function(t,e){var n=V(t,"real","complex"),r=V(e,"imag","complex");return Rn(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),oe.runKernelFunc(function(o){return o.complex(n,r)},{$real:n,$imag:r})}}),Qi=Z({real_:function(t){var e=V(t,"input","real");return oe.runKernelFunc(function(n){return n.real(e)},{$input:e})}}),Du=Z({imag_:function(t){var e=V(t,"input","imag");return oe.runKernelFunc(function(n){return n.imag(e)},{$input:e})}});function Ho(t,e,n){return gf(t,e,mf(t,n),n)}function gf(t,e,n,r){if(r==null&&(r=eb(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!qu(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){cre(e);var o=dt(e),s=dt(n);G(o===s,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+o+" values but has "+s});for(var i=0;i<n.length;++i){var a=n[i],u=i!==n.length-1||a!==dt(e.slice(i));G(n[i]===e[i]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return qu(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?ure(t,r,we().getBool("DEBUG")):yg(t,[],!0),oe.makeTensor(t,e,r)}function He(t,e){if((qu(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&qu(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return gf(t,[],[],e)}function Zr(t,e){Zg(t);var n=mf(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return gf(t,null,n,e)}function _d(t,e,n){if(Zg(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=mf(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return gf(t,e,r,n)}function K3(t,e,n){if(Zg(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=mf(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return gf(t,e,r,n)}function Hs(t,e,n){if(Zg(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=mf(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return gf(t,e,r,n)}function AXe(t,e,n){if(Zg(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=mf(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return gf(t,e,r,n)}function $Xe(t,e,n){if(Zg(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=mf(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return gf(t,e=e||r,r,n)}function MXe(t,e,n,r){return e===void 0&&(e=!0),oe.makeVariable(t,e,n,r)}function ev(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=ev(t,"float32"),r=nr(t,"float32");return Uo(n,r)}var o=lre(dt(t),e);return oe.makeTensor(o,t,e)}function nr(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=nr(t,"float32"),r=nr(t,"float32");return Uo(n,r)}var o=tb(dt(t),e);return oe.makeTensor(o,t,e)}function Xu(t,e,n){return oe.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function PXe(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return oe.runKernelFunc(function(r){return r.linspace(t,e,n)},{})}function E2(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return nr([0],r);var o=tb(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),o[0]=t;for(var s=1;s<o.length;s++)o[s]=o[s-1]+n;return Zr(o,r)}var vre=Z({onesLike_:function(t){var e=V(t,"x","onesLike");if(e.dtype==="complex64"){var n=vre(Qi(e)),r=gn(Du(e));return Uo(n,r)}return oe.runKernelFunc(function(o){return o.onesLike(e)},{$x:e},function(o,s){return{$x:function(){return gn(o)}}})}}),gn=Z({zerosLike_:function(t){var e=V(t,"x","zerosLike");return oe.runKernelFunc(function(n){return n.zerosLike(e)},{$x:e},function(n,r){return{$x:function(){return gn(n)}}})}}),yo=Z({concat_:function(t,e){e===void 0&&(e=0),G(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=S2(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(a){if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+a.dtype+". ")}),e=So(e,n[0].shape)[0];var r=bg(n.map(function(a){return a.shape}),e);if(dt(r)===0)return Ho([],r);if((n=n.filter(function(a){return a.size>0})).length===1)return n[0];var o=n.map(function(a){return a.shape});OXe(o,e);var s=n,i={axis:e};return oe.runKernelFunc(function(a){return a.concat(n,e)},s,function(a){var u=o.map(function(l){return l[e]});return X3(a,u,e).map(function(l){return function(){return l}})},"Concat",i)}}),FXe=Z({concat1d_:function(t){return yo(t,0)}}),LXe=Z({concat2d_:function(t,e){return yo(t,e)}}),BXe=Z({concat3d_:function(t,e){return yo(t,e)}}),jXe=Z({concat4d_:function(t,e){return yo(t,e)}}),X3=Z({split_:function(t,e,n){n===void 0&&(n=0);var r,o=V(t,"x","split");return n=So(n,o.shape)[0],typeof e=="number"?(G(o.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(o.shape[n]/e)):(G(o.shape[n]===e.reduce(function(s,i){return s+i}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),oe.runKernelFunc(function(s){return s.split(o,r,n)},{$x:o},function(s){return{$x:function(){return yo(s,n)}}})}});function op(t,e){return t(e={exports:{}},e.exports),e.exports}var WXe=op(function(t){(function(e,n,r){function o(a){var u,l=this,c=(u=4022871197,function(d){d=d.toString();for(var f=0;f<d.length;f++){var h=.02519603282416938*(u+=d.charCodeAt(f));h-=u=h>>>0,u=(h*=u)>>>0,u+=4294967296*(h-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var d=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=0|d)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function s(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function i(a,u){var l=new o(a),c=u&&u.state,d=l.next;return d.int32=function(){return 4294967296*l.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,c&&(typeof c=="object"&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.alea=i})(0,t,!1)}),zXe=op(function(t){(function(e,n,r){function o(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},a===(0|a)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function i(a,u){var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xor128=i})(0,t,!1)}),UXe=op(function(t){(function(e,n,r){function o(a){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^d^d<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(0|a)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function i(a,u){var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xorwow=i})(0,t,!1)}),VXe=op(function(t){(function(e,n,r){function o(a){var u=this;u.next=function(){var l,c,d=u.x,f=u.i;return l=d[f],c=(l^=l>>>7)^l<<24,c^=(l=d[f+1&7])^l>>>10,c^=(l=d[f+3&7])^l>>>3,c^=(l=d[f+4&7])^l<<7,l=d[f+7&7],c^=(l^=l<<13)^l<<9,d[f]=c,u.i=f+1&7,c},function(l,c){var d,f=[];if(c===(0|c))f[0]=c;else for(c=""+c,d=0;d<c.length;++d)f[7&d]=f[7&d]<<15^c.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],l.x=f,l.i=0,d=256;d>0;--d)l.next()}(u,a)}function s(a,u){return u.x=a.x.slice(),u.i=a.i,u}function i(a,u){a==null&&(a=+new Date);var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(c.x&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xorshift7=i})(0,t,!1)}),HXe=op(function(t){(function(e,n,r){function o(a){var u=this;u.next=function(){var l,c,d=u.w,f=u.X,h=u.i;return u.w=d=d+1640531527|0,c=f[h+34&127],l=f[h=h+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=f[h]=c^l,u.i=h,c+(d^d>>>16)|0},function(l,c){var d,f,h,p,m,g=[],v=128;for(c===(0|c)?(f=c,c=null):(c+="\0",f=0,v=Math.max(v,c.length)),h=0,p=-32;p<v;++p)c&&(f^=c.charCodeAt((p+32)%c.length)),p===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(m=m+1640531527|0,h=(d=g[127&p]^=f+m)==0?h+1:0);for(h>=128&&(g[127&(c&&c.length||0)]=-1),h=127,p=512;p>0;--p)f=g[h+34&127],d=g[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,g[h]=f^d;l.w=m,l.X=g,l.i=h}(u,a)}function s(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function i(a,u){a==null&&(a=+new Date);var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(c.X&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xor4096=i})(0,t,!1)}),GXe=op(function(t){(function(e,n,r){function o(a){var u=this,l="";u.next=function(){var d=u.b,f=u.c,h=u.d,p=u.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,u.b=d=d<<20^d>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^p,u.a=p-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=0|a):l+=a;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function s(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function i(a,u){var l=new o(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&s(c,l),d.state=function(){return s(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.tychei=i})(0,t,!1)}),Df=op(function(t){(function(e,n){var r,o=this,s=256,i=6,a="random",u=n.pow(s,i),l=n.pow(2,52),c=2*l,d=s-1;function f(v,y,x){var b=[],C=m(function I(T,N){var O,$=[],A=typeof T;if(N&&A=="object")for(O in T)try{$.push(I(T[O],N-1))}catch{}return $.length?$:A=="string"?T:T+"\0"}((y=y==1?{entropy:!0}:y||{}).entropy?[v,g(e)]:v??function(){try{var I;return r&&(I=r.randomBytes)?I=I(s):(I=new Uint8Array(s),(o.crypto||o.msCrypto).getRandomValues(I)),g(I)}catch{var T=o.navigator,N=T&&T.plugins;return[+new Date,o,N,o.screen,g(e)]}}(),3),b),S=new h(b),E=function(){for(var I=S.g(i),T=u,N=0;I<l;)I=(I+N)*s,T*=s,N=S.g(1);for(;I>=c;)I/=2,T/=2,N>>>=1;return(I+N)/T};return E.int32=function(){return 0|S.g(4)},E.quick=function(){return S.g(4)/4294967296},E.double=E,m(g(S.S),e),(y.pass||x||function(I,T,N,O){return O&&(O.S&&p(O,S),I.state=function(){return p(S,{})}),N?(n[a]=I,T):I})(E,C,"global"in y?y.global:this==n,y.state)}function h(v){var y,x=v.length,b=this,C=0,S=b.i=b.j=0,E=b.S=[];for(x||(v=[x++]);C<s;)E[C]=C++;for(C=0;C<s;C++)E[C]=E[S=d&S+v[C%x]+(y=E[C])],E[S]=y;(b.g=function(I){for(var T,N=0,O=b.i,$=b.j,A=b.S;I--;)T=A[O=d&O+1],N=N*s+A[d&(A[O]=A[$=d&$+T])+(A[$]=T)];return b.i=O,b.j=$,N})(s)}function p(v,y){return y.i=v.i,y.j=v.j,y.S=v.S.slice(),y}function m(v,y){for(var x,b=v+"",C=0;C<b.length;)y[d&C]=d&(x^=19*y[d&C])+b.charCodeAt(C++);return g(y)}function g(v){return String.fromCharCode.apply(0,v)}if(n["seed"+a]=f,m(n.random(),e),t.exports){t.exports=f;try{r=require("crypto")}catch{}}})([],Math)});Df.alea=WXe,Df.xor128=zXe,Df.xorwow=UXe,Df.xorshift7=VXe,Df.xor4096=HXe,Df.tychei=GXe;var F_=Df.alea,Q3=function(){function t(e,n,r,o,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=s||Math.random();this.random=F_(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,o=!1;!o;){var s=void 0,i=void 0,a=void 0;do a=(s=2*this.random()-1)*s+(i=2*this.random()-1)*i;while(a>=1||a===0);var u=Math.sqrt(-2*Math.log(a)/a);n=this.mean+this.stdDev*s*u,r=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),YXe=function(){function t(e,n,r,o){this.alpha=e,this.beta=1/n,this.dtype=r;var s=o||Math.random();this.randu=F_(s.toString()),this.randn=new Q3(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,o,s,i;;){do o=this.randn.nextValue(),i=1+this.c*o;while(i<=0);if(i*=i*i,n=1-.331*(e=o*o)*e,r=.5*e+this.d*(1-i+Math.log(i)),(s=this.randu())<n||Math.log(s)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),qXe=function(){function t(e,n,r,o){var s=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return s.dtype==null||s.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=F_(o)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Pt(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",cre(t),new F0(t,e,n)}function KXe(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var yre=Z({batchToSpaceND_:function(t,e,n){var r=V(t,"x","batchToSpaceND"),o=e.reduce(function(s,i){return s*i});return G(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),G(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),G(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+o}),oe.runKernelFunc(function(s){return s.batchToSpaceND(r,e,n)},{$x:r},function(s){return{$x:function(){return s.spaceToBatchND(e,n)}}})}}),XXe=Z({broadcastTo_:function(t,e){var n=V(t,"broadcastTo","x"),r=n.shape;if(e.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var o=n.shape.slice();o.length<e.length;)o.unshift(1);n=n.reshape(o)}for(var s=Array.from(e),i=e.length-1;i>=0;i--)if(n.shape[i]===e[i])s[i]=1;else if(n.shape[i]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var a=s.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return a.length===0?n.clone():oe.runKernelFunc(function(u){return u.tile(n,s)},{input:n},function(u){return{input:function(){return u.sum(a,!0)}}})}}),QXe=Z({cast_:function(t,e){var n=V(t,"x","cast");if(!UKe(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return oe.runKernelFunc(function(o){return o.cast(n,e)},{x:n},function(o){return{x:function(){return o.clone()}}},"Cast",r)}}),JXe=Z({clone_:function(t){var e=V(t,"x","clone",null);return oe.runKernelFunc(function(){return oe.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}}),ZXe=Z({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=V(t,"x","cumsum"),s=fl([e|=0],o.rank),i=o;s!=null&&(i=o.transpose(s));var a=hl(1,o.rank)[0],u=oe.runKernelFunc(function(l){return l.cumsum(i,a,n,r)},{permutedX:i},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return s!=null&&(u=u.transpose(s)),u}}),eQe=Z({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=V(t,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];return G(o*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),G(s*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+s+" and "+e+` for depthToSpace with input shape
          `+r.shape}),G(i%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+i+" for depthToSpace with input shape "+r.shape}),oe.runKernelFunc(function(a){return a.depthToSpace(r,e,n)},{$x:r})}}),Gi=Z({expandDims_:function(t,e){e===void 0&&(e=0);var n=V(t,"x","expandDims",null);G(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(G(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),Ua(n,r)}}),xre=Z({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var o=Pt([t,e],r),s=t<=e?t:e,i=0;i<s;++i)o.set(1,i,i);var a=o.toTensor().as2D(t,e);if(n==null)return a;if(n.length===1)return km(Gi(a,0),[n[0],1,1]);if(n.length===2)return km(Gi(Gi(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return km(Gi(Gi(Gi(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),tQe=Z({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var o=V(t,"logits","multinomial"),s=o.size,i=o.rank;if(s<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+s+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var a=i===1?o.as2D(1,-1):o,u=oe.runKernelFunc(function(l){return l.multinomial(a,r,e,n)},{logits2D:a});return i===1?u.as1D():u}}),aA=Z({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var o=V(t,"indices","oneHot","int32"),s=o.shape.concat([e]);return o=o.flatten(),oe.runKernelFunc(function(i){return i.oneHot(o,e,n,r)},{$indices:o},function(i){return{$indices:function(){return nr(o.shape,"float32")}}}).reshape(s)}}),sp=Z({pad_:function(t,e,n){n===void 0&&(n=0);var r=V(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:e,constantValue:n};return oe.runKernelFunc(function(s){return s.pad(r,e,n)},{x:r},function(s){var i=e.map(function(a){return a[0]});return{x:function(){return s.slice(i,r.shape)}}},"PadV2",o)}}),nQe=Z({pad1d_:function(t,e,n){return n===void 0&&(n=0),G(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),sp(t,[e],n)}}),rQe=Z({pad2d_:function(t,e,n){return n===void 0&&(n=0),G(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),sp(t,e,n)}}),oQe=Z({pad3d_:function(t,e,n){return n===void 0&&(n=0),G(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),sp(t,e,n)}}),sQe=Z({pad4d_:function(t,e,n){return n===void 0&&(n=0),G(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),sp(t,e,n)}}),iQe=Z({rand_:function(t,e,n){var r=dt(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var s=0;s<r;s++)o[s]=e();return oe.makeTensor(o,t,n)}}),aQe=Z({randomNormal_:function(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var s=new Q3(e,n,r,!1,o),i=Pt(t,r),a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}}),uQe=Z({randomGamma_:function(t,e,n,r,o){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var s=new YXe(e,n,r,o),i=Pt(t,r),a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}}),bre=Z({randomUniform_:function(t,e,n,r,o){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var s=Pt(t,r),i=new qXe(e,n,null,o),a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}}),Ua=Z({reshape_:function(t,e){var n=V(t,"x","reshape",null);e=WKe(e,n.size),G(n.size===dt(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return oe.runKernelFunc(function(o){return o.reshape(n,e)},{x:n},function(o){return{x:function(){return o.reshape(n.shape)}}},"Reshape",r)}}),wre=Z({spaceToBatchND_:function(t,e,n){var r=V(t,"x","spaceToBatchND");return G(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),G(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),G(r.shape.reduce(function(o,s,i){return i>0&&i<=e.length?o&&(s+n[i-1][0]+n[i-1][1])%e[i-1]==0:o},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),oe.runKernelFunc(function(o){return o.spaceToBatchND(r,e,n)},{$x:r},function(o){return{$x:function(){return o.batchToSpaceND(e,n)}}})}}),kre=Z({squeeze_:function(t,e){var n=V(t,"x","squeeze");return Ua(n,Mf(n.shape,e).newShape)}}),Ii=Z({stack_:function(t,e){e===void 0&&(e=0);var n=S2(t,"tensors","stack");if(G(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,o=n[0].shape,s=n[0].dtype;G(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(a){Rn(o,a.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(a){G(s===a.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=n.map(function(a){return a.expandDims(e)});return yo(i,e)}}),km=Z({tile_:function(t,e){var n=V(t,"x","tile",null);G(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."});var r=[n],o={reps:e};return oe.runKernelFunc(function(s,i){var a=s.tile(n,e);return i([n]),a},{x:n},function(s,i){var a=i[0];return{x:function(){var u=gn(a);if(a.rank===1)for(var l=0;l<e[0];++l)u=u.add(s.slice([l*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(l=0;l<e[0];++l)for(var c=0;c<e[1];++c)u=u.add(s.slice([l*a.shape[0],c*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(var d=0;d<e[2];++d)u=u.add(s.slice([l*a.shape[0],c*a.shape[1],d*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(a.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(d=0;d<e[2];++d)for(var f=0;f<e[3];++f)u=u.add(s.slice([l*a.shape[0],c*a.shape[1],d*a.shape[2],f*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return u}}},"Tile",o,r)}}),lQe=Z({truncatedNormal_:function(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var s=new Q3(e,n,r,!0,o),i=Pt(t,r),a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}}),xo=Z({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=V(t,"x","unstack");G(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length);var r={axis:e};return oe.runKernelFunc(function(o){return o.unstack(n,e)},{x:n},function(o){return{x:function(){return Ii(o,e)}}},"Unpack",r)}}),cQe=function(t,e){return it(this,void 0,void 0,function(){var n,r,o,s,i,a,u,l,c,d;return at(this,function(f){switch(f.label){case 0:return n=V(t,"x","setdiff1d"),r=V(e,"y","setdiff1d"),G(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),G(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),G(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=f.sent(),[4,r.data()];case 2:for(s=f.sent(),i=new Set(s),a=0,c=0;c<o.length;c++)i.has(o[c])||a++;for(u=new F0([a],n.dtype),l=new F0([a],"int32"),c=0,d=0;c<o.length;c++)i.has(o[c])||(u.values[d]=o[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}})})};function _2(t,e,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var s=e.length,i=0;i<s;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(s+1))}return o}function I2(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var s=[],i=[];for(o=1;o<t;++o)o>=2*e+1||o%2==1?i.push(o):s.push(o);r.push.apply(r,s),r.push(0),r.push.apply(r,i)}return r}function T2(t,e,n,r){r===void 0&&(r=!0);var o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(var s=1;s<t.length;++s)s<=e.length?r?o.push(e[s-1]*t[s]):o.push(t[s]/e[s-1]):o.push(t[s]);return o}function Cre(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function Sre(t,e,n){for(var r=t.slice(0,1),o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}function Ere(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],o=1,s=0;s<n.length-1;++s)o*=n[s];var i=t.shape,a=n.slice();a.pop();var u=1;for(s=r;s<t.rank;++s)u*=i[s],a.push(i[s]);var l=Ku(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[a,o,u,l]}var _re=30;function IN(t){return t<=_re?t:tA(t,Math.floor(Math.sqrt(t)))}function dQe(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(s+" update.rank < "+o+". ");if(t.length<r+(n.rank-o))throw new Error(s+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(s+" update.rank != "+(o+t.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(s+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+e.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(s+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+t[i+o]+")")}function fQe(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}dQe(n,e,t)}function N2(t,e,n){for(var r=e.shape.length,o=r>1?e.shape[r-1]:1,s=n.length,i=1,a=o;a<s;++a)i*=n[a];var u=o<1?1:o;return{sliceRank:o,numUpdates:dt(e.shape)/u,sliceSize:i,strides:Ku(n.slice(0,o)).concat([1]),outputSize:dt(n)}}function hQe(t,e,n){G(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),G(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(s){G(e[s]+n[s]<=t.shape[s],function(){return"Error in slice"+t.rank+"D: begin["+s+"] + size["+s+"] ("+(e[s]+n[s])+") would overflow input.shape["+s+"] ("+t.shape[s]+")"})},o=0;o<t.rank;++o)r(o)}function D6(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function J3(t,e,n){for(var r=[],o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function pQe(t,e,n,r,o){var s=e[o],i=n[o]||1;(t&1<<o||s==null)&&(s=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[o];return s<0&&(s+=a),s=JO(0,s,a-1)}function mQe(t,e,n,r,o){var s=e[o],i=n[o]||1;(t&1<<o||s==null)&&(s=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[o];return s<0&&(s+=a),s=i>0?JO(0,s,a):JO(-1,s,a-1)}function Ire(t,e,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function Tre(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function gQe(t,e){G(eA(t),function(){return"The f passed in variableGrads(f) must be a function"}),G(e==null||Array.isArray(e)&&e.every(function(c){return c instanceof xg}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=e!=null;if(!n)for(var r in e=[],oe.registeredVariables)e.push(oe.registeredVariables[r]);var o=n?e.filter(function(c){return!c.trainable}):null,s=e.length;G((e=e.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+s+" variables is trainable."});var i=oe.gradients(t,e,null,!0),a=i.value,u=i.grads;G(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),G(a.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var l={};return e.forEach(function(c,d){u[d]!=null&&(l[c.name]=u[d])}),o!=null&&o.forEach(function(c){return l[c.name]=null}),{value:a,grads:l}}function L_(t){return oe.customGrad(t)}var Cc=Z({softmax_:function(t,e){e===void 0&&(e=-1);var n=V(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return oe.runKernelFunc(function(r,o){var s=r.softmax(n,e);return o([s]),s},{logits:n},function(r,o){var s=o[0],i=r.mul(s);return{logits:function(){return i.sub(i.sum([e],!0).mul(s))}}},"Softmax",{dim:e},[],[!0])}}),vQe=Z({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=V(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return L_(function(r,o){var s=r.max(e,!0),i=r.sub(s),a=i.toFloat().sub(i.exp().sum(e,!0).log());return o([a]),{value:a,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(e,!0).mul(c))}}})(n)}}),Nre=function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.dataIdsCount++,this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),Dre=function(){function t(){}return t.prototype.time=function(e){return he("time")},t.prototype.read=function(e){return he("read")},t.prototype.readSync=function(e){return he("readSync")},t.prototype.numDataIds=function(){return he("numDataIds")},t.prototype.disposeData=function(e){return he("disposeData")},t.prototype.write=function(e,n,r){return he("write")},t.prototype.move=function(e,n,r,o){return he("move")},t.prototype.memory=function(){return he("memory")},t.prototype.floatPrecision=function(){return he("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,o){return he("batchMatMul")},t.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,he("fusedBatchMatMul")},t.prototype.slice=function(e,n,r){return he("slice")},t.prototype.stridedSlice=function(e,n,r,o){return he("stridedSlice")},t.prototype.unstack=function(e,n){return he("unstack")},t.prototype.reverse=function(e,n){return he("reverse")},t.prototype.concat=function(e,n){return he("concat")},t.prototype.neg=function(e){return he("neg")},t.prototype.add=function(e,n){return he("add")},t.prototype.addN=function(e){return he("addN")},t.prototype.subtract=function(e,n){return he("subtract")},t.prototype.multiply=function(e,n){return he("multiply")},t.prototype.realDivide=function(e,n){return he("realDivide")},t.prototype.floorDiv=function(e,n){return he("floorDiv")},t.prototype.sum=function(e,n){return he("sum")},t.prototype.prod=function(e,n){return he("prod")},t.prototype.unsortedSegmentSum=function(e,n,r){return he("unsortedSegmentSum")},t.prototype.argMin=function(e,n){return he("argMin")},t.prototype.argMax=function(e,n){return he("argMax")},t.prototype.equal=function(e,n){return he("equal")},t.prototype.notEqual=function(e,n){return he("notEqual")},t.prototype.less=function(e,n){return he("less")},t.prototype.lessEqual=function(e,n){return he("lessEqual")},t.prototype.greater=function(e,n){return he("greater")},t.prototype.greaterEqual=function(e,n){return he("greaterEqual")},t.prototype.logicalNot=function(e){return he("logicalNot")},t.prototype.logicalAnd=function(e,n){return he("logicalAnd")},t.prototype.logicalOr=function(e,n){return he("logicalOr")},t.prototype.where=function(e){return he("where")},t.prototype.select=function(e,n,r){return he("select")},t.prototype.topk=function(e,n,r){return he("topk")},t.prototype.min=function(e,n){return he("min")},t.prototype.minimum=function(e,n){return he("minimum")},t.prototype.mod=function(e,n){return he("mod")},t.prototype.max=function(e,n){return he("max")},t.prototype.maximum=function(e,n){return he("maximum")},t.prototype.all=function(e,n){return he("all")},t.prototype.any=function(e,n){return he("any")},t.prototype.squaredDifference=function(e,n){return he("squaredDifference")},t.prototype.ceil=function(e){return he("ceil")},t.prototype.floor=function(e){return he("floor")},t.prototype.round=function(e){return he("round")},t.prototype.sign=function(e){return he("sign")},t.prototype.isNaN=function(e){return he("isNaN")},t.prototype.isInf=function(e){return he("isInf")},t.prototype.isFinite=function(e){return he("isFinite")},t.prototype.pow=function(e,n){return he("pow")},t.prototype.exp=function(e){return he("exp")},t.prototype.expm1=function(e){return he("expm1")},t.prototype.softmax=function(e,n){return he("softmax")},t.prototype.log=function(e){return he("log")},t.prototype.log1p=function(e){return he("log1p")},t.prototype.sqrt=function(e){return he("sqrt")},t.prototype.rsqrt=function(e){return he("rsqrt")},t.prototype.square=function(e){return he("square")},t.prototype.reciprocal=function(e){return he("reciprocal")},t.prototype.relu=function(e){return he("relu")},t.prototype.relu6=function(e){return he("relu6")},t.prototype.prelu=function(e,n){return he("prelu")},t.prototype.elu=function(e){return he("elu")},t.prototype.eluDer=function(e,n){return he("eluDer")},t.prototype.selu=function(e){return he("selu")},t.prototype.int=function(e){return he("int")},t.prototype.clip=function(e,n,r){return he("clip")},t.prototype.abs=function(e){return he("abs")},t.prototype.complexAbs=function(e){return he("complexAbs")},t.prototype.sigmoid=function(e){return he("sigmoid")},t.prototype.softplus=function(e){return he("softplus")},t.prototype.sin=function(e){return he("sin")},t.prototype.cos=function(e){return he("cos")},t.prototype.tan=function(e){return he("tan")},t.prototype.asin=function(e){return he("asin")},t.prototype.acos=function(e){return he("acos")},t.prototype.atan=function(e){return he("atan")},t.prototype.atan2=function(e,n){return he("atan2")},t.prototype.sinh=function(e){return he("sinh")},t.prototype.cosh=function(e){return he("cosh")},t.prototype.tanh=function(e){return he("tanh")},t.prototype.asinh=function(e){return he("asinh")},t.prototype.acosh=function(e){return he("acosh")},t.prototype.atanh=function(e){return he("atanh")},t.prototype.erf=function(e){return he("erf")},t.prototype.step=function(e,n){return he("step")},t.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,he("fusedConv2d")},t.prototype.conv2d=function(e,n,r){return he("conv2d")},t.prototype.conv2dDerInput=function(e,n,r){return he("conv2dDerInput")},t.prototype.conv2dDerFilter=function(e,n,r){return he("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,he("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(e,n,r){return he("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){return he("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){return he("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(e,n,r){return he("conv3d")},t.prototype.conv3dDerInput=function(e,n,r){return he("conv3dDerInput")},t.prototype.conv3dDerFilter=function(e,n,r){return he("conv3dDerFilter")},t.prototype.maxPool=function(e,n){return he("maxPool")},t.prototype.maxPoolBackprop=function(e,n,r,o){return he("maxPoolBackprop")},t.prototype.avgPool=function(e,n){return he("avgPool")},t.prototype.avgPoolBackprop=function(e,n,r){return he("avgPoolBackprop")},t.prototype.avgPool3d=function(e,n){return he("avgPool3d")},t.prototype.avgPool3dBackprop=function(e,n,r){return he("avgPool3dBackprop")},t.prototype.maxPool3d=function(e,n){return he("maxPool3d")},t.prototype.maxPool3dBackprop=function(e,n,r,o){return he("maxPool3dBackprop")},t.prototype.reshape=function(e,n){return he("reshape")},t.prototype.cast=function(e,n){return he("cast")},t.prototype.tile=function(e,n){return he("tile")},t.prototype.pad=function(e,n,r){return he("pad")},t.prototype.transpose=function(e,n){return he("transpose")},t.prototype.gather=function(e,n,r){return he("gather")},t.prototype.gatherND=function(e,n){return he("gatherND")},t.prototype.scatterND=function(e,n,r){return he("scatterND")},t.prototype.batchToSpaceND=function(e,n,r){return he("batchToSpaceND")},t.prototype.spaceToBatchND=function(e,n,r){return he("spaceToBatchND")},t.prototype.resizeBilinear=function(e,n,r,o){return he("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(e,n,r){return he("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(e,n,r,o){return he("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){return he("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(e,n,r,o,s,i){return he("batchNormalization")},t.prototype.localResponseNormalization4D=function(e,n,r,o,s){return he("localResponseNormalization4D")},t.prototype.LRNGrad=function(e,n,r,o,s,i,a){return he("LRNGrad")},t.prototype.multinomial=function(e,n,r,o){return he("multinomial")},t.prototype.oneHot=function(e,n,r,o){return he("oneHot")},t.prototype.cumsum=function(e,n,r,o){return he("cumsum")},t.prototype.nonMaxSuppression=function(e,n,r,o,s){return he("nonMaxSuppression")},t.prototype.fft=function(e){return he("fft")},t.prototype.ifft=function(e){return he("ifft")},t.prototype.complex=function(e,n){return he("complex")},t.prototype.real=function(e){return he("real")},t.prototype.imag=function(e){return he("imag")},t.prototype.cropAndResize=function(e,n,r,o,s,i){return he("cropAndResize")},t.prototype.depthToSpace=function(e,n,r){return he("depthToSpace")},t.prototype.split=function(e,n,r){return he("split")},t.prototype.sparseToDense=function(e,n,r,o){return he("sparseToDense")},t.prototype.diag=function(e){return he("diag")},t.prototype.fill=function(e,n,r){return he("fill")},t.prototype.onesLike=function(e){return he("onesLike")},t.prototype.zerosLike=function(e){return he("zerosLike")},t.prototype.linspace=function(e,n,r){return he("linspace")},t.prototype.dispose=function(){return he("dispose")},t}();function he(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function sd(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var s=n-1-o,i=t[s]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(s)}return r}function wo(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],s=e.length-r-1,i=e[s];(o==null||o===1&&i>1)&&n.unshift(s)}return n}function en(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o<r;o++){var s=t[t.length-o-1];s==null&&(s=1);var i=e[e.length-o-1];if(i==null&&(i=1),s===1)n.unshift(i);else if(i===1)n.unshift(s);else{if(s!==i)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(s)}}return n}function B0(t,e,n,r,o,s,i){i===void 0&&(i="channelsLast");var a,u=O2(e),l=u[0],c=u[1];if(i==="channelsLast")a=[l,c,t[3],t[3]];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);a=[l,c,t[1],t[1]]}return ip(t,a,n,r,o,s,!1,i)}function D2(t,e,n,r,o,s,i){i===void 0&&(i="NDHWC");var a,u,l=uA(e),c=l[0],d=l[1],f=l[2];if(i==="NDHWC")u="channelsLast",a=[c,d,f,t[4],t[4]];else{if(i!=="NCDHW")throw new Error("Unknown dataFormat "+i);u="channelsFirst",a=[c,d,f,t[1],t[1]]}return R2(t,a,n,r,o,!1,u,s)}function ip(t,e,n,r,o,s,i,a){i===void 0&&(i=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3];if(a==="channelsLast")l=t[0],c=t[1],d=t[2],f=t[3];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=t[0],f=t[1],c=t[2],d=t[3]}var h,p=e[0],m=e[1],g=e[3],v=O2(n),y=v[0],x=v[1],b=O2(r),C=b[0],S=b[1],E=Cm(p,C),I=Cm(m,S),T=function(P,L,W,z,F,B,H,X){var te,re,ue;if(typeof P=="number"){te={top:P,bottom:P,left:P,right:P,type:P===0?"VALID":"NUMBER"};var Q=function(Ie,Pe,Ue,lt,Me){lt==null&&(lt=Rre(Ie,Pe,Ue));var Ke=Ie[0],xt=Ie[1],_t=Ny((Ke-Pe+2*lt)/Ue+1,Me);G(Pr(_t),function(){return"The output # of rows ("+_t+") must be an integer. Change the stride and/or zero pad parameters"});var tn=Ny((xt-Pe+2*lt)/Ue+1,Me);return G(Pr(tn),function(){return"The output # of columns ("+tn+") must be an integer. Change the stride and/or zero pad parameters"}),[_t,tn]}([L,W],B,z,P,X);re=Q[0],ue=Q[1]}else if(P==="same"){re=Math.ceil(L/z),ue=Math.ceil(W/F);var ce=Math.max(0,(re-1)*z+B-L),ke=Math.max(0,(ue-1)*F+H-W),Ce=Math.floor(ce/2),_e=ce-Ce,Le=Math.floor(ke/2);te={top:Ce,bottom:_e,left:Le,right:ke-Le,type:"SAME"}}else{if(P!=="valid")throw Error("Unknown padding parameter: "+P);te={top:0,bottom:0,left:0,right:0,type:"VALID"},re=Math.ceil((L-B+1)/z),ue=Math.ceil((W-H+1)/F)}return{padInfo:te,outHeight:re,outWidth:ue}}(o,c,d,y,x,E,I,s),N=T.padInfo,O=T.outHeight,$=T.outWidth,A=i?g*f:g;return a==="channelsFirst"?h=[l,A,O,$]:a==="channelsLast"&&(h=[l,O,$,A]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:d,inChannels:f,outHeight:O,outWidth:$,outChannels:A,padInfo:N,strideHeight:y,strideWidth:x,filterHeight:p,filterWidth:m,effectiveFilterHeight:E,effectiveFilterWidth:I,dilationHeight:C,dilationWidth:S,inShape:t,outShape:h,filterShape:e}}function R2(t,e,n,r,o,s,i,a){s===void 0&&(s=!1),i===void 0&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3],h=u[4];if(i==="channelsLast")l=t[0],c=t[1],d=t[2],f=t[3],h=t[4];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);l=t[0],h=t[1],c=t[2],d=t[3],f=t[4]}var p,m=e[0],g=e[1],v=e[2],y=e[4],x=uA(n),b=x[0],C=x[1],S=x[2],E=uA(r),I=E[0],T=E[1],N=E[2],O=Cm(m,I),$=Cm(g,T),A=Cm(v,N),P=function(H,X,te,re,ue,Q,ce,ke,Ce,_e,Le){var Ie,Pe,Ue,lt;if(typeof H=="number"){Ie={top:H,bottom:H,left:H,right:H,front:H,back:H,type:H===0?"VALID":"NUMBER"};var Me=function(Ne,ze,Be,It,At,wr){At==null&&(At=Rre(Ne,ze,It));var Wt=Ne[0],ks=Ne[1],wt=Ne[2],Mt=Ny((Wt-ze+2*At)/It+1,wr);G(Pr(Mt),function(){return"The output # of depths ("+Mt+") must be an integer. Change the stride and/or zero pad parameters"});var cr=Ny((ks-ze+2*At)/It+1,wr);G(Pr(cr),function(){return"The output # of rows ("+cr+") must be an integer. Change the stride and/or zero pad parameters"});var Xr=Ny((wt-ze+2*At)/It+1,wr);return G(Pr(Xr),function(){return"The output # of columns ("+Xr+") must be an integer. Change the stride and/or zero pad parameters"}),[Mt,cr,Xr,Be]}([X,te,re,1],ke,1,ue,H,Le);Pe=Me[0],Ue=Me[1],lt=Me[2]}else if(H==="same"){Pe=Math.ceil(X/ue),Ue=Math.ceil(te/Q),lt=Math.ceil(re/ce);var Ke=(Pe-1)*ue+ke-X,xt=(Ue-1)*Q+Ce-te,_t=(lt-1)*ce+_e-re,tn=Math.floor(Ke/2),Ot=Ke-tn,jt=Math.floor(xt/2),sn=xt-jt,An=Math.floor(_t/2);Ie={top:jt,bottom:sn,left:An,right:_t-An,front:tn,back:Ot,type:"SAME"}}else{if(H!=="valid")throw Error("Unknown padding parameter: "+H);Ie={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Pe=Math.ceil((X-ke+1)/ue),Ue=Math.ceil((te-Ce+1)/Q),lt=Math.ceil((re-_e+1)/ce)}return{padInfo:Ie,outDepth:Pe,outHeight:Ue,outWidth:lt}}(o,c,d,f,b,C,S,O,$,A,a),L=P.padInfo,W=P.outDepth,z=P.outHeight,F=P.outWidth,B=s?y*h:y;return i==="channelsFirst"?p=[l,B,W,z,F]:i==="channelsLast"&&(p=[l,W,z,F,B]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:d,inWidth:f,inChannels:h,outDepth:W,outHeight:z,outWidth:F,outChannels:B,padInfo:L,strideDepth:b,strideHeight:C,strideWidth:S,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:O,effectiveFilterHeight:$,effectiveFilterWidth:A,dilationDepth:I,dilationHeight:T,dilationWidth:N,inShape:t,outShape:p,filterShape:e}}function Rre(t,e,n,r){r===void 0&&(r=1);var o=Cm(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function O2(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function uA(t){return typeof t=="number"?[t,t,t]:t}function Cm(t,e){return e<=1?t:t+(t-1)*(e-1)}function Ny(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function wg(t){var e=O2(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function ai(t,e){return wg(t)||wg(e)}function Z3(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function Ore(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=nr(t.shape),o=t.toFloat(),s=n.complex(o,r);return r.dispose(),o.dispose(),s}if(!VKe(t.dtype,e))return oe.makeTensorFromDataId(t.dataId,t.shape,e);if(t.dtype==="complex64"){var i=n.real(t);return s=i.cast(e),i.dispose(),s}if(e==="int32")return n.int(t);if(e==="bool"){var a=He(0,t.dtype);return s=n.notEqual(t,a),a.dispose(),s}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function lA(t,e){return oe.makeTensorFromDataId(t.dataId,e,t.dtype)}function Are(t,e,n){var r=(e-t)/(n-1),o=tb(n,"float32");o[0]=t;for(var s=1;s<o.length;s++)o[s]=o[s-1]+r;return Zr(o,"float32")}function cA(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function R6(t,e){return{real:t[2*e],imag:t[2*e+1]}}function yQe(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function xQe(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function bQe(t,e,n){var r=function(s,i,a){return function(u,l,c){for(var d=0,f=u.length,h=0,p=!1;d<f;){var m=c(l,u[h=d+(f-d>>>1)]);m>0?d=h+1:(f=h,p=!m)}return p?d:-d-1}(s,i,a||wQe)}(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function wQe(t,e){return t>e?1:t<e?-1:0}function eL(t,e,n,r,o){return $re(t,e,n,r,o,0).selectedIndices}function tL(t,e,n,r,o,s){var i=$re(t,e,n,r,o,s);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function $re(t,e,n,r,o,s,i,a){a===void 0&&(a=!1);for(var u=Array.from(e).map(function(b,C){return{score:b,boxIndex:C,suppressBeginIndex:0}}).filter(function(b){return b.score>o}).sort(O6),l=s>0?-.5/s:0,c=[],d=[];c.length<n&&u.length>0;){var f=u.pop(),h=f.score,p=f.boxIndex,m=f.suppressBeginIndex;if(h<o)break;for(var g=!1,v=c.length-1;v>=m;--v){var y=kQe(t,p,c[v]);if(y>=r){g=!0;break}if(f.score=f.score*CQe(r,l,y),f.score<=o)break}f.suppressBeginIndex=c.length,g||(f.score===h?(c.push(p),d.push(f.score)):f.score>o&&bQe(u,f,O6))}var x=c.length;return a&&(c.fill(0,x),d.fill(0,x)),{selectedIndices:Zr(c,"int32"),selectedScores:Zr(d,"float32"),numValidOutputs:He(x,"int32")}}function kQe(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-s)*(u-i),p=(d-l)*(f-c);if(h<=0||p<=0)return 0;var m=Math.max(s,l),g=Math.max(i,c),v=Math.min(a,d),y=Math.min(u,f),x=Math.max(v-m,0)*Math.max(y-g,0);return x/(h+p-x)}function CQe(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function O6(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function Mre(t,e,n){var r=new Array(t.rank).fill(0),o=t.shape.slice();return e.map(function(s){o[n]=s;var i=t.slice(r,o);return r[n]+=s,i})}function Pre(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=Pt(n,t.dtype);for(r=0;r<o.values.length;++r){for(var s=o.indexToLoc(r),i=new Array(t.rank),a=0;a<i.length;a++)i[a]=s[a]%t.shape[a];var u=t.locToIndex(i);o.values[r]=t.values[u]}return o.toTensor()}function Fre(t,e,n,r,o){for(var s=e[e.length-1],i=[t.length/s,s],a=i[0],u=i[1],l=P0(n,a*r),c=P0("int32",a*r),d=0;d<a;d++){for(var f=d*u,h=t.subarray(f,f+u),p=[],m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort(function(b,C){return C.value-b.value});var g=d*r,v=l.subarray(g,g+r),y=c.subarray(g,g+r);for(m=0;m<r;m++)v[m]=p[m].value,y[m]=p[m].index}var x=e.slice();return x[x.length-1]=r,[Ho(l,x,n),Ho(c,x,"int32")]}function nL(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var o=Pt(t,"int32"),s=Pt([n.length,t.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),a=r*t.length;s.values.set(i,a)}return s.toTensor()}var SQe=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(o,s){return"T"+s});var n=[];this.variableNames.forEach(function(o){n.push("float v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},EQe=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(o,s){return"T"+s});var n=[];this.variableNames.forEach(function(o){n.push("vec4 v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},_Qe=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,s=t.inSize,i=Math.ceil(s/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var a=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+a+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function Lre(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function Ys(t,e){return e===1?[t]:Lre(t,e)}function ds(){var t,e,n,r,o,s,i,a,u,l;return we().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",s="outputColor",i="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",s="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:s,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:u,defineRound:l}}function Yf(t,e,n){n===void 0&&(n="index");var r=Ku(e);return r.map(function(o,s){return"int "+t[s]+" = "+n+" / "+o+"; "+(s===r.length-1?"int "+t[s+1]+" = "+n+" - "+t[s]+" * "+o:"index -= "+t[s]+" * "+o)+";"}).join("")}function rL(t){var e=Ku(t).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var Bre=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function IQe(t,e,n,r){var o=[];t.forEach(function(h){var p=dt(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?o.push("uniform float "+h.name+(p>1?"["+p+"]":"")+";"):(o.push("uniform sampler2D "+h.name+";"),o.push("uniform int offset"+h.name+";"))});var s,i,a=o.join(`
`),u=t.map(function(h){return function(p,m,g){g===void 0&&(g=!1);var v="";v+=g?jre(p):Mp(p);var y=p.shapeInfo.logicalShape,x=m.logicalShape;return y.length<=x.length&&(v+=g?function(b,C){var S,E=b.name,I=E.charAt(0).toUpperCase()+E.slice(1),T="get"+I+"AtOutCoords",N=b.shapeInfo.logicalShape.length,O=C.logicalShape.length,$=sd(b.shapeInfo.logicalShape,C.logicalShape),A=Jn(O),P=O-N,L=["x","y","z","w","u","v"];S=N===0?"":O<2&&$.length>=1?"coords = 0;":$.map(function(te){return"coords."+L[te+P]+" = 0;"}).join(`
`);var W="";W=O<2&&N>0?"coords":b.shapeInfo.logicalShape.map(function(te,re){return"coords."+L[re+P]}).join(", ");var z="return outputValue;",F=dt(b.shapeInfo.logicalShape)===1,B=dt(C.logicalShape)===1;if(N!==1||F||B){if(F&&!B)z=O===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if($.length){var H=N-2,X=N-1;$.indexOf(H)>-1&&$.indexOf(X)>-1?z="return vec4(outputValue.x);":$.indexOf(H)>-1?z="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":$.indexOf(X)>-1&&(z="return vec4(outputValue.xx, outputValue.zz);")}}else z=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+T+`() {
      `+A+` coords = getOutputCoords();
      `+S+`
      vec4 outputValue = get`+I+"("+W+`);
      `+z+`
    }
  `}(p,m):function(b,C){var S=b.name,E=S.charAt(0).toUpperCase()+S.slice(1),I="get"+E+"AtOutCoords",T=C.texShape,N=b.shapeInfo.texShape,O=b.shapeInfo.logicalShape.length,$=C.logicalShape.length;if(!b.shapeInfo.isUniform&&O===$&&b.shapeInfo.flatOffset==null&&Do(N,T))return`
      float `+I+`() {
        return sampleTexture(`+S+`, resultUV);
      }
    `;var A,P=Jn($),L=sd(b.shapeInfo.logicalShape,C.logicalShape),W=$-O,z=["x","y","z","w","u","v"];A=O===0?"":$<2&&L.length>=1?"coords = 0;":L.map(function(B){return"coords."+z[B+W]+" = 0;"}).join(`
`);var F="";return F=$<2&&O>0?"coords":b.shapeInfo.logicalShape.map(function(B,H){return"coords."+z[H+W]}).join(", "),`
    float `+I+`() {
      `+P+` coords = getOutputCoords();
      `+A+`
      return get`+E+"("+F+`);
    }
  `}(p,m)),v}(h,e,r)}).join(`
`),l=e.texShape,c=ds(),d=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(c),f=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+TQe+`
    `+NQe+`
    `+DQe+`
  `}(c);return e.isPacked?(s=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(b,C){var S=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];return S[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return 2 * (resTexRC.x * `+S[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(b,C){var S=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];if(Do(b,C))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `;var E=Math.ceil(b[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=h,g=p,v=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],y=Math.ceil(m[2]/2),x=y*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      int b = index / `+x+`;
      index -= b * `+x+`;

      int r = 2 * (index / `+y+`);
      int c = imod(index, `+y+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(b,C){for(var S=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)],E=Math.ceil(b[b.length-1]/2),I=E*Math.ceil(b[b.length-2]/2),T=I,N="",O="b, r, c",$=2;$<b.length-1;$++)T*=b[b.length-$-1],N=`
      int b`+$+" = index / "+T+`;
      index -= b`+$+" * "+T+`;
    `+N,O="b"+$+", "+O;return`
    ivec`+b.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+N+`

      int b = index / `+I+`;
      index -= b * `+I+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+b.length+"("+O+`);
    }
  `}(h,p)}var m,g,v,y,x}(e.logicalShape,l),i=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(c)):(s=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(v,y){return y[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+y[1]+`.0);
      }
    `:y[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+y[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      return resTexRC.x * `+y[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(v,y){return Do(v,y)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+y[0]+", "+y[1]+`));
      }
    `:v[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:v[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      int r = index / `+v[1]+`;
      int c = index - r * `+v[1]+`;
      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=p,g=Yf(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(v,y){var x=Yf(["r","c","d","d2"],v);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      `+x+`
      return ivec4(r, c, d, d2);
    }
  `}(h,p);case 5:return function(v,y){var x=Yf(["r","c","d","d2","d3"],v);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+y[0]+`,
                             `+y[1]+`));

      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+x+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,p);case 6:return function(v,y){var x=Yf(["r","c","d","d2","d3","d4"],v);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+x+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,p);default:throw new Error(h.length+"-D output sampling is not yet supported")}var m,g}(e.logicalShape,l),i=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(f+=RQe),[f,d,i,a,s,u,n].join(`
`)}function Mp(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+o+"() {return "+r+";}";var s=n.shapeInfo.texShape,i=s[0],a=s[1];if(i===1&&a===1)return`
      float `+o+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],d=Cf(r);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+d+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+_p(n)+`
      }
    `;var s=n.shapeInfo.texShape,i=s[0],a=s[1];if(a===1&&i===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=Cf(r);return a===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+i+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:i===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+a+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+i+", "+a+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),i=n.shapeInfo.texShape;if(i!=null&&Do(r,i)){var a=i[0],u=i[1];return`
    float `+s+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+a+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var l=Mf(r),c=l.newShape,d=l.keptDims,f=c;if(f.length<r.length){var h=Pp(n,f);return`
      `+Mp(h)+`
      float `+s+`(int row, int col) {
        return `+s+"("+Fp(["row","col"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+s+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+_p(n)+`
      }
    `;var p=i[0],m=i[1],g=Cf(o);return m===1?`
    float `+s+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:p===1?`
    float `+s+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+s+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+p+", "+m+`, index);
    return sampleTexture(`+o+`, uv);
  }
`}(t);case 3:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[1]*r[2],a=r[2],u=Mf(r),l=u.newShape,c=u.keptDims,d=l;if(d.length<r.length){var f=Pp(n,d);return`
        `+Mp(f)+`
        float `+s+`(int row, int col, int depth) {
          return `+s+"("+Fp(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+s+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+i+", "+a+`, 1)));
        `+_p(n)+`
      }
    `;var h=n.shapeInfo.texShape,p=h[0],m=h[1],g=n.shapeInfo.flatOffset;if(m===i&&g==null)return`
        float `+s+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+a+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+p+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(m===a&&g==null)return`
    float `+s+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var v=Cf(o);return`
      float `+s+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+i+" + col * "+a+" + depth + "+v+`;
        vec2 uv = uvFromFlat(`+p+", "+m+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `}(t);case 4:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[3],a=r[2]*i,u=r[1]*a,l=Mf(r),c=l.newShape,d=l.keptDims;if(c.length<r.length){var f=Pp(n,c);return`
      `+Mp(f)+`
      float `+s+`(int row, int col, int depth, int depth2) {
        return `+s+"("+Fp(["row","col","depth","depth2"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+s+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+a+", "+i+`, 1)));
        `+_p(n)+`
      }
    `;var h=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,m=p[0],g=p[1];if(g===u&&h==null)return`
      float `+s+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+a+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(g===i&&h==null)return`
      float `+s+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var v=Cf(o);return`
    float `+s+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+a+` +
          depth * `+i+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+g+", index + "+v+`);
      return sampleTexture(`+o+`, uv);
    }
  `}(t);case 5:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[4],a=r[3]*i,u=r[2]*a,l=r[1]*u,c=Mf(r),d=c.newShape,f=c.keptDims;if(d.length<r.length){var h=Pp(n,d);return`
      `+Mp(h)+`
      float `+s+`(int row, int col, int depth, int depth2, int depth3) {
        return `+s+"("+Fp(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+s+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+a+", "+i+`)) +
          depth3;
        `+_p(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,g=m[0],v=m[1];if(v===l&&p==null)return`
      float `+s+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+a+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(v===i&&p==null)return`
      float `+s+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var y=Cf(o);return`
    float `+s+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+a+` +
          depth2 * `+i+" + depth3 + "+y+`;
      vec2 uv = uvFromFlat(`+g+", "+v+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(t);case 6:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),i=Mf(r),a=i.newShape,u=i.keptDims;if(a.length<r.length){var l=Pp(n,a);return`
      `+Mp(l)+`
      float `+s+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+s+"("+Fp(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],d=r[4]*c,f=r[3]*d,h=r[2]*f,p=r[1]*h;if(n.shapeInfo.isUniform)return`
      float `+s+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+h+", "+f+", "+d+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+_p(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,v=g[0],y=g[1];if(y===p&&m==null)return`
      float `+s+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+f+", "+d+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(y===c&&m==null)return`
      float `+s+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var x=Cf(o);return`
    float `+s+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+h+" + depth * "+f+` +
          depth2 * `+d+" + depth3 * "+c+" + depth4 + "+x+`;
      vec2 uv = uvFromFlat(`+v+", "+y+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function jre(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=ds(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(o){var s=o.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),a=o.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=ds();return`
    vec4 `+i+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+s+`, uv);
    }
  `}(t);case 2:return function(o){var s=o.shapeInfo.logicalShape,i=o.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,l=u[0],c=u[1],d=ds();if(u!=null&&Do(s,u))return`
      vec4 `+a+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+d.texture2D+"("+i+`, uv);
      }
    `;var f=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],h=Math.ceil(s[1]/2);return`
    vec4 `+a+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+f[0]+", "+f[1]+`, row, col);
      return `+d.texture2D+"("+i+`, uv);
    }
  `}(t);case 3:return function(o){var s=o.shapeInfo.logicalShape,i=o.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(s[0]===1){var c=s.slice(1),d=Pp(o,c);return`
        `+jre(d)+`
        vec4 `+a+`(int b, int row, int col) {
          return `+a+"("+Fp(["b","row","col"],[1,2])+`);
        }
      `}var f=l[0],h=l[1],p=Math.ceil(s[2]/2),m=p*Math.ceil(s[1]/2),g=ds();return`
    vec4 `+a+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+h+", "+m+", "+p+`, b, row, col);
      return `+g.texture2D+"("+i+`, uv);
    }
  `}(t);default:return function(o){for(var s=o.shapeInfo.logicalShape,i=s.length,a=o.name,u="get"+a.charAt(0).toUpperCase()+a.slice(1),l=o.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=c[0],f=c[1],h=Math.ceil(s[i-1]/2),p=h*Math.ceil(s[i-2]/2),m="int b, int row, int col",g="b * "+p+" + (row / 2) * "+h+" + (col / 2)",v=2;v<i-1;v++)m="int b"+v+", "+m,p*=s[i-v-1],g="b"+v+" * "+p+" + "+g;var y=ds();return`
    vec4 `+u+"("+m+`) {
      int index = `+g+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+d+`);
      return `+y.texture2D+"("+a+`, uv);
    }
  `}(t)}}var TQe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,NQe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,DQe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,RQe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Cf(t){return"offset"+t}function _p(t){var e=t.name,n=dt(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Jn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Pp(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Fp(t,e){return e.map(function(n){return t[n]}).join(", ")}var OQe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,G(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=t[t.length-1],s=Math.ceil(o/e);this.outputShape=t.slice(0,-1),s>1&&this.outputShape.push(s),r||this.variableNames.push("bestIndicesA");var i,a,u=this.outputShape,l=u.length,c=Jn(l),d=Ys("coords",l);if(s===1){var f=Jn(a=l+1);i=`
        `+f+" sourceLocR = "+f+"("+d.join()+`, 0);
        ++`+d[l-1]+`;
        `+f+" sourceLocG = "+f+"("+d.join()+`, 0);
        ++`+d[l-2]+`;
        `+f+" sourceLocA = "+f+"("+d.join()+`, 0);
        --`+d[l-1]+`;
        `+f+" sourceLocB = "+f+"("+d.join()+`, 0);
        --`+d[l-2]+";"}else a=l,i=`
        `+c+` sourceLocR = coords;
        ++`+d[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+d[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+d[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+d[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,a),p="."+h[a-1],m=h.map(function(I){return"int "+I}),g=Ys("sourceLocR",a-1).concat("inIdx.r"),v=Ys("sourceLocG",a-1).concat("inIdx.g"),y=Ys("sourceLocB",a-1).concat("inIdx.b"),x=Ys("sourceLocA",a-1).concat("inIdx.a"),b=n==="max"?"greaterThan":"lessThan",C=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+x.join()+")));",S=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+x.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+d[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+d[l-2]+" < "+(u[l-2]-1)+`;
        `+i+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+S+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+C+`
          vec4 candidate = `+S+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+b+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},AQe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,s=t.dilationHeight,i=t.dilationWidth,a=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=a-1-t.padInfo.top,c=u-1-t.padInfo.left,d=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
            wR += `+s+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+i+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},$Qe=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,s=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=c-1-t.padInfo.front,p=d-1-t.padInfo.top,m=f-1-t.padInfo.left,g=1/(e*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+d+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+s+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},MQe=function(t,e,n,r,o,s){this.outputShape=[],this.variableNames=["x","mean","variance"],en(t,e),en(t,n);var i="0.0";r!=null&&(en(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var a="1.0";o!=null&&(en(t,o),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+i+`;
        float scale = `+a+`;
        float inv = scale * inversesqrt(variance + float(`+s+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},PQe=function(t,e,n,r,o,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],en(t,e),en(t,n);var i="vec4(0.0)";r!=null&&(en(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var a="vec4(1.0)";o!=null&&(en(t,o),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+i+`;
        vec4 scale = `+a+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+s+`));

        setOutput((x - mean) * inv + offset);
      }
    `},FQe="return areal * breal - aimag * bimag;",LQe="return areal * bimag + aimag * breal;",A6=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=en(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},TN="return a + b;",NN="return a - b;",$6="return a * b;",Wre="return (a < 0.) ? b * a : a;",Rr=function(t,e,n){this.variableNames=["A","B"],this.outputShape=en(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},zre=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Tl=function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=en(e,n);var o=this.outputShape.length,s="";if(r)if(o===0||dt(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          `+Jn(o)+` coords = getOutputCoords();
        `,o===1)s+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var i=Ys("coords",o);s+=`
            bool nextRowOutOfBounds =
              (`+i[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+i[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+s+`

        setOutput(result);
      }
    `},BQe=function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,s){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(s,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(s,"maxVal")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t}(),jQe=function(){function t(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,s){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(s,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(s,"maxVal")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t}(),WQe=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},zQe=function(t){this.outputShape=[],this.outputShape=bg(t,1),this.variableNames=t.map(function(a,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var o=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var s=e.length,i=e[e.length-1];r.push("else setOutput(getT"+s+"(yR, yC-"+i+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},UQe=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=bg(t,e);var n=this.outputShape,r=n.length,o=Jn(r),s=Ys("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(g,v){return"T"+v});var a=new Array(t.length-1);a[0]=t[0][e];for(var u=1;u<a.length;u++)a[u]=a[u-1]+t[u][e];var l=i[e],c=i.slice(-2),d=i.join(),f="if ("+l+" < "+a[0]+`) {
        return getChannel(
            getT0(`+d+"), vec2("+c.join()+`));
        }`;for(u=1;u<a.length;u++){var h=a[u-1];f+=`
        if (`+l+" < "+a[u]+"  && "+l+" >= "+a[u-1]+`) {
          return getChannel(
            getT`+u+"("+Nw(i,l,h)+`),
            vec2(`+Nw(c,l,h)+`));
        }`}var p=a.length,m=a[a.length-1];f+=`
        return getChannel(
          getT`+p+"("+Nw(i,l,m)+`),
          vec2(`+Nw(c,l,m)+"));",this.userCode=`
      float getValue(`+i.map(function(g){return"int "+g})+`) {
        `+f+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+s+`), 0., 0., 0.);

        `+s[r-1]+" = "+s[r-1]+` + 1;
        if (`+s[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+s+`);
        }

        `+s[r-2]+" = "+s[r-2]+` + 1;
        if (`+s[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+s+`);
        }

        `+s[r-1]+" = "+s[r-1]+` - 1;
        if (`+s[r-2]+" < "+n[r-2]+` &&
            `+s[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+s+`);
        }
        setOutput(result);
      }
    `};function Nw(t,e,n){var r=t.indexOf(e);return t.map(function(o,s){return s===r?o+" - "+n:o}).join()}var VQe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,s=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+s+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},HQe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,s=t.dataFormat==="channelsLast",i=e-1-t.padInfo.top,a=n-1-t.padInfo.left,u=s?1:2,l=s?2:3,c=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+s+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},GQe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.padInfo.front,s=t.padInfo.top,i=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+o+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+s+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+i+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},YQe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,s=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+a+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+s+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},qQe=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+s+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},KQe=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,s=e-1-t.padInfo.top,i=n-1-t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+a+`; dm++) {
              int d2 = d1 * `+a+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},M6=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,i=t.strideHeight,a=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,f=4*Math.floor(t.inChannels/4),h=t.inChannels%4,p=t.dataFormat==="channelsLast",m=p?1:2,g=p?2:3,v=p?3:1,y="",x="";n&&(y=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,x="result = activation(result);");var b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+y+`

      const ivec2 strides = ivec2(`+i+", "+a+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+v+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+b+`
        `+x+`
        setOutput(result);
      }
    `},XQe=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,s=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,d=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+s+", "+i+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+a+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},P6=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,s=t.inWidth,i=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,p=t.outChannels/t.inChannels,m="",g="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,g="result = activation(result);");var v=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+s+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+v+`
        `+g+`
        setOutput(result);
      }
    `},F6=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,s=t.inWidth,i=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,p=h,m="int xR; int xC; int xCOffset;",g=0;g<f;g++)for(var v=0;v<h;v++)m+=`
          vec4 xTexelR`+g+"C"+2*v+` = vec4(0.);
          vec4 wR`+g+"C"+v+` = vec4(0.);
          vec4 xR`+g+"C"+v+" = vec4(0.);";for(g=0;g<f;g++)for(var y=0;y<p;y++){if(m+=`
          xR = xRCorner + `+g*c+`;
          xC = xCCorner + `+(v=2*y)*d+`;
        `,l===1){if(v<h&&(m+=a%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+s+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+s+`) {
                    xTexelR`+g+"C"+v+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+s+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+s+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+`.xy);
                } else {
                  xR`+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+s+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xR`+g+"C"+v+" = xTexelR"+g+"C"+v+`;
              `,v+1<h)){var x=a%2==0?ire(d):d;d%2==0&&a%2==1||d%2!=0&&a%2!=1?(m+=`
                  xCOffset = xC + `+a%2+" + "+x+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+s+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,d>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+s+`) {
                      xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+v+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+x+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+s+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+`;
                `}}else v<h&&(m+=`
              if(xR >= 0 && xR < `+o+`) {
            `,a%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+s+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+s+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
              `,v+1<h&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+s+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+s+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+s+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+`.xy);
              `,v+1<h&&(m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
                `)),m+="}");v<h&&(m+=`
            vec4 wTexelR`+g+"C"+v+" = getW("+g+", "+v+`, d1, q);
            wR`+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+`.xz);
          `,v+1<h&&(m+=`
              vec4 wTexelR`+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+`, d1, q);
              wR`+g+"C"+(v+1)+` =
                vec4(wTexelR`+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<f;g++)for(v=0;v<h;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var b="",C="";n&&(b=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,C="result = activation(result);");var S=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+S+`
        `+C+`
        setOutput(result);
      }
    `},QQe=function(t,e,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var s=t[0],i=t[1],a=t[2],u=t[3],l=e[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var f=r==="bilinear"?1:0,h=[i-1+".0",a-1+".0"],p=h[0],m=h[1],g=c>1?[""+(i-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=g[0],y=g[1],x=g[2],b=d>1?[""+(a-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],C=b[0],S=b[1],E=b[2];this.userCode=`
      const float height_ratio = float(`+v+`);
      const float width_ratio = float(`+C+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+s+`) {
          return;
        }

        float height_scale = `+y+`;
        float width_scale = `+S+`;

        float in_y = `+x+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},JQe=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],s=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Jn(r)+` coords = getOutputCoords();
        int end = `+L6(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+s+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+L6(r,"coords")+` = idx;
          val += getX(`+function(i,a){if(i===1)return""+a;if(i===2)return a+".x, "+a+".y";if(i===3)return a+".x, "+a+".y, "+a+".z";if(i===4)return a+".x, "+a+".y, "+a+".z, "+a+".w";throw Error("Cumulative sum for rank "+i+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function L6(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var ZQe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=L0.DENSE;var e=Ty(t),n=ds();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Yf(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},eJe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=L0.DENSE;var e=Ty(t),n=ds();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Yf(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},tJe=function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),nJe=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},rJe=function(t){this.variableNames=["A"],this.outTexUsage=bi.DOWNLOAD;var e=ds();this.outputShape=t,this.userCode=`
      `+Bre+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},oJe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=bi.DOWNLOAD;var e=ds();this.outputShape=t,this.userCode=`
      `+Bre+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},sJe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=ds(),o=e[0],s=e[1];this.outputShape=t;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode=`
      `+rL(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+s+`;
        int c = imod(flatIndex, `+s+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+s+".0, "+o+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+i+`, 0., 0., 0.);
      }
    `},iJe=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=ds(),o=e[0],s=e[1];this.outputShape=t;var i="",a="result";n&&(a="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;i+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+s+`;
              c = imod(flatIndex, `+s+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+s+".0, "+o+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+rL(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+i+`

        `+r.output+" = "+a+`;
      }
    `},aJe="return real * expR - imag * expI;",uJe="return real * expI + imag * expR;",B6=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,s=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+s+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},lJe=function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,e)}},t}(),cJe=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=Jn(this.rank),s=function(i,a){var u=i.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],d=0;d<i.length;d++)d===a?c.push("int(getIndices("+l[d]+"))"):c.push(""+l[d]);return c.join()}(t,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+s+`));
      }
    `},dJe=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Jn(e.length),o=Jn(n.length),s=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+s+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function fJe(t,e){var n=ds();return aXe(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function hJe(t,e){return fXe(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function pJe(t,e){return hXe(t,e,new Uint16Array([0,1,2,2,1,3]))}function rb(t,e,n,r,o,s,i){mXe(n,r);var a=pXe(t,e),u=t.TEXTURE_2D;return ft(t,e,function(){return t.bindTexture(u,a)}),ft(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),ft(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),ft(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),ft(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),ft(t,e,function(){return t.texImage2D(u,0,o,n,r,0,s,i,null)}),ft(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),a}function mJe(t,e,n,r,o){var s=P_(n,r);return rb(t,e,s[0],s[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function gJe(t,e,n,r,o){var s=P_(n,r);return rb(t,e,s[0],s[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function vJe(t,e,n,r,o){var s=P_(n,r);return rb(t,e,s[0],s[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function yJe(t,e,n,r,o){var s=nb(n,r);return rb(t,e,s[0],s[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function xJe(t,e,n,r,o){var s=nb(n,r);return rb(t,e,s[0],s[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function bJe(t,e,n,r){return ft(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),_6(t,e,n,"clipSpacePos",r,3,20,0)&&_6(t,e,n,"uv",r,2,20,12)}function wJe(t,e,n,r,o,s,i){var a,u,l;ft(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),s instanceof Uint8Array?(a=new Uint8Array(r*o*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(r*o*4),u=t.FLOAT,l=i.internalFormatPackedFloat),a.set(s),ft(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,o,0,t.RGBA,u,a)}),ft(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function kJe(t,e,n,r){ft(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?ft(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):ft(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),ft(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function CJe(t,e,n,r,o){var s=t.createBuffer();ft(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,s)});var i=16*n*r;return ft(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)}),ft(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),ft(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),s}function SJe(t,e,n){var r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function EJe(t,e,n,r,o){var s=P_(n,r),i=s[0],a=s[1],u=new Uint8Array(n*r*4);return ft(t,e,function(){return t.readPixels(0,0,i,a,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function _Je(t,e,n,r,o,s,i,a){var u=t,l=new Float32Array(function(c,d){var f=nb(c,d);return f[0]*f[1]*4}(s,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function IJe(t,e,n,r){var o=new Float32Array(n*r*4);return ft(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,o)}),o}var TJe=function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=we().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,nXe(n,e)):this.gl=dl(n);var r="WEBGL_color_buffer_float";if(we().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Ew(this.gl,this.debug,"OES_texture_float"),sa(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Ew(this.gl,this.debug,"OES_texture_half_float");else if(we().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),sa(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Ew(this.gl,this.debug,"EXT_color_buffer_half_float");else if(we().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",sa(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!sa(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=hJe(this.gl,this.debug),this.indexBuffer=pJe(this.gl,this.debug),this.framebuffer=gXe(this.gl,this.debug),this.textureConfig=Y3(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return we().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;ft(n,this.debug,function(){return n.finish()}),ft(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),ft(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),ft(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),ft(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),ft(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),mJe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),gJe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),vJe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),kJe(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,o){this.throwIfDisposed(),wJe(this.gl,this.debug,e,n,r,o,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),xJe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),yJe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(I6(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ft(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,function(){return EJe(o.gl,o.debug,n,r,o.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,o,s,i){return _Je(this.gl,e,0,0,0,s,i,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return SJe(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var o=CJe(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,o=this;if(we().getBool("WEBGL_FENCE_API_ENABLED")){var s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var a=s.clientWaitSync(i,0,0);return a===s.ALREADY_SIGNALED||a===s.CONDITION_SATISFIED},n=i}else we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,function(){return IJe(o.gl,o.debug,n,r)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=uXe(n,this.debug,e),o=fJe(n,this.debug),s=cXe(n,this.debug);return ft(n,this.debug,function(){return n.attachShader(s,o)}),ft(n,this.debug,function(){return n.attachShader(s,r)}),dXe(n,this.debug,s),this.debug&&SN(n,this.debug,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=bJe(n,this.debug,this.program,this.vertexBuffer)),s},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&ft(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&SN(this.gl,this.debug,this.program),ft(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?yXe(this.gl,this.debug,e,n):xXe(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),ft(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),bXe(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var o=nb(n,r),s=o[0],i=o[1];this.setOutputMatrixTextureDriver(e,s,i)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&SN(this.gl,this.debug,this.program),_w(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),ft(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),ft(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Ew(this.gl,this.debug,we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),s=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,s),s},t.prototype.endQuery=function(){if(we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return it(this,void 0,void 0,function(){var n=this;return at(this,function(r){switch(r.label){case 0:return[4,b6(function(){return n.disposed||n.isQueryAvailable(e,we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(e,o.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),s&&!this.disjoint}return s=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),s&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=function(r){for(var o=0;o<r.length&&r[o]();++o);return o-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||b6(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),EN(this.gl,this.debug,e,this.framebuffer),this.debug&&_w(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(EN(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&_w(this.gl)):I6(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var o=this.gl;EN(o,this.debug,e,this.framebuffer),this.debug&&_w(o),this.outputTexture=e,ft(o,this.debug,function(){return o.viewport(0,0,n,r)}),ft(o,this.debug,function(){return o.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,o){var s=this;this.throwIfDisposed(),ft(this.gl,this.debug,function(){return s.gl.scissor(e,n,r,o)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function j6(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var o=n.logicalShape,s=e[r],i=s.shape;if(!Do(o,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+i+" must match");if(!n.isUniform||!s.isUniform){var a=n.texShape,u=s.isUniform?null:s.texData.texShape;if(!Do(a,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+u+" must match")}})}var NJe=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,o=n.inChannels,s=n.strideWidth,i=n.strideHeight,a=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,f=a.left,h=a.top,p=o*r,m=ds(),g=d==="channelsLast",v=g?0:1,y=g?1:2,x="",b=0;b<=1;b++)for(var C=0;C<=1;C++)x+=`
          blockIndex = rc.y + `+C+`;
          pos = rc.x + `+b+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+i+" - "+h+`;
            d0 = offsetY + `+c+" * (pos / "+p+`);

            if(d0 < `+e[v]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+s+". - "+f+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+o+`.));

              if(d1 < `+e[y]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*b+C)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*b+C)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+x+`

        `+m.output+` = result;
      }
    `},DJe=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var s,i=e,a=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";s=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+i+"; j <= "+i+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+a+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+s+`;
        setOutput(val);
      }
    `},RJe=function(t,e,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},OJe=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var s,i=e,a=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";s=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+i+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+i+"; j <= "+i+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+a+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+s+`;
        setOutput(result);
      }
    `},AJe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,o=t.effectiveFilterHeight,s=t.effectiveFilterWidth,i=o-1-t.padInfo.top,a=s-1-t.padInfo.left,u=o*s-1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+s+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+s+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},$Je=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,i=t.dilationWidth,a=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=a-1-t.padInfo.front,d=u-1-t.padInfo.top,f=l-1-t.padInfo.left,h=a*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+d+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+a+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+s+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+i+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},DN=function(t,e,n,r,o,s,i){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),s===void 0&&(s=null),i===void 0&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var a=n?t[1]:t[2],u=Math.ceil(a/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",p="";s&&(h=i?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+s+`
        }`:`vec4 activation(vec4 x) {
          `+s+`
        }`,p="result = activation(result);");var m=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+d[0]+" * "+f[0]+`);
          result += (`+d[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+p+`

        setOutput(result);
      }
    `},MJe=function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t}(),PJe=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},FJe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=Ys("rc",e),r=Jn(e),o=function(a,u,l){if(a===1)return"rc > "+u[0];for(var c="",d=a-2;d<a;d++)c+=l[d]+" >= "+u[d],d<a-1&&(c+="||");return c}(e,t,n),s=function(a,u,l,c){if(a===1)return"";var d=c.slice(-2);return`
    int r = `+d[0]+`;
    int c = `+d[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(e,t[t.length-1],t[t.length-2],n),i=function(a,u){var l=a.length,c=function(d,f){for(var h=[],p=0;p<=1;p++)for(var m=0;m<=1;m++){for(var g=(p===0?"r":"rp1")+", "+(m===0?"c":"cp1"),v=2;v<d;v++)g=f[f.length-1-v]+","+g;h.push(g)}return h}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+a[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+s+`

            setOutput(vec4(`+i+`));
          }
        }
      `}},LJe=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,o=Jn(r),s=e.map(function(u){return u[0]}).join(","),i=e.map(function(u,l){return u[0]+t[l]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+s+`);
      `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+a+`));
        }
      }
    `:`
        int start = `+s+`;
        int end = `+i+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},BJe=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(g,v){return g[0]+t[v]+g[1]});for(var r=t.length,o=Jn(r),s=e.map(function(g){return g[0]}).join(","),i=e.map(function(g,v){return g[0]+t[v]}).join(","),a=Ys("rc",r),u=Ys("source",r),l=a[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",d=[o+" rc = outputLoc;",a[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+a[r-2]+` += 1;
       if(`+a[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+a[r-1]+` += 1;
         if(`+l+") {"],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,m=r===1?2:4;p<m;p++)h+=`
        `+d[p]+`
        if (`+f+`) {
          result[`+p+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+s+`);
      const `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},RN=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideHeight,s=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,d=t.padInfo.left;this.outputShape=t.outShape;var f=e==="avg",h="0.0";if(f||(h="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+s+`);
        const ivec2 pads = ivec2(`+c+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+i+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(p="avgValue / count");var m=4*Math.floor(r/4),g=r%4,v=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+c+", "+d+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+a+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              getValue(batch, xR, xC + 3 * `+a+`, d)
            );

            `+v+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(g===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              initializationValue
            );

            `+v+`
          }
        }
        setOutput(`+p+`);
      }
    `}},ON=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideDepth,s=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var g=e==="avg",v="0.0";if(g||(v="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+o+", "+s+", "+i+`);
        const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+a+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+d+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+d+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(y="avgValue / count");var x=4*Math.floor(r/4),b=r%4,C=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+o+", "+s+", "+i+`);
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float initializationValue = `+v+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+v+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+a+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+x+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+C+`
            }

            int xC = xCCorner + `+x+`;
            if (`+(b===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(b===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(b===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+C+`
            }
          }
          setOutput(`+y+`);
        }
      }
    `}},jJe=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,s=Math.ceil(o/n);this.outputShape=[r,s];var i="0.0",a="";e==="prod"?i="1.0":e==="min"?(i="1.0 / 1e-20",a="min"):e==="max"&&(i="-1.0 / 1e-20",a="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+a+`(values, minMaxValue);
      }
    `,f="vec4";e==="all"?(i="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):e==="any"&&(i="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var h="";o%n>0&&(h=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+i+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+i+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+u+`);
      }
    `},WJe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Yf(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+rL(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},zJe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],s=r[2],i=t.shape,a=i[1],u=i[2],l=[n&&a>1?o-1:o,n&&u>1?s-1:s],c=[n&&a>1?a-1:a,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,p=1/f,m=2*Math.ceil(h)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(s-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},UJe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],s=t[1],i=t[2],a=t[3];this.outputShape=[o,e,n,a];var u=[r&&e>1?s-1:s,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+s+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},VJe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=t[0],s=t[1],i=t[2],a=t[3];this.outputShape=[o,e,n,a];var u=[r&&e>1?s-1:s,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+s+".0, "+i+`.0,
                                     `+i+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(a-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},HJe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],s=r[2],i=t.shape,a=i[1],u=i[2],l=[n&&a>1?o-1:o,n&&u>1?s-1:s],c=[n&&a>1?a-1:a,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,p=1/f,m=2*Math.ceil(h)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+s+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},GJe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],s=t[1],i=t[2],a=t[3];this.outputShape=[o,e,n,a];var u=[r&&e>1?s-1:s,r&&n>1?i-1:i],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+s+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},YJe=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(s,i){return function(a){return e.indexOf(a)!==-1&&t[a]!==1?t[a]+" - coords["+a+"] - 1":"coords["+a+"]"}(i)}).join(","),o=Jn(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},qJe=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=Ys("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],s=r[n-2]+" + 1 < "+this.outputShape[n-2],i=Jn(n);function a(u){var l=t.map(function(c,d){return function(f,h){return e.indexOf(f)!==-1&&t[f]!==1?t[f]+" - "+h[f]+" - 1":""+h[f]}(d,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+i+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return a(u)}(r.slice())+`;
          if(`+o+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",a(u)}(r.slice())+`;
          }
          if(`+s+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",a(u)}(r.slice())+`;
            if(`+o+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",a(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},W6=function(t,e,n,r,o,s,i){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;var a=Jn(o.length),u=Jn(s.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var f="getUpdates("+d+")",h=e>1?"strides[j]":"strides";this.userCode=`
        `+a+" strides = "+a+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},KJe=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,s=t.numSegments,i=s*Math.ceil(o/n);this.outputShape=[r,i];var a=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";o%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var d="";o%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+s+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+s+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+a+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+a+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},XJe=function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var s=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],a=[],u=0;u<e.length;u++)a.push(""+s[u]),u<t&&i.push(""+s[u]);r=i.join(),o=a.join()}var l=Jn(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},QJe=function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=Jn(this.rank),o="uniform int start["+this.rank+"];",s=function(i){if(i===1)return"sourceLoc";if(i<=6)return AN.slice(0,i).map(function(a){return"sourceLoc."+a}).join(",");throw Error("Slicing for rank "+i+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(i,a){return"sourceLoc."+AN[a]+" = start["+a+"] + coords."+AN[a]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+s+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),AN=["x","y","z","w","u","v"],JJe=function(){function t(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=Jn(this.rank),r=Ys("coords",this.rank),o=Ys("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",i="getChannel(getSource("+o.join()+"), "+s+")",a=`
      result.x = `+i+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+i+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+i+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+i+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map(function(c,d){return"start["+d+"]"}).join()+");":e.map(function(c,d){return o[d]+" = "+r[d]+" + start["+d+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+a+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),ZJe=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=Jn(n.length),s=Jn(n.length),i="";if(r===1)i="coords * strides + begin";else{var a=0;i=n.map(function(u,l){return a++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(a-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+t+`);
      `+o+" strides = "+o+"("+e+`);

      void main() {
        `+s+` coords = getOutputCoords();
        setOutput(getX(`+i+`));
      }
    `},eZe=function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var o,s=z6(n,r),i=U6(e,s,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[i].shift();return this.usedTextures[i].push(a),a}return this.numUsedTextures++,this.log(),s===hi.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===hi.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===hi.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===hi.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===hi.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),o},t.prototype.releaseTexture=function(e,n,r,o){if(this.freeTextures!=null){var s=U6(n,z6(r,o),o);s in this.freeTextures||(this.freeTextures[s]=[]),this.freeTextures[s].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[s],a=i.indexOf(e);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(a,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(o){e.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function z6(t,e){if(t===bi.UPLOAD)return hi.PACKED_2X2_FLOAT32;if(t===bi.RENDER||t==null)return function(n){return we().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?hi.PACKED_2X2_FLOAT32:hi.UNPACKED_FLOAT32:n?hi.PACKED_2X2_FLOAT16:hi.UNPACKED_FLOAT16}(e);if(t===bi.DOWNLOAD||t===bi.PIXELS)return hi.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function U6(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var tZe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=Jn(this.rank),s=function(i){var a=i.length;if(a>5)throw Error("Tile for rank "+a+" is not yet supported");if(a===1)return"imod(resRC, "+i[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<i.length;c++)l.push("imod("+u[c]+", "+i[c]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+s+`));
      }
    `},nZe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=Jn(this.rank),s=function(i){var a=i.length;if(a>6)throw Error("Transpose for rank "+a+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(a),c=0;c<i.length;c++)l[i[c]]=u[c];return l.join()}(e);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+s+`));
    }
    `},rZe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Jn(this.rank),s=Lre("rc",this.rank),i=new Array(this.rank);for(r=0;r<e.length;r++)i[e[r]]=s[r];var a="vec2("+i.slice(-2).join()+")",u="++"+s[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+a+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+s[this.rank-1]+`;
      if(++`+s[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},oL=1.7580993408473768,sL=1.0507009873554805,zt=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},cu="if (isnan(x)) return x;",oZe="return x;",V6="return abs(x);",Ure=cu+`
  return (x < 0.0) ? 0.0 : x;
`,Vre=cu+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Hre="return (x >= 0.0) ? x : (exp(x) - 1.0);",sZe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+oL+`;
  float scale = `+sL+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,H6="return -x;",G6="return ceil(x);",Y6="return floor(x);",q6="return exp(x);",K6="return exp(x) - 1.0;",iZe=cu+`
  return sin(x);
`,aZe=cu+`
  return cos(x);
`,uZe=cu+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,lZe=cu+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,cZe=cu+`
  return atan(x);
`,dZe=cu+"return log(x + sqrt(x * x + 1.0));",fZe=cu+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,hZe=cu+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Dw="return x;",pZe="return x;",Gre=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Yre=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,qre=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Bv=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},mZe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=Ys("rc",e),r=Jn(e),o=function(a,u){if(a===1)return"rc";for(var l="",c=0;c<a;c++)l+=u[c],c<a-1&&(l+=",");return l}(e,n),s=n.slice(-2),i=e<=1?"rc":"vec2("+s.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+i+`));
      }
    `},Rw={};function Ow(t,e){if(e===void 0&&(e=!1),t==="linear")return e?pZe:oZe;if(t==="relu")return e?Gre:Ure;if(t==="elu")return e?qre:Hre;if(t==="relu6")return e?Yre:Vre;if(t==="prelu")return e?zre:Wre;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var gZe=600,vZe=function(t){function e(n){var r,o=t.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!we().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var s=dl(we().getNumber("WEBGL_VERSION"));o.binaryCache=((r=we().getNumber("WEBGL_VERSION"))in Rw||(Rw[r]={}),Rw[r]),o.gpgpu=new TJe(s),o.canvas=s.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=n,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=n.gl.canvas;return o.textureManager=new eZe(o.gpgpu),o.numMBBeforeWarning=we().global.screen==null?1024:we().global.screen.height*we().global.screen.width*window.devicePixelRatio*gZe/1024/1024,o.texData=new Nre(o,oe),o}return lu(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(n,r,o){if(we().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var s={};return this.texData.set(s,{shape:r,dtype:o,values:n,usage:bi.UPLOAD}),s},e.prototype.move=function(n,r,o,s){if(we().getBool("DEBUG")&&this.checkNumericalProblems(r),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:s,values:r,usage:bi.UPLOAD})},e.prototype.readSync=function(n){var r=this.texData.get(n),o=r.values,s=r.dtype,i=r.complexTensors,a=r.slice,u=r.shape,l=r.isPacked;if(a!=null){var c=void 0;c=l?new Bv(u,Dw):new zt(u,Dw);var d=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:s}],s),f=this.readSync(d.dataId);return this.disposeData(d.dataId),f}if(o!=null)return this.convertAndCacheOnCPU(n);if(s==="string")return o;var h,p,m=this.activeTimers!=null;return m&&(h=Eu()),s==="complex64"?p=cA(i.real.dataSync(),i.imag.dataSync()):p=this.getValuesFromTexture(n),m&&(this.downloadWaitMs+=Eu()-h),this.convertAndCacheOnCPU(n,p)},e.prototype.read=function(n){return it(this,void 0,void 0,function(){var r,o,s,i,a,u,l,c,d,f,h,p,m,g,v,y,x,b,C,S,E,I;return at(this,function(T){switch(T.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(N){return r.push(N)})];if(o=this.texData.get(n),s=o.values,i=o.shape,a=o.slice,u=o.dtype,l=o.complexTensors,c=o.isPacked,a!=null)return d=void 0,d=c?new Bv(i,Dw):new zt(i,Dw),f=this.runWebGLProgram(d,[{dataId:n,shape:i,dtype:u}],u),h=this.read(f.dataId),this.disposeData(f.dataId),[2,h];if(s!=null)return[2,this.convertAndCacheOnCPU(n)];if(!we().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&we().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&we().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),g=this.texData.get(m.dataId),p=(I=this.gpgpu).createBufferFromTexture.apply(I,[g.texture].concat(Ty(i)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:T.sent(),T.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return y=T.sent(),x=y[0],b=y[1],v=cA(x,b),[3,5];case 4:p==null?v=this.getValuesFromTexture(n):(C=dt(i),v=this.gpgpu.downloadFloat32MatrixFromBuffer(p,C)),T.label=5;case 5:return m!=null&&this.disposeData(m.dataId),S=this.convertAndCacheOnCPU(n,v),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(N){return N(S)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,S]}})})},e.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var o=n[r];if(!sXe(o))throw we().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(n){var r,o=this.texData.get(n),s=o.shape,i=o.dtype,a=o.isPacked,u=dt(s);if(we().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),d=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(Ty(s))).subarray(0,u);return this.disposeData(l.dataId),d}var f=we().getBool("WEBGL_PACK")&&a===!0,h=f?_N(s):s,p=f?new oJe(h):new rJe(h),m=this.runWebGLProgram(p,[{shape:h,dtype:i,dataId:n}],"float32"),g=this.texData.get(m.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,u);return this.disposeData(m.dataId),v},e.prototype.time=function(n){return it(this,void 0,void 0,function(){var r,o,s,i,a,u,l;return at(this,function(c){switch(c.label){case 0:return r=this.activeTimers,o=[],s=!1,this.programTimersStack==null?(this.programTimersStack=o,s=!0):this.activeTimers.push(o),this.activeTimers=o,n(),i=yg(this.activeTimers.map(function(d){return d.query})).filter(function(d){return d!=null}),a=yg(this.activeTimers.map(function(d){return d.name})).filter(function(d){return d!=null}),this.activeTimers=r,s&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return l=c.sent(),u.kernelMs=BKe(l),u.getExtraProfileInfo=function(){return l.map(function(d,f){return{name:a[f],ms:d}}).map(function(d){return d.name+": "+d.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Eu(),endMs:null}},e.prototype.endTimer=function(n){return we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=Eu(),n)},e.prototype.getQueryTime=function(n){return it(this,void 0,void 0,function(){var r;return at(this,function(o){return we().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},e.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},e.prototype.releaseGPUData=function(n){var r=this.texData.get(n),o=r.texture,s=r.dtype,i=r.texShape,a=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),o!=null&&(this.numBytesInGPU-=this.computeBytes(i,s),this.textureManager.releaseTexture(o,i,a,u)));var f=this.texData.get(n);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},e.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},e.prototype.getDataInfo=function(n){return this.texData.get(n)},e.prototype.getCPUBackend=function(){return we().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=oe.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(n,r){var o=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(s){return o.texData.get(s.dataId).texture==null&&s.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(n,r){var o=this.makeOutput(n.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:oe.keep(n.clone()),imag:oe.keep(r.clone())},o},e.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,o);if(dt(o)===0)return Ho([],o,n.dtype);var s=this.texData.get(n.dataId).isPacked,i=Ire(n.shape,r,o);if(s||!i){var a=we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JJe(o):new QJe(o),u=a.getCustomSetupFunc(r);return this.compileAndRun(a,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,o)},e.prototype.shallowSlice=function(n,r,o){var s=this.texData.get(n.dataId),i=this.makeOutput(o,n.dtype),a=this.texData.get(i.dataId);Object.assign(a,s),a.shape=o,a.dtype=n.dtype;var u=Tre(r,n.strides);s.slice&&(u+=s.slice.flatOffset),a.slice={flatOffset:u,origDataId:s.slice&&s.slice.origDataId||n.dataId};var l=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,l+1),i},e.prototype.stridedSlice=function(n,r,o,s){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,o,s);var i=J3(r,o,s);if(i.some(function(u){return u===0}))return Ho([],i);var a=new ZJe(r,s,i);return this.compileAndRun(a,[n])},e.prototype.reverse=function(n,r){var o=we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qJe(n.shape,r):new YJe(n.shape,r);return this.compileAndRun(o,[n])},e.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var o=n.map(function(h){return Qi(h)}),s=n.map(function(h){return Du(h)});return Uo(this.concat(o,r),this.concat(s,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>we().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(n.length/2),a=this.concat(n.slice(0,i),r),u=this.concat(n.slice(i),r);return this.concat([a,u],r)}if(we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new UQe(n.map(function(h){return h.shape}),r);return this.compileAndRun(l,n)}var c=bg(n.map(function(h){return h.shape}),r),d=n.map(function(h){return h.as2D(-1,dt(h.shape.slice(r)))}),f=new zQe(d.map(function(h){return h.shape}));return this.compileAndRun(f,d).reshape(c)},e.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(we().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,H6,n.dtype);var r=new zt(n.shape,H6);return this.compileAndRun(r,[n])},e.prototype.batchMatMul=function(n,r,o,s){var i=o?n.shape[2]:n.shape[1],a=s?r.shape[1]:r.shape[2],u=o?n.shape[1]:n.shape[2],l=n.shape[0];if((i===1||a===1)&&u>1e3){o&&(n=n.transpose([0,2,1])),s&&(r=r.transpose([0,2,1]));var c=a===1?n:n.as3D(l,u,1),d=a===1?2:1,f=a===1?r.as3D(l,1,u):r;return this.multiply(c,f).sum(d,!0)}var h=Vo(n.dtype,r.dtype),p=new DN(n.shape,[l,i,a],o,s);return this.compileAndRun(p,[n,r],h)},e.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,s=n.transposeA,i=n.transposeB,a=n.bias,u=n.activation,l=n.preluActivationWeights,c=s?r.shape[2]:r.shape[1],d=i?o.shape[1]:o.shape[2],f=r.shape[0],h=Vo(r.dtype,o.dtype),p=a!=null,m=l!=null,g=u?Ow(u,!0):null,v=new DN(r.shape,[f,c,d],s,i,p,g,m),y=[r,o];return a&&y.push(a),l&&y.push(l),this.compileAndRun(v,y,h)},e.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var o=this.texData.get(n.dataId),s=this.texData.get(r.dataId),i=new A6(FQe,n.shape,r.shape),a=new A6(LQe,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag),this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag)],l=this.compileAndRun(i,u),c=this.compileAndRun(a,u),d=this.complex(l,c);return l.dispose(),c.dispose(),d}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,$6,n.dtype);var f=new Rr($6,n.shape,r.shape);return this.compileAndRun(f,[n,r],n.dtype)},e.prototype.batchNormalization=function(n,r,o,s,i,a){var u=[n,r,o],l=null;a!=null&&(l=a.shape,u.push(a));var c=null;if(i!=null&&(c=i.shape,u.push(i)),we().getBool("WEBGL_PACK_NORMALIZATION")){var d=new PQe(n.shape,r.shape,o.shape,l,c,s);return this.compileAndRun(d,u)}var f=new MQe(n.shape,r.shape,o.shape,l,c,s);return this.compileAndRun(f,u)},e.prototype.localResponseNormalization4D=function(n,r,o,s,i){var a=we().getBool("WEBGL_PACK_NORMALIZATION")?new OJe(n.shape,r,o,s,i):new DJe(n.shape,r,o,s,i);return this.compileAndRun(a,[n])},e.prototype.LRNGrad=function(n,r,o,s,i,a,u){var l=new RJe(r.shape,s,i,a,u);return this.compileAndRun(l,[r,o,n])},e.prototype.tile=function(n,r){if(n.dtype==="string"){var o=this.readSync(n.dataId).map(function(i){return b2(i)});return Pre(Pt(n.shape,n.dtype,o),r)}var s=new tZe(n.shape,r);return this.compileAndRun(s,[n])},e.prototype.pad=function(n,r,o){var s=we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new BJe(n.shape,r,o):new LJe(n.shape,r,o);return this.compileAndRun(s,[n])},e.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var o=we().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rZe(n.shape,r):new nZe(n.shape,r);return this.compileAndRun(o,[n])},e.prototype.gather=function(n,r,o){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,o);var s=new cJe(n.shape,r.size,o);return this.compileAndRun(s,[n,r])},e.prototype.batchToSpaceND=function(n,r,o){G(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var s=r.reduce(function(d,f){return d*f}),i=_2(n.shape,r,s),a=I2(i.length,r.length),u=T2(n.shape,r,s),l=Cre(o,r.length),c=Sre(u,o,r.length);return n.reshape(i).transpose(a).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,o){G(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var s=r.reduce(function(f,h){return f*h}),i=[[0,0]];i.push.apply(i,o);for(var a=1+r.length;a<n.shape.length;++a)i.push([0,0]);var u=n.pad(i),l=_2(u.shape,r,s,!1),c=I2(l.length,r.length,!1),d=T2(u.shape,r,s,!1);return u.reshape(l).transpose(c).reshape(d)},e.prototype.reduce=function(n,r,o){var s=n.shape[0],i=n.shape[1],a=IN(i),u=new jJe({windowSize:a,inSize:i,batchSize:s},r),l=this.compileAndRun(u,[n],o);return l.shape[1]===1?l:this.reduce(l,r,o)},e.prototype.argReduce=function(n,r,o){o===void 0&&(o=null);var s=n.shape[0],i=n.shape[1];o!=null&&(s=o.shape[0],i=o.shape[1]);var a=IN(i),u=new _Qe({windowSize:a,inSize:i,batchSize:s},r,o==null),l=[n];o!=null&&l.push(o);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},e.prototype.argReducePacked=function(n,r,o){o===void 0&&(o=null);var s=o!=null?o.shape:n.shape,i=IN(s[s.length-1]),a=new OQe(s,i,r,o==null),u=o==null?[n]:[n,o],l=this.compileAndRun(a,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},e.prototype.sum=function(n,r){fi("sum",r,n.rank);var o=ss(n.shape,r),s=o[0],i=dt(o[1]),a=n.as2D(-1,i),u=xN(n.dtype);return this.reduce(a,"sum",u).reshape(s)},e.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var o=ss(n.shape,r),s=o[0],i=dt(o[1]),a=n.as2D(-1,i),u=xN(n.dtype);return this.reduce(a,"prod",u).reshape(s)},e.prototype.unsortedSegmentSum=function(n,r,o){var s=0,i=fl([s],n.rank),a=n;i!=null&&(a=n.transpose(i),s=hl(1,n.rank)[0]);var u=function(h,p,m){for(var g=[],v=h.length,y=0;y<v;y++)y!==p?g.push(h[y]):g.push(m);return g}(a.shape,s,o),l=dt([a.shape[s]]),c=a.as2D(-1,l),d=xN(n.dtype),f=this.segOpCompute(c,"unsortedSegmentSum",r,d,o).reshape(u);return i!=null&&(f=f.transpose(q3(i))),f},e.prototype.segOpCompute=function(n,r,o,s,i){var a=n.shape[0],u=n.shape[1],l=function(f,h){var p,m=!1;for(f<=_re?(p=f,m=!0):p=tA(f,Math.floor(Math.sqrt(f)));!m;)p>h||p===f?m=!0:p=tA(f,p+1);return p}(u,i),c=new KJe({windowSize:l,inSize:u,batchSize:a,numSegments:i}),d=this.compileAndRun(c,[n,o],s);return d.shape[1]===i?d:(o=E2(0,i).tile([u/l]),this.segOpCompute(d,r,o,s,i))},e.prototype.argMinMaxReduce=function(n,r,o){var s=[r];if(fi("arg"+o.charAt(0).toUpperCase()+o.slice(1),s,n.rank),!we().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var i=ss(n.shape,s),a=i[0],u=dt(i[1]),l=n.as2D(-1,u);return this.argReduce(l,o).reshape(a)}return this.argReducePacked(n,o)},e.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},e.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},e.prototype.cumsum=function(n,r,o,s){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var i=new JQe(n.shape,o,s);return this.compileAndRun(i,[n])},e.prototype.equal=function(n,r){if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var o=new Rr("return float(a == b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.notEqual=function(n,r){if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var o=new Rr("return float(a != b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var o=new Rr("return float(a < b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.lessEqual=function(n,r){if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new Rr("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new Rr("return float(a > b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.greaterEqual=function(n,r){if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new Rr("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.logicalNot=function(n){var r=new zt(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},e.prototype.logicalAnd=function(n,r){if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new Rr("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.logicalOr=function(n,r){if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new Rr("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.select=function(n,r,o){var s=new XJe(n.rank,r.shape,r.rank);return this.compileAndRun(s,[n,r,o],Vo(r.dtype,o.dtype))},e.prototype.where=function(n){C2("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return nL(n.shape,r)},e.prototype.topk=function(n,r,o){return Fre(n.dataSync(),n.shape,n.dtype,r)},e.prototype.min=function(n,r){fi("min",r,n.rank);var o=ss(n.shape,r),s=o[0],i=dt(o[1]),a=n.as2D(-1,i);return this.reduce(a,"min",a.dtype).reshape(s)},e.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var o=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Tl(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Rr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.mod=function(n,r){var o=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Tl(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Rr(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);fi("max",r,n.rank);var o=ss(n.shape,r),s=o[0],i=dt(o[1]),a=n.as2D(-1,i);return this.reduce(a,"max",a.dtype).reshape(s)},e.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var o=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Tl(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Rr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.all=function(n,r){fi("all",r,n.rank);var o=ss(n.shape,r),s=o[0],i=dt(o[1]),a=n.as2D(-1,i);return this.reduce(a,"all",a.dtype).reshape(s)},e.prototype.any=function(n,r){fi("any",r,n.rank);var o=ss(n.shape,r),s=o[0],i=dt(o[1]),a=n.as2D(-1,i);return this.reduce(a,"any",a.dtype).reshape(s)},e.prototype.realDivide=function(n,r){if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var o=new Rr(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"float32")},e.prototype.floorDiv=function(n,r){if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new Rr(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"int32")},e.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,TN);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var o=Vo(n.dtype,r.dtype);if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,TN,o);var s=new Rr(TN,n.shape,r.shape);return this.compileAndRun(s,[n,r],o)},e.prototype.packedUnaryOp=function(n,r,o){var s=new Bv(n.shape,r);return this.compileAndRun(s,[n],o)},e.prototype.packedBinaryOp=function(n,r,o,s,i){i===void 0&&(i=!1);var a=new Tl(o,n.shape,r.shape,i);return this.compileAndRun(a,[n,r],s)},e.prototype.complexSeparableBinaryOp=function(n,r,o){var s=this,i=this.texData.get(n.dataId),a=this.texData.get(r.dataId),u=[[i.complexTensors.real,a.complexTensors.real],[i.complexTensors.imag,a.complexTensors.imag]].map(function(f){var h=f[0],p=f[1],m=s.makeComplexComponentTensorInfo(n,h),g=s.makeComplexComponentTensorInfo(r,p),v=new Rr(o,n.shape,r.shape);return s.compileAndRun(v,[m,g],Vo(h.dtype,p.dtype))}),l=u[0],c=u[1],d=this.complex(l,c);return l.dispose(),c.dispose(),d},e.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},e.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>we().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),o=this.addN(n.slice(0,r)),s=this.addN(n.slice(r));return this.addN([o,s])}var i=n.map(function(l){return l.dtype}).reduce(function(l,c){return Vo(l,c)}),a=n.map(function(l){return l.shape}),u=we().getBool("WEBGL_PACK")?new EQe(n[0].shape,a):new SQe(n[0].shape,a);return this.compileAndRun(u,n,i)},e.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,NN);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var o=Vo(n.dtype,r.dtype);if(we().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,NN,n.dtype);var s=new Rr(NN,n.shape,r.shape);return this.compileAndRun(s,[n,r],o)},e.prototype.pow=function(n,r){var o=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Tl(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Rr(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),s=Vo(n.dtype,r.dtype);return this.compileAndRun(o,[n,r],s)},e.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(we().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,G6,n.dtype);var r=new zt(n.shape,G6);return this.compileAndRun(r,[n])},e.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(we().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Y6,n.dtype);var r=new zt(n.shape,Y6);return this.compileAndRun(r,[n])},e.prototype.sign=function(n){var r=new zt(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},e.prototype.isNaN=function(n){var r=new zt(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isInf=function(n){var r=new zt(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isFinite=function(n){var r=new zt(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.round=function(n){var r=new zt(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},e.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(we().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,q6,n.dtype);var r=new zt(n.shape,q6);return this.compileAndRun(r,[n])},e.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(we().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,K6,n.dtype);var r=new zt(n.shape,K6);return this.compileAndRun(r,[n])},e.prototype.softmax=function(n,r){var o=So([r],n.shape),s=this.max(n,o),i=ii(s.shape,o),a=this.subtract(n,s.reshape(i)),u=this.exp(a),l=this.sum(u,o).reshape(i);return this.realDivide(u,l)},e.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(we().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new zt(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},e.prototype.log1p=function(n){var r=new zt(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},e.prototype.sqrt=function(n){var r=new zt(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},e.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new zt(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},e.prototype.reciprocal=function(n){var r=new zt(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},e.prototype.relu=function(n){var r;return r=we().getBool("WEBGL_PACK")?new Bv(n.shape,Gre):new zt(n.shape,Ure),this.compileAndRun(r,[n])},e.prototype.relu6=function(n){var r;return r=we().getBool("WEBGL_PACK")?new Bv(n.shape,Yre):new zt(n.shape,Vre),this.compileAndRun(r,[n])},e.prototype.prelu=function(n,r){var o=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Tl(zre,n.shape,r.shape):new Rr(Wre,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.elu=function(n){if(we().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,qre,n.dtype);var r=new zt(n.shape,Hre);return this.compileAndRun(r,[n])},e.prototype.eluDer=function(n,r){var o=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Tl(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new Rr("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.selu=function(n){var r=new zt(n.shape,sZe);return this.compileAndRun(r,[n])},e.prototype.int=function(n){var r=new zt(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},e.prototype.clip=function(n,r,o){var s,i=(s=we().getBool("WEBGL_PACK_CLIP")?new jQe(n.shape):new BQe(n.shape)).getCustomSetupFunc(r,o);return this.compileAndRun(s,[n],null,i)},e.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(we().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,V6,n.dtype);var r=new zt(n.shape,V6);return this.compileAndRun(r,[n])},e.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),o=new WQe(n.shape),s=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(o,s)},e.prototype.sigmoid=function(n){var r=new zt(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},e.prototype.softplus=function(n){var r=new zt(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},e.prototype.sin=function(n){var r=new zt(n.shape,iZe);return this.compileAndRun(r,[n])},e.prototype.cos=function(n){var r=new zt(n.shape,aZe);return this.compileAndRun(r,[n])},e.prototype.tan=function(n){var r=new zt(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},e.prototype.asin=function(n){var r=new zt(n.shape,uZe);return this.compileAndRun(r,[n])},e.prototype.acos=function(n){var r=new zt(n.shape,lZe);return this.compileAndRun(r,[n])},e.prototype.atan=function(n){var r=new zt(n.shape,cZe);return this.compileAndRun(r,[n])},e.prototype.atan2=function(n,r){var o=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Tl(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Rr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.sinh=function(n){var r=new zt(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.cosh=function(n){var r=new zt(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.tanh=function(n){var r=new zt(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},e.prototype.asinh=function(n){var r=new zt(n.shape,dZe);return this.compileAndRun(r,[n])},e.prototype.acosh=function(n){var r=new zt(n.shape,fZe);return this.compileAndRun(r,[n])},e.prototype.atanh=function(n){var r=new zt(n.shape,hZe);return this.compileAndRun(r,[n])},e.prototype.erf=function(n){var r=new zt(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},e.prototype.step=function(n,r){var o=new zt(n.shape,function(s){return s===void 0&&(s=0),cu+`
    return x > 0.0 ? 1.0 : float(`+s+`);
  `}(r));return this.compileAndRun(o,[n])},e.prototype.conv2dByMatMul=function(n,r,o,s,i,a){var u=n.shape,l=this.texData.get(n.dataId),c=o.inChannels,d=u[0]*u[1]*u[2],f=o.outChannels,h=o.dataFormat==="channelsLast",p=(d===1||f===1)&&c>1e3,m=u[2]%2!=0&&!!l.isPacked;if(p||!we().getBool("WEBGL_LAZILY_UNPACK")||!we().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var g=h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],v=this.reshape(n,[1,g,o.inChannels]),y=this.reshape(r,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:y,transposeA:!1,transposeB:!1,bias:s,activation:i,preluActivationWeights:a}),o.outShape)}var x=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),b={dataId:n.dataId,shape:[1,x,o.inChannels],dtype:n.dtype},C=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,G(Tw(l.shape,b.shape),function(){return"packed reshape "+l.shape+" to "+b.shape+" isn't free"});var S=this.reshape(r,[1,o.inChannels,o.outChannels]),E=this.fusedBatchMatMul({a:b,b:S,transposeA:!1,transposeB:!1,bias:s,activation:i,preluActivationWeights:a}),I=this.texData.get(E.dataId);return G(I.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=C,I.shape=o.outShape,oe.makeTensorFromDataId(E.dataId,o.outShape,E.dtype)},e.prototype.conv2dWithIm2Row=function(n,r,o,s,i,a){var u=o.filterWidth,l=o.filterHeight,c=o.inChannels,d=o.outWidth,f=o.outHeight,h=o.dataFormat==="channelsLast",p=u*l*c,m=f*d,g=[p,m],v=n.squeeze([0]),y=r.reshape([1,p,-1]),x=new NJe(g,v.shape,o),b=this.compileAndRun(x,[v]).reshape([1,g[0],g[1]]),C=s!=null,S=a!=null,E=i?Ow(i,!0):null,I=new DN(b.shape,[1,m,o.outChannels],!0,!1,C,E,S),T=[b,y];s&&T.push(s),S&&T.push(a);var N=this.compileAndRun(I,T);return h?N.reshape([1,f,d,o.outChannels]):N.reshape([1,o.outChannels,f,d])},e.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,s=n.convInfo,i=n.bias,a=n.activation,u=n.preluActivationWeights;if(s.filterHeight===1&&s.filterWidth===1&&s.dilationHeight===1&&s.dilationWidth===1&&s.strideHeight===1&&s.strideWidth===1&&(s.padInfo.type==="SAME"||s.padInfo.type==="VALID"))return this.conv2dByMatMul(r,o,s,i,a,u);if(we().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,o,s,i,a,u);var l=i!=null,c=u!=null,d=a?Ow(a,!1):null,f=new M6(s,l,d,c),h=[r,o];return i&&h.push(i),u&&h.push(u),this.compileAndRun(f,h)},e.prototype.conv2d=function(n,r,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,o);if(we().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,o);var s=new M6(o);return this.compileAndRun(s,[n,r])},e.prototype.conv2dDerInput=function(n,r,o){var s=new HQe(o);return this.compileAndRun(s,[n,r])},e.prototype.conv2dDerFilter=function(n,r,o){var s=new VQe(o);return this.compileAndRun(s,[n,r])},e.prototype.fusedDepthwiseConv2D=function(n){var r,o=n.input,s=n.filter,i=n.convInfo,a=n.bias,u=n.activation,l=n.preluActivationWeights,c=we().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,d=u?Ow(u,c):null,f=[o,s],h=a!=null,p=l!=null;return h&&f.push(a),p&&f.push(l),c?(r=new F6(i,h,d,p),this.compileAndRun(r,f)):(r=new P6(i,h,d,p),this.compileAndRun(r,f))},e.prototype.depthwiseConv2D=function(n,r,o){var s;return we().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(s=new F6(o),this.compileAndRun(s,[n,r])):(s=new P6(o),this.compileAndRun(s,[n,r]))},e.prototype.depthwiseConv2DDerInput=function(n,r,o){var s=new KQe(o);return this.compileAndRun(s,[n,r])},e.prototype.depthwiseConv2DDerFilter=function(n,r,o){var s=new qQe(o);return this.compileAndRun(s,[n,r])},e.prototype.conv3d=function(n,r,o){var s=new XQe(o);return this.compileAndRun(s,[n,r])},e.prototype.conv3dDerInput=function(n,r,o){var s=new YQe(o);return this.compileAndRun(s,[n,r])},e.prototype.conv3dDerFilter=function(n,r,o){var s=new GQe(o);return this.compileAndRun(s,[n,r])},e.prototype.maxPool=function(n,r){var o=new RN(r,"max",!1);return this.compileAndRun(o,[n])},e.prototype.avgPool=function(n,r){var o=new RN(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.maxPoolBackprop=function(n,r,o,s){var i=new RN(s,"max",!0),a=this.compileAndRun(i,[r]),u=new AJe(s),l=this.compileAndRun(u,[n,a],r.dtype);return a.dispose(),l},e.prototype.avgPoolBackprop=function(n,r,o){var s=new AQe(o);return this.compileAndRun(s,[n],r.dtype)},e.prototype.cast=function(n,r){return Ore(n,r,this)},e.prototype.unstack=function(n,r){for(var o=n.shape[r],s=new Array(n.rank-1),i=0,a=0;a<n.rank;a++)a!==r&&(s[i++]=n.shape[a]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(o);for(a=0;a<c.length;a++)u[r]=a,c[a]=this.slice(n,u,l).reshape(s);return c},e.prototype.avgPool3d=function(n,r){var o=new ON(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.avgPool3dBackprop=function(n,r,o){var s=new $Qe(o);return this.compileAndRun(s,[n],r.dtype)},e.prototype.maxPool3d=function(n,r){var o=new ON(r,"max",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.maxPool3dBackprop=function(n,r,o,s){var i=new ON(s,"max",!0),a=this.compileAndRun(i,[r]),u=new $Je(s),l=this.compileAndRun(u,[n,a],r.dtype);return a.dispose(),l},e.prototype.reshape=function(n,r){var o=this.texData.get(n.dataId);if(o.isPacked&&!Tw(n.shape,r)&&(o.texture===null||!Tw(o.shape,r))){var s=this.packedReshape(n,r);return oe.makeTensorFromDataId(s.dataId,s.shape,s.dtype)}return lA(n,r)},e.prototype.resizeBilinear=function(n,r,o,s){var i=we().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new VJe(n.shape,r,o,s):new UJe(n.shape,r,o,s);return this.compileAndRun(i,[n],"float32")},e.prototype.resizeBilinearBackprop=function(n,r,o){var s=new zJe(n,r,o);return this.compileAndRun(s,[n])},e.prototype.resizeNearestNeighbor=function(n,r,o,s){var i=new GJe(n.shape,r,o,s);return this.compileAndRun(i,[n])},e.prototype.resizeNearestNeighborBackprop=function(n,r,o){var s=new HJe(n,r,o);return this.compileAndRun(s,[n])},e.prototype.multinomial=function(n,r,o,s){var i=r?n:Cc(n),a=i.shape[0],u=i.shape[1],l=new MJe(a,u,o),c=l.getCustomSetupFunc(s);return this.compileAndRun(l,[i],"int32",c)},e.prototype.oneHot=function(n,r,o,s){var i=new PJe(n.size,r,o,s);return this.compileAndRun(i,[n])},e.prototype.diag=function(n){var r=new nJe(n.size);return this.compileAndRun(r,[n])},e.prototype.nonMaxSuppression=function(n,r,o,s,i){return C2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),eL(n.dataSync(),r.dataSync(),o,s,i)},e.prototype.cropAndResize=function(n,r,o,s,i,a){var u=new QQe(n.shape,r.shape,s,i,a);return this.compileAndRun(u,[n,r,o],"float32")},e.prototype.depthToSpace=function(n,r,o){G(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var s=n.shape[0],i=o==="NHWC"?n.shape[1]:n.shape[2],a=o==="NHWC"?n.shape[2]:n.shape[3],u=o==="NHWC"?n.shape[3]:n.shape[1],l=i*r,c=a*r,d=u/(r*r),f=new tJe(o==="NHWC"?[s,l,c,d]:[s,d,l,c],r,o);return this.compileAndRun(f,[n])},e.prototype.split=function(n,r,o){return Mre(n,r,o)},e.prototype.scatterND=function(n,r,o){var s=N2(0,n,o),i=s.sliceRank,a=s.numUpdates,u=s.sliceSize,l=s.strides,c=s.outputSize,d=[c/u,u],f=n.reshape([a,i]),h=r.reshape([a,u]);if(c===0)return lA(Ho([]),o);var p=He(0),m=new W6(a,i,f.rank,h.rank,l,d);return this.compileAndRun(m,[h,f,p]).reshape(o)},e.prototype.sparseToDense=function(n,r,o,s){var i=N2(0,n,o),a=i.sliceRank,u=i.numUpdates,l=i.strides,c=i.outputSize,d=new W6(u,a,n.rank,r.rank,l,[c,1]);return this.compileAndRun(d,[r,n,s]).reshape(o)},e.prototype.fft=function(n){return this.fftImpl(n,!1)},e.prototype.ifft=function(n){return this.fftImpl(n,!0)},e.prototype.fftImpl=function(n,r){var o=this.texData.get(n.dataId),s=new B6(aJe,n.shape,r),i=new B6(uJe,n.shape,r),a=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag)],u=this.compileAndRun(s,a),l=this.compileAndRun(i,a),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},e.prototype.gatherND=function(n,r){var o=r.shape,s=o[o.length-1],i=Ere(n,r),a=i[0],u=i[1],l=i[2],c=i[3],d=r.reshape([u,s]),f=n.reshape([n.size/l,l]),h=new dJe(s,c,[u,l]);return this.compileAndRun(h,[f,d]).reshape(a)},e.prototype.fill=function(n,r,o){if((o=o||eb(r))==="string"){var s=x2(o,dt(n));return s.fill(r),oe.makeTensor(s,n,o,this)}var i=new lJe(n,r),a=i.getCustomSetupFunc(r);return this.compileAndRun(i,[],o,a)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},e.prototype.linspace=function(n,r,o){return Are(n,r,o)},e.prototype.makeTensorInfo=function(n,r){var o=this.write(null,n,r);return this.texData.get(o).usage=null,{dataId:o,shape:n,dtype:r}},e.prototype.makeOutput=function(n,r){var o=this.makeTensorInfo(n,r).dataId;return oe.makeTensorFromDataId(o,n,r,this)},e.prototype.unpackTensor=function(n){var r=new mZe(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},e.prototype.packTensor=function(n){var r=new FJe(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},e.prototype.packedReshape=function(n,r){var o=[w2(n.shape)].concat(k2(n.shape)),s={dtype:n.dtype,shape:o,dataId:n.dataId},i=[w2(r)].concat(k2(r)),a=new WJe(i,o),u=this.runWebGLProgram(a,[s],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(n){var r,o=this.texData.get(n),s=o.isPacked,i=o.shape,a=o.dtype,u=_N(i);return r=s?new eJe(u):new ZQe(u),{dtype:a,shape:i,dataId:this.runWebGLProgram(r,[{shape:u,dtype:a,dataId:n}],a,null,!0).dataId}},e.prototype.runWebGLProgram=function(n,r,o,s,i){var a=this;i===void 0&&(i=!1);var u=this.makeTensorInfo(n.outputShape,o),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===L0.DENSE){var c=Ty(n.outputShape);l.texShape=c.map(function(x){return 2*x})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),dt(u.shape)===0)return l.values=P0(u.dtype,0),u;var d=[],f=r.map(function(x){if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var b=a.texData.get(x.dataId);if(b.texture==null){if(!n.packedInputs&&dt(x.shape)<=we().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:b.values};n.packedInputs&&(b.isPacked=!0,b.shape=x.shape)}else if(!!b.isPacked!=!!n.packedInputs)x=b.isPacked?a.unpackTensor(x):a.packTensor(x),d.push(x),b=a.texData.get(x.dataId);else if(b.isPacked&&!Tw(b.shape,x.shape)){var C=x,S=x.shape;x.shape=b.shape,x=a.packedReshape(x,S),d.push(x),b=a.texData.get(x.dataId),C.shape=S}return a.uploadToGPU(x.dataId),{shape:x.shape,texData:b,isUniform:!1}});this.uploadToGPU(u.dataId);var h,p={shape:u.shape,texData:l,isUniform:!1},m=function(x,b,C){var S="";b.concat(C).forEach(function(T){var N=T.texData!=null&&T.texData.slice!=null&&T.texData.slice.flatOffset>0,O=T.isUniform?"uniform":T.texData.texShape;S+=T.shape+"_"+O+"_"+N});var E=x.userCode,I=x.constructor.name;return I+="_"+S+"_"+E}(n,f,p),g=this.getAndSaveBinary(m,function(){return function(x,b,C,S){var E=b.userCode,I=C.map(function(F,B){var H={logicalShape:F.shape,texShape:F.isUniform?null:F.texData.texShape,isUniform:F.isUniform,isPacked:!F.isUniform&&F.texData.isPacked,flatOffset:null};return F.texData!=null&&F.texData.slice!=null&&F.texData.slice.flatOffset>0&&(H.flatOffset=F.texData.slice.flatOffset),{name:b.variableNames[B],shapeInfo:H}}),T=I.map(function(F){return F.shapeInfo}),N={logicalShape:S.shape,texShape:S.texData.texShape,isUniform:!1,isPacked:S.texData.isPacked,flatOffset:null},O=IQe(I,N,E,b.packedInputs),$=x.createProgram(O),A=null,P=x.getUniformLocation($,"NAN",!1);we().getNumber("WEBGL_VERSION")===1&&(A=x.getUniformLocation($,"INFINITY",!1));for(var L={},W=0;W<b.variableNames.length;W++){var z=b.variableNames[W];L[z]=x.getUniformLocation($,z,!1),L["offset"+z]=x.getUniformLocation($,"offset"+z,!1)}return{program:b,source:O,webGLProgram:$,uniformLocations:L,inShapeInfos:T,outShapeInfo:N,infLoc:A,nanLoc:P}}(a.gpgpu,n,f,p)}),v=this.activeTimers!=null;if(v&&(h=this.startTimer()),function(x,b,C,S,E){j6(b.inShapeInfos,C),j6([b.outShapeInfo],[S]);var I=S.texData.texture,T=S.texData.texShape;S.texData.isPacked?x.setOutputPackedMatrixTexture(I,T[0],T[1]):x.setOutputMatrixTexture(I,T[0],T[1]),x.setProgram(b.webGLProgram),we().getNumber("WEBGL_VERSION")===1&&b.infLoc!==null&&x.gl.uniform1f(b.infLoc,1/0),b.nanLoc!==null&&x.gl.uniform1f(b.nanLoc,NaN),C.forEach(function(N,O){var $=b.program.variableNames[O],A=b.uniformLocations[$],P=b.uniformLocations["offset"+$];if(A!=null)if(N.isUniform)if(dt(N.shape)<2)x.gl.uniform1f(A,N.uniformValues[0]);else{var L=N.uniformValues;L instanceof Float32Array||(L=new Float32Array(L)),x.gl.uniform1fv(A,L)}else N.texData.slice!=null&&P!=null&&x.gl.uniform1i(P,N.texData.slice.flatOffset),x.setInputMatrixTexture(N.texData.texture,A,O)}),E!=null&&E(x,b.webGLProgram),x.executeProgram()}(this.gpgpu,g,f,p,s),d.forEach(function(x){return a.disposeData(x.dataId)}),v&&(h=this.endTimer(h),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(h)})),!we().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){var y=this.unpackTensor(u);return this.disposeData(u.dataId),y}return u},e.prototype.compileAndRun=function(n,r,o,s,i){i===void 0&&(i=!1),o=o||r[0].dtype;var a=this.runWebGLProgram(n,r,o,s,i);return oe.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},e.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var n=this;this.disposed||(we().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Je(function(){if(!we().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=we().getBool("DEBUG");we().set("DEBUG",!1);var o=n.abs(He(1e-8)).dataSync()[0];if(we().set("DEBUG",r),o>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(n){var r,o=this.texData.get(n),s=o.shape,i=o.dtype,a=o.values,u=o.texture,l=o.usage,c=o.isPacked;if(u==null){var d,f=this.activeTimers!=null;f&&(d=Eu());var h=o.texShape;if(h==null&&(h=CXe(s,c),o.texShape=h),a!=null){var p=_N(s),m=void 0,g=h[1],v=h[0],y=a instanceof Uint8Array;c?(g=(r=nb(h[0],h[1]))[0],v=r[1],m=new iJe(p,[v,g],y)):m=new sJe(p,[v,g],y);var x=this.makeTensorInfo([v,g],i);this.texData.get(x.dataId).usage=y?bi.PIXELS:bi.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),g,v,a);var b=this.runWebGLProgram(m,[x],i,null,!0),C=this.texData.get(b.dataId);o.texture=C.texture,o.texShape=C.texShape,o.isPacked=C.isPacked,o.usage=C.usage,this.disposeData(x.dataId),this.texData.delete(b.dataId),o.values=null,f&&(this.uploadWaitMs+=Eu()-d)}else{var S=this.acquireTexture(h,l,i,c);o.texture=S}}},e.prototype.convertAndCacheOnCPU=function(n,r){var o=this.texData.get(n),s=o.dtype;return this.releaseGPUData(n),r!=null&&(o.values=function(i,a){if(a==="float32"||a==="complex64")return i;if(a==="int32"||a==="bool"){for(var u=a==="int32"?new Int32Array(i.length):new Uint8Array(i.length),l=0;l<u.length;++l)u[l]=Math.round(i[l]);return u}throw new Error("Unknown dtype "+a)}(r,s)),o.values},e.prototype.acquireTexture=function(n,r,o,s){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,s)},e.prototype.computeBytes=function(n,r){return n[0]*n[1]*are(r)},e}(Dre);pre()&&oe.registerBackend("webgl",function(){return new vZe},2);var yZe=Z({square_:function(t){var e=V(t,"x","square"),n=[e];return oe.runKernelFunc(function(r,o){return o([e]),r.square(e)},{x:e},null,"Square",{},n,[])}}),j0="SquaredDifference",Kre=Z({squaredDifference_:function(t,e){var n,r=V(t,"a","squaredDifference"),o=V(e,"b","squaredDifference");n=Dr(r,o),r=n[0],o=n[1],en(r.shape,o.shape);var s={a:r,b:o},i=[r,o];return oe.runKernelFunc(function(a,u){var l=a.squaredDifference(r,o);return u([r,o]),l},s,function(a,u){var l=u[0],c=u[1],d=He(2);return{a:function(){return a.mul(l.sub(c).mul(d))},b:function(){return a.mul(c.sub(l).mul(d))}}},j0,{},i,[])}}),xZe=Z({abs_:function(t){var e=V(t,"x","abs");return e.dtype==="complex64"?oe.runKernelFunc(function(n){return n.complexAbs(e)},{$x:e}):oe.runKernelFunc(function(n,r){var o=n.abs(e);return r([e]),o},{x:e},function(n,r){var o=r[0];return{x:function(){return n.mul(o.toFloat().step(-1))}}},"Abs")}}),bZe=Z({acos_:function(t){var e=V(t,"x","acos");return oe.runKernelFunc(function(n,r){var o=n.acos(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(He(1).sub(o.toFloat().square()).sqrt()).neg()}}})}}),wZe=Z({acosh_:function(t){var e=V(t,"x","acosh");return oe.runKernelFunc(function(n,r){var o=n.acosh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}})}}),kZe=Z({asin_:function(t){var e=V(t,"x","asin");return oe.runKernelFunc(function(n,r){var o=n.asin(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(He(1).sub(o.toFloat().square()).sqrt())}}})}}),CZe=Z({asinh_:function(t){var e=V(t,"x","asinh");return oe.runKernelFunc(function(n,r){var o=n.asinh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(He(1).add(o.toFloat().square()).sqrt())}}})}}),SZe=Z({atan_:function(t){var e=V(t,"x","atan");return oe.runKernelFunc(function(n,r){var o=n.atan(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}})}}),EZe=Z({atanh_:function(t){var e=V(t,"x","atanh");return oe.runKernelFunc(function(n,r){var o=n.atanh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(He(1).sub(o.toFloat().square()))}}})}}),_Ze=Z({ceil_:function(t){var e=V(t,"x","ceil");return oe.runKernelFunc(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return gn(n)}}})}}),iL=Z({clipByValue_:function(t,e,n){var r=V(t,"x","clipByValue");G(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."});var o=[r],s={min:e,max:n};return oe.runKernelFunc(function(i,a){var u=i.clip(r,e,n);return a([r]),u},{x:r},function(i,a){var u=a[0];return{x:function(){return i.where(u.greaterEqual(e).logicalAnd(u.lessEqual(n)),gn(i))}}},"ClipByValue",s,o)}}),IZe=Z({cos_:function(t){var e=V(t,"x","cos"),n=[e];return oe.runKernelFunc(function(r,o){var s=r.cos(e);return o([e]),s},{x:e},function(r,o){var s=o[0];return{x:function(){return s.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),TZe=Z({cosh_:function(t){var e=V(t,"x","cosh");return oe.runKernelFunc(function(n,r){var o=n.cosh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}})}}),NZe=Z({erf_:function(t){var e=V(t,"x","erf");return G(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),oe.runKernelFunc(function(n,r){var o=n.erf(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),dA=Z({exp_:function(t){var e=V(t,"x","exp");return oe.runKernelFunc(function(n,r){var o=n.exp(e);return r([o]),o},{x:e},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),DZe=Z({expm1_:function(t){var e=V(t,"x","expm1");return oe.runKernelFunc(function(n,r){var o=n.expm1(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}})}}),RZe=Z({floor_:function(t){var e=V(t,"x","floor");return oe.runKernelFunc(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return gn(n)}}})}}),OZe=Z({log_:function(t){var e=V(t,"x","log"),n=[e];return oe.runKernelFunc(function(r,o){var s=r.log(e);return o([e]),s},{x:e},function(r,o){var s=o[0];return{x:function(){return r.div(s.toFloat())}}},"Log",{},n)}}),AZe=Z({log1p_:function(t){var e=V(t,"x","log1p");return oe.runKernelFunc(function(n,r){var o=n.log1p(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}})}}),$Ze=Z({logSigmoid_:function(t){var e=V(t,"x","logSigmoid");return oe.runKernelFunc(function(n,r){var o=n.softplus(e.neg()).neg();return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}})}}),A2=Z({neg_:function(t){var e=V(t,"x","neg"),n=[e];return oe.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),MZe=Z({reciprocal_:function(t){var e=V(t,"x","reciprocal");return oe.runKernelFunc(function(n,r){var o=n.reciprocal(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}})}}),PZe=Z({round_:function(t){var e=V(t,"x","round");return oe.runKernelFunc(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return gn(n)}}})}}),Xre=Z({rsqrt_:function(t){var e=V(t,"x","rsqrt"),n=[e];return oe.runKernelFunc(function(r,o){var s=r.rsqrt(e);return o([e]),s},{x:e},function(r,o){var s=o[0];return{x:function(){return r.div(s.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),Qre=Z({sigmoid_:function(t){var e=V(t,"x","sigmoid");return oe.runKernelFunc(function(n,r){var o=n.sigmoid(e);return r([o]),o},{x:e},function(n,r){var o=r[0];return{x:function(){return n.mul(o.mul(He(1).sub(o)))}}},"Sigmoid")}}),FZe=Z({sign_:function(t){var e=V(t,"x","sign");return oe.runKernelFunc(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return gn(n)}}})}}),LZe=Z({isNaN_:function(t){var e=V(t,"x","isNaN");return oe.runKernelFunc(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return gn(n)}}})}}),BZe=Z({isInf_:function(t){var e=V(t,"x","isInf");return oe.runKernelFunc(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return gn(n)}}})}}),jZe=Z({isFinite_:function(t){var e=V(t,"x","isFinite");return oe.runKernelFunc(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return gn(n)}}})}}),WZe=Z({sin_:function(t){var e=V(t,"x","sin"),n=[e];return oe.runKernelFunc(function(r,o){var s=r.sin(e);return o([e]),s},{x:e},function(r,o){var s=o[0];return{x:function(){return s.toFloat().cos().mul(r)}}},"Sin",{},n)}}),zZe=Z({sinh_:function(t){var e=V(t,"x","sinh");return oe.runKernelFunc(function(n,r){var o=n.sinh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}})}}),UZe=Z({softplus_:function(t){var e=V(t,"x","softplus");return oe.runKernelFunc(function(n,r){var o=n.softplus(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}})}}),VZe=Z({sqrt_:function(t){var e=V(t,"x","sqrt");return oe.runKernelFunc(function(n,r){var o=n.sqrt(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}})}}),HZe=Z({step_:function(t,e){e===void 0&&(e=0);var n=V(t,"x","step");return oe.runKernelFunc(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return gn(r)}}})}}),GZe=Z({tan_:function(t){var e=V(t,"x","tan");return oe.runKernelFunc(function(n,r){var o=n.tan(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}})}}),YZe=Z({tanh_:function(t){var e=V(t,"x","tanh");return oe.runKernelFunc(function(n,r){var o=n.tanh(e);return r([o]),o},{x:e},function(n,r){var o=r[0];return{x:function(){return He(1).sub(o.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function Jre(t,e,n,r,o,s){var i,a,u=V(t,"x","batchNorm"),l=V(e,"mean","batchNorm"),c=V(n,"variance","batchNorm");return o!=null&&(i=V(o,"scale","batchNorm")),r!=null&&(a=V(r,"offset","batchNorm")),G(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),G(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),G(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),i!=null&&G(i.rank===2||i.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),a!=null&&G(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),ob(u,l,c,a,i,s)}function Zre(t,e,n,r,o,s){var i,a,u=V(t,"x","batchNorm"),l=V(e,"mean","batchNorm"),c=V(n,"variance","batchNorm");return o!=null&&(i=V(o,"scale","batchNorm")),r!=null&&(a=V(r,"offset","batchNorm")),G(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),G(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),G(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),i!=null&&G(i.rank===3||i.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),a!=null&&G(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),ob(u,l,c,a,i,s)}function eoe(t,e,n,r,o,s){var i,a,u=V(t,"x","batchNorm"),l=V(e,"mean","batchNorm"),c=V(n,"variance","batchNorm");return o!=null&&(i=V(o,"scale","batchNorm")),r!=null&&(a=V(r,"offset","batchNorm")),G(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),G(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),G(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),i!=null&&G(i.rank===4||i.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),a!=null&&G(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),ob(u,l,c,a,i,s)}function ob(t,e,n,r,o,s){s==null&&(s=.001);var i,a,u,l=V(t,"x","batchNorm"),c=V(e,"mean","batchNorm"),d=V(n,"variance","batchNorm");o!=null&&(i=V(o,"scale","batchNorm")),r!=null&&(a=V(r,"offset","batchNorm")),G(c.rank===d.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),G(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),G(i==null||c.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var f=[l,c,d,i];return oe.runKernelFunc(function(h,p){var m=h.batchNormalization(u,Aw(c),Aw(d),s,Aw(i),Aw(a));return p([l,c,d,i]),m},{x:l,mean:c,variance:d,scale:i,offset:a},function(h,p){var m=p,g=m[0],v=m[1],y=m[2],x=m[3],b=x??He(1),C=wo(v.shape,u.shape),S=[];if(v.rank===1){for(var E=0;E<u.shape.length-1;++E)S.push(u.shape[E]);S.push(1)}var I=g.sub(v),T=h.mul(b),N=Xre(y.add(He(s))),O=N.mul(N).mul(N).mul(He(-.5));return{x:function(){return v.rank===1?h.mul(km(N.as4D(1,1,1,v.shape[0]),S)).mul(b).reshape(g.shape):h.mul(N).mul(b).reshape(g.shape)},mean:function(){var $=N.mul(He(-1)).mul(T);return v.rank===1&&($=$.sum(C)),$.reshape(v.shape)},variance:function(){var $=O.mul(I).mul(T);return v.rank===1&&($=$.sum(C)),$.reshape(v.shape)},scale:function(){var $=I.mul(N),A=h.mul($);return v.rank===1&&(A=A.sum(C)),A.reshape(v.shape)},offset:function(){var $=h;return v.rank===1&&($=$.sum(C)),$.reshape(v.shape)}}},"BatchNormalization",{varianceEpsilon:s},f).reshape(l.shape)}function Aw(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function B_(){mre("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var qZe=Z({batchNormalization2d_:function(t,e,n,r,o,s){return r===void 0&&(r=.001),B_(),Jre(t,e,n,s,o,r)}}),KZe=Z({batchNormalization3d_:function(t,e,n,r,o,s){return r===void 0&&(r=.001),B_(),Zre(t,e,n,s,o,r)}}),XZe=Z({batchNormalization4d_:function(t,e,n,r,o,s){return r===void 0&&(r=.001),B_(),eoe(t,e,n,s,o,r)}}),QZe=Z({batchNormalization_:function(t,e,n,r,o,s){return r===void 0&&(r=.001),B_(),ob(t,e,n,s,o,r)}}),toe=Z({batchNorm_:ob}),JZe=Z({batchNorm2d_:Jre}),ZZe=Z({batchNorm3d_:Zre}),eet=Z({batchNorm4d_:eoe}),j_=Z({logicalAnd_:function(t,e){var n=V(t,"a","logicalAnd","bool"),r=V(e,"b","logicalAnd","bool");return en(n.shape,r.shape),oe.runKernelFunc(function(o){return o.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),tet=Z({logicalNot_:function(t){var e=V(t,"x","logicalNot","bool");return oe.runKernelFunc(function(n){return n.logicalNot(e)},{$x:e})}}),noe=Z({logicalOr_:function(t,e){var n=V(t,"a","logicalOr","bool"),r=V(e,"b","logicalOr","bool");return en(n.shape,r.shape),oe.runKernelFunc(function(o){return o.logicalOr(n,r)},{$a:n,$b:r})}}),net=Z({logicalXor_:function(t,e){var n=V(t,"a","logicalXor","bool"),r=V(e,"b","logicalXor","bool");return en(n.shape,r.shape),noe(t,e).logicalAnd(j_(t,e).logicalNot())}}),Mh=Z({where_:function(t,e,n){var r=V(e,"a","where"),o=V(n,"b","where"),s=V(t,"condition","where","bool");return Rn(r.shape,o.shape,"Error in where: "),s.rank===1?G(s.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Rn(s.shape,o.shape,"Error in where: "),oe.runKernelFunc(function(i,a){var u=i.select(s,r,o);return a([s]),u},{$condition:s,$a:r,$b:o},function(i,a){var u=a[0];return{$condition:function(){return gn(u).toFloat()},$a:function(){return i.mul(u.cast(i.dtype))},$b:function(){return i.mul(u.logicalNot().cast(i.dtype))}}})}}),roe=function(t){return it(this,void 0,void 0,function(){var e,n,r;return at(this,function(o){switch(o.label){case 0:return[4,(e=V(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=nL(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},Xt=Z({add_:function(t,e){var n,r=V(t,"a","add"),o=V(e,"b","add");n=Dr(r,o),r=n[0],o=n[1];var s=en(r.shape,o.shape);return oe.runKernelFunc(function(i){return i.add(r,o)},{a:r,b:o},function(i){return{a:function(){var a=i,u=wo(r.shape,s);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=i,u=wo(o.shape,s);return u.length>0&&(a=a.sum(u)),a.reshape(o.shape)}}},"Add")}}),ret=Z({addN_:function(t){G(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),G(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(o,s){return V(o,"tensors"+s,"addN")}),n=e[0];e.forEach(function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(o){if(!Do(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return oe.runKernelFunc(function(o){return o.addN(e)},r,function(o){var s={};return e.forEach(function(i,a){s[a]=function(){return o.clone()}}),s},"AddN")}}),oet=Z({addStrict_:function(t,e){var n=V(t,"a","addStrict"),r=V(e,"b","addStrict");return Rn(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),set=Z({atan2_:function(t,e){var n,r=V(t,"a","atan2"),o=V(e,"b","atan2");n=Dr(r,o),r=n[0],o=n[1];var s=en(r.shape,o.shape);return oe.runKernelFunc(function(i,a){var u=i.atan2(r,o);return a([r,o]),u},{$a:r,$b:o},function(i,a){var u=a[0],l=a[1];return{$a:function(){var c=Xt(u.square(),l.square()),d=i.mul(l.div(c)),f=wo(u.shape,s);return f.length>0&&(d=d.sum(f)),d.reshape(u.shape)},$b:function(){var c=Xt(u.square(),l.square()),d=A2(i.mul(u.div(c))),f=wo(l.shape,s);return f.length>0&&(d=d.sum(f)),d.reshape(l.shape)}}})}}),La=Z({div_:function(t,e){var n,r=V(t,"a","div"),o=V(e,"b","div");if(n=Dr(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return ooe(r,o);var s=en(r.shape,o.shape);return oe.runKernelFunc(function(i,a){var u=i.realDivide(r,o);return a([r,o]),u},{a:r,b:o},function(i,a){var u=a[0],l=a[1];return{a:function(){var c=i.div(l.toFloat()),d=wo(u.shape,s);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=i.mul(u.toFloat()),d=wo(l.shape,s);d.length>0&&(c=c.sum(d).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}},"Div")}}),iet=Z({divNoNan_:function(t,e){var n,r=V(t,"a","div"),o=V(e,"b","div");r=(n=Dr(r,o))[0],o=n[1];var s=La(r,o),i=gn(s),a=o.equal(i);return Mh(a,i,s)}}),aet=Z({divStrict_:function(t,e){var n=V(t,"a","div"),r=V(e,"b","div");return Rn(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),ooe=Z({floorDiv_:function(t,e){var n,r=V(t,"a","floorDiv"),o=V(e,"b","floorDiv");n=Dr(r,o),r=n[0],o=n[1];var s=en(r.shape,o.shape);return oe.runKernelFunc(function(i,a){var u=i.floorDiv(r,o);return a([r,o]),u},{a:r,b:o},function(i,a){var u=a[0],l=a[1];return{a:function(){var c=i.div(l.toFloat()),d=wo(u.shape,s);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=i.mul(u.toFloat()),d=wo(l.shape,s);d.length>0&&(c=c.sum(d).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}},"FloorDiv")}}),aL=Z({maximum_:function(t,e){var n,r=V(t,"a","maximum"),o=V(e,"b","maximum");return n=Dr(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),en(r.shape,o.shape),oe.runKernelFunc(function(s,i){var a=s.maximum(r,o);return i([r,o]),a},{a:r,b:o},function(s,i){var a=i[0],u=i[1];return{a:function(){return s.mul(a.greaterEqual(u).toFloat())},b:function(){return s.mul(a.less(u).toFloat())}}},"Maximum")}}),uet=Z({maximumStrict_:function(t,e){var n=V(t,"a","maximumStrict"),r=V(e,"b","maximumStrict");return Rn(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),soe=Z({minimum_:function(t,e){var n,r=V(t,"a","minimum"),o=V(e,"b","minimum");return n=Dr(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),en(r.shape,o.shape),oe.runKernelFunc(function(s,i){var a=s.minimum(r,o);return i([r,o]),a},{a:r,b:o},function(s,i){var a=i[0],u=i[1];return{a:function(){return s.mul(a.lessEqual(u).toFloat())},b:function(){return s.mul(a.greater(u).toFloat())}}},"Minimum")}}),cet=Z({minimumStrict_:function(t,e){var n=V(t,"a","minimumStrict"),r=V(e,"b","minimumStrict");return Rn(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),det=Z({mod_:function(t,e){var n,r=V(t,"a","mod"),o=V(e,"b","mod");n=Dr(r,o),r=n[0],o=n[1];var s=en(r.shape,o.shape);return oe.runKernelFunc(function(i,a){var u=i.mod(r,o);return a([r,o]),u},{$a:r,$b:o},function(i,a){var u=a[0],l=a[1];return{$a:function(){var c=wo(u.shape,s);return c.length>0?i.sum(c).reshape(u.shape):i},$b:function(){var c=i.mul(u.div(l).floor().neg()),d=wo(l.shape,s);return d.length>0?c.sum(d).reshape(l.shape):c}}})}}),fet=Z({modStrict_:function(t,e){var n=V(t,"a","modStrict"),r=V(e,"b","modStrict");return Rn(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),hs=Z({mul_:function(t,e){var n,r=V(t,"a","mul"),o=V(e,"b","mul");n=Dr(r,o),r=n[0],o=n[1];var s=en(r.shape,o.shape);return oe.runKernelFunc(function(i,a){var u=i.multiply(r,o);return a([r,o]),u},{a:r,b:o},function(i,a){var u=a[0],l=a[1];return{a:function(){var c=i.mul(l.toFloat()),d=wo(u.shape,s);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=i.mul(u.toFloat()),d=wo(l.shape,s);return d.length>0?c.sum(d).reshape(l.shape):c}}},"Mul")}}),het=Z({mulStrict_:function(t,e){var n=V(t,"a","mul"),r=V(e,"b","mul");return Rn(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),$2=Z({pow_:function(t,e){var n,r=V(t,"base","pow"),o=V(e,"exp","pow");n=Dr(r,o),r=n[0],o=n[1];var s=en(r.shape,o.shape),i=[r,o];return oe.runKernelFunc(function(a,u){var l=a.pow(r,o);return u([r,o,l]),l},{a:r,b:o},function(a,u){var l=u[0],c=u[1],d=u[2];return{a:function(){var f=c.toFloat(),h=a.mul(f.mul(l.pow(f.sub(He(1))))),p=wo(l.shape,s);return p.length>0&&(h=h.sum(p)),h.reshape(l.shape)},b:function(){var f=l.greater(0),h=l.log().where(f,gn(l)),p=a.mul(d.mul(h)),m=wo(c.shape,s);return m.length>0&&(p=p.sum(m)),p.reshape(c.shape)}}},"Pow",{},i,[!0])}}),pet=Z({powStrict_:function(t,e){return Rn(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),met=Z({squaredDifferenceStrict_:function(t,e){var n=V(t,"a","squaredDifferenceStrict"),r=V(e,"b","squaredDifferenceStrict");return Rn(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),ko=Z({sub_:function(t,e){var n,r=V(t,"a","sub"),o=V(e,"b","sub");n=Dr(r,o),r=n[0],o=n[1];var s=en(r.shape,o.shape);return oe.runKernelFunc(function(i){return i.subtract(r,o)},{a:r,b:o},function(i){return{a:function(){var a=i,u=wo(r.shape,s);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=i,u=wo(o.shape,s);return u.length>0&&(a=a.sum(u)),a.neg().reshape(o.shape)}}},"Sub")}}),get=Z({subStrict_:function(t,e){var n=V(t,"a","subStrict"),r=V(e,"b","subStrict");return Rn(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),ioe=Z({equal_:function(t,e){var n,r=V(t,"a","equal"),o=V(e,"b","equal");return n=Dr(r,o),r=n[0],o=n[1],en(r.shape,o.shape),oe.runKernelFunc(function(s){return s.equal(r,o)},{$a:r,$b:o})}}),vet=Z({equalStrict_:function(t,e){var n=V(t,"a","equalStrict"),r=V(e,"b","equalStrict");return Rn(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),yet=Z({greater_:function(t,e){var n,r=V(t,"a","greater"),o=V(e,"b","greater");return n=Dr(r,o),r=n[0],o=n[1],en(r.shape,o.shape),oe.runKernelFunc(function(s){return s.greater(r,o)},{a:r,b:o},null,"Greater")}}),aoe=Z({greaterEqual_:function(t,e){var n,r=V(t,"a","greaterEqual"),o=V(e,"b","greaterEqual");return n=Dr(r,o),r=n[0],o=n[1],en(r.shape,o.shape),oe.runKernelFunc(function(s,i){var a=s.greaterEqual(r,o);return i([r,o]),a},{a:r,b:o},function(s,i){var a=i[0],u=i[1];return{a:function(){return gn(a)},b:function(){return gn(u)}}},"GreaterEqual")}}),xet=Z({greaterEqualStrict_:function(t,e){var n=V(t,"a","greaterEqualStrict"),r=V(e,"b","greaterEqualStrict");return Rn(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),bet=Z({greaterStrict_:function(t,e){var n=V(t,"a","greaterStrict"),r=V(e,"b","greaterStrict");return Rn(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),wet=Z({less_:function(t,e){var n,r=V(t,"a","less"),o=V(e,"b","less");return n=Dr(r,o),r=n[0],o=n[1],en(r.shape,o.shape),oe.runKernelFunc(function(s){return s.less(r,o)},{a:r,b:o},null,"Less")}}),ket=Z({lessEqual_:function(t,e){var n,r=V(t,"a","lessEqual"),o=V(e,"b","lessEqual");return n=Dr(r,o),r=n[0],o=n[1],en(r.shape,o.shape),oe.runKernelFunc(function(s,i){var a=s.lessEqual(r,o);return i([r,o]),a},{a:r,b:o},null,"LessEqual")}}),Cet=Z({lessEqualStrict_:function(t,e){var n=V(t,"a","lessEqualStrict"),r=V(e,"b","lessEqualStrict");return Rn(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Eet=Z({lessStrict_:function(t,e){var n=V(t,"a","lessStrict"),r=V(e,"b","lessStrict");return Rn(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),_et=Z({notEqual_:function(t,e){var n,r=V(t,"a","notEqual"),o=V(e,"b","notEqual");return n=Dr(r,o),r=n[0],o=n[1],en(r.shape,o.shape),oe.runKernelFunc(function(s){return s.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),Iet=Z({notEqualStrict_:function(t,e){var n=V(t,"a","notEqualStrict"),r=V(e,"b","notEqualStrict");return Rn(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function X6(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function Q6(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var uL=Z({gather_:function(t,e,n){n===void 0&&(n=0);var r=V(t,"x","gather"),o=V(e,"indices","gather","int32");n=So(n,r.shape)[0];var s=function(i,a,u){for(var l=i.shape[u],c=[],d=1,f=1,h=0;h<u;h++)c.push(i.shape[h]),d*=i.shape[h];for(h=0;h<a.rank;h++)c.push(a.shape[h]);for(h=u+1;h<i.rank;h++)c.push(i.shape[h]),f*=i.shape[h];return{batchSize:d,sliceSize:f,dimSize:l,outputShape:c}}(r,o,n);return oe.runKernelFunc(function(i,a){var u=i.gather(r,o.flatten(),n);return a([o]),u},{x:r,indices:o},function(i,a){var u=a[0];return{x:function(){var l=r.shape,c=u.size,d=l.slice(0,n),f=d.length,h=l.slice(n,l.length).slice(1),p=h.length,m=X6(0,f),g=X6(f+1,f+1+p),v=Q6([d,[c],h]),y=i.reshape(v),x=u.reshape([c]),b=Q6([[f],m,g]),C=y.transpose(b),S=uoe(C,x,r.shape[n]),E=q3(b);return S=S.transpose(E)},indices:function(){return u}}},"Gather",{axis:n}).reshape(s.outputShape)}}),uoe=Z({unsortedSegmentSum_:function(t,e,n){var r=V(t,"x","unsortedSegmentSum"),o=V(e,"segmentIds","unsortedSegmentSum","int32");return G(Pr(n),function(){return"numSegments must be of dtype int"}),oe.runKernelFunc(function(s,i){var a=s.unsortedSegmentSum(r,o,n);return i([o]),a},{$x:r},function(s,i){var a=i[0];return{$x:function(){return function(u,l){for(var c=aL(l,gn(l)),d=uL(u,c),f=aoe(l,He(0,"int32")),h=d.rank-f.rank,p=0;p<h;++p)f=Gi(f,p+1);f=j_(f,ev(d.shape,"bool"));var m=gn(d);return Mh(f,d,m)}(s,a)}}})}}),Tet=function(t,e,n){return it(this,void 0,void 0,function(){var r,o,s,i,a,u,l,c,d,f,h,p,m;return at(this,function(g){switch(g.label){case 0:for(r=V(t,"tensor","boolMask"),o=V(e,"mask","boolMask","bool"),s=n??0,i=o.rank,a=r.shape,G(i>0,function(){return"mask cannot be scalar"}),Rn(a.slice(s,s+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=s;l<s+i;l++)u*=a[l];return c=a.slice(0,s).concat([u],a.slice(s+i)),d=r.reshape(c),f=o.reshape([-1]),[4,roe(f)];case 1:return h=g.sent(),p=h.squeeze([1]),m=uL(d,p,s),t!==r&&r.dispose(),e!==o&&o.dispose(),p.dispose(),d.dispose(),f.dispose(),h.dispose(),[2,m]}})})};function loe(t,e,n,r,o,s,i){s===void 0&&(s="NHWC"),G(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),a=[1,t[0],t[1],t[2]]),G(a.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),G(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),G(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?u.shape[3]:u.shape[1];G(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),G(d===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."}),i!=null&&G(Pr(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var f=Z3(s),h=ip(a,n.shape,r,1,o,i,!1,f),p=oe.runKernelFunc(function(m,g){var v=m.conv2dDerInput(u,n,h);return g([n,u]),v},{dy4D:u,filter:n},function(m,g){var v=g[0],y=g[1];return{dy4D:function(){return ba(m,v,r,o,s,1,i)},filter:function(){return lL(m,y,v.shape,r,o,s,i)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function $N(t){var e=function(s){return typeof s=="number"?[s,s,s]:s.length===2?[s[0],s[1],1]:s}(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function coe(t,e,n,r,o){G(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,i=e,a=!1;e.rank===4&&(a=!0,i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),s=[1,t[0],t[1],t[2],t[3]]);var u=s[4],l=i.shape[4];G(s.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+s.length+"."}),G(i.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),G(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),G(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),G(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=R2(s,n.shape,r,1,o),d=oe.runKernelFunc(function(f){return f.conv3dDerInput(i,n,c)},{dy5D:i});return a?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var Net=Z({conv1d_:function(t,e,n,r,o,s,i){o===void 0&&(o="NWC"),s===void 0&&(s=1);var a=V(t,"x","conv1d"),u=V(e,"filter","conv1d"),l=a,c=!1;a.rank===2&&(c=!0,l=a.as3D(1,a.shape[0],a.shape[1])),G(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),G(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),i!=null&&G(Pr(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),G(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),G(ai(n,s),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+s+"'"}),G(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=ba(f,d,[1,n],r,"NHWC",[1,s],i);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),ba=Z({conv2d_:function(t,e,n,r,o,s,i){o===void 0&&(o="NHWC"),s===void 0&&(s=[1,1]);var a=V(t,"x","conv2d"),u=V(e,"filter","conv2d"),l=a,c=!1;a.rank===3&&(c=!0,l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),G(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),G(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),i!=null&&G(Pr(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var d=o==="NHWC"?l.shape[3]:l.shape[1];G(d===u.shape[2],function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."}),G(ai(n,s),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"});var f=Z3(o),h=ip(l.shape,u.shape,n,s,r,i,!1,f),p=[u,l],m=oe.runKernelFunc(function(g,v){var y=g.conv2d(l,u,h);return v([u,l]),y},{x:l,filter:u},function(g,v){var y=v,x=y[0],b=y[1];return G(wg(s),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"}),{x:function(){return doe(b.shape,g,x,n,r,o)},filter:function(){return lL(b,g,x.shape,n,r,o)}}},"Conv2D",h,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Det=Z({conv3d_:function(t,e,n,r,o,s){o===void 0&&(o="NDHWC"),s===void 0&&(s=[1,1,1]);var i=V(t,"x","conv3d"),a=V(e,"filter","conv3d"),u=i,l=!1;i.rank===4&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),G(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),G(a.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),G(u.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),G(function(f,h){return $N(f)||$N(h)}(n,s),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"}),G(o==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var c=R2(u.shape,a.shape,n,s,r),d=oe.runKernelFunc(function(f,h){var p=f.conv3d(u,a,c);return h([u,a]),p},{x:u,$filter:a},function(f,h){G($N(s),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"});var p=h[0],m=h[1];return{x:function(){return coe(p.shape,f,m,n,r)},$filter:function(){return function(g,v,y,x,b){var C=g;g.rank===4&&(C=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var S=v;S.rank===4&&(S=v.as5D(1,v.shape[0],v.shape[1],v.shape[2],v.shape[3])),G(C.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+C.shape+"."}),G(S.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+S.shape+"."}),G(y.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+y+"."}),G(C.shape[4]===y[3],function(){return"Error in conv3dDerFilter: depth of input "+C.shape[4]+") must match input depth in filter ("+y[3]+"."}),G(S.shape[4]===y[4],function(){return"Error in conv3dDerFilter: depth of dy ("+S.shape[4]+") must match output depth for filter ("+y[4]+")."});var E=R2(C.shape,y,x,1,b);return oe.runKernelFunc(function(I){return I.conv3dDerFilter(C,S,E)},{x5D:C,dy5D:S})}(p,f,m.shape,n,r)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),lL=Z({conv2dDerFilter_:function(t,e,n,r,o,s,i){s===void 0&&(s="NHWC");var a=t;t.rank===3&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),G(a.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),G(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),G(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=s==="NHWC"?a.shape[3]:a.shape[1],c=s==="NHWC"?u.shape[3]:u.shape[1];G(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),G(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),i!=null&&G(Pr(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var d=Z3(s),f=ip(a.shape,n,r,1,o,i,!1,d);return oe.runKernelFunc(function(h){return h.conv2dDerFilter(a,u,f)},{x4D:a,dy4D:u})}}),doe=Z({conv2dDerInput_:loe}),W_=Z({depthwiseConv2d_:function(t,e,n,r,o,s,i){s===void 0&&(s=[1,1]);var a=V(t,"x","depthwiseConv2d"),u=V(e,"filter","depthwiseConv2d"),l=a,c=!1;a.rank===3&&(c=!0,l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),G(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),G(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),G(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),s==null&&(s=[1,1]),G(ai(n,s),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"}),i!=null&&G(Pr(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var d=ip(l.shape,u.shape,n,s,r,i,!0),f=[l,u],h=oe.runKernelFunc(function(p,m){var g=p.depthwiseConv2D(l,u,d);return m([l,u]),g},{x:l,filter:u},function(p,m){G(wg(s),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"});var g=m[0],v=m[1];return{x:function(){return foe(g.shape,p,v,d)},filter:function(){return hoe(g,p,v.shape,d)}}},"DepthwiseConv2dNative",d,f);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),foe=Z({depthwiseConv2dDerInput_:function(t,e,n,r){var o=e,s=!1;e.rank===3&&(s=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=oe.runKernelFunc(function(a){return a.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return s?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),hoe=Z({depthwiseConv2dDerFilter_:function(t,e,n,r){var o=t;t.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e;return s.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),oe.runKernelFunc(function(i){return i.depthwiseConv2DDerFilter(o,s,r)},{x4D:o,dy4D:s})}}),cL=Z({separableConv2d_:function(t,e,n,r,o,s,i){s===void 0&&(s=[1,1]),i===void 0&&(i="NHWC");var a=V(t,"x","separableConv2d"),u=V(e,"depthwiseFilter","separableConv2d"),l=V(n,"pointwiseFilter","separableConv2d"),c=a,d=!1;if(a.rank===3&&(d=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");G(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),G(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),G(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),G(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),G(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var f=u.shape[2],h=u.shape[3];G(l.shape[2]===f*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*h+", but got "+l.shape[2]+"."});var p=W_(c,u,r,o,i,s),m=ba(p,l,1,"valid",i);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Ret=Z({conv2dTranspose_:function(t,e,n,r,o,s){return loe(n,V(t,"x","conv2dTranspose"),V(e,"filter","conv2dTranspose"),r,o,"NHWC",s)}}),Oet=Z({conv3dTranspose_:function(t,e,n,r,o){return coe(n,V(t,"x","conv3dTranspose"),V(e,"filter","conv3dTranspose"),r,o)}}),z_=Z({matMul_:function(t,e,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var s=V(t,"a","matMul"),i=V(e,"b","matMul");o=Dr(s,i),s=o[0],i=o[1];var a=n?s.shape[s.rank-2]:s.shape[s.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?s.shape[s.rank-1]:s.shape[s.rank-2],c=r?i.shape[i.rank-2]:i.shape[i.rank-1],d=s.shape.slice(0,-2),f=i.shape.slice(0,-2),h=dt(d),p=dt(f);G(s.rank>=2&&i.rank>=2&&s.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+s.rank+" and "+i.rank+"."}),G(Do(d,f),function(){return"Error in matMul: outer dimensions ("+d+") and ("+f+") of Tensors with shapes "+s.shape+" and "+i.shape+" must match."}),G(a===u,function(){return"Error in matMul: inner shapes ("+a+") and ("+u+") of Tensors with shapes "+s.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=s.shape.slice(0,-2).concat([l,c]),g=n?s.as3D(h,a,l):s.as3D(h,l,a),v=r?i.as3D(p,c,u):i.as3D(p,u,c),y={transposeA:n,transposeB:r};return oe.runKernelFunc(function(x,b){var C=x.batchMatMul(g,v,n,r);return b([g,v]),C},{a:g,b:v},function(x,b){var C=b,S=C[0],E=C[1];return n||r?!n&&r?{a:function(){return x.matMul(E,!1,!1)},b:function(){return x.matMul(S,!0,!1)}}:n&&!r?{a:function(){return E.matMul(x,!1,!0)},b:function(){return S.matMul(x,!1,!1)}}:{a:function(){return E.matMul(x,!0,!0)},b:function(){return x.matMul(S,!0,!0)}}:{a:function(){return x.matMul(E,!1,!0)},b:function(){return S.matMul(x,!0,!1)}}},"BatchMatMul",y).reshape(m)}}),Aet=Z({dot_:function(t,e){var n=V(t,"t1","dot"),r=V(e,"t2","dot");G(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];return G(o===s,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+s+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),$et=Z({outerProduct_:function(t,e){var n=V(t,"v1","outerProduct"),r=V(e,"v2","outerProduct");return G(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),sb=Z({reverse_:function(t,e){var n=V(t,"x","reverse");if(n.rank===0)return n.clone();var r=So(e,n.shape);return oe.runKernelFunc(function(o){return o.reverse(n,r)},{$x:n},function(o){return{$x:function(){return o.reverse(r)}}}).reshapeAs(n)}}),Met=Z({reverse1d_:function(t){var e=V(t,"x","reverse");return G(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),sb(e,0)}}),Pet=Z({reverse2d_:function(t,e){var n=V(t,"x","reverse");return G(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),sb(n,e)}}),Fet=Z({reverse3d_:function(t,e){var n=V(t,"x","reverse");return G(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),sb(n,e)}}),Let=Z({reverse4d_:function(t,e){var n=V(t,"x","reverse");return G(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),sb(n,e)}});function poe(t,e,n,r,o,s){var i=V(t,"x","maxPool"),a=i,u=!1;i.rank===3&&(u=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),r==null&&(r=[1,1]),G(a.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),G(ai(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),s!=null&&G(Pr(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."});var l=B0(a.shape,e,n,r,o,s);if(l.filterWidth===1&&l.filterHeight===1&&Do(l.inShape,l.outShape))return i.clone();var c=[a],d=oe.runKernelFunc(function(f,h){var p=f.maxPool(a,l);return h([a,p]),p},{x:a},function(f,h){var p=h[0],m=h[1];return{x:function(){return function(g,v,y,x,b,C,S,E){var I=V(g,"dy","maxPoolBackprop"),T=V(v,"input","maxPoolBackprop"),N=V(y,"output","maxPoolBackprop");G(T.rank===I.rank,function(){return"Rank of input ("+T.rank+") does not match rank of dy ("+I.rank+")"}),C==null&&(C=[1,1]),G(ai(b,C),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+C+"'"}),G(I.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+I.rank+"."}),G(T.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+T.rank+"."}),E!=null&&G(Pr(S),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+S+"."});var O=B0(T.shape,x,b,C,S,E);return oe.runKernelFunc(function($){return $.maxPoolBackprop(I,T,N,O)},{$dy:I,$input:T})}(f,p,m,e,n,r,o)}}},"MaxPool",l,c);return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function moe(t,e,n,r,o,s){var i=V(t,"x","avgPool","float32");r==null&&(r=[1,1]),G(ai(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var a=i,u=!1;i.rank===3&&(u=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),G(a.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),s!=null&&G(Pr(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."});var l=B0(a.shape,e,n,r,o,s);if(l.filterWidth===1&&l.filterHeight===1&&Do(l.inShape,l.outShape))return i.clone();var c=oe.runKernelFunc(function(d){return d.avgPool(a,l)},{x:a},function(d){return{x:function(){return function(f,h,p,m,g,v){var y=V(f,"dy","avgPoolBackprop"),x=V(h,"input","avgPoolBackprop");G(x.rank===y.rank,function(){return"Rank of input ("+x.rank+") does not match rank of dy ("+y.rank+")"}),g==null&&(g=[1,1]),G(ai(m,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"});var b=x,C=y,S=!1;x.rank===3&&(S=!0,b=x.as4D(1,x.shape[0],x.shape[1],x.shape[2]),C=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),G(C.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),G(b.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+b.rank+"."});var E=B0(b.shape,p,m,g,v),I=oe.runKernelFunc(function(T){return T.avgPoolBackprop(C,b,E)},{dy4D:C,input4D:b});return S?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}(d,a,e,n,r,o)}}},"AvgPool",l);return c=c.cast(i.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Eo=Z({maxPool_:function(t,e,n,r,o){return poe(t,e,n,1,r,o)}}),ib=Z({avgPool_:function(t,e,n,r,o){return moe(t,e,n,1,r,o)}}),Bet=Z({pool_:function(t,e,n,r,o,s){o==null&&(o=[1,1]),s==null&&(s=1),r===0&&(r="valid");var i=V(t,"x","maxPool"),a=i,u=!1;i.rank===3&&(u=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),G(ai(s,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+o+"'"});var l,c=B0(a.shape,e,s,o,r),d=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(b,C){var S=b.map(function(T,N){return T+(T-1)*(C[N]-1)}).map(function(T){return T-1}),E=S.map(function(T){return Math.floor(T/2)}),I=S.map(function(T,N){return T-E[N]});return S.map(function(T,N){return[E[N],I[N]]})}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var f=d[0]===1&&d[1]===1,h=function(b,C,S){var E=S.map(function(P){return P[0]}),I=S.map(function(P){return P[1]}),T=b.concat(E,I),N=C.map(function(P,L){return(P-T[L]%P)%P}),O=I.map(function(P,L){return P+N[L]}),$=C.map(function(P,L){return[E[L],O[L]]}),A=C.map(function(P,L){return[0,N[L]]});return[$,A]}([c.inHeight,c.inWidth],d,l),p=h[0],m=h[1],g=f?r:"valid",v=f?a:wre(a,d,p),y=(n==="avg"?function(){return moe(v,e,s,1,g)}:function(){return poe(v,e,s,1,g)})(),x=f?y:yre(y,d,m);return u?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),jet=Z({maxPool3d_:function(t,e,n,r,o,s,i){s===void 0&&(s="NDHWC");var a=V(t,"x","maxPool3d"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),i==null&&(i=[1,1,1]),G(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),G(s==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+s}),G(ai(n,i),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),o!=null&&G(Pr(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=D2(u.shape,e,n,i,r,o,s),d=oe.runKernelFunc(function(f,h){var p=f.maxPool3d(u,c);return h([u,p]),p},{x:u},function(f,h){var p=h[0],m=h[1];return{x:function(){return function(g,v,y,x,b,C,S,E){var I=V(g,"dy","maxPool3dBackprop"),T=V(v,"input","maxPool3dBackprop"),N=V(y,"output","maxPool3dBackprop"),O=I,$=T,A=N,P=!1;T.rank===4&&(P=!0,O=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3]),$=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3]),A=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3])),G(O.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+O.rank+"."}),G($.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+$.rank+"."}),G(A.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+A.rank+"."}),C==null&&(C=[1,1,1]),G(ai(b,C),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+C+"'"}),E!=null&&G(Pr(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+S+"."});var L=D2($.shape,x,b,C,S,E),W=oe.runKernelFunc(function(z){return z.maxPool3dBackprop(O,$,A,L)},{dy5D:O,input5D:$});return P?W.as4D(W.shape[1],W.shape[2],W.shape[3],W.shape[4]):W}(f,p,m,e,n,i,r,o)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Wet=Z({avgPool3d_:function(t,e,n,r,o,s,i){s===void 0&&(s="NDHWC");var a=V(t,"x","avgPool3d","float32"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),i==null&&(i=[1,1,1]),G(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),G(s==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+s}),G(ai(n,i),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),o!=null&&G(Pr(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=D2(u.shape,e,n,i,r,o,s),d=oe.runKernelFunc(function(f){return f.avgPool3d(u,c)},{x:u},function(f){return{x:function(){return function(h,p,m,g,v,y,x){var b=V(h,"dy","avgPool3dBackprop"),C=V(p,"input","avgPool3dBackprop"),S=b,E=C,I=!1;C.rank===4&&(I=!0,S=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),E=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3])),G(S.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+S.rank+"."}),G(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),v==null&&(v=[1,1,1]),G(ai(g,v),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+v+"'"}),x!=null&&G(Pr(y),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+x+" but got pad "+y+"."});var T=D2(E.shape,m,g,v,y,x),N=oe.runKernelFunc(function(O){return O.avgPool3dBackprop(S,E,T)},{dy5D:S,input5D:E});return I?N.as4D(N.shape[1],N.shape[2],N.shape[3],N.shape[4]):N}(f,u,e,n,i,r,o)}}});return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),sl=Z({slice_:function(t,e,n){var r,o,s=V(t,"x","slice");if(s.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(s.rank-1).fill(0)):e.length<s.rank?e.concat(new Array(s.rank-e.length).fill(0)):e.slice()).forEach(function(u){G(u!==-1,function(){return"slice() does not support negative begin indexing."})}),o=(o=n==null?new Array(s.rank).fill(-1):typeof n=="number"?[n].concat(new Array(s.rank-1).fill(-1)):n.length<s.rank?n.concat(new Array(s.rank-n.length).fill(-1)):n).map(function(u,l){return u>=0?u:(G(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),s.shape[l]-r[l])}),hQe(s,r,o);var i=s.shape,a={begin:r,size:o};return oe.runKernelFunc(function(u){return u.slice(s,r,o)},{x:s},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],i[c]-r[c]-o[c]]);return{x:function(){return u.pad(l)}}},"Slice",a)}}),zet=Z({slice1d_:function(t,e,n){var r=V(t,"x","slice1d");return G(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),sl(r,[e],[n])}}),Uet=Z({slice2d_:function(t,e,n){var r=V(t,"x","slice2d");return G(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),sl(r,e,n)}}),goe=Z({slice3d_:function(t,e,n){var r=V(t,"x","slice3d");return G(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),sl(r,e,n)}}),Vet=Z({slice4d_:function(t,e,n){var r=V(t,"x","slice4d");return G(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),sl(r,e,n)}});function voe(t,e,n,r,o){return e.rank<n.rank&&(e=e.reshape(ii(e.shape,r))),t.rank<n.rank&&(t=t.reshape(ii(t.shape,r))),{x:function(){var s=t.mul(n.equal(e).cast(t.dtype));return o==null?s:s.transpose(o)}}}var Het=Z({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","all","bool"),o=So(e,r.shape),s=o,i=fl(s,r.rank);i!=null&&(r=r.transpose(i),s=hl(s.length,r.rank));var a=oe.runKernelFunc(function(l){return l.all(r,s)},{$x:r});if(n){var u=ii(a.shape,o);return a.reshape(u)}return a}}),Get=Z({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","any","bool"),o=So(e,r.shape),s=o,i=fl(s,r.rank);i!=null&&(r=r.transpose(i),s=hl(s.length,r.rank));var a=oe.runKernelFunc(function(l){return l.any(r,s)},{$x:r});if(n){var u=ii(a.shape,o);return a.reshape(u)}return a}}),Yet=Z({argMax_:function(t,e){e===void 0&&(e=0);var n=V(t,"x","argMax");e==null&&(e=0);var r=So(e,n.shape),o=fl(r,n.rank);o!=null&&(n=n.transpose(o),r=hl(r.length,n.rank));var s={axis:r[0]},i=[n];return oe.runKernelFunc(function(a,u){var l=a.argMax(n,r[0]);return u([n]),l},{x:n},function(a,u){var l=u[0];return{x:function(){return gn(l)}}},"ArgMax",s,i)}}),qet=Z({argMin_:function(t,e){e===void 0&&(e=0);var n=V(t,"x","argMin");e==null&&(e=0);var r=So(e,n.shape),o=fl(r,n.rank);return o!=null&&(n=n.transpose(o),r=hl(r.length,n.rank)),oe.runKernelFunc(function(s,i){var a=s.argMin(n,r[0]);return i([n]),a},{$x:n},function(s,i){var a=i[0];return{$x:function(){return gn(a)}}})}}),Ket=Z({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","logSumExp"),o=So(e,r.shape),s=r.max(o,!0),i=r.sub(s).exp().sum(o).log(),a=s.reshape(i.shape).add(i);if(n){var u=ii(a.shape,o);return a.reshape(u)}return a}}),U_=Z({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","max"),o=r,s=So(e,r.shape),i=s,a=fl(i,r.rank);a!=null&&(r=r.transpose(a),i=hl(i.length,r.rank));var u=[r],l=oe.runKernelFunc(function(d,f){var h=d.max(r,i);return f([o,h]),h},{x:r},function(d,f){return voe(d,f[1],f[0],s,a)},"Max",{axes:i},u,[!0]);if(n){var c=ii(l.shape,s);l=l.reshape(c)}return l}}),Xet=Z({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","mean"),o=So(e,r.shape),s=dt(ss(r.shape,o)[1]);return L_(function(i){var a=He(s);return{value:(a.dtype===i.dtype?i:i.cast(a.dtype)).div(a).sum(e,n),gradFunc:function(u){var l=i.shape.slice();return o.forEach(function(c){l[c]=1}),u.reshape(l).mul(ev(i.shape,"float32")).div(s)}}})(r)}}),Qet=Z({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","min"),o=r,s=So(e,r.shape),i=s,a=fl(i,r.rank);a!=null&&(r=r.transpose(a),i=hl(i.length,r.rank));var u=[r],l=oe.runKernelFunc(function(d,f){var h=d.min(r,i);return f([o,h]),h},{x:r},function(d,f){return voe(d,f[1],f[0],s,a)},"Min",{axes:i},u,[!0]);if(n){var c=ii(l.shape,s);l=l.reshape(c)}return l}}),Jet=Z({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=So(e,(t=V(t,"x","moments")).shape),o=t.mean(r,n),s=o.shape;n||(s=ii(o.shape,r));var i=t.toFloat().sub(o.reshape(s)).square();return{mean:o,variance:i.mean(r,n)}}}),yoe=Z({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=So(e,r.shape);return L_(function(s){var i=fl(o,s.rank),a=o,u=s;i!=null&&(u=s.transpose(i),a=hl(a.length,s.rank));var l=function(h){var p=s.shape.slice();return o.forEach(function(m){p[m]=1}),h.reshape(p).mul(ev(s.shape,"float32"))},c={axes:a},d=oe.runKernelFunc(function(h){return h.sum(u,a)},{x:u},function(h){return{x:function(){return l(h)}}},"Sum",c);if(n){var f=ii(d.shape,o);d=d.reshape(f)}return{value:d,gradFunc:l}})(r)}}),Zet=Z({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=V(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=So(e,r.shape),s=fl(o,r.rank),i=o,a=r;s!=null&&(a=r.transpose(s),i=hl(i.length,r.rank));var u=oe.runKernelFunc(function(c){return c.prod(a,i)},{permutedX:a});if(n){var l=ii(u.shape,o);u=u.reshape(l)}return u}}),xoe=Z({elu_:function(t){var e=V(t,"x","elu");return oe.runKernelFunc(function(n,r){var o=n.elu(e);return r([o]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return oe.runKernelFunc(function(s){return s.eluDer(n,o)},{dy:n,y:o})}}})}}),ett=Z({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=V(t,"x","leakyRelu");return aL(He(e).mul(n),n)}}),boe=Z({prelu_:function(t,e){var n=V(t,"x","prelu"),r=V(e,"alpha","prelu");return oe.runKernelFunc(function(o,s){var i=o.prelu(n,r);return s([n,r]),i},{x:n,alpha:r},function(o,s){var i=s[0],a=s[1],u=i.greater(0);return{x:function(){return Mh(u,o,o.mul(a))},alpha:function(){var l=Mh(u,gn(o),o.mul(i)),c=wo(a.shape,o.shape);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)}}},"Prelu")}}),Ir=Z({relu_:function(t){var e=V(t,"x","relu");return e.dtype==="bool"?e.toInt():oe.runKernelFunc(function(n,r){var o=n.relu(e);return r([e]),o},{x:e},function(n,r){var o=r[0];return{x:function(){return n.mulStrict(o.step().toFloat())}}},"Relu")}}),woe=Z({relu6_:function(t){var e=V(t,"x","relu6");return e.dtype==="bool"?e.toInt():oe.runKernelFunc(function(n,r){var o=n.relu6(e);return r([e]),o},{x:e},function(n,r){var o=r[0],s=o.lessEqual(6).mul(o.step());return{x:function(){return n.mulStrict(s.toFloat())}}},"Relu6")}}),ttt=Z({selu_:function(t){var e=V(t,"x","selu");return oe.runKernelFunc(function(n,r){var o=n.selu(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){var s=o.greater(He(0)),i=He(oL),a=He(sL),u=n.mul(a),l=n.mul(i).mul(o.toFloat().exp());return Mh(s,u,l)}}})}}),qd=Z({transpose_:function(t,e){var n=V(t,"x","transpose");if(e==null&&(e=n.shape.map(function(o,s){return s}).reverse()),G(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(o){G(o>=0&&o<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1)return n.clone();var r={perm:e};return oe.runKernelFunc(function(o){return o.transpose(n,e)},{x:n},function(o){var s=q3(e);return{x:function(){return o.transpose(s)}}},"Transpose",r)}}),ntt=Z({localResponseNormalization_:function(t,e,n,r,o){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var s=V(t,"x","localResponseNormalization");G(s.rank===4||s.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+s.rank+"."}),G(Pr(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var i=s,a=!1;s.rank===3&&(a=!0,i=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]));var u=oe.runKernelFunc(function(l,c){var d=l.localResponseNormalization4D(i,e,n,r,o);return c([i,d]),d},{x4D:i},function(l,c){var d=c[0],f=c[1];return{x4D:function(){return oe.runKernelFunc(function(h){return h.LRNGrad(l,d,f,e,n,r,o)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),koe=Z({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=function a(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return a(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(He(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=V(t,"x","norm"),e,n),s=o.shape;if(r){var i=So(n,t.shape);s=ii(o.shape,i)}return o.reshape(s)}}),rtt=Z({basicLSTMCell_:function(t,e,n,r,o,s){var i=V(t,"forgetBias","basicLSTMCell"),a=V(e,"lstmKernel","basicLSTMCell"),u=V(n,"lstmBias","basicLSTMCell"),l=V(r,"data","basicLSTMCell"),c=V(o,"c","basicLSTMCell"),d=V(s,"h","basicLSTMCell"),f=l.concat(d,1).matMul(a).add(u),h=f.shape[0],p=f.shape[1]/4,m=[h,p],g=f.slice([0,0],m),v=f.slice([0,p],m),y=f.slice([0,2*p],m),x=f.slice([0,3*p],m),b=g.sigmoid().mulStrict(v.tanh()).addStrict(c.mulStrict(i.add(y).sigmoid())),C=b.tanh().mulStrict(x.sigmoid());return[b,C]}}),ott=Z({multiRNNCell_:function(t,e,n,r){for(var o=V(e,"data","multiRNNCell"),s=S2(n,"c","multiRNNCell"),i=S2(r,"h","multiRNNCell"),a=o,u=[],l=0;l<t.length;l++){var c=t[l](a,s[l],i[l]);u.push(c[0]),u.push(c[1]),a=c[1]}var d=[],f=[];for(l=0;l<u.length;l+=2)d.push(u[l]),f.push(u[l+1]);return[d,f]}}),stt=Z({movingAverage_:function(t,e,n,r,o){o===void 0&&(o=!0);var s=V(t,"v","movingAverage"),i=V(e,"x","movingAverage"),a=V(n,"decay","movingAverage");eXe(s,i),G(Do(s.shape,i.shape),function(){return"Shape mismatch in v and x"});var u=He(1),l=u.sub(a),c=i.sub(s).mul(l);if(o){G(r!=null,function(){return"When using zeroDebias: true, step is required."});var d=V(r,"step","movingAverage");c=c.div(u.sub($2(a,d)))}return s.add(c)}}),itt=Z({stridedSlice_:function(t,e,n,r,o,s,i,a,u){if(o===void 0&&(o=0),s===void 0&&(s=0),i===void 0&&(i=0),a===void 0&&(a=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),i!==0)throw new Error("ellipsis mask is not yet supported");var l=V(t,"x","stridedSlice"),c=D6(a),d=l.shape.slice();c.forEach(function(g){e[g]=0,n[g]=1,d.splice(g,0,1)}),l=l.reshape(d);for(var f=0;f<l.rank;f++)e[f]=pQe(o,e,r,l.shape,f),n[f]=mQe(s,n,r,l.shape,f),r[f]=r[f]||1;var h=D6(u);h.forEach(function(g){n[g]=e[g]+1,r[g]=1});var p=J3(e,n,r),m=p.filter(function(g,v){return h.indexOf(v)===-1});return r.every(function(g){return g===1})?sl(l,e,p).reshape(m):oe.runKernelFunc(function(g){return g.stridedSlice(l,e,n,r)},{$x:l}).reshape(m)}}),att=Z({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=V(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(e>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+e);var s=oe.runKernelFunc(function(i){return i.topk(r,e,n)},{$x:r});return{values:s[0],indices:s[1]}}}),utt=Z({scatterND_:function(t,e,n){var r=V(t,"indices","scatterND","int32"),o=V(e,"updates","scatterND");return fQe(o,r,n),oe.runKernelFunc(function(s){return s.scatterND(r,o,n)},{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),dL=Z({fft_:function(t){G(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return oe.runKernelFunc(function(o){return o.fft(r)},{input:t}).reshape(t.shape)}}),M2=Z({ifft_:function(t){G(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return oe.runKernelFunc(function(o){return o.ifft(r)},{input:t}).reshape(t.shape)}}),fL=Z({rfft_:function(t,e){G(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],o=t.size/r;if(e!=null&&e<r){var s=t.shape.map(function(v){return 0}),i=t.shape.map(function(v){return v});i[t.shape.length-1]=e,n=t.slice(s,i),r=e}else if(e!=null&&e>r){var a=t.shape.map(function(v){return v});a[t.shape.length-1]=e-r,n=t.concat(nr(a),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=Uo(n,u).as2D(o,r),c=dL(l),d=Math.floor(r/2)+1,f=Qi(c),h=Du(c),p=f.split([d,r-d],f.shape.length-1),m=h.split([d,r-d],h.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,Uo(p[0],m[0]).reshape(g)}}),Coe=Z({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),o=M2(r);return Qi(o)}var s=[n,2*(e-1)],i=Qi(t).as2D(n,e),a=Du(t).as2D(n,e),u=i.slice([0,1],[n,e-2]).reverse(1),l=a.slice([0,1],[n,e-2]).reverse(1).mul(He(-1)),c=i.concat(u,1),d=a.concat(l,1);return r=Uo(c,d).as2D(s[0],s[1]),o=M2(r),Qi(o)}}),ltt=Object.freeze({fft:dL,ifft:M2,rfft:fL,irfft:Coe}),ctt=Z({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var o=V(t,"sparseIndices","sparseToDense","int32"),s=V(e,"sparseValues","sparseToDense"),i=V(r,"defaultValue","sparseToDense",s.dtype);return function(a,u,l,c){if(a.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+a.dtype+".");if(a.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+a.shape+".");var d=a.rank>0?a.shape[0]:1,f=a.rank>1?a.shape[1]:1;if(l.length!==f)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+f+".");var h=u.size;if(u.rank!==0&&(u.rank!==1||h!==d))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+d+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,s,n,i),oe.runKernelFunc(function(a){return a.sparseToDense(o,s,n,i)},{$sparseIndices:o,$sparseValues:s,$defaultValue:i})}}),dtt=Z({gatherND_:function(t,e){var n=V(e,"indices","gatherND","int32"),r=V(t,"x","gatherND");return oe.runKernelFunc(function(o){return o.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),ftt=Z({diag_:function(t){var e=V(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return oe.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(n)}}),htt=Z({dropout_:function(t,e,n,r){var o=V(t,"x","dropout");if(G(o.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),G(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof Er?o.clone():o;var s=function(u,l){if(l==null)return u.shape.slice();if(Do(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],d=0;d<u.shape.length;d++)l[d]==null&&u.shape[d]!=null?c.push(u.shape[d]):c.push(l[d]);return c}return l}(o,n),i=1-e,a=bre(s,0,1,"float32",r).add(i).floor().div(i);return o.mul(a)}});function Soe(t,e,n){for(var r=1-t%2,o=new Float32Array(t),s=0;s<t;++s){var i=2*Math.PI*s/(t+r-1);o[s]=e-n*Math.cos(i)}return Zr(o,"float32")}var hL=Z({hannWindow_:function(t){return Soe(t,.5,.5)}}),Eoe=Z({hammingWindow_:function(t){return Soe(t,.54,.46)}}),pL=Z({frame_:function(t,e,n,r,o){r===void 0&&(r=!1),o===void 0&&(o=0);for(var s=0,i=[];s+e<=t.size;)i.push(sl(t,s,e)),s+=n;if(r)for(;s<t.size;){var a=s+e-t.size,u=yo([sl(t,s,e-a),Xu([a],o)]);i.push(u),s+=n}return i.length===0?_d([],[0,e]):yo(i).as2D(i.length,e)}}),_oe=Z({stft_:function(t,e,n,r,o){var s;o===void 0&&(o=hL),r==null&&(s=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(s)/Math.log(2)))));for(var i=pL(t,e,n),a=hs(i,o(e)),u=[],l=0;l<i.shape[0];l++)u.push(fL(a.slice([l,0],[1,e]),r));return yo(u)}}),ptt=Object.freeze({hannWindow:hL,hammingWindow:Eoe,frame:pL,stft:_oe}),fs,mtt=function(t,e,n){return n===void 0&&(n=1),it(this,void 0,void 0,function(){var r,o,s,i,a,u,l,c,d,f,h,p,m,g;return at(this,function(v){switch(v.label){case 0:return r=V(t,"predictions","inTopK"),o=V(e,"targets","inTopK"),G(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),G(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),Rn(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),s=r.shape[r.shape.length-1],G(n>0&&n<=s,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+s+"), but got "+n}),[4,r.data()];case 1:return i=v.sent(),[4,o.data()];case 2:for(a=v.sent(),u=[i.length/s,s],c=u[1],d=P0("bool",l=u[0]),f=0;f<l;f++){for(h=f*c,p=i.subarray(h,h+c),m=[],g=0;g<p.length;g++)m.push({value:p[g],index:g});for(m.sort(function(y,x){return x.value-y.value}),d[f]=0,g=0;g<n;g++)if(m[g].index===a[f]){d[f]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),[2,Ho(d,o.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(fs||(fs={}));var gtt=Z({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=fs.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"labels","absoluteDifference"),s=V(e,"predictions","absoluteDifference"),i=null;n!=null&&(i=V(n,"weights","absoluteDifference")),Rn(o.shape,s.shape,"Error in absoluteDifference: ");var a=o.sub(s).abs();return Sc(a,i,r)}}),Sc=Z({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=fs.SUM_BY_NONZERO_WEIGHTS);var r=V(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=V(e,"weights","computeWeightedLoss"));var s=o==null?r:r.mul(o);if(n===fs.NONE)return s;if(n===fs.SUM)return s.sum();if(n===fs.MEAN){if(o==null)return s.mean();var i=r.size/o.size,a=s.sum().div(o.sum());return i>1?a.div(He(i)):a}if(n===fs.SUM_BY_NONZERO_WEIGHTS){if(o==null)return s.sum().div(He(r.size));var u=o.mul(ev(r.shape)).notEqual(He(0)).sum().toFloat();return s.sum().div(u)}throw Error("Unknown reduction: "+n)}}),vtt=Z({cosineDistance_:function(t,e,n,r,o){o===void 0&&(o=fs.SUM_BY_NONZERO_WEIGHTS);var s=V(t,"labels","cosineDistance"),i=V(e,"predictions","cosineDistance"),a=null;r!=null&&(a=V(r,"weights","cosineDistance")),Rn(s.shape,i.shape,"Error in cosineDistance: ");var u=He(1).sub(s.mul(i).sum(n,!0));return Sc(u,a,o)}}),ytt=Z({hingeLoss_:function(t,e,n,r){r===void 0&&(r=fs.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"labels","hingeLoss"),s=V(e,"predictions","hingeLoss"),i=null;n!=null&&(i=V(n,"weights","hingeLoss")),Rn(o.shape,s.shape,"Error in hingeLoss: ");var a=He(1);o=He(2).mul(o).sub(a);var u=a.sub(o.mul(s)).relu();return Sc(u,i,r)}}),xtt=Z({huberLoss_:function(t,e,n,r,o){r===void 0&&(r=1),o===void 0&&(o=fs.SUM_BY_NONZERO_WEIGHTS);var s=V(t,"labels","huberLoss"),i=V(e,"predictions","huberLoss"),a=null;n!=null&&(a=V(n,"weights","huberLoss")),Rn(s.shape,i.shape,"Error in huberLoss: ");var u=He(r),l=i.sub(s).abs(),c=soe(l,u),d=l.sub(c),f=He(.5).mul(c.square()).add(u.mul(d));return Sc(f,a,o)}}),btt=Z({logLoss_:function(t,e,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=fs.SUM_BY_NONZERO_WEIGHTS);var s=V(t,"labels","logLoss"),i=V(e,"predictions","logLoss"),a=null;n!=null&&(a=V(n,"weights","logLoss")),Rn(s.shape,i.shape,"Error in logLoss: ");var u=He(1),l=He(r),c=s.mul(i.add(l).log()).neg().sub(u.sub(s).mul(u.sub(i).add(l).log()));return Sc(c,a,o)}}),wtt=Z({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=fs.SUM_BY_NONZERO_WEIGHTS);var o=V(t,"labels","meanSquaredError"),s=V(e,"predictions","meanSquaredError"),i=null;n!=null&&(i=V(n,"weights","meanSquaredError")),Rn(o.shape,s.shape,"Error in meanSquaredError: ");var a=o.squaredDifference(s);return Sc(a,i,r)}}),ktt=Z({sigmoidCrossEntropy_:function(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=fs.SUM_BY_NONZERO_WEIGHTS);var s=V(t,"multiClassLabels","sigmoidCrossEntropy"),i=V(e,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=V(n,"weights","sigmoidCrossEntropy")),Rn(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=He(r),l=He(1),c=He(.5);s=s.mul(l.sub(u)).add(c.mul(u))}var d=function(f,h){var p=V(f,"labels","sigmoidCrossEntropyWithLogits"),m=V(h,"logits","sigmoidCrossEntropyWithLogits");Rn(p.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=m.relu(),v=m.mul(p),y=m.abs().neg().exp().log1p();return g.sub(v).add(y)}(s,i);return Sc(d,a,o)}}),Ctt=Z({softmaxCrossEntropy_:function(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=fs.SUM_BY_NONZERO_WEIGHTS);var s=V(t,"onehotLabels","softmaxCrossEntropy"),i=V(e,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=V(n,"weights","softmaxCrossEntropy")),Rn(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=He(r),l=He(1),c=He(s.shape[1]);s=s.mul(l.sub(u)).add(u.div(c))}var d=function(f,h,p){if(p===void 0&&(p=-1),p===-1&&(p=h.rank-1),p!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+p);return L_(function(m,g,v){var y=g.logSumExp([p],!0),x=g.toFloat().sub(y);return v([m,x]),{value:x.mul(m).neg().sum([p]),gradFunc:function(b,C){var S=C[0],E=C[1],I=ii(b.shape,[p]);return[b.reshape(I).mul(S.toFloat().sub(E.exp())),b.reshape(I).mul(E.exp().sub(S.toFloat()))]}}})(f,h)}(s,i);return Sc(d,a,o)}}),Stt=Object.freeze({get Reduction(){return fs},absoluteDifference:gtt,computeWeightedLoss:Sc,cosineDistance:vtt,hingeLoss:ytt,huberLoss:xtt,logLoss:btt,meanSquaredError:wtt,sigmoidCrossEntropy:ktt,softmaxCrossEntropy:Ctt});function J6(t,e){return e===void 0&&(e=!1),oe.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=xre(n),s=t.clone(),i=_d([[1]],[1,1]),a=i.clone(),u=n>=r?r:n,l=function(d){var f,h=s,p=a,m=o;f=oe.tidy(function(){var g=s.slice([d,d],[n-d,1]),v=g.norm(),y=s.slice([d,d],[1,1]),x=_d([[-1]]).where(y.greater(0),_d([[1]])),b=y.sub(x.mul(v)),C=g.div(b);a=C.shape[0]===1?i.clone():i.concat(C.slice([1,0],[C.shape[0]-1,C.shape[1]]),0);var S=x.matMul(b).div(v).neg(),E=s.slice([d,0],[n-d,r]),I=S.mul(a);if(d===0)s=E.sub(I.matMul(a.transpose().matMul(E)));else{var T=E.sub(I.matMul(a.transpose().matMul(E)));s=s.slice([0,0],[d,r]).concat(T,0)}var N=o.slice([0,d],[n,o.shape[1]-d]);if(d===0)o=N.sub(N.matMul(a).matMul(I.transpose()));else{var O=N.sub(N.matMul(a).matMul(I.transpose()));o=o.slice([0,0],[n,d]).concat(O,1)}return[a,s,o]}),a=f[0],s=f[1],o=f[2],ni([h,p,m])},c=0;c<u;++c)l(c);return!e&&n>r&&(o=o.slice([0,0],[n,r]),s=s.slice([0,0],[r,r])),[o,s]})}var Ett=Z({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=V(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,s=r.shape.slice(-2),i=s[0],a=s[1];if(!(e<=i))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+i+").");if(!(n<=a))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+a+").");e<0&&(e=i),n<0&&(n=a);var u=E2(0,i,1,"int32").reshape([-1,1]),l=E2(0,a,1,"int32"),c=ko(u,l),d=j_(c.lessEqual(He(+e,"int32")),c.greaterEqual(He(-n,"int32"))),f=nr([i,a],r.dtype);return Ii(xo(r.reshape([-1,i,a])).map(function(h){return Mh(d,h,f)})).reshape(o)}}),_tt=Z({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,G(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){G(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},o=1;o<t.length;++o)r(o)}else e=!0,t=X3(t,t.shape[0],0).map(function(u){return kre(u,[0])});G(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var s=[],i=t,a=function(u){s.push(oe.tidy(function(){var l=i[u];if(u>0)for(var c=0;c<u;++c){var d=yoe(s[c].mulStrict(l)).mul(s[c]);l=l.sub(d)}return l.div(koe(l,"euclidean"))}))};for(o=0;o<t.length;++o)a(o);return e?Ii(s,0):s}}),Itt=Z({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return J6(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(i,a){return i*a}),r=xo(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],s=[];return r.forEach(function(i){var a=J6(i,e),u=a[0],l=a[1];o.push(u),s.push(l)}),[Ii(o,0).reshape(t.shape),Ii(s,0).reshape(t.shape)]}}),Ttt=Object.freeze({bandPart:Ett,gramSchmidt:_tt,qr:Itt});function V_(t,e,n,r,o,s){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),s==null&&(s=0);var i=t.shape[0];return n=Math.min(n,i),G(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),G(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),G(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),G(e.rank===1,function(){return"scores must be a 1D tensor"}),G(e.shape[0]===i,function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+e.shape[0]}),G(0<=s&&s<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+s+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s}}var Ntt=Z({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=V(t,"images","resizeBilinear");G(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),G(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var o=r,s=!1;r.rank===3&&(s=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],a=e[1],u=oe.runKernelFunc(function(l,c){return c([o]),l.resizeBilinear(o,i,a,n)},{x:o},function(l,c){return{x:function(){return oe.runKernelFunc(function(d){return d.resizeBilinearBackprop(l,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:a});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Dtt=Z({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=V(t,"images","resizeNearestNeighbor");G(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),G(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),G(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,s=!1;r.rank===3&&(s=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],a=e[1],u=oe.runKernelFunc(function(l,c){return c([o]),l.resizeNearestNeighbor(o,i,a,n)},{batchImages:o},function(l,c){return{batchImages:function(){return oe.runKernelFunc(function(d){return d.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Rtt=Z({nonMaxSuppression_:function(t,e,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var s=V(t,"boxes","nonMaxSuppression"),i=V(e,"scores","nonMaxSuppression"),a=V_(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return oe.runKernelFunc(function(l){return l.nonMaxSuppression(s,i,n,r,o)},{boxes:s,scores:i},null,"NonMaxSuppressionV3",u)}}),Ott=function(t,e,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),it(this,void 0,void 0,function(){var s,i,a,u,l,c,d;return at(this,function(f){switch(f.label){case 0:return s=V(t,"boxes","nonMaxSuppressionAsync"),i=V(e,"scores","nonMaxSuppressionAsync"),a=V_(s,i,n,r,o),n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold,[4,Promise.all([s.data(),i.data()])];case 1:return u=f.sent(),l=u[0],c=u[1],d=eL(l,c,n,r,o),s!==t&&s.dispose(),i!==e&&i.dispose(),[2,d]}})})},Att=Z({nonMaxSuppressionWithScore_:function(t,e,n,r,o,s){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),s===void 0&&(s=0);var i=V(t,"boxes","nonMaxSuppression"),a=V(e,"scores","nonMaxSuppression"),u=V_(i,a,n,r,o,s),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:s=u.softNmsSigma},c=oe.runKernel("NonMaxSuppressionV5",{boxes:i,scores:a},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),$tt=function(t,e,n,r,o,s){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),s===void 0&&(s=0),it(this,void 0,void 0,function(){var i,a,u,l,c,d,f;return at(this,function(h){switch(h.label){case 0:return i=V(t,"boxes","nonMaxSuppressionAsync"),a=V(e,"scores","nonMaxSuppressionAsync"),u=V_(i,a,n,r,o,s),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,s=u.softNmsSigma,[4,Promise.all([i.data(),a.data()])];case 1:return l=h.sent(),c=l[0],d=l[1],f=tL(c,d,n,r,o,s),i!==t&&i.dispose(),a!==e&&a.dispose(),[2,f]}})})},Mtt=Z({cropAndResize_:function(t,e,n,r,o,s){var i=V(t,"image","cropAndResize"),a=V(e,"boxes","cropAndResize","float32"),u=V(n,"boxInd","cropAndResize","int32");o=o||"bilinear",s=s||0;var l=a.shape[0];return G(i.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),G(a.rank===2&&a.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+a.shape+"."}),G(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+a.shape+"."}),G(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),G(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),G(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),oe.runKernelFunc(function(c,d){return c.cropAndResize(i,a,u,r,o,s)},{images:i,boxes:a,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:s,cropSize:r})}}),mL=Object.freeze({resizeBilinear:Ntt,resizeNearestNeighbor:Dtt,nonMaxSuppression:Rtt,nonMaxSuppressionAsync:Ott,nonMaxSuppressionWithScore:Att,nonMaxSuppressionWithScoreAsync:$tt,cropAndResize:Mtt}),gL=function(t,e){return!(t>0)||e==="linear"},vL=function(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},yL=function(t,e){var n=e,r=wo(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},xL=function(t,e,n){if(e==="linear")return t;if(e==="relu")return Ir(t);if(e==="elu")return xoe(t);if(e==="relu6")return woe(t);if(e==="prelu")return boe(t,n);throw new Error("Unknown fused activation "+e+".")},Ptt=Z({fusedMatMul_:function(t){var e,n=t.a,r=t.b,o=t.transposeA,s=o!==void 0&&o,i=t.transposeB,a=i!==void 0&&i,u=t.bias,l=t.activation,c=l===void 0?"linear":l,d=t.preluActivationWeights;if(gL(oe.state.gradientDepth,c)===!1){var f=z_(n,r,s,a);return u!=null&&(f=Xt(f,u)),xL(f,c,d)}var h=V(n,"a","fused matMul"),p=V(r,"b","fused matMul");e=Dr(h,p),h=e[0],p=e[1];var m=s?h.shape[h.rank-2]:h.shape[h.rank-1],g=a?p.shape[p.rank-1]:p.shape[p.rank-2],v=s?h.shape[h.rank-1]:h.shape[h.rank-2],y=a?p.shape[p.rank-2]:p.shape[p.rank-1],x=h.shape.slice(0,-2),b=p.shape.slice(0,-2),C=dt(x),S=dt(b);G(h.rank>=2&&p.rank>=2&&h.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."}),G(Do(x,b),function(){return"Error in fused matMul: outer dimensions ("+x+") and ("+b+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."}),G(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+s+" and transposeB="+a+" must match."});var E,I,T=h.shape.slice(0,-2).concat([v,y]),N=s?h.as3D(C,m,v):h.as3D(C,v,m),O=a?p.as3D(S,y,g):p.as3D(S,g,y);u!=null&&en(T,(E=Dr(E=V(u,"bias","fused matMul"),h)[0]).shape),d!=null&&(I=V(d,"prelu weights","fused matMul"));var $={a:N,b:O};u!=null&&($.bias=E),d!=null&&($.preluActivationWeights=I);var A=[N,O];return oe.runKernelFunc(function(P,L){var W=P.fusedBatchMatMul({a:N,b:O,transposeA:s,transposeB:a,bias:E,activation:c,preluActivationWeights:I});return L([N,O,W]),W},$,function(P,L){var W=L[0],z=L[1],F=L[2],B=vL(P,F,c),H={};return u!=null&&(H={bias:function(){return yL(E,B)}}),Object.assign(s||a?!s&&a?{a:function(){return B.matMul(z,!1,!1)},b:function(){return B.matMul(W,!0,!1)}}:s&&!a?{a:function(){return z.matMul(B,!1,!0)},b:function(){return W.matMul(B,!1,!1)}}:{a:function(){return z.matMul(B,!0,!0)},b:function(){return B.matMul(W,!0,!0)}}:{a:function(){return B.matMul(z,!1,!0)},b:function(){return W.matMul(B,!0,!1)}},H)},"_FusedMatMul",{transposeA:s,transposeB:a,activation:c},A,[!0]).reshape(T)}}),Ftt=Z({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,s=t.dataFormat,i=s===void 0?"NHWC":s,a=t.dilations,u=a===void 0?[1,1]:a,l=t.dimRoundingMode,c=t.bias,d=t.activation,f=d===void 0?"linear":d,h=t.preluActivationWeights;if(f=f||"linear",gL(oe.state.gradientDepth,f)===!1){var p=ba(e,n,r,o,i,u,l);return c!=null&&(p=Xt(p,c)),xL(p,f,h)}var m=V(e,"x","conv2d"),g=V(n,"filter","conv2d"),v=m,y=!1;m.rank===3&&(y=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),G(v.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."}),G(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),l!=null&&G(Pr(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+o+"."}),G(v.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),G(ai(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),G(i==="NHWC",function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var x,b,C=ip(v.shape,g.shape,r,u,o,l);c!=null&&(x=Dr(x=V(c,"bias","fused conv2d"),m)[0],en(C.outShape,x.shape)),h!=null&&(b=V(h,"prelu weights","fused conv2d"));var S={x:v,filter:g};c!=null&&(S.bias=x),h!=null&&(S.preluActivationWeights=b);var E=[g,v],I=oe.runKernelFunc(function(T,N){var O=T.fusedConv2d({input:v,filter:g,convInfo:C,bias:x,activation:f,preluActivationWeights:b});return N([g,v,O]),O},S,function(T,N){var O=N,$=O[0],A=O[1],P=O[2],L=vL(T,P,f);G(wg(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var W={};return c!=null&&(W={bias:function(){return yL(x,L)}}),Object.assign({x:function(){return doe(A.shape,L,$,r,o)},filter:function(){return lL(A,L,$.shape,r,o)}},W)},"FusedConv2D",{convInfo:C,activation:f},E,[!0]);return y?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}}),Ltt=Z({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,s=t.dataFormat,i=s===void 0?"NHWC":s,a=t.dilations,u=a===void 0?[1,1]:a,l=t.dimRoundingMode,c=t.bias,d=t.activation,f=d===void 0?"linear":d,h=t.preluActivationWeights;if(gL(oe.state.gradientDepth,f)===!1){var p=W_(e,n,r,o,i,u,l);return c!=null&&(p=Xt(p,c)),xL(p,f,h)}var m=V(e,"x","depthwiseConv2d"),g=V(n,"filter","depthwiseConv2d"),v=m,y=!1;m.rank===3&&(y=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),G(v.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."}),G(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),G(v.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),u==null&&(u=[1,1]),G(ai(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&G(Pr(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+o+"."});var x,b,C=ip(v.shape,g.shape,r,u,o,l,!0);c!=null&&(x=Dr(x=V(c,"bias","fused conv2d"),m)[0],en(C.outShape,x.shape)),h!=null&&(b=V(h,"prelu weights","fused depthwiseConv2d"));var S={x:v,filter:g};c!=null&&(S.bias=x),h!=null&&(S.preluActivationWeights=b);var E=[g,v],I=oe.runKernelFunc(function(T,N){var O=T.fusedDepthwiseConv2D({input:v,filter:g,convInfo:C,bias:x,activation:f,preluActivationWeights:b});return N([g,v,O]),O},S,function(T,N){G(wg(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var O=N[0],$=N[1],A=N[2],P=vL(T,A,f),L={};return c!=null&&(L={bias:function(){return yL(x,P)}}),Object.assign({x:function(){return foe($.shape,P,O,C)},filter:function(){return hoe($,P,O.shape,C)}},L)},"FusedDepthwiseConv2D",{convInfo:C,activation:f},E,[!0]);return y?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}}),Btt=Object.freeze({matMul:Ptt,conv2d:Ftt,depthwiseConv2d:Ltt}),jtt=Object.freeze({image:mL,linalg:Ttt,losses:Stt,spectral:ltt,fused:Btt,signal:ptt,square:yZe,squaredDifference:Kre,conv1d:Net,conv2d:ba,conv3d:Det,depthwiseConv2d:W_,separableConv2d:cL,conv2dTranspose:Ret,conv3dTranspose:Oet,op:Z,batchNormalization2d:qZe,batchNormalization3d:KZe,batchNormalization4d:XZe,batchNormalization:QZe,batchNorm:toe,batchNorm2d:JZe,batchNorm3d:ZZe,batchNorm4d:eet,booleanMaskAsync:Tet,complex:Uo,real:Qi,imag:Du,concat:yo,concat1d:FXe,concat2d:LXe,concat3d:BXe,concat4d:jXe,split:X3,matMul:z_,dot:Aet,outerProduct:$et,reverse:sb,reverse1d:Met,reverse2d:Pet,reverse3d:Fet,reverse4d:Let,maxPool:Eo,avgPool:ib,pool:Bet,maxPool3d:jet,avgPool3d:Wet,slice:sl,slice1d:zet,slice2d:Uet,slice3d:goe,slice4d:Vet,abs:xZe,acos:bZe,acosh:wZe,asin:kZe,asinh:CZe,atan:SZe,atanh:EZe,ceil:_Ze,clipByValue:iL,cos:IZe,cosh:TZe,erf:NZe,exp:dA,expm1:DZe,floor:RZe,log:OZe,log1p:AZe,logSigmoid:$Ze,neg:A2,reciprocal:MZe,round:PZe,rsqrt:Xre,sigmoid:Qre,sign:FZe,isNaN:LZe,isInf:BZe,isFinite:jZe,sin:WZe,sinh:zZe,softplus:UZe,sqrt:VZe,step:HZe,tan:GZe,tanh:YZe,all:Het,any:Get,argMax:Yet,argMin:qet,logSumExp:Ket,max:U_,mean:Xet,min:Qet,moments:Jet,sum:yoe,prod:Zet,equal:ioe,equalStrict:vet,greater:yet,greaterEqual:aoe,greaterEqualStrict:xet,greaterStrict:bet,less:wet,lessEqual:ket,lessEqualStrict:Cet,lessStrict:Eet,notEqual:_et,notEqualStrict:Iet,add:Xt,addN:ret,addStrict:oet,atan2:set,div:La,divNoNan:iet,divStrict:aet,floorDiv:ooe,maximum:aL,maximumStrict:uet,minimum:soe,minimumStrict:cet,mod:det,modStrict:fet,mul:hs,mulStrict:het,pow:$2,powStrict:pet,squaredDifferenceStrict:met,sub:ko,subStrict:get,elu:xoe,leakyRelu:ett,prelu:boe,relu:Ir,relu6:woe,selu:ttt,logicalAnd:j_,logicalNot:tet,logicalOr:noe,logicalXor:net,where:Mh,whereAsync:roe,buffer:Pt,print:KXe,batchToSpaceND:yre,broadcastTo:XXe,cast:QXe,clone:JXe,cumsum:ZXe,depthToSpace:eQe,expandDims:Gi,eye:xre,multinomial:tQe,oneHot:aA,pad:sp,pad1d:nQe,pad2d:rQe,pad3d:oQe,pad4d:sQe,rand:iQe,randomNormal:aQe,randomGamma:uQe,randomUniform:bre,reshape:Ua,spaceToBatchND:wre,squeeze:kre,stack:Ii,tile:km,truncatedNormal:lQe,unstack:xo,setdiff1dAsync:cQe,fill:Xu,linspace:PXe,ones:ev,range:E2,scalar:He,tensor:Ho,tensor1d:Zr,tensor2d:_d,tensor3d:K3,tensor4d:Hs,tensor5d:AXe,tensor6d:$Xe,variable:MXe,zeros:nr,onesLike:vre,zerosLike:gn,transpose:qd,softmax:Cc,logSoftmax:vQe,localResponseNormalization:ntt,norm:koe,gather:uL,unsortedSegmentSum:uoe,basicLSTMCell:rtt,multiRNNCell:ott,movingAverage:stt,stridedSlice:itt,topk:att,scatterND:utt,fft:dL,ifft:M2,rfft:fL,irfft:Coe,sparseToDense:ctt,gatherND:dtt,diag:ftt,dropout:htt,hannWindow:hL,hammingWindow:Eoe,frame:pL,stft:_oe,inTopKAsync:mtt});function Ee(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(n){n!=null&&G(n.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function MN(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var Wtt=function(t){function e(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new Nre(n,oe),n}return lu(e,t),e.prototype.write=function(n,r,o){this.firstUse&&(this.firstUse=!1,we().get("IS_NODE")&&C2(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var s={};return this.data.set(s,{values:n,dtype:o}),s},e.prototype.move=function(n,r,o,s){this.data.set(n,{values:r,dtype:s})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(n){return it(this,void 0,void 0,function(){return at(this,function(r){return[2,this.readSync(n)]})})},e.prototype.readSync=function(n){var r=this.data.get(n),o=r.dtype,s=r.complexTensors;return o==="complex64"?cA(this.readSync(s.real.dataId),this.readSync(s.imag.dataId)):this.data.get(n).values},e.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),o=r;if(n.dtype==="string")try{o=r.map(function(s){return b2(s)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Pt(n.shape,n.dtype,o)},e.prototype.makeOutput=function(n,r,o){var s=this.write(n,r,o);return oe.makeTensorFromDataId(s,r,o,this)},e.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},e.prototype.time=function(n){return it(this,void 0,void 0,function(){var r;return at(this,function(o){return r=Eu(),n(),[2,{kernelMs:Eu()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(n,r){var o=this.makeOutput(null,n.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:oe.keep(n.clone()),imag:oe.keep(r.clone())},o},e.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,o){if(Ee(n,"slice"),Ire(n.shape,r,o)){var s=Tre(r,n.strides),i=dt(o);return Ho(this.readSync(n.dataId).subarray(s,s+i),o,n.dtype)}for(var a=Pt(o,n.dtype),u=this.bufferSync(n),l=0;l<a.size;++l){var c=a.indexToLoc(l).map(function(d,f){return d+r[f]});a.values[l]=u.get.apply(u,c)}return a.toTensor()},e.prototype.stridedSlice=function(n,r,o,s){Ee(n,"stridedSlice");var i=J3(r,o,s);if(i.some(function(h){return h===0}))return Ho([],i);for(var a=Pt(i,n.dtype),u=this.bufferSync(n),l=0;l<a.size;l++){for(var c=a.indexToLoc(l),d=new Array(c.length),f=0;f<d.length;f++)d[f]=c[f]*s[f]+r[f];a.set.apply(a,[u.get.apply(u,d)].concat(c))}return a.toTensor()},e.prototype.diag=function(n){for(var r=this.readSync(n.dataId),o=Pt([n.size,n.size],n.dtype),s=o.values,i=0;i<r.length;i++)s[i*n.size+i]=r[i];return o.toTensor()},e.prototype.unstack=function(n,r){for(var o=n.shape[r],s=new Array(n.rank-1),i=0,a=0;a<n.rank;a++)a!==r&&(s[i++]=n.shape[a]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(o);for(a=0;a<c.length;a++)u[r]=a,c[a]=this.slice(n,u,l).reshape(s);return c},e.prototype.reverse=function(n,r){Ee(n,"reverse");for(var o=Pt(n.shape,n.dtype),s=this.bufferSync(n),i=function(u){var l=o.indexToLoc(u),c=l.slice();r.forEach(function(d){return c[d]=n.shape[d]-1-c[d]}),o.set.apply(o,[s.get.apply(s,c)].concat(l))},a=0;a<o.size;a++)i(a);return o.toTensor()},e.prototype.concat=function(n,r){var o=this;if(n[0].dtype==="complex64"){var s=n.map(function(h){return Qi(h)}),i=n.map(function(h){return Du(h)});return Uo(this.concat(s,r),this.concat(i,r))}var a=n.map(function(h){var p=dt(h.shape.slice(r));return h.as2D(-1,p)}),u=bg(a.map(function(h){return h.shape}),1),l=Pt(u,n[0].dtype).values;if(a[0].shape[0]===1){var c=0;a.forEach(function(h){l.set(o.readSync(h.dataId),c),c+=h.size})}else{var d=0;a.forEach(function(h){for(var p=o.readSync(h.dataId),m=0,g=0;g<h.shape[0];++g)for(var v=g*u[1]+d,y=0;y<h.shape[1];++y)l[v+y]=p[m++];d+=h.shape[1]})}var f=bg(n.map(function(h){return h.shape}),r);return Ho(l,f,n[0].dtype)},e.prototype.neg=function(n){return Ee(n,"neg"),this.multiply(He(-1),n)},e.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,s,i,a){return{real:o+i,imag:s+a}}):this.broadcastedBinaryOp(n,r,Vo(n.dtype,r.dtype),function(o,s){return o+s})},e.prototype.addN=function(n){var r=this;Ee(n,"addN");for(var o=n.map(function(c){return r.readSync(c.dataId)}),s=Pt(n[0].shape,n[0].dtype),i=s.values,a=0;a<n.length;a++)for(var u=o[a],l=0;l<i.length;l++)i[l]+=u[l];return s.toTensor()},e.prototype.softmax=function(n,r){var o=So([r],n.shape),s=this.max(n,o),i=ii(s.shape,o),a=this.subtract(n,s.reshape(i)),u=this.exp(a),l=this.sum(u,o).reshape(i);return this.realDivide(u,l)},e.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,s,i,a){return{real:o-i,imag:s-a}}):this.broadcastedBinaryOp(n,r,Vo(n.dtype,r.dtype),function(o,s){return o-s})},e.prototype.pow=function(n,r){return Ee([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,s){return Math.pow(o,s)})},e.prototype.batchMatMul=function(n,r,o,s){Ee([n,r],"matMul");for(var i=o?n.shape[1]:n.shape[2],a=o?n.shape[2]:n.shape[1],u=s?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),d=this.readSync(r.dataId),f=o?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],h=f[0],p=f[1],m=f[2],g=s?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],v=g[0],y=g[1],x=g[2],b=a*u,C=Pt([l,a,u],n.dtype),S=C.values,E=this.blockSize,I=0;I<l;I++)for(var T=0;T<a;T+=E)for(var N=0;N<u;N+=E)for(var O=0;O<i;O+=E)for(var $=Math.min(T+E,a),A=Math.min(N+E,u),P=Math.min(O+E,i),L=T;L<$;L++)for(var W=N;W<A;W++){for(var z=0,F=O;F<P;F++)z+=c[I*h+L*p+F*m]*d[F*v+W*y+I*x];S[I*b+(L*u+W)]+=z}return C.toTensor()},e.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,s=n.transposeA,i=n.transposeB,a=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,o,s,i);return a&&(c=this.add(c,a)),u&&(c=MN(this,c,u,l)),c},e.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,s,i,a){return{real:o*i-s*a,imag:o*a+s*i}}):this.broadcastedBinaryOp(n,r,Vo(n.dtype,r.dtype),function(o,s){return o*s})},e.prototype.realDivide=function(n,r){return Ee([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(o,s){return o/s})},e.prototype.floorDiv=function(n,r){return Ee([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(o,s){return Math.floor(o/s)})},e.prototype.sum=function(n,r){Ee(n,"sum"),fi("sum",r,n.rank);for(var o=ss(n.shape,r),s=o[0],i=o[1],a=nr(s,Vo(n.dtype,"int32")),u=dt(i),l=this.readSync(a.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=0,p=0;p<u;++p)h+=c[f+p];l[d]=h}return a},e.prototype.prod=function(n,r){Ee(n,"sum");for(var o=ss(n.shape,r),s=o[0],i=o[1],a=nr(s,Vo(n.dtype,"int32")),u=dt(i),l=this.readSync(a.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=1,p=0;p<u;++p)h*=c[f+p];l[d]=h}return a},e.prototype.unsortedSegmentSum=function(n,r,o){Ee(n,"unsortedSegmentSum");for(var s=[],i=n.rank-r.rank,a=0;a<i;++a)r=r.expandDims(a+1);for(a=0;a<o;++a){var u=He(a,"int32"),l=ioe(u,r).asType("float32").mul(n).sum(0);s.push(l)}return Ii(s)},e.prototype.argMin=function(n,r){Ee(n,"argMin");var o=[r];fi("argMin",o,n.rank);for(var s=ss(n.shape,o),i=s[0],a=s[1],u=nr(i,"int32"),l=dt(a),c=this.readSync(u.dataId),d=this.readSync(n.dataId),f=0;f<c.length;++f){for(var h=f*l,p=d[h],m=0,g=0;g<l;++g){var v=d[h+g];v<p&&(p=v,m=g)}c[f]=m}return u},e.prototype.argMax=function(n,r){Ee(n,"argMax");var o=[r];fi("argMax",o,n.rank);for(var s=ss(n.shape,o),i=s[0],a=s[1],u=nr(i,"int32"),l=dt(a),c=this.readSync(u.dataId),d=this.readSync(n.dataId),f=0;f<c.length;++f){for(var h=f*l,p=d[h],m=0,g=0;g<l;++g){var v=d[h+g];v>p&&(p=v,m=g)}c[f]=m}return u},e.prototype.cumsum=function(n,r,o,s){if(Ee(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var i=Vo(n.dtype,"int32"),a=nr(n.shape,i),u=this.readSync(a.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],d=s?function(g,v){return g+c-v-1}:function(g,v){return g+v},f=0;f<l.length;f+=c)for(var h=0;h<c;h++){var p=d(f,h);if(h===0)u[p]=o?0:l[p];else{var m=d(f,h-1);u[p]=o?l[m]+u[m]:l[p]+u[m]}}return a},e.prototype.equal=function(n,r){return Ee([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(o,s){return o===s?1:0})},e.prototype.notEqual=function(n,r){return Ee([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,s){return o!==s?1:0})},e.prototype.less=function(n,r){return Ee([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(o,s){return o<s?1:0})},e.prototype.lessEqual=function(n,r){return Ee([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,s){return o<=s?1:0})},e.prototype.greater=function(n,r){return Ee([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(o,s){return o>s?1:0})},e.prototype.greaterEqual=function(n,r){return Ee([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,s){return o>=s?1:0})},e.prototype.logicalNot=function(n){Ee(n,"logicalNot");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),s=0;s<r.length;++s)o[s]=r[s]?0:1;return this.makeOutput(o,n.shape,"bool")},e.prototype.logicalAnd=function(n,r){return Ee([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(o,s){return o&&s})},e.prototype.logicalOr=function(n,r){return Ee([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(o,s){return o||s})},e.prototype.select=function(n,r,o){Ee([n,r,o],"select");for(var s=this.readSync(n.dataId),i=this.readSync(r.dataId),a=this.readSync(o.dataId),u=nr(r.shape,Vo(r.dtype,o.dtype)),l=this.readSync(u.dataId),c=0,d=n.rank===0||n.rank>1||r.rank===1?1:dt(r.shape.slice(1)),f=0;f<s.length;f++)for(var h=0;h<d;h++)s[f]===1?l[c++]=i[f]:l[c++]=a[f];return u},e.prototype.where=function(n){Ee([n],"where");var r=this.readSync(n.dataId);return nL(n.shape,r)},e.prototype.topk=function(n,r,o){return Ee(n,"topk"),Fre(this.readSync(n.dataId),n.shape,n.dtype,r)},e.prototype.min=function(n,r){Ee(n,"min"),fi("min",r,n.rank);for(var o=ss(n.shape,r),s=o[0],i=o[1],a=nr(s,n.dtype),u=dt(i),l=this.readSync(a.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],p=0;p<u;++p){var m=c[f+p];m<h&&(h=m)}l[d]=h}return a},e.prototype.minimum=function(n,r){return Ee([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,s){return Math.min(o,s)})},e.prototype.mod=function(n,r){return Ee([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,s){var i=o%s;return o<0&&s<0||o>=0&&s>=0?i:(i+s)%s})},e.prototype.max=function(n,r){Ee(n,"max"),fi("max",r,n.rank);for(var o=ss(n.shape,r),s=o[0],i=o[1],a=nr(s,n.dtype),u=dt(i),l=this.readSync(a.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],p=0;p<u;++p){var m=c[f+p];m>h&&(h=m)}l[d]=h}return a},e.prototype.maximum=function(n,r){return Ee([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,s){return Math.max(o,s)})},e.prototype.all=function(n,r){Ee(n,"all"),fi("all",r,n.rank);for(var o=ss(n.shape,r),s=o[0],i=o[1],a=nr(s,n.dtype),u=dt(i),l=this.readSync(a.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],p=0;p<u;++p){var m=c[f+p];h=h&&m}l[d]=h}return a},e.prototype.any=function(n,r){Ee(n,"any"),fi("any",r,n.rank);for(var o=ss(n.shape,r),s=o[0],i=o[1],a=nr(s,n.dtype),u=dt(i),l=this.readSync(a.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],p=0;p<u;++p){var m=c[f+p];h=h||m}l[d]=h}return a},e.prototype.squaredDifference=function(n,r){return Ee([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,s){var i=o-s;return i*i})},e.prototype.ceil=function(n){Ee(n,"ceil");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s)o[s]=Math.ceil(r[s]);return this.makeOutput(o,n.shape,"float32")},e.prototype.floor=function(n){Ee(n,"floor");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s)o[s]=Math.floor(r[s]);return this.makeOutput(o,n.shape,"float32")},e.prototype.sign=function(n){Ee(n,"x");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s)r[s]<0?o[s]=-1:r[s]>0?o[s]=1:o[s]=0;return this.makeOutput(o,n.shape,"float32")},e.prototype.isNaN=function(n){Ee(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),s=0;s<r.length;++s)Number.isNaN(r[s])&&(o[s]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.isInf=function(n){Ee(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),s=0;s<r.length;++s)Math.abs(r[s])===1/0&&(o[s]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.isFinite=function(n){Ee(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),s=0;s<r.length;++s)Number.isFinite(r[s])&&(o[s]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.round=function(n){Ee(n,"round");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s){var i=Math.floor(r[s]);r[s]-i<.5?o[s]=Math.floor(r[s]):r[s]-i>.5?o[s]=Math.ceil(r[s]):o[s]=i%2==0?i:i+1}return this.makeOutput(o,n.shape,"float32")},e.prototype.exp=function(n){Ee(n,"exp");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s)o[s]=Math.exp(r[s]);return this.makeOutput(o,n.shape,"float32")},e.prototype.expm1=function(n){Ee(n,"expm1");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s)o[s]=Math.expm1(r[s]);return this.makeOutput(o,n.shape,"float32")},e.prototype.log=function(n){Ee(n,"log");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s){var i=r[s];o[s]=Math.log(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.log1p=function(n){Ee(n,"log1p");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s){var i=r[s];o[s]=Math.log1p(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.sqrt=function(n){Ee(n,"sqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s){var i=r[s];o[s]=Math.sqrt(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.rsqrt=function(n){Ee(n,"rsqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s){var i=r[s];o[s]=1/Math.sqrt(i)}return this.makeOutput(o,n.shape,"float32")},e.prototype.reciprocal=function(n){Ee(n,"reciprocal");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),s=0;s<r.length;++s)o[s]=1/r[s];return this.makeOutput(o,n.shape,"float32")},e.prototype.linear=function(n){return n},e.prototype.relu=function(n){Ee(n,"relu");for(var r=nr(n.shape,n.dtype),o=this.readSync(r.dataId),s=this.readSync(n.dataId),i=0;i<s.length;++i)o[i]=Math.max(0,s[i]);return r},e.prototype.relu6=function(n){Ee(n,"relu");for(var r=nr(n.shape,n.dtype),o=this.readSync(r.dataId),s=this.readSync(n.dataId),i=0;i<s.length;++i)o[i]=Math.min(Math.max(0,s[i]),6);return r},e.prototype.prelu=function(n,r){return Ee([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,s){return o<0?s*o:o})},e.prototype.elu=function(n){Ee(n,"elu");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var i=o[s];r[s]=i>=0?i:Math.exp(i)-1}return this.makeOutput(r,n.shape,"float32")},e.prototype.eluDer=function(n,r){Ee([n,r],"eluDer");for(var o=new Float32Array(r.size),s=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<s.length;++a){var u=s[a];o[a]=u>=1?i[a]:i[a]*(u+1)}return this.makeOutput(o,r.shape,"float32")},e.prototype.selu=function(n){Ee(n,"selu");for(var r=oL,o=sL,s=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var u=i[a];s[a]=u>=0?o*u:r*(Math.exp(u)-1)}return this.makeOutput(s,n.shape,"float32")},e.prototype.clip=function(n,r,o){Ee(n,"clip");for(var s=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var u=i[a];s[a]=u>o?o:u<r?r:u}return this.makeOutput(s,n.shape,"float32")},e.prototype.abs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.abs(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<n.size;++s){var i=o[2*s],a=o[2*s+1];r[s]=Math.hypot(i,a)}return this.makeOutput(r,n.shape,"float32")},e.prototype.int=function(n){Ee(n,"int");for(var r=new Int32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=o[s];return this.makeOutput(r,n.shape,"int32")},e.prototype.sigmoid=function(n){Ee(n,"sigmoid");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=1/(1+Math.exp(-o[s]));return this.makeOutput(r,n.shape,"float32")},e.prototype.softplus=function(n){Ee(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,o=new Float32Array(n.size),s=this.readSync(n.dataId),i=0;i<s.length;++i){var a=s[i]>-r,u=s[i]<r,l=Math.exp(s[i]),c=void 0;c=u?l:a?s[i]:Math.log(1+l),o[i]=c}return this.makeOutput(o,n.shape,"float32")},e.prototype.sin=function(n){Ee(n,"sin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.sin(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cos=function(n){Ee(n,"cos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.cos(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tan=function(n){Ee(n,"tan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.tan(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asin=function(n){Ee(n,"asin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.asin(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acos=function(n){Ee(n,"acos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.acos(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan=function(n){Ee(n,"atan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.atan(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan2=function(n,r){return Ee([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,s){return Math.atan2(o,s)})},e.prototype.sinh=function(n){Ee(n,"sinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.sinh(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cosh=function(n){Ee(n,"cosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.cosh(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tanh=function(n){Ee(n,"tanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=jKe(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asinh=function(n){Ee(n,"asinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.asinh(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acosh=function(n){Ee(n,"acosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.acosh(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atanh=function(n){Ee(n,"atanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s)r[s]=Math.atanh(o[s]);return this.makeOutput(r,n.shape,"float32")},e.prototype.erf=function(n){Ee(n,"erf");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var i=Math.sign(o[s]),a=Math.abs(o[s]),u=1/(1+.3275911*a);r[s]=i*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-a*a))}return this.makeOutput(r,n.shape,"float32")},e.prototype.step=function(n,r){r===void 0&&(r=0),Ee(n,"step");for(var o=new Float32Array(n.size),s=this.readSync(n.dataId),i=0;i<s.length;++i){var a=s[i];isNaN(a)?o[i]=NaN:o[i]=a>0?1:r}return this.makeOutput(o,n.shape,"float32")},e.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,s=n.convInfo,i=n.bias,a=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,o,s);return i&&(l=this.add(l,i)),a&&(l=MN(this,l,a,u)),l},e.prototype.conv2d=function(n,r,o){Ee([n,r],"conv2d");for(var s=o.filterHeight,i=o.filterWidth,a=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,c=o.padInfo.top,d=o.dataFormat==="channelsLast",f=Pt(o.outShape,n.dtype),h=n.strides[0],p=d?n.strides[1]:n.strides[2],m=d?n.strides[2]:1,g=d?1:n.strides[1],v=f.strides[0],y=d?f.strides[1]:f.strides[2],x=d?f.strides[2]:1,b=d?1:f.strides[1],C=this.readSync(n.dataId),S=this.readSync(r.dataId),E=f.values,I=0;I<o.batchSize;++I)for(var T=I*h,N=I*v,O=0;O<o.outHeight;++O)for(var $=N+O*y,A=O*o.strideHeight-c,P=0;P<s;P++){var L=A+P*a;if(!(L<0||L>=o.inHeight))for(var W=P*r.strides[0],z=T+L*p,F=0;F<o.outWidth;++F)for(var B=$+F*x,H=F*o.strideWidth-l,X=0;X<i;X++){var te=H+X*u;if(!(te<0||te>=o.inWidth))for(var re=z+te*m,ue=W+X*r.strides[1],Q=0;Q<o.inChannels;++Q){for(var ce=C[re+Q*g],ke=0;ke<o.outChannels;++ke)E[B+ke*b]+=ce*S[ue+ke];ue+=o.outChannels}}}return f.toTensor()},e.prototype.conv3d=function(n,r,o){for(var s=o.filterDepth,i=o.filterHeight,a=o.filterWidth,u=o.dilationDepth,l=o.dilationHeight,c=o.dilationWidth,d=o.padInfo.front,f=o.padInfo.left,h=o.padInfo.top,p=Pt(o.outShape,n.dtype),m=this.readSync(n.dataId),g=this.readSync(r.dataId),v=p.values,y=0;y<o.batchSize;++y)for(var x=y*n.strides[0],b=y*p.strides[0],C=0;C<o.outDepth;++C)for(var S=b+C*p.strides[1],E=C*o.strideDepth-d,I=0;I<s;I++){var T=E+I*u;if(!(T<0||T>=o.inDepth))for(var N=I*r.strides[0],O=x+T*n.strides[1],$=0;$<o.outHeight;++$)for(var A=S+$*p.strides[2],P=$*o.strideHeight-h,L=0;L<i;L++){var W=P+L*l;if(!(W<0||W>=o.inHeight))for(var z=N+L*r.strides[1],F=O+W*n.strides[2],B=0;B<o.outWidth;++B)for(var H=A+B*o.outChannels,X=B*o.strideWidth-f,te=0;te<a;te++){var re=X+te*c;if(!(re<0||re>=o.inWidth))for(var ue=z+te*r.strides[2],Q=F+re*o.inChannels,ce=ue,ke=0;ke<o.inChannels;++ke){for(var Ce=m[Q+ke],_e=0;_e<o.outChannels;++_e)v[H+_e]+=Ce*g[ce+_e];ce+=o.outChannels}}}}return p.toTensor()},e.prototype.conv2dDerInput=function(n,r,o){Ee([n,r],"conv2dDerInput");for(var s=Pt(o.inShape,"float32"),i=s.values,a=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],d=l[1],f=l[2],h=o.batchSize,p=o.filterHeight,m=o.filterWidth,g=o.inChannels,v=o.inHeight,y=o.inWidth,x=o.outChannels,b=o.outHeight,C=o.outWidth,S=o.strideHeight,E=o.strideWidth,I=o.dataFormat,T=p-1-o.padInfo.top,N=m-1-o.padInfo.left,O=I==="channelsLast",$=s.strides[0],A=O?s.strides[1]:s.strides[2],P=O?s.strides[2]:1,L=O?1:s.strides[1],W=n.strides[0],z=O?n.strides[1]:n.strides[2],F=O?n.strides[2]:1,B=O?1:n.strides[1],H=0;H<h;++H)for(var X=0;X<g;++X)for(var te=0;te<v;++te)for(var re=te-T,ue=Math.max(0,Math.ceil(re/S)),Q=Math.min(b,(p+re)/S),ce=0;ce<y;++ce){for(var ke=ce-N,Ce=Math.max(0,Math.ceil(ke/E)),_e=Math.min(C,(m+ke)/E),Le=0,Ie=ue;Ie<Q;++Ie)for(var Pe=Ie*S-re,Ue=Ce;Ue<_e;++Ue)for(var lt=W*H+z*Ie+F*Ue,Me=c*(p-1-Pe)+d*(m-1-(Ue*E-ke))+f*X,Ke=0;Ke<x;++Ke)Le+=a[lt+B*Ke]*u[Me+Ke];i[$*H+A*te+P*ce+L*X]=Le}return s.toTensor()},e.prototype.conv3dDerInput=function(n,r,o){for(var s=Pt(o.inShape,"float32"),i=s.values,a=s.strides,u=a[0],l=a[1],c=a[2],d=a[3],f=this.readSync(n.dataId),h=n.strides,p=h[0],m=h[1],g=h[2],v=h[3],y=this.readSync(r.dataId),x=r.strides,b=x[0],C=x[1],S=x[2],E=x[3],I=o.batchSize,T=o.filterDepth,N=o.filterHeight,O=o.filterWidth,$=o.inChannels,A=o.inDepth,P=o.inHeight,L=o.inWidth,W=o.outChannels,z=o.outDepth,F=o.outHeight,B=o.outWidth,H=o.strideDepth,X=o.strideHeight,te=o.strideWidth,re=T-1-o.padInfo.front,ue=N-1-o.padInfo.top,Q=O-1-o.padInfo.left,ce=0;ce<I;++ce)for(var ke=0;ke<$;++ke)for(var Ce=0;Ce<A;++Ce)for(var _e=Ce-re,Le=Math.max(0,Math.ceil(_e/H)),Ie=Math.min(z,(T+_e)/H),Pe=0;Pe<P;++Pe)for(var Ue=Pe-ue,lt=Math.max(0,Math.ceil(Ue/X)),Me=Math.min(F,(N+Ue)/X),Ke=0;Ke<L;++Ke){for(var xt=Ke-Q,_t=Math.max(0,Math.ceil(xt/te)),tn=Math.min(B,(O+xt)/te),Ot=0,jt=Le;jt<Ie;++jt)for(var sn=jt*H-_e,An=lt;An<Me;++An)for(var Ne=An*X-Ue,ze=_t;ze<tn;++ze)for(var Be=p*ce+m*jt+g*An+v*ze,It=b*(T-1-sn)+C*(N-1-Ne)+S*(O-1-(ze*te-xt))+E*ke,At=0;At<W;++At)Ot+=f[Be+At]*y[It+At];i[u*ce+l*Ce+c*Pe+d*Ke+ke]=Ot}return s.toTensor()},e.prototype.conv2dDerFilter=function(n,r,o){Ee([n,r],"conv2dDerFilter");for(var s=o.strideHeight,i=o.strideWidth,a=o.filterHeight,u=o.filterWidth,l=o.dataFormat==="channelsLast",c=Pt(o.filterShape,"float32"),d=o.padInfo.left,f=o.padInfo.top,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((f-m)/s)),v=Math.min(o.outHeight,(o.inHeight+f-m)/s),y=0;y<u;++y)for(var x=Math.max(0,Math.ceil((d-y)/i)),b=Math.min(o.outWidth,(o.inWidth+d-y)/i),C=0;C<o.inChannels;++C)for(var S=0;S<o.outChannels;++S){for(var E=0,I=0;I<o.batchSize;++I)for(var T=g;T<v;++T)for(var N=m+T*s-f,O=x;O<b;++O){var $=y+O*i-d;E+=l?h.get(I,N,$,C)*p.get(I,T,O,S):h.get(I,C,N,$)*p.get(I,S,T,O)}c.set(E,m,y,C,S)}return c.toTensor()},e.prototype.conv3dDerFilter=function(n,r,o){for(var s=o.strideDepth,i=o.strideHeight,a=o.strideWidth,u=o.filterDepth,l=o.filterHeight,c=o.filterWidth,d=Pt(o.filterShape,"float32"),f=d.values,h=d.strides,p=h[0],m=h[1],g=h[2],v=h[3],y=this.readSync(r.dataId),x=r.strides,b=x[0],C=x[1],S=x[2],E=x[3],I=this.readSync(n.dataId),T=n.strides,N=T[0],O=T[1],$=T[2],A=T[3],P=o.padInfo.front,L=o.padInfo.left,W=o.padInfo.top,z=0;z<u;++z)for(var F=Math.max(0,Math.ceil((P-z)/s)),B=Math.min(o.outDepth,(o.inDepth+P-z)/s),H=z*p,X=0;X<l;++X)for(var te=Math.max(0,Math.ceil((W-X)/i)),re=Math.min(o.outHeight,(o.inHeight+W-X)/i),ue=X*m+H,Q=0;Q<c;++Q)for(var ce=Math.max(0,Math.ceil((L-Q)/a)),ke=Math.min(o.outWidth,(o.inWidth+L-Q)/a),Ce=Q*g+ue,_e=0;_e<o.inChannels;++_e)for(var Le=_e*v+Ce,Ie=0;Ie<o.outChannels;++Ie){for(var Pe=0,Ue=0;Ue<o.batchSize;++Ue)for(var lt=Ue*N,Me=Ue*b,Ke=F;Ke<B;++Ke)for(var xt=(z+Ke*s-P)*O+lt,_t=Ke*C+Me,tn=te;tn<re;++tn)for(var Ot=(X+tn*i-W)*$+xt,jt=tn*S+_t,sn=ce;sn<ke;++sn){var An=sn*E+jt;Pe+=I[(Q+sn*a-L)*A+Ot+_e]*y[An+Ie]}f[Le+Ie]=Pe}return d.toTensor()},e.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,o=n.filter,s=n.convInfo,i=n.bias,a=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,o,s);return i&&(l=this.add(l,i)),a&&(l=MN(this,l,a,u)),l},e.prototype.depthwiseConv2D=function(n,r,o){Ee([n,r],"depthwiseConv2D");for(var s=o.filterHeight,i=o.filterWidth,a=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,c=o.padInfo.top,d=o.outChannels/o.inChannels,f=Pt(o.outShape,n.dtype),h=this.readSync(n.dataId),p=this.readSync(r.dataId),m=f.values,g=0;g<o.batchSize;++g)for(var v=g*n.strides[0],y=g*f.strides[0],x=0;x<o.outHeight;++x)for(var b=y+x*f.strides[1],C=x*o.strideHeight-l,S=0;S<s;++S){var E=C+S*a;if(!(E<0||E>=o.inHeight))for(var I=S*r.strides[0],T=v+E*n.strides[1],N=0;N<o.outWidth;++N)for(var O=b+N*f.strides[2],$=N*o.strideWidth-c,A=0;A<i;++A){var P=$+A*u;if(!(P<0||P>=o.inWidth))for(var L=I+A*r.strides[1],W=T+P*o.inChannels,z=O,F=L,B=0;B<o.inChannels;++B){for(var H=h[W+B],X=0;X<d;++X)m[z+X]+=H*p[F+X];z+=d,F+=d}}}return f.toTensor()},e.prototype.depthwiseConv2DDerInput=function(n,r,o){Ee([n,r],"depthwiseConv2DDerInput");for(var s=Pt(o.inShape,"float32"),i=s.values,a=s.strides,u=a[0],l=a[1],c=a[2],d=this.readSync(n.dataId),f=n.strides,h=f[0],p=f[1],m=f[2],g=this.readSync(r.dataId),v=r.strides,y=v[0],x=v[1],b=v[2],C=o.batchSize,S=o.filterHeight,E=o.filterWidth,I=o.inChannels,T=o.inHeight,N=o.inWidth,O=o.outChannels,$=o.outHeight,A=o.outWidth,P=o.strideHeight,L=o.strideWidth,W=S-1-o.padInfo.top,z=E-1-o.padInfo.left,F=O/I,B=0;B<C;++B)for(var H=0;H<I;++H)for(var X=0;X<T;++X)for(var te=X-W,re=Math.max(0,Math.ceil(te/P)),ue=Math.min($,(S+te)/P),Q=0;Q<N;++Q){for(var ce=Q-z,ke=Math.max(0,Math.ceil(ce/L)),Ce=Math.min(A,(E+ce)/L),_e=0,Le=re;Le<ue;++Le)for(var Ie=Le*P-te,Pe=ke;Pe<Ce;++Pe)for(var Ue=h*B+p*Le+m*Pe,lt=y*(S-1-Ie)+x*(E-1-(Pe*L-ce))+b*H,Me=0;Me<F;++Me)_e+=d[Ue+(H*F+Me)]*g[lt+Me];i[u*B+l*X+c*Q+H]=_e}return s.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(n,r,o){Ee([n,r],"depthwiseConv2DDerFilter");for(var s=o.strideHeight,i=o.strideWidth,a=o.filterHeight,u=o.filterWidth,l=Pt(o.filterShape,"float32"),c=o.padInfo.left,d=o.padInfo.top,f=o.outChannels/o.inChannels,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((d-m)/s)),v=Math.min(o.outHeight,(o.inHeight+d-m)/s),y=0;y<u;++y)for(var x=Math.max(0,Math.ceil((c-y)/i)),b=Math.min(o.outWidth,(o.inWidth+c-y)/i),C=0;C<o.outChannels;++C){for(var S=Math.trunc(C/f),E=C%f,I=0,T=0;T<o.batchSize;++T)for(var N=g;N<v;++N)for(var O=m+N*s-d,$=x;$<b;++$){var A=y+$*i-c;I+=h.get(T,O,A,S)*p.get(T,N,$,C)}l.set(I,m,y,S,E)}return l.toTensor()},e.prototype.tile=function(n,r){return Ee(n,"tile"),Pre(this.bufferSync(n),r)},e.prototype.pad=function(n,r,o){Ee(n,"pad");var s=r.map(function(f,h){return f[0]+n.shape[h]+f[1]}),i=r.map(function(f){return f[0]}),a=this.bufferSync(n),u=Pt(s,n.dtype);o!==0&&u.values.fill(o);for(var l=0;l<n.size;l++){var c=a.indexToLoc(l),d=c.map(function(f,h){return f+i[h]});u.set.apply(u,[a.get.apply(a,c)].concat(d))}return u.toTensor()},e.prototype.transpose=function(n,r){Ee(n,"transpose");for(var o=new Array(n.rank),s=0;s<o.length;s++)o[s]=n.shape[r[s]];var i=this.readSync(n.dataId),a=Pt(o,n.dtype),u=this.bufferSync(n);for(s=0;s<n.size;++s){for(var l=u.indexToLoc(s),c=new Array(l.length),d=0;d<c.length;d++)c[d]=l[r[d]];var f=a.locToIndex(c);a.values[f]=i[s]}return a.toTensor()},e.prototype.gather=function(n,r,o){Ee([n,r],"gather");var s=n.shape.slice(),i=this.readSync(r.dataId);s[o]=i.length;for(var a=Pt(s,n.dtype),u=this.bufferSync(n),l=0;l<a.size;++l){var c=a.indexToLoc(l),d=c.slice();d[o]=i[c[o]];var f=u.locToIndex(d);a.values[l]=u.values[f]}return a.toTensor()},e.prototype.batchToSpaceND=function(n,r,o){Ee([n],"batchToSpaceND");var s=r.reduce(function(d,f){return d*f}),i=_2(n.shape,r,s),a=I2(i.length,r.length),u=T2(n.shape,r,s),l=Cre(o,r.length),c=Sre(u,o,r.length);return n.reshape(i).transpose(a).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,o){Ee([n],"spaceToBatchND");var s=r.reduce(function(f,h){return f*h}),i=[[0,0]];i.push.apply(i,o);for(var a=1+r.length;a<n.shape.length;++a)i.push([0,0]);var u=n.pad(i),l=_2(u.shape,r,s,!1),c=I2(l.length,r.length,!1),d=T2(u.shape,r,s,!1);return u.reshape(l).transpose(c).reshape(d)},e.prototype.pool=function(n,r,o){Ee(n,"pool");for(var s=r.strideHeight,i=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,h=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(n.dataId),m=Pt(r.outShape,n.dtype),g=m.values,v=r.outShape[1]*r.outShape[2]*r.outShape[3],y=r.outShape[2]*r.outShape[3],x=r.outShape[3],b=0;b<r.batchSize;++b)for(var C=b*v,S=b*n.strides[0],E=0;E<r.inChannels;++E)for(var I=0;I<r.outHeight;++I)for(var T=I*s-d,N=Math.max(0,T),O=Math.min(r.inHeight,l+T),$=C+I*y,A=0;A<r.outWidth;++A){for(var P=A*i-f,L=Math.max(0,P),W=Math.min(r.inWidth,c+P),z=h,F=0,B=0,H=N;H<O;H+=a){for(var X=S+H*n.strides[1],te=L;te<W;te+=u){var re=p[X+te*n.strides[2]+E];o==="max"&&re>z?z=re:o==="avg"&&(F+=re,B++)}if(isNaN(z))break}g[$+A*x+E]=o==="avg"?F/B:z}return m.toTensor()},e.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},e.prototype.maxPoolPositions=function(n,r){for(var o=Pt(r.outShape,"int32"),s=r.strideHeight,i=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,h=this.bufferSync(n),p=0;p<r.batchSize;++p)for(var m=0;m<r.inChannels;++m)for(var g=0;g<r.outHeight;++g){for(var v=g*s-d,y=v;y<0;)y+=a;for(var x=Math.min(r.inHeight,l+v),b=0;b<r.outWidth;++b){for(var C=b*i-f,S=C;S<0;)S+=u;for(var E=Math.min(r.inWidth,c+C),I=Number.NEGATIVE_INFINITY,T=-1,N=y;N<x;N+=a)for(var O=N-v,$=S;$<E;$+=u){var A=$-C,P=h.get(p,N,$,m);P>I&&(I=P,T=O*c+A)}o.set(T,p,g,b,m)}}return o.toTensor()},e.prototype.maxPoolBackprop=function(n,r,o,s){Ee([r,o],"maxPoolBackprop");for(var i=this.maxPoolPositions(r,s),a=s.strideHeight,u=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.effectiveFilterHeight,f=s.effectiveFilterWidth,h=f-1-s.padInfo.left,p=d-1-s.padInfo.top,m=Pt(r.shape,"float32"),g=this.bufferSync(i),v=this.bufferSync(n),y=0;y<s.batchSize;++y)for(var x=0;x<s.inChannels;++x)for(var b=0;b<s.inHeight;++b)for(var C=0;C<s.inWidth;++C){for(var S=b-p,E=C-h,I=0,T=0;T<d;T+=l){var N=(S+T)/a;if(!(N<0||N>=s.outHeight||Math.floor(N)!==N))for(var O=0;O<f;O+=c){var $=(E+O)/u;if(!($<0||$>=s.outWidth||Math.floor($)!==$)){var A=d*f-1-g.get(y,N,$,x)===T*f+O?1:0;A!==0&&(I+=v.get(y,N,$,x)*A)}}}m.set(I,y,b,C,x)}return m.toTensor()},e.prototype.avgPoolBackprop=function(n,r,o){Ee([n,r],"avgPoolBackprop");for(var s=o.strideHeight,i=o.strideWidth,a=o.filterHeight,u=o.filterWidth,l=o.dilationHeight,c=o.dilationWidth,d=o.effectiveFilterHeight,f=o.effectiveFilterWidth,h=f-1-o.padInfo.left,p=d-1-o.padInfo.top,m=Pt(r.shape,"float32"),g=1/(a*u),v=this.bufferSync(n),y=0;y<o.batchSize;++y)for(var x=0;x<o.inChannels;++x)for(var b=0;b<o.inHeight;++b)for(var C=0;C<o.inWidth;++C){for(var S=b-p,E=C-h,I=0,T=0;T<d;T+=l){var N=(S+T)/s;if(!(N<0||N>=o.outHeight||Math.floor(N)!==N))for(var O=0;O<f;O+=c){var $=(E+O)/i;$<0||$>=o.outWidth||Math.floor($)!==$||(I+=v.get(y,N,$,x))}}m.set(I*g,y,b,C,x)}return m.toTensor()},e.prototype.pool3d=function(n,r,o){Ee(n,"pool3d");for(var s=r.strideDepth,i=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,v=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(n.dataId),x=Pt(r.outShape,n.dtype),b=x.values,C=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],I=r.outShape[4],T=0;T<r.batchSize;++T)for(var N=T*C,O=T*n.strides[0],$=0;$<r.inChannels;++$)for(var A=0;A<r.outDepth;++A){for(var P=A*s-p,L=P;L<0;)L+=u;for(var W=Math.min(r.inDepth,d+P),z=N+A*S,F=0;F<r.outHeight;++F){for(var B=F*i-m,H=B;H<0;)H+=l;for(var X=Math.min(r.inHeight,f+B),te=z+F*E,re=0;re<r.outWidth;++re){for(var ue=re*a-g,Q=ue;Q<0;)Q+=c;for(var ce=Math.min(r.inWidth,h+ue),ke=te+re*I,Ce=v,_e=0,Le=0,Ie=L;Ie<W;Ie+=u){for(var Pe=O+Ie*n.strides[1],Ue=H;Ue<X;Ue+=l){for(var lt=Pe+Ue*n.strides[2],Me=Q;Me<ce;Me+=c){var Ke=y[lt+Me*n.strides[3]+$];if(o==="max"&&Ke>Ce?Ce=Ke:o==="avg"&&(_e+=Ke,Le++),isNaN(Ce))break}if(isNaN(Ce))break}if(isNaN(Ce))break}b[ke+$]=o==="avg"?_e/Le:Ce}}}return x.toTensor()},e.prototype.avgPool3d=function(n,r){return Ee(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(n,r,o){Ee([n,r],"avgPool3dBackprop");for(var s=o.strideDepth,i=o.strideHeight,a=o.strideWidth,u=o.filterDepth,l=o.filterHeight,c=o.filterWidth,d=o.dilationDepth,f=o.dilationHeight,h=o.dilationWidth,p=o.effectiveFilterDepth,m=o.effectiveFilterHeight,g=o.effectiveFilterWidth,v=p-1-o.padInfo.front,y=g-1-o.padInfo.left,x=m-1-o.padInfo.top,b=Pt(r.shape,"float32"),C=1/(u*l*c),S=this.bufferSync(n),E=0;E<o.batchSize;++E)for(var I=0;I<o.inChannels;++I)for(var T=0;T<o.inDepth;++T)for(var N=0;N<o.inHeight;++N)for(var O=0;O<o.inWidth;++O){for(var $=T-v,A=N-x,P=O-y,L=0,W=0;W<p;W+=d){var z=($+W)/s;if(!(z<0||z>=o.outDepth||Math.floor(z)!==z))for(var F=0;F<m;F+=f){var B=(A+F)/i;if(!(B<0||B>=o.outHeight||Math.floor(B)!==B))for(var H=0;H<g;H+=h){var X=(P+H)/a;X<0||X>=o.outWidth||Math.floor(X)!==X||(L+=S.get(E,z,B,X,I))}}}b.set(L*C,E,T,N,O,I)}return b.toTensor()},e.prototype.maxPool3d=function(n,r){return Ee(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(n,r){for(var o=Pt(r.outShape,"int32"),s=r.strideDepth,i=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,v=this.bufferSync(n),y=0;y<r.batchSize;++y)for(var x=0;x<r.inChannels;++x)for(var b=0;b<r.outDepth;++b){for(var C=b*s-p,S=C;S<0;)S+=u;for(var E=Math.min(r.inDepth,d+C),I=0;I<r.outHeight;++I){for(var T=I*i-m,N=T;N<0;)N+=l;for(var O=Math.min(r.inHeight,f+T),$=0;$<r.outWidth;++$){for(var A=$*a-g,P=A;P<0;)P+=c;for(var L=Math.min(r.inWidth,h+A),W=Number.NEGATIVE_INFINITY,z=-1,F=S;F<E;F+=u)for(var B=F-C,H=N;H<O;H+=l)for(var X=H-T,te=P;te<L;te+=c){var re=te-A,ue=v.get(y,F,H,te,x);ue>=W&&(W=ue,z=B*f*h+X*f+re)}o.set(z,y,b,I,$,x)}}}return o.toTensor()},e.prototype.maxPool3dBackprop=function(n,r,o,s){Ee([r,o],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(r,s),a=s.strideDepth,u=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,d=s.dilationHeight,f=s.dilationWidth,h=s.effectiveFilterDepth,p=s.effectiveFilterHeight,m=s.effectiveFilterWidth,g=h-1-s.padInfo.front,v=m-1-s.padInfo.left,y=p-1-s.padInfo.top,x=Pt(r.shape,"float32"),b=this.bufferSync(i),C=this.bufferSync(n),S=0;S<s.batchSize;++S)for(var E=0;E<s.inChannels;++E)for(var I=0;I<s.inDepth;++I)for(var T=0;T<s.inHeight;++T)for(var N=0;N<s.inWidth;++N){for(var O=I-g,$=T-y,A=N-v,P=0,L=0;L<h;L+=c){var W=(O+L)/a;if(!(W<0||W>=s.outDepth||Math.floor(W)!==W))for(var z=0;z<p;z+=d){var F=($+z)/u;if(!(F<0||F>=s.outHeight||Math.floor(F)!==F))for(var B=0;B<m;B+=f){var H=(A+B)/l;if(!(H<0||H>=s.outWidth||Math.floor(H)!==H)){var X=h*p*m-1-b.get(S,W,F,H,E)===L*p*m+z*m+B?1:0;X!==0&&(P+=C.get(S,W,F,H,E)*X)}}}}x.set(P,S,I,T,N,E)}return x.toTensor()},e.prototype.cast=function(n,r){return Ore(n,r,this)},e.prototype.reshape=function(n,r){return lA(n,r)},e.prototype.avgPool=function(n,r){return Ee(n,"avgPool"),this.pool(n,r,"avg").toFloat()},e.prototype.resizeBilinear=function(n,r,o,s){Ee(n,"resizeBilinear");for(var i=n.shape,a=i[0],u=i[1],l=i[2],c=i[3],d=this.readSync(n.dataId),f=new Float32Array(dt([a,r,o,c])),h=[s&&r>1?u-1:u,s&&o>1?l-1:l],p=[s&&r>1?r-1:r,s&&o>1?o-1:o],m=0,g=h[0]/p[0],v=h[1]/p[1],y=0;y<a;y++)for(var x=0;x<r;x++)for(var b=g*x,C=Math.floor(b),S=b-C,E=Math.min(u-1,Math.ceil(b)),I=y*n.strides[0]+C*n.strides[1],T=y*n.strides[0]+E*n.strides[1],N=0;N<o;N++)for(var O=v*N,$=Math.floor(O),A=O-$,P=Math.min(l-1,Math.ceil(O)),L=I+$*n.strides[2],W=T+$*n.strides[2],z=I+P*n.strides[2],F=T+P*n.strides[2],B=0;B<c;B++){var H=d[L+B],X=d[W+B],te=H+(d[z+B]-H)*A,re=te+(X+(d[F+B]-X)*A-te)*S;f[m++]=re}return Ho(f,[a,r,o,c])},e.prototype.resizeBilinearBackprop=function(n,r,o){Ee([n,r],"resizeBilinearBackprop");for(var s=r.shape,i=s[0],a=s[1],u=s[2],l=s[3],c=n.shape,d=c[1],f=c[2],h=new Float32Array(i*a*u*l),p=[o&&d>1?a-1:a,o&&f>1?u-1:u],m=[o&&d>1?d-1:d,o&&f>1?f-1:f],g=p[0]/m[0],v=p[1]/m[1],y=this.readSync(n.dataId),x=0,b=0;b<i;b++)for(var C=b*r.strides[0],S=0;S<d;S++)for(var E=S*g,I=Math.floor(E),T=Math.min(Math.ceil(E),a-1),N=C+I*r.strides[1],O=C+T*r.strides[1],$=E-I,A=1-$,P=0;P<f;P++)for(var L=P*v,W=Math.floor(L),z=Math.min(Math.ceil(L),u-1),F=L-W,B=1-F,H=N+W*r.strides[2],X=N+z*r.strides[2],te=O+W*r.strides[2],re=O+z*r.strides[2],ue=A*B,Q=A*F,ce=$*B,ke=$*F,Ce=0;Ce<l;Ce++){var _e=y[x++];h[H+Ce]+=_e*ue,h[X+Ce]+=_e*Q,h[te+Ce]+=_e*ce,h[re+Ce]+=_e*ke}return Hs(h,[i,u,a,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(n,r,o,s){Ee(n,"resizeNearestNeighbor");for(var i=n.shape,a=i[0],u=i[1],l=i[2],c=i[3],d=this.readSync(n.dataId),f=new Float32Array(a*r*o*c),h=[s&&r>1?u-1:u,s&&o>1?l-1:l],p=[s&&r>1?r-1:r,s&&o>1?o-1:o],m=h[0]/p[0],g=h[1]/p[1],v=0,y=0;y<a;y++)for(var x=y*n.strides[0],b=0;b<r;b++)for(var C=m*b,S=x+Math.min(u-1,s?Math.round(C):Math.floor(C))*n.strides[1],E=0;E<o;E++)for(var I=g*E,T=S+Math.min(l-1,s?Math.round(I):Math.floor(I))*n.strides[2],N=0;N<c;N++){var O=d[T+N];f[v++]=O}return Ho(f,[a,r,o,c],n.dtype)},e.prototype.resizeNearestNeighborBackprop=function(n,r,o){Ee([n,r],"resizeNearestNeighborBackprop");for(var s=r.shape,i=s[0],a=s[1],u=s[2],l=s[3],c=n.shape,d=c[1],f=c[2],h=new Float32Array(i*a*u*l),p=this.readSync(n.dataId),m=[o&&d>1?a-1:a,o&&f>1?u-1:u],g=[o&&d>1?d-1:d,o&&f>1?f-1:f],v=m[0]/g[0],y=m[1]/g[1],x=1/v,b=1/y,C=2*Math.ceil(x)+2,S=2*Math.ceil(b)+2,E=0;E<i;E++)for(var I=E*r.strides[0],T=0;T<a;T++)for(var N=I+T*r.strides[1],O=Math.floor(T*x),$=Math.floor(O-C/2),A=0;A<u;A++)for(var P=N+A*r.strides[2],L=Math.floor(A*b),W=Math.floor(L-S/2),z=0;z<l;z++){for(var F=0,B=0;B<C;B++){var H=B+$;if(!(H<0||H>=d)){var X=I+H*n.strides[1],te=H*v;if(T===Math.min(a-1,o?Math.round(te):Math.floor(te)))for(var re=0;re<S;re++){var ue=re+W;if(!(ue<0||ue>=f)){var Q=X+ue*n.strides[2],ce=ue*y;A===Math.min(u-1,o?Math.round(ce):Math.floor(ce))&&(F+=p[Q+z])}}}}h[P+z]=F}return Hs(h,r.shape,r.dtype)},e.prototype.batchNormalization=function(n,r,o,s,i,a){Ee([n,r,o,i,a],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(o.dataId),d=i?this.readSync(i.dataId):new Float32Array([1]),f=a?this.readSync(a.dataId):new Float32Array([0]),h=new Float32Array(u.length),p=f.length,m=d.length,g=c.length,v=l.length,y=0,x=0,b=0,C=0,S=0;S<u.length;++S)h[S]=f[y++]+(u[S]-l[x++])*d[b++]/Math.sqrt(c[C++]+s),y>=p&&(y=0),x>=v&&(x=0),b>=m&&(b=0),C>=g&&(C=0);return Hs(h,n.shape)},e.prototype.localResponseNormalization4D=function(n,r,o,s,i){Ee(n,"localResponseNormalization4D");var a=n.shape[3],u=a-1,l=this.readSync(n.dataId),c=n.size,d=new Float32Array(c);function f(g){for(var v=g%a,y=g-v+Math.max(0,v-r),x=g-v+Math.min(v+r,u),b=0;y<=x;y++){var C=l[y];b+=C*C}return b}for(var h=0;h<c;h++){var p=f(h),m=l[h]*Math.pow(o+s*p,-i);d[h]=m}return Hs(d,n.shape)},e.prototype.LRNGrad=function(n,r,o,s,i,a,u){Ee(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),d=this.readSync(r.dataId),f=this.readSync(o.dataId),h=new Float32Array(n.size),p=n.size,m=0;m<p;m++){for(var g=m%l,v=m-g+Math.max(0,g-s),y=m-g+Math.min(l,g+s+1),x=0,b=v;b<y;b++)x+=Math.pow(d[b],2);for(x=a*x+i,b=v;b<y;b++){var C=-2*a*u*d[b]*f[m]/x;m===b&&(C+=Math.pow(x,-u)),C*=c[m],h[b]+=C}}return Hs(h,n.shape)},e.prototype.multinomial=function(n,r,o,s){Ee(n,"multinomial");for(var i=r?n:Cc(n),a=i.shape[0],u=i.shape[1],l=nr([a,o],"int32"),c=this.readSync(l.dataId),d=this.readSync(i.dataId),f=0;f<a;++f){var h=f*u,p=new Float32Array(u-1);p[0]=d[h];for(var m=1;m<p.length;++m)p[m]=p[m-1]+d[h+m];for(var g=F_(s.toString()),v=f*o,y=0;y<o;++y){var x=g();c[v+y]=p.length;for(var b=0;b<p.length;b++)if(x<p[b]){c[v+y]=b;break}}}return l},e.prototype.oneHot=function(n,r,o,s){Ee(n,"oneHot");var i=new Float32Array(n.size*r);i.fill(s);for(var a=this.readSync(n.dataId),u=0;u<n.size;++u)a[u]>=0&&a[u]<r&&(i[u*r+a[u]]=o);return _d(i,[n.size,r],"int32")},e.prototype.nonMaxSuppression=function(n,r,o,s,i){return Ee(n,"nonMaxSuppression"),eL(this.readSync(n.dataId),this.readSync(r.dataId),o,s,i)},e.prototype.fft=function(n){return this.fftBatch(n,!1)},e.prototype.ifft=function(n){return this.fftBatch(n,!0)},e.prototype.fftBatch=function(n,r){for(var o=n.shape[0],s=n.shape[1],i=Pt(n.shape,"float32"),a=Pt(n.shape,"float32"),u=Qi(n).as2D(o,s),l=Du(n).as2D(o,s),c=0;c<o;c++)for(var d=u.slice([c,0],[1,s]),f=l.slice([c,0],[1,s]),h=Uo(d,f),p=this.readSync(this.fftImpl(h,r).dataId),m=0;m<s;m++){var g=R6(p,m);i.values[c*s+m]=g.real,a.values[c*s+m]=g.imag}return Uo(i.toTensor(),a.toTensor()).as2D(o,s)},e.prototype.fftImpl=function(n,r){var o=n.as1D(),s=o.size;if(this.isExponentOf2(s)){var i=this.fftRadix2(o,s,r).as2D(n.shape[0],n.shape[1]);return r&&(i=Uo(Qi(i).div(He(s)),Du(i).div(He(s)))),i}var a=this.readSync(n.dataId),u=function(l){for(var c=new Float32Array(l.length/2),d=new Float32Array(l.length/2),f=0;f<l.length;f+=2)c[f/2]=l[f],d[f/2]=l[f+1];return{real:c,imag:d}}(this.fourierTransformByMatmul(a,s,r));return Uo(u.real,u.imag).as2D(n.shape[0],n.shape[1])},e.prototype.isExponentOf2=function(n){return(n&n-1)==0},e.prototype.fftRadix2=function(n,r,o){if(r===1)return n;var s=this.readSync(n.dataId),i=r/2,a=function(v){for(var y=Math.ceil(v.length/4),x=new Float32Array(y),b=new Float32Array(y),C=0;C<v.length;C+=4)x[Math.floor(C/4)]=v[C],b[Math.floor(C/4)]=v[C+1];return{real:x,imag:b}}(s),u=Uo(a.real,a.imag).as1D(),l=function(v){for(var y=Math.floor(v.length/4),x=new Float32Array(y),b=new Float32Array(y),C=2;C<v.length;C+=4)x[Math.floor(C/4)]=v[C],b[Math.floor(C/4)]=v[C+1];return{real:x,imag:b}}(s),c=Uo(l.real,l.imag).as1D();u=this.fftRadix2(u,i,o),c=this.fftRadix2(c,i,o);var d=function(v,y){for(var x=new Float32Array(v/2),b=new Float32Array(v/2),C=0;C<Math.ceil(v/2);C++){var S=(y?2:-2)*Math.PI*(C/v);x[C]=Math.cos(S),b[C]=Math.sin(S)}return{real:x,imag:b}}(r,o),f=Uo(d.real,d.imag).mul(c),h=u.add(f),p=u.sub(f),m=Qi(h).concat(Qi(p)),g=Du(h).concat(Du(p));return Uo(m,g).as1D()},e.prototype.fourierTransformByMatmul=function(n,r,o){for(var s=new Float32Array(2*r),i=0;i<r;i++){for(var a=0,u=0,l=0;l<r;l++){var c=xQe(i*l,r,o),d=R6(n,l);a+=d.real*c.real-d.imag*c.imag,u+=d.real*c.imag+d.imag*c.real}o&&(a/=r,u/=r),yQe(s,a,u,i)}return s},e.prototype.depthToSpace=function(n,r,o){G(o==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o}),G(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var s=n.shape[0],i=n.shape[1],a=n.shape[2],u=n.shape[3],l=i*r,c=a*r,d=u/(r*r),f=this.readSync(n.dataId),h=new Float32Array(s*l*c*d),p=0,m=0;m<s;++m)for(var g=0;g<l;++g)for(var v=Math.floor(g/r),y=g%r,x=0;x<c;++x)for(var b=Math.floor(x/r),C=(y*r+x%r)*d,S=0;S<d;++S){var E=S+C+u*(b+a*(v+i*m));h[p++]=f[E]}return Hs(h,[s,l,c,d])},e.prototype.broadcastedBinaryOp=function(n,r,o,s){var i=en(n.shape,r.shape),a=Pt(i,o),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=sd(n.shape,i),d=sd(r.shape,i),f=a.values;if(c.length+d.length===0)for(var h=0;h<f.length;++h)f[h]=s(u[h%u.length],l[h%l.length]);else{var p=this.bufferSync(n),m=this.bufferSync(r),g=function(v){var y=a.indexToLoc(v),x=y.slice(-n.rank);c.forEach(function(E){return x[E]=0});var b=p.locToIndex(x),C=y.slice(-r.rank);d.forEach(function(E){return C[E]=0});var S=m.locToIndex(C);f[v]=s(u[b],l[S])};for(h=0;h<f.length;++h)g(h)}return a.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(n,r,o){var s=en(n.shape,r.shape),i=Pt(s,"float32"),a=Pt(s,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=sd(n.shape,s),d=sd(r.shape,s),f=i.values,h=a.values;if(c.length+d.length===0)for(var p=0;p<f.length;p++){var m=p%u.length,g=p%l.length,v=o(u[2*m],u[2*m+1],l[2*g],l[2*g+1]);f[p]=v.real,h[p]=v.imag}else{var y=this.bufferSync(this.data.get(n.dataId).complexTensors.real),x=this.bufferSync(this.data.get(r.dataId).complexTensors.real),b=function(C){var S=i.indexToLoc(C),E=S.slice(-n.rank);c.forEach(function($){return E[$]=0});var I=y.locToIndex(E),T=S.slice(-r.rank);d.forEach(function($){return T[$]=0});var N=x.locToIndex(T),O=o(u[2*I],u[2*I+1],l[2*N],l[2*N+1]);f[C]=O.real,h[C]=O.imag};for(p=0;p<f.length;p++)b(p)}return this.complex(i.toTensor(),a.toTensor())},e.prototype.split=function(n,r,o){return Mre(n,r,o)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(n,r,o,s,i,a){for(var u=n.shape,l=u[0],c=u[1],d=u[2],f=u[3],h=r.shape[0],p=s[0],m=s[1],g=Pt([h,p,m,f],"float32"),v=this.readSync(r.dataId),y=this.readSync(o.dataId),x=this.readSync(n.dataId),b=n.strides,C=g.strides,S=0;S<h;S++){var E=4*S,I=v[E],T=v[E+1],N=v[E+2],O=v[E+3],$=y[S];if(!($>=l))for(var A=p>1?(N-I)*(c-1)/(p-1):0,P=m>1?(O-T)*(d-1)/(m-1):0,L=0;L<p;L++){var W=p>1?I*(c-1)+L*A:.5*(I+N)*(c-1);if(W<0||W>c-1)for(var z=0;z<m;z++)for(var F=0;F<f;F++){var B=F+z*C[2]+L*C[1]+S*C[0];g.values[B]=a}else if(i==="bilinear"){var H=Math.floor(W),X=Math.ceil(W),te=W-H;for(z=0;z<m;z++)if((Ie=m>1?T*(d-1)+z*P:.5*(T+O)*(d-1))<0||Ie>d-1)for(F=0;F<f;F++)B=F+z*C[2]+L*C[1]+S*C[0],g.values[B]=a;else{var re=Math.floor(Ie),ue=Math.ceil(Ie),Q=Ie-re;for(F=0;F<f;F++){var ce=x[B=F+re*b[2]+H*b[1]+$*b[0]],ke=x[B=F+ue*b[2]+H*b[1]+$*b[0]],Ce=x[B=F+re*b[2]+X*b[1]+$*b[0]],_e=ce+(ke-ce)*Q,Le=Ce+(x[B=F+ue*b[2]+X*b[1]+$*b[0]]-Ce)*Q;B=F+z*C[2]+L*C[1]+S*C[0],g.values[B]=_e+(Le-_e)*te}}}else for(z=0;z<m;++z){var Ie;if((Ie=m>1?T*(d-1)+z*P:.5*(T+O)*(d-1))<0||Ie>d-1)for(F=0;F<f;F++)B=F+z*C[2]+L*C[1]+S*C[0],g.values[B]=a;else{var Pe=Math.round(Ie),Ue=Math.round(W);for(F=0;F<f;F++){var lt=F+Pe*b[2]+Ue*b[1]+$*b[0],Me=F+z*C[2]+L*C[1]+S*C[0];g.values[Me]=x[lt]}}}}}return g.toTensor()},e.prototype.sparseToDense=function(n,r,o,s){var i=N2(0,n,o),a=i.sliceRank,u=i.numUpdates,l=i.sliceSize,c=i.strides,d=i.outputSize;return this.scatter(n,r,o,d,l,u,a,c,s,!1)},e.prototype.gatherND=function(n,r){var o=r.shape,s=o[o.length-1],i=Ere(n,r),a=i[0],u=i[1],l=i[2],c=i[3];if(u===0)return Ho([],a,n.dtype);for(var d=new F0([u,l],n.dtype),f=this.readSync(r.dataId),h=this.readSync(n.dataId),p=0;p<u;p++){for(var m=[],g=0,v=0;v<s;v++){var y=f[p*s+v];g+=y*c[v],m.push(y)}if(g<0||g>=n.size/l)throw new Error("Invalid indices: "+m+" does not index into "+n.shape);for(var x=0;x<l;x++)d.values[p*l+x]=h[g*l+x]}return d.toTensor().reshape(a)},e.prototype.scatterND=function(n,r,o){var s=N2(0,n,o),i=s.sliceRank,a=s.numUpdates,u=s.sliceSize,l=s.strides,c=s.outputSize,d=He(0);return this.scatter(n,r,o,c,u,a,i,l,d,!0)},e.prototype.fill=function(n,r,o){var s=x2(o=o||eb(r),dt(n));return s.fill(r),oe.makeTensor(s,n,o,this)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){var r=x2(n.dtype,dt(n.shape));return this.makeOutput(r,n.shape,n.dtype)},e.prototype.linspace=function(n,r,o){return Are(n,r,o)},e.prototype.scatter=function(n,r,o,s,i,a,u,l,c,d){var f=[s/i,i],h=this.readSync(n.dataId),p=this.readSync(r.dataId);if(s===0)return Ho([],o,r.dtype);var m=new F0(f,r.dtype);m.values.fill(this.readSync(c.dataId)[0]);for(var g=0;g<a;g++){for(var v=[],y=0,x=0;x<u;x++){var b=h[g*u+x];v.push(b),y+=b*l[x]}if(y<0||y>=s/i)throw new Error("Invalid indices: "+v+" does not index into "+o);for(var C=0;C<i;C++)d?m.values[y*i+C]+=p[g*i+C]:m.values[y*i+C]=r.rank===0?p[0]:p[g*i+C]}return m.toTensor().reshape(o)},e}(Dre);oe.registerBackend("cpu",function(){return new Wtt},1);for(var PN=0,Z6=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e,s=o.boxes,i=o.scores,a=r,u=a.maxOutputSize,l=a.iouThreshold,c=a.scoreThreshold,d=a.softNmsSigma,f=n;Ee(s,"NonMaxSuppressionWithScore");var h=tL(f.data.get(s.dataId).values,f.data.get(i.dataId).values,u,l,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n;Ee(r,"square");for(var s=o.data.get(r.dataId).values,i=new Float32Array(s.length),a=0;a<s.length;++a){var u=s[a];i[a]=u*u}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:j0,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,o=r.a,s=r.b,i=n;Ee([o,s],j0);var a=i.data.get(o.dataId).values,u=i.data.get(s.dataId).values,l=function(f,h,p,m,g,v){var y=en(f,h),x=y.length,b=Ku(y),C=P0(g,dt(y)),S=f.length,E=h.length,I=Ku(f),T=Ku(h),N=sd(f,y),O=sd(h,y);if(N.length+O.length===0)for(var $=0;$<C.length;++$)C[$]=v(p[$%p.length],m[$%m.length]);else{var A=function(P){var L=KKe(P,x,b),W=L.slice(-S);N.forEach(function(H){return W[H]=0});var z=k6(W,S,I),F=L.slice(-E);O.forEach(function(H){return F[H]=0});var B=k6(F,E,T);C[P]=v(p[z],m[B])};for($=0;$<C.length;++$)A($)}return[C,y]}(o.shape,s.shape,a,u,o.dtype,function(f,h){var p=f-h;return p*p}),c=l[0],d=l[1];return{dataId:i.write(c,d,o.dtype),shape:d,dtype:o.dtype}}}];PN<Z6.length;PN++)ore(Z6[PN]);var Ip,ztt=function(t){this.variableNames=["A"];var e=ds(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Utt=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=ds(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var FN=0,e5=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.pixels,s=r.numChannels,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,u=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=u[0],c=u[1],d=[c,l],f=[c,l,s];(a||i)&&(Ip==null&&(Ip=document.createElement("canvas").getContext("2d")),Ip.canvas.width=l,Ip.canvas.height=c,Ip.drawImage(o,0,0,l,c),o=Ip.canvas);var h=n.makeTensorInfo(d,"int32");n.texData.get(h.dataId).usage=bi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);var p=we().getBool("WEBGL_PACK")?new Utt(f):new ztt(f),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;C2("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=e,s=o.boxes,i=o.scores,a=r,u=a.maxOutputSize,l=a.iouThreshold,c=a.scoreThreshold,d=a.softNmsSigma,f=n,h=tL(f.readSync(s.dataId),f.readSync(i.dataId),u,l,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n,s=new zt(r.shape,"return x * x;");return o.runWebGLProgram(s,[r],r.dtype)}},{kernelName:j0,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,o=r.a,s=r.b,i=n,a=we().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Tl("return (a - b) * (a - b);",o.shape,s.shape):new Rr("return (a - b) * (a - b);",o.shape,s.shape);return i.compileAndRun(a,[o,s])}}];FN<e5.length;FN++)ore(e5[FN]);for(var LN=0,t5=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:j0,gradFunc:function(t,e){var n=e[0],r=e[1],o=He(2);return{a:function(){return hs(t,hs(o,ko(n,r)))},b:function(){return hs(t,hs(o,ko(r,n)))}}}}];LN<t5.length;LN++)LKe(t5[LN]);var Vtt=function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t}();we().get("IS_BROWSER")&&we().setPlatform("browser",new Vtt);var BN,Htt=function(){return require("node-fetch")},Gtt=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return we().global.fetch!=null?we().global.fetch(e,n):(BN==null&&(BN=Htt()),BN(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t}();we().get("IS_NODE")&&we().setPlatform("node",new Gtt);var fA={float32:4,int32:4,uint16:2,uint8:1,bool:1},P2=4;function Ioe(t,e){for(var n={},r=0,o=function(a){var u=a.name,l=a.dtype,c=a.shape,d=dt(c),f=void 0;if("quantization"in a){var h=a.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+a.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=fA[h.dtype],m=t.slice(r,r+d*p),g=h.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")f=Float32Array.from(g,function(S){return S*h.scale+h.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=Int32Array.from(g,function(S){return Math.round(S*h.scale+h.min)})}r+=d*p}else if(l==="string"){var v=dt(a.shape);f=[];for(var y=0;y<v;y++){var x=new Uint32Array(t.slice(r,r+P2))[0];r+=P2;var b=new Uint8Array(t.slice(r,r+x));f.push(b),r+=x}}else{var C=fA[l];if(m=t.slice(r,r+d*C),l==="float32")f=new Float32Array(m);else if(l==="int32")f=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=new Uint8Array(m)}r+=d*C}n[u]=Ho(f,c,l)},s=0,i=e;s<i.length;s++)o(i[s]);return n}function Ytt(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(s){if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+s.constructor.name)});var r=new Uint8Array(e),o=0;return n.forEach(function(s){r.set(new Uint8Array(s.buffer),o),o+=s.byteLength}),r.buffer}var hA=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function n5(t){return hA?Buffer.byteLength(t):new Blob([t]).size}function bL(t){var e=0;t.forEach(function(o){e+=o.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(o){n.set(new Uint8Array(o),r),r+=o.byteLength}),n.buffer}function r5(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function ab(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:n5(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:n5(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var wi=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(s){var i=s(e,r);i!==null&&o.push(i)}),o},t}(),Sm="://",Id=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){G(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(Sm)&&(e=e.slice(0,e.indexOf(Sm))),G(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();G(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function kk(t){if(t.indexOf(Sm)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Id.getSchemes().join(","));return{scheme:t.split(Sm)[0],path:t.split(Sm)[1]}}function o5(t,e,n){return n===void 0&&(n=!1),it(this,void 0,void 0,function(){var r,o,s,i,a,u,l,c,d;return at(this,function(f){switch(f.label){case 0:return G(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),G((r=wi.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),G(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),o=r[0],G((s=wi.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),G(s.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),i=s[0],a=kk(t).scheme,u=kk(t).path,l=a===kk(t).scheme,[4,o.load()];case 1:return c=f.sent(),n&&l?[4,Id.getManager(a).removeModel(u)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,i.save(c)];case 4:return d=f.sent(),!n||l?[3,6]:[4,Id.getManager(a).removeModel(u)];case 5:f.sent(),f.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}var qf="models_store",id="model_info_store";function Toe(){if(!we().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function pA(t){var e=t.result;e.createObjectStore(qf,{keyPath:"modelPath"}),e.createObjectStore(id,{keyPath:"modelPath"})}var Em=function(){function t(e){if(this.indexedDB=Toe(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return it(this,void 0,void 0,function(){return at(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return it(this,void 0,void 0,function(){return at(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(o,s){var i=r.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return pA(i)},i.onsuccess=function(){var a=i.result;if(n==null){var u=a.transaction(qf,"readonly"),l=u.objectStore(qf).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return a.close(),s(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(l.result.modelArtifacts)},l.onerror=function(m){return a.close(),s(l.error)},u.oncomplete=function(){return a.close()}}else{var c,d=ab(n),f=a.transaction(id,"readwrite"),h=f.objectStore(id),p=h.put({modelPath:r.modelPath,modelArtifactsInfo:d});p.onsuccess=function(){var m=(c=a.transaction(qf,"readwrite")).objectStore(qf).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:d});m.onsuccess=function(){return o({modelArtifactsInfo:d})},m.onerror=function(g){var v=(h=f.objectStore(id)).delete(r.modelPath);v.onsuccess=function(){return a.close(),s(m.error)},v.onerror=function(y){return a.close(),s(m.error)}}},p.onerror=function(m){return a.close(),s(p.error)},f.oncomplete=function(){c==null?a.close():c.oncomplete=function(){return a.close()}}}},i.onerror=function(a){return s(i.error)}})},t.URL_SCHEME="indexeddb://",t}(),s5=function(t){return we().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Em.URL_SCHEME)?(e=t.slice(Em.URL_SCHEME.length),new Em(e)):null;var e};wi.registerSaveRouter(s5),wi.registerLoadRouter(s5);var qtt=function(){function t(){this.indexedDB=Toe()}return t.prototype.listModels=function(){return it(this,void 0,void 0,function(){var e=this;return at(this,function(n){return[2,new Promise(function(r,o){var s=e.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return pA(s)},s.onsuccess=function(){var i=s.result,a=i.transaction(id,"readonly"),u=a.objectStore(id).getAll();u.onsuccess=function(){for(var l={},c=0,d=u.result;c<d.length;c++){var f=d[c];l[f.modelPath]=f.modelArtifactsInfo}r(l)},u.onerror=function(l){return i.close(),o(u.error)},a.oncomplete=function(){return i.close()}},s.onerror=function(i){return o(s.error)}})]})})},t.prototype.removeModel=function(e){return it(this,void 0,void 0,function(){var n=this;return at(this,function(r){var o;return e=(o=e).startsWith(Em.URL_SCHEME)?o.slice(Em.URL_SCHEME.length):o,[2,new Promise(function(s,i){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return pA(a)},a.onsuccess=function(){var u,l=a.result,c=l.transaction(id,"readwrite"),d=c.objectStore(id),f=d.get(e);f.onsuccess=function(){if(f.result==null)return l.close(),i(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var h=d.delete(e),p=function(){var m=(u=l.transaction(qf,"readwrite")).objectStore(qf).delete(e);m.onsuccess=function(){return s(f.result.modelArtifactsInfo)},m.onerror=function(g){return i(f.error)}};h.onsuccess=p,h.onerror=function(m){return p(),l.close(),i(f.error)}},f.onerror=function(h){return l.close(),i(f.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},a.onerror=function(u){return i(a.error)}})]})})},t}();if(we().getBool("IS_BROWSER"))try{Id.registerManager(Em.URL_SCHEME,new qtt)}catch{}var Bl="/",Lp="tensorflowjs_models",Noe="info",Ktt="model_topology",Xtt="weight_specs",Qtt="weight_data",Jtt="model_metadata";function Doe(t){return{info:[Lp,t,Noe].join(Bl),topology:[Lp,t,Ktt].join(Bl),weightSpecs:[Lp,t,Xtt].join(Bl),weightData:[Lp,t,Qtt].join(Bl),modelMetadata:[Lp,t,Jtt].join(Bl)}}function Ztt(t){var e=t.split(Bl);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(Bl)}var _m=function(){function t(e){if(!we().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Doe(this.modelPath)}return t.prototype.save=function(e){return it(this,void 0,void 0,function(){var n,r,o;return at(this,function(s){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=ab(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(i){if(hA)return Buffer.from(i).toString("base64");for(var a=new Uint8Array(i),u="",l=0,c=a.length;l<c;l++)u+=String.fromCharCode(a[l]);return btoa(u)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return it(this,void 0,void 0,function(){var e,n,r,o,s,i,a;return at(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(s=this.LS.getItem(this.keys.modelMetadata))!=null&&(i=JSON.parse(s),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,n.userDefinedMetadata=i.userDefinedMetadata),(a=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(hA){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var d=atob(l),f=new Uint8Array(d.length),h=0;h<d.length;++h)f.set([d.charCodeAt(h)],h);return f.buffer}(a),[2,n]})})},t.URL_SCHEME="localstorage://",t}(),i5=function(t){return we().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(_m.URL_SCHEME)?(e=t.slice(_m.URL_SCHEME.length),new _m(e)):null;var e};wi.registerSaveRouter(i5),wi.registerLoadRouter(i5);var ent=function(){function t(){G(we().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),G(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return it(this,void 0,void 0,function(){var e,n,r,o,s,i;return at(this,function(a){for(e={},n=Lp+Bl,r=Bl+Noe,o=0;o<this.LS.length;++o)(s=this.LS.key(o)).startsWith(n)&&s.endsWith(r)&&(i=Ztt(s),e[i]=JSON.parse(this.LS.getItem(s)));return[2,e]})})},t.prototype.removeModel=function(e){return it(this,void 0,void 0,function(){var n,r;return at(this,function(o){var s;if(e=(s=e).startsWith(_m.URL_SCHEME)?s.slice(_m.URL_SCHEME.length):s,n=Doe(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t}();if(we().getBool("IS_BROWSER"))try{Id.registerManager(_m.URL_SCHEME,new ent)}catch{}var tnt="model",nnt=".json",rnt=".weights.bin";function a5(t){return new Promise(function(e){return setTimeout(e)}).then(t)}var jN=function(){function t(e){if(!we().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=tnt),this.modelTopologyFileName=e+nnt,this.weightDataFileName=e+rnt}return t.prototype.save=function(e){return it(this,void 0,void 0,function(){var n,r,o,s,i,a;return at(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},s=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=s,[4,a5(function(){return i.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),e.weightData==null?[3,4]:((a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=n,[4,a5(function(){return a.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:ab(e)}]}})})},t.URL_SCHEME="downloads://",t}(),ont=function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return it(this,void 0,void 0,function(){var e,n,r=this;return at(this,function(o){return e=this.files[0],n=this.files.slice(1),[2,new Promise(function(s,i){var a=new FileReader;a.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&s({modelTopology:c});var d=l.weightsManifest;if(d!=null){var f;try{f=r.checkManifestAndWeightFiles(d,n)}catch(g){return void i(g)}var h=[],p=[],m=[];d.forEach(function(g){g.paths.forEach(function(v){p.push(v),m.push(null)}),h.push.apply(h,g.weights)}),d.forEach(function(g){g.paths.forEach(function(v){var y=new FileReader;y.onload=function(x){var b=x.target.result,C=p.indexOf(v);m[C]=b,m.indexOf(null)===-1&&s({modelTopology:c,weightSpecs:h,weightData:bL(m),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},y.onerror=function(x){return i("Failed to weights data from file of path '"+v+"'.")},y.readAsArrayBuffer(f[v])})})}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(u){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)})]})})},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],o=n.map(function(u){return r5(u.name)}),s={},i=0,a=e;i<a.length;i++)a[i].paths.forEach(function(u){var l=r5(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),o.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");s[u]=n[o.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return s},t}();function u5(t,e,n,r){(function(s){G(s!=null&&Array.isArray(s)&&s.length>0,function(){return"promises must be a none empty array"})})(t),function(s,i){G(s>=0&&s<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+s}),G(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+i}),G(i>=s,function(){return"startFraction must be no more than endFraction, but got startFraction "+s+" and endFraction "+i})}(n=n??0,r=r??1);var o=0;return Promise.all(t.map(function(s){return s.then(function(i){var a=n+ ++o/t.length*(r-n);return e(a),i}),s}))}function Roe(t,e){return it(this,void 0,void 0,function(){var n,r,o,s,i,a,u,l,c;return at(this,function(d){switch(d.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?we().platform.fetch:e.fetchFunc,r=t.map(function(f){return n(f,e.requestInit,{isBinary:!0})}),o=0,s=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return i=d.sent(),[3,4];case 2:return[4,u5(r,e.onProgress,o,s)];case 3:i=d.sent(),d.label=4;case 4:return a=i.map(function(f){return f.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(a)];case 5:return c=d.sent(),[3,8];case 6:return[4,u5(a,e.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}})})}function l5(t){var e=this;return function(n,r,o){return r===void 0&&(r=""),it(e,void 0,void 0,function(){var s,i,a,u,l,c,d,f,h,p;return at(this,function(m){switch(m.label){case 0:if(s=n.map(function(){return!1}),i={},a=o!=null?o.map(function(){return!1}):[],u=[],n.forEach(function(g,v){var y=0;g.weights.forEach(function(x){var b="quantization"in x?x.quantization.dtype:x.dtype,C=fA[b]*dt(x.shape),S=function(){s[v]=!0,i[v]==null&&(i[v]=[]),i[v].push({manifestEntry:x,groupOffset:y,sizeBytes:C})};o!=null?o.forEach(function(E,I){E===x.name&&(S(),a[I]=!0)}):S(),u.push(x.name),y+=C})}),!a.every(function(g){return g}))throw l=o.filter(function(g,v){return!a[v]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=s.reduce(function(g,v,y){return v&&g.push(y),g},[]),d=[],c.forEach(function(g){n[g].paths.forEach(function(v){var y=r+(r.endsWith("/")?"":"/")+v;d.push(y)})}),[4,t(d)];case 1:return f=m.sent(),h={},p=0,c.forEach(function(g){for(var v=n[g].paths.length,y=0,x=0;x<v;x++)y+=f[p+x].byteLength;for(var b=new ArrayBuffer(y),C=new Uint8Array(b),S=0,E=0;E<v;E++){var I=new Uint8Array(f[p+E]);C.set(I,S),S+=I.byteLength}i[g].forEach(function(T){var N=Ioe(b.slice(T.groupOffset,T.groupOffset+T.sizeBytes),[T.manifestEntry]);for(var O in N)h[O]=N[O]}),p+=v}),[2,h]}})})}}wi.registerSaveRouter(function(t){return we().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(jN.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new jN(e)}(t.slice(jN.URL_SCHEME.length)):null});var Ooe=function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(G(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=we().platform.fetch,G(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&G(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return it(this,void 0,void 0,function(){var n,r,o,s;return at(this,function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((s=i.sent()).ok)return[2,{modelArtifactsInfo:ab(e),responses:[s]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+s.status+".")}})})},t.prototype.load=function(){return it(this,void 0,void 0,function(){var e,n,r,o,s,i,a,u,l,c,d,f;return at(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,e.json()];case 3:return n=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,s=n.weightsManifest,i=n.generatedBy,a=n.convertedBy,u=n.format,l=n.userDefinedMetadata,o==null&&s==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return s==null?[3,7]:[4,this.loadWeights(s)];case 6:f=h.sent(),c=f[0],d=f[1],h.label=7;case 7:return[2,{modelTopology:o,weightSpecs:c,weightData:d,userDefinedMetadata:l,generatedBy:i,convertedBy:a,format:u}]}})})},t.prototype.loadWeights=function(e){return it(this,void 0,void 0,function(){var n,r,o,s,i,a,u,l,c,d,f;return at(this,function(h){switch(h.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var m=p.lastIndexOf("/"),g=p.lastIndexOf("?"),v=p.substring(0,m),y=g>m?p.substring(g):"";return[v+"/",y]}(n),o=r[0],s=r[1],i=this.weightPathPrefix||o,a=[],u=0,l=e;u<l.length;u++)c=l[u],a.push.apply(a,c.weights);return d=[],e.forEach(function(p){p.paths.forEach(function(m){d.push(i+m+s)})}),[4,Roe(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=h.sent(),[2,[a,bL(f)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function mA(t){return t.match(Ooe.URL_SCHEME_REGEX)!=null}var c5=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return mA(n)}):mA(t))?gA(t,{onProgress:e}):null};function gA(t,e){return new Ooe(t,e)}wi.registerSaveRouter(c5),wi.registerLoadRouter(c5);var WN=function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return it(this,void 0,void 0,function(){return at(this,function(e){return[2,this.modelArtifacts]})})},t}(),snt=function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return it(this,void 0,void 0,function(){return at(this,function(n){return[2,this.saveHandler(e)]})})},t}(),Aoe=Object.freeze({browserFiles:function(t){return new ont(t)},browserHTTPRequest:function(t,e){return gA(t,e)},concatenateArrayBuffers:bL,decodeWeights:Ioe,encodeWeights:function(t,e){return it(this,void 0,void 0,function(){var n,r,o,s,i,a=this;return at(this,function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),s=function(l){var c=o[l],d=Array.isArray(t)?t[l].tensor:t[c];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+d.dtype);var f={name:c,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var h=new Promise(function(p){return it(a,void 0,void 0,function(){var m,g,v,y,x,b,C;return at(this,function(S){switch(S.label){case 0:return[4,d.bytes()];case 1:for(m=S.sent(),g=m.reduce(function(E,I){return E+I.length},0)+P2*m.length,v=new Uint8Array(g),y=0,x=0;x<m.length;x++)b=m[x],C=new Uint8Array(new Uint32Array([b.length]).buffer),v.set(C,y),y+=P2,v.set(b,y),y+=b.length;return p(v),[2]}})})});r.push(h)}else r.push(d.data());e!=null&&(f.group=e),n.push(f)},i=0;i<o.length;++i)s(i);return[4,Promise.all(r)];case 1:return[2,{data:Ytt(u.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new WN(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WN({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WN({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return wi.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:ab,getSaveHandlers:function(t){return wi.getSaveHandlers(t)},http:gA,isHTTPScheme:mA,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),it(this,void 0,void 0,function(){return at(this,function(o){return[2,l5(function(s){return Roe(s,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return wi.registerLoadRouter(t)},registerSaveRouter:function(t){return wi.registerSaveRouter(t)},weightsLoaderFactory:l5,withSaveHandler:function(t){return new snt(t)},copyModel:function(t,e){return it(this,void 0,void 0,function(){return at(this,function(n){return[2,o5(t,e,!1)]})})},listModels:function(){return it(this,void 0,void 0,function(){var t,e,n,r,o,s,i;return at(this,function(a){switch(a.label){case 0:t=Id.getSchemes(),e={},n=0,r=t,a.label=1;case 1:return n<r.length?(o=r[n],[4,Id.getManager(o).listModels()]):[3,4];case 2:for(i in s=a.sent())e[o+Sm+i]=s[i];a.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return it(this,void 0,void 0,function(){return at(this,function(n){return[2,o5(t,e,!0)]})})},removeModel:function(t){return it(this,void 0,void 0,function(){var e;return at(this,function(n){return e=kk(t),[2,Id.getManager(e.scheme).removeModel(e.path)]})})}}),Tp;Z({confusionMatrix_:function(t,e,n){var r=V(t,"labels","confusionMatrix"),o=V(e,"predictions","confusionMatrix");G(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),G(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),G(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),G(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),G(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var s=aA(r.asType("int32"),n),i=aA(o.asType("int32"),n);return s.transpose().matMul(i).asType("int32")}});var int=Z({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,s=!1,i=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)s=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);i=!0}if(o&&o&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(rre("FromPixels",oe.backendName)!=null)return oe.runKernel("FromPixels",{pixels:t},{numChannels:e});var a,u,l=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],c=l[0],d=l[1];if(i?a=t.getContext("2d").getImageData(0,0,c,d).data:r||n?a=t.data:(s||o)&&(Tp==null&&(Tp=document.createElement("canvas").getContext("2d")),Tp.canvas.width=c,Tp.canvas.height=d,Tp.drawImage(t,0,0,c,d),a=Tp.getImageData(0,0,c,d).data),e===4)u=new Int32Array(a);else{var f=c*d;u=new Int32Array(f*e);for(var h=0;h<f;h++)for(var p=0;p<e;++p)u[h*e+p]=a[4*h+p]}return K3(u,[d,c,e],"int32")}}),wL=Object.freeze({toPixels:function(t,e){return it(this,void 0,void 0,function(){var n,r,o,s,i,a,u,l,c,d,f,h,p,m,g,v,y,x,b,C,S,E,I;return at(this,function(T){switch(T.label){case 0:if(n=V(t,"img","toPixels"),t instanceof Er||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],s=r[1],(i=n.rank===2?1:n.shape[2])>4||i===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return a=T.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=T.sent(),d=c[0],f=c[1],h=d[0],p=f[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(m=n.dtype==="float32"?255:1,g=new Uint8ClampedArray(s*o*4),v=0;v<o*s;++v)y=void 0,x=void 0,b=void 0,C=void 0,i===1?(y=a[v]*m,x=a[v]*m,b=a[v]*m,C=255):i===3?(y=a[3*v]*m,x=a[3*v+1]*m,b=a[3*v+2]*m,C=255):i===4&&(y=a[4*v]*m,x=a[4*v+1]*m,b=a[4*v+2]*m,C=a[4*v+3]*m),g[(S=4*v)+0]=Math.round(y),g[S+1]=Math.round(x),g[S+2]=Math.round(b),g[S+3]=Math.round(C);return e!=null&&(e.width=s,e.height=o,E=e.getContext("2d"),I=new ImageData(g,s,o),E.putImageData(I,0,0)),n!==t&&n.dispose(),[2,g]}})})},fromPixels:int}),ant=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t}(),unt=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function ap(t){G(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),G(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),G(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),unt.register(t)}var up=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return lu(e,t),e.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var s=this.computeGradients(n,o),i=s.value,a=s.grads;if(o!=null){var u=o.map(function(l){return{name:l.name,tensor:a[l.name]}});this.applyGradients(u)}else this.applyGradients(a);return ni(a),r?i:(i.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return gQe(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&ni(this.iterations_)},e.prototype.saveIterations=function(){return it(this,void 0,void 0,function(){return at(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:He(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return it(this,void 0,void 0,function(){return at(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(n){return it(this,void 0,void 0,function(){return at(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(n){return it(this,void 0,void 0,function(){var r;return at(this,function(o){switch(o.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=o.sent()[0],[2,n.slice(1)]}})})},e}(ant);Object.defineProperty(up,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var lnt=function(t){function e(n,r,o){o===void 0&&(o=null);var s=t.call(this)||this;return s.learningRate=n,s.rho=r,s.epsilon=o,s.accumulatedGrads=[],s.accumulatedUpdates=[],o==null&&(s.epsilon=oe.backend.epsilon()),s}return lu(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,s){var i=oe.registeredVariables[o];r.accumulatedGrads[s]==null&&(r.accumulatedGrads[s]={originalName:o+"/accum_grad",variable:Je(function(){return gn(i).variable(!1)})}),r.accumulatedUpdates[s]==null&&(r.accumulatedUpdates[s]={originalName:o+"/accum_var",variable:Je(function(){return gn(i).variable(!1)})});var a=Array.isArray(n)?n[s].tensor:n[o];if(a!=null){var u=r.accumulatedGrads[s].variable,l=r.accumulatedUpdates[s].variable;Je(function(){var c=u.mul(r.rho).add(a.square().mul(1-r.rho)),d=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(a),f=l.mul(r.rho).add(d.square().mul(1-r.rho));u.assign(c),l.assign(f);var h=d.mul(-r.learningRate).add(i);i.assign(h)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(ni(this.accumulatedGrads.map(function(n){return n.variable})),ni(this.accumulatedUpdates.map(function(n){return n.variable})))},e.prototype.getWeights=function(){return it(this,void 0,void 0,function(){var n;return at(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},e.prototype.setWeights=function(n){return it(this,void 0,void 0,function(){var r;return at(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(up);ap(lnt);var cnt=function(t){function e(n,r){r===void 0&&(r=.1);var o=t.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads=[],o}return lu(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,s){var i=oe.registeredVariables[o];r.accumulatedGrads[s]==null&&(r.accumulatedGrads[s]={originalName:o+"/accumulator",variable:Je(function(){return Xu(i.shape,r.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(n)?n[s].tensor:n[o];if(a!=null){var u=r.accumulatedGrads[s].variable;Je(function(){var l=u.add(a.square());u.assign(l);var c=a.div(l.add(oe.backend.epsilon()).sqrt()).mul(-r.learningRate).add(i);i.assign(c)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&ni(this.accumulatedGrads.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return it(this,void 0,void 0,function(){return at(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return it(this,void 0,void 0,function(){return at(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(up);ap(cnt);var dnt=function(t){function e(n,r,o,s){s===void 0&&(s=null);var i=t.call(this)||this;return i.learningRate=n,i.beta1=r,i.beta2=o,i.epsilon=s,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Je(function(){i.accBeta1=He(r).variable(),i.accBeta2=He(o).variable()}),s==null&&(i.epsilon=oe.backend.epsilon()),i}return lu(e,t),e.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(s){return s.name}):Object.keys(n);Je(function(){var s=ko(1,r.accBeta1),i=ko(1,r.accBeta2);o.forEach(function(a,u){var l=oe.registeredVariables[a];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:Je(function(){return gn(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:a+"/v",variable:Je(function(){return gn(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[a];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedSecondMoment[u].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),p=f.mul(r.beta2).add(c.square().mul(1-r.beta2)),m=h.div(s),g=p.div(i);d.assign(h),f.assign(p);var v=m.div(g.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(v)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ni(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&ni(this.accumulatedSecondMoment.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return it(this,void 0,void 0,function(){var n;return at(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},e.prototype.setWeights=function(n){return it(this,void 0,void 0,function(){var r,o=this;return at(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(n)];case 1:return n=s.sent(),Je(function(){o.accBeta1.assign($2(o.beta1,o.iterations_+1)),o.accBeta2.assign($2(o.beta2,o.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(up);ap(dnt);var fnt=function(t){function e(n,r,o,s,i){s===void 0&&(s=null),i===void 0&&(i=0);var a=t.call(this)||this;return a.learningRate=n,a.beta1=r,a.beta2=o,a.epsilon=s,a.decay=i,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],Je(function(){a.iteration=He(0).variable(),a.accBeta1=He(r).variable()}),s==null&&(a.epsilon=oe.backend.epsilon()),a}return lu(e,t),e.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(s){return s.name}):Object.keys(n);Je(function(){var s=ko(1,r.accBeta1),i=La(-r.learningRate,r.iteration.mul(r.decay).add(1));o.forEach(function(a,u){var l=oe.registeredVariables[a];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:gn(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:a+"/v",variable:gn(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[a];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedWeightedInfNorm[u].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),p=f.mul(r.beta2),m=c.abs(),g=p.maximum(m);d.assign(h),f.assign(g);var v=i.div(s).mul(h.div(g.add(r.epsilon))).add(l);l.assign(v)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ni(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&ni(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return it(this,void 0,void 0,function(){return at(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(n){return it(this,void 0,void 0,function(){return at(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(up);ap(fnt);var $oe=function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return lu(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,s){var i=Array.isArray(n)?n[s].tensor:n[o];if(i!=null){var a=oe.registeredVariables[o];Je(function(){var u=r.c.mul(i).add(a);a.assign(u)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=DXe(He(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return it(this,void 0,void 0,function(){return at(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},e.prototype.setWeights=function(n){return it(this,void 0,void 0,function(){return at(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e}(up);ap($oe);var hnt=function(t){function e(n,r,o){o===void 0&&(o=!1);var s=t.call(this,n)||this;return s.learningRate=n,s.momentum=r,s.useNesterov=o,s.accumulations=[],s.m=He(s.momentum),s}return lu(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,s){var i=oe.registeredVariables[o];r.accumulations[s]==null&&(r.accumulations[s]={originalName:o+"/momentum",variable:Je(function(){return gn(i).variable(!1)})});var a=r.accumulations[s].variable,u=Array.isArray(n)?n[s].tensor:n[o];u!=null&&Je(function(){var l,c=r.m.mul(a).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(i):r.c.mul(c).add(i),a.assign(c),i.assign(l)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&ni(this.accumulations.map(function(n){return n.variable}))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return it(this,void 0,void 0,function(){return at(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return it(this,void 0,void 0,function(){return at(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}($oe);ap(hnt);var pnt=function(t){function e(n,r,o,s,i){r===void 0&&(r=.9),o===void 0&&(o=0),s===void 0&&(s=null),i===void 0&&(i=!1);var a=t.call(this)||this;if(a.learningRate=n,a.decay=r,a.momentum=o,a.epsilon=s,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=i,s==null&&(a.epsilon=oe.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return lu(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,s){var i=oe.registeredVariables[o];r.accumulatedMeanSquares[s]==null&&(r.accumulatedMeanSquares[s]={originalName:o+"/rms",variable:Je(function(){return gn(i).variable(!1)})}),r.accumulatedMoments[s]==null&&(r.accumulatedMoments[s]={originalName:o+"/momentum",variable:Je(function(){return gn(i).variable(!1)})}),r.accumulatedMeanGrads[s]==null&&r.centered&&(r.accumulatedMeanGrads[s]={originalName:o+"/mg",variable:Je(function(){return gn(i).variable(!1)})});var a=Array.isArray(n)?n[s].tensor:n[o];if(a!=null){var u=r.accumulatedMeanSquares[s].variable,l=r.accumulatedMoments[s].variable;Je(function(){var c=u.mul(r.decay).add(a.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[s].variable,f=d.mul(r.decay).add(a.mul(1-r.decay)),h=l.mul(r.momentum).add(a.mul(r.learningRate).div(c.sub(f.square().add(r.epsilon)).sqrt()));u.assign(c),d.assign(f),l.assign(h);var p=i.sub(h);i.assign(p)}else{var m=u.mul(r.decay).add(a.square().mul(1-r.decay));h=l.mul(r.momentum).add(a.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),u.assign(m),l.assign(h),p=i.sub(h),i.assign(p)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&ni(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&ni(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&ni(this.accumulatedMoments.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return it(this,void 0,void 0,function(){var n;return at(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},e.prototype.setWeights=function(n){return it(this,void 0,void 0,function(){var r;return at(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(up);ap(pnt);Er.prototype.squaredDifference=function(t){return Kre(this,t)},pe=jtt;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vA=function(t,e){return vA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},vA(t,e)};function $t(t,e){vA(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var us=function(){return us=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},us.apply(this,arguments)};function pt(t,e,n,r){function o(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function a(c){try{l(r.next(c))}catch(d){i(d)}}function u(c){try{l(r.throw(c))}catch(d){i(d)}}function l(c){c.done?s(c.value):o(c.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function mt(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(s=l[0]&2?o.return:l[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,l[1])).done)return s;switch(o=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],o=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Dy(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var s=arguments[e],i=0,a=s.length;i<a;i++,o++)r[o]=s[i];return r}var Im=function(){function t(e,n){if(!ih(e)||!ih(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function H_(t,e){return t instanceof Er&&t.shape.length===e}function mnt(t){return H_(t,2)}function G_(t){return H_(t,3)}function Td(t){return H_(t,4)}function gnt(t){return t%1!==0}function d5(t){return t%2===0}function vnt(t,e){e===void 0&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function f5(t){return t&&t.width&&t.height}function ynt(t,e){var n=t.width,r=t.height,o=e/Math.max(r,n);return new Im(Math.round(n*o),Math.round(r*o))}function kL(t){return t.reduce(function(e,n){return e.add(n)},new In(0,0)).div(new In(t.length,t.length))}function W0(t,e,n){return Array(t).fill(0).map(function(r,o){return e+o*n})}function ih(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function h5(t){return ih(t)&&0<=t&&t<=1}var In=function(){function t(e,n){this._x=e,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),Kd=function(){function t(e,n){n===void 0&&(n=!0);var r=e||{},o=[r.left,r.top,r.right,r.bottom].every(ih),s=[r.x,r.y,r.width,r.height].every(ih);if(!s&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=s?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],a=i[0],u=i[1],l=i[2],c=i[3];t.assertIsValidBox({x:a,y:u,width:l,height:c},"Box.constructor",n),this._x=a,this._y=u,this._width=l,this._height=c}return t.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(ih)},t.assertIsValidBox=function(e,n,r){if(r===void 0&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new In(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new In(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new In(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new In(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(i){return Math.round(i)}),n=e[0],r=e[1],o=e[2],s=e[3];return new t({x:n,y:r,width:o,height:s})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(i){return Math.floor(i)}),n=e[0],r=e[1],o=e[2],s=e[3];return new t({x:n,y:r,width:o,height:s})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,o=e.width,s=e.height,i=Math.abs(o-s);return o<s&&(n-=i/2,o+=i),s<o&&(r-=i/2,s+=i),new t({x:n,y:r,width:o,height:s})},t.prototype.rescale=function(e){var n=f5(e)?e.width:e,r=f5(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n],o=r[0],s=r[1],i=r[2],a=r[3];return new t({x:o,y:s,width:i,height:a})},t.prototype.clipAtImageBorders=function(e,n){var r=this,o=r.x,s=r.y,i=r.right,a=r.bottom,u=Math.max(o,0),l=Math.max(s,0),c=i-u,d=a-l,f=Math.min(c,e-u),h=Math.min(d,n-l);return new t({x:u,y:l,width:f,height:h}).floor()},t.prototype.shift=function(e,n){var r=this,o=r.width,s=r.height,i=this.x+e,a=this.y+n;return new t({x:i,y:a,width:o,height:s})},t.prototype.padAtBorders=function(e,n){var r=this.width+1,o=this.height+1,s=1,i=1,a=r,u=o,l=this.left,c=this.top,d=this.right,f=this.bottom;return d>n&&(a=-d+n+r,d=n),f>e&&(u=-f+e+o,f=e),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:i,edy:u,dx:s,edx:a,y:c,ey:f,x:l,ex:d,w:r,h:o}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),Y_=function(t){$t(e,t);function e(n,r,o,s,i){return i===void 0&&(i=!1),t.call(this,{left:n,top:r,right:o,bottom:s},i)||this}return e}(Kd),Moe=function(){function t(e,n,r,o,s){this._imageDims=new Im(s.width,s.height),this._score=e,this._classScore=n,this._className=r,this._box=new Kd(o).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new Kd(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),pl=function(t){$t(e,t);function e(n,r,o){return t.call(this,n,n,"",r,o)||this}return e.prototype.forSize=function(n,r){var o=t.prototype.forSize.call(this,n,r),s=o.score,i=o.relativeBox,a=o.imageDims;return new e(s,i,a)},e}(Moe);function xnt(t,e,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),o=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)),s=r*o;return n?s/(t.area+e.area-s):s/Math.min(t.area,e.area)}function bnt(t){var e=t.map(function(a){return a.x}),n=t.map(function(a){return a.y}),r=e.reduce(function(a,u){return u<a?u:a},1/0),o=n.reduce(function(a,u){return u<a?u:a},1/0),s=e.reduce(function(a,u){return a<u?u:a},0),i=n.reduce(function(a,u){return a<u?u:a},0);return new Y_(r,o,s,i)}function z0(t,e,n,r){r===void 0&&(r=!0);for(var o=e.map(function(a,u){return{score:a,boxIndex:u}}).sort(function(a,u){return a.score-u.score}).map(function(a){return a.boxIndex}),s=[],i=function(){var a=o.pop();s.push(a);for(var u=o,l=[],c=0;c<u.length;c++){var d=u[c],f=t[a],h=t[d];l.push(xnt(f,h,r))}o=o.filter(function(p,m){return l[m]<=n})};o.length>0;)i();return s}function ub(t,e){return Je(function(){var n=e[0],r=e[1],o=e[2],s=Xu(Dy(t.shape.slice(0,3),[1]),n),i=Xu(Dy(t.shape.slice(0,3),[1]),r),a=Xu(Dy(t.shape.slice(0,3),[1]),o),u=yo([s,i,a],3);return ko(t,u)})}function wnt(t,e){return e===void 0&&(e=!1),Je(function(){var n=t.shape.slice(1),r=n[0],o=n[1];if(r===o)return t;var s=Math.abs(r-o),i=Math.round(s*(e?.5:1)),a=r>o?2:1,u=function(h){var p=t.shape.slice();return p[a]=h,Xu(p,0)},l=u(i),c=s-l.shape[a],d=e&&c?u(c):null,f=[d,t,l].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return yo(f,a)})}function zN(t){return 1/(1+Math.exp(-t))}var CL=function(t){$t(e,t);function e(n,r,o,s,i){return i===void 0&&(i=!1),t.call(this,{x:n,y:r,width:o,height:s},i)||this}return e}(Kd),knt=.5,Cnt=.43,Snt=.45,F2=function(){function t(e,n,r){r===void 0&&(r=new In(0,0));var o=n.width,s=n.height;this._imgDims=new Im(o,s),this._shift=r,this._positions=e.map(function(i){return i.mul(new In(o,s)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new In(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new In(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},t.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new In(e,n))},t.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},t.prototype.align=function(e,n){if(n===void 0&&(n={}),e){var r=e instanceof pl?e.box.floor():new Kd(e);return this.shiftBy(r.x,r.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),s=o.useDlibAlignment,i=o.minBoxPadding;return s?this.alignDlib():this.alignMinBbox(i)},t.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],r=e[1],o=e[2],s=function(d){return o.sub(d).magnitude()},i=(s(n)+s(r))/2,a=Math.floor(i/Snt),u=kL(e),l=Math.floor(Math.max(0,u.x-knt*a)),c=Math.floor(Math.max(0,u.y-Cnt*a));return new CL(l,c,Math.min(a,this.imageWidth+l),Math.min(a,this.imageHeight+c))},t.prototype.alignMinBbox=function(e){var n=bnt(this.positions);return n.pad(n.width*e,n.height*e)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),Ent=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],kL([n[3],n[4]])]},e}(F2),_nt=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(kL)},e}(F2),p5=function(){function t(e,n){this._label=e,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+vnt(this.distance)+")":"")},t}(),m5=function(t){$t(e,t);function e(n,r){var o=t.call(this,n)||this;return o._label=r,o}return e.assertIsValidLabeledBox=function(n,r){if(Kd.assertIsValidBox(n,r),!ih(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(Kd),$w=function(){function t(e,n){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},t.fromJSON=function(e){var n=e.descriptors.map(function(r){return new Float32Array(r)});return new t(e.label,n)},t}();(function(t){$t(e,t);function e(n,r,o,s){var i=t.call(this,n,r)||this;return i._score=o,i._classScore=s,i}return e.assertIsValidPredictedBox=function(n,r){if(m5.assertIsValidLabeledBox(n,r),!h5(n.score)||!h5(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(m5);function Int(t){return t.detection instanceof pl}function SL(t,e){var n={detection:e};return Object.assign({},t,n)}function Poe(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:e}}function Foe(t){var e="";if(!t)try{t=require("fs")}catch(r){e=r.toString()}var n=t?function(r){return new Promise(function(o,s){t.readFile(r,function(i,a){return i?s(i):o(a)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:n}}function Loe(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},s=Foe();return us({Canvas:t||function(){function i(){}return i}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function i(){}return i}(),Image:e||function(){function i(){}return i}(),ImageData:global.ImageData||function(){function i(){}return i}(),Video:global.HTMLVideoElement||function(){function i(){}return i}(),createCanvasElement:n,createImageElement:r,fetch:o},s)}function Boe(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function joe(){return typeof global=="object"&&typeof require=="function"&&typeof Py<"u"&&typeof process<"u"&&!!process.version}var co;function Tnt(){if(!co)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return co}function yA(t){co=t}function EL(){Boe()&&yA(Poe()),joe()&&yA(Loe())}function Nnt(t){if(co||EL(),!co)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=e===void 0?co.Canvas:e,r=t.Image,o=r===void 0?co.Image:r;co.Canvas=n,co.Image=o,co.createCanvasElement=t.createCanvasElement||function(){return new n},co.createImageElement=t.createImageElement||function(){return new o},co.ImageData=t.ImageData||co.ImageData,co.Video=t.Video||co.Video,co.fetch=t.fetch||co.fetch,co.readFile=t.readFile||co.readFile}var bs={getEnv:Tnt,setEnv:yA,initialize:EL,createBrowserEnv:Poe,createFileSystem:Foe,createNodejsEnv:Loe,monkeyPatch:Nnt,isBrowser:Boe,isNodejs:joe};EL();function Woe(t){return!bs.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function Ph(t){var e=bs.getEnv(),n=e.Canvas,r=e.CanvasRenderingContext2D;if(t instanceof r)return t;var o=Woe(t);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var s=o.getContext("2d");if(!s)throw new Error("resolveContext2d - canvas 2d context is null");return s}var g5;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(g5||(g5={}));function zoe(t){var e=bs.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function Dnt(t){return new Promise(function(e,n){if(t instanceof bs.getEnv().Canvas||zoe(t))return e();function r(s){s.currentTarget&&(s.currentTarget.removeEventListener("load",r),s.currentTarget.removeEventListener("error",o),e(s))}function o(s){s.currentTarget&&(s.currentTarget.removeEventListener("load",r),s.currentTarget.removeEventListener("error",o),n(s))}t.addEventListener("load",r),t.addEventListener("error",o)})}function Uoe(t){var e=bs.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new Im(t.naturalWidth,t.naturalHeight):t instanceof r?new Im(t.videoWidth,t.videoHeight):new Im(t.width,t.height)}function q_(t){var e=t.width,n=t.height,r=bs.getEnv().createCanvasElement,o=r();return o.width=e,o.height=n,o}function _L(t,e){var n=bs.getEnv().ImageData;if(!(t instanceof n)&&!zoe(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=e||Uoe(t),o=r.width,s=r.height,i=q_({width:o,height:s});return t instanceof n?Ph(i).putImageData(t,0,0):Ph(i).drawImage(t,0,0,o,s),i}function Rnt(t,e){return pt(this,void 0,void 0,function(){var n,r,o,s,i,a;return mt(this,function(u){switch(u.label){case 0:return n=e||bs.getEnv().createCanvasElement(),r=t.shape.slice(Td(t)?1:0),o=r[0],s=r[1],i=r[2],a=Je(function(){return t.as3D(o,s,i).toInt()}),[4,wL.toPixels(a,n)];case 1:return u.sent(),a.dispose(),[2,n]}})})}function v5(t){var e=bs.getEnv(),n=e.Image,r=e.Canvas,o=e.Video;return t instanceof n||t instanceof r||t instanceof o}function Ont(t,e,n){n===void 0&&(n=!1);var r=bs.getEnv(),o=r.Image,s=r.Canvas;if(!(t instanceof o||t instanceof s))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=Uoe(t),a=e/Math.max(i.height,i.width),u=a*i.width,l=a*i.height,c=q_({width:e,height:e}),d=t instanceof s?t:_L(t),f=Math.abs(u-l)/2,h=n&&u<l?f:0,p=n&&l<u?f:0;return Ph(c).drawImage(d,h,p,u,l),c}var L2=function(){function t(e,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(o,s){if(G_(o)){r._imageTensors[s]=o,r._inputDimensions[s]=o.shape;return}if(Td(o)){var i=o.shape[0];if(i!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+i+" passed, but not supported in input array");r._imageTensors[s]=o,r._inputDimensions[s]=o.shape.slice(1);return}var a=o instanceof bs.getEnv().Canvas?o:_L(o);r._canvases[s]=a,r._inputDimensions[s]=[a.height,a.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var e=this;return W0(this.batchSize,0,1).map(function(n,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},t.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},t.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},t.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},t.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(e),r=this.getInputHeight(e);return ynt({width:n,height:r},this.inputSize)},t.prototype.toBatchTensor=function(e,n){var r=this;return n===void 0&&(n=!0),this._inputSize=e,Je(function(){var o=W0(r.batchSize,0,1).map(function(i){var a=r.getInput(i);if(a instanceof Er){var u=Td(a)?a:a.expandDims();return u=wnt(u,n),(u.shape[1]!==e||u.shape[2]!==e)&&(u=mL.resizeBilinear(u,[e,e])),u.as3D(e,e,3)}if(a instanceof bs.getEnv().Canvas)return wL.fromPixels(Ont(a,e,n));throw new Error("toBatchTensor - at batchIdx "+i+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)}),s=Ii(o.map(function(i){return i.toFloat()})).as4D(r.batchSize,e,e,3);return s})},t}();function Ro(t){return pt(this,void 0,void 0,function(){var e,n,r;return mt(this,function(o){switch(o.label){case 0:if(t instanceof L2)return[2,t];if(e=Array.isArray(t)?t:[t],!e.length)throw new Error("toNetInput - empty array passed as input");return n=function(s){return Array.isArray(t)?" at input index "+s+":":""},r=e.map(Woe),r.forEach(function(s,i){if(!v5(s)&&!G_(s)&&!Td(s))throw typeof e[i]=="string"?new Error("toNetInput -"+n(i)+" string passed, but could not resolve HTMLElement for element id "+e[i]):new Error("toNetInput -"+n(i)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Td(s)){var a=s.shape[0];if(a!==1)throw new Error("toNetInput -"+n(i)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(s){return v5(s)&&Dnt(s)}))];case 1:return o.sent(),[2,new L2(r,Array.isArray(t))]}})})}function IL(t,e){return pt(this,void 0,void 0,function(){var n,r,o,s,i,a,u;return mt(this,function(l){switch(l.label){case 0:return n=bs.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,Ro(t)];case 1:if(o=l.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return s=o.getInput(0),s instanceof n?(i=s,[3,4]):[3,2];case 2:return[4,Rnt(s)];case 3:i=l.sent(),l.label=4;case 4:r=i,l.label=5;case 5:return a=Ph(r),u=e.map(function(c){return c instanceof pl?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var d=c.x,f=c.y,h=c.width,p=c.height,m=q_({width:h,height:p});return Ph(m).putImageData(a.getImageData(d,f,h,p),0,0),m})]}})})}function TL(t,e){return pt(this,void 0,void 0,function(){return mt(this,function(n){if(!G_(t)&&!Td(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Td(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Je(function(){var r=t.shape.slice(Td(t)?1:0),o=r[0],s=r[1],i=r[2],a=e.map(function(l){return l instanceof pl?l.forSize(s,o).box:l}).map(function(l){return l.clipAtImageBorders(s,o)}),u=a.map(function(l){var c=l.x,d=l.y,f=l.width,h=l.height;return goe(t.as3D(o,s,i),[d,c,0],[h,f,i])});return u})]})})}function Ant(t,e){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(o){switch(o.label){case 0:return n=bs.getEnv().fetch,[4,n(t,e)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function $nt(t){return pt(this,void 0,void 0,function(){return mt(this,function(e){switch(e.label){case 0:return[4,Ant(t)];case 1:return[2,e.sent().json()]}})})}function Voe(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var o=t.split("/").filter(function(a){return a}),s=t.endsWith(".json")?o[o.length-1]:n,i=r+(t.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return i=t.startsWith("/")?"/"+i:i,{modelBaseUri:i,manifestUri:i==="/"?"/"+s:i+"/"+s}}function Mnt(t,e){return pt(this,void 0,void 0,function(){var n,r,o,s;return mt(this,function(i){switch(i.label){case 0:return n=Voe(t,e),r=n.manifestUri,o=n.modelBaseUri,[4,$nt(r)];case 1:return s=i.sent(),[2,Aoe.loadWeights(s,o)]}})})}var Ec=function(){function t(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e),r=n.obj,o=n.objProp;return r[o]},t.prototype.reassignParamFromPath=function(e,n){var r=this.traversePropertyPath(e),o=r.obj,s=r.objProp;o[s].dispose(),o[s]=n},t.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof xg})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof xg)})},t.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var r=n.path,o=n.tensor;e.reassignParamFromPath(r,o.variable())})},t.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var r=n.path,o=n.tensor,s=Ho(o.dataSync());o.dispose(),e.reassignParamFromPath(r,s)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var n=e.tensor;return Array.from(n.dataSync())}).reduce(function(e,n){return e.concat(n)}))},t.prototype.load=function(e){return pt(this,void 0,void 0,function(){return mt(this,function(n){switch(n.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(e){return pt(this,void 0,void 0,function(){var n;return mt(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Mnt(e,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(e){return pt(this,void 0,void 0,function(){var n,r,o,s,i,a,u,l,c,d;return mt(this,function(f){switch(f.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=bs.getEnv().readFile,r=Voe(e,this.getDefaultModelName()),o=r.manifestUri,s=r.modelBaseUri,i=function(h){return Promise.all(h.map(function(p){return n(p).then(function(m){return m.buffer})}))},a=Aoe.weightsLoaderFactory(i),c=(l=JSON).parse,[4,n(o)];case 1:return u=c.apply(l,[f.sent().toString()]),[4,a(u,s)];case 2:return d=f.sent(),this.loadFromWeightMap(d),[2]}})})},t.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},t.prototype.extractWeights=function(e){var n=this.extractParams(e),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},t.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(s,i){if(!s.nextObj.hasOwnProperty(i))throw new Error("traversePropertyPath - object does not have property "+i+", for path "+e);return{obj:s.nextObj,objProp:i,nextObj:s.nextObj[i]}},{nextObj:this.params}),r=n.obj,o=n.objProp;if(!r||!o||!(r[o]instanceof Er))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:o}},t}();function ki(t,e,n){return Je(function(){var r=cL(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=Xt(r,e.bias),r})}function UN(t,e,n){return n===void 0&&(n=!1),Je(function(){var r=Ir(n?Xt(ba(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):ki(t,e.conv0,[2,2])),o=ki(r,e.conv1,[1,1]),s=Ir(Xt(r,o)),i=ki(s,e.conv2,[1,1]);return Ir(Xt(r,Xt(o,i)))})}function Mw(t,e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),Je(function(){var o=Ir(n?Xt(ba(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):ki(t,e.conv0,r?[2,2]:[1,1])),s=ki(o,e.conv1,[1,1]),i=Ir(Xt(o,s)),a=ki(i,e.conv2,[1,1]),u=Ir(Xt(o,Xt(s,a))),l=ki(u,e.conv3,[1,1]);return Ir(Xt(o,Xt(s,Xt(a,l))))})}function Qa(t,e,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),Je(function(){var o=Xt(ba(t,e.filters,[1,1],n),e.bias);return r?Ir(o):o})}function _c(t,e){Object.keys(t).forEach(function(n){e.some(function(r){return r.originalPath===n})||t[n].dispose()})}function K_(t,e){return function(n,r,o,s){var i=Hs(t(n*r*o*o),[o,o,n,r]),a=Zr(t(r));return e.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:i,bias:a}}}function NL(t,e){return function(n,r,o){var s=_d(t(n*r),[n,r]),i=Zr(t(r));return e.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:s,bias:i}}}var Hoe=function(){function t(e,n,r){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=r}return t}();function DL(t,e){return function(n,r,o){var s=Hs(t(9*n),[3,3,n,1]),i=Hs(t(n*r),[1,1,n,r]),a=Zr(t(r));return e.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new Hoe(s,i,a)}}function RL(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),o=t(e+"/bias",1);return new Hoe(n,r,o)}}function vf(t,e){return function(n,r,o){var s=t[n];if(!H_(s,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+s);return e.push({originalPath:n,paramPath:o||n}),s}}function Ic(t){var e=t;function n(o){var s=e.slice(0,o);return e=e.slice(o),s}function r(){return e}return{extractWeights:n,getRemainingWeights:r}}function Goe(t,e){var n=K_(t,e),r=DL(t,e);function o(i,a,u,l){l===void 0&&(l=!1);var c=l?n(i,a,3,u+"/conv0"):r(i,a,u+"/conv0"),d=r(a,a,u+"/conv1"),f=r(a,a,u+"/conv2");return{conv0:c,conv1:d,conv2:f}}function s(i,a,u,l){l===void 0&&(l=!1);var c=o(i,a,u,l),d=c.conv0,f=c.conv1,h=c.conv2,p=r(a,a,u+"/conv3");return{conv0:d,conv1:f,conv2:h,conv3:p}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:s}}function Pnt(t){var e=[],n=Ic(t),r=n.extractWeights,o=n.getRemainingWeights,s=Goe(r,e).extractDenseBlock4Params,i=s(3,32,"dense0",!0),a=s(32,64,"dense1"),u=s(64,128,"dense2"),l=s(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{dense0:i,dense1:a,dense2:u,dense3:l}}}function Yoe(t){return function(e){var n=t(e+"/filters",4),r=t(e+"/bias",1);return{filters:n,bias:r}}}function qoe(t,e){var n=vf(t,e),r=Yoe(n),o=RL(n);function s(a,u){u===void 0&&(u=!1);var l=u?r(a+"/conv0"):o(a+"/conv0"),c=o(a+"/conv1"),d=o(a+"/conv2");return{conv0:l,conv1:c,conv2:d}}function i(a,u){u===void 0&&(u=!1);var l=u?r(a+"/conv0"):o(a+"/conv0"),c=o(a+"/conv1"),d=o(a+"/conv2"),f=o(a+"/conv3");return{conv0:l,conv1:c,conv2:d,conv3:f}}return{extractDenseBlock3Params:s,extractDenseBlock4Params:i}}function Fnt(t){var e=[],n=qoe(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return _c(t,e),{params:r,paramMappings:e}}var Koe=function(t){$t(e,t);function e(){return t.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Je(function(){var o=n.toBatchTensor(112,!0),s=[122.782,117.001,104.298],i=ub(o,s).div(He(255)),a=Mw(i,r.dense0,!0);return a=Mw(a,r.dense1),a=Mw(a,r.dense2),a=Mw(a,r.dense3),a=ib(a,[7,7],[2,2],"valid"),a})},e.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ro(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Fnt(n)},e.prototype.extractParams=function(n){return Pnt(n)},e}(Ec);function Mu(t,e){return Je(function(){return Xt(z_(t,e.weights),e.bias)})}function Lnt(t,e,n){var r=[],o=Ic(t),s=o.extractWeights,i=o.getRemainingWeights,a=NL(s,r),u=a(e,n,"fc");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:u}}}function Bnt(t){var e=[],n=vf(t,e);function r(s){var i=n(s+"/weights",2),a=n(s+"/bias",1);return{weights:i,bias:a}}var o={fc:r("fc")};return _c(t,e),{params:o,paramMappings:e}}function Xoe(t){var e={},n={};return Object.keys(t).forEach(function(r){var o=r.startsWith("fc")?n:e;o[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var Qoe=function(t){$t(e,t);function e(n,r){var o=t.call(this,n)||this;return o._faceFeatureExtractor=r,o}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return Je(function(){var s=n instanceof L2?r.faceFeatureExtractor.forwardInput(n):n;return Mu(s.as2D(s.shape[0],-1),o.fc)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,s=r.paramMappings;this._params=o,this._paramMappings=s},e.prototype.extractClassifierParams=function(n){return Lnt(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(n){var r=Xoe(n),o=r.featureExtractorMap,s=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),Bnt(s)},e.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),s=o*r+o,i=n.slice(0,n.length-s),a=n.slice(n.length-s);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)},e}(Ec),y5=["neutral","happy","sad","angry","fearful","disgusted","surprised"],jnt=function(){function t(e){var n=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);y5.forEach(function(r,o){n[r]=e[o]})}return t.prototype.asSortedArray=function(){var e=this;return y5.map(function(n){return{expression:n,probability:e[n]}}).sort(function(n,r){return r.probability-n.probability})},t}(),Wnt=function(t){$t(e,t);function e(n){return n===void 0&&(n=new Koe),t.call(this,"FaceExpressionNet",n)||this}return e.prototype.forwardInput=function(n){var r=this;return Je(function(){return Cc(r.runNet(n))})},e.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ro(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.predictExpressions=function(n){return pt(this,void 0,void 0,function(){var r,o,s,i,a=this;return mt(this,function(u){switch(u.label){case 0:return[4,Ro(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return o=u.sent(),[4,Promise.all(xo(o).map(function(l){return pt(a,void 0,void 0,function(){var c;return mt(this,function(d){switch(d.label){case 0:return[4,l.data()];case 1:return c=d.sent(),l.dispose(),[2,c]}})})}))];case 3:return s=u.sent(),o.dispose(),i=s.map(function(l){return new jnt(l)}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(Qoe);function Joe(t,e){var n={expressions:e};return Object.assign({},t,n)}function znt(t){return Int(t)&&t.landmarks instanceof F2&&t.unshiftedLandmarks instanceof F2&&t.alignedRect instanceof pl}function OL(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),o=r.align(),s=t.detection.imageDims,i=new pl(t.detection.score,o.rescale(s.reverse()),s),a={landmarks:r,unshiftedLandmarks:e,alignedRect:i};return Object.assign({},t,a)}function Unt(t,e){var n=K_(t,e),r=DL(t,e);function o(i,a,u){var l=r(i,a,u+"/separable_conv0"),c=r(a,a,u+"/separable_conv1"),d=n(i,a,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:d}}function s(i,a){var u=r(i,i,a+"/separable_conv0"),l=r(i,i,a+"/separable_conv1"),c=r(i,i,a+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:s}}function Vnt(t,e){var n=[],r=Ic(t),o=r.extractWeights,s=r.getRemainingWeights,i=Unt(o,n),a=i.extractConvParams,u=i.extractSeparableConvParams,l=i.extractReductionBlockParams,c=i.extractMainBlockParams,d=a(3,32,3,"entry_flow/conv_in"),f=l(32,64,"entry_flow/reduction_block_0"),h=l(64,128,"entry_flow/reduction_block_1"),p={conv_in:d,reduction_block_0:f,reduction_block_1:h},m={};W0(e,0,1).forEach(function(x){m["main_block_"+x]=c(128,"middle_flow/main_block_"+x)});var g=l(128,256,"exit_flow/reduction_block"),v=u(256,512,"exit_flow/separable_conv"),y={reduction_block:g,separable_conv:v};if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:n,params:{entry_flow:p,middle_flow:m,exit_flow:y}}}function Hnt(t,e){var n=vf(t,e),r=Yoe(n),o=RL(n);function s(a){var u=o(a+"/separable_conv0"),l=o(a+"/separable_conv1"),c=r(a+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function i(a){var u=o(a+"/separable_conv0"),l=o(a+"/separable_conv1"),c=o(a+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:s,extractMainBlockParams:i}}function Gnt(t,e){var n=[],r=Hnt(t,n),o=r.extractConvParams,s=r.extractSeparableConvParams,i=r.extractReductionBlockParams,a=r.extractMainBlockParams,u=o("entry_flow/conv_in"),l=i("entry_flow/reduction_block_0"),c=i("entry_flow/reduction_block_1"),d={conv_in:u,reduction_block_0:l,reduction_block_1:c},f={};W0(e,0,1).forEach(function(g){f["main_block_"+g]=a("middle_flow/main_block_"+g)});var h=i("exit_flow/reduction_block"),p=s("exit_flow/separable_conv"),m={reduction_block:h,separable_conv:p};return _c(t,n),{params:{entry_flow:d,middle_flow:f,exit_flow:m},paramMappings:n}}function Zoe(t,e,n){return Xt(ba(t,e.filters,n,"same"),e.bias)}function VN(t,e,n){n===void 0&&(n=!0);var r=n?Ir(t):t;return r=ki(r,e.separable_conv0,[1,1]),r=ki(Ir(r),e.separable_conv1,[1,1]),r=Eo(r,[3,3],[2,2],"same"),r=Xt(r,Zoe(t,e.expansion_conv,[2,2])),r}function Ynt(t,e){var n=ki(Ir(t),e.separable_conv0,[1,1]);return n=ki(Ir(n),e.separable_conv1,[1,1]),n=ki(Ir(n),e.separable_conv2,[1,1]),n=Xt(n,t),n}var qnt=function(t){$t(e,t);function e(n){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return e.prototype.forwardInput=function(n){var r=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return Je(function(){var s=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=ub(s,i).div(He(256)),u=Ir(Zoe(a,o.entry_flow.conv_in,[2,2]));return u=VN(u,o.entry_flow.reduction_block_0,!1),u=VN(u,o.entry_flow.reduction_block_1),W0(r._numMainBlocks,0,1).forEach(function(l){u=Ynt(u,o.middle_flow["main_block_"+l])}),u=VN(u,o.exit_flow.reduction_block),u=Ir(ki(u,o.exit_flow.separable_conv,[1,1])),u})},e.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ro(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Gnt(n,this._numMainBlocks)},e.prototype.extractParams=function(n){return Vnt(n,this._numMainBlocks)},e}(Ec);function Knt(t){var e=[],n=Ic(t),r=n.extractWeights,o=n.getRemainingWeights,s=NL(r,e),i=s(512,1,"fc/age"),a=s(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{fc:{age:i,gender:a}}}}function Xnt(t){var e=[],n=vf(t,e);function r(s){var i=n(s+"/weights",2),a=n(s+"/bias",1);return{weights:i,bias:a}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return _c(t,e),{params:o,paramMappings:e}}var B2;(function(t){t.FEMALE="female",t.MALE="male"})(B2||(B2={}));var Qnt=function(t){$t(e,t);function e(n){n===void 0&&(n=new qnt(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return Je(function(){var s=n instanceof L2?r.faceFeatureExtractor.forwardInput(n):n,i=ib(s,[7,7],[2,2],"valid").as2D(s.shape[0],-1),a=Mu(i,o.fc.age).as1D(),u=Mu(i,o.fc.gender);return{age:a,gender:u}})},e.prototype.forwardInput=function(n){var r=this;return Je(function(){var o=r.runNet(n),s=o.age,i=o.gender;return{age:s,gender:Cc(i)}})},e.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ro(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.predictAgeAndGender=function(n){return pt(this,void 0,void 0,function(){var r,o,s,i,a,u,l=this;return mt(this,function(c){switch(c.label){case 0:return[4,Ro(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return o=c.sent(),s=xo(o.age),i=xo(o.gender),a=s.map(function(d,f){return{ageTensor:d,genderTensor:i[f]}}),[4,Promise.all(a.map(function(d){var f=d.ageTensor,h=d.genderTensor;return pt(l,void 0,void 0,function(){var p,m,g,v,y;return mt(this,function(x){switch(x.label){case 0:return[4,f.data()];case 1:return p=x.sent()[0],[4,h.data()];case 2:return m=x.sent()[0],g=m>.5,v=g?B2.MALE:B2.FEMALE,y=g?m:1-m,f.dispose(),h.dispose(),[2,{age:p,gender:v,genderProbability:y}]}})})}))];case 3:return u=c.sent(),o.age.dispose(),o.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,s=r.paramMappings;this._params=o,this._paramMappings=s},e.prototype.extractClassifierParams=function(n){return Knt(n)},e.prototype.extractParamsFromWeigthMap=function(n){var r=Xoe(n),o=r.featureExtractorMap,s=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),Xnt(s)},e.prototype.extractParams=function(n){var r=1539,o=n.slice(0,n.length-r),s=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(s)},e}(Ec),ese=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.postProcess=function(n,r,o){var s=o.map(function(a){var u=a.width,l=a.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),i=s.length;return Je(function(){var a=function(f,h){return Ii([Xu([68],f),Xu([68],h)],1).as2D(1,136).as1D()},u=function(f,h){var p=s[f],m=p.width,g=p.height;return h(m,g)?Math.abs(m-g)/2:0},l=function(f){return u(f,function(h,p){return h<p})},c=function(f){return u(f,function(h,p){return p<h})},d=n.mul(Xu([i,136],r)).sub(Ii(Array.from(Array(i),function(f,h){return a(l(h),c(h))}))).div(Ii(Array.from(Array(i),function(f,h){return a(s[h].width,s[h].height)})));return d})},e.prototype.forwardInput=function(n){var r=this;return Je(function(){var o=r.runNet(n);return r.postProcess(o,n.inputSize,n.inputDimensions.map(function(s){var i=s[0],a=s[1];return{height:i,width:a}}))})},e.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ro(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.detectLandmarks=function(n){return pt(this,void 0,void 0,function(){var r,o,s,i=this;return mt(this,function(a){switch(a.label){case 0:return[4,Ro(n)];case 1:return r=a.sent(),o=Je(function(){return xo(i.forwardInput(r))}),[4,Promise.all(o.map(function(u,l){return pt(i,void 0,void 0,function(){var c,d,f,h,p;return mt(this,function(m){switch(m.label){case 0:return f=(d=Array).from,[4,u.data()];case 1:return c=f.apply(d,[m.sent()]),h=c.filter(function(g,v){return d5(v)}),p=c.filter(function(g,v){return!d5(v)}),[2,new _nt(Array(68).fill(0).map(function(g,v){return new In(h[v],p[v])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return s=a.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?s:s[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(Qoe),tse=function(t){$t(e,t);function e(n){return n===void 0&&(n=new Koe),t.call(this,"FaceLandmark68Net",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(ese);function Jnt(t){var e=[],n=qoe(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return _c(t,e),{params:r,paramMappings:e}}function Znt(t){var e=[],n=Ic(t),r=n.extractWeights,o=n.getRemainingWeights,s=Goe(r,e).extractDenseBlock3Params,i=s(3,32,"dense0",!0),a=s(32,64,"dense1"),u=s(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{dense0:i,dense1:a,dense2:u}}}var ert=function(t){$t(e,t);function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Je(function(){var o=n.toBatchTensor(112,!0),s=[122.782,117.001,104.298],i=ub(o,s).div(He(255)),a=UN(i,r.dense0,!0);return a=UN(a,r.dense1),a=UN(a,r.dense2),a=ib(a,[14,14],[2,2],"valid"),a})},e.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ro(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Jnt(n)},e.prototype.extractParams=function(n){return Znt(n)},e}(Ec),trt=function(t){$t(e,t);function e(n){return n===void 0&&(n=new ert),t.call(this,"FaceLandmark68TinyNet",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(ese);(function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(tse);function nrt(t,e){return Xt(hs(t,e.weights),e.biases)}function AL(t,e,n,r,o){o===void 0&&(o="same");var s=e.conv,i=s.filters,a=s.bias,u=ba(t,i,n,o);return u=Xt(u,a),u=nrt(u,e.scale),r?Ir(u):u}function rrt(t,e){return AL(t,e,[1,1],!0)}function nse(t,e){return AL(t,e,[1,1],!1)}function rse(t,e){return AL(t,e,[2,2],!0,"valid")}function ort(t,e){function n(a,u,l){var c=t(a),d=c.length/(u*l*l);if(gnt(d))throw new Error("depth has to be an integer: "+d+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return Je(function(){return qd(Hs(c,[u,d,l,l]),[2,3,1,0])})}function r(a,u,l,c){var d=n(a,u,l),f=Zr(t(u));return e.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:d,bias:f}}function o(a,u){var l=Zr(t(a)),c=Zr(t(a));return e.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function s(a,u,l,c){var d=r(a,u,l,c+"/conv"),f=o(u,c+"/scale");return{conv:d,scale:f}}function i(a,u,l,c,d){d===void 0&&(d=!1);var f=s((d?.5:1)*a,u,l,c+"/conv1"),h=s(a,u,l,c+"/conv2");return{conv1:f,conv2:h}}return{extractConvLayerParams:s,extractResidualLayerParams:i}}function srt(t){var e=Ic(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],s=ort(n,o),i=s.extractConvLayerParams,a=s.extractResidualLayerParams,u=i(4704,32,7,"conv32_down"),l=a(9216,32,3,"conv32_1"),c=a(9216,32,3,"conv32_2"),d=a(9216,32,3,"conv32_3"),f=a(36864,64,3,"conv64_down",!0),h=a(36864,64,3,"conv64_1"),p=a(36864,64,3,"conv64_2"),m=a(36864,64,3,"conv64_3"),g=a(147456,128,3,"conv128_down",!0),v=a(147456,128,3,"conv128_1"),y=a(147456,128,3,"conv128_2"),x=a(589824,256,3,"conv256_down",!0),b=a(589824,256,3,"conv256_1"),C=a(589824,256,3,"conv256_2"),S=a(589824,256,3,"conv256_down_out"),E=Je(function(){return qd(_d(n(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var I={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:d,conv64_down:f,conv64_1:h,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:v,conv128_2:y,conv256_down:x,conv256_1:b,conv256_2:C,conv256_down_out:S,fc:E};return{params:I,paramMappings:o}}function irt(t,e){var n=vf(t,e);function r(i){var a=n(i+"/scale/weights",1),u=n(i+"/scale/biases",1);return{weights:a,biases:u}}function o(i){var a=n(i+"/conv/filters",4),u=n(i+"/conv/bias",1),l=r(i);return{conv:{filters:a,bias:u},scale:l}}function s(i){return{conv1:o(i+"/conv1"),conv2:o(i+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:s}}function art(t){var e=[],n=irt(t,e),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,s=r("conv32_down"),i=o("conv32_1"),a=o("conv32_2"),u=o("conv32_3"),l=o("conv64_down"),c=o("conv64_1"),d=o("conv64_2"),f=o("conv64_3"),h=o("conv128_down"),p=o("conv128_1"),m=o("conv128_2"),g=o("conv256_down"),v=o("conv256_1"),y=o("conv256_2"),x=o("conv256_down_out"),b=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!mnt(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var C={conv32_down:s,conv32_1:i,conv32_2:a,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:d,conv64_3:f,conv128_down:h,conv128_1:p,conv128_2:m,conv256_down:g,conv256_1:v,conv256_2:y,conv256_down_out:x,fc:b};return _c(t,e),{params:C,paramMappings:e}}function gu(t,e){var n=rrt(t,e.conv1);return n=nse(n,e.conv2),n=Xt(n,t),n=Ir(n),n}function Pw(t,e){var n=rse(t,e.conv1);n=nse(n,e.conv2);var r=ib(t,2,2,"valid"),o=nr(r.shape),s=r.shape[3]!==n.shape[3],i=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(i){var a=Dy(n.shape);a[1]=1;var u=nr(a);n=yo([n,u],1);var l=Dy(n.shape);l[2]=1;var c=nr(l);n=yo([n,c],2)}return r=s?yo([r,o],3):r,n=Xt(r,n),n=Ir(n),n}var urt=function(t){$t(e,t);function e(){return t.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Je(function(){var o=n.toBatchTensor(150,!0).toFloat(),s=[122.782,117.001,104.298],i=ub(o,s).div(He(256)),a=rse(i,r.conv32_down);a=Eo(a,3,2,"valid"),a=gu(a,r.conv32_1),a=gu(a,r.conv32_2),a=gu(a,r.conv32_3),a=Pw(a,r.conv64_down),a=gu(a,r.conv64_1),a=gu(a,r.conv64_2),a=gu(a,r.conv64_3),a=Pw(a,r.conv128_down),a=gu(a,r.conv128_1),a=gu(a,r.conv128_2),a=Pw(a,r.conv256_down),a=gu(a,r.conv256_1),a=gu(a,r.conv256_2),a=Pw(a,r.conv256_down_out);var u=a.mean([1,2]),l=z_(u,r.fc);return l})},e.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ro(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.computeFaceDescriptor=function(n){return pt(this,void 0,void 0,function(){var r,o,s,i=this;return mt(this,function(a){switch(a.label){case 0:return[4,Ro(n)];case 1:return r=a.sent(),o=Je(function(){return xo(i.forwardInput(r))}),[4,Promise.all(o.map(function(u){return u.data()}))];case 2:return s=a.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?s:s[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(n){return art(n)},e.prototype.extractParams=function(n){return srt(n)},e}(Ec);function ose(t,e){var n={descriptor:e};return Object.assign({},t,n)}function sse(t,e){var n={age:e};return Object.assign({},t,n)}function ise(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var ase=function(){function t(e){var n=e===void 0?{}:e,r=n.minFaceSize,o=n.scaleFactor,s=n.maxNumScales,i=n.scoreThresholds,a=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=o||.709,this._maxNumScales=s||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=a,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function lrt(t,e){function n(u,l){var c=Hs(t(9*u),[3,3,u,1]),d=Zr(t(u)),f=Zr(t(u)),h=Zr(t(u)),p=Zr(t(u));return e.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:d,batch_norm_offset:f,batch_norm_mean:h,batch_norm_variance:p}}function r(u,l,c,d,f){var h=Hs(t(u*l*c*c),[c,c,u,l]),p=Zr(t(l));return e.push({paramPath:d+"/filters"},{paramPath:d+"/"+(f?"batch_norm_offset":"bias")}),{filters:h,bias:p}}function o(u,l,c,d){var f=r(u,l,c,d,!0),h=f.filters,p=f.bias;return{filters:h,batch_norm_offset:p}}function s(u,l,c){var d=n(u,c+"/depthwise_conv"),f=o(u,l,1,c+"/pointwise_conv");return{depthwise_conv:d,pointwise_conv:f}}function i(){var u=o(3,32,3,"mobilenetv1/conv_0"),l=s(32,64,"mobilenetv1/conv_1"),c=s(64,128,"mobilenetv1/conv_2"),d=s(128,128,"mobilenetv1/conv_3"),f=s(128,256,"mobilenetv1/conv_4"),h=s(256,256,"mobilenetv1/conv_5"),p=s(256,512,"mobilenetv1/conv_6"),m=s(512,512,"mobilenetv1/conv_7"),g=s(512,512,"mobilenetv1/conv_8"),v=s(512,512,"mobilenetv1/conv_9"),y=s(512,512,"mobilenetv1/conv_10"),x=s(512,512,"mobilenetv1/conv_11"),b=s(512,1024,"mobilenetv1/conv_12"),C=s(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:d,conv_4:f,conv_5:h,conv_6:p,conv_7:m,conv_8:g,conv_9:v,conv_10:y,conv_11:x,conv_12:b,conv_13:C}}function a(){var u=o(1024,256,1,"prediction_layer/conv_0"),l=o(256,512,3,"prediction_layer/conv_1"),c=o(512,128,1,"prediction_layer/conv_2"),d=o(128,256,3,"prediction_layer/conv_3"),f=o(256,128,1,"prediction_layer/conv_4"),h=o(128,256,3,"prediction_layer/conv_5"),p=o(256,64,1,"prediction_layer/conv_6"),m=o(64,128,3,"prediction_layer/conv_7"),g=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),v=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),y=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),x=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),b=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),C=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),S=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),I=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),T=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),N=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),O=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),$={box_encoding_predictor:g,class_predictor:v},A={box_encoding_predictor:y,class_predictor:x},P={box_encoding_predictor:b,class_predictor:C},L={box_encoding_predictor:S,class_predictor:E},W={box_encoding_predictor:I,class_predictor:T},z={box_encoding_predictor:N,class_predictor:O};return{conv_0:u,conv_1:l,conv_2:c,conv_3:d,conv_4:f,conv_5:h,conv_6:p,conv_7:m,box_predictor_0:$,box_predictor_1:A,box_predictor_2:P,box_predictor_3:L,box_predictor_4:W,box_predictor_5:z}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:a}}function crt(t){var e=[],n=Ic(t),r=n.extractWeights,o=n.getRemainingWeights,s=lrt(r,e),i=s.extractMobilenetV1Params,a=s.extractPredictionLayerParams,u=i(),l=a(),c=K3(r(5118*4),[1,5118,4]),d={extra_dim:c};if(e.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:d},paramMappings:e}}function drt(t,e){var n=vf(t,e);function r(l,c,d){var f=n(l+"/Conv2d_"+c+"_pointwise/weights",4,d+"/filters"),h=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,d+"/batch_norm_offset");return{filters:f,batch_norm_offset:h}}function o(l){var c="mobilenetv1/conv_"+l,d="MobilenetV1/Conv2d_"+l+"_depthwise",f=c+"/depthwise_conv",h=c+"/pointwise_conv",p=n(d+"/depthwise_weights",4,f+"/filters"),m=n(d+"/BatchNorm/gamma",1,f+"/batch_norm_scale"),g=n(d+"/BatchNorm/beta",1,f+"/batch_norm_offset"),v=n(d+"/BatchNorm/moving_mean",1,f+"/batch_norm_mean"),y=n(d+"/BatchNorm/moving_variance",1,f+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:v,batch_norm_variance:y},pointwise_conv:r("MobilenetV1",l,h)}}function s(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function i(l,c){var d=n(l+"/weights",4,c+"/filters"),f=n(l+"/biases",1,c+"/bias");return{filters:d,bias:f}}function a(l){var c=i("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),d=i("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:d}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:u}}function frt(t){var e=[],n=drt(t,e),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,s=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!G_(s))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+s);var i={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:s}};return _c(t,e),{params:i,paramMappings:e}}function xu(t,e,n){return Je(function(){var r=ba(t,e.filters,n,"same");return r=Xt(r,e.batch_norm_offset),iL(r,0,6)})}var hrt=.0010000000474974513;function prt(t,e,n){return Je(function(){var r=W_(t,e.filters,n,"same");return r=toe(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,hrt),iL(r,0,6)})}function mrt(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}function grt(t,e){return Je(function(){var n=null,r=xu(t,e.conv_0,[2,2]),o=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(o.forEach(function(s,i){var a=i+1,u=mrt(a);r=prt(r,s.depthwise_conv,u),r=xu(r,s.pointwise_conv,[1,1]),a===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function vrt(t,e,n,r,o){var s=t.shape[0],i=Math.min(n,s),a=e.map(function(c,d){return{score:c,boxIndex:d}}).filter(function(c){return c.score>o}).sort(function(c,d){return d.score-c.score}),u=function(c){return c<=r?1:0},l=[];return a.forEach(function(c){if(!(l.length>=i)){for(var d=c.score,f=l.length-1;f>=0;--f){var h=yrt(t,c.boxIndex,l[f]);if(h!==0&&(c.score*=u(h),c.score<=o))break}d===c.score&&l.push(c.boxIndex)}}),l}function yrt(t,e,n){var r=t.arraySync(),o=Math.min(r[e][0],r[e][2]),s=Math.min(r[e][1],r[e][3]),i=Math.max(r[e][0],r[e][2]),a=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),f=(i-o)*(a-s),h=(c-u)*(d-l);if(f<=0||h<=0)return 0;var p=Math.max(o,u),m=Math.max(s,l),g=Math.min(i,c),v=Math.min(a,d),y=Math.max(g-p,0)*Math.max(v-m,0);return y/(f+h-y)}function xrt(t){var e=xo(qd(t,[1,0])),n=[ko(e[2],e[0]),ko(e[3],e[1])],r=[Xt(e[0],La(n[0],He(2))),Xt(e[1],La(n[1],He(2)))];return{sizes:n,centers:r}}function brt(t,e){var n=xrt(t),r=n.sizes,o=n.centers,s=xo(qd(e,[1,0])),i=La(hs(dA(La(s[2],He(5))),r[0]),He(2)),a=Xt(hs(La(s[0],He(10)),r[0]),o[0]),u=La(hs(dA(La(s[3],He(5))),r[1]),He(2)),l=Xt(hs(La(s[1],He(10)),r[1]),o[1]);return qd(Ii([ko(a,i),ko(l,u),Xt(a,i),Xt(l,u)]),[1,0])}function wrt(t,e,n){return Je(function(){var r=t.shape[0],o=brt(Ua(km(n.extra_dim,[r,1,1]),[-1,4]),Ua(t,[-1,4]));o=Ua(o,[r,o.shape[0]/r,4]);var s=Qre(sl(e,[0,0,1],[-1,-1,-1])),i=sl(s,[0,0,0],[-1,-1,1]);i=Ua(i,[r,i.shape[1]]);var a=xo(o),u=xo(i);return{boxes:a,scores:u}})}function Np(t,e){return Je(function(){var n=t.shape[0],r=Ua(Qa(t,e.box_encoding_predictor),[n,-1,1,4]),o=Ua(Qa(t,e.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}})}function krt(t,e,n){return Je(function(){var r=xu(t,n.conv_0,[1,1]),o=xu(r,n.conv_1,[2,2]),s=xu(o,n.conv_2,[1,1]),i=xu(s,n.conv_3,[2,2]),a=xu(i,n.conv_4,[1,1]),u=xu(a,n.conv_5,[2,2]),l=xu(u,n.conv_6,[1,1]),c=xu(l,n.conv_7,[2,2]),d=Np(e,n.box_predictor_0),f=Np(t,n.box_predictor_1),h=Np(o,n.box_predictor_2),p=Np(i,n.box_predictor_3),m=Np(u,n.box_predictor_4),g=Np(c,n.box_predictor_5),v=yo([d.boxPredictionEncoding,f.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),y=yo([d.classPrediction,f.classPrediction,h.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:v,classPredictions:y}})}var $L=function(){function t(e){var n=e===void 0?{}:e,r=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),use=function(t){$t(e,t);function e(){return t.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Je(function(){var o=n.toBatchTensor(512,!1).toFloat(),s=ko(hs(o,He(.007843137718737125)),He(1)),i=grt(s,r.mobilenetv1),a=krt(i.out,i.conv11,r.prediction_layer),u=a.boxPredictions,l=a.classPredictions;return wrt(u,l,r.output_layer)})},e.prototype.forward=function(n){return pt(this,void 0,void 0,function(){var r;return mt(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Ro(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var o,s,i,a,u,l,c,d,f,h,p,m,g,v,y,x,b,C,S,E,I;return mt(this,function(T){switch(T.label){case 0:return o=new $L(r),s=o.maxResults,i=o.minConfidence,[4,Ro(n)];case 1:for(a=T.sent(),u=this.forwardInput(a),l=u.boxes,c=u.scores,d=l[0],f=c[0],h=1;h<l.length;h++)l[h].dispose(),c[h].dispose();return g=(m=Array).from,[4,f.data()];case 2:return p=g.apply(m,[T.sent()]),v=.5,y=vrt(d,p,s,v,i),x=a.getReshapedInputDimensions(0),b=a.inputSize,C=b/x.width,S=b/x.height,E=d.arraySync(),I=y.map(function(N){var O=[Math.max(0,E[N][0]),Math.min(1,E[N][2])].map(function(z){return z*S}),$=O[0],A=O[1],P=[Math.max(0,E[N][1]),Math.min(1,E[N][3])].map(function(z){return z*C}),L=P[0],W=P[1];return new pl(p[N],new CL(L,$,W-L,A-$),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),d.dispose(),f.dispose(),[2,I]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(n){return frt(n)},e.prototype.extractParams=function(n){return crt(n)},e}(Ec);(function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(use);var Crt=.4,Srt=[new In(.738768,.874946),new In(2.42204,2.65704),new In(4.30971,7.04493),new In(10.246,4.59428),new In(12.6868,11.8741)],Ert=[new In(1.603231,2.094468),new In(6.041143,7.080126),new In(2.882459,3.518061),new In(4.266906,5.178857),new In(9.041765,10.66308)],_rt=[117.001,114.697,97.404],Irt="tiny_yolov2_model",Trt="tiny_yolov2_separable_conv_model",Fw=function(t){return typeof t=="number"};function Nrt(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!Fw(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(e){return e||{}}).every(function(e){return Fw(e.x)&&Fw(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(Fw)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function ML(t){return Je(function(){var e=hs(t,He(.10000000149011612));return Xt(Ir(ko(t,e)),e)})}function Lc(t,e){return Je(function(){var n=sp(t,[[0,0],[1,1],[1,1],[0,0]]);return n=ba(n,e.conv.filters,[1,1],"valid"),n=ko(n,e.bn.sub),n=hs(n,e.bn.truediv),n=Xt(n,e.conv.bias),ML(n)})}function Bc(t,e){return Je(function(){var n=sp(t,[[0,0],[1,1],[1,1],[0,0]]);return n=cL(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),n=Xt(n,e.bias),ML(n)})}function Drt(t,e){var n=K_(t,e);function r(i,a){var u=Zr(t(i)),l=Zr(t(i));return e.push({paramPath:a+"/sub"},{paramPath:a+"/truediv"}),{sub:u,truediv:l}}function o(i,a,u){var l=n(i,a,3,u+"/conv"),c=r(a,u+"/bn");return{conv:l,bn:c}}var s=DL(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:s}}function Rrt(t,e,n,r){var o=Ic(t),s=o.extractWeights,i=o.getRemainingWeights,a=[],u=Drt(s,a),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,d=u.extractSeparableConvParams,f;if(e.withSeparableConvs){var h=r[0],p=r[1],m=r[2],g=r[3],v=r[4],y=r[5],x=r[6],b=r[7],C=r[8],S=e.isFirstLayerConv2d?l(h,p,3,"conv0"):d(h,p,"conv0"),E=d(p,m,"conv1"),I=d(m,g,"conv2"),T=d(g,v,"conv3"),N=d(v,y,"conv4"),O=d(y,x,"conv5"),$=b?d(x,b,"conv6"):void 0,A=C?d(b,C,"conv7"):void 0,P=l(C||b||x,5*n,1,"conv8");f={conv0:S,conv1:E,conv2:I,conv3:T,conv4:N,conv5:O,conv6:$,conv7:A,conv8:P}}else{var h=r[0],p=r[1],m=r[2],g=r[3],v=r[4],y=r[5],x=r[6],b=r[7],C=r[8],S=c(h,p,"conv0"),E=c(p,m,"conv1"),I=c(m,g,"conv2"),T=c(g,v,"conv3"),N=c(v,y,"conv4"),O=c(y,x,"conv5"),$=c(x,b,"conv6"),A=c(b,C,"conv7"),P=l(C,5*n,1,"conv8");f={conv0:S,conv1:E,conv2:I,conv3:T,conv4:N,conv5:O,conv6:$,conv7:A,conv8:P}}if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:f,paramMappings:a}}function Ort(t,e){var n=vf(t,e);function r(a){var u=n(a+"/sub",1),l=n(a+"/truediv",1);return{sub:u,truediv:l}}function o(a){var u=n(a+"/filters",4),l=n(a+"/bias",1);return{filters:u,bias:l}}function s(a){var u=o(a+"/conv"),l=r(a+"/bn");return{conv:u,bn:l}}var i=RL(n);return{extractConvParams:o,extractConvWithBatchNormParams:s,extractSeparableConvParams:i}}function Art(t,e){var n=[],r=Ort(t,n),o=r.extractConvParams,s=r.extractConvWithBatchNormParams,i=r.extractSeparableConvParams,a;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;a={conv0:e.isFirstLayerConv2d?o("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:u>7?i("conv6"):void 0,conv7:u>8?i("conv7"):void 0,conv8:o("conv8")}}else a={conv0:s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:s("conv6"),conv7:s("conv7"),conv8:o("conv8")};return _c(t,n),{params:a,paramMappings:n}}var x5;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(x5||(x5={}));var PL=function(){function t(e){var n=e===void 0?{}:e,r=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),lse=function(t){$t(e,t);function e(n){var r=t.call(this,"TinyYolov2")||this;return Nrt(n),r._config=n,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(n,r){var o=Lc(n,r.conv0);return o=Eo(o,[2,2],[2,2],"same"),o=Lc(o,r.conv1),o=Eo(o,[2,2],[2,2],"same"),o=Lc(o,r.conv2),o=Eo(o,[2,2],[2,2],"same"),o=Lc(o,r.conv3),o=Eo(o,[2,2],[2,2],"same"),o=Lc(o,r.conv4),o=Eo(o,[2,2],[2,2],"same"),o=Lc(o,r.conv5),o=Eo(o,[2,2],[1,1],"same"),o=Lc(o,r.conv6),o=Lc(o,r.conv7),Qa(o,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(n,r){var o=this.config.isFirstLayerConv2d?ML(Qa(n,r.conv0,"valid",!1)):Bc(n,r.conv0);return o=Eo(o,[2,2],[2,2],"same"),o=Bc(o,r.conv1),o=Eo(o,[2,2],[2,2],"same"),o=Bc(o,r.conv2),o=Eo(o,[2,2],[2,2],"same"),o=Bc(o,r.conv3),o=Eo(o,[2,2],[2,2],"same"),o=Bc(o,r.conv4),o=Eo(o,[2,2],[2,2],"same"),o=Bc(o,r.conv5),o=Eo(o,[2,2],[1,1],"same"),o=r.conv6?Bc(o,r.conv6):o,o=r.conv7?Bc(o,r.conv7):o,Qa(o,r.conv8,"valid",!1)},e.prototype.forwardInput=function(n,r){var o=this,s=this.params;if(!s)throw new Error("TinyYolov2 - load model before inference");return Je(function(){var i=n.toBatchTensor(r,!1).toFloat();return i=o.config.meanRgb?ub(i,o.config.meanRgb):i,i=i.div(He(256)),o.config.withSeparableConvs?o.runMobilenet(i,s):o.runTinyYolov2(i,s)})},e.prototype.forward=function(n,r){return pt(this,void 0,void 0,function(){var o;return mt(this,function(s){switch(s.label){case 0:return o=this.forwardInput,[4,Ro(n)];case 1:return[4,o.apply(this,[s.sent(),r])];case 2:return[2,s.sent()]}})})},e.prototype.detect=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var o,s,i,a,u,l,c,d,f,h,p,m,g,v,y=this;return mt(this,function(x){switch(x.label){case 0:return o=new PL(r),s=o.inputSize,i=o.scoreThreshold,[4,Ro(n)];case 1:return a=x.sent(),[4,this.forwardInput(a,s)];case 2:return u=x.sent(),l=Je(function(){return xo(u)[0].expandDims()}),c={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(l,a.getReshapedInputDimensions(0),i)];case 3:return d=x.sent(),u.dispose(),l.dispose(),f=d.map(function(b){return b.box}),h=d.map(function(b){return b.score}),p=d.map(function(b){return b.classScore}),m=d.map(function(b){return y.config.classes[b.label]}),g=z0(f.map(function(b){return b.rescale(s)}),h,this.config.iouThreshold,!0),v=g.map(function(b){return new Moe(h[b],p[b],m[b],f[b],c)}),[2,v]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(n){return Art(n,this.config)},e.prototype.extractParams=function(n){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,o=r?r.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return Rrt(n,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(n,r,o){return pt(this,void 0,void 0,function(){var s,i,a,u,l,c,d,f,h,p,m,g,v,y,x,b,C,S,E,I,T,N,O,$,A,P,L,W,z,F=this;return mt(this,function(B){switch(B.label){case 0:return s=r.width,i=r.height,a=Math.max(s,i),u=a/s,l=a/i,c=n.shape[1],d=this.config.anchors.length,f=Je(function(){var H=n.reshape([c,c,d,F.boxEncodingSize]),X=H.slice([0,0,0,0],[c,c,d,4]),te=H.slice([0,0,0,4],[c,c,d,1]),re=F.withClassScores?Cc(H.slice([0,0,0,5],[c,c,d,F.config.classes.length]),3):He(0);return[X,te,re]}),h=f[0],p=f[1],m=f[2],g=[],[4,p.array()];case 1:return v=B.sent(),[4,h.array()];case 2:y=B.sent(),x=0,B.label=3;case 3:if(!(x<c))return[3,12];b=0,B.label=4;case 4:if(!(b<c))return[3,11];C=0,B.label=5;case 5:return C<d?(S=zN(v[x][b][C][0]),!o||S>o?(E=(b+zN(y[x][b][C][0]))/c*u,I=(x+zN(y[x][b][C][1]))/c*l,T=Math.exp(y[x][b][C][2])*this.config.anchors[C].x/c*u,N=Math.exp(y[x][b][C][3])*this.config.anchors[C].y/c*l,O=E-T/2,$=I-N/2,A={row:x,col:b,anchor:C},this.withClassScores?[4,this.extractPredictedClass(m,A)]:[3,7]):[3,9]):[3,10];case 6:return z=B.sent(),[3,8];case 7:z={classScore:1,label:0},B.label=8;case 8:P=z,L=P.classScore,W=P.label,g.push(us({box:new Y_(O,$,O+T,$+N),score:S,classScore:S*L,label:W},A)),B.label=9;case 9:return C++,[3,5];case 10:return b++,[3,4];case 11:return x++,[3,3];case 12:return h.dispose(),p.dispose(),m.dispose(),[2,g]}})})},e.prototype.extractPredictedClass=function(n,r){return pt(this,void 0,void 0,function(){var o,s,i,a;return mt(this,function(u){switch(u.label){case 0:return o=r.row,s=r.col,i=r.anchor,[4,n.array()];case 1:return a=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return a[o][s][i][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(Ec),$rt=function(t){$t(e,t);function e(n){n===void 0&&(n=!0);var r=this,o=Object.assign({},{withSeparableConvs:n,iouThreshold:Crt,classes:["face"]},n?{anchors:Ert,meanRgb:_rt}:{anchors:Srt,withClassScores:!0});return r=t.call(this,o)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return pt(this,void 0,void 0,function(){var o;return mt(this,function(s){switch(s.label){case 0:return[4,this.detect(n,r)];case 1:return o=s.sent(),[2,o.map(function(i){return new pl(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?Trt:Irt},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(lse),Mrt=function(t){$t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return e}(PL),lb=function(){function t(){}return t.prototype.then=function(e){return pt(this,void 0,void 0,function(){var n;return mt(this,function(r){switch(r.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return pt(this,void 0,void 0,function(){return mt(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},t}();function X_(t,e,n,r,o){return o===void 0&&(o=function(s){var i=s.alignedRect;return i}),pt(this,void 0,void 0,function(){var s,i,a,u,l;return mt(this,function(c){switch(c.label){case 0:return s=t.map(function(d){return znt(d)?o(d):d.detection}),a=r,a?[3,5]:e instanceof Er?[4,TL(e,s)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,IL(e,s)];case 3:u=c.sent(),c.label=4;case 4:a=u,c.label=5;case 5:return i=a,[4,n(i)];case 6:return l=c.sent(),i.forEach(function(d){return d instanceof Er&&d.dispose()}),[2,l]}})})}function FL(t,e,n,r,o){return pt(this,void 0,void 0,function(){var s=this;return mt(this,function(i){return[2,X_([t],e,function(a){return pt(s,void 0,void 0,function(){return mt(this,function(u){return[2,n(a[0])]})})},r,o)]})})}function Prt(t){return Je(function(){return Ii(xo(t,3).reverse(),3)})}var Lw=2,j2=12;function Frt(t,e){var n=K_(t,e),r=NL(t,e);function o(l,c){var d=Zr(t(l));return e.push({paramPath:c}),d}function s(l,c,d){d===void 0&&(d=!1);var f=n(l[0],l[1],3,c+"/conv1"),h=o(l[1],c+"/prelu1_alpha"),p=n(l[1],l[2],3,c+"/conv2"),m=o(l[2],c+"/prelu2_alpha"),g=n(l[2],l[3],d?2:3,c+"/conv3"),v=o(l[3],c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:p,prelu2_alpha:m,conv3:g,prelu3_alpha:v}}function i(){var l=s([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),d=n(32,4,1,"pnet/conv4_2");return us(us({},l),{conv4_1:c,conv4_2:d})}function a(){var l=s([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),d=o(128,"rnet/prelu4_alpha"),f=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return us(us({},l),{fc1:c,prelu4_alpha:d,fc2_1:f,fc2_2:h})}function u(){var l=s([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),d=o(128,"onet/prelu4_alpha"),f=r(1152,256,"onet/fc1"),h=o(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),m=r(256,4,"onet/fc2_2"),g=r(256,10,"onet/fc2_3");return us(us({},l),{conv4:c,prelu4_alpha:d,fc1:f,prelu5_alpha:h,fc2_1:p,fc2_2:m,fc2_3:g})}return{extractPNetParams:i,extractRNetParams:a,extractONetParams:u}}function Lrt(t){var e=Ic(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],s=Frt(n,o),i=s.extractPNetParams,a=s.extractRNetParams,u=s.extractONetParams,l=i(),c=a(),d=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:d},paramMappings:o}}function Brt(t,e){var n=vf(t,e);function r(c){var d=n(c+"/weights",4,c+"/filters"),f=n(c+"/bias",1);return{filters:d,bias:f}}function o(c){var d=n(c+"/weights",2),f=n(c+"/bias",1);return{weights:d,bias:f}}function s(c){return n(c,1)}function i(c){var d=r(c+"/conv1"),f=s(c+"/prelu1_alpha"),h=r(c+"/conv2"),p=s(c+"/prelu2_alpha"),m=r(c+"/conv3"),g=s(c+"/prelu3_alpha");return{conv1:d,prelu1_alpha:f,conv2:h,prelu2_alpha:p,conv3:m,prelu3_alpha:g}}function a(){var c=i("pnet"),d=r("pnet/conv4_1"),f=r("pnet/conv4_2");return us(us({},c),{conv4_1:d,conv4_2:f})}function u(){var c=i("rnet"),d=o("rnet/fc1"),f=s("rnet/prelu4_alpha"),h=o("rnet/fc2_1"),p=o("rnet/fc2_2");return us(us({},c),{fc1:d,prelu4_alpha:f,fc2_1:h,fc2_2:p})}function l(){var c=i("onet"),d=r("onet/conv4"),f=s("onet/prelu4_alpha"),h=o("onet/fc1"),p=s("onet/prelu5_alpha"),m=o("onet/fc2_1"),g=o("onet/fc2_2"),v=o("onet/fc2_3");return us(us({},c),{conv4:d,prelu4_alpha:f,fc1:h,prelu5_alpha:p,fc2_1:m,fc2_2:g,fc2_3:v})}return{extractPNetParams:a,extractRNetParams:u,extractONetParams:l}}function jrt(t){var e=[],n=Brt(t,e),r=n.extractPNetParams,o=n.extractRNetParams,s=n.extractONetParams,i=r(),a=o(),u=s();return _c(t,e),{params:{pnet:i,rnet:a,onet:u},paramMappings:e}}function xA(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}function Wrt(t,e,n){for(var r=n[0],o=n[1],s=j2/t,i=[],a=Math.min(r,o)*s,u=0;a>=12;)i.push(s*Math.pow(e,u)),a=a*e,u+=1;return i}var LL=function(t){$t(e,t);function e(n,r,o,s){return t.call(this,{left:n,top:r,right:o,bottom:s},!0)||this}return e}(Kd);function cse(t){return Je(function(){return hs(ko(t,He(127.5)),He(.0078125))})}function Tm(t,e){return Je(function(){return Xt(Ir(t),hs(e,A2(Ir(A2(t)))))})}function BL(t,e,n){return n===void 0&&(n=!1),Je(function(){var r=Qa(t,e.conv1,"valid");return r=Tm(r,e.prelu1_alpha),r=Eo(r,n?[2,2]:[3,3],[2,2],"same"),r=Qa(r,e.conv2,"valid"),r=Tm(r,e.prelu2_alpha),r=n?r:Eo(r,[3,3],[2,2],"valid"),r=Qa(r,e.conv3,"valid"),r=Tm(r,e.prelu3_alpha),r})}function zrt(t,e){return Je(function(){var n=BL(t,e,!0),r=Qa(n,e.conv4_1,"valid"),o=Gi(U_(r,3),3),s=Cc(ko(r,o),3),i=Qa(n,e.conv4_2,"valid");return{prob:s,regions:i}})}function Urt(t,e){return Je(function(){var n=xA(e,t.shape.slice(1)),r=n.height,o=n.width,s=mL.resizeBilinear(t,[r,o]),i=cse(s);return qd(i,[0,2,1,3])})}function Vrt(t,e,n,r){for(var o=[],s=t.arraySync(),i=0;i<t.shape[0];i++)for(var a=0;a<t.shape[1];a++)s[i][a]>=r&&o.push(new In(a,i));var u=o.map(function(l){var c=new Y_(Math.round((l.y*Lw+1)/n),Math.round((l.x*Lw+1)/n),Math.round((l.y*Lw+j2)/n),Math.round((l.x*Lw+j2)/n)),d=s[l.y][l.x],f=e.arraySync(),h=new LL(f[l.y][l.x][0],f[l.y][l.x][1],f[l.y][l.x][2],f[l.y][l.x][3]);return{cell:c,score:d,region:h}});return u}function Hrt(t,e,n,r,o){o.stage1=[];var s=e.map(function(f){return Je(function(){var h={scale:f},p=Urt(t,f),m=Date.now(),g=zrt(p,r),v=g.prob,y=g.regions;h.pnet=Date.now()-m;var x=xo(xo(v,3)[1])[0],b=xo(y)[0];return{scoresTensor:x,regionsTensor:b,scale:f,statsForScale:h}})}),i=s.map(function(f){var h=f.scoresTensor,p=f.regionsTensor,m=f.scale,g=f.statsForScale,v=Vrt(h,p,m,n);if(h.dispose(),p.dispose(),!v.length)return o.stage1.push(g),[];var y=Date.now(),x=z0(v.map(function(b){return b.cell}),v.map(function(b){return b.score}),.5);return g.nms=Date.now()-y,g.numBoxes=x.length,o.stage1.push(g),x.map(function(b){return v[b]})}),a=i.reduce(function(f,h){return f.concat(h)},[]),u=[],l=[];if(a.length>0){var c=Date.now(),d=z0(a.map(function(f){return f.cell}),a.map(function(f){return f.score}),.7);o.stage1_nms=Date.now()-c,l=d.map(function(f){return a[f].score}),u=d.map(function(f){return a[f]}).map(function(f){var h=f.cell,p=f.region;return new Y_(h.left+p.left*h.width,h.top+p.top*h.height,h.right+p.right*h.width,h.bottom+p.bottom*h.height).toSquare().round()})}return{boxes:u,scores:l}}function dse(t,e,n){var r=n.width,o=n.height;return pt(this,void 0,void 0,function(){var s,i,a,u=this;return mt(this,function(l){switch(l.label){case 0:return s=Ph(t),[4,Promise.all(e.map(function(c){return pt(u,void 0,void 0,function(){var d,f,h,p,m,g,v,y;return mt(this,function(x){return d=c.padAtBorders(t.height,t.width),f=d.y,h=d.ey,p=d.x,m=d.ex,g=p-1,v=f-1,y=s.getImageData(g,v,m-g,h-v),[2,bs.isNodejs()?_L(y):createImageBitmap(y)]})})}))];case 1:return i=l.sent(),a=[],i.forEach(function(c){var d=q_({width:r,height:o}),f=Ph(d);f.drawImage(c,0,0,r,o);for(var h=f.getImageData(0,0,r,o).data,p=[],m=0;m<h.length;m+=4)p.push(h[m+2]),p.push(h[m+1]),p.push(h[m]);a.push(p)}),[2,a.map(function(c){var d=Je(function(){var f=qd(Hs(c,[1,r,o,3]),[0,2,1,3]).toFloat();return cse(f)});return d})]}})})}function Grt(t,e){return Je(function(){var n=BL(t,e),r=Ua(n,[n.shape[0],e.fc1.weights.shape[0]]),o=Mu(r,e.fc1),s=Tm(o,e.prelu4_alpha),i=Mu(s,e.fc2_1),a=Gi(U_(i,1),1),u=Cc(ko(i,a),1),l=Mu(s,e.fc2_2),c=xo(u,1)[1];return{scores:c,regions:l}})}function Yrt(t,e,n,r,o){return pt(this,void 0,void 0,function(){var s,i,a,u,l,c,d,f,h,p,m,g,v,y;return mt(this,function(x){switch(x.label){case 0:return s=Date.now(),[4,dse(t,e,{width:24,height:24})];case 1:return i=x.sent(),o.stage2_extractImagePatches=Date.now()-s,s=Date.now(),a=i.map(function(b){var C=Grt(b,r);return b.dispose(),C}),o.stage2_rnet=Date.now()-s,u=a.length>1?yo(a.map(function(b){return b.scores})):a[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[x.sent()]),u.dispose(),f=l.map(function(b,C){return{score:b,idx:C}}).filter(function(b){return b.score>n}).map(function(b){var C=b.idx;return C}),h=f.map(function(b){return e[b]}),p=f.map(function(b){return l[b]}),m=[],g=[],h.length>0&&(s=Date.now(),v=z0(h,p,.7),o.stage2_nms=Date.now()-s,y=v.map(function(b){var C=a[f[b]].regions.arraySync();return new LL(C[0][0],C[0][1],C[0][2],C[0][3])}),g=v.map(function(b){return p[b]}),m=v.map(function(b,C){return h[b].calibrate(y[C])})),a.forEach(function(b){b.regions.dispose(),b.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function qrt(t,e){return Je(function(){var n=BL(t,e);n=Eo(n,[2,2],[2,2],"same"),n=Qa(n,e.conv4,"valid"),n=Tm(n,e.prelu4_alpha);var r=Ua(n,[n.shape[0],e.fc1.weights.shape[0]]),o=Mu(r,e.fc1),s=Tm(o,e.prelu5_alpha),i=Mu(s,e.fc2_1),a=Gi(U_(i,1),1),u=Cc(ko(i,a),1),l=Mu(s,e.fc2_2),c=Mu(s,e.fc2_3),d=xo(u,1)[1];return{scores:d,regions:l,points:c}})}function Krt(t,e,n,r,o){return pt(this,void 0,void 0,function(){var s,i,a,u,l,c,d,f,h,p,m,g,v,y,x;return mt(this,function(b){switch(b.label){case 0:return s=Date.now(),[4,dse(t,e,{width:48,height:48})];case 1:return i=b.sent(),o.stage3_extractImagePatches=Date.now()-s,s=Date.now(),a=i.map(function(C){var S=qrt(C,r);return C.dispose(),S}),o.stage3_onet=Date.now()-s,u=a.length>1?yo(a.map(function(C){return C.scores})):a[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[b.sent()]),u.dispose(),f=l.map(function(C,S){return{score:C,idx:S}}).filter(function(C){return C.score>n}).map(function(C){var S=C.idx;return S}),h=f.map(function(C){var S=a[C].regions.arraySync();return new LL(S[0][0],S[0][1],S[0][2],S[0][3])}),p=f.map(function(C,S){return e[C].calibrate(h[S])}),m=f.map(function(C){return l[C]}),g=[],v=[],y=[],p.length>0&&(s=Date.now(),x=z0(p,m,.7,!1),o.stage3_nms=Date.now()-s,g=x.map(function(C){return p[C]}),v=x.map(function(C){return m[C]}),y=x.map(function(C,S){return Array(5).fill(0).map(function(E,I){var T=a[C].points.arraySync();return new In(T[0][I]*(g[S].width+1)+g[S].left,T[0][I+5]*(g[S].height+1)+g[S].top)})})),a.forEach(function(C){C.regions.dispose(),C.scores.dispose(),C.points.dispose()}),[2,{boxes:g,scores:v,points:y}]}})})}var Xrt=function(t){$t(e,t);function e(){return t.call(this,"Mtcnn")||this}return e.prototype.load=function(n){return pt(this,void 0,void 0,function(){return mt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,n)]})})},e.prototype.loadFromDisk=function(n){return pt(this,void 0,void 0,function(){return mt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,n)]})})},e.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var o,s,i,a,u,l,c,d,f,h,p,m,g,v,y,x,b,C,S,E,I;return mt(this,function(T){switch(T.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(s=n.canvases[0],!s)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},a=Date.now(),u=Je(function(){return Prt(Gi(wL.fromPixels(s)).toFloat())}),l=function(N){return u.dispose(),i.total=Date.now()-a,N},c=u.shape.slice(1),d=c[0],f=c[1],h=new ase(r),p=h.minFaceSize,m=h.scaleFactor,g=h.maxNumScales,v=h.scoreThresholds,y=h.scaleSteps,x=(y||Wrt(p,m,[d,f])).filter(function(N){var O=xA(N,[d,f]);return Math.min(O.width,O.height)>j2}).slice(0,g),i.scales=x,i.pyramid=x.map(function(N){return xA(N,[d,f])}),b=Date.now(),[4,Hrt(u,x,v[0],o.pnet,i)];case 1:return C=T.sent(),i.total_stage1=Date.now()-b,C.boxes.length?(i.stage2_numInputBoxes=C.boxes.length,b=Date.now(),[4,Yrt(s,C.boxes,v[1],o.rnet,i)]):[2,l({results:[],stats:i})];case 2:return S=T.sent(),i.total_stage2=Date.now()-b,S.boxes.length?(i.stage3_numInputBoxes=S.boxes.length,b=Date.now(),[4,Krt(s,S.boxes,v[2],o.onet,i)]):[2,l({results:[],stats:i})];case 3:return E=T.sent(),i.total_stage3=Date.now()-b,I=E.boxes.map(function(N,O){return OL(SL({},new pl(E.scores[O],new CL(N.left/f,N.top/d,N.width/f,N.height/d),{height:d,width:f})),new Ent(E.points[O].map(function($){return $.sub(new In(N.left,N.top)).div(new In(N.width,N.height))}),{width:N.width,height:N.height}))}),[2,l({results:I,stats:i})]}})})},e.prototype.forward=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var o;return mt(this,function(s){switch(s.label){case 0:return o=this.forwardInput,[4,Ro(n)];case 1:return[4,o.apply(this,[s.sent(),r])];case 2:return[2,s.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var o;return mt(this,function(s){switch(s.label){case 0:return o=this.forwardInput,[4,Ro(n)];case 1:return[2,o.apply(this,[s.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(n){return jrt(n)},e.prototype.extractParams=function(n){return Lrt(n)},e}(Ec),Qrt=.4,Jrt=[new In(1.603231,2.094468),new In(6.041143,7.080126),new In(2.882459,3.518061),new In(4.266906,5.178857),new In(9.041765,10.66308)],Zrt=[117.001,114.697,97.404],eot=function(t){$t(e,t);function e(){var n=this,r={withSeparableConvs:!0,iouThreshold:Qrt,classes:["face"],anchors:Jrt,meanRgb:Zrt,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,r)||this,n}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return pt(this,void 0,void 0,function(){var o;return mt(this,function(s){switch(s.label){case 0:return[4,this.detect(n,r)];case 1:return o=s.sent(),[2,o.map(function(i){return new pl(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(lse),ia={ssdMobilenetv1:new use,tinyFaceDetector:new eot,tinyYolov2:new $rt,mtcnn:new Xrt,faceLandmark68Net:new tse,faceLandmark68TinyNet:new trt,faceRecognitionNet:new urt,faceExpressionNet:new Wnt,ageGenderNet:new Qnt},fse=function(t){$t(e,t);function e(n,r,o){var s=t.call(this)||this;return s.parentTask=n,s.input=r,s.extractedFaces=o,s}return e}(lb),jL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,o=this;return mt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),[4,X_(n,this.input,function(i){return pt(o,void 0,void 0,function(){return mt(this,function(a){switch(a.label){case 0:return[4,Promise.all(i.map(function(u){return ia.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=s.sent(),[2,n.map(function(i,a){return Joe(i,r[a])})]}})})},e.prototype.withAgeAndGender=function(){return new VL(this,this.input)},e}(fse),WL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,FL(n,this.input,function(s){return ia.faceExpressionNet.predictExpressions(s)},this.extractedFaces)]:[2];case 2:return r=o.sent(),[2,Joe(n,r)]}})})},e.prototype.withAgeAndGender=function(){return new HL(this,this.input)},e}(fse),zL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new GL(this,this.input)},e.prototype.withFaceDescriptors=function(){return new qL(this,this.input)},e}(jL),UL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new YL(this,this.input)},e.prototype.withFaceDescriptor=function(){return new KL(this,this.input)},e}(WL),hse=function(t){$t(e,t);function e(n,r,o){var s=t.call(this)||this;return s.parentTask=n,s.input=r,s.extractedFaces=o,s}return e}(lb),VL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,o=this;return mt(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),[4,X_(n,this.input,function(i){return pt(o,void 0,void 0,function(){return mt(this,function(a){switch(a.label){case 0:return[4,Promise.all(i.map(function(u){return ia.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=s.sent(),[2,n.map(function(i,a){var u=r[a],l=u.age,c=u.gender,d=u.genderProbability;return sse(ise(i,c,d),l)})]}})})},e.prototype.withFaceExpressions=function(){return new jL(this,this.input)},e}(hse),HL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,o,s,i;return mt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,FL(n,this.input,function(u){return ia.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=a.sent(),o=r.age,s=r.gender,i=r.genderProbability,[2,sse(ise(n,s,i),o)]}})})},e.prototype.withFaceExpressions=function(){return new WL(this,this.input)},e}(hse),GL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new zL(this,this.input)},e.prototype.withFaceDescriptors=function(){return new qL(this,this.input)},e}(VL),YL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new UL(this,this.input)},e.prototype.withFaceDescriptor=function(){return new KL(this,this.input)},e}(HL),pse=function(t){$t(e,t);function e(n,r){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o}return e}(lb),qL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,X_(n,this.input,function(s){return Promise.all(s.map(function(i){return ia.faceRecognitionNet.computeFaceDescriptor(i)}))},null,function(s){return s.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=o.sent(),[2,r.map(function(s,i){return ose(n[i],s)})]}})})},e.prototype.withFaceExpressions=function(){return new zL(this,this.input)},e.prototype.withAgeAndGender=function(){return new GL(this,this.input)},e}(pse),KL=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,FL(n,this.input,function(s){return ia.faceRecognitionNet.computeFaceDescriptor(s)},null,function(s){return s.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=o.sent(),[2,ose(n,r)]}})})},e.prototype.withFaceExpressions=function(){return new UL(this,this.input)},e.prototype.withAgeAndGender=function(){return new YL(this,this.input)},e}(pse),mse=function(t){$t(e,t);function e(n,r,o){var s=t.call(this)||this;return s.parentTask=n,s.input=r,s.useTinyLandmarkNet=o,s}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?ia.faceLandmark68TinyNet:ia.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(lb),tot=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,o,s,i,a=this;return mt(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof Er?[4,TL(this.input,r)]:[3,3];case 2:return s=u.sent(),[3,5];case 3:return[4,IL(this.input,r)];case 4:s=u.sent(),u.label=5;case 5:return o=s,[4,Promise.all(o.map(function(l){return a.landmarkNet.detectLandmarks(l)}))];case 6:return i=u.sent(),o.forEach(function(l){return l instanceof Er&&l.dispose()}),[2,n.map(function(l,c){return OL(l,i[c])})]}})})},e.prototype.withFaceExpressions=function(){return new zL(this,this.input)},e.prototype.withAgeAndGender=function(){return new GL(this,this.input)},e.prototype.withFaceDescriptors=function(){return new qL(this,this.input)},e}(mse),not=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,o,s,i;return mt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?(r=n.detection,this.input instanceof Er?[4,TL(this.input,[r])]:[3,3]):[2];case 2:return s=a.sent(),[3,5];case 3:return[4,IL(this.input,[r])];case 4:s=a.sent(),a.label=5;case 5:return o=s,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return i=a.sent(),o.forEach(function(u){return u instanceof Er&&u.dispose()}),[2,OL(n,i)]}})})},e.prototype.withFaceExpressions=function(){return new UL(this,this.input)},e.prototype.withAgeAndGender=function(){return new YL(this,this.input)},e.prototype.withFaceDescriptor=function(){return new KL(this,this.input)},e}(mse),gse=function(t){$t(e,t);function e(n,r){r===void 0&&(r=new $L);var o=t.call(this)||this;return o.input=n,o.options=r,o}return e}(lb),rot=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r,o,s;return mt(this,function(i){switch(i.label){case 0:return n=this,r=n.input,o=n.options,o instanceof ase?[4,ia.mtcnn.forward(r,o)]:[3,2];case 1:return[2,i.sent().map(function(a){return a.detection})];case 2:if(s=o instanceof Mrt?function(a){return ia.tinyFaceDetector.locateFaces(a,o)}:o instanceof $L?function(a){return ia.ssdMobilenetv1.locateFaces(a,o)}:o instanceof PL?function(a){return ia.tinyYolov2.locateFaces(a,o)}:null,!s)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,s(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return pt(n,void 0,void 0,function(){var o;return mt(this,function(s){switch(s.label){case 0:return[4,this.run()];case 1:return o=s.sent(),[2,r(o.map(function(i){return SL({},i)}))]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new tot(this.runAndExtendWithFaceDetections(),this.input,n)},e.prototype.withFaceExpressions=function(){return new jL(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new VL(this.runAndExtendWithFaceDetections(),this.input)},e}(gse);(function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return pt(this,void 0,void 0,function(){var n,r;return mt(this,function(o){switch(o.label){case 0:return[4,new rot(this.input,this.options)];case 1:return n=o.sent(),r=n[0],n.forEach(function(s){s.score>r.score&&(r=s)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return pt(n,void 0,void 0,function(){var o;return mt(this,function(s){switch(s.label){case 0:return[4,this.run()];case 1:return o=s.sent(),[2,r(o?SL({},o):void 0)]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new not(this.runAndExtendWithFaceDetection(),this.input,n)},e.prototype.withFaceExpressions=function(){return new WL(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new HL(this.runAndExtendWithFaceDetection(),this.input)},e})(gse);function oot(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(o,s){return o-r[s]}).reduce(function(o,s){return o+Math.pow(s,2)},0))}(function(){function t(e,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,s=function(){return"person "+o++};this._labeledDescriptors=r.map(function(i){if(i instanceof $w)return i;if(i instanceof Float32Array)return new $w(s(),[i]);if(i.descriptor&&i.descriptor instanceof Float32Array)return new $w(s(),[i.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,n){return n.map(function(r){return oot(r,e)}).reduce(function(r,o){return r+o},0)/(n.length||1)},t.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(r){var o=r.descriptors,s=r.label;return new p5(s,n.computeMeanDistance(e,o))}).reduce(function(r,o){return r.distance<o.distance?r:o})},t.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new p5("unknown",n.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},t.fromJSON=function(e){var n=e.labeledDescriptors.map(function(r){return $w.fromJSON(r)});return new t(n,e.distanceThreshold)},t})();function sot(t){return ga({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"},child:[]}]})(t)}const iot=()=>{const[t,e]=D.useState(!1);D.useState(!1);const n=Ao(),r=xr(),[o,s]=D.useState({username:"",fullName:"",email:"",password:"",confirmPassword:"",address:"",phone:"",image:"",role_id:"",gender:""}),i=Tt(b=>b.USER.roles);console.log("role",i);const a=i==null?void 0:i.filter(b=>(b==null?void 0:b.title)!=="ADMIN");D.useEffect(()=>{n(V7e())},[]),D.useState(!1);const[u,l]=D.useState(!0),[c,d]=D.useState(!1),[f,h]=D.useState("");console.log("otp",f),D.useState("");const p=b=>{const{name:C,value:S,files:E}=b.target;console.log("form",o),s(C==="image"?{...o,image:[...o.image,...E]}:C==="role"?{...o,role_id:S}:{...o,[C]:S}),C==="confirmPassword"&&l(S===o.password)},m=async b=>{if(b.preventDefault(),b.currentTarget.checkValidity()===!1){e(!0);return}const S=new FormData;S.append("image",o==null?void 0:o.image),S.append("username",o==null?void 0:o.username),S.append("fullName",o==null?void 0:o.fullName),S.append("email",o==null?void 0:o.email),S.append("password",o==null?void 0:o.password),S.append("address",o==null?void 0:o.address),S.append("phone",o==null?void 0:o.phone),S.append("role_id",o==null?void 0:o.role_id),S.append("gender",o==null?void 0:o.gender),n(H7e(S)),r("/login")},{getRootProps:g,getInputProps:v}=ere({accept:"image/*",onDrop:b=>{b.length>0&&s({...o,image:b[0]})}}),y=()=>{d(!c)},x=b=>{s({...o,gender:b})};return console.log("test",o),w.jsx(w.Fragment,{children:w.jsxs(Fs,{className:"mt-5",children:[w.jsx(Vt,{className:"justify-content-center text-center",children:w.jsxs(rt,{xs:12,md:8,children:[w.jsx("h2",{children:"Register an account"}),w.jsxs("p",{children:["Do you already have an account ?"," ",w.jsx(Oa,{to:"/login",style:{textDecoration:"none",border:"1px solid #007BFF",borderRadius:"10px"},children:"Go to Login"})]})]})}),w.jsx(Vt,{className:"justify-content-md-center",children:w.jsx(rt,{xs:12,md:8,children:w.jsx("div",{className:"p-4 border rounded",children:w.jsxs(ve,{noValidate:!0,validated:t,onSubmit:m,children:[w.jsxs(ve.Group,{controlId:"username",children:[w.jsx(ve.Label,{children:"Username"}),w.jsx(ve.Control,{required:!0,type:"text",name:"username",value:o.username,onChange:p}),w.jsx(ve.Control.Feedback,{type:"invalid",children:"Please enter a username."})]}),w.jsxs(ve.Group,{controlId:"fullName",children:[w.jsx(ve.Label,{children:"FullName"}),w.jsx(ve.Control,{required:!0,type:"text",name:"fullName",value:o.fullName,onChange:p}),w.jsx(ve.Control.Feedback,{type:"invalid",children:"Please enter a fullName."})]}),w.jsxs(ve.Group,{controlId:"gender",children:[w.jsx(ve.Label,{children:"Gender"}),w.jsxs("div",{className:"gender-icons",children:[w.jsxs("div",{className:`gender-icon ${o.gender==="male"?"selected":""}`,onClick:()=>x("male"),children:[w.jsx(W0e,{}),w.jsx("span",{className:"gender-label",children:"Male"})]}),w.jsxs("div",{className:`gender-icon ${o.gender==="female"?"selected":""}`,onClick:()=>x("female"),children:[w.jsx(B0e,{}),w.jsx("span",{className:"gender-label",children:"Female"})]}),w.jsxs("div",{className:`gender-icon ${o.gender==="other"?"selected":""}`,onClick:()=>x("other"),children:[w.jsx(sot,{}),w.jsx("span",{className:"gender-label",children:"Other"})]})]})]}),w.jsxs(ve.Group,{controlId:"email",children:[w.jsx(ve.Label,{children:"Email"}),w.jsx(ve.Control,{required:!0,type:"email",name:"email",value:o.email,onChange:p,style:{marginRight:"10px"}}),w.jsx(ve.Control.Feedback,{type:"invalid",children:"Please enter a valid email."})]}),w.jsxs(Vt,{className:"align-items-center",children:[w.jsx(rt,{xs:10,children:w.jsxs(ve.Group,{controlId:"password",className:"mb-0",children:[w.jsx(ve.Label,{children:"Password"}),w.jsx(ve.Control,{required:!0,type:c?"text":"password",name:"password",value:o.password,onChange:p}),w.jsx(ve.Control.Feedback,{type:"invalid",children:"Please enter a password."})]})}),w.jsx(rt,{xs:2,style:{marginTop:"30px"},className:"d-flex justify-content-start",children:w.jsx(vt,{style:{borderRadius:"20px"},variant:"outline-secondary",className:"password-toggle-button",onClick:y,children:c?w.jsx(AKe,{}):w.jsx($Ke,{})})})]}),w.jsxs(ve.Group,{controlId:"confirmPassword",children:[w.jsx(ve.Label,{children:"Confirm Password"}),w.jsx(ve.Control,{required:!0,type:"password",name:"confirmPassword",value:o.confirmPassword,onChange:p,isInvalid:!u}),w.jsx(ve.Control.Feedback,{type:"invalid",children:"Passwords do not match."})]}),w.jsxs(ve.Group,{controlId:"role",children:[w.jsx(ve.Label,{children:"Role"}),w.jsxs(ve.Control,{as:"select",required:!0,name:"role",value:o==null?void 0:o.role_id,onChange:p,children:[w.jsx("option",{value:"",children:"Select Role"}),a.map(b=>w.jsx("option",{value:b._id,children:b.title},b.value))]})]}),w.jsxs(ve.Group,{controlId:"address",children:[w.jsx(ve.Label,{children:"Address"}),w.jsx(ve.Control,{required:!0,as:"textarea",rows:3,name:"address",value:o.address,onChange:p}),w.jsx(ve.Control.Feedback,{type:"invalid",children:"Please enter your address."})]}),w.jsxs(ve.Group,{controlId:"phone",children:[w.jsx(ve.Label,{children:"Phone"}),w.jsx(ve.Control,{required:!0,type:"tel",name:"phone",value:o.phone,onChange:p}),w.jsx(ve.Control.Feedback,{type:"invalid",children:"Please enter your phone number."})]}),w.jsxs(ve.Group,{controlId:"image",children:[w.jsx(ve.Label,{children:"Avatar"}),w.jsxs("div",{...g(),className:"dropzone",children:[w.jsx("input",{...v()}),w.jsxs("div",{className:"dropzone-content",children:[o.image&&w.jsx("div",{children:w.jsx("img",{src:URL.createObjectURL(o==null?void 0:o.image),alt:"Uploaded"})}),o.image===""&&w.jsxs(w.Fragment,{children:[w.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"}),w.jsxs(vt,{variant:"primary",className:"btn-upload",children:[" ","Upload Image"]})]})]})]})]}),w.jsx("div",{className:"text-center",children:w.jsxs(vt,{id:"signUpButton",variant:"primary",type:"submit",style:{marginTop:"20px",backgroundColor:"#007bff",color:"#fff",border:"none"},children:["Sign Up ",w.jsx(J1,{icon:Y7e})]})})]})})})})]})})};var aot=Object.defineProperty,W2=Object.getOwnPropertySymbols,vse=Object.prototype.hasOwnProperty,yse=Object.prototype.propertyIsEnumerable,b5=(t,e,n)=>e in t?aot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uot=(t,e)=>{for(var n in e||(e={}))vse.call(e,n)&&b5(t,n,e[n]);if(W2)for(var n of W2(e))yse.call(e,n)&&b5(t,n,e[n]);return t},lot=(t,e)=>{var n={};for(var r in t)vse.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&W2)for(var r of W2(t))e.indexOf(r)<0&&yse.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Fh;(t=>{const e=class{constructor(u,l,c,d){if(this.version=u,this.errorCorrectionLevel=l,this.modules=[],this.isFunction=[],u<e.MIN_VERSION||u>e.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let f=[];for(let p=0;p<this.size;p++)f.push(!1);for(let p=0;p<this.size;p++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(c);if(this.drawCodewords(h),d==-1){let p=1e9;for(let m=0;m<8;m++){this.applyMask(m),this.drawFormatBits(m);const g=this.getPenaltyScore();g<p&&(d=m,p=g),this.applyMask(m)}}s(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(u,l){const c=t.QrSegment.makeSegments(u);return e.encodeSegments(c,l)}static encodeBinary(u,l){const c=t.QrSegment.makeBytes(u);return e.encodeSegments([c],l)}static encodeSegments(u,l,c=1,d=40,f=-1,h=!0){if(!(e.MIN_VERSION<=c&&c<=d&&d<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let p,m;for(p=c;;p++){const x=e.getNumDataCodewords(p,l)*8,b=a.getTotalBits(u,p);if(b<=x){m=b;break}if(p>=d)throw new RangeError("Data too long")}for(const x of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])h&&m<=e.getNumDataCodewords(p,x)*8&&(l=x);let g=[];for(const x of u){r(x.mode.modeBits,4,g),r(x.numChars,x.mode.numCharCountBits(p),g);for(const b of x.getData())g.push(b)}s(g.length==m);const v=e.getNumDataCodewords(p,l)*8;s(g.length<=v),r(0,Math.min(4,v-g.length),g),r(0,(8-g.length%8)%8,g),s(g.length%8==0);for(let x=236;g.length<v;x^=253)r(x,8,g);let y=[];for(;y.length*8<g.length;)y.push(0);return g.forEach((x,b)=>y[b>>>3]|=x<<7-(b&7)),new e(p,l,y,f)}getModule(u,l){return 0<=u&&u<this.size&&0<=l&&l<this.size&&this.modules[l][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let c=0;c<this.size;c++)this.setFunctionModule(6,c,c%2==0),this.setFunctionModule(c,6,c%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),l=u.length;for(let c=0;c<l;c++)for(let d=0;d<l;d++)c==0&&d==0||c==0&&d==l-1||c==l-1&&d==0||this.drawAlignmentPattern(u[c],u[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const l=this.errorCorrectionLevel.formatBits<<3|u;let c=l;for(let f=0;f<10;f++)c=c<<1^(c>>>9)*1335;const d=(l<<10|c)^21522;s(d>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,o(d,f));this.setFunctionModule(8,7,o(d,6)),this.setFunctionModule(8,8,o(d,7)),this.setFunctionModule(7,8,o(d,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,o(d,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,o(d,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,o(d,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let c=0;c<12;c++)u=u<<1^(u>>>11)*7973;const l=this.version<<12|u;s(l>>>18==0);for(let c=0;c<18;c++){const d=o(l,c),f=this.size-11+c%3,h=Math.floor(c/3);this.setFunctionModule(f,h,d),this.setFunctionModule(h,f,d)}}drawFinderPattern(u,l){for(let c=-4;c<=4;c++)for(let d=-4;d<=4;d++){const f=Math.max(Math.abs(d),Math.abs(c)),h=u+d,p=l+c;0<=h&&h<this.size&&0<=p&&p<this.size&&this.setFunctionModule(h,p,f!=2&&f!=4)}}drawAlignmentPattern(u,l){for(let c=-2;c<=2;c++)for(let d=-2;d<=2;d++)this.setFunctionModule(u+d,l+c,Math.max(Math.abs(d),Math.abs(c))!=1)}setFunctionModule(u,l,c){this.modules[l][u]=c,this.isFunction[l][u]=!0}addEccAndInterleave(u){const l=this.version,c=this.errorCorrectionLevel;if(u.length!=e.getNumDataCodewords(l,c))throw new RangeError("Invalid argument");const d=e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l],f=e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l],h=Math.floor(e.getNumRawDataModules(l)/8),p=d-h%d,m=Math.floor(h/d);let g=[];const v=e.reedSolomonComputeDivisor(f);for(let x=0,b=0;x<d;x++){let C=u.slice(b,b+m-f+(x<p?0:1));b+=C.length;const S=e.reedSolomonComputeRemainder(C,v);x<p&&C.push(0),g.push(C.concat(S))}let y=[];for(let x=0;x<g[0].length;x++)g.forEach((b,C)=>{(x!=m-f||C>=p)&&y.push(b[x])});return s(y.length==h),y}drawCodewords(u){if(u.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let l=0;for(let c=this.size-1;c>=1;c-=2){c==6&&(c=5);for(let d=0;d<this.size;d++)for(let f=0;f<2;f++){const h=c-f,m=(c+1&2)==0?this.size-1-d:d;!this.isFunction[m][h]&&l<u.length*8&&(this.modules[m][h]=o(u[l>>>3],7-(l&7)),l++)}}s(l==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let l=0;l<this.size;l++)for(let c=0;c<this.size;c++){let d;switch(u){case 0:d=(c+l)%2==0;break;case 1:d=l%2==0;break;case 2:d=c%3==0;break;case 3:d=(c+l)%3==0;break;case 4:d=(Math.floor(c/3)+Math.floor(l/2))%2==0;break;case 5:d=c*l%2+c*l%3==0;break;case 6:d=(c*l%2+c*l%3)%2==0;break;case 7:d=((c+l)%2+c*l%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[l][c]&&d&&(this.modules[l][c]=!this.modules[l][c])}}getPenaltyScore(){let u=0;for(let f=0;f<this.size;f++){let h=!1,p=0,m=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[f][g]==h?(p++,p==5?u+=e.PENALTY_N1:p>5&&u++):(this.finderPenaltyAddHistory(p,m),h||(u+=this.finderPenaltyCountPatterns(m)*e.PENALTY_N3),h=this.modules[f][g],p=1);u+=this.finderPenaltyTerminateAndCount(h,p,m)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let h=!1,p=0,m=[0,0,0,0,0,0,0];for(let g=0;g<this.size;g++)this.modules[g][f]==h?(p++,p==5?u+=e.PENALTY_N1:p>5&&u++):(this.finderPenaltyAddHistory(p,m),h||(u+=this.finderPenaltyCountPatterns(m)*e.PENALTY_N3),h=this.modules[g][f],p=1);u+=this.finderPenaltyTerminateAndCount(h,p,m)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let h=0;h<this.size-1;h++){const p=this.modules[f][h];p==this.modules[f][h+1]&&p==this.modules[f+1][h]&&p==this.modules[f+1][h+1]&&(u+=e.PENALTY_N2)}let l=0;for(const f of this.modules)l=f.reduce((h,p)=>h+(p?1:0),l);const c=this.size*this.size,d=Math.ceil(Math.abs(l*20-c*10)/c)-1;return s(0<=d&&d<=9),u+=d*e.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,l=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let c=[6];for(let d=this.size-7;c.length<u;d-=l)c.splice(1,0,d);return c}}static getNumRawDataModules(u){if(u<e.MIN_VERSION||u>e.MAX_VERSION)throw new RangeError("Version number out of range");let l=(16*u+128)*u+64;if(u>=2){const c=Math.floor(u/7)+2;l-=(25*c-10)*c-55,u>=7&&(l-=36)}return s(208<=l&&l<=29648),l}static getNumDataCodewords(u,l){return Math.floor(e.getNumRawDataModules(u)/8)-e.ECC_CODEWORDS_PER_BLOCK[l.ordinal][u]*e.NUM_ERROR_CORRECTION_BLOCKS[l.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let l=[];for(let d=0;d<u-1;d++)l.push(0);l.push(1);let c=1;for(let d=0;d<u;d++){for(let f=0;f<l.length;f++)l[f]=e.reedSolomonMultiply(l[f],c),f+1<l.length&&(l[f]^=l[f+1]);c=e.reedSolomonMultiply(c,2)}return l}static reedSolomonComputeRemainder(u,l){let c=l.map(d=>0);for(const d of u){const f=d^c.shift();c.push(0),l.forEach((h,p)=>c[p]^=e.reedSolomonMultiply(h,f))}return c}static reedSolomonMultiply(u,l){if(u>>>8||l>>>8)throw new RangeError("Byte out of range");let c=0;for(let d=7;d>=0;d--)c=c<<1^(c>>>7)*285,c^=(l>>>d&1)*u;return s(c>>>8==0),c}finderPenaltyCountPatterns(u){const l=u[1];s(l<=this.size*3);const c=l>0&&u[2]==l&&u[3]==l*3&&u[4]==l&&u[5]==l;return(c&&u[0]>=l*4&&u[6]>=l?1:0)+(c&&u[6]>=l*4&&u[0]>=l?1:0)}finderPenaltyTerminateAndCount(u,l,c){return u&&(this.finderPenaltyAddHistory(l,c),l=0),l+=this.size,this.finderPenaltyAddHistory(l,c),this.finderPenaltyCountPatterns(c)}finderPenaltyAddHistory(u,l){l[0]==0&&(u+=this.size),l.pop(),l.unshift(u)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(u,l,c){if(l<0||l>31||u>>>l)throw new RangeError("Value out of range");for(let d=l-1;d>=0;d--)c.push(u>>>d&1)}function o(u,l){return(u>>>l&1)!=0}function s(u){if(!u)throw new Error("Assertion error")}const i=class{constructor(u,l,c){if(this.mode=u,this.numChars=l,this.bitData=c,l<0)throw new RangeError("Invalid argument");this.bitData=c.slice()}static makeBytes(u){let l=[];for(const c of u)r(c,8,l);return new i(i.Mode.BYTE,u.length,l)}static makeNumeric(u){if(!i.isNumeric(u))throw new RangeError("String contains non-numeric characters");let l=[];for(let c=0;c<u.length;){const d=Math.min(u.length-c,3);r(parseInt(u.substr(c,d),10),d*3+1,l),c+=d}return new i(i.Mode.NUMERIC,u.length,l)}static makeAlphanumeric(u){if(!i.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let l=[],c;for(c=0;c+2<=u.length;c+=2){let d=i.ALPHANUMERIC_CHARSET.indexOf(u.charAt(c))*45;d+=i.ALPHANUMERIC_CHARSET.indexOf(u.charAt(c+1)),r(d,11,l)}return c<u.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(u.charAt(c)),6,l),new i(i.Mode.ALPHANUMERIC,u.length,l)}static makeSegments(u){return u==""?[]:i.isNumeric(u)?[i.makeNumeric(u)]:i.isAlphanumeric(u)?[i.makeAlphanumeric(u)]:[i.makeBytes(i.toUtf8ByteArray(u))]}static makeEci(u){let l=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,l);else if(u<16384)r(2,2,l),r(u,14,l);else if(u<1e6)r(6,3,l),r(u,21,l);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,l)}static isNumeric(u){return i.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return i.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,l){let c=0;for(const d of u){const f=d.mode.numCharCountBits(l);if(d.numChars>=1<<f)return 1/0;c+=4+f+d.bitData.length}return c}static toUtf8ByteArray(u){u=encodeURI(u);let l=[];for(let c=0;c<u.length;c++)u.charAt(c)!="%"?l.push(u.charCodeAt(c)):(l.push(parseInt(u.substr(c+1,2),16)),c+=2);return l}};let a=i;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=a})(Fh||(Fh={}));(t=>{(e=>{const n=class{constructor(o,s){this.ordinal=o,this.formatBits=s}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Fh||(Fh={}));(t=>{(e=>{const n=class{constructor(o,s){this.modeBits=o,this.numBitsCharCount=s}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Fh||(Fh={}));var iy=Fh;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var cot={L:iy.QrCode.Ecc.LOW,M:iy.QrCode.Ecc.MEDIUM,Q:iy.QrCode.Ecc.QUARTILE,H:iy.QrCode.Ecc.HIGH},dot=128,fot="L",hot="#FFFFFF",pot="#000000",mot=!1,xse=4,got=.1;function vot(t,e=0){const n=[];return t.forEach(function(r,o){let s=null;r.forEach(function(i,a){if(!i&&s!==null){n.push(`M${s+e} ${o+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===r.length-1){if(!i)return;s===null?n.push(`M${a+e},${o+e} h1v1H${a+e}z`):n.push(`M${s+e},${o+e} h${a+1-s}v1H${s+e}z`);return}i&&s===null&&(s=a)})}),n.join("")}function yot(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((o,s)=>s<e.x||s>=e.x+e.w?o:!1))}function xot(t,e,n,r){if(r==null)return null;const o=n?xse:0,s=t.length+o*2,i=Math.floor(e*got),a=s/e,u=(r.width||i)*a,l=(r.height||i)*a,c=r.x==null?t.length/2-u/2:r.x*a,d=r.y==null?t.length/2-l/2:r.y*a;let f=null;if(r.excavate){let h=Math.floor(c),p=Math.floor(d),m=Math.ceil(u+c-h),g=Math.ceil(l+d-p);f={x:h,y:p,w:m,h:g}}return{x:c,y:d,h:l,w:u,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function bot(t){const e=t,{value:n,size:r=dot,level:o=fot,bgColor:s=hot,fgColor:i=pot,includeMargin:a=mot,imageSettings:u}=e,l=lot(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let c=iy.QrCode.encodeText(n,cot[o]).getModules();const d=a?xse:0,f=c.length+d*2,h=xot(c,r,a,u);let p=null;u!=null&&h!=null&&(h.excavation!=null&&(c=yot(c,h.excavation)),p=ee.createElement("image",{xlinkHref:u.src,height:h.h,width:h.w,x:h.x+d,y:h.y+d,preserveAspectRatio:"none"}));const m=vot(c,d);return ee.createElement("svg",uot({height:r,width:r,viewBox:`0 0 ${f} ${f}`},l),ee.createElement("path",{fill:s,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),ee.createElement("path",{fill:i,d:m,shapeRendering:"crispEdges"}),p)}function wot(){const t=xr(),e={customerName:"Nguyễn Văn A",description:"Thanh toán đơn hàng #1234",amount:"1,500,000 VND",transferContent:"Thanh toan don hang 1234"};return w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsx("div",{className:"body-container",children:w.jsx("div",{className:"container",style:{marginBottom:"20px"},children:w.jsx(Fs,{children:w.jsxs(Vt,{className:"justify-content-md-center",children:[w.jsx(rt,{xs:12,md:3,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Mã QR Thanh Toán"}),w.jsx("div",{className:"text-center",children:w.jsx(bot,{value:"https://me.momo.vn/MRIBTQtPfesBuWuEi7i5TE",size:200})})]})})}),w.jsx(rt,{xs:12,md:9,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Thông Tin Thanh Toán"}),w.jsxs(me.Text,{children:["Tên khách hàng: ",e.customerName]}),w.jsxs(me.Text,{children:["Miêu tả: ",e.description]}),w.jsxs(me.Text,{children:["Số tiền: ",e.amount]}),w.jsxs(me.Text,{children:["Nội dung chuyển khoản: ",e.transferContent]}),w.jsx(vt,{color:"primary",onClick:()=>t(-1),md:2,children:"Quay Lại"})]})})})]})})})}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}const bse=t=>{const e=xr(),{auctionData:n,showProp:r,handleClose:o}=t,s=async()=>{e(`/join-room-auction/${n.id}`)};return w.jsx(w.Fragment,{children:w.jsxs(Zt,{show:r,onHide:o,backdrop:"static",keyboard:!1,children:[w.jsx(Zt.Header,{closeButton:!0,children:w.jsxs(Zt.Title,{children:["Join Auction Room ",n.title," ",w.jsx("br",{})," with Produtc code"," ",n.productCode]})}),w.jsx(Zt.Body,{children:w.jsxs(ve,{children:[w.jsxs(ve.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[w.jsx(ve.Label,{children:"Email address"}),w.jsx(ve.Control,{type:"email",placeholder:"name@example.com",autoFocus:!0})]}),w.jsxs(ve.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[w.jsx(ve.Label,{children:"Pass to join Auction"}),w.jsx(ve.Control,{type:"password",autoFocus:!0})]})]})}),w.jsxs(Zt.Footer,{children:[w.jsx(vt,{variant:"secondary",onClick:o,children:"Close"}),w.jsx(vt,{variant:"primary",onClick:s,children:"Confirm"})]})]})})};bse.propTypes={auctionData:ye.shape({productCode:ye.string,title:ye.string,id:ye.number}).isRequired,showProp:ye.bool.isRequired,handleClose:ye.func.isRequired};function kot(){const[t,e]=D.useState(!1),[n,r]=D.useState({}),o=localStorage.getItem("ACCESS_TOKEN"),s=Tt(h=>h.AUCTION.auctioningCustomer),i=Tt(h=>h.AUCTION.auctions),a=Tt(h=>h.USER.currentUser);console.log("user",a),console.log("aucting",s),console.log("auctionHosting",i);const u=Ao();D.useEffect(()=>{u(one(o)),u(pf(o))},[]);const l=h=>{console.log("Delete item with id:",h.id),r(h),e(!0)},[c,d]=D.useState(""),f=h=>{d(h.target.value)};return w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsxs(Fs,{className:"my-4",children:[w.jsx("h1",{children:"Room Auction"}),w.jsx(Vt,{className:"mb-4",children:w.jsx(rt,{md:5,children:w.jsxs(bye,{children:[w.jsx(m7,{placeholder:"Nhập mã sản phẩm...","aria-label":"Nhập mã sản phẩm",value:c,onChange:f}),w.jsx(vt,{variant:"outline-secondary",children:"Tìm kiếm"})]})})}),w.jsx(Vt,{children:i==null?void 0:i.map(h=>{var p;return w.jsx(rt,{sm:12,md:4,className:"mb-4",children:w.jsxs(me,{children:[w.jsx(ps,{children:(p=h==null?void 0:h.image)==null?void 0:p.map((m,g)=>w.jsx(ps.Item,{children:w.jsx("img",{className:"d-block w-100",src:m,alt:`Slide ${g+1}`,style:{height:"200px",objectFit:"cover",width:"100%"}})},g))}),w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:h.title}),w.jsx(me.Text,{children:h.description}),w.jsxs(me.Text,{children:["Mã sản phẩm: ",h.productCode]}),w.jsxs(me.Text,{children:["Số người tham gia: ",h.currentParticipants]}),w.jsxs(me.Text,{children:["Thời gian: ",h.startTime," - ",h.endTime," (",h.duration,")"]}),w.jsx(vt,{variant:"primary",onClick:()=>l(h),children:"Tham gia"})]})]})},h.id)})})]})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})}),w.jsx(bse,{showProp:t,handleClose:()=>{e(!1)},auctionData:n})]})}var Cot={exports:{}};(function(t,e){(function(n,r){t.exports=r(D)})(typeof self<"u"?self:mi,n=>(()=>{var r={156:a=>{a.exports=n}},o={};function s(a){var u=o[a];if(u!==void 0)return u.exports;var l=o[a]={exports:{}};return r[a](l,l.exports,s),l.exports}s.d=(a,u)=>{for(var l in u)s.o(u,l)&&!s.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:u[l]})},s.o=(a,u)=>Object.prototype.hasOwnProperty.call(a,u),s.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var i={};return(()=>{s.r(i),s.d(i,{default:()=>g,useStopwatch:()=>p,useTime:()=>m,useTimer:()=>h});var a=s(156);class u{static expiryTimestamp(y){const x=new Date(y).getTime()>0;return x||console.warn("react-timer-hook: { useTimer } Invalid expiryTimestamp settings",y),x}static onExpire(y){const x=y&&typeof y=="function";return y&&!x&&console.warn("react-timer-hook: { useTimer } Invalid onExpire settings function",y),x}}class l{static getTimeFromSeconds(y){const x=Math.ceil(y),b=Math.floor(x/86400),C=Math.floor(x%86400/3600),S=Math.floor(x%3600/60);return{totalSeconds:x,seconds:Math.floor(x%60),minutes:S,hours:C,days:b}}static getSecondsFromExpiry(y,x){const b=y-new Date().getTime();if(b>0){const C=b/1e3;return x?Math.round(C):C}return 0}static getSecondsFromPrevTime(y,x){const b=new Date().getTime()-y;if(b>0){const C=b/1e3;return x?Math.round(C):C}return 0}static getSecondsFromTimeNow(){const y=new Date;return y.getTime()/1e3-60*y.getTimezoneOffset()}static getFormattedTimeFromSeconds(y,x){const{seconds:b,minutes:C,hours:S}=l.getTimeFromSeconds(y);let E="",I=S;return x==="12-hour"&&(E=S>=12?"pm":"am",I=S%12),{seconds:b,minutes:C,hours:I,ampm:E}}}function c(v,y){const x=(0,a.useRef)();(0,a.useEffect)(()=>{x.current=v}),(0,a.useEffect)(()=>{if(!y)return()=>{};const b=setInterval(()=>{x.current&&x.current()},y);return()=>clearInterval(b)},[y])}const d=1e3;function f(v){if(!u.expiryTimestamp(v))return null;const y=l.getSecondsFromExpiry(v),x=Math.floor(1e3*(y-Math.floor(y)));return x>0?x:d}function h(){let{expiryTimestamp:v,onExpire:y,autoStart:x=!0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[b,C]=(0,a.useState)(v),[S,E]=(0,a.useState)(l.getSecondsFromExpiry(b)),[I,T]=(0,a.useState)(x),[N,O]=(0,a.useState)(x),[$,A]=(0,a.useState)(f(b)),P=(0,a.useCallback)(()=>{u.onExpire(y)&&y(),T(!1),A(null)},[y]),L=(0,a.useCallback)(()=>{T(!1)},[]),W=(0,a.useCallback)(function(B){let H=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];A(f(B)),O(H),T(H),C(B),E(l.getSecondsFromExpiry(B))},[]),z=(0,a.useCallback)(()=>{const B=new Date;B.setMilliseconds(B.getMilliseconds()+1e3*S),W(B)},[S,W]),F=(0,a.useCallback)(()=>{N?(E(l.getSecondsFromExpiry(b)),T(!0)):z()},[b,N,z]);return c(()=>{$!==d&&A(d);const B=l.getSecondsFromExpiry(b);E(B),B<=0&&P()},I?$:null),{...l.getTimeFromSeconds(S),start:F,pause:L,resume:z,restart:W,isRunning:I}}function p(){let{autoStart:v,offsetTimestamp:y}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[x,b]=(0,a.useState)(l.getSecondsFromExpiry(y,!0)||0),[C,S]=(0,a.useState)(new Date),[E,I]=(0,a.useState)(x+l.getSecondsFromPrevTime(C||0,!0)),[T,N]=(0,a.useState)(v);c(()=>{I(x+l.getSecondsFromPrevTime(C,!0))},T?1e3:null);const O=(0,a.useCallback)(()=>{const P=new Date;S(P),N(!0),I(x+l.getSecondsFromPrevTime(P,!0))},[x]),$=(0,a.useCallback)(()=>{b(E),N(!1)},[E]),A=(0,a.useCallback)(function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];const W=l.getSecondsFromExpiry(P,!0)||0,z=new Date;S(z),b(W),N(L),I(W+l.getSecondsFromPrevTime(z,!0))},[]);return{...l.getTimeFromSeconds(E),start:O,pause:$,reset:A,isRunning:T}}function m(){let{format:v}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[y,x]=(0,a.useState)(l.getSecondsFromTimeNow());return c(()=>{x(l.getSecondsFromTimeNow())},1e3),{...l.getFormattedTimeFromSeconds(y,v)}}function g(v){if((0,a.useEffect)(()=>{console.warn("react-timer-hook: default export useTimer is deprecated, use named exports { useTimer, useStopwatch, useTime } instead")},[]),v.expiryTimestamp){const x=h(v);return{...x,startTimer:x.start,stopTimer:x.pause,resetTimer:()=>{}}}const y=p(v);return{...y,startTimer:y.start,stopTimer:y.pause,resetTimer:y.reset}}})(),i})())})(Cot);function wse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kse(t,e,n){return e&&w5(t.prototype,e),n&&w5(t,n),t}function Cse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bA(t,e)}function z2(t){return z2=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},z2(t)}function bA(t,e){return bA=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},bA(t,e)}function Sot(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Eot(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _ot(t,e){return e&&(typeof e=="object"||typeof e=="function")?e:Eot(t)}function Sse(t){var e=Sot();return function(){var r=z2(t),o;if(e){var s=z2(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return _ot(this,o)}}function Iot(t){return Tot(t)||Not(t)||Dot(t)||Rot()}function Tot(t){if(Array.isArray(t))return wA(t)}function Not(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Dot(t,e){if(t){if(typeof t=="string")return wA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wA(t,e)}}function wA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=String(t);if(e===0)return n;var r=n.match(/(.*?)([0-9]+)(.*)/),o=r?r[1]:"",s=r?r[3]:"",i=r?r[2]:n,a=i.length>=e?i:(Iot(Array(e)).map(function(){return"0"}).join("")+i).slice(e*-1);return"".concat(o).concat(a).concat(s)}var Ese={daysInHours:!1,zeroPadTime:2};function Oot(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.now,r=n===void 0?Date.now:n,o=e.precision,s=o===void 0?0:o,i=e.controlled,a=e.offsetTime,u=a===void 0?0:a,l=e.overtime,c;typeof t=="string"?c=new Date(t).getTime():t instanceof Date?c=t.getTime():c=t,i||(c+=u);var d=i?c:c-r(),f=Math.min(20,Math.max(0,s)),h=Math.round(parseFloat(((l?d:Math.max(0,d))/1e3).toFixed(f))*1e3),p=Math.abs(h)/1e3;return{total:h,days:Math.floor(p/(3600*24)),hours:Math.floor(p/3600%24),minutes:Math.floor(p/60%60),seconds:Math.floor(p%60),milliseconds:Number((p%1*1e3).toFixed()),completed:h<=0}}function Aot(t,e){var n=t.days,r=t.hours,o=t.minutes,s=t.seconds,i=Object.assign(Object.assign({},Ese),e),a=i.daysInHours,u=i.zeroPadTime,l=i.zeroPadDays,c=l===void 0?u:l,d=Math.min(2,u),f=a?jv(r+n*24,u):jv(r,d);return{days:a?"":jv(n,c),hours:f,minutes:jv(o,d),seconds:jv(s,d)}}var _se=function(t){Cse(n,t);var e=Sse(n);function n(){var r;return wse(this,n),r=e.apply(this,arguments),r.state={count:r.props.count||3},r.startCountdown=function(){r.interval=window.setInterval(function(){var o=r.state.count-1;o===0?(r.stopCountdown(),r.props.onComplete&&r.props.onComplete()):r.setState(function(s){return{count:s.count-1}})},1e3)},r.stopCountdown=function(){clearInterval(r.interval)},r.addTime=function(o){r.stopCountdown(),r.setState(function(s){return{count:s.count+o}},r.startCountdown)},r}return kse(n,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?D.cloneElement(this.props.children,{count:this.state.count}):null}}]),n}(D.Component);_se.propTypes={count:zn.number,children:zn.element,onComplete:zn.func};var Nd=function(t){Cse(n,t);var e=Sse(n);function n(r){var o;if(wse(this,n),o=e.call(this,r),o.mounted=!1,o.initialTimestamp=o.calcOffsetStartTimestamp(),o.offsetStartTimestamp=o.props.autoStart?0:o.initialTimestamp,o.offsetTime=0,o.legacyMode=!1,o.legacyCountdownRef=D.createRef(),o.tick=function(){var i=o.calcTimeDelta(),a=i.completed&&!o.props.overtime?void 0:o.props.onTick;o.setTimeDeltaState(i,void 0,a)},o.start=function(){if(!o.isStarted()){var i=o.offsetStartTimestamp;o.offsetStartTimestamp=0,o.offsetTime+=i?o.calcOffsetStartTimestamp()-i:0;var a=o.calcTimeDelta();o.setTimeDeltaState(a,"STARTED",o.props.onStart),!o.props.controlled&&(!a.completed||o.props.overtime)&&(o.clearTimer(),o.interval=window.setInterval(o.tick,o.props.intervalDelay))}},o.pause=function(){o.isPaused()||(o.clearTimer(),o.offsetStartTimestamp=o.calcOffsetStartTimestamp(),o.setTimeDeltaState(o.state.timeDelta,"PAUSED",o.props.onPause))},o.stop=function(){o.isStopped()||(o.clearTimer(),o.offsetStartTimestamp=o.calcOffsetStartTimestamp(),o.offsetTime=o.offsetStartTimestamp-o.initialTimestamp,o.setTimeDeltaState(o.calcTimeDelta(),"STOPPED",o.props.onStop))},o.isStarted=function(){return o.isStatus("STARTED")},o.isPaused=function(){return o.isStatus("PAUSED")},o.isStopped=function(){return o.isStatus("STOPPED")},o.isCompleted=function(){return o.isStatus("COMPLETED")},r.date){var s=o.calcTimeDelta();o.state={timeDelta:s,status:s.completed?"COMPLETED":"STOPPED"}}else o.legacyMode=!0;return o}return kse(n,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.onMount&&this.props.onMount(this.calcTimeDelta()),this.props.autoStart&&this.start())}},{key:"componentDidUpdate",value:function(o){this.legacyMode||this.props.date!==o.date&&(this.initialTimestamp=this.calcOffsetStartTimestamp(),this.offsetStartTimestamp=this.initialTimestamp,this.offsetTime=0,this.setTimeDeltaState(this.calcTimeDelta()))}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearTimer())}},{key:"calcTimeDelta",value:function(){var o=this.props,s=o.date,i=o.now,a=o.precision,u=o.controlled,l=o.overtime;return Oot(s,{now:i,precision:a,controlled:u,offsetTime:this.offsetTime,overtime:l})}},{key:"calcOffsetStartTimestamp",value:function(){return Date.now()}},{key:"addTime",value:function(o){this.legacyCountdownRef.current.addTime(o)}},{key:"clearTimer",value:function(){window.clearInterval(this.interval)}},{key:"isStatus",value:function(o){return this.state.status===o}},{key:"setTimeDeltaState",value:function(o,s,i){var a=this;if(this.mounted){var u=o.completed&&!this.state.timeDelta.completed,l=o.completed&&s==="STARTED";u&&!this.props.overtime&&this.clearTimer();var c=function(){i&&i(a.state.timeDelta),a.props.onComplete&&(u||l)&&a.props.onComplete(o,l)};return this.setState(function(d){var f=s||d.status;return o.completed&&!a.props.overtime?f="COMPLETED":!s&&f==="COMPLETED"&&(f="STOPPED"),{timeDelta:o,status:f}},c)}}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,stop:this.stop,isStarted:this.isStarted,isPaused:this.isPaused,isStopped:this.isStopped,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var o=this.props,s=o.daysInHours,i=o.zeroPadTime,a=o.zeroPadDays,u=this.state.timeDelta;return Object.assign(Object.assign({},u),{api:this.getApi(),props:this.props,formatted:Aot(u,{daysInHours:s,zeroPadTime:i,zeroPadDays:a})})}},{key:"render",value:function(){if(this.legacyMode){var o=this.props,s=o.count,i=o.children,a=o.onComplete;return D.createElement(_se,{ref:this.legacyCountdownRef,count:s,onComplete:a},i)}var u=this.props,l=u.className,c=u.overtime,d=u.children,f=u.renderer,h=this.getRenderProps();if(f)return f(h);if(d&&this.state.timeDelta.completed&&!c)return D.cloneElement(d,{countdown:h});var p=h.formatted,m=p.days,g=p.hours,v=p.minutes,y=p.seconds;return D.createElement("span",{className:l},h.total<0?"-":"",m,m?":":"",g,":",v,":",y)}}]),n}(D.Component);Nd.defaultProps=Object.assign(Object.assign({},Ese),{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0});Nd.propTypes={date:zn.oneOfType([zn.instanceOf(Date),zn.string,zn.number]),daysInHours:zn.bool,zeroPadTime:zn.number,zeroPadDays:zn.number,controlled:zn.bool,intervalDelay:zn.number,precision:zn.number,autoStart:zn.bool,overtime:zn.bool,className:zn.string,children:zn.element,renderer:zn.func,now:zn.func,onMount:zn.func,onStart:zn.func,onPause:zn.func,onStop:zn.func,onTick:zn.func,onComplete:zn.func};const Q_={addWallet(t,e){return Nn.post("/report_requests/",t,{headers:{Authorization:`Bearer ${e}`}})},getWallet(t,e){return Nn.get(`/wallets/getWalletByUserId/${t}`,{headers:{Authorization:`Bearer ${e}`}})},getWalletHistory(t,e){return Nn.get(`/wallets/wallet-history/${t}`,{headers:{Authorization:`Bearer ${e}`}})},postJoinRegisterAuction(t,e){return Nn.post("/wallets/registerJoinInAuction",t,{headers:{Authorization:`Bearer ${e}`}})}},Ise="WALLET_ID",Tse="WALLET_HISTORY_ID",$ot=t=>({type:Ise,payload:t}),Mot=t=>({type:Tse,payload:t});function J_(t,e){return n=>{Q_.getWallet(t,e).then(r=>{console.log("wallets",r),r.status===200||r.status===201?n($ot(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all products:",r)})}}function Nse(t,e){return n=>{Q_.getWalletHistory(t,e).then(r=>{console.log("wallets",r),r.status===200||r.status===201?n(Mot(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all products:",r)})}}function Pot(t,e){return async n=>{try{const r=await Q_.addWallet(t,e);(r.status===200||r.status===201)&&Rt.success("New Wallets has been added successfully ~"),n(J_(t==null?void 0:t.user_id,e))}catch(r){console.error("An error occurred whiles making the request:",r),Rt.error("An error occurred while making the request")}}}function Fot(t,e){return async n=>{try{const r=await Q_.postJoinRegisterAuction(t,e);(r.status===200||r.status===201)&&Rt.success("Bạn đã đăng ký thành công cho buổi đấu giá ~");let o={auctionId:t.auctionId};n(J_(t==null?void 0:t.user_id,e)),n(Nse(t==null?void 0:t.user_id,e)),n(lne(o,e))}catch(r){r.response&&r.response.status===400?(console.error("Failed to load resource: the server responded with a status of 400 (Bad Request)",r),Rt.error(r.response.data.error||r.response.data.message)):(console.error("An error occurred while making the request:",r.response.data.message),Rt.error("Lỗi: "+r.message))}}}function Lot(t){var $,A,P,L,W,z;const e=xr();D.useState(null),D.useState(!1);const[n,r]=D.useState(1),{id:o}=yx(),s=Ao(),[i,a]=D.useState(""),[u,l]=D.useState(!1),c=Tt(F=>F.AUCTION.auctions),d=Tt(F=>F.USER.currentUser);console.log("aucctionsss",c);const f=Tt(F=>F.MONEYCONFIG.configMoney);console.log("configMoney",f);const h=f==null?void 0:f.find(F=>F.type_config==="Join in auction"),p=Tt(F=>F.AUCTION.mostPrice);console.log("mostPriceDetail",p);const m=Tt(F=>F.AUCTION.allMemberJoinInAuction);console.log("allMemberJoinInAuction",m);const g=m==null?void 0:m.filter(F=>{var B,H;return((H=(B=F==null?void 0:F.member_id)==null?void 0:B.role_id)==null?void 0:H.title)!=="HOST"});console.log("number",g);const v=localStorage.getItem("ACCESS_TOKEN");D.useEffect(()=>{s(pf(v))},[o,s,v]),D.useEffect(()=>{let F={auctionId:o};s(R3(v)),s(c2(F,v)),s(lne(F,v))},[]),D.useEffect(()=>{const F=c.find(B=>B._id===o);a(F)},[c,o]),console.log("detailAuction",i);const y=new Date(i==null?void 0:i.regitration_end_time).getTime(),x=new Date().getTime(),b=y-x,S=new Date(i==null?void 0:i.end_time).getTime()-x,E=F=>{r(F)},I=F=>{if(!F)return"";const B=new Date(F);return Qm(B,"dd/MM/yyyy - HH:mm")},T=()=>{let F={userId:d==null?void 0:d._id,auctionId:o};l(!1),s(Fot(F,v))},N=F=>{d||Rt.error("Bạn cần đăng nhập để tham gia đấu giá"),l(!0)};function O(F){return F==null?void 0:F.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}return w.jsxs("div",{className:"app-container",style:{backgroundImage:"url(../../../public/assets/images/background/background5.jpg)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsxs("div",{style:{paddingTop:"32px",paddingBottom:"26px",borderBottom:"1px solid #E0E0E0",backgroundImage:"url('../../../public/assets/images/background/auction.png')",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"},children:[w.jsx("h2",{className:"current-page",children:"Danh sách sản phẩm đấu giá"}),w.jsxs("div",{className:"link-redirect",style:{marginTop:"20px"},children:[w.jsx(Oa,{className:"page-index",style:{color:"#787878",textDecoration:"none",cursor:"pointer"},to:"/",children:"Trang chủ"}),"/",w.jsx("span",{className:"page-des",style:{fontWeight:"bold",color:"#787878",marginLeft:"5px"},children:"Tài sản cuộc đấu giá"})]})]}),w.jsx("div",{className:"container",children:w.jsxs("div",{className:"row high-padding",children:[w.jsx("div",{className:"col-lg-5 col-md-4 sidebar-content",children:w.jsx("div",{className:"row high-padding",children:w.jsx("div",{className:"col-lg-12 col-md-12 sidebar-content",children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Ảnh Video Sản Phẩm"}),w.jsxs(ps,{children:[(A=($=i==null?void 0:i.product_id)==null?void 0:$.image)==null?void 0:A.map((F,B)=>w.jsx(ps.Item,{children:w.jsx("img",{className:"d-block w-100",src:F,alt:`Slide ${B+1}`,style:{objectFit:"cover",height:"400px",width:"100%"}})},B)),(L=(P=i==null?void 0:i.product_id)==null?void 0:P.video)==null?void 0:L.map((F,B)=>w.jsx(ps.Item,{children:w.jsxs("video",{controls:!0,style:{maxHeight:"400px",width:"100%",objectFit:"cover"},children:[w.jsx("source",{src:F,type:"video/mp4"}),"Your browser does not support the video tag."]})},`video-${B}`))]})]})})})})}),w.jsxs("div",{className:"col-lg-7 col-md-8",children:[w.jsx("p",{className:"para",children:"Thời gian đếm ngược đăng ký bắt đầu"}),w.jsx("div",{className:"timestamp-div",children:w.jsx("div",{className:"countdown-container",children:b>0?w.jsx("div",{className:"countdown-container",children:w.jsx(Nd,{date:Date.now()+b,renderer:({days:F,hours:B,minutes:H,seconds:X})=>w.jsxs("div",{children:[w.jsxs("span",{children:[F," days"]})," -"," ",w.jsxs("span",{children:[B," hours"]})," -"," ",w.jsxs("span",{children:[H," minutes"]})," -"," ",w.jsxs("span",{children:[X," seconds"]})]})})}):w.jsx("h5",{children:"0 days - 0 hours - 0 minutes - 0 seconds"})})}),w.jsxs("div",{className:"register-form",children:[w.jsxs("div",{className:"row",children:[w.jsx("div",{className:"col-6 left-infor-text",children:"Regitration_start_time"}),w.jsx("div",{className:"col-6 right-info-text",children:I(i==null?void 0:i.regitration_start_time)}),w.jsx("div",{className:"col-6 left-infor-text",children:"Regitration_end_time"}),w.jsx("div",{className:"col-6 right-info-text",children:I(i==null?void 0:i.regitration_end_time)}),w.jsx("div",{className:"col-6 left-infor-text",children:"Start_time"}),w.jsx("div",{className:"col-6 right-info-text",children:I(i==null?void 0:i.start_time)}),w.jsx("div",{className:"col-6 left-infor-text",children:"End_time"}),w.jsx("div",{className:"col-6 right-info-text",children:I(i==null?void 0:i.end_time)}),w.jsx("div",{className:"col-6 left-infor-text",children:"Price"}),w.jsx("div",{className:"col-6 right-info-text",children:O(i==null?void 0:i.starting_price)}),w.jsx("div",{className:"col-6 left-infor-text",children:"Price Step"}),w.jsx("div",{className:"col-6 right-info-text",children:O(i==null?void 0:i.price_step)}),S<=0?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"col-6 left-infor-text",children:"Winner "}),w.jsx("div",{className:"col-6 right-info-text",children:(W=p==null?void 0:p.customer_id)==null?void 0:W.slice(-4)}),w.jsx("div",{className:"col-6 left-infor-text",children:"Win Price"}),w.jsx("div",{className:"col-6 right-info-text",children:O(p==null?void 0:p.price)}),w.jsx("div",{className:"col-6 left-infor-text",children:"Number people register in room auction"}),w.jsx("div",{className:"col-6 right-info-text",children:g.length})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"col-6 left-infor-text",children:"Winner "}),w.jsxs("div",{className:"col-6 right-info-text",children:["Waiting ",I(i==null?void 0:i.end_time)]}),w.jsx("div",{className:"col-6 left-infor-text",children:"Win Price"}),w.jsxs("div",{className:"col-6 right-info-text",children:["Waiting ",I(i==null?void 0:i.end_time)]}),w.jsx("div",{className:"col-6 left-infor-text",children:"Number people register in room auction"}),w.jsx("div",{className:"col-6 right-info-text",children:g.length})]})]}),w.jsx("div",{style:{textAlign:"center",color:"#fff",backgroundColor:"#B41712",borderRadius:"15px",margin:"15px"},children:b>0?w.jsxs(w.Fragment,{children:[w.jsx(j0e,{}),w.jsx(vt,{style:{backgroundColor:"#B41712",border:"none"},onClick:N,children:"Đăng ký tham gia đấu giá"})]}):w.jsxs(w.Fragment,{children:[w.jsx(mq,{}),w.jsx("h5",{children:"Thời gian tham gia đấu giá đã hết"})]})})]})]})]})}),w.jsxs("div",{className:"row d-flex justify-content-center g-4",style:{marginTop:"20px"},children:[w.jsxs("div",{className:"col-lg-12 row ul",children:[w.jsx("div",{className:`col-lg-4 ${n===1?"active":""}`,onClick:()=>E(1),children:"Mô tả tài sản"}),w.jsx("div",{className:`col-lg-4 ${n===2?"active":""}`,onClick:()=>E(2),children:"Thông tin đấu giá"}),w.jsx("div",{className:`col-lg-4 ${n===3?"active":""}`,onClick:()=>E(3),children:"Tài sản liên quan"})]}),w.jsxs("div",{className:"col-lg-12 info-ap",children:[n===1?w.jsx(w.Fragment,{children:(z=i==null?void 0:i.product_id)==null?void 0:z.description}):w.jsx(w.Fragment,{}),n===2?w.jsx(w.Fragment,{children:i==null?void 0:i.auctionInfo}):w.jsx(w.Fragment,{}),n===3?w.jsx(w.Fragment,{children:"thông tin mô tả liên quan"}):w.jsx(w.Fragment,{})]})]}),w.jsxs("div",{className:"col-lg-12",style:{marginTop:"20px"},children:[w.jsx("h3",{style:{marginBottom:"25px",fontWeight:"800"},children:"Tài sản khác"}),w.jsx("div",{className:"row d-flex g-4"})]})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})}),w.jsxs(Zt,{show:u,onHide:()=>l(!1),children:[d&&w.jsx(Zt.Header,{closeButton:!0,children:w.jsx(Zt.Title,{children:"Xác nhận tham gia đấu giá"})}),w.jsx(Zt.Body,{children:w.jsx("p",{children:d?w.jsxs(w.Fragment,{children:["Bạn có muốn tham gia đấu giá với mức phí là"," ",O(h==null?void 0:h.money),"?"]}):w.jsxs("div",{children:[w.jsx(Zt.Body,{children:"Bạn cần đăng nhập để đấu giá"}),w.jsx(Zt.Footer,{children:w.jsx(vt,{variant:"primary",onClick:()=>e("/login"),children:"Go to Login"})})]})})}),d&&w.jsxs(Zt.Footer,{children:[w.jsx(vt,{variant:"secondary",onClick:()=>l(!1),children:"Hủy bỏ"}),w.jsx(vt,{variant:"primary",onClick:T,children:"Xác nhận"})]})]})]})}var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.noop=Bot;Fi.returnTrue=jot;Fi.charIsNumber=Wot;Fi.escapeRegExp=zot;Fi.fixLeadingZero=Uot;Fi.splitString=Vot;Fi.limitToScale=Dse;Fi.roundToPrecision=Hot;Fi.omit=Got;Fi.setCaretPosition=Yot;function Bot(){}function jot(){return!0}function Wot(t){return!!(t||"").match(/\d/)}function zot(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function Uot(t){if(!t)return t;var e=t[0]==="-";e&&(t=t.substring(1,t.length));var n=t.split("."),r=n[0].replace(/^0+/,"")||"0",o=n[1]||"";return(e?"-":"")+r+(o?"."+o:"")}function Vot(t,e){return[t.substring(0,e),t.substring(e)]}function Dse(t,e,n){for(var r="",o=n?"0":"",s=0;s<=e-1;s++)r+=t[s]||o;return r}function Hot(t,e,n){var r=t.split("."),o=parseFloat("0."+(r[1]||"0")).toFixed(e).split("."),s=r[0].split("").reverse().reduce(function(a,u,l){return a.length>l?(Number(a[0])+Number(u)).toString()+a.substring(1,a.length):u+a},o[0]),i=Dse(o[1]||"",(r[1]||"").length,n);return s+(i?"."+i:"")}function Got(t,e){var n={};return Object.keys(t).forEach(function(r){e[r]||(n[r]=t[r])}),n}function Yot(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var n=t.createTextRange();return n.move("character",e),n.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}Fi.thousandGroupSpacing={two:"2",twoScaled:"2s",three:"3",four:"4"};var qot=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kot=function(){function t(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Xot=zn,xn=Rse(Xot),Qot=D,Bw=Rse(Qot),fr=Fi;function Rse(t){return t&&t.__esModule?t:{default:t}}function Jot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zot(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function est(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ose={thousandSeparator:xn.default.oneOfType([xn.default.string,xn.default.oneOf([!0])]),thousandSpacing:xn.default.oneOf(["2","2s","3","4"]),decimalSeparator:xn.default.string,decimalScale:xn.default.number,fixedDecimalScale:xn.default.bool,displayType:xn.default.oneOf(["input","text"]),prefix:xn.default.string,suffix:xn.default.string,format:xn.default.oneOfType([xn.default.string,xn.default.func]),removeFormatting:xn.default.func,mask:xn.default.oneOfType([xn.default.string,xn.default.arrayOf(xn.default.string)]),value:xn.default.oneOfType([xn.default.number,xn.default.string]),isNumericString:xn.default.bool,customInput:xn.default.func,allowNegative:xn.default.bool,onValueChange:xn.default.func,onKeyDown:xn.default.func,onMouseUp:xn.default.func,onChange:xn.default.func,onFocus:xn.default.func,onBlur:xn.default.func,type:xn.default.oneOf(["text","tel"]),isAllowed:xn.default.func,renderText:xn.default.func},tst={displayType:"input",decimalSeparator:".",thousandSpacing:"3",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,isNumericString:!1,type:"text",onValueChange:fr.noop,onChange:fr.noop,onKeyDown:fr.noop,onMouseUp:fr.noop,onFocus:fr.noop,onBlur:fr.noop,isAllowed:fr.returnTrue},XL=function(t){est(e,t);function e(n){Jot(this,e);var r=Zot(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));r.validateProps();var o=r.formatValueProp();return r.state={value:o,numAsString:r.removeFormatting(o)},r.onChange=r.onChange.bind(r),r.onKeyDown=r.onKeyDown.bind(r),r.onMouseUp=r.onMouseUp.bind(r),r.onFocus=r.onFocus.bind(r),r.onBlur=r.onBlur.bind(r),r}return Kot(e,[{key:"componentDidUpdate",value:function(r){this.updateValueIfRequired(r)}},{key:"updateValueIfRequired",value:function(r){var o=this.props,s=this.state;if(r!==o){this.validateProps();var i=s.value,a=s.numAsString||"",u=o.value===void 0?this.formatNumString(a):this.formatValueProp();u!==i&&this.setState({value:u,numAsString:this.removeFormatting(u)})}}},{key:"getFloatString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=this.getSeparators(),s=o.decimalSeparator,i=this.getNumberRegex(!0),a=r[0]==="-";a&&(r=r.replace("-","")),r=(r.match(i)||[]).join("").replace(s,".");var u=r.indexOf(".");return u!==-1&&(r=r.substring(0,u)+"."+r.substring(u+1,r.length).replace(new RegExp((0,fr.escapeRegExp)(s),"g"),"")),a&&(r="-"+r),r}},{key:"getNumberRegex",value:function(r,o){var s=this.props,i=s.format,a=s.decimalScale,u=this.getSeparators(),l=u.decimalSeparator;return new RegExp("\\d"+(l&&a!==0&&!o&&!i?"|"+(0,fr.escapeRegExp)(l):""),r?"g":void 0)}},{key:"getSeparators",value:function(){var r=this.props,o=r.decimalSeparator,s=r.thousandSpacing,i=this.props.thousandSeparator;return i===!0&&(i=","),{decimalSeparator:o,thousandSeparator:i,thousandSpacing:s}}},{key:"getMaskAtIndex",value:function(r){var o=this.props.mask,s=o===void 0?" ":o;return typeof s=="string"?s:s[r]||" "}},{key:"validateProps",value:function(){var r=this.props.mask,o=this.getSeparators(),s=o.decimalSeparator,i=o.thousandSeparator;if(s===i)throw new Error(`
          Decimal separator can't be same as thousand separator.

          thousandSeparator: `+i+` (thousandSeparator = {true} is same as thousandSeparator = ",")
          decimalSeparator: `+s+` (default value for decimalSeparator is .)
       `);if(r){var a=r==="string"?r:r.toString();if(a.match(/\d/g))throw new Error(`
          Mask `+r+` should not contain numeric character;
        `)}}},{key:"splitDecimal",value:function(r){var o=this.props.allowNegative,s=r[0]==="-",i=s&&o;r=r.replace("-","");var a=r.split("."),u=a[0],l=a[1]||"";return{beforeDecimal:u,afterDecimal:l,hasNagation:s,addNegation:i}}},{key:"setPatchedCaretPosition",value:function(r,o,s){(0,fr.setCaretPosition)(r,o),setTimeout(function(){r.value===s&&(0,fr.setCaretPosition)(r,o)},0)}},{key:"correctCaretPosition",value:function(r,o,s){var i=this.props,a=i.prefix,u=i.suffix,l=i.format;if(!l){var c=r[0]==="-";return Math.min(Math.max(o,a.length+(c?1:0)),r.length-u.length)}if(typeof l=="function"||l[o]==="#"&&(0,fr.charIsNumber)(r[o])||l[o-1]==="#"&&(0,fr.charIsNumber)(r[o-1]))return o;var d=l.indexOf("#"),f=l.lastIndexOf("#");o=Math.min(Math.max(o,d),f+1);for(var h=l.substring(o,l.length).indexOf("#"),p=o,m=o+(h===-1?0:h);p>d&&(l[p]!=="#"||!(0,fr.charIsNumber)(r[p]));)p-=1;var g=!(0,fr.charIsNumber)(r[m])||s==="left"&&o!==d||o-p<m-o;return g?p+1:m}},{key:"getCaretPosition",value:function(r,o,s){var i=this.props.format,a=this.state.value,u=this.getNumberRegex(!0),l=(r.match(u)||[]).join(""),c=(o.match(u)||[]).join(""),d=void 0,f=void 0;for(d=0,f=0;f<s;f++){var h=r[f]||"",p=o[d]||"";if(!(!h.match(u)&&h!==p)&&!(h==="0"&&p.match(u)&&p!=="0"&&l.length!==c.length)){for(;h!==o[d]&&d<o.length;)d++;d++}}return typeof i=="string"&&!a&&(d=o.length),d=this.correctCaretPosition(o,d),d}},{key:"removePrefixAndSuffix",value:function(r){var o=this.props,s=o.format,i=o.prefix,a=o.suffix;if(!s&&r){var u=r[0]==="-";u&&(r=r.substring(1,r.length)),r=i&&r.indexOf(i)===0?r.substring(i.length,r.length):r;var l=r.lastIndexOf(a);r=a&&l!==-1&&l===r.length-a.length?r.substring(0,l):r,u&&(r="-"+r)}return r}},{key:"removePatternFormatting",value:function(r){for(var o=this.props.format,s=o.split("#").filter(function(f){return f!==""}),i=0,a="",u=0,l=s.length;u<=l;u++){var c=s[u]||"",d=u===l?r.length:r.indexOf(c,i);if(d===-1){a=r;break}else a+=r.substring(i,d),i=d+c.length}return(a.match(/\d/g)||[]).join("")}},{key:"removeFormatting",value:function(r){var o=this.props,s=o.format,i=o.removeFormatting;return r&&(s?typeof s=="string"?r=this.removePatternFormatting(r):typeof i=="function"?r=i(r):r=(r.match(/\d/g)||[]).join(""):(r=this.removePrefixAndSuffix(r),r=this.getFloatString(r)),r)}},{key:"formatWithPattern",value:function(r){for(var o=this.props.format,s=0,i=o.split(""),a=0,u=o.length;a<u;a++)o[a]==="#"&&(i[a]=r[s]||this.getMaskAtIndex(s),s+=1);return i.join("")}},{key:"formatThousand",value:function(r,o,s){var i=void 0;switch(s){case fr.thousandGroupSpacing.two:i=/(\d)(?=(\d{2})+(?!\d))/g;break;case fr.thousandGroupSpacing.twoScaled:i=/(\d)(?=(((\d{2})+)(\d{1})(?!\d)))/g;break;case fr.thousandGroupSpacing.four:i=/(\d)(?=(\d{4})+(?!\d))/g;break;default:i=/(\d)(?=(\d{3})+(?!\d))/g}return r.replace(i,"$1"+o)}},{key:"formatAsNumber",value:function(r){var o=this.props,s=o.decimalScale,i=o.fixedDecimalScale,a=o.prefix,u=o.suffix,l=this.getSeparators(),c=l.thousandSeparator,d=l.decimalSeparator,f=l.thousandSpacing,h=r.indexOf(".")!==-1||s&&i,p=this.splitDecimal(r),m=p.beforeDecimal,g=p.afterDecimal,v=p.addNegation;return s!==void 0&&(g=(0,fr.limitToScale)(g,s,i)),c&&(m=this.formatThousand(m,c,f)),a&&(m=a+m),u&&(g=g+u),v&&(m="-"+m),r=m+(h&&d||"")+g,r}},{key:"formatNumString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=this.props.format,s=r;return r===""?s="":r==="-"&&!o?(s="-",r=""):typeof o=="string"?s=this.formatWithPattern(s):typeof o=="function"?s=o(s):s=this.formatAsNumber(s),s}},{key:"formatValueProp",value:function(){var r=this.props,o=r.format,s=r.decimalScale,i=r.fixedDecimalScale,a=this.props,u=a.value,l=a.isNumericString;if(u===void 0)return"";typeof u=="number"&&(u=u.toString(),l=!0),l&&!o&&typeof s=="number"&&(u=(0,fr.roundToPrecision)(u,s,i));var c=l?this.formatNumString(u):this.formatInput(u);return c}},{key:"formatNegation",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=this.props.allowNegative,s=new RegExp("(-)"),i=new RegExp("(-)(.)*(-)"),a=s.test(r),u=i.test(r);return r=r.replace(/-/g,""),a&&!u&&o&&(r="-"+r),r}},{key:"formatInput",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=this.props.format;return o||(r=this.formatNegation(r)),r=this.removeFormatting(r),this.formatNumString(r)}},{key:"isCharacterAFormat",value:function(r,o){var s=this.props,i=s.format,a=s.prefix,u=s.suffix,l=s.decimalScale,c=s.fixedDecimalScale,d=this.getSeparators(),f=d.decimalSeparator;return!!(typeof i=="string"&&i[r]!=="#"||!i&&(r<a.length||r>=o.length-u.length||l&&c&&o[r]===f))}},{key:"checkIfFormatGotDeleted",value:function(r,o,s){for(var i=r;i<o;i++)if(this.isCharacterAFormat(i,s))return!0;return!1}},{key:"correctInputValue",value:function(r,o,s){var i=this.props.format,a=this.state.numAsString||"";if(s.length>=o.length||!s.length)return s;var u=r,l=(0,fr.splitString)(o,r),c=(0,fr.splitString)(s,r),d=l[1].lastIndexOf(c[1]),f=d!==-1?l[1].substring(0,d):"",h=u+f.length;if(this.checkIfFormatGotDeleted(u,h,o)&&(s=o),!i){var p=this.removeFormatting(s),m=this.splitDecimal(p),g=m.beforeDecimal,v=m.afterDecimal,y=m.addNegation;if(p.length<a.length&&g===""&&!parseFloat(v))return y?"-":""}return s}},{key:"onChange",value:function(r){r.persist();var o=r.target,s=o.value,i=this.state,a=this.props,u=a.isAllowed,l=i.value||"",c=Math.max(o.selectionStart,o.selectionEnd);s=this.correctInputValue(c,l,s);var d=this.formatInput(s)||"",f=this.removeFormatting(d),h={formattedValue:d,value:f,floatValue:parseFloat(f)};u(h)||(d=l),o.value=d;var p=this.getCaretPosition(s,d,c);this.setPatchedCaretPosition(o,p,d),d!==l?this.setState({value:d,numAsString:f},function(){a.onValueChange(h),a.onChange(r)}):a.onChange(r)}},{key:"onBlur",value:function(r){var o=this.props,s=this.state,i=o.format,a=o.onBlur,u=s.numAsString,l=s.value;if(!i){u=(0,fr.fixLeadingZero)(u);var c=this.formatNumString(u),d={formattedValue:c,value:u,floatValue:parseFloat(u)};if(c!==l){r.persist(),this.setState({value:c,numAsString:u},function(){o.onValueChange(d),a(r)});return}}a(r)}},{key:"onKeyDown",value:function(r){var o=r.target,s=r.key,i=o.selectionEnd,a=o.value,u=o.selectionStart,l=void 0,c=this.props,d=c.decimalScale,f=c.fixedDecimalScale,h=c.prefix,p=c.suffix,m=c.format,g=c.onKeyDown,v=d!==void 0&&f,y=this.getNumberRegex(!1,v),x=new RegExp("-"),b=typeof m=="string";if(s==="ArrowLeft"||s==="Backspace"?l=u-1:s==="ArrowRight"?l=u+1:s==="Delete"&&(l=u),l===void 0||u!==i){g(r);return}var C=l,S=b?m.indexOf("#"):h.length,E=b?m.lastIndexOf("#")+1:a.length-p.length;if(s==="ArrowLeft"||s==="ArrowRight"){var I=s==="ArrowLeft"?"left":"right";C=this.correctCaretPosition(a,l,I)}else if(s==="Delete"&&!y.test(a[l])&&!x.test(a[l]))for(;!y.test(a[C])&&C<E;)C++;else if(s==="Backspace"&&!y.test(a[l])&&!x.test(a[l])){for(;!y.test(a[C-1])&&C>S;)C--;C=this.correctCaretPosition(a,C,"left")}(C!==l||l<S||l>E)&&(r.preventDefault(),this.setPatchedCaretPosition(o,C,a)),r.isUnitTestRun&&this.setPatchedCaretPosition(o,C,a),this.props.onKeyDown(r)}},{key:"onMouseUp",value:function(r){var o=r.target,s=o.selectionStart,i=o.selectionEnd,a=o.value;if(s===i){var u=this.correctCaretPosition(a,s);u!==s&&this.setPatchedCaretPosition(o,u,a)}this.props.onMouseUp(r)}},{key:"onFocus",value:function(r){var o=this;r.persist(),setTimeout(function(){var s=r.target,i=s.selectionStart,a=s.value,u=o.correctCaretPosition(a,i);u!==i&&o.setPatchedCaretPosition(s,u,a),o.props.onFocus(r)})}},{key:"render",value:function(){var r=this.props,o=r.type,s=r.displayType,i=r.customInput,a=r.renderText,u=this.state.value,l=(0,fr.omit)(this.props,Ose),c=qot({},l,{type:o,value:u,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if(s==="text")return a?a(u)||null:Bw.default.createElement("span",l,u);if(i){var d=i;return Bw.default.createElement(d,c)}return Bw.default.createElement("input",c)}}]),e}(Bw.default.Component);XL.propTypes=Ose;XL.defaultProps=tst;var nst=XL;const U0=Xd(nst),il=Object.create(null);il.open="0";il.close="1";il.ping="2";il.pong="3";il.message="4";il.upgrade="5";il.noop="6";const Ck=Object.create(null);Object.keys(il).forEach(t=>{Ck[il[t]]=t});const kA={type:"error",data:"parser error"},Ase=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",$se=typeof ArrayBuffer=="function",Mse=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,QL=({type:t,data:e},n,r)=>Ase&&e instanceof Blob?n?r(e):k5(e,r):$se&&(e instanceof ArrayBuffer||Mse(e))?n?r(e):k5(new Blob([e]),r):r(il[t]+(e||"")),k5=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function C5(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let HN;function rst(t,e){if(Ase&&t.data instanceof Blob)return t.data.arrayBuffer().then(C5).then(e);if($se&&(t.data instanceof ArrayBuffer||Mse(t.data)))return e(C5(t.data));QL(t,!1,n=>{HN||(HN=new TextEncoder),e(HN.encode(n))})}const S5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ay=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<S5.length;t++)ay[S5.charCodeAt(t)]=t;const ost=t=>{let e=t.length*.75,n=t.length,r,o=0,s,i,a,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),c=new Uint8Array(l);for(r=0;r<n;r+=4)s=ay[t.charCodeAt(r)],i=ay[t.charCodeAt(r+1)],a=ay[t.charCodeAt(r+2)],u=ay[t.charCodeAt(r+3)],c[o++]=s<<2|i>>4,c[o++]=(i&15)<<4|a>>2,c[o++]=(a&3)<<6|u&63;return l},sst=typeof ArrayBuffer=="function",JL=(t,e)=>{if(typeof t!="string")return{type:"message",data:Pse(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:ist(t.substring(1),e)}:Ck[n]?t.length>1?{type:Ck[n],data:t.substring(1)}:{type:Ck[n]}:kA},ist=(t,e)=>{if(sst){const n=ost(t);return Pse(n,e)}else return{base64:!0,data:t}},Pse=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Fse="",ast=(t,e)=>{const n=t.length,r=new Array(n);let o=0;t.forEach((s,i)=>{QL(s,!1,a=>{r[i]=a,++o===n&&e(r.join(Fse))})})},ust=(t,e)=>{const n=t.split(Fse),r=[];for(let o=0;o<n.length;o++){const s=JL(n[o],e);if(r.push(s),s.type==="error")break}return r};function lst(){return new TransformStream({transform(t,e){rst(t,n=>{const r=n.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const s=new DataView(o.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{o=new Uint8Array(9);const s=new DataView(o.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(n)})}})}let GN;function jw(t){return t.reduce((e,n)=>e+n.length,0)}function Ww(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let o=0;o<e;o++)n[o]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function cst(t,e){GN||(GN=new TextDecoder);const n=[];let r=0,o=-1,s=!1;return new TransformStream({transform(i,a){for(n.push(i);;){if(r===0){if(jw(n)<1)break;const u=Ww(n,1);s=(u[0]&128)===128,o=u[0]&127,o<126?r=3:o===126?r=1:r=2}else if(r===1){if(jw(n)<2)break;const u=Ww(n,2);o=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(r===2){if(jw(n)<8)break;const u=Ww(n,8),l=new DataView(u.buffer,u.byteOffset,u.length),c=l.getUint32(0);if(c>Math.pow(2,21)-1){a.enqueue(kA);break}o=c*Math.pow(2,32)+l.getUint32(4),r=3}else{if(jw(n)<o)break;const u=Ww(n,o);a.enqueue(JL(s?u:GN.decode(u),e)),r=0}if(o===0||o>t){a.enqueue(kA);break}}}})}const Lse=4;function no(t){if(t)return dst(t)}function dst(t){for(var e in no.prototype)t[e]=no.prototype[e];return t}no.prototype.on=no.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};no.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};no.prototype.off=no.prototype.removeListener=no.prototype.removeAllListeners=no.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+t],this};no.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this};no.prototype.emitReserved=no.prototype.emit;no.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};no.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Yi=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Bse(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const fst=Yi.setTimeout,hst=Yi.clearTimeout;function Z_(t,e){e.useNativeTimers?(t.setTimeoutFn=fst.bind(Yi),t.clearTimeoutFn=hst.bind(Yi)):(t.setTimeoutFn=Yi.setTimeout.bind(Yi),t.clearTimeoutFn=Yi.clearTimeout.bind(Yi))}const pst=1.33;function mst(t){return typeof t=="string"?gst(t):Math.ceil((t.byteLength||t.size)*pst)}function gst(t){let e=0,n=0;for(let r=0,o=t.length;r<o;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function vst(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function yst(t){let e={},n=t.split("&");for(let r=0,o=n.length;r<o;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class xst extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class ZL extends no{constructor(e){super(),this.writable=!1,Z_(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new xst(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=JL(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=vst(e);return n.length?"?"+n:""}}const jse="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),CA=64,bst={};let E5=0,zw=0,_5;function I5(t){let e="";do e=jse[t%CA]+e,t=Math.floor(t/CA);while(t>0);return e}function Wse(){const t=I5(+new Date);return t!==_5?(E5=0,_5=t):t+"."+I5(E5++)}for(;zw<CA;zw++)bst[jse[zw]]=zw;let zse=!1;try{zse=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const wst=zse;function Use(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||wst))return new XMLHttpRequest}catch{}if(!e)try{return new Yi[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function kst(){}const Cst=function(){return new Use({xdomain:!1}).responseType!=null}();class Sst extends ZL{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let o=location.port;o||(o=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||o!==e.port}const n=e&&e.forceBase64;this.supportsBinary=Cst&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};ust(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ast(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Wse()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Qu(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(o,s)=>{this.onError("xhr post error",o,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Qu extends no{constructor(e,n){super(),Z_(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=Bse(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new Use(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.opts.extraHeaders[o])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this.opts.cookieJar)===null||o===void 0||o.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(o){this.setTimeoutFn(()=>{this.onError(o)},0);return}typeof document<"u"&&(this.index=Qu.requestsCount++,Qu.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=kst,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Qu.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Qu.requestsCount=0;Qu.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",T5);else if(typeof addEventListener=="function"){const t="onpagehide"in Yi?"pagehide":"unload";addEventListener(t,T5,!1)}}function T5(){for(let t in Qu.requests)Qu.requests.hasOwnProperty(t)&&Qu.requests[t].abort()}const e4=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Uw=Yi.WebSocket||Yi.MozWebSocket,N5=!0,Est="arraybuffer",D5=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class _st extends ZL{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=D5?{}:Bse(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=N5&&!D5?n?new Uw(e,n):new Uw(e):new Uw(e,n,r)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;QL(r,this.supportsBinary,s=>{const i={};try{N5&&this.ws.send(s)}catch{}o&&e4(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Wse()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!Uw}}class Ist extends ZL{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=cst(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),o=lst();o.readable.pipeTo(e.writable),this.writer=o.writable.getWriter();const s=()=>{r.read().then(({done:a,value:u})=>{a||(this.onPacket(u),s())}).catch(a=>{})};s();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this.writer.write(i).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;this.writer.write(r).then(()=>{o&&e4(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const Tst={websocket:_st,webtransport:Ist,polling:Sst},Nst=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Dst=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function SA(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let o=Nst.exec(t||""),s={},i=14;for(;i--;)s[Dst[i]]=o[i]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Rst(s,s.path),s.queryKey=Ost(s,s.query),s}function Rst(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Ost(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,o,s){o&&(n[o]=s)}),n}let Vse=class Bp extends no{constructor(e,n={}){super(),this.binaryType=Est,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=SA(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=SA(n.host).host),Z_(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=yst(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Lse,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new Tst[e](r)}open(){let e;if(this.opts.rememberUpgrade&&Bp.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;Bp.priorWebsocketSuccess=!1;const o=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Bp.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const i=d=>{const f=new Error("probe error: "+d);f.transport=n.name,s(),this.emitReserved("upgradeError",f)};function a(){i("transport closed")}function u(){i("socket closed")}function l(d){n&&d.name!==n.name&&s()}const c=()=>{n.removeListener("open",o),n.removeListener("error",i),n.removeListener("close",a),this.off("close",u),this.off("upgrading",l)};n.once("open",o),n.once("error",i),n.once("close",a),this.once("close",u),this.once("upgrading",l),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Bp.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const o=this.writeBuffer[r].data;if(o&&(n+=mst(o)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,o){if(typeof n=="function"&&(o=n,n=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){Bp.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const o=e.length;for(;r<o;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};Vse.protocol=Lse;function Ast(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=SA(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const $st=typeof ArrayBuffer=="function",Mst=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Hse=Object.prototype.toString,Pst=typeof Blob=="function"||typeof Blob<"u"&&Hse.call(Blob)==="[object BlobConstructor]",Fst=typeof File=="function"||typeof File<"u"&&Hse.call(File)==="[object FileConstructor]";function t4(t){return $st&&(t instanceof ArrayBuffer||Mst(t))||Pst&&t instanceof Blob||Fst&&t instanceof File}function Sk(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Sk(t[n]))return!0;return!1}if(t4(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Sk(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Sk(t[n]))return!0;return!1}function Lst(t){const e=[],n=t.data,r=t;return r.data=EA(n,e),r.attachments=e.length,{packet:r,buffers:e}}function EA(t,e){if(!t)return t;if(t4(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=EA(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=EA(t[r],e));return n}return t}function Bst(t,e){return t.data=_A(t.data,e),delete t.attachments,t}function _A(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=_A(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=_A(t[n],e));return t}const jst=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Wst=5;var un;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(un||(un={}));class zst{constructor(e){this.replacer=e}encode(e){return(e.type===un.EVENT||e.type===un.ACK)&&Sk(e)?this.encodeAsBinary({type:e.type===un.EVENT?un.BINARY_EVENT:un.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===un.BINARY_EVENT||e.type===un.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Lst(e),r=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(r),o}}function R5(t){return Object.prototype.toString.call(t)==="[object Object]"}class n4 extends no{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===un.BINARY_EVENT;r||n.type===un.BINARY_ACK?(n.type=r?un.EVENT:un.ACK,this.reconstructor=new Ust(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(t4(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(un[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===un.BINARY_EVENT||r.type===un.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const i=e.substring(s,n);if(i!=Number(i)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(i)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const o=e.charAt(n+1);if(o!==""&&Number(o)==o){const s=n+1;for(;++n;){const i=e.charAt(n);if(i==null||Number(i)!=i){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(n4.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case un.CONNECT:return R5(n);case un.DISCONNECT:return n===void 0;case un.CONNECT_ERROR:return typeof n=="string"||R5(n);case un.EVENT:case un.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&jst.indexOf(n[0])===-1);case un.ACK:case un.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ust{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Bst(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Vst=Object.freeze(Object.defineProperty({__proto__:null,Decoder:n4,Encoder:zst,get PacketType(){return un},protocol:Wst},Symbol.toStringTag,{value:"Module"}));function Da(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Hst=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Gse extends no{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Da(e,"open",this.onopen.bind(this)),Da(e,"packet",this.onpacket.bind(this)),Da(e,"error",this.onerror.bind(this)),Da(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(Hst.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:un.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const i=this.ids++,a=n.pop();this._registerAckCallback(i,a),r.id=i}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const o=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(o===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===e&&this.sendBuffer.splice(i,1);n.call(this,new Error("operation has timed out"))},o);this.acks[e]=(...i)=>{this.io.clearTimeoutFn(s),n.apply(this,[null,...i])}}emitWithAck(e,...n){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((o,s)=>{n.push((i,a)=>r?i?s(i):o(a):o(i)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...s)=>r!==this._queue[0]?void 0:(o!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:un.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case un.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case un.EVENT:case un.BINARY_EVENT:this.onevent(e);break;case un.ACK:case un.BINARY_ACK:this.onack(e);break;case un.DISCONNECT:this.ondisconnect();break;case un.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...o){r||(r=!0,n.packet({type:un.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:un.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function tv(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}tv.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};tv.prototype.reset=function(){this.attempts=0};tv.prototype.setMin=function(t){this.ms=t};tv.prototype.setMax=function(t){this.max=t};tv.prototype.setJitter=function(t){this.jitter=t};class IA extends no{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Z_(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new tv({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||Vst;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Vse(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const o=Da(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},i=Da(n,"error",s);if(this._timeout!==!1){const a=this._timeout,u=this.setTimeoutFn(()=>{o(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(o),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Da(e,"ping",this.onping.bind(this)),Da(e,"data",this.ondata.bind(this)),Da(e,"error",this.onerror.bind(this)),Da(e,"close",this.onclose.bind(this)),Da(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){e4(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Gse(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Wv={};function Kl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Ast(t,e.path||"/socket.io"),r=n.source,o=n.id,s=n.path,i=Wv[o]&&s in Wv[o].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||i;let u;return a?u=new IA(r,e):(Wv[o]||(Wv[o]=new IA(r,e)),u=Wv[o]),n.query&&!e.query&&(e.query=n.queryKey),u.socket(n.path,e)}Object.assign(Kl,{Manager:IA,Socket:Gse,io:Kl,connect:Kl});function Gst(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yst={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(mi,function(){var n;function r(){return n.apply(null,arguments)}function o(k){n=k}function s(k){return k instanceof Array||Object.prototype.toString.call(k)==="[object Array]"}function i(k){return k!=null&&Object.prototype.toString.call(k)==="[object Object]"}function a(k,_){return Object.prototype.hasOwnProperty.call(k,_)}function u(k){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(k).length===0;var _;for(_ in k)if(a(k,_))return!1;return!0}function l(k){return k===void 0}function c(k){return typeof k=="number"||Object.prototype.toString.call(k)==="[object Number]"}function d(k){return k instanceof Date||Object.prototype.toString.call(k)==="[object Date]"}function f(k,_){var R=[],M,j=k.length;for(M=0;M<j;++M)R.push(_(k[M],M));return R}function h(k,_){for(var R in _)a(_,R)&&(k[R]=_[R]);return a(_,"toString")&&(k.toString=_.toString),a(_,"valueOf")&&(k.valueOf=_.valueOf),k}function p(k,_,R,M){return oB(k,_,R,M,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(k){return k._pf==null&&(k._pf=m()),k._pf}var v;Array.prototype.some?v=Array.prototype.some:v=function(k){var _=Object(this),R=_.length>>>0,M;for(M=0;M<R;M++)if(M in _&&k.call(this,_[M],M,_))return!0;return!1};function y(k){var _=null,R=!1,M=k._d&&!isNaN(k._d.getTime());if(M&&(_=g(k),R=v.call(_.parsedDateParts,function(j){return j!=null}),M=_.overflow<0&&!_.empty&&!_.invalidEra&&!_.invalidMonth&&!_.invalidWeekday&&!_.weekdayMismatch&&!_.nullInput&&!_.invalidFormat&&!_.userInvalidated&&(!_.meridiem||_.meridiem&&R),k._strict&&(M=M&&_.charsLeftOver===0&&_.unusedTokens.length===0&&_.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(k))k._isValid=M;else return M;return k._isValid}function x(k){var _=p(NaN);return k!=null?h(g(_),k):g(_).userInvalidated=!0,_}var b=r.momentProperties=[],C=!1;function S(k,_){var R,M,j,J=b.length;if(l(_._isAMomentObject)||(k._isAMomentObject=_._isAMomentObject),l(_._i)||(k._i=_._i),l(_._f)||(k._f=_._f),l(_._l)||(k._l=_._l),l(_._strict)||(k._strict=_._strict),l(_._tzm)||(k._tzm=_._tzm),l(_._isUTC)||(k._isUTC=_._isUTC),l(_._offset)||(k._offset=_._offset),l(_._pf)||(k._pf=g(_)),l(_._locale)||(k._locale=_._locale),J>0)for(R=0;R<J;R++)M=b[R],j=_[M],l(j)||(k[M]=j);return k}function E(k){S(this,k),this._d=new Date(k._d!=null?k._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),C===!1&&(C=!0,r.updateOffset(this),C=!1)}function I(k){return k instanceof E||k!=null&&k._isAMomentObject!=null}function T(k){r.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+k)}function N(k,_){var R=!0;return h(function(){if(r.deprecationHandler!=null&&r.deprecationHandler(null,k),R){var M=[],j,J,be,Xe=arguments.length;for(J=0;J<Xe;J++){if(j="",typeof arguments[J]=="object"){j+=`
[`+J+"] ";for(be in arguments[0])a(arguments[0],be)&&(j+=be+": "+arguments[0][be]+", ");j=j.slice(0,-2)}else j=arguments[J];M.push(j)}T(k+`
Arguments: `+Array.prototype.slice.call(M).join("")+`
`+new Error().stack),R=!1}return _.apply(this,arguments)},_)}var O={};function $(k,_){r.deprecationHandler!=null&&r.deprecationHandler(k,_),O[k]||(T(_),O[k]=!0)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;function A(k){return typeof Function<"u"&&k instanceof Function||Object.prototype.toString.call(k)==="[object Function]"}function P(k){var _,R;for(R in k)a(k,R)&&(_=k[R],A(_)?this[R]=_:this["_"+R]=_);this._config=k,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function L(k,_){var R=h({},k),M;for(M in _)a(_,M)&&(i(k[M])&&i(_[M])?(R[M]={},h(R[M],k[M]),h(R[M],_[M])):_[M]!=null?R[M]=_[M]:delete R[M]);for(M in k)a(k,M)&&!a(_,M)&&i(k[M])&&(R[M]=h({},R[M]));return R}function W(k){k!=null&&this.set(k)}var z;Object.keys?z=Object.keys:z=function(k){var _,R=[];for(_ in k)a(k,_)&&R.push(_);return R};var F={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function B(k,_,R){var M=this._calendar[k]||this._calendar.sameElse;return A(M)?M.call(_,R):M}function H(k,_,R){var M=""+Math.abs(k),j=_-M.length,J=k>=0;return(J?R?"+":"":"-")+Math.pow(10,Math.max(0,j)).toString().substr(1)+M}var X=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,te=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,re={},ue={};function Q(k,_,R,M){var j=M;typeof M=="string"&&(j=function(){return this[M]()}),k&&(ue[k]=j),_&&(ue[_[0]]=function(){return H(j.apply(this,arguments),_[1],_[2])}),R&&(ue[R]=function(){return this.localeData().ordinal(j.apply(this,arguments),k)})}function ce(k){return k.match(/\[[\s\S]/)?k.replace(/^\[|\]$/g,""):k.replace(/\\/g,"")}function ke(k){var _=k.match(X),R,M;for(R=0,M=_.length;R<M;R++)ue[_[R]]?_[R]=ue[_[R]]:_[R]=ce(_[R]);return function(j){var J="",be;for(be=0;be<M;be++)J+=A(_[be])?_[be].call(j,k):_[be];return J}}function Ce(k,_){return k.isValid()?(_=_e(_,k.localeData()),re[_]=re[_]||ke(_),re[_](k)):k.localeData().invalidDate()}function _e(k,_){var R=5;function M(j){return _.longDateFormat(j)||j}for(te.lastIndex=0;R>=0&&te.test(k);)k=k.replace(te,M),te.lastIndex=0,R-=1;return k}var Le={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Ie(k){var _=this._longDateFormat[k],R=this._longDateFormat[k.toUpperCase()];return _||!R?_:(this._longDateFormat[k]=R.match(X).map(function(M){return M==="MMMM"||M==="MM"||M==="DD"||M==="dddd"?M.slice(1):M}).join(""),this._longDateFormat[k])}var Pe="Invalid date";function Ue(){return this._invalidDate}var lt="%d",Me=/\d{1,2}/;function Ke(k){return this._ordinal.replace("%d",k)}var xt={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function _t(k,_,R,M){var j=this._relativeTime[R];return A(j)?j(k,_,R,M):j.replace(/%d/i,k)}function tn(k,_){var R=this._relativeTime[k>0?"future":"past"];return A(R)?R(_):R.replace(/%s/i,_)}var Ot={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function jt(k){return typeof k=="string"?Ot[k]||Ot[k.toLowerCase()]:void 0}function sn(k){var _={},R,M;for(M in k)a(k,M)&&(R=jt(M),R&&(_[R]=k[M]));return _}var An={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Ne(k){var _=[],R;for(R in k)a(k,R)&&_.push({unit:R,priority:An[R]});return _.sort(function(M,j){return M.priority-j.priority}),_}var ze=/\d/,Be=/\d\d/,It=/\d{3}/,At=/\d{4}/,wr=/[+-]?\d{6}/,Wt=/\d\d?/,ks=/\d\d\d\d?/,wt=/\d\d\d\d\d\d?/,Mt=/\d{1,3}/,cr=/\d{1,4}/,Xr=/[+-]?\d{1,6}/,Bi=/\d+/,Dc=/[+-]?\d+/,iv=/Z|[+-]\d\d:?\d\d/gi,cp=/Z|[+-]\d\d(?::?\d\d)?/gi,Iae=/[+-]?\d+(\.\d{1,3})?/,av=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,dp=/^[1-9]\d?/,xI=/^([1-9]\d|\d)/,vb;vb={};function Ze(k,_,R){vb[k]=A(_)?_:function(M,j){return M&&R?R:_}}function Tae(k,_){return a(vb,k)?vb[k](_._strict,_._locale):new RegExp(Nae(k))}function Nae(k){return vl(k.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(_,R,M,j,J){return R||M||j||J}))}function vl(k){return k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ji(k){return k<0?Math.ceil(k)||0:Math.floor(k)}function nn(k){var _=+k,R=0;return _!==0&&isFinite(_)&&(R=ji(_)),R}var bI={};function Bn(k,_){var R,M=_,j;for(typeof k=="string"&&(k=[k]),c(_)&&(M=function(J,be){be[_]=nn(J)}),j=k.length,R=0;R<j;R++)bI[k[R]]=M}function uv(k,_){Bn(k,function(R,M,j,J){j._w=j._w||{},_(R,j._w,j,J)})}function Dae(k,_,R){_!=null&&a(bI,k)&&bI[k](_,R._a,R,k)}function yb(k){return k%4===0&&k%100!==0||k%400===0}var Zo=0,yl=1,fu=2,uo=3,Ca=4,xl=5,yf=6,Rae=7,Oae=8;Q("Y",0,0,function(){var k=this.year();return k<=9999?H(k,4):"+"+k}),Q(0,["YY",2],0,function(){return this.year()%100}),Q(0,["YYYY",4],0,"year"),Q(0,["YYYYY",5],0,"year"),Q(0,["YYYYYY",6,!0],0,"year"),Ze("Y",Dc),Ze("YY",Wt,Be),Ze("YYYY",cr,At),Ze("YYYYY",Xr,wr),Ze("YYYYYY",Xr,wr),Bn(["YYYYY","YYYYYY"],Zo),Bn("YYYY",function(k,_){_[Zo]=k.length===2?r.parseTwoDigitYear(k):nn(k)}),Bn("YY",function(k,_){_[Zo]=r.parseTwoDigitYear(k)}),Bn("Y",function(k,_){_[Zo]=parseInt(k,10)});function lv(k){return yb(k)?366:365}r.parseTwoDigitYear=function(k){return nn(k)+(nn(k)>68?1900:2e3)};var z4=fp("FullYear",!0);function Aae(){return yb(this.year())}function fp(k,_){return function(R){return R!=null?(U4(this,k,R),r.updateOffset(this,_),this):cv(this,k)}}function cv(k,_){if(!k.isValid())return NaN;var R=k._d,M=k._isUTC;switch(_){case"Milliseconds":return M?R.getUTCMilliseconds():R.getMilliseconds();case"Seconds":return M?R.getUTCSeconds():R.getSeconds();case"Minutes":return M?R.getUTCMinutes():R.getMinutes();case"Hours":return M?R.getUTCHours():R.getHours();case"Date":return M?R.getUTCDate():R.getDate();case"Day":return M?R.getUTCDay():R.getDay();case"Month":return M?R.getUTCMonth():R.getMonth();case"FullYear":return M?R.getUTCFullYear():R.getFullYear();default:return NaN}}function U4(k,_,R){var M,j,J,be,Xe;if(!(!k.isValid()||isNaN(R))){switch(M=k._d,j=k._isUTC,_){case"Milliseconds":return void(j?M.setUTCMilliseconds(R):M.setMilliseconds(R));case"Seconds":return void(j?M.setUTCSeconds(R):M.setSeconds(R));case"Minutes":return void(j?M.setUTCMinutes(R):M.setMinutes(R));case"Hours":return void(j?M.setUTCHours(R):M.setHours(R));case"Date":return void(j?M.setUTCDate(R):M.setDate(R));case"FullYear":break;default:return}J=R,be=k.month(),Xe=k.date(),Xe=Xe===29&&be===1&&!yb(J)?28:Xe,j?M.setUTCFullYear(J,be,Xe):M.setFullYear(J,be,Xe)}}function $ae(k){return k=jt(k),A(this[k])?this[k]():this}function Mae(k,_){if(typeof k=="object"){k=sn(k);var R=Ne(k),M,j=R.length;for(M=0;M<j;M++)this[R[M].unit](k[R[M].unit])}else if(k=jt(k),A(this[k]))return this[k](_);return this}function Pae(k,_){return(k%_+_)%_}var zr;Array.prototype.indexOf?zr=Array.prototype.indexOf:zr=function(k){var _;for(_=0;_<this.length;++_)if(this[_]===k)return _;return-1};function wI(k,_){if(isNaN(k)||isNaN(_))return NaN;var R=Pae(_,12);return k+=(_-R)/12,R===1?yb(k)?29:28:31-R%7%2}Q("M",["MM",2],"Mo",function(){return this.month()+1}),Q("MMM",0,0,function(k){return this.localeData().monthsShort(this,k)}),Q("MMMM",0,0,function(k){return this.localeData().months(this,k)}),Ze("M",Wt,dp),Ze("MM",Wt,Be),Ze("MMM",function(k,_){return _.monthsShortRegex(k)}),Ze("MMMM",function(k,_){return _.monthsRegex(k)}),Bn(["M","MM"],function(k,_){_[yl]=nn(k)-1}),Bn(["MMM","MMMM"],function(k,_,R,M){var j=R._locale.monthsParse(k,M,R._strict);j!=null?_[yl]=j:g(R).invalidMonth=k});var Fae="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),V4="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),H4=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Lae=av,Bae=av;function jae(k,_){return k?s(this._months)?this._months[k.month()]:this._months[(this._months.isFormat||H4).test(_)?"format":"standalone"][k.month()]:s(this._months)?this._months:this._months.standalone}function Wae(k,_){return k?s(this._monthsShort)?this._monthsShort[k.month()]:this._monthsShort[H4.test(_)?"format":"standalone"][k.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function zae(k,_,R){var M,j,J,be=k.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],M=0;M<12;++M)J=p([2e3,M]),this._shortMonthsParse[M]=this.monthsShort(J,"").toLocaleLowerCase(),this._longMonthsParse[M]=this.months(J,"").toLocaleLowerCase();return R?_==="MMM"?(j=zr.call(this._shortMonthsParse,be),j!==-1?j:null):(j=zr.call(this._longMonthsParse,be),j!==-1?j:null):_==="MMM"?(j=zr.call(this._shortMonthsParse,be),j!==-1?j:(j=zr.call(this._longMonthsParse,be),j!==-1?j:null)):(j=zr.call(this._longMonthsParse,be),j!==-1?j:(j=zr.call(this._shortMonthsParse,be),j!==-1?j:null))}function Uae(k,_,R){var M,j,J;if(this._monthsParseExact)return zae.call(this,k,_,R);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),M=0;M<12;M++){if(j=p([2e3,M]),R&&!this._longMonthsParse[M]&&(this._longMonthsParse[M]=new RegExp("^"+this.months(j,"").replace(".","")+"$","i"),this._shortMonthsParse[M]=new RegExp("^"+this.monthsShort(j,"").replace(".","")+"$","i")),!R&&!this._monthsParse[M]&&(J="^"+this.months(j,"")+"|^"+this.monthsShort(j,""),this._monthsParse[M]=new RegExp(J.replace(".",""),"i")),R&&_==="MMMM"&&this._longMonthsParse[M].test(k))return M;if(R&&_==="MMM"&&this._shortMonthsParse[M].test(k))return M;if(!R&&this._monthsParse[M].test(k))return M}}function G4(k,_){if(!k.isValid())return k;if(typeof _=="string"){if(/^\d+$/.test(_))_=nn(_);else if(_=k.localeData().monthsParse(_),!c(_))return k}var R=_,M=k.date();return M=M<29?M:Math.min(M,wI(k.year(),R)),k._isUTC?k._d.setUTCMonth(R,M):k._d.setMonth(R,M),k}function Y4(k){return k!=null?(G4(this,k),r.updateOffset(this,!0),this):cv(this,"Month")}function Vae(){return wI(this.year(),this.month())}function Hae(k){return this._monthsParseExact?(a(this,"_monthsRegex")||q4.call(this),k?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=Lae),this._monthsShortStrictRegex&&k?this._monthsShortStrictRegex:this._monthsShortRegex)}function Gae(k){return this._monthsParseExact?(a(this,"_monthsRegex")||q4.call(this),k?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=Bae),this._monthsStrictRegex&&k?this._monthsStrictRegex:this._monthsRegex)}function q4(){function k(Dt,an){return an.length-Dt.length}var _=[],R=[],M=[],j,J,be,Xe;for(j=0;j<12;j++)J=p([2e3,j]),be=vl(this.monthsShort(J,"")),Xe=vl(this.months(J,"")),_.push(be),R.push(Xe),M.push(Xe),M.push(be);_.sort(k),R.sort(k),M.sort(k),this._monthsRegex=new RegExp("^("+M.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+R.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+_.join("|")+")","i")}function Yae(k,_,R,M,j,J,be){var Xe;return k<100&&k>=0?(Xe=new Date(k+400,_,R,M,j,J,be),isFinite(Xe.getFullYear())&&Xe.setFullYear(k)):Xe=new Date(k,_,R,M,j,J,be),Xe}function dv(k){var _,R;return k<100&&k>=0?(R=Array.prototype.slice.call(arguments),R[0]=k+400,_=new Date(Date.UTC.apply(null,R)),isFinite(_.getUTCFullYear())&&_.setUTCFullYear(k)):_=new Date(Date.UTC.apply(null,arguments)),_}function xb(k,_,R){var M=7+_-R,j=(7+dv(k,0,M).getUTCDay()-_)%7;return-j+M-1}function K4(k,_,R,M,j){var J=(7+R-M)%7,be=xb(k,M,j),Xe=1+7*(_-1)+J+be,Dt,an;return Xe<=0?(Dt=k-1,an=lv(Dt)+Xe):Xe>lv(k)?(Dt=k+1,an=Xe-lv(k)):(Dt=k,an=Xe),{year:Dt,dayOfYear:an}}function fv(k,_,R){var M=xb(k.year(),_,R),j=Math.floor((k.dayOfYear()-M-1)/7)+1,J,be;return j<1?(be=k.year()-1,J=j+bl(be,_,R)):j>bl(k.year(),_,R)?(J=j-bl(k.year(),_,R),be=k.year()+1):(be=k.year(),J=j),{week:J,year:be}}function bl(k,_,R){var M=xb(k,_,R),j=xb(k+1,_,R);return(lv(k)-M+j)/7}Q("w",["ww",2],"wo","week"),Q("W",["WW",2],"Wo","isoWeek"),Ze("w",Wt,dp),Ze("ww",Wt,Be),Ze("W",Wt,dp),Ze("WW",Wt,Be),uv(["w","ww","W","WW"],function(k,_,R,M){_[M.substr(0,1)]=nn(k)});function qae(k){return fv(k,this._week.dow,this._week.doy).week}var Kae={dow:0,doy:6};function Xae(){return this._week.dow}function Qae(){return this._week.doy}function Jae(k){var _=this.localeData().week(this);return k==null?_:this.add((k-_)*7,"d")}function Zae(k){var _=fv(this,1,4).week;return k==null?_:this.add((k-_)*7,"d")}Q("d",0,"do","day"),Q("dd",0,0,function(k){return this.localeData().weekdaysMin(this,k)}),Q("ddd",0,0,function(k){return this.localeData().weekdaysShort(this,k)}),Q("dddd",0,0,function(k){return this.localeData().weekdays(this,k)}),Q("e",0,0,"weekday"),Q("E",0,0,"isoWeekday"),Ze("d",Wt),Ze("e",Wt),Ze("E",Wt),Ze("dd",function(k,_){return _.weekdaysMinRegex(k)}),Ze("ddd",function(k,_){return _.weekdaysShortRegex(k)}),Ze("dddd",function(k,_){return _.weekdaysRegex(k)}),uv(["dd","ddd","dddd"],function(k,_,R,M){var j=R._locale.weekdaysParse(k,M,R._strict);j!=null?_.d=j:g(R).invalidWeekday=k}),uv(["d","e","E"],function(k,_,R,M){_[M]=nn(k)});function eue(k,_){return typeof k!="string"?k:isNaN(k)?(k=_.weekdaysParse(k),typeof k=="number"?k:null):parseInt(k,10)}function tue(k,_){return typeof k=="string"?_.weekdaysParse(k)%7||7:isNaN(k)?null:k}function kI(k,_){return k.slice(_,7).concat(k.slice(0,_))}var nue="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),X4="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),rue="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),oue=av,sue=av,iue=av;function aue(k,_){var R=s(this._weekdays)?this._weekdays:this._weekdays[k&&k!==!0&&this._weekdays.isFormat.test(_)?"format":"standalone"];return k===!0?kI(R,this._week.dow):k?R[k.day()]:R}function uue(k){return k===!0?kI(this._weekdaysShort,this._week.dow):k?this._weekdaysShort[k.day()]:this._weekdaysShort}function lue(k){return k===!0?kI(this._weekdaysMin,this._week.dow):k?this._weekdaysMin[k.day()]:this._weekdaysMin}function cue(k,_,R){var M,j,J,be=k.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],M=0;M<7;++M)J=p([2e3,1]).day(M),this._minWeekdaysParse[M]=this.weekdaysMin(J,"").toLocaleLowerCase(),this._shortWeekdaysParse[M]=this.weekdaysShort(J,"").toLocaleLowerCase(),this._weekdaysParse[M]=this.weekdays(J,"").toLocaleLowerCase();return R?_==="dddd"?(j=zr.call(this._weekdaysParse,be),j!==-1?j:null):_==="ddd"?(j=zr.call(this._shortWeekdaysParse,be),j!==-1?j:null):(j=zr.call(this._minWeekdaysParse,be),j!==-1?j:null):_==="dddd"?(j=zr.call(this._weekdaysParse,be),j!==-1||(j=zr.call(this._shortWeekdaysParse,be),j!==-1)?j:(j=zr.call(this._minWeekdaysParse,be),j!==-1?j:null)):_==="ddd"?(j=zr.call(this._shortWeekdaysParse,be),j!==-1||(j=zr.call(this._weekdaysParse,be),j!==-1)?j:(j=zr.call(this._minWeekdaysParse,be),j!==-1?j:null)):(j=zr.call(this._minWeekdaysParse,be),j!==-1||(j=zr.call(this._weekdaysParse,be),j!==-1)?j:(j=zr.call(this._shortWeekdaysParse,be),j!==-1?j:null))}function due(k,_,R){var M,j,J;if(this._weekdaysParseExact)return cue.call(this,k,_,R);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),M=0;M<7;M++){if(j=p([2e3,1]).day(M),R&&!this._fullWeekdaysParse[M]&&(this._fullWeekdaysParse[M]=new RegExp("^"+this.weekdays(j,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[M]=new RegExp("^"+this.weekdaysShort(j,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[M]=new RegExp("^"+this.weekdaysMin(j,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[M]||(J="^"+this.weekdays(j,"")+"|^"+this.weekdaysShort(j,"")+"|^"+this.weekdaysMin(j,""),this._weekdaysParse[M]=new RegExp(J.replace(".",""),"i")),R&&_==="dddd"&&this._fullWeekdaysParse[M].test(k))return M;if(R&&_==="ddd"&&this._shortWeekdaysParse[M].test(k))return M;if(R&&_==="dd"&&this._minWeekdaysParse[M].test(k))return M;if(!R&&this._weekdaysParse[M].test(k))return M}}function fue(k){if(!this.isValid())return k!=null?this:NaN;var _=cv(this,"Day");return k!=null?(k=eue(k,this.localeData()),this.add(k-_,"d")):_}function hue(k){if(!this.isValid())return k!=null?this:NaN;var _=(this.day()+7-this.localeData()._week.dow)%7;return k==null?_:this.add(k-_,"d")}function pue(k){if(!this.isValid())return k!=null?this:NaN;if(k!=null){var _=tue(k,this.localeData());return this.day(this.day()%7?_:_-7)}else return this.day()||7}function mue(k){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||CI.call(this),k?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=oue),this._weekdaysStrictRegex&&k?this._weekdaysStrictRegex:this._weekdaysRegex)}function gue(k){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||CI.call(this),k?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=sue),this._weekdaysShortStrictRegex&&k?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function vue(k){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||CI.call(this),k?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=iue),this._weekdaysMinStrictRegex&&k?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function CI(){function k(Cs,El){return El.length-Cs.length}var _=[],R=[],M=[],j=[],J,be,Xe,Dt,an;for(J=0;J<7;J++)be=p([2e3,1]).day(J),Xe=vl(this.weekdaysMin(be,"")),Dt=vl(this.weekdaysShort(be,"")),an=vl(this.weekdays(be,"")),_.push(Xe),R.push(Dt),M.push(an),j.push(Xe),j.push(Dt),j.push(an);_.sort(k),R.sort(k),M.sort(k),j.sort(k),this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+M.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+R.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+_.join("|")+")","i")}function SI(){return this.hours()%12||12}function yue(){return this.hours()||24}Q("H",["HH",2],0,"hour"),Q("h",["hh",2],0,SI),Q("k",["kk",2],0,yue),Q("hmm",0,0,function(){return""+SI.apply(this)+H(this.minutes(),2)}),Q("hmmss",0,0,function(){return""+SI.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),Q("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),Q("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)});function Q4(k,_){Q(k,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),_)})}Q4("a",!0),Q4("A",!1);function J4(k,_){return _._meridiemParse}Ze("a",J4),Ze("A",J4),Ze("H",Wt,xI),Ze("h",Wt,dp),Ze("k",Wt,dp),Ze("HH",Wt,Be),Ze("hh",Wt,Be),Ze("kk",Wt,Be),Ze("hmm",ks),Ze("hmmss",wt),Ze("Hmm",ks),Ze("Hmmss",wt),Bn(["H","HH"],uo),Bn(["k","kk"],function(k,_,R){var M=nn(k);_[uo]=M===24?0:M}),Bn(["a","A"],function(k,_,R){R._isPm=R._locale.isPM(k),R._meridiem=k}),Bn(["h","hh"],function(k,_,R){_[uo]=nn(k),g(R).bigHour=!0}),Bn("hmm",function(k,_,R){var M=k.length-2;_[uo]=nn(k.substr(0,M)),_[Ca]=nn(k.substr(M)),g(R).bigHour=!0}),Bn("hmmss",function(k,_,R){var M=k.length-4,j=k.length-2;_[uo]=nn(k.substr(0,M)),_[Ca]=nn(k.substr(M,2)),_[xl]=nn(k.substr(j)),g(R).bigHour=!0}),Bn("Hmm",function(k,_,R){var M=k.length-2;_[uo]=nn(k.substr(0,M)),_[Ca]=nn(k.substr(M))}),Bn("Hmmss",function(k,_,R){var M=k.length-4,j=k.length-2;_[uo]=nn(k.substr(0,M)),_[Ca]=nn(k.substr(M,2)),_[xl]=nn(k.substr(j))});function xue(k){return(k+"").toLowerCase().charAt(0)==="p"}var bue=/[ap]\.?m?\.?/i,wue=fp("Hours",!0);function kue(k,_,R){return k>11?R?"pm":"PM":R?"am":"AM"}var Z4={calendar:F,longDateFormat:Le,invalidDate:Pe,ordinal:lt,dayOfMonthOrdinalParse:Me,relativeTime:xt,months:Fae,monthsShort:V4,week:Kae,weekdays:nue,weekdaysMin:rue,weekdaysShort:X4,meridiemParse:bue},dr={},hv={},pv;function Cue(k,_){var R,M=Math.min(k.length,_.length);for(R=0;R<M;R+=1)if(k[R]!==_[R])return R;return M}function eB(k){return k&&k.toLowerCase().replace("_","-")}function Sue(k){for(var _=0,R,M,j,J;_<k.length;){for(J=eB(k[_]).split("-"),R=J.length,M=eB(k[_+1]),M=M?M.split("-"):null;R>0;){if(j=bb(J.slice(0,R).join("-")),j)return j;if(M&&M.length>=R&&Cue(J,M)>=R-1)break;R--}_++}return pv}function Eue(k){return!!(k&&k.match("^[^/\\\\]*$"))}function bb(k){var _=null,R;if(dr[k]===void 0&&t&&t.exports&&Eue(k))try{_=pv._abbr,R=Gst,R("./locale/"+k),Rc(_)}catch{dr[k]=null}return dr[k]}function Rc(k,_){var R;return k&&(l(_)?R=wl(k):R=EI(k,_),R?pv=R:typeof console<"u"&&console.warn&&console.warn("Locale "+k+" not found. Did you forget to load it?")),pv._abbr}function EI(k,_){if(_!==null){var R,M=Z4;if(_.abbr=k,dr[k]!=null)$("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),M=dr[k]._config;else if(_.parentLocale!=null)if(dr[_.parentLocale]!=null)M=dr[_.parentLocale]._config;else if(R=bb(_.parentLocale),R!=null)M=R._config;else return hv[_.parentLocale]||(hv[_.parentLocale]=[]),hv[_.parentLocale].push({name:k,config:_}),null;return dr[k]=new W(L(M,_)),hv[k]&&hv[k].forEach(function(j){EI(j.name,j.config)}),Rc(k),dr[k]}else return delete dr[k],null}function _ue(k,_){if(_!=null){var R,M,j=Z4;dr[k]!=null&&dr[k].parentLocale!=null?dr[k].set(L(dr[k]._config,_)):(M=bb(k),M!=null&&(j=M._config),_=L(j,_),M==null&&(_.abbr=k),R=new W(_),R.parentLocale=dr[k],dr[k]=R),Rc(k)}else dr[k]!=null&&(dr[k].parentLocale!=null?(dr[k]=dr[k].parentLocale,k===Rc()&&Rc(k)):dr[k]!=null&&delete dr[k]);return dr[k]}function wl(k){var _;if(k&&k._locale&&k._locale._abbr&&(k=k._locale._abbr),!k)return pv;if(!s(k)){if(_=bb(k),_)return _;k=[k]}return Sue(k)}function Iue(){return z(dr)}function _I(k){var _,R=k._a;return R&&g(k).overflow===-2&&(_=R[yl]<0||R[yl]>11?yl:R[fu]<1||R[fu]>wI(R[Zo],R[yl])?fu:R[uo]<0||R[uo]>24||R[uo]===24&&(R[Ca]!==0||R[xl]!==0||R[yf]!==0)?uo:R[Ca]<0||R[Ca]>59?Ca:R[xl]<0||R[xl]>59?xl:R[yf]<0||R[yf]>999?yf:-1,g(k)._overflowDayOfYear&&(_<Zo||_>fu)&&(_=fu),g(k)._overflowWeeks&&_===-1&&(_=Rae),g(k)._overflowWeekday&&_===-1&&(_=Oae),g(k).overflow=_),k}var Tue=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Nue=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Due=/Z|[+-]\d\d(?::?\d\d)?/,wb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],II=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Rue=/^\/?Date\((-?\d+)/i,Oue=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Aue={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function tB(k){var _,R,M=k._i,j=Tue.exec(M)||Nue.exec(M),J,be,Xe,Dt,an=wb.length,Cs=II.length;if(j){for(g(k).iso=!0,_=0,R=an;_<R;_++)if(wb[_][1].exec(j[1])){be=wb[_][0],J=wb[_][2]!==!1;break}if(be==null){k._isValid=!1;return}if(j[3]){for(_=0,R=Cs;_<R;_++)if(II[_][1].exec(j[3])){Xe=(j[2]||" ")+II[_][0];break}if(Xe==null){k._isValid=!1;return}}if(!J&&Xe!=null){k._isValid=!1;return}if(j[4])if(Due.exec(j[4]))Dt="Z";else{k._isValid=!1;return}k._f=be+(Xe||"")+(Dt||""),NI(k)}else k._isValid=!1}function $ue(k,_,R,M,j,J){var be=[Mue(k),V4.indexOf(_),parseInt(R,10),parseInt(M,10),parseInt(j,10)];return J&&be.push(parseInt(J,10)),be}function Mue(k){var _=parseInt(k,10);return _<=49?2e3+_:_<=999?1900+_:_}function Pue(k){return k.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Fue(k,_,R){if(k){var M=X4.indexOf(k),j=new Date(_[0],_[1],_[2]).getDay();if(M!==j)return g(R).weekdayMismatch=!0,R._isValid=!1,!1}return!0}function Lue(k,_,R){if(k)return Aue[k];if(_)return 0;var M=parseInt(R,10),j=M%100,J=(M-j)/100;return J*60+j}function nB(k){var _=Oue.exec(Pue(k._i)),R;if(_){if(R=$ue(_[4],_[3],_[2],_[5],_[6],_[7]),!Fue(_[1],R,k))return;k._a=R,k._tzm=Lue(_[8],_[9],_[10]),k._d=dv.apply(null,k._a),k._d.setUTCMinutes(k._d.getUTCMinutes()-k._tzm),g(k).rfc2822=!0}else k._isValid=!1}function Bue(k){var _=Rue.exec(k._i);if(_!==null){k._d=new Date(+_[1]);return}if(tB(k),k._isValid===!1)delete k._isValid;else return;if(nB(k),k._isValid===!1)delete k._isValid;else return;k._strict?k._isValid=!1:r.createFromInputFallback(k)}r.createFromInputFallback=N("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(k){k._d=new Date(k._i+(k._useUTC?" UTC":""))});function hp(k,_,R){return k??_??R}function jue(k){var _=new Date(r.now());return k._useUTC?[_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate()]:[_.getFullYear(),_.getMonth(),_.getDate()]}function TI(k){var _,R,M=[],j,J,be;if(!k._d){for(j=jue(k),k._w&&k._a[fu]==null&&k._a[yl]==null&&Wue(k),k._dayOfYear!=null&&(be=hp(k._a[Zo],j[Zo]),(k._dayOfYear>lv(be)||k._dayOfYear===0)&&(g(k)._overflowDayOfYear=!0),R=dv(be,0,k._dayOfYear),k._a[yl]=R.getUTCMonth(),k._a[fu]=R.getUTCDate()),_=0;_<3&&k._a[_]==null;++_)k._a[_]=M[_]=j[_];for(;_<7;_++)k._a[_]=M[_]=k._a[_]==null?_===2?1:0:k._a[_];k._a[uo]===24&&k._a[Ca]===0&&k._a[xl]===0&&k._a[yf]===0&&(k._nextDay=!0,k._a[uo]=0),k._d=(k._useUTC?dv:Yae).apply(null,M),J=k._useUTC?k._d.getUTCDay():k._d.getDay(),k._tzm!=null&&k._d.setUTCMinutes(k._d.getUTCMinutes()-k._tzm),k._nextDay&&(k._a[uo]=24),k._w&&typeof k._w.d<"u"&&k._w.d!==J&&(g(k).weekdayMismatch=!0)}}function Wue(k){var _,R,M,j,J,be,Xe,Dt,an;_=k._w,_.GG!=null||_.W!=null||_.E!=null?(J=1,be=4,R=hp(_.GG,k._a[Zo],fv(er(),1,4).year),M=hp(_.W,1),j=hp(_.E,1),(j<1||j>7)&&(Dt=!0)):(J=k._locale._week.dow,be=k._locale._week.doy,an=fv(er(),J,be),R=hp(_.gg,k._a[Zo],an.year),M=hp(_.w,an.week),_.d!=null?(j=_.d,(j<0||j>6)&&(Dt=!0)):_.e!=null?(j=_.e+J,(_.e<0||_.e>6)&&(Dt=!0)):j=J),M<1||M>bl(R,J,be)?g(k)._overflowWeeks=!0:Dt!=null?g(k)._overflowWeekday=!0:(Xe=K4(R,M,j,J,be),k._a[Zo]=Xe.year,k._dayOfYear=Xe.dayOfYear)}r.ISO_8601=function(){},r.RFC_2822=function(){};function NI(k){if(k._f===r.ISO_8601){tB(k);return}if(k._f===r.RFC_2822){nB(k);return}k._a=[],g(k).empty=!0;var _=""+k._i,R,M,j,J,be,Xe=_.length,Dt=0,an,Cs;for(j=_e(k._f,k._locale).match(X)||[],Cs=j.length,R=0;R<Cs;R++)J=j[R],M=(_.match(Tae(J,k))||[])[0],M&&(be=_.substr(0,_.indexOf(M)),be.length>0&&g(k).unusedInput.push(be),_=_.slice(_.indexOf(M)+M.length),Dt+=M.length),ue[J]?(M?g(k).empty=!1:g(k).unusedTokens.push(J),Dae(J,M,k)):k._strict&&!M&&g(k).unusedTokens.push(J);g(k).charsLeftOver=Xe-Dt,_.length>0&&g(k).unusedInput.push(_),k._a[uo]<=12&&g(k).bigHour===!0&&k._a[uo]>0&&(g(k).bigHour=void 0),g(k).parsedDateParts=k._a.slice(0),g(k).meridiem=k._meridiem,k._a[uo]=zue(k._locale,k._a[uo],k._meridiem),an=g(k).era,an!==null&&(k._a[Zo]=k._locale.erasConvertYear(an,k._a[Zo])),TI(k),_I(k)}function zue(k,_,R){var M;return R==null?_:k.meridiemHour!=null?k.meridiemHour(_,R):(k.isPM!=null&&(M=k.isPM(R),M&&_<12&&(_+=12),!M&&_===12&&(_=0)),_)}function Uue(k){var _,R,M,j,J,be,Xe=!1,Dt=k._f.length;if(Dt===0){g(k).invalidFormat=!0,k._d=new Date(NaN);return}for(j=0;j<Dt;j++)J=0,be=!1,_=S({},k),k._useUTC!=null&&(_._useUTC=k._useUTC),_._f=k._f[j],NI(_),y(_)&&(be=!0),J+=g(_).charsLeftOver,J+=g(_).unusedTokens.length*10,g(_).score=J,Xe?J<M&&(M=J,R=_):(M==null||J<M||be)&&(M=J,R=_,be&&(Xe=!0));h(k,R||_)}function Vue(k){if(!k._d){var _=sn(k._i),R=_.day===void 0?_.date:_.day;k._a=f([_.year,_.month,R,_.hour,_.minute,_.second,_.millisecond],function(M){return M&&parseInt(M,10)}),TI(k)}}function Hue(k){var _=new E(_I(rB(k)));return _._nextDay&&(_.add(1,"d"),_._nextDay=void 0),_}function rB(k){var _=k._i,R=k._f;return k._locale=k._locale||wl(k._l),_===null||R===void 0&&_===""?x({nullInput:!0}):(typeof _=="string"&&(k._i=_=k._locale.preparse(_)),I(_)?new E(_I(_)):(d(_)?k._d=_:s(R)?Uue(k):R?NI(k):Gue(k),y(k)||(k._d=null),k))}function Gue(k){var _=k._i;l(_)?k._d=new Date(r.now()):d(_)?k._d=new Date(_.valueOf()):typeof _=="string"?Bue(k):s(_)?(k._a=f(_.slice(0),function(R){return parseInt(R,10)}),TI(k)):i(_)?Vue(k):c(_)?k._d=new Date(_):r.createFromInputFallback(k)}function oB(k,_,R,M,j){var J={};return(_===!0||_===!1)&&(M=_,_=void 0),(R===!0||R===!1)&&(M=R,R=void 0),(i(k)&&u(k)||s(k)&&k.length===0)&&(k=void 0),J._isAMomentObject=!0,J._useUTC=J._isUTC=j,J._l=R,J._i=k,J._f=_,J._strict=M,Hue(J)}function er(k,_,R,M){return oB(k,_,R,M,!1)}var Yue=N("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var k=er.apply(null,arguments);return this.isValid()&&k.isValid()?k<this?this:k:x()}),que=N("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var k=er.apply(null,arguments);return this.isValid()&&k.isValid()?k>this?this:k:x()});function sB(k,_){var R,M;if(_.length===1&&s(_[0])&&(_=_[0]),!_.length)return er();for(R=_[0],M=1;M<_.length;++M)(!_[M].isValid()||_[M][k](R))&&(R=_[M]);return R}function Kue(){var k=[].slice.call(arguments,0);return sB("isBefore",k)}function Xue(){var k=[].slice.call(arguments,0);return sB("isAfter",k)}var Que=function(){return Date.now?Date.now():+new Date},mv=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Jue(k){var _,R=!1,M,j=mv.length;for(_ in k)if(a(k,_)&&!(zr.call(mv,_)!==-1&&(k[_]==null||!isNaN(k[_]))))return!1;for(M=0;M<j;++M)if(k[mv[M]]){if(R)return!1;parseFloat(k[mv[M]])!==nn(k[mv[M]])&&(R=!0)}return!0}function Zue(){return this._isValid}function ele(){return Sa(NaN)}function kb(k){var _=sn(k),R=_.year||0,M=_.quarter||0,j=_.month||0,J=_.week||_.isoWeek||0,be=_.day||0,Xe=_.hour||0,Dt=_.minute||0,an=_.second||0,Cs=_.millisecond||0;this._isValid=Jue(_),this._milliseconds=+Cs+an*1e3+Dt*6e4+Xe*1e3*60*60,this._days=+be+J*7,this._months=+j+M*3+R*12,this._data={},this._locale=wl(),this._bubble()}function Cb(k){return k instanceof kb}function DI(k){return k<0?Math.round(-1*k)*-1:Math.round(k)}function tle(k,_,R){var M=Math.min(k.length,_.length),j=Math.abs(k.length-_.length),J=0,be;for(be=0;be<M;be++)(R&&k[be]!==_[be]||!R&&nn(k[be])!==nn(_[be]))&&J++;return J+j}function iB(k,_){Q(k,0,0,function(){var R=this.utcOffset(),M="+";return R<0&&(R=-R,M="-"),M+H(~~(R/60),2)+_+H(~~R%60,2)})}iB("Z",":"),iB("ZZ",""),Ze("Z",cp),Ze("ZZ",cp),Bn(["Z","ZZ"],function(k,_,R){R._useUTC=!0,R._tzm=RI(cp,k)});var nle=/([\+\-]|\d\d)/gi;function RI(k,_){var R=(_||"").match(k),M,j,J;return R===null?null:(M=R[R.length-1]||[],j=(M+"").match(nle)||["-",0,0],J=+(j[1]*60)+nn(j[2]),J===0?0:j[0]==="+"?J:-J)}function OI(k,_){var R,M;return _._isUTC?(R=_.clone(),M=(I(k)||d(k)?k.valueOf():er(k).valueOf())-R.valueOf(),R._d.setTime(R._d.valueOf()+M),r.updateOffset(R,!1),R):er(k).local()}function AI(k){return-Math.round(k._d.getTimezoneOffset())}r.updateOffset=function(){};function rle(k,_,R){var M=this._offset||0,j;if(!this.isValid())return k!=null?this:NaN;if(k!=null){if(typeof k=="string"){if(k=RI(cp,k),k===null)return this}else Math.abs(k)<16&&!R&&(k=k*60);return!this._isUTC&&_&&(j=AI(this)),this._offset=k,this._isUTC=!0,j!=null&&this.add(j,"m"),M!==k&&(!_||this._changeInProgress?cB(this,Sa(k-M,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?M:AI(this)}function ole(k,_){return k!=null?(typeof k!="string"&&(k=-k),this.utcOffset(k,_),this):-this.utcOffset()}function sle(k){return this.utcOffset(0,k)}function ile(k){return this._isUTC&&(this.utcOffset(0,k),this._isUTC=!1,k&&this.subtract(AI(this),"m")),this}function ale(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var k=RI(iv,this._i);k!=null?this.utcOffset(k):this.utcOffset(0,!0)}return this}function ule(k){return this.isValid()?(k=k?er(k).utcOffset():0,(this.utcOffset()-k)%60===0):!1}function lle(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function cle(){if(!l(this._isDSTShifted))return this._isDSTShifted;var k={},_;return S(k,this),k=rB(k),k._a?(_=k._isUTC?p(k._a):er(k._a),this._isDSTShifted=this.isValid()&&tle(k._a,_.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function dle(){return this.isValid()?!this._isUTC:!1}function fle(){return this.isValid()?this._isUTC:!1}function aB(){return this.isValid()?this._isUTC&&this._offset===0:!1}var hle=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ple=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Sa(k,_){var R=k,M=null,j,J,be;return Cb(k)?R={ms:k._milliseconds,d:k._days,M:k._months}:c(k)||!isNaN(+k)?(R={},_?R[_]=+k:R.milliseconds=+k):(M=hle.exec(k))?(j=M[1]==="-"?-1:1,R={y:0,d:nn(M[fu])*j,h:nn(M[uo])*j,m:nn(M[Ca])*j,s:nn(M[xl])*j,ms:nn(DI(M[yf]*1e3))*j}):(M=ple.exec(k))?(j=M[1]==="-"?-1:1,R={y:xf(M[2],j),M:xf(M[3],j),w:xf(M[4],j),d:xf(M[5],j),h:xf(M[6],j),m:xf(M[7],j),s:xf(M[8],j)}):R==null?R={}:typeof R=="object"&&("from"in R||"to"in R)&&(be=mle(er(R.from),er(R.to)),R={},R.ms=be.milliseconds,R.M=be.months),J=new kb(R),Cb(k)&&a(k,"_locale")&&(J._locale=k._locale),Cb(k)&&a(k,"_isValid")&&(J._isValid=k._isValid),J}Sa.fn=kb.prototype,Sa.invalid=ele;function xf(k,_){var R=k&&parseFloat(k.replace(",","."));return(isNaN(R)?0:R)*_}function uB(k,_){var R={};return R.months=_.month()-k.month()+(_.year()-k.year())*12,k.clone().add(R.months,"M").isAfter(_)&&--R.months,R.milliseconds=+_-+k.clone().add(R.months,"M"),R}function mle(k,_){var R;return k.isValid()&&_.isValid()?(_=OI(_,k),k.isBefore(_)?R=uB(k,_):(R=uB(_,k),R.milliseconds=-R.milliseconds,R.months=-R.months),R):{milliseconds:0,months:0}}function lB(k,_){return function(R,M){var j,J;return M!==null&&!isNaN(+M)&&($(_,"moment()."+_+"(period, number) is deprecated. Please use moment()."+_+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),J=R,R=M,M=J),j=Sa(R,M),cB(this,j,k),this}}function cB(k,_,R,M){var j=_._milliseconds,J=DI(_._days),be=DI(_._months);k.isValid()&&(M=M??!0,be&&G4(k,cv(k,"Month")+be*R),J&&U4(k,"Date",cv(k,"Date")+J*R),j&&k._d.setTime(k._d.valueOf()+j*R),M&&r.updateOffset(k,J||be))}var gle=lB(1,"add"),vle=lB(-1,"subtract");function dB(k){return typeof k=="string"||k instanceof String}function yle(k){return I(k)||d(k)||dB(k)||c(k)||ble(k)||xle(k)||k===null||k===void 0}function xle(k){var _=i(k)&&!u(k),R=!1,M=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],j,J,be=M.length;for(j=0;j<be;j+=1)J=M[j],R=R||a(k,J);return _&&R}function ble(k){var _=s(k),R=!1;return _&&(R=k.filter(function(M){return!c(M)&&dB(k)}).length===0),_&&R}function wle(k){var _=i(k)&&!u(k),R=!1,M=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],j,J;for(j=0;j<M.length;j+=1)J=M[j],R=R||a(k,J);return _&&R}function kle(k,_){var R=k.diff(_,"days",!0);return R<-6?"sameElse":R<-1?"lastWeek":R<0?"lastDay":R<1?"sameDay":R<2?"nextDay":R<7?"nextWeek":"sameElse"}function Cle(k,_){arguments.length===1&&(arguments[0]?yle(arguments[0])?(k=arguments[0],_=void 0):wle(arguments[0])&&(_=arguments[0],k=void 0):(k=void 0,_=void 0));var R=k||er(),M=OI(R,this).startOf("day"),j=r.calendarFormat(this,M)||"sameElse",J=_&&(A(_[j])?_[j].call(this,R):_[j]);return this.format(J||this.localeData().calendar(j,this,er(R)))}function Sle(){return new E(this)}function Ele(k,_){var R=I(k)?k:er(k);return this.isValid()&&R.isValid()?(_=jt(_)||"millisecond",_==="millisecond"?this.valueOf()>R.valueOf():R.valueOf()<this.clone().startOf(_).valueOf()):!1}function _le(k,_){var R=I(k)?k:er(k);return this.isValid()&&R.isValid()?(_=jt(_)||"millisecond",_==="millisecond"?this.valueOf()<R.valueOf():this.clone().endOf(_).valueOf()<R.valueOf()):!1}function Ile(k,_,R,M){var j=I(k)?k:er(k),J=I(_)?_:er(_);return this.isValid()&&j.isValid()&&J.isValid()?(M=M||"()",(M[0]==="("?this.isAfter(j,R):!this.isBefore(j,R))&&(M[1]===")"?this.isBefore(J,R):!this.isAfter(J,R))):!1}function Tle(k,_){var R=I(k)?k:er(k),M;return this.isValid()&&R.isValid()?(_=jt(_)||"millisecond",_==="millisecond"?this.valueOf()===R.valueOf():(M=R.valueOf(),this.clone().startOf(_).valueOf()<=M&&M<=this.clone().endOf(_).valueOf())):!1}function Nle(k,_){return this.isSame(k,_)||this.isAfter(k,_)}function Dle(k,_){return this.isSame(k,_)||this.isBefore(k,_)}function Rle(k,_,R){var M,j,J;if(!this.isValid())return NaN;if(M=OI(k,this),!M.isValid())return NaN;switch(j=(M.utcOffset()-this.utcOffset())*6e4,_=jt(_),_){case"year":J=Sb(this,M)/12;break;case"month":J=Sb(this,M);break;case"quarter":J=Sb(this,M)/3;break;case"second":J=(this-M)/1e3;break;case"minute":J=(this-M)/6e4;break;case"hour":J=(this-M)/36e5;break;case"day":J=(this-M-j)/864e5;break;case"week":J=(this-M-j)/6048e5;break;default:J=this-M}return R?J:ji(J)}function Sb(k,_){if(k.date()<_.date())return-Sb(_,k);var R=(_.year()-k.year())*12+(_.month()-k.month()),M=k.clone().add(R,"months"),j,J;return _-M<0?(j=k.clone().add(R-1,"months"),J=(_-M)/(M-j)):(j=k.clone().add(R+1,"months"),J=(_-M)/(j-M)),-(R+J)||0}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Ole(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ale(k){if(!this.isValid())return null;var _=k!==!0,R=_?this.clone().utc():this;return R.year()<0||R.year()>9999?Ce(R,_?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?_?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ce(R,"Z")):Ce(R,_?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function $le(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var k="moment",_="",R,M,j,J;return this.isLocal()||(k=this.utcOffset()===0?"moment.utc":"moment.parseZone",_="Z"),R="["+k+'("]',M=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",j="-MM-DD[T]HH:mm:ss.SSS",J=_+'[")]',this.format(R+M+j+J)}function Mle(k){k||(k=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var _=Ce(this,k);return this.localeData().postformat(_)}function Ple(k,_){return this.isValid()&&(I(k)&&k.isValid()||er(k).isValid())?Sa({to:this,from:k}).locale(this.locale()).humanize(!_):this.localeData().invalidDate()}function Fle(k){return this.from(er(),k)}function Lle(k,_){return this.isValid()&&(I(k)&&k.isValid()||er(k).isValid())?Sa({from:this,to:k}).locale(this.locale()).humanize(!_):this.localeData().invalidDate()}function Ble(k){return this.to(er(),k)}function fB(k){var _;return k===void 0?this._locale._abbr:(_=wl(k),_!=null&&(this._locale=_),this)}var hB=N("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(k){return k===void 0?this.localeData():this.locale(k)});function pB(){return this._locale}var Eb=1e3,pp=60*Eb,_b=60*pp,mB=(365*400+97)*24*_b;function mp(k,_){return(k%_+_)%_}function gB(k,_,R){return k<100&&k>=0?new Date(k+400,_,R)-mB:new Date(k,_,R).valueOf()}function vB(k,_,R){return k<100&&k>=0?Date.UTC(k+400,_,R)-mB:Date.UTC(k,_,R)}function jle(k){var _,R;if(k=jt(k),k===void 0||k==="millisecond"||!this.isValid())return this;switch(R=this._isUTC?vB:gB,k){case"year":_=R(this.year(),0,1);break;case"quarter":_=R(this.year(),this.month()-this.month()%3,1);break;case"month":_=R(this.year(),this.month(),1);break;case"week":_=R(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":_=R(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":_=R(this.year(),this.month(),this.date());break;case"hour":_=this._d.valueOf(),_-=mp(_+(this._isUTC?0:this.utcOffset()*pp),_b);break;case"minute":_=this._d.valueOf(),_-=mp(_,pp);break;case"second":_=this._d.valueOf(),_-=mp(_,Eb);break}return this._d.setTime(_),r.updateOffset(this,!0),this}function Wle(k){var _,R;if(k=jt(k),k===void 0||k==="millisecond"||!this.isValid())return this;switch(R=this._isUTC?vB:gB,k){case"year":_=R(this.year()+1,0,1)-1;break;case"quarter":_=R(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":_=R(this.year(),this.month()+1,1)-1;break;case"week":_=R(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":_=R(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":_=R(this.year(),this.month(),this.date()+1)-1;break;case"hour":_=this._d.valueOf(),_+=_b-mp(_+(this._isUTC?0:this.utcOffset()*pp),_b)-1;break;case"minute":_=this._d.valueOf(),_+=pp-mp(_,pp)-1;break;case"second":_=this._d.valueOf(),_+=Eb-mp(_,Eb)-1;break}return this._d.setTime(_),r.updateOffset(this,!0),this}function zle(){return this._d.valueOf()-(this._offset||0)*6e4}function Ule(){return Math.floor(this.valueOf()/1e3)}function Vle(){return new Date(this.valueOf())}function Hle(){var k=this;return[k.year(),k.month(),k.date(),k.hour(),k.minute(),k.second(),k.millisecond()]}function Gle(){var k=this;return{years:k.year(),months:k.month(),date:k.date(),hours:k.hours(),minutes:k.minutes(),seconds:k.seconds(),milliseconds:k.milliseconds()}}function Yle(){return this.isValid()?this.toISOString():null}function qle(){return y(this)}function Kle(){return h({},g(this))}function Xle(){return g(this).overflow}function Qle(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Q("N",0,0,"eraAbbr"),Q("NN",0,0,"eraAbbr"),Q("NNN",0,0,"eraAbbr"),Q("NNNN",0,0,"eraName"),Q("NNNNN",0,0,"eraNarrow"),Q("y",["y",1],"yo","eraYear"),Q("y",["yy",2],0,"eraYear"),Q("y",["yyy",3],0,"eraYear"),Q("y",["yyyy",4],0,"eraYear"),Ze("N",$I),Ze("NN",$I),Ze("NNN",$I),Ze("NNNN",uce),Ze("NNNNN",lce),Bn(["N","NN","NNN","NNNN","NNNNN"],function(k,_,R,M){var j=R._locale.erasParse(k,M,R._strict);j?g(R).era=j:g(R).invalidEra=k}),Ze("y",Bi),Ze("yy",Bi),Ze("yyy",Bi),Ze("yyyy",Bi),Ze("yo",cce),Bn(["y","yy","yyy","yyyy"],Zo),Bn(["yo"],function(k,_,R,M){var j;R._locale._eraYearOrdinalRegex&&(j=k.match(R._locale._eraYearOrdinalRegex)),R._locale.eraYearOrdinalParse?_[Zo]=R._locale.eraYearOrdinalParse(k,j):_[Zo]=parseInt(k,10)});function Jle(k,_){var R,M,j,J=this._eras||wl("en")._eras;for(R=0,M=J.length;R<M;++R){switch(typeof J[R].since){case"string":j=r(J[R].since).startOf("day"),J[R].since=j.valueOf();break}switch(typeof J[R].until){case"undefined":J[R].until=1/0;break;case"string":j=r(J[R].until).startOf("day").valueOf(),J[R].until=j.valueOf();break}}return J}function Zle(k,_,R){var M,j,J=this.eras(),be,Xe,Dt;for(k=k.toUpperCase(),M=0,j=J.length;M<j;++M)if(be=J[M].name.toUpperCase(),Xe=J[M].abbr.toUpperCase(),Dt=J[M].narrow.toUpperCase(),R)switch(_){case"N":case"NN":case"NNN":if(Xe===k)return J[M];break;case"NNNN":if(be===k)return J[M];break;case"NNNNN":if(Dt===k)return J[M];break}else if([be,Xe,Dt].indexOf(k)>=0)return J[M]}function ece(k,_){var R=k.since<=k.until?1:-1;return _===void 0?r(k.since).year():r(k.since).year()+(_-k.offset)*R}function tce(){var k,_,R,M=this.localeData().eras();for(k=0,_=M.length;k<_;++k)if(R=this.clone().startOf("day").valueOf(),M[k].since<=R&&R<=M[k].until||M[k].until<=R&&R<=M[k].since)return M[k].name;return""}function nce(){var k,_,R,M=this.localeData().eras();for(k=0,_=M.length;k<_;++k)if(R=this.clone().startOf("day").valueOf(),M[k].since<=R&&R<=M[k].until||M[k].until<=R&&R<=M[k].since)return M[k].narrow;return""}function rce(){var k,_,R,M=this.localeData().eras();for(k=0,_=M.length;k<_;++k)if(R=this.clone().startOf("day").valueOf(),M[k].since<=R&&R<=M[k].until||M[k].until<=R&&R<=M[k].since)return M[k].abbr;return""}function oce(){var k,_,R,M,j=this.localeData().eras();for(k=0,_=j.length;k<_;++k)if(R=j[k].since<=j[k].until?1:-1,M=this.clone().startOf("day").valueOf(),j[k].since<=M&&M<=j[k].until||j[k].until<=M&&M<=j[k].since)return(this.year()-r(j[k].since).year())*R+j[k].offset;return this.year()}function sce(k){return a(this,"_erasNameRegex")||MI.call(this),k?this._erasNameRegex:this._erasRegex}function ice(k){return a(this,"_erasAbbrRegex")||MI.call(this),k?this._erasAbbrRegex:this._erasRegex}function ace(k){return a(this,"_erasNarrowRegex")||MI.call(this),k?this._erasNarrowRegex:this._erasRegex}function $I(k,_){return _.erasAbbrRegex(k)}function uce(k,_){return _.erasNameRegex(k)}function lce(k,_){return _.erasNarrowRegex(k)}function cce(k,_){return _._eraYearOrdinalRegex||Bi}function MI(){var k=[],_=[],R=[],M=[],j,J,be,Xe,Dt,an=this.eras();for(j=0,J=an.length;j<J;++j)be=vl(an[j].name),Xe=vl(an[j].abbr),Dt=vl(an[j].narrow),_.push(be),k.push(Xe),R.push(Dt),M.push(be),M.push(Xe),M.push(Dt);this._erasRegex=new RegExp("^("+M.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+_.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+k.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+R.join("|")+")","i")}Q(0,["gg",2],0,function(){return this.weekYear()%100}),Q(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ib(k,_){Q(0,[k,k.length],0,_)}Ib("gggg","weekYear"),Ib("ggggg","weekYear"),Ib("GGGG","isoWeekYear"),Ib("GGGGG","isoWeekYear"),Ze("G",Dc),Ze("g",Dc),Ze("GG",Wt,Be),Ze("gg",Wt,Be),Ze("GGGG",cr,At),Ze("gggg",cr,At),Ze("GGGGG",Xr,wr),Ze("ggggg",Xr,wr),uv(["gggg","ggggg","GGGG","GGGGG"],function(k,_,R,M){_[M.substr(0,2)]=nn(k)}),uv(["gg","GG"],function(k,_,R,M){_[M]=r.parseTwoDigitYear(k)});function dce(k){return yB.call(this,k,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function fce(k){return yB.call(this,k,this.isoWeek(),this.isoWeekday(),1,4)}function hce(){return bl(this.year(),1,4)}function pce(){return bl(this.isoWeekYear(),1,4)}function mce(){var k=this.localeData()._week;return bl(this.year(),k.dow,k.doy)}function gce(){var k=this.localeData()._week;return bl(this.weekYear(),k.dow,k.doy)}function yB(k,_,R,M,j){var J;return k==null?fv(this,M,j).year:(J=bl(k,M,j),_>J&&(_=J),vce.call(this,k,_,R,M,j))}function vce(k,_,R,M,j){var J=K4(k,_,R,M,j),be=dv(J.year,0,J.dayOfYear);return this.year(be.getUTCFullYear()),this.month(be.getUTCMonth()),this.date(be.getUTCDate()),this}Q("Q",0,"Qo","quarter"),Ze("Q",ze),Bn("Q",function(k,_){_[yl]=(nn(k)-1)*3});function yce(k){return k==null?Math.ceil((this.month()+1)/3):this.month((k-1)*3+this.month()%3)}Q("D",["DD",2],"Do","date"),Ze("D",Wt,dp),Ze("DD",Wt,Be),Ze("Do",function(k,_){return k?_._dayOfMonthOrdinalParse||_._ordinalParse:_._dayOfMonthOrdinalParseLenient}),Bn(["D","DD"],fu),Bn("Do",function(k,_){_[fu]=nn(k.match(Wt)[0])});var xB=fp("Date",!0);Q("DDD",["DDDD",3],"DDDo","dayOfYear"),Ze("DDD",Mt),Ze("DDDD",It),Bn(["DDD","DDDD"],function(k,_,R){R._dayOfYear=nn(k)});function xce(k){var _=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return k==null?_:this.add(k-_,"d")}Q("m",["mm",2],0,"minute"),Ze("m",Wt,xI),Ze("mm",Wt,Be),Bn(["m","mm"],Ca);var bce=fp("Minutes",!1);Q("s",["ss",2],0,"second"),Ze("s",Wt,xI),Ze("ss",Wt,Be),Bn(["s","ss"],xl);var wce=fp("Seconds",!1);Q("S",0,0,function(){return~~(this.millisecond()/100)}),Q(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Q(0,["SSS",3],0,"millisecond"),Q(0,["SSSS",4],0,function(){return this.millisecond()*10}),Q(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Q(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Q(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Q(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Q(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Ze("S",Mt,ze),Ze("SS",Mt,Be),Ze("SSS",Mt,It);var Oc,bB;for(Oc="SSSS";Oc.length<=9;Oc+="S")Ze(Oc,Bi);function kce(k,_){_[yf]=nn(("0."+k)*1e3)}for(Oc="S";Oc.length<=9;Oc+="S")Bn(Oc,kce);bB=fp("Milliseconds",!1),Q("z",0,0,"zoneAbbr"),Q("zz",0,0,"zoneName");function Cce(){return this._isUTC?"UTC":""}function Sce(){return this._isUTC?"Coordinated Universal Time":""}var Oe=E.prototype;Oe.add=gle,Oe.calendar=Cle,Oe.clone=Sle,Oe.diff=Rle,Oe.endOf=Wle,Oe.format=Mle,Oe.from=Ple,Oe.fromNow=Fle,Oe.to=Lle,Oe.toNow=Ble,Oe.get=$ae,Oe.invalidAt=Xle,Oe.isAfter=Ele,Oe.isBefore=_le,Oe.isBetween=Ile,Oe.isSame=Tle,Oe.isSameOrAfter=Nle,Oe.isSameOrBefore=Dle,Oe.isValid=qle,Oe.lang=hB,Oe.locale=fB,Oe.localeData=pB,Oe.max=que,Oe.min=Yue,Oe.parsingFlags=Kle,Oe.set=Mae,Oe.startOf=jle,Oe.subtract=vle,Oe.toArray=Hle,Oe.toObject=Gle,Oe.toDate=Vle,Oe.toISOString=Ale,Oe.inspect=$le,typeof Symbol<"u"&&Symbol.for!=null&&(Oe[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Oe.toJSON=Yle,Oe.toString=Ole,Oe.unix=Ule,Oe.valueOf=zle,Oe.creationData=Qle,Oe.eraName=tce,Oe.eraNarrow=nce,Oe.eraAbbr=rce,Oe.eraYear=oce,Oe.year=z4,Oe.isLeapYear=Aae,Oe.weekYear=dce,Oe.isoWeekYear=fce,Oe.quarter=Oe.quarters=yce,Oe.month=Y4,Oe.daysInMonth=Vae,Oe.week=Oe.weeks=Jae,Oe.isoWeek=Oe.isoWeeks=Zae,Oe.weeksInYear=mce,Oe.weeksInWeekYear=gce,Oe.isoWeeksInYear=hce,Oe.isoWeeksInISOWeekYear=pce,Oe.date=xB,Oe.day=Oe.days=fue,Oe.weekday=hue,Oe.isoWeekday=pue,Oe.dayOfYear=xce,Oe.hour=Oe.hours=wue,Oe.minute=Oe.minutes=bce,Oe.second=Oe.seconds=wce,Oe.millisecond=Oe.milliseconds=bB,Oe.utcOffset=rle,Oe.utc=sle,Oe.local=ile,Oe.parseZone=ale,Oe.hasAlignedHourOffset=ule,Oe.isDST=lle,Oe.isLocal=dle,Oe.isUtcOffset=fle,Oe.isUtc=aB,Oe.isUTC=aB,Oe.zoneAbbr=Cce,Oe.zoneName=Sce,Oe.dates=N("dates accessor is deprecated. Use date instead.",xB),Oe.months=N("months accessor is deprecated. Use month instead",Y4),Oe.years=N("years accessor is deprecated. Use year instead",z4),Oe.zone=N("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ole),Oe.isDSTShifted=N("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",cle);function Ece(k){return er(k*1e3)}function _ce(){return er.apply(null,arguments).parseZone()}function wB(k){return k}var wn=W.prototype;wn.calendar=B,wn.longDateFormat=Ie,wn.invalidDate=Ue,wn.ordinal=Ke,wn.preparse=wB,wn.postformat=wB,wn.relativeTime=_t,wn.pastFuture=tn,wn.set=P,wn.eras=Jle,wn.erasParse=Zle,wn.erasConvertYear=ece,wn.erasAbbrRegex=ice,wn.erasNameRegex=sce,wn.erasNarrowRegex=ace,wn.months=jae,wn.monthsShort=Wae,wn.monthsParse=Uae,wn.monthsRegex=Gae,wn.monthsShortRegex=Hae,wn.week=qae,wn.firstDayOfYear=Qae,wn.firstDayOfWeek=Xae,wn.weekdays=aue,wn.weekdaysMin=lue,wn.weekdaysShort=uue,wn.weekdaysParse=due,wn.weekdaysRegex=mue,wn.weekdaysShortRegex=gue,wn.weekdaysMinRegex=vue,wn.isPM=xue,wn.meridiem=kue;function Tb(k,_,R,M){var j=wl(),J=p().set(M,_);return j[R](J,k)}function kB(k,_,R){if(c(k)&&(_=k,k=void 0),k=k||"",_!=null)return Tb(k,_,R,"month");var M,j=[];for(M=0;M<12;M++)j[M]=Tb(k,M,R,"month");return j}function PI(k,_,R,M){typeof k=="boolean"?(c(_)&&(R=_,_=void 0),_=_||""):(_=k,R=_,k=!1,c(_)&&(R=_,_=void 0),_=_||"");var j=wl(),J=k?j._week.dow:0,be,Xe=[];if(R!=null)return Tb(_,(R+J)%7,M,"day");for(be=0;be<7;be++)Xe[be]=Tb(_,(be+J)%7,M,"day");return Xe}function Ice(k,_){return kB(k,_,"months")}function Tce(k,_){return kB(k,_,"monthsShort")}function Nce(k,_,R){return PI(k,_,R,"weekdays")}function Dce(k,_,R){return PI(k,_,R,"weekdaysShort")}function Rce(k,_,R){return PI(k,_,R,"weekdaysMin")}Rc("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(k){var _=k%10,R=nn(k%100/10)===1?"th":_===1?"st":_===2?"nd":_===3?"rd":"th";return k+R}}),r.lang=N("moment.lang is deprecated. Use moment.locale instead.",Rc),r.langData=N("moment.langData is deprecated. Use moment.localeData instead.",wl);var kl=Math.abs;function Oce(){var k=this._data;return this._milliseconds=kl(this._milliseconds),this._days=kl(this._days),this._months=kl(this._months),k.milliseconds=kl(k.milliseconds),k.seconds=kl(k.seconds),k.minutes=kl(k.minutes),k.hours=kl(k.hours),k.months=kl(k.months),k.years=kl(k.years),this}function CB(k,_,R,M){var j=Sa(_,R);return k._milliseconds+=M*j._milliseconds,k._days+=M*j._days,k._months+=M*j._months,k._bubble()}function Ace(k,_){return CB(this,k,_,1)}function $ce(k,_){return CB(this,k,_,-1)}function SB(k){return k<0?Math.floor(k):Math.ceil(k)}function Mce(){var k=this._milliseconds,_=this._days,R=this._months,M=this._data,j,J,be,Xe,Dt;return k>=0&&_>=0&&R>=0||k<=0&&_<=0&&R<=0||(k+=SB(FI(R)+_)*864e5,_=0,R=0),M.milliseconds=k%1e3,j=ji(k/1e3),M.seconds=j%60,J=ji(j/60),M.minutes=J%60,be=ji(J/60),M.hours=be%24,_+=ji(be/24),Dt=ji(EB(_)),R+=Dt,_-=SB(FI(Dt)),Xe=ji(R/12),R%=12,M.days=_,M.months=R,M.years=Xe,this}function EB(k){return k*4800/146097}function FI(k){return k*146097/4800}function Pce(k){if(!this.isValid())return NaN;var _,R,M=this._milliseconds;if(k=jt(k),k==="month"||k==="quarter"||k==="year")switch(_=this._days+M/864e5,R=this._months+EB(_),k){case"month":return R;case"quarter":return R/3;case"year":return R/12}else switch(_=this._days+Math.round(FI(this._months)),k){case"week":return _/7+M/6048e5;case"day":return _+M/864e5;case"hour":return _*24+M/36e5;case"minute":return _*1440+M/6e4;case"second":return _*86400+M/1e3;case"millisecond":return Math.floor(_*864e5)+M;default:throw new Error("Unknown unit "+k)}}function Cl(k){return function(){return this.as(k)}}var _B=Cl("ms"),Fce=Cl("s"),Lce=Cl("m"),Bce=Cl("h"),jce=Cl("d"),Wce=Cl("w"),zce=Cl("M"),Uce=Cl("Q"),Vce=Cl("y"),Hce=_B;function Gce(){return Sa(this)}function Yce(k){return k=jt(k),this.isValid()?this[k+"s"]():NaN}function bf(k){return function(){return this.isValid()?this._data[k]:NaN}}var qce=bf("milliseconds"),Kce=bf("seconds"),Xce=bf("minutes"),Qce=bf("hours"),Jce=bf("days"),Zce=bf("months"),ede=bf("years");function tde(){return ji(this.days()/7)}var Sl=Math.round,gp={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function nde(k,_,R,M,j){return j.relativeTime(_||1,!!R,k,M)}function rde(k,_,R,M){var j=Sa(k).abs(),J=Sl(j.as("s")),be=Sl(j.as("m")),Xe=Sl(j.as("h")),Dt=Sl(j.as("d")),an=Sl(j.as("M")),Cs=Sl(j.as("w")),El=Sl(j.as("y")),Ac=J<=R.ss&&["s",J]||J<R.s&&["ss",J]||be<=1&&["m"]||be<R.m&&["mm",be]||Xe<=1&&["h"]||Xe<R.h&&["hh",Xe]||Dt<=1&&["d"]||Dt<R.d&&["dd",Dt];return R.w!=null&&(Ac=Ac||Cs<=1&&["w"]||Cs<R.w&&["ww",Cs]),Ac=Ac||an<=1&&["M"]||an<R.M&&["MM",an]||El<=1&&["y"]||["yy",El],Ac[2]=_,Ac[3]=+k>0,Ac[4]=M,nde.apply(null,Ac)}function ode(k){return k===void 0?Sl:typeof k=="function"?(Sl=k,!0):!1}function sde(k,_){return gp[k]===void 0?!1:_===void 0?gp[k]:(gp[k]=_,k==="s"&&(gp.ss=_-1),!0)}function ide(k,_){if(!this.isValid())return this.localeData().invalidDate();var R=!1,M=gp,j,J;return typeof k=="object"&&(_=k,k=!1),typeof k=="boolean"&&(R=k),typeof _=="object"&&(M=Object.assign({},gp,_),_.s!=null&&_.ss==null&&(M.ss=_.s-1)),j=this.localeData(),J=rde(this,!R,M,j),R&&(J=j.pastFuture(+this,J)),j.postformat(J)}var LI=Math.abs;function vp(k){return(k>0)-(k<0)||+k}function Nb(){if(!this.isValid())return this.localeData().invalidDate();var k=LI(this._milliseconds)/1e3,_=LI(this._days),R=LI(this._months),M,j,J,be,Xe=this.asSeconds(),Dt,an,Cs,El;return Xe?(M=ji(k/60),j=ji(M/60),k%=60,M%=60,J=ji(R/12),R%=12,be=k?k.toFixed(3).replace(/\.?0+$/,""):"",Dt=Xe<0?"-":"",an=vp(this._months)!==vp(Xe)?"-":"",Cs=vp(this._days)!==vp(Xe)?"-":"",El=vp(this._milliseconds)!==vp(Xe)?"-":"",Dt+"P"+(J?an+J+"Y":"")+(R?an+R+"M":"")+(_?Cs+_+"D":"")+(j||M||k?"T":"")+(j?El+j+"H":"")+(M?El+M+"M":"")+(k?El+be+"S":"")):"P0D"}var hn=kb.prototype;hn.isValid=Zue,hn.abs=Oce,hn.add=Ace,hn.subtract=$ce,hn.as=Pce,hn.asMilliseconds=_B,hn.asSeconds=Fce,hn.asMinutes=Lce,hn.asHours=Bce,hn.asDays=jce,hn.asWeeks=Wce,hn.asMonths=zce,hn.asQuarters=Uce,hn.asYears=Vce,hn.valueOf=Hce,hn._bubble=Mce,hn.clone=Gce,hn.get=Yce,hn.milliseconds=qce,hn.seconds=Kce,hn.minutes=Xce,hn.hours=Qce,hn.days=Jce,hn.weeks=tde,hn.months=Zce,hn.years=ede,hn.humanize=ide,hn.toISOString=Nb,hn.toString=Nb,hn.toJSON=Nb,hn.locale=fB,hn.localeData=pB,hn.toIsoString=N("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nb),hn.lang=hB,Q("X",0,0,"unix"),Q("x",0,0,"valueOf"),Ze("x",Dc),Ze("X",Iae),Bn("X",function(k,_,R){R._d=new Date(parseFloat(k)*1e3)}),Bn("x",function(k,_,R){R._d=new Date(nn(k))});//! moment.js
return r.version="2.30.1",o(er),r.fn=Oe,r.min=Kue,r.max=Xue,r.now=Que,r.utc=p,r.unix=Ece,r.months=Ice,r.isDate=d,r.locale=Rc,r.invalid=x,r.duration=Sa,r.isMoment=I,r.weekdays=Nce,r.parseZone=_ce,r.localeData=wl,r.isDuration=Cb,r.monthsShort=Tce,r.weekdaysMin=Rce,r.defineLocale=EI,r.updateLocale=_ue,r.locales=Iue,r.weekdaysShort=Dce,r.normalizeUnits=jt,r.relativeTimeRounding=ode,r.relativeTimeThreshold=sde,r.calendarFormat=kle,r.prototype=Oe,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})})(Yst);function qst(){const[t,e]=D.useState(""),[n,r]=D.useState(""),[o,s]=D.useState(""),[i,a]=D.useState(""),[u,l]=D.useState(""),[c,d]=D.useState(""),[f,h]=D.useState(""),[p,m]=D.useState(!1),[g,v]=D.useState(!1),x=yx().productID,b=localStorage.getItem("ACCESS_TOKEN");console.log("productId",x);const C=Ao(),S=Tt(A=>A.USER.currentUser);console.log("user",S);const E=xr(),I=Tt(A=>A.MONEYCONFIG.configMoney);console.log("configMoney",I);const T=I==null?void 0:I.find(A=>A.type_config==="Create auction");D.useEffect(()=>{C(R3(b))},[]);const N=A=>{if(!t||!n||!o||!i||!u||!c||!f){Rt.error("Vui lòng điền tất cả các trường trong form!");return}const P=new Date(i),L=new Date(u),W=new Date(c),z=new Date(f);if(P>=L){Rt.error("Thời gian bắt đầu đăng ký phải nhỏ hơn thời gian kết thúc đăng ký!");return}if(L>=W){Rt.error("Thời gian kết thúc đăng ký phải nhỏ hơn thời gian bắt đầu đấu giá!");return}if(W>=z){Rt.error("Thời gian bắt đầu đấu giá phải nhỏ hơn thời gian kết thúc đấu giá!");return}let F={starting_price:o,price_step:n,auctionInfo:t,start_time:c,end_time:f,regitration_start_time:i,regitration_end_time:u,status:"not yet auctioned",host_id:S==null?void 0:S._id,product_id:x};m(!0),v(!1),C(D7e(F,b)).then(()=>{m(!1),e(""),s(""),r(""),a(""),l(""),d(""),h(""),E("/manage-auction")})},O=()=>{v(!0)};function $(A){return A==null?void 0:A.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}return w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsxs(Fs,{children:[w.jsx("h1",{children:"Tạo buổi đấu giá"}),w.jsxs(Vt,{children:[w.jsx(rt,{md:12,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Thông Tin Auction"}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thong tin dau gia"}),w.jsx(ve.Control,{as:"textarea",rows:3,placeholder:"Thông tin đấu giá",value:t,onChange:A=>e(A.target.value)})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Giá khởi điểm"}),w.jsx(ve.Control,{as:U0,thousandSeparator:!0,decimalSeparator:".",allowNegative:!1,placeholder:"Giá khởi điểm",value:o,onValueChange:A=>{const{value:P}=A;s(P)},suffix:" đ"})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Bước giá tối thiểu"}),w.jsx(ve.Control,{as:U0,thousandSeparator:!0,decimalSeparator:".",allowNegative:!1,placeholder:"Minimun Price Step",value:n,onValueChange:A=>{const{value:P}=A;r(P)},suffix:" đ"})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thời gian bắt đầu dang ki"}),w.jsx(ve.Control,{type:"datetime-local",onChange:A=>a(A.target.value)})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thời gian kết thúc dang ki"}),w.jsx(ve.Control,{type:"datetime-local",onChange:A=>l(A.target.value)})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thời gian bắt đầu"}),w.jsx(ve.Control,{type:"datetime-local",onChange:A=>d(A.target.value)})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thời gian kết thúc"}),w.jsx(ve.Control,{type:"datetime-local",onChange:A=>h(A.target.value)})]})]})})}),w.jsxs(rt,{xs:"auto",className:"mt-2",children:[w.jsx(vt,{variant:"primary",type:"submit",className:"me-2",onClick:O,children:"Create Auction"}),w.jsx(vt,{variant:"danger",onClick:()=>E(-1),children:"Cancel"})]})]})]}),w.jsxs(Zt,{show:g,onHide:()=>v(!1),children:[w.jsx(Zt.Header,{closeButton:!0,children:w.jsx(Zt.Title,{children:"Xác nhận tạo đấu giá"})}),w.jsxs(Zt.Body,{children:["Bạn có muốn tạo đấu giá với mức phí là"," ",$(T==null?void 0:T.money),"?"]}),w.jsxs(Zt.Footer,{children:[w.jsx(vt,{variant:"secondary",onClick:()=>v(!1),children:"Hủy"}),w.jsx(vt,{variant:"primary",onClick:N,children:"Xác nhận"})]})]}),p?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"overlay1"}),w.jsx("div",{className:"spinner-container1",children:w.jsx(z0e,{})})]}):""]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}function Yse(){const t=localStorage.getItem("ACCESS_TOKEN"),e=Tt(l=>l.USER.currentUser);console.log("userPaid",e);const[n,r]=D.useState(""),o=Ao();xr();const[s,i]=D.useState({amount:0}),a=l=>{const c=parseFloat(l);if(isNaN(c))console.error("Giá trị nhập không phải là số.");else{const d=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(c),f={...s,amount:d};i(f)}};function u(){let l={user_id:e==null?void 0:e._id,type_report:"money",description:`${e==null?void 0:e.username} - ${n}`,note:""};o(Pot(l,t)).then(()=>{r(""),i({...s,amount:0})})}return w.jsx("div",{className:"body-container",children:w.jsx("div",{className:"container",style:{marginBottom:"20px"},children:w.jsx(Fs,{children:w.jsxs(Vt,{className:"justify-content-md-center",mb:4,children:[w.jsx(rt,{xs:12,md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Nạp tiền vào Ví "}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Số tiền nạp vào Ví"}),w.jsx(ve.Control,{as:U0,thousandSeparator:!0,decimalSeparator:".",allowNegative:!1,placeholder:"Nhập số tiền đấu giá",value:n,onValueChange:l=>{const{value:c}=l;r(c)},suffix:" đ"})]}),w.jsx(vt,{color:"primary",md:2,onClick:()=>a(parseFloat(n)),children:"Add to card"})]})})}),w.jsx(rt,{xs:12,md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Thông Tin Thanh Toán"}),w.jsxs(me.Text,{children:["Tên khách hàng: ",e.fullName]}),w.jsxs(me.Text,{children:["Số tiền: ",s.amount]}),w.jsxs(me.Text,{children:["Nội dung chuyển khoản: ",w.jsx("strong",{children:e.username})," -"," ",w.jsx("strong",{children:s.amount})]}),w.jsx(vt,{color:"primary",md:2,onClick:u,children:"Submit Order"})]})})})]})})})})}const r4=t=>{const{deleteData:e=[],showProp:n,handleClose:r}=t,o=async()=>{};return w.jsx(w.Fragment,{children:w.jsxs(Zt,{show:n,onHide:r,backdrop:"static",keyboard:!1,children:[w.jsx(Zt.Header,{closeButton:!0,children:w.jsxs(Zt.Title,{children:["Delete Auction ",e.id]})}),w.jsx(Zt.Body,{children:w.jsxs("div",{children:["You want to delete auction: ",e.name]})}),w.jsxs(Zt.Footer,{children:[w.jsx(vt,{variant:"secondary",onClick:r,children:"Close"}),w.jsx(vt,{variant:"primary",onClick:o,children:"Confirm"})]})]})})};r4.propTypes={deleteData:ye.shape({id:ye.number.isRequired,name:ye.string.isRequired}).isRequired,showProp:ye.bool.isRequired,handleClose:ye.func.isRequired};const uy=({data:t=[],onUpdate:e,onDelete:n})=>{const r=s=>{if(!s)return"";const i=new Date(s);return Qm(i,"dd/MM/yyyy - HH:mm")},o=xr();return w.jsxs(Vt,{children:[w.jsxs(rt,{xs:"auto",children:[" ",w.jsxs(ve,{className:"d-flex mb-3",role:"search",children:[w.jsx(ve.Control,{className:"me-2",type:"search",placeholder:"Search Name Auction","aria-label":"Search"}),w.jsx(vt,{variant:"outline-success",type:"submit",children:"Search"})]})]}),w.jsxs(Vh,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"ID"}),w.jsx("th",{children:"Name"}),w.jsx("th",{children:"Regitration"}),w.jsx("th",{children:"Start Time"}),w.jsx("th",{children:"End Time"}),w.jsx("th",{children:"Status"}),w.jsx("th",{children:"Actions"})]})}),w.jsx("tbody",{children:t==null?void 0:t.map((s,i)=>{var a;return w.jsxs("tr",{children:[w.jsx("td",{children:i+1}),w.jsx("td",{children:(a=s==null?void 0:s.product_id)==null?void 0:a.name}),w.jsxs("td",{children:[r(s==null?void 0:s.regitration_start_time)," -"," ",r(s==null?void 0:s.regitration_end_time)]}),w.jsx("td",{children:r(s==null?void 0:s.start_time)}),w.jsx("td",{children:r(s==null?void 0:s.end_time)}),w.jsx("td",{children:w.jsx(Jf,{bg:"danger",children:s==null?void 0:s.status})}),w.jsxs("td",{children:[e&&w.jsx(vt,{variant:"warning",onClick:()=>e(s),children:"Detail"})," ",(s==null?void 0:s.status)==="auctioning"&&w.jsx(vt,{variant:"success",onClick:()=>o(`/join-room-auction/${s==null?void 0:s._id}`),children:"Join Auction"}),(s==null?void 0:s.status)==="auctioned"&&w.jsx(vt,{variant:"success",onClick:()=>o(`/join-room-auction/${s==null?void 0:s._id}`),children:"History Auction"})]})]},i)})})]})]})};uy.propTypes={data:ye.arrayOf(ye.shape({id:ye.number,name:ye.string,status:ye.string})),onUpdate:ye.func,onDelete:ye.func};const qse=t=>{const{chuaDienRaContent:e,sapDienRaContent:n,dangDienRaContent:r,daDienRaContent:o}=t,[s,i]=D.useState("chuaDienRa");return w.jsxs($a.Container,{id:"left-tabs-example",activeKey:s,onSelect:a=>i(a),children:[w.jsxs(pn,{variant:"pills",className:"flex-row mb-3",children:[w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"chuaDienRa",children:"Chưa diễn ra"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"sapDienRa",children:"Sắp diễn ra"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"dangDienRa",children:"Đang diễn ra"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"daDienRa",children:"Đã diễn ra"})})]}),w.jsxs($a.Content,{children:[w.jsx($a.Pane,{eventKey:"chuaDienRa",children:e}),w.jsx($a.Pane,{eventKey:"sapDienRa",children:n}),w.jsx($a.Pane,{eventKey:"dangDienRa",children:r}),w.jsx($a.Pane,{eventKey:"daDienRa",children:o})]})]})};qse.propTypes={chuaDienRaContent:ye.node,sapDienRaContent:ye.node,dangDienRaContent:ye.node,daDienRaContent:ye.node};const Kst=ee.memo(qse);function Xst(){const[t,e]=D.useState(!1),[n,r]=D.useState({}),o=localStorage.getItem("ACCESS_TOKEN"),s=Tt(m=>m.AUCTION.auctions),i=Tt(m=>m.AUCTION.notYetAuction),a=Tt(m=>m.AUCTION.aboutToAuction),u=Tt(m=>m.AUCTION.auctioning),l=Tt(m=>m.AUCTION.auctined);console.log("auctions",s),console.log("notYetAuction",i),console.log("aboutToAuction",a),console.log("auctioning",u),console.log("auctined",l);const c=Ao(),d=Tt(m=>m.USER.currentUser);console.log("user",d),D.useEffect(()=>{c(pf(o)),c(TV(d==null?void 0:d._id,o)),c(DV(d==null?void 0:d._id,o)),c(OV(d==null?void 0:d._id,o)),c(AV(d==null?void 0:d._id,o))},[d]);const f=xr(),h=m=>{console.log("Delete item with id:",m._id),r(m),e(!0)},p=m=>{f(`/auction-detail/${m._id}`),console.log("Update user at id:",m._id)};return D.useEffect(()=>{const m=Kl("https://be-orchid-auction.onrender.com");return m.on("auction_status_changed",()=>{c(TV(d==null?void 0:d._id,o)),c(DV(d==null?void 0:d._id,o)),c(OV(d==null?void 0:d._id,o)),c(AV(d==null?void 0:d._id,o)),console.log("Auction status changed")}),()=>{m.disconnect()}},[]),w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsxs(Vt,{children:[w.jsx(rt,{xs:12,children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{children:w.jsx("strong",{children:"Auction"})}),w.jsxs(me.Body,{children:[w.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[w.jsx("p",{className:"text-medium-emphasis small mb-0",children:"Display auctions in the system"}),w.jsx(vt,{variant:"success",onClick:()=>{f("/create-auction")},children:"Create New Auction"})]}),w.jsx(Kst,{chuaDienRaContent:w.jsx(uy,{data:i,onUpdate:p,onDelete:h}),sapDienRaContent:w.jsx(uy,{data:a,onUpdate:p,onDelete:h}),dangDienRaContent:w.jsx(uy,{data:u,onUpdate:p,onDelete:h}),daDienRaContent:w.jsx(uy,{data:l,onUpdate:p,onDelete:h})})]})]})}),w.jsx(r4,{showProp:t,handleClose:()=>e(!1),deleteData:n})]})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}const Qst=()=>{var a,u,l,c,d,f;const{auctionId:t}=yx(),e=xr(),n=Tt(h=>h.AUCTION.auctions);console.log("aucctionsss",n);const r=localStorage.getItem("ACCESS_TOKEN"),o=Ao(),[s,i]=D.useState("");return D.useEffect(()=>{o(pf(r))},[t]),D.useEffect(()=>{const h=n.find(p=>p._id===t);i(h)},[n,t]),console.log("auctionDetail",s),w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsx(Vt,{children:w.jsx(rt,{xs:12,children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{children:w.jsxs("strong",{children:["Thông Tin Chi Tiết Autionn với ID ",t," "]})}),w.jsx(me.Body,{children:w.jsxs(ve,{children:[w.jsxs(Vt,{className:"mb-4",children:[w.jsx(rt,{md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Ảnh Sản Phẩm"}),w.jsx(ps,{children:(u=(a=s==null?void 0:s.product_id)==null?void 0:a.image)==null?void 0:u.map((h,p)=>w.jsx(ps.Item,{children:w.jsx("img",{className:"d-block w-100",src:h,alt:`Slide ${p+1}`,style:{objectFit:"cover",height:"400px",width:"100%"}})},p))})]})})}),w.jsx(rt,{md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Video Sản Phẩm"}),w.jsx("div",{style:{position:"relative",marginTop:"20px"},children:w.jsxs("video",{controls:!0,style:{maxWidth:"100%"},children:[(c=(l=s==null?void 0:s.product_id)==null?void 0:l.video)==null?void 0:c.map((h,p)=>w.jsx("source",{src:h,type:"video/mp4"},p)),"Your browser does not support the video tag."]})})]})})})]}),w.jsxs(Vt,{children:[w.jsx(rt,{md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Thông Tin Sản Phẩm"}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Tên sản phẩm"}),w.jsx(ve.Control,{type:"text",placeholder:"Nhập tên sản phẩm",readOnly:t,value:(d=s==null?void 0:s.product_id)==null?void 0:d.name})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Mô tả"}),w.jsx(ve.Control,{as:"textarea",rows:3,placeholder:"Mô tả sản phẩm",readOnly:t,value:(f=s==null?void 0:s.product_id)==null?void 0:f.description})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Giá khởi điểm"}),w.jsx(ve.Control,{type:"number",placeholder:"Giá khởi điểm",readOnly:t,value:s==null?void 0:s.starting_price})]})]})})}),w.jsx(rt,{md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Thông Tin Auction"}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thong tin dau gia"}),w.jsx(ve.Control,{as:"textarea",readOnly:t,rows:3,placeholder:"Thông tin đấu giá",value:s==null?void 0:s.auctionInfo})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Bước giá tối thiểu"}),w.jsx(ve.Control,{type:"number",readOnly:t,placeholder:"Minimun Price Step",value:s==null?void 0:s.price_step})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thời gian bắt đầu đăng kí"}),w.jsx(ve.Control,{type:"datetime-local",readOnly:t,value:s!=null&&s.regitration_start_time?s.regitration_start_time.substring(0,16):""})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thời gian kết thúc đăng kí"}),w.jsx(ve.Control,{type:"datetime-local",readOnly:t,value:s!=null&&s.regitration_end_time?s.regitration_end_time.substring(0,16):""})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thời gian bắt đầu"}),w.jsx(ve.Control,{type:"datetime-local",readOnly:t,value:s!=null&&s.start_time?s.start_time.substring(0,16):""})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Thời gian kết thúc"}),w.jsx(ve.Control,{type:"datetime-local",readOnly:t,value:s!=null&&s.end_time?s.end_time.substring(0,16):""})]})]})})}),w.jsx(rt,{xs:"auto",className:"mt-2",children:w.jsx(vt,{variant:"success",onClick:()=>e(-1),children:"Back"})})]})]})})]})})})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})},Jst=()=>{const[t,e]=D.useState({avatar:"https://cloudfront-us-east-1.images.arcpublishing.com/gray/OKL3YQRDPRGRDKEM46PFW67ZMQ.jpg",userName:"User01",email:"user01@example.com",fullName:"John Doe",address:"123 Main Street, Anytown, USA",phoneNumber:"+123456789",password:"123456789",Moneywallet:"200"});D.useState(!1);const n=localStorage.getItem("ACCESS_TOKEN"),r=Tt(u=>u.USER.currentUser);console.log("user",r);const o=Ao();D.useEffect(()=>{o(J_(r==null?void 0:r._id,n))},[r]);const s=Tt(u=>u.WALLET.wallet);console.log("cart",s);const i=()=>{console.log("Updated user info",t)};function a(u){return u==null?void 0:u.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}return w.jsx(Fs,{children:w.jsxs(Vt,{className:"mb-3",children:[w.jsx(rt,{md:4,children:w.jsxs(me,{children:[w.jsx("div",{className:"d-flex justify-content-center",children:w.jsx(me.Img,{variant:"center",src:r==null?void 0:r.image,style:{width:"200px",height:"200px",borderRadius:"50%",objectFit:"cover"},className:"mt-3"})}),w.jsxs(me.Body,{children:[w.jsxs(ve.Group,{controlId:"formFile",className:"mb-2 d-flex align-items-center",children:[w.jsx(ve.Label,{className:"mb-0 me-3",children:"Avatar"}),w.jsx(ve.Control,{type:"file"})]}),w.jsx(vt,{variant:"primary",onClick:i,children:"Update"})]})]})}),w.jsx(rt,{md:8,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{className:"mb-3",children:"Thông Tin Cá Nhân"}),w.jsxs(me.Text,{children:[w.jsx("strong",{children:"Tên đăng nhập:"})," ",r==null?void 0:r.username]}),w.jsxs(me.Text,{children:[w.jsx("strong",{children:"Họ và Tên:"})," ",r==null?void 0:r.fullName]}),w.jsxs(me.Text,{children:[w.jsx("strong",{children:"Email:"})," ",r==null?void 0:r.email]}),w.jsxs(me.Text,{children:[w.jsx("strong",{children:"Địa chỉ:"})," ",r==null?void 0:r.address]}),w.jsxs(me.Text,{children:[w.jsx("strong",{children:"Số điện thoại:"})," ",r==null?void 0:r.phone]}),w.jsxs(me.Text,{children:[w.jsx("strong",{children:"Tiền trong ví:"})," ",a(s==null?void 0:s.balance)]})]})})})]})})},Kse=t=>{const{deleteData:e=[],showProp:n,handleClose:r}=t,o=async()=>{};return w.jsx(w.Fragment,{children:w.jsxs(Zt,{show:n,onHide:r,backdrop:"static",keyboard:!1,children:[w.jsx(Zt.Header,{closeButton:!0,children:w.jsxs(Zt.Title,{children:["Cancel registration Auction ",e.id]})}),w.jsx(Zt.Body,{children:w.jsxs("div",{children:["You want to cancel registration auction: ",e.name]})}),w.jsxs(Zt.Footer,{children:[w.jsx(vt,{variant:"secondary",onClick:r,children:"Close"}),w.jsx(vt,{variant:"primary",onClick:o,children:"Confirm"})]})]})})};Kse.propTypes={deleteData:ye.shape({id:ye.number,name:ye.string}).isRequired,showProp:ye.bool.isRequired,handleClose:ye.func.isRequired};const Ek=({data:t=[],onUpdate:e,onDelete:n})=>{const r=xr();return w.jsxs(Vt,{children:[w.jsxs(rt,{xs:"auto",children:[" ",w.jsxs(ve,{className:"d-flex mb-3",role:"search",children:[w.jsx(ve.Control,{className:"me-2",type:"search",placeholder:"Search Name Auction","aria-label":"Search"}),w.jsx(vt,{variant:"outline-success",type:"submit",children:"Search"})]})]}),w.jsxs(Vh,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Time"}),w.jsx("th",{children:"Name"}),w.jsx("th",{children:"Status"}),w.jsx("th",{children:"Actions"})]})}),w.jsx("tbody",{children:t.map((o,s)=>{var i;return w.jsxs("tr",{children:[w.jsx("td",{children:(o==null?void 0:o.status)==="not yet auctioned"?w.jsx(Nd,{date:new Date(o==null?void 0:o.regitration_end_time).getTime(),renderer:({days:a,hours:u,minutes:l,seconds:c,completed:d})=>d?"Expired":w.jsxs(w.Fragment,{children:[a," days ",u," hours ",l," minutes"," ",c," seconds"," ",w.jsx(bT,{style:{color:"blue"}})," kết thúc đăng ký"]})}):o.status==="about to auction"?w.jsx(Nd,{date:new Date(o==null?void 0:o.start_time).getTime(),renderer:({days:a,hours:u,minutes:l,seconds:c,completed:d})=>d?"Expired":w.jsxs(w.Fragment,{children:[a," days ",u," hours ",l," minutes"," ",c," seconds"," ",w.jsx(bT,{style:{color:"blue"}})," bắt đầu đấu giá"]})}):w.jsx(Nd,{date:new Date(o==null?void 0:o.end_time).getTime(),renderer:({days:a,hours:u,minutes:l,seconds:c,completed:d})=>d?"Expired":w.jsxs(w.Fragment,{children:[a," days ",u," hours ",l," minutes"," ",c," seconds"," ",w.jsx(bT,{style:{color:"blue"}})," kết thúc đấu giá"]})})}),w.jsx("td",{children:(i=o==null?void 0:o.product)==null?void 0:i.name}),w.jsx("td",{children:o.status==="about to auction"?w.jsx(Jf,{bg:"warning",children:"Sắp diễn ra"}):o.status==="not yet auctioned"?w.jsx(Jf,{bg:"secondary",children:"Chưa diễn ra"}):w.jsx(Jf,{bg:"success",children:"Đang diễn ra"})}),w.jsxs("td",{children:[e&&w.jsx(vt,{variant:"success",onClick:()=>e(o==null?void 0:o.auction_id),children:"Detail"})," ",(o==null?void 0:o.status)==="auctioning"?w.jsx(vt,{variant:"success",onClick:()=>r(`/join-room-auction/${o==null?void 0:o.auction_id}`),children:"Join the room"}):w.jsx(w.Fragment,{})]})]},s)})})]})]})};Ek.propTypes={data:ye.arrayOf(ye.shape({id:ye.number,name:ye.string,status:ye.string})),onUpdate:ye.func,onDelete:ye.func};const Xse=t=>{const{chuaDienRaContent:e,sapDienRaContent:n,dangDienRaContent:r}=t,[o,s]=D.useState("chuaDienRa");return w.jsxs($a.Container,{id:"left-tabs-example",activeKey:o,onSelect:i=>s(i),children:[w.jsxs(pn,{variant:"pills",className:"flex-row mb-3",children:[w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"chuaDienRa",children:"Chưa diễn ra"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"sapDienRa",children:"Sắp diễn ra"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"dangDienRa",children:"Đang diễn ra"})})]}),w.jsxs($a.Content,{children:[w.jsx($a.Pane,{eventKey:"chuaDienRa",children:e}),w.jsx($a.Pane,{eventKey:"sapDienRa",children:n}),w.jsx($a.Pane,{eventKey:"dangDienRa",children:r})]})]})};Xse.propTypes={chuaDienRaContent:ye.node,sapDienRaContent:ye.node,dangDienRaContent:ye.node,daDienRaContent:ye.node};const Zst=ee.memo(Xse);function eit(){const[t,e]=D.useState(!1),[n,r]=D.useState({}),o=xr(),s=Tt(h=>h.USER.currentUser),i=localStorage.getItem("ACCESS_TOKEN"),a=Tt(h=>h.AUCTION.notYetAuctionMember),u=Tt(h=>h.AUCTION.aboutToAuctionMember),l=Tt(h=>h.AUCTION.auctioningMember),c=Tt(h=>h.AUCTION.auctinedMember);console.log("not yet",a),console.log("about to",u),console.log("aucting",l),console.log("auctioned",c);const d=h=>{console.log("Delete item with id:",h.id),r(h),e(!0)},f=h=>{o(`/auction-detail/${h}`),console.log("Update user at id:",h.id)};return D.useEffect(()=>{const h=Kl("https://be-orchid-auction.onrender.com");return h.on("auction_status_changed",()=>{dispatch(IO(s==null?void 0:s._id,i)),dispatch(TO(s==null?void 0:s._id,i)),dispatch(NO(s==null?void 0:s._id,i)),dispatch(DO(s==null?void 0:s._id,i)),console.log("Auction status changed")}),()=>{h.disconnect()}},[]),w.jsxs(Vt,{children:[w.jsx(rt,{xs:12,children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{children:w.jsx("strong",{children:"Hoa lan chờ đấu giá"})}),w.jsx(me.Body,{children:w.jsx(Zst,{chuaDienRaContent:w.jsx(Ek,{data:a,onUpdate:f,onDelete:d}),sapDienRaContent:w.jsx(Ek,{data:u,onUpdate:f}),dangDienRaContent:w.jsx(Ek,{data:l,onUpdate:f})})})]})}),w.jsx(Kse,{showProp:t,handleClose:()=>e(!1),deleteData:n})]})}const tit=()=>{const t=xr(),[e,n]=D.useState(!1),[r,o]=D.useState({}),s=Tt(i=>i.AUCTION.auctinedMember);return w.jsx(Vt,{children:w.jsxs(rt,{xs:12,children:[w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{children:w.jsx("strong",{children:"Lịch sử đấu giá"})}),w.jsx(me.Body,{children:w.jsxs(Vt,{children:[w.jsx(rt,{xs:"auto",children:w.jsxs(ve,{className:"d-flex mb-3",role:"search",children:[w.jsx(ve.Control,{className:"me-2",type:"search",placeholder:"Search Name Auction","aria-label":"Search"}),w.jsx(vt,{variant:"outline-success",type:"submit",children:"Search"})]})}),w.jsxs(Vh,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Idex"}),w.jsx("th",{children:"Name"}),w.jsx("th",{children:"Status"}),w.jsx("th",{children:"Actions"})]})}),w.jsx("tbody",{children:s==null?void 0:s.map((i,a)=>{var u;return w.jsxs("tr",{children:[w.jsx("td",{children:a+1}),w.jsx("td",{children:(u=i==null?void 0:i.product)==null?void 0:u.name}),w.jsx("td",{children:w.jsx(Jf,{bg:"danger",children:i==null?void 0:i.status})}),w.jsx("td",{children:w.jsx(vt,{variant:"success",onClick:()=>t(`/join-room-auction/${i==null?void 0:i.auction_id}`),children:"Detail"})})]},a)})})]})]})})]}),w.jsx(r4,{showProp:e,handleClose:()=>n(!1),deleteData:r})]})})},nit=()=>{const t=[{id:1,money:2e4,send:"2023-03-20",accept:"2023-03-21"},{id:2,money:1e4,send:"2023-03-25",accept:"2023-03-25"}],e=n=>{const r={year:"numeric",month:"long",day:"numeric"};return new Date(n).toLocaleDateString(void 0,r)};return w.jsx(Vt,{children:w.jsx(rt,{xs:12,children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{children:w.jsx("strong",{children:"Lịch sử giao dịch"})}),w.jsx(me.Body,{children:w.jsx(Vt,{children:w.jsxs(Vh,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"ID"}),w.jsx("th",{children:"Money"}),w.jsx("th",{children:"Date Send Request"}),w.jsx("th",{children:"Date Accept"})]})}),w.jsx("tbody",{children:t.map((n,r)=>w.jsxs("tr",{children:[w.jsx("td",{children:n.id}),w.jsx("td",{children:n.money}),w.jsx("td",{children:e(n.send)}),w.jsx("td",{children:e(n.accept)})]},r))})]})})})]})})})},rit=()=>{const t=r=>{const o={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return new Date(r).toLocaleDateString(void 0,o)};function e(r){return r==null?void 0:r.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}const n=Tt(r=>r.WALLET.walletHistory);return console.log("history",n),w.jsx(Vt,{children:w.jsx(rt,{xs:12,children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{children:w.jsx("strong",{children:"Lịch sử nạp tiền"})}),w.jsx(me.Body,{children:w.jsx(Vt,{children:w.jsxs(Vh,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Index"}),w.jsx("th",{children:"Money"}),w.jsx("th",{children:"Date Accept"})]})}),w.jsx("tbody",{children:n==null?void 0:n.map((r,o)=>w.jsxs("tr",{children:[w.jsx("td",{children:++o}),w.jsxs("td",{style:{color:`${(r==null?void 0:r.type)==="deposit"?"green":"red"}`},children:[(r==null?void 0:r.type)==="deposit"?"+":"-",e(r==null?void 0:r.amount)]}),w.jsx("td",{children:t(r==null?void 0:r.timestamp)})]},o))})]})})})]})})})};function oit(){const[t,e]=D.useState("account");D.useState(!1),D.useState(!1);const n=localStorage.getItem("ACCESS_TOKEN"),r=Tt(i=>i.USER.currentUser);console.log("user",r);const o=Ao();D.useEffect(()=>{const i=Kl("https://be-orchid-auction.onrender.com");return i.on("auction_status_changed",()=>{o(IO(r==null?void 0:r._id,n)),o(TO(r==null?void 0:r._id,n)),o(NO(r==null?void 0:r._id,n)),o(DO(r==null?void 0:r._id,n)),console.log("Auction status changed")}),()=>{i.disconnect()}},[]),D.useEffect(()=>{o(J_(r==null?void 0:r._id,n)),o(Nse(r==null?void 0:r._id,n)),o(IO(r==null?void 0:r._id,n)),o(TO(r==null?void 0:r._id,n)),o(NO(r==null?void 0:r._id,n)),o(DO(r==null?void 0:r._id,n))},[r]);const s=()=>{switch(t){case"account":return w.jsx(Jst,{});case"auction":return w.jsx(eit,{});case"history":return w.jsx(tit,{});case"nap tien":return w.jsx(Yse,{});case"lich su nap tien":return w.jsx(rit,{});case"lich su giao dich":return w.jsx(nit,{});default:return w.jsx("div",{children:"Chọn một mục"})}};return w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsx(Fs,{fluid:!0,className:"mt-4",children:w.jsxs(Vt,{children:[w.jsx(rt,{md:3,className:"mb-3",children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{children:w.jsx("strong",{children:"Thông Tin Chi Tiết "})}),w.jsx(me.Body,{children:w.jsxs(pn,{className:"flex-column",variant:"pills",defaultActiveKey:"account",children:[w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"account",onClick:()=>e("account"),children:"Thông tin tài khoản"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"nap tien",onClick:()=>e("nap tien"),children:"Nạp tiền"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"auction",onClick:()=>e("auction"),children:"Hoa lan chờ đấu giá"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"history",onClick:()=>e("history"),children:"Lịch sử đấu giá"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"lich su nap tien",onClick:()=>e("lich su nap tien"),children:"Lịch sử nạp tiền"})}),w.jsx(pn.Item,{children:w.jsx(pn.Link,{eventKey:"lich su giao dich",onClick:()=>e("lich su giao dich"),children:"Lịch sử giao dịch"})})]})})]})}),w.jsx(rt,{md:9,children:s()})]})})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Qse;function qe(){return Qse.apply(null,arguments)}function sit(t){Qse=t}function ru(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function ah(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Sn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o4(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Sn(t,e))return!1;return!0}function zs(t){return t===void 0}function fc(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function cb(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Jse(t,e){var n=[],r,o=t.length;for(r=0;r<o;++r)n.push(e(t[r],r));return n}function ad(t,e){for(var n in e)Sn(e,n)&&(t[n]=e[n]);return Sn(e,"toString")&&(t.toString=e.toString),Sn(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ml(t,e,n,r){return wie(t,e,n,r,!0).utc()}function iit(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ut(t){return t._pf==null&&(t._pf=iit()),t._pf}var TA;Array.prototype.some?TA=Array.prototype.some:TA=function(t){var e=Object(this),n=e.length>>>0,r;for(r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function s4(t){var e=null,n=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=Ut(t),n=TA.call(e.parsedDateParts,function(o){return o!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function eI(t){var e=ml(NaN);return t!=null?ad(Ut(e),t):Ut(e).userInvalidated=!0,e}var O5=qe.momentProperties=[],YN=!1;function i4(t,e){var n,r,o,s=O5.length;if(zs(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),zs(e._i)||(t._i=e._i),zs(e._f)||(t._f=e._f),zs(e._l)||(t._l=e._l),zs(e._strict)||(t._strict=e._strict),zs(e._tzm)||(t._tzm=e._tzm),zs(e._isUTC)||(t._isUTC=e._isUTC),zs(e._offset)||(t._offset=e._offset),zs(e._pf)||(t._pf=Ut(e)),zs(e._locale)||(t._locale=e._locale),s>0)for(n=0;n<s;n++)r=O5[n],o=e[r],zs(o)||(t[r]=o);return t}function db(t){i4(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),YN===!1&&(YN=!0,qe.updateOffset(this),YN=!1)}function ou(t){return t instanceof db||t!=null&&t._isAMomentObject!=null}function Zse(t){qe.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function wa(t,e){var n=!0;return ad(function(){if(qe.deprecationHandler!=null&&qe.deprecationHandler(null,t),n){var r=[],o,s,i,a=arguments.length;for(s=0;s<a;s++){if(o="",typeof arguments[s]=="object"){o+=`
[`+s+"] ";for(i in arguments[0])Sn(arguments[0],i)&&(o+=i+": "+arguments[0][i]+", ");o=o.slice(0,-2)}else o=arguments[s];r.push(o)}Zse(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var A5={};function eie(t,e){qe.deprecationHandler!=null&&qe.deprecationHandler(t,e),A5[t]||(Zse(e),A5[t]=!0)}qe.suppressDeprecationWarnings=!1;qe.deprecationHandler=null;function gl(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function ait(t){var e,n;for(n in t)Sn(t,n)&&(e=t[n],gl(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function NA(t,e){var n=ad({},t),r;for(r in e)Sn(e,r)&&(ah(t[r])&&ah(e[r])?(n[r]={},ad(n[r],t[r]),ad(n[r],e[r])):e[r]!=null?n[r]=e[r]:delete n[r]);for(r in t)Sn(t,r)&&!Sn(e,r)&&ah(t[r])&&(n[r]=ad({},n[r]));return n}function a4(t){t!=null&&this.set(t)}var DA;Object.keys?DA=Object.keys:DA=function(t){var e,n=[];for(e in t)Sn(t,e)&&n.push(e);return n};var uit={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function lit(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return gl(r)?r.call(e,n):r}function al(t,e,n){var r=""+Math.abs(t),o=e-r.length,s=t>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+r}var u4=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Vw=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,qN={},Nm={};function bt(t,e,n,r){var o=r;typeof r=="string"&&(o=function(){return this[r]()}),t&&(Nm[t]=o),e&&(Nm[e[0]]=function(){return al(o.apply(this,arguments),e[1],e[2])}),n&&(Nm[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function cit(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function dit(t){var e=t.match(u4),n,r;for(n=0,r=e.length;n<r;n++)Nm[e[n]]?e[n]=Nm[e[n]]:e[n]=cit(e[n]);return function(o){var s="",i;for(i=0;i<r;i++)s+=gl(e[i])?e[i].call(o,t):e[i];return s}}function _k(t,e){return t.isValid()?(e=tie(e,t.localeData()),qN[e]=qN[e]||dit(e),qN[e](t)):t.localeData().invalidDate()}function tie(t,e){var n=5;function r(o){return e.longDateFormat(o)||o}for(Vw.lastIndex=0;n>=0&&Vw.test(t);)t=t.replace(Vw,r),Vw.lastIndex=0,n-=1;return t}var fit={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function hit(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(u4).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var pit="Invalid date";function mit(){return this._invalidDate}var git="%d",vit=/\d{1,2}/;function yit(t){return this._ordinal.replace("%d",t)}var xit={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function bit(t,e,n,r){var o=this._relativeTime[n];return gl(o)?o(t,e,n,r):o.replace(/%d/i,t)}function wit(t,e){var n=this._relativeTime[t>0?"future":"past"];return gl(n)?n(e):n.replace(/%s/i,e)}var $5={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ka(t){return typeof t=="string"?$5[t]||$5[t.toLowerCase()]:void 0}function l4(t){var e={},n,r;for(r in t)Sn(t,r)&&(n=ka(r),n&&(e[n]=t[r]));return e}var kit={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Cit(t){var e=[],n;for(n in t)Sn(t,n)&&e.push({unit:n,priority:kit[n]});return e.sort(function(r,o){return r.priority-o.priority}),e}var nie=/\d/,Li=/\d\d/,rie=/\d{3}/,c4=/\d{4}/,tI=/[+-]?\d{6}/,lr=/\d\d?/,oie=/\d\d\d\d?/,sie=/\d\d\d\d\d\d?/,nI=/\d{1,3}/,d4=/\d{1,4}/,rI=/[+-]?\d{1,6}/,nv=/\d+/,oI=/[+-]?\d+/,Sit=/Z|[+-]\d\d:?\d\d/gi,sI=/Z|[+-]\d\d(?::?\d\d)?/gi,Eit=/[+-]?\d+(\.\d{1,3})?/,fb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,rv=/^[1-9]\d?/,f4=/^([1-9]\d|\d)/,U2;U2={};function tt(t,e,n){U2[t]=gl(e)?e:function(r,o){return r&&n?n:e}}function _it(t,e){return Sn(U2,t)?U2[t](e._strict,e._locale):new RegExp(Iit(t))}function Iit(t){return Xl(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,r,o,s){return n||r||o||s}))}function Xl(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function qi(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function rn(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=qi(e)),n}var RA={};function Wn(t,e){var n,r=e,o;for(typeof t=="string"&&(t=[t]),fc(e)&&(r=function(s,i){i[e]=rn(s)}),o=t.length,n=0;n<o;n++)RA[t[n]]=r}function hb(t,e){Wn(t,function(n,r,o,s){o._w=o._w||{},e(n,o._w,o,s)})}function Tit(t,e,n){e!=null&&Sn(RA,t)&&RA[t](e,n._a,n,t)}function iI(t){return t%4===0&&t%100!==0||t%400===0}var gs=0,Ul=1,Ru=2,vo=3,Va=4,Vl=5,Kf=6,Nit=7,Dit=8;bt("Y",0,0,function(){var t=this.year();return t<=9999?al(t,4):"+"+t});bt(0,["YY",2],0,function(){return this.year()%100});bt(0,["YYYY",4],0,"year");bt(0,["YYYYY",5],0,"year");bt(0,["YYYYYY",6,!0],0,"year");tt("Y",oI);tt("YY",lr,Li);tt("YYYY",d4,c4);tt("YYYYY",rI,tI);tt("YYYYYY",rI,tI);Wn(["YYYYY","YYYYYY"],gs);Wn("YYYY",function(t,e){e[gs]=t.length===2?qe.parseTwoDigitYear(t):rn(t)});Wn("YY",function(t,e){e[gs]=qe.parseTwoDigitYear(t)});Wn("Y",function(t,e){e[gs]=parseInt(t,10)});function Ry(t){return iI(t)?366:365}qe.parseTwoDigitYear=function(t){return rn(t)+(rn(t)>68?1900:2e3)};var iie=ov("FullYear",!0);function Rit(){return iI(this.year())}function ov(t,e){return function(n){return n!=null?(aie(this,t,n),qe.updateOffset(this,e),this):V0(this,t)}}function V0(t,e){if(!t.isValid())return NaN;var n=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function aie(t,e,n){var r,o,s,i,a;if(!(!t.isValid()||isNaN(n))){switch(r=t._d,o=t._isUTC,e){case"Milliseconds":return void(o?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(o?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(o?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(o?r.setUTCHours(n):r.setHours(n));case"Date":return void(o?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}s=n,i=t.month(),a=t.date(),a=a===29&&i===1&&!iI(s)?28:a,o?r.setUTCFullYear(s,i,a):r.setFullYear(s,i,a)}}function Oit(t){return t=ka(t),gl(this[t])?this[t]():this}function Ait(t,e){if(typeof t=="object"){t=l4(t);var n=Cit(t),r,o=n.length;for(r=0;r<o;r++)this[n[r].unit](t[n[r].unit])}else if(t=ka(t),gl(this[t]))return this[t](e);return this}function $it(t,e){return(t%e+e)%e}var Ur;Array.prototype.indexOf?Ur=Array.prototype.indexOf:Ur=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function h4(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=$it(e,12);return t+=(e-n)/12,n===1?iI(t)?29:28:31-n%7%2}bt("M",["MM",2],"Mo",function(){return this.month()+1});bt("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});bt("MMMM",0,0,function(t){return this.localeData().months(this,t)});tt("M",lr,rv);tt("MM",lr,Li);tt("MMM",function(t,e){return e.monthsShortRegex(t)});tt("MMMM",function(t,e){return e.monthsRegex(t)});Wn(["M","MM"],function(t,e){e[Ul]=rn(t)-1});Wn(["MMM","MMMM"],function(t,e,n,r){var o=n._locale.monthsParse(t,r,n._strict);o!=null?e[Ul]=o:Ut(n).invalidMonth=t});var Mit="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),uie="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),lie=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pit=fb,Fit=fb;function Lit(t,e){return t?ru(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||lie).test(e)?"format":"standalone"][t.month()]:ru(this._months)?this._months:this._months.standalone}function Bit(t,e){return t?ru(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[lie.test(e)?"format":"standalone"][t.month()]:ru(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function jit(t,e,n){var r,o,s,i=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=ml([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?e==="MMM"?(o=Ur.call(this._shortMonthsParse,i),o!==-1?o:null):(o=Ur.call(this._longMonthsParse,i),o!==-1?o:null):e==="MMM"?(o=Ur.call(this._shortMonthsParse,i),o!==-1?o:(o=Ur.call(this._longMonthsParse,i),o!==-1?o:null)):(o=Ur.call(this._longMonthsParse,i),o!==-1?o:(o=Ur.call(this._shortMonthsParse,i),o!==-1?o:null))}function Wit(t,e,n){var r,o,s;if(this._monthsParseExact)return jit.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(o=ml([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(n&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function cie(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=rn(e);else if(e=t.localeData().monthsParse(e),!fc(e))return t}var n=e,r=t.date();return r=r<29?r:Math.min(r,h4(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,r):t._d.setMonth(n,r),t}function die(t){return t!=null?(cie(this,t),qe.updateOffset(this,!0),this):V0(this,"Month")}function zit(){return h4(this.year(),this.month())}function Uit(t){return this._monthsParseExact?(Sn(this,"_monthsRegex")||fie.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Sn(this,"_monthsShortRegex")||(this._monthsShortRegex=Pit),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function Vit(t){return this._monthsParseExact?(Sn(this,"_monthsRegex")||fie.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Sn(this,"_monthsRegex")||(this._monthsRegex=Fit),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function fie(){function t(u,l){return l.length-u.length}var e=[],n=[],r=[],o,s,i,a;for(o=0;o<12;o++)s=ml([2e3,o]),i=Xl(this.monthsShort(s,"")),a=Xl(this.months(s,"")),e.push(i),n.push(a),r.push(a),r.push(i);e.sort(t),n.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Hit(t,e,n,r,o,s,i){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,r,o,s,i),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,o,s,i),a}function H0(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function V2(t,e,n){var r=7+e-n,o=(7+H0(t,0,r).getUTCDay()-e)%7;return-o+r-1}function hie(t,e,n,r,o){var s=(7+n-r)%7,i=V2(t,r,o),a=1+7*(e-1)+s+i,u,l;return a<=0?(u=t-1,l=Ry(u)+a):a>Ry(t)?(u=t+1,l=a-Ry(t)):(u=t,l=a),{year:u,dayOfYear:l}}function G0(t,e,n){var r=V2(t.year(),e,n),o=Math.floor((t.dayOfYear()-r-1)/7)+1,s,i;return o<1?(i=t.year()-1,s=o+Ql(i,e,n)):o>Ql(t.year(),e,n)?(s=o-Ql(t.year(),e,n),i=t.year()+1):(i=t.year(),s=o),{week:s,year:i}}function Ql(t,e,n){var r=V2(t,e,n),o=V2(t+1,e,n);return(Ry(t)-r+o)/7}bt("w",["ww",2],"wo","week");bt("W",["WW",2],"Wo","isoWeek");tt("w",lr,rv);tt("ww",lr,Li);tt("W",lr,rv);tt("WW",lr,Li);hb(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=rn(t)});function Git(t){return G0(t,this._week.dow,this._week.doy).week}var Yit={dow:0,doy:6};function qit(){return this._week.dow}function Kit(){return this._week.doy}function Xit(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Qit(t){var e=G0(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}bt("d",0,"do","day");bt("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});bt("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});bt("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});bt("e",0,0,"weekday");bt("E",0,0,"isoWeekday");tt("d",lr);tt("e",lr);tt("E",lr);tt("dd",function(t,e){return e.weekdaysMinRegex(t)});tt("ddd",function(t,e){return e.weekdaysShortRegex(t)});tt("dddd",function(t,e){return e.weekdaysRegex(t)});hb(["dd","ddd","dddd"],function(t,e,n,r){var o=n._locale.weekdaysParse(t,r,n._strict);o!=null?e.d=o:Ut(n).invalidWeekday=t});hb(["d","e","E"],function(t,e,n,r){e[r]=rn(t)});function Jit(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Zit(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function p4(t,e){return t.slice(e,7).concat(t.slice(0,e))}var eat="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),pie="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),tat="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),nat=fb,rat=fb,oat=fb;function sat(t,e){var n=ru(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?p4(n,this._week.dow):t?n[t.day()]:n}function iat(t){return t===!0?p4(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function aat(t){return t===!0?p4(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function uat(t,e,n){var r,o,s,i=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=ml([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?e==="dddd"?(o=Ur.call(this._weekdaysParse,i),o!==-1?o:null):e==="ddd"?(o=Ur.call(this._shortWeekdaysParse,i),o!==-1?o:null):(o=Ur.call(this._minWeekdaysParse,i),o!==-1?o:null):e==="dddd"?(o=Ur.call(this._weekdaysParse,i),o!==-1||(o=Ur.call(this._shortWeekdaysParse,i),o!==-1)?o:(o=Ur.call(this._minWeekdaysParse,i),o!==-1?o:null)):e==="ddd"?(o=Ur.call(this._shortWeekdaysParse,i),o!==-1||(o=Ur.call(this._weekdaysParse,i),o!==-1)?o:(o=Ur.call(this._minWeekdaysParse,i),o!==-1?o:null)):(o=Ur.call(this._minWeekdaysParse,i),o!==-1||(o=Ur.call(this._weekdaysParse,i),o!==-1)?o:(o=Ur.call(this._shortWeekdaysParse,i),o!==-1?o:null))}function lat(t,e,n){var r,o,s;if(this._weekdaysParseExact)return uat.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(o=ml([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(n&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(n&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function cat(t){if(!this.isValid())return t!=null?this:NaN;var e=V0(this,"Day");return t!=null?(t=Jit(t,this.localeData()),this.add(t-e,"d")):e}function dat(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function fat(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Zit(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function hat(t){return this._weekdaysParseExact?(Sn(this,"_weekdaysRegex")||m4.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Sn(this,"_weekdaysRegex")||(this._weekdaysRegex=nat),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function pat(t){return this._weekdaysParseExact?(Sn(this,"_weekdaysRegex")||m4.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Sn(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=rat),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function mat(t){return this._weekdaysParseExact?(Sn(this,"_weekdaysRegex")||m4.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Sn(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=oat),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function m4(){function t(c,d){return d.length-c.length}var e=[],n=[],r=[],o=[],s,i,a,u,l;for(s=0;s<7;s++)i=ml([2e3,1]).day(s),a=Xl(this.weekdaysMin(i,"")),u=Xl(this.weekdaysShort(i,"")),l=Xl(this.weekdays(i,"")),e.push(a),n.push(u),r.push(l),o.push(a),o.push(u),o.push(l);e.sort(t),n.sort(t),r.sort(t),o.sort(t),this._weekdaysRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function g4(){return this.hours()%12||12}function gat(){return this.hours()||24}bt("H",["HH",2],0,"hour");bt("h",["hh",2],0,g4);bt("k",["kk",2],0,gat);bt("hmm",0,0,function(){return""+g4.apply(this)+al(this.minutes(),2)});bt("hmmss",0,0,function(){return""+g4.apply(this)+al(this.minutes(),2)+al(this.seconds(),2)});bt("Hmm",0,0,function(){return""+this.hours()+al(this.minutes(),2)});bt("Hmmss",0,0,function(){return""+this.hours()+al(this.minutes(),2)+al(this.seconds(),2)});function mie(t,e){bt(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}mie("a",!0);mie("A",!1);function gie(t,e){return e._meridiemParse}tt("a",gie);tt("A",gie);tt("H",lr,f4);tt("h",lr,rv);tt("k",lr,rv);tt("HH",lr,Li);tt("hh",lr,Li);tt("kk",lr,Li);tt("hmm",oie);tt("hmmss",sie);tt("Hmm",oie);tt("Hmmss",sie);Wn(["H","HH"],vo);Wn(["k","kk"],function(t,e,n){var r=rn(t);e[vo]=r===24?0:r});Wn(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Wn(["h","hh"],function(t,e,n){e[vo]=rn(t),Ut(n).bigHour=!0});Wn("hmm",function(t,e,n){var r=t.length-2;e[vo]=rn(t.substr(0,r)),e[Va]=rn(t.substr(r)),Ut(n).bigHour=!0});Wn("hmmss",function(t,e,n){var r=t.length-4,o=t.length-2;e[vo]=rn(t.substr(0,r)),e[Va]=rn(t.substr(r,2)),e[Vl]=rn(t.substr(o)),Ut(n).bigHour=!0});Wn("Hmm",function(t,e,n){var r=t.length-2;e[vo]=rn(t.substr(0,r)),e[Va]=rn(t.substr(r))});Wn("Hmmss",function(t,e,n){var r=t.length-4,o=t.length-2;e[vo]=rn(t.substr(0,r)),e[Va]=rn(t.substr(r,2)),e[Vl]=rn(t.substr(o))});function vat(t){return(t+"").toLowerCase().charAt(0)==="p"}var yat=/[ap]\.?m?\.?/i,xat=ov("Hours",!0);function bat(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var vie={calendar:uit,longDateFormat:fit,invalidDate:pit,ordinal:git,dayOfMonthOrdinalParse:vit,relativeTime:xit,months:Mit,monthsShort:uie,week:Yit,weekdays:eat,weekdaysMin:tat,weekdaysShort:pie,meridiemParse:yat},hr={},zv={},Y0;function wat(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function M5(t){return t&&t.toLowerCase().replace("_","-")}function kat(t){for(var e=0,n,r,o,s;e<t.length;){for(s=M5(t[e]).split("-"),n=s.length,r=M5(t[e+1]),r=r?r.split("-"):null;n>0;){if(o=aI(s.slice(0,n).join("-")),o)return o;if(r&&r.length>=n&&wat(s,r)>=n-1)break;n--}e++}return Y0}function Cat(t){return!!(t&&t.match("^[^/\\\\]*$"))}function aI(t){var e=null,n;if(hr[t]===void 0&&typeof Py<"u"&&Py&&Py.exports&&Cat(t))try{e=Y0._abbr,n=require,n("./locale/"+t),Dd(e)}catch{hr[t]=null}return hr[t]}function Dd(t,e){var n;return t&&(zs(e)?n=Tc(t):n=v4(t,e),n?Y0=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Y0._abbr}function v4(t,e){if(e!==null){var n,r=vie;if(e.abbr=t,hr[t]!=null)eie("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=hr[t]._config;else if(e.parentLocale!=null)if(hr[e.parentLocale]!=null)r=hr[e.parentLocale]._config;else if(n=aI(e.parentLocale),n!=null)r=n._config;else return zv[e.parentLocale]||(zv[e.parentLocale]=[]),zv[e.parentLocale].push({name:t,config:e}),null;return hr[t]=new a4(NA(r,e)),zv[t]&&zv[t].forEach(function(o){v4(o.name,o.config)}),Dd(t),hr[t]}else return delete hr[t],null}function Sat(t,e){if(e!=null){var n,r,o=vie;hr[t]!=null&&hr[t].parentLocale!=null?hr[t].set(NA(hr[t]._config,e)):(r=aI(t),r!=null&&(o=r._config),e=NA(o,e),r==null&&(e.abbr=t),n=new a4(e),n.parentLocale=hr[t],hr[t]=n),Dd(t)}else hr[t]!=null&&(hr[t].parentLocale!=null?(hr[t]=hr[t].parentLocale,t===Dd()&&Dd(t)):hr[t]!=null&&delete hr[t]);return hr[t]}function Tc(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Y0;if(!ru(t)){if(e=aI(t),e)return e;t=[t]}return kat(t)}function Eat(){return DA(hr)}function y4(t){var e,n=t._a;return n&&Ut(t).overflow===-2&&(e=n[Ul]<0||n[Ul]>11?Ul:n[Ru]<1||n[Ru]>h4(n[gs],n[Ul])?Ru:n[vo]<0||n[vo]>24||n[vo]===24&&(n[Va]!==0||n[Vl]!==0||n[Kf]!==0)?vo:n[Va]<0||n[Va]>59?Va:n[Vl]<0||n[Vl]>59?Vl:n[Kf]<0||n[Kf]>999?Kf:-1,Ut(t)._overflowDayOfYear&&(e<gs||e>Ru)&&(e=Ru),Ut(t)._overflowWeeks&&e===-1&&(e=Nit),Ut(t)._overflowWeekday&&e===-1&&(e=Dit),Ut(t).overflow=e),t}var _at=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Iat=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tat=/Z|[+-]\d\d(?::?\d\d)?/,Hw=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],KN=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Nat=/^\/?Date\((-?\d+)/i,Dat=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Rat={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function yie(t){var e,n,r=t._i,o=_at.exec(r)||Iat.exec(r),s,i,a,u,l=Hw.length,c=KN.length;if(o){for(Ut(t).iso=!0,e=0,n=l;e<n;e++)if(Hw[e][1].exec(o[1])){i=Hw[e][0],s=Hw[e][2]!==!1;break}if(i==null){t._isValid=!1;return}if(o[3]){for(e=0,n=c;e<n;e++)if(KN[e][1].exec(o[3])){a=(o[2]||" ")+KN[e][0];break}if(a==null){t._isValid=!1;return}}if(!s&&a!=null){t._isValid=!1;return}if(o[4])if(Tat.exec(o[4]))u="Z";else{t._isValid=!1;return}t._f=i+(a||"")+(u||""),b4(t)}else t._isValid=!1}function Oat(t,e,n,r,o,s){var i=[Aat(t),uie.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(o,10)];return s&&i.push(parseInt(s,10)),i}function Aat(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function $at(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Mat(t,e,n){if(t){var r=pie.indexOf(t),o=new Date(e[0],e[1],e[2]).getDay();if(r!==o)return Ut(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function Pat(t,e,n){if(t)return Rat[t];if(e)return 0;var r=parseInt(n,10),o=r%100,s=(r-o)/100;return s*60+o}function xie(t){var e=Dat.exec($at(t._i)),n;if(e){if(n=Oat(e[4],e[3],e[2],e[5],e[6],e[7]),!Mat(e[1],n,t))return;t._a=n,t._tzm=Pat(e[8],e[9],e[10]),t._d=H0.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Ut(t).rfc2822=!0}else t._isValid=!1}function Fat(t){var e=Nat.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(yie(t),t._isValid===!1)delete t._isValid;else return;if(xie(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:qe.createFromInputFallback(t)}qe.createFromInputFallback=wa("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function jp(t,e,n){return t??e??n}function Lat(t){var e=new Date(qe.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function x4(t){var e,n,r=[],o,s,i;if(!t._d){for(o=Lat(t),t._w&&t._a[Ru]==null&&t._a[Ul]==null&&Bat(t),t._dayOfYear!=null&&(i=jp(t._a[gs],o[gs]),(t._dayOfYear>Ry(i)||t._dayOfYear===0)&&(Ut(t)._overflowDayOfYear=!0),n=H0(i,0,t._dayOfYear),t._a[Ul]=n.getUTCMonth(),t._a[Ru]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=o[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[vo]===24&&t._a[Va]===0&&t._a[Vl]===0&&t._a[Kf]===0&&(t._nextDay=!0,t._a[vo]=0),t._d=(t._useUTC?H0:Hit).apply(null,r),s=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[vo]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==s&&(Ut(t).weekdayMismatch=!0)}}function Bat(t){var e,n,r,o,s,i,a,u,l;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,i=4,n=jp(e.GG,t._a[gs],G0(ur(),1,4).year),r=jp(e.W,1),o=jp(e.E,1),(o<1||o>7)&&(u=!0)):(s=t._locale._week.dow,i=t._locale._week.doy,l=G0(ur(),s,i),n=jp(e.gg,t._a[gs],l.year),r=jp(e.w,l.week),e.d!=null?(o=e.d,(o<0||o>6)&&(u=!0)):e.e!=null?(o=e.e+s,(e.e<0||e.e>6)&&(u=!0)):o=s),r<1||r>Ql(n,s,i)?Ut(t)._overflowWeeks=!0:u!=null?Ut(t)._overflowWeekday=!0:(a=hie(n,r,o,s,i),t._a[gs]=a.year,t._dayOfYear=a.dayOfYear)}qe.ISO_8601=function(){};qe.RFC_2822=function(){};function b4(t){if(t._f===qe.ISO_8601){yie(t);return}if(t._f===qe.RFC_2822){xie(t);return}t._a=[],Ut(t).empty=!0;var e=""+t._i,n,r,o,s,i,a=e.length,u=0,l,c;for(o=tie(t._f,t._locale).match(u4)||[],c=o.length,n=0;n<c;n++)s=o[n],r=(e.match(_it(s,t))||[])[0],r&&(i=e.substr(0,e.indexOf(r)),i.length>0&&Ut(t).unusedInput.push(i),e=e.slice(e.indexOf(r)+r.length),u+=r.length),Nm[s]?(r?Ut(t).empty=!1:Ut(t).unusedTokens.push(s),Tit(s,r,t)):t._strict&&!r&&Ut(t).unusedTokens.push(s);Ut(t).charsLeftOver=a-u,e.length>0&&Ut(t).unusedInput.push(e),t._a[vo]<=12&&Ut(t).bigHour===!0&&t._a[vo]>0&&(Ut(t).bigHour=void 0),Ut(t).parsedDateParts=t._a.slice(0),Ut(t).meridiem=t._meridiem,t._a[vo]=jat(t._locale,t._a[vo],t._meridiem),l=Ut(t).era,l!==null&&(t._a[gs]=t._locale.erasConvertYear(l,t._a[gs])),x4(t),y4(t)}function jat(t,e,n){var r;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(r=t.isPM(n),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function Wat(t){var e,n,r,o,s,i,a=!1,u=t._f.length;if(u===0){Ut(t).invalidFormat=!0,t._d=new Date(NaN);return}for(o=0;o<u;o++)s=0,i=!1,e=i4({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[o],b4(e),s4(e)&&(i=!0),s+=Ut(e).charsLeftOver,s+=Ut(e).unusedTokens.length*10,Ut(e).score=s,a?s<r&&(r=s,n=e):(r==null||s<r||i)&&(r=s,n=e,i&&(a=!0));ad(t,n||e)}function zat(t){if(!t._d){var e=l4(t._i),n=e.day===void 0?e.date:e.day;t._a=Jse([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),x4(t)}}function Uat(t){var e=new db(y4(bie(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function bie(t){var e=t._i,n=t._f;return t._locale=t._locale||Tc(t._l),e===null||n===void 0&&e===""?eI({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),ou(e)?new db(y4(e)):(cb(e)?t._d=e:ru(n)?Wat(t):n?b4(t):Vat(t),s4(t)||(t._d=null),t))}function Vat(t){var e=t._i;zs(e)?t._d=new Date(qe.now()):cb(e)?t._d=new Date(e.valueOf()):typeof e=="string"?Fat(t):ru(e)?(t._a=Jse(e.slice(0),function(n){return parseInt(n,10)}),x4(t)):ah(e)?zat(t):fc(e)?t._d=new Date(e):qe.createFromInputFallback(t)}function wie(t,e,n,r,o){var s={};return(e===!0||e===!1)&&(r=e,e=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(ah(t)&&o4(t)||ru(t)&&t.length===0)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=o,s._l=n,s._i=t,s._f=e,s._strict=r,Uat(s)}function ur(t,e,n,r){return wie(t,e,n,r,!1)}var Hat=wa("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ur.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:eI()}),Gat=wa("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ur.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:eI()});function kie(t,e){var n,r;if(e.length===1&&ru(e[0])&&(e=e[0]),!e.length)return ur();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function Yat(){var t=[].slice.call(arguments,0);return kie("isBefore",t)}function qat(){var t=[].slice.call(arguments,0);return kie("isAfter",t)}var Kat=function(){return Date.now?Date.now():+new Date},Uv=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Xat(t){var e,n=!1,r,o=Uv.length;for(e in t)if(Sn(t,e)&&!(Ur.call(Uv,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<o;++r)if(t[Uv[r]]){if(n)return!1;parseFloat(t[Uv[r]])!==rn(t[Uv[r]])&&(n=!0)}return!0}function Qat(){return this._isValid}function Jat(){return du(NaN)}function uI(t){var e=l4(t),n=e.year||0,r=e.quarter||0,o=e.month||0,s=e.week||e.isoWeek||0,i=e.day||0,a=e.hour||0,u=e.minute||0,l=e.second||0,c=e.millisecond||0;this._isValid=Xat(e),this._milliseconds=+c+l*1e3+u*6e4+a*1e3*60*60,this._days=+i+s*7,this._months=+o+r*3+n*12,this._data={},this._locale=Tc(),this._bubble()}function Ik(t){return t instanceof uI}function OA(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Zat(t,e,n){var r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0,i;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&rn(t[i])!==rn(e[i]))&&s++;return s+o}function Cie(t,e){bt(t,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+al(~~(n/60),2)+e+al(~~n%60,2)})}Cie("Z",":");Cie("ZZ","");tt("Z",sI);tt("ZZ",sI);Wn(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=w4(sI,t)});var eut=/([\+\-]|\d\d)/gi;function w4(t,e){var n=(e||"").match(t),r,o,s;return n===null?null:(r=n[n.length-1]||[],o=(r+"").match(eut)||["-",0,0],s=+(o[1]*60)+rn(o[2]),s===0?0:o[0]==="+"?s:-s)}function k4(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(ou(t)||cb(t)?t.valueOf():ur(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),qe.updateOffset(n,!1),n):ur(t).local()}function AA(t){return-Math.round(t._d.getTimezoneOffset())}qe.updateOffset=function(){};function tut(t,e,n){var r=this._offset||0,o;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=w4(sI,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(o=AA(this)),this._offset=t,this._isUTC=!0,o!=null&&this.add(o,"m"),r!==t&&(!e||this._changeInProgress?_ie(this,du(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,qe.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:AA(this)}function nut(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function rut(t){return this.utcOffset(0,t)}function out(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(AA(this),"m")),this}function sut(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=w4(Sit,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function iut(t){return this.isValid()?(t=t?ur(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function aut(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function uut(){if(!zs(this._isDSTShifted))return this._isDSTShifted;var t={},e;return i4(t,this),t=bie(t),t._a?(e=t._isUTC?ml(t._a):ur(t._a),this._isDSTShifted=this.isValid()&&Zat(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function lut(){return this.isValid()?!this._isUTC:!1}function cut(){return this.isValid()?this._isUTC:!1}function Sie(){return this.isValid()?this._isUTC&&this._offset===0:!1}var dut=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,fut=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function du(t,e){var n=t,r=null,o,s,i;return Ik(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:fc(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(r=dut.exec(t))?(o=r[1]==="-"?-1:1,n={y:0,d:rn(r[Ru])*o,h:rn(r[vo])*o,m:rn(r[Va])*o,s:rn(r[Vl])*o,ms:rn(OA(r[Kf]*1e3))*o}):(r=fut.exec(t))?(o=r[1]==="-"?-1:1,n={y:Sf(r[2],o),M:Sf(r[3],o),w:Sf(r[4],o),d:Sf(r[5],o),h:Sf(r[6],o),m:Sf(r[7],o),s:Sf(r[8],o)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(i=hut(ur(n.from),ur(n.to)),n={},n.ms=i.milliseconds,n.M=i.months),s=new uI(n),Ik(t)&&Sn(t,"_locale")&&(s._locale=t._locale),Ik(t)&&Sn(t,"_isValid")&&(s._isValid=t._isValid),s}du.fn=uI.prototype;du.invalid=Jat;function Sf(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function P5(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function hut(t,e){var n;return t.isValid()&&e.isValid()?(e=k4(e,t),t.isBefore(e)?n=P5(t,e):(n=P5(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Eie(t,e){return function(n,r){var o,s;return r!==null&&!isNaN(+r)&&(eie(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),o=du(n,r),_ie(this,o,t),this}}function _ie(t,e,n,r){var o=e._milliseconds,s=OA(e._days),i=OA(e._months);t.isValid()&&(r=r??!0,i&&cie(t,V0(t,"Month")+i*n),s&&aie(t,"Date",V0(t,"Date")+s*n),o&&t._d.setTime(t._d.valueOf()+o*n),r&&qe.updateOffset(t,s||i))}var put=Eie(1,"add"),mut=Eie(-1,"subtract");function Iie(t){return typeof t=="string"||t instanceof String}function gut(t){return ou(t)||cb(t)||Iie(t)||fc(t)||yut(t)||vut(t)||t===null||t===void 0}function vut(t){var e=ah(t)&&!o4(t),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],o,s,i=r.length;for(o=0;o<i;o+=1)s=r[o],n=n||Sn(t,s);return e&&n}function yut(t){var e=ru(t),n=!1;return e&&(n=t.filter(function(r){return!fc(r)&&Iie(t)}).length===0),e&&n}function xut(t){var e=ah(t)&&!o4(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],o,s;for(o=0;o<r.length;o+=1)s=r[o],n=n||Sn(t,s);return e&&n}function but(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function wut(t,e){arguments.length===1&&(arguments[0]?gut(arguments[0])?(t=arguments[0],e=void 0):xut(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||ur(),r=k4(n,this).startOf("day"),o=qe.calendarFormat(this,r)||"sameElse",s=e&&(gl(e[o])?e[o].call(this,n):e[o]);return this.format(s||this.localeData().calendar(o,this,ur(n)))}function kut(){return new db(this)}function Cut(t,e){var n=ou(t)?t:ur(t);return this.isValid()&&n.isValid()?(e=ka(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function Sut(t,e){var n=ou(t)?t:ur(t);return this.isValid()&&n.isValid()?(e=ka(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function Eut(t,e,n,r){var o=ou(t)?t:ur(t),s=ou(e)?e:ur(e);return this.isValid()&&o.isValid()&&s.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(o,n):!this.isBefore(o,n))&&(r[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function _ut(t,e){var n=ou(t)?t:ur(t),r;return this.isValid()&&n.isValid()?(e=ka(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function Iut(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Tut(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Nut(t,e,n){var r,o,s;if(!this.isValid())return NaN;if(r=k4(t,this),!r.isValid())return NaN;switch(o=(r.utcOffset()-this.utcOffset())*6e4,e=ka(e),e){case"year":s=Tk(this,r)/12;break;case"month":s=Tk(this,r);break;case"quarter":s=Tk(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-o)/864e5;break;case"week":s=(this-r-o)/6048e5;break;default:s=this-r}return n?s:qi(s)}function Tk(t,e){if(t.date()<e.date())return-Tk(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(n,"months"),o,s;return e-r<0?(o=t.clone().add(n-1,"months"),s=(e-r)/(r-o)):(o=t.clone().add(n+1,"months"),s=(e-r)/(o-r)),-(n+s)||0}qe.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";qe.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Dut(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Rut(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?_k(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):gl(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",_k(n,"Z")):_k(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Out(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,r,o,s;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(n+r+o+s)}function Aut(t){t||(t=this.isUtc()?qe.defaultFormatUtc:qe.defaultFormat);var e=_k(this,t);return this.localeData().postformat(e)}function $ut(t,e){return this.isValid()&&(ou(t)&&t.isValid()||ur(t).isValid())?du({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Mut(t){return this.from(ur(),t)}function Put(t,e){return this.isValid()&&(ou(t)&&t.isValid()||ur(t).isValid())?du({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Fut(t){return this.to(ur(),t)}function Tie(t){var e;return t===void 0?this._locale._abbr:(e=Tc(t),e!=null&&(this._locale=e),this)}var Nie=wa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Die(){return this._locale}var H2=1e3,Dm=60*H2,G2=60*Dm,Rie=(365*400+97)*24*G2;function Rm(t,e){return(t%e+e)%e}function Oie(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-Rie:new Date(t,e,n).valueOf()}function Aie(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-Rie:Date.UTC(t,e,n)}function Lut(t){var e,n;if(t=ka(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Aie:Oie,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Rm(e+(this._isUTC?0:this.utcOffset()*Dm),G2);break;case"minute":e=this._d.valueOf(),e-=Rm(e,Dm);break;case"second":e=this._d.valueOf(),e-=Rm(e,H2);break}return this._d.setTime(e),qe.updateOffset(this,!0),this}function But(t){var e,n;if(t=ka(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Aie:Oie,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=G2-Rm(e+(this._isUTC?0:this.utcOffset()*Dm),G2)-1;break;case"minute":e=this._d.valueOf(),e+=Dm-Rm(e,Dm)-1;break;case"second":e=this._d.valueOf(),e+=H2-Rm(e,H2)-1;break}return this._d.setTime(e),qe.updateOffset(this,!0),this}function jut(){return this._d.valueOf()-(this._offset||0)*6e4}function Wut(){return Math.floor(this.valueOf()/1e3)}function zut(){return new Date(this.valueOf())}function Uut(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Vut(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Hut(){return this.isValid()?this.toISOString():null}function Gut(){return s4(this)}function Yut(){return ad({},Ut(this))}function qut(){return Ut(this).overflow}function Kut(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}bt("N",0,0,"eraAbbr");bt("NN",0,0,"eraAbbr");bt("NNN",0,0,"eraAbbr");bt("NNNN",0,0,"eraName");bt("NNNNN",0,0,"eraNarrow");bt("y",["y",1],"yo","eraYear");bt("y",["yy",2],0,"eraYear");bt("y",["yyy",3],0,"eraYear");bt("y",["yyyy",4],0,"eraYear");tt("N",C4);tt("NN",C4);tt("NNN",C4);tt("NNNN",ilt);tt("NNNNN",alt);Wn(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,r){var o=n._locale.erasParse(t,r,n._strict);o?Ut(n).era=o:Ut(n).invalidEra=t});tt("y",nv);tt("yy",nv);tt("yyy",nv);tt("yyyy",nv);tt("yo",ult);Wn(["y","yy","yyy","yyyy"],gs);Wn(["yo"],function(t,e,n,r){var o;n._locale._eraYearOrdinalRegex&&(o=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[gs]=n._locale.eraYearOrdinalParse(t,o):e[gs]=parseInt(t,10)});function Xut(t,e){var n,r,o,s=this._eras||Tc("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":o=qe(s[n].since).startOf("day"),s[n].since=o.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":o=qe(s[n].until).startOf("day").valueOf(),s[n].until=o.valueOf();break}}return s}function Qut(t,e,n){var r,o,s=this.eras(),i,a,u;for(t=t.toUpperCase(),r=0,o=s.length;r<o;++r)if(i=s[r].name.toUpperCase(),a=s[r].abbr.toUpperCase(),u=s[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return s[r];break;case"NNNN":if(i===t)return s[r];break;case"NNNNN":if(u===t)return s[r];break}else if([i,a,u].indexOf(t)>=0)return s[r]}function Jut(t,e){var n=t.since<=t.until?1:-1;return e===void 0?qe(t.since).year():qe(t.since).year()+(e-t.offset)*n}function Zut(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""}function elt(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""}function tlt(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""}function nlt(){var t,e,n,r,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t)if(n=o[t].since<=o[t].until?1:-1,r=this.clone().startOf("day").valueOf(),o[t].since<=r&&r<=o[t].until||o[t].until<=r&&r<=o[t].since)return(this.year()-qe(o[t].since).year())*n+o[t].offset;return this.year()}function rlt(t){return Sn(this,"_erasNameRegex")||S4.call(this),t?this._erasNameRegex:this._erasRegex}function olt(t){return Sn(this,"_erasAbbrRegex")||S4.call(this),t?this._erasAbbrRegex:this._erasRegex}function slt(t){return Sn(this,"_erasNarrowRegex")||S4.call(this),t?this._erasNarrowRegex:this._erasRegex}function C4(t,e){return e.erasAbbrRegex(t)}function ilt(t,e){return e.erasNameRegex(t)}function alt(t,e){return e.erasNarrowRegex(t)}function ult(t,e){return e._eraYearOrdinalRegex||nv}function S4(){var t=[],e=[],n=[],r=[],o,s,i,a,u,l=this.eras();for(o=0,s=l.length;o<s;++o)i=Xl(l[o].name),a=Xl(l[o].abbr),u=Xl(l[o].narrow),e.push(i),t.push(a),n.push(u),r.push(i),r.push(a),r.push(u);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}bt(0,["gg",2],0,function(){return this.weekYear()%100});bt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function lI(t,e){bt(0,[t,t.length],0,e)}lI("gggg","weekYear");lI("ggggg","weekYear");lI("GGGG","isoWeekYear");lI("GGGGG","isoWeekYear");tt("G",oI);tt("g",oI);tt("GG",lr,Li);tt("gg",lr,Li);tt("GGGG",d4,c4);tt("gggg",d4,c4);tt("GGGGG",rI,tI);tt("ggggg",rI,tI);hb(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=rn(t)});hb(["gg","GG"],function(t,e,n,r){e[r]=qe.parseTwoDigitYear(t)});function llt(t){return $ie.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function clt(t){return $ie.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function dlt(){return Ql(this.year(),1,4)}function flt(){return Ql(this.isoWeekYear(),1,4)}function hlt(){var t=this.localeData()._week;return Ql(this.year(),t.dow,t.doy)}function plt(){var t=this.localeData()._week;return Ql(this.weekYear(),t.dow,t.doy)}function $ie(t,e,n,r,o){var s;return t==null?G0(this,r,o).year:(s=Ql(t,r,o),e>s&&(e=s),mlt.call(this,t,e,n,r,o))}function mlt(t,e,n,r,o){var s=hie(t,e,n,r,o),i=H0(s.year,0,s.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}bt("Q",0,"Qo","quarter");tt("Q",nie);Wn("Q",function(t,e){e[Ul]=(rn(t)-1)*3});function glt(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}bt("D",["DD",2],"Do","date");tt("D",lr,rv);tt("DD",lr,Li);tt("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Wn(["D","DD"],Ru);Wn("Do",function(t,e){e[Ru]=rn(t.match(lr)[0])});var Mie=ov("Date",!0);bt("DDD",["DDDD",3],"DDDo","dayOfYear");tt("DDD",nI);tt("DDDD",rie);Wn(["DDD","DDDD"],function(t,e,n){n._dayOfYear=rn(t)});function vlt(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}bt("m",["mm",2],0,"minute");tt("m",lr,f4);tt("mm",lr,Li);Wn(["m","mm"],Va);var ylt=ov("Minutes",!1);bt("s",["ss",2],0,"second");tt("s",lr,f4);tt("ss",lr,Li);Wn(["s","ss"],Vl);var xlt=ov("Seconds",!1);bt("S",0,0,function(){return~~(this.millisecond()/100)});bt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});bt(0,["SSS",3],0,"millisecond");bt(0,["SSSS",4],0,function(){return this.millisecond()*10});bt(0,["SSSSS",5],0,function(){return this.millisecond()*100});bt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});bt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});bt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});bt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});tt("S",nI,nie);tt("SS",nI,Li);tt("SSS",nI,rie);var ud,Pie;for(ud="SSSS";ud.length<=9;ud+="S")tt(ud,nv);function blt(t,e){e[Kf]=rn(("0."+t)*1e3)}for(ud="S";ud.length<=9;ud+="S")Wn(ud,blt);Pie=ov("Milliseconds",!1);bt("z",0,0,"zoneAbbr");bt("zz",0,0,"zoneName");function wlt(){return this._isUTC?"UTC":""}function klt(){return this._isUTC?"Coordinated Universal Time":""}var $e=db.prototype;$e.add=put;$e.calendar=wut;$e.clone=kut;$e.diff=Nut;$e.endOf=But;$e.format=Aut;$e.from=$ut;$e.fromNow=Mut;$e.to=Put;$e.toNow=Fut;$e.get=Oit;$e.invalidAt=qut;$e.isAfter=Cut;$e.isBefore=Sut;$e.isBetween=Eut;$e.isSame=_ut;$e.isSameOrAfter=Iut;$e.isSameOrBefore=Tut;$e.isValid=Gut;$e.lang=Nie;$e.locale=Tie;$e.localeData=Die;$e.max=Gat;$e.min=Hat;$e.parsingFlags=Yut;$e.set=Ait;$e.startOf=Lut;$e.subtract=mut;$e.toArray=Uut;$e.toObject=Vut;$e.toDate=zut;$e.toISOString=Rut;$e.inspect=Out;typeof Symbol<"u"&&Symbol.for!=null&&($e[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});$e.toJSON=Hut;$e.toString=Dut;$e.unix=Wut;$e.valueOf=jut;$e.creationData=Kut;$e.eraName=Zut;$e.eraNarrow=elt;$e.eraAbbr=tlt;$e.eraYear=nlt;$e.year=iie;$e.isLeapYear=Rit;$e.weekYear=llt;$e.isoWeekYear=clt;$e.quarter=$e.quarters=glt;$e.month=die;$e.daysInMonth=zit;$e.week=$e.weeks=Xit;$e.isoWeek=$e.isoWeeks=Qit;$e.weeksInYear=hlt;$e.weeksInWeekYear=plt;$e.isoWeeksInYear=dlt;$e.isoWeeksInISOWeekYear=flt;$e.date=Mie;$e.day=$e.days=cat;$e.weekday=dat;$e.isoWeekday=fat;$e.dayOfYear=vlt;$e.hour=$e.hours=xat;$e.minute=$e.minutes=ylt;$e.second=$e.seconds=xlt;$e.millisecond=$e.milliseconds=Pie;$e.utcOffset=tut;$e.utc=rut;$e.local=out;$e.parseZone=sut;$e.hasAlignedHourOffset=iut;$e.isDST=aut;$e.isLocal=lut;$e.isUtcOffset=cut;$e.isUtc=Sie;$e.isUTC=Sie;$e.zoneAbbr=wlt;$e.zoneName=klt;$e.dates=wa("dates accessor is deprecated. Use date instead.",Mie);$e.months=wa("months accessor is deprecated. Use month instead",die);$e.years=wa("years accessor is deprecated. Use year instead",iie);$e.zone=wa("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",nut);$e.isDSTShifted=wa("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",uut);function Clt(t){return ur(t*1e3)}function Slt(){return ur.apply(null,arguments).parseZone()}function Fie(t){return t}var _n=a4.prototype;_n.calendar=lit;_n.longDateFormat=hit;_n.invalidDate=mit;_n.ordinal=yit;_n.preparse=Fie;_n.postformat=Fie;_n.relativeTime=bit;_n.pastFuture=wit;_n.set=ait;_n.eras=Xut;_n.erasParse=Qut;_n.erasConvertYear=Jut;_n.erasAbbrRegex=olt;_n.erasNameRegex=rlt;_n.erasNarrowRegex=slt;_n.months=Lit;_n.monthsShort=Bit;_n.monthsParse=Wit;_n.monthsRegex=Vit;_n.monthsShortRegex=Uit;_n.week=Git;_n.firstDayOfYear=Kit;_n.firstDayOfWeek=qit;_n.weekdays=sat;_n.weekdaysMin=aat;_n.weekdaysShort=iat;_n.weekdaysParse=lat;_n.weekdaysRegex=hat;_n.weekdaysShortRegex=pat;_n.weekdaysMinRegex=mat;_n.isPM=vat;_n.meridiem=bat;function Y2(t,e,n,r){var o=Tc(),s=ml().set(r,e);return o[n](s,t)}function Lie(t,e,n){if(fc(t)&&(e=t,t=void 0),t=t||"",e!=null)return Y2(t,e,n,"month");var r,o=[];for(r=0;r<12;r++)o[r]=Y2(t,r,n,"month");return o}function E4(t,e,n,r){typeof t=="boolean"?(fc(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,fc(e)&&(n=e,e=void 0),e=e||"");var o=Tc(),s=t?o._week.dow:0,i,a=[];if(n!=null)return Y2(e,(n+s)%7,r,"day");for(i=0;i<7;i++)a[i]=Y2(e,(i+s)%7,r,"day");return a}function Elt(t,e){return Lie(t,e,"months")}function _lt(t,e){return Lie(t,e,"monthsShort")}function Ilt(t,e,n){return E4(t,e,n,"weekdays")}function Tlt(t,e,n){return E4(t,e,n,"weekdaysShort")}function Nlt(t,e,n){return E4(t,e,n,"weekdaysMin")}Dd("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=rn(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});qe.lang=wa("moment.lang is deprecated. Use moment.locale instead.",Dd);qe.langData=wa("moment.langData is deprecated. Use moment.localeData instead.",Tc);var Il=Math.abs;function Dlt(){var t=this._data;return this._milliseconds=Il(this._milliseconds),this._days=Il(this._days),this._months=Il(this._months),t.milliseconds=Il(t.milliseconds),t.seconds=Il(t.seconds),t.minutes=Il(t.minutes),t.hours=Il(t.hours),t.months=Il(t.months),t.years=Il(t.years),this}function Bie(t,e,n,r){var o=du(e,n);return t._milliseconds+=r*o._milliseconds,t._days+=r*o._days,t._months+=r*o._months,t._bubble()}function Rlt(t,e){return Bie(this,t,e,1)}function Olt(t,e){return Bie(this,t,e,-1)}function F5(t){return t<0?Math.floor(t):Math.ceil(t)}function Alt(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data,o,s,i,a,u;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=F5($A(n)+e)*864e5,e=0,n=0),r.milliseconds=t%1e3,o=qi(t/1e3),r.seconds=o%60,s=qi(o/60),r.minutes=s%60,i=qi(s/60),r.hours=i%24,e+=qi(i/24),u=qi(jie(e)),n+=u,e-=F5($A(u)),a=qi(n/12),n%=12,r.days=e,r.months=n,r.years=a,this}function jie(t){return t*4800/146097}function $A(t){return t*146097/4800}function $lt(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if(t=ka(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,n=this._months+jie(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round($A(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function Nc(t){return function(){return this.as(t)}}var Wie=Nc("ms"),Mlt=Nc("s"),Plt=Nc("m"),Flt=Nc("h"),Llt=Nc("d"),Blt=Nc("w"),jlt=Nc("M"),Wlt=Nc("Q"),zlt=Nc("y"),Ult=Wie;function Vlt(){return du(this)}function Hlt(t){return t=ka(t),this.isValid()?this[t+"s"]():NaN}function lp(t){return function(){return this.isValid()?this._data[t]:NaN}}var Glt=lp("milliseconds"),Ylt=lp("seconds"),qlt=lp("minutes"),Klt=lp("hours"),Xlt=lp("days"),Qlt=lp("months"),Jlt=lp("years");function Zlt(){return qi(this.days()/7)}var Dl=Math.round,sm={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ect(t,e,n,r,o){return o.relativeTime(e||1,!!n,t,r)}function tct(t,e,n,r){var o=du(t).abs(),s=Dl(o.as("s")),i=Dl(o.as("m")),a=Dl(o.as("h")),u=Dl(o.as("d")),l=Dl(o.as("M")),c=Dl(o.as("w")),d=Dl(o.as("y")),f=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||i<=1&&["m"]||i<n.m&&["mm",i]||a<=1&&["h"]||a<n.h&&["hh",a]||u<=1&&["d"]||u<n.d&&["dd",u];return n.w!=null&&(f=f||c<=1&&["w"]||c<n.w&&["ww",c]),f=f||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d],f[2]=e,f[3]=+t>0,f[4]=r,ect.apply(null,f)}function nct(t){return t===void 0?Dl:typeof t=="function"?(Dl=t,!0):!1}function rct(t,e){return sm[t]===void 0?!1:e===void 0?sm[t]:(sm[t]=e,t==="s"&&(sm.ss=e-1),!0)}function oct(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=sm,o,s;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(r=Object.assign({},sm,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),o=this.localeData(),s=tct(this,!n,r,o),n&&(s=o.pastFuture(+this,s)),o.postformat(s)}var XN=Math.abs;function Dp(t){return(t>0)-(t<0)||+t}function cI(){if(!this.isValid())return this.localeData().invalidDate();var t=XN(this._milliseconds)/1e3,e=XN(this._days),n=XN(this._months),r,o,s,i,a=this.asSeconds(),u,l,c,d;return a?(r=qi(t/60),o=qi(r/60),t%=60,r%=60,s=qi(n/12),n%=12,i=t?t.toFixed(3).replace(/\.?0+$/,""):"",u=a<0?"-":"",l=Dp(this._months)!==Dp(a)?"-":"",c=Dp(this._days)!==Dp(a)?"-":"",d=Dp(this._milliseconds)!==Dp(a)?"-":"",u+"P"+(s?l+s+"Y":"")+(n?l+n+"M":"")+(e?c+e+"D":"")+(o||r||t?"T":"")+(o?d+o+"H":"")+(r?d+r+"M":"")+(t?d+i+"S":"")):"P0D"}var yn=uI.prototype;yn.isValid=Qat;yn.abs=Dlt;yn.add=Rlt;yn.subtract=Olt;yn.as=$lt;yn.asMilliseconds=Wie;yn.asSeconds=Mlt;yn.asMinutes=Plt;yn.asHours=Flt;yn.asDays=Llt;yn.asWeeks=Blt;yn.asMonths=jlt;yn.asQuarters=Wlt;yn.asYears=zlt;yn.valueOf=Ult;yn._bubble=Alt;yn.clone=Vlt;yn.get=Hlt;yn.milliseconds=Glt;yn.seconds=Ylt;yn.minutes=qlt;yn.hours=Klt;yn.days=Xlt;yn.weeks=Zlt;yn.months=Qlt;yn.years=Jlt;yn.humanize=oct;yn.toISOString=cI;yn.toString=cI;yn.toJSON=cI;yn.locale=Tie;yn.localeData=Die;yn.toIsoString=wa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",cI);yn.lang=Nie;bt("X",0,0,"unix");bt("x",0,0,"valueOf");tt("x",oI);tt("X",Eit);Wn("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Wn("x",function(t,e,n){n._d=new Date(rn(t))});//! moment.js
qe.version="2.30.1";sit(ur);qe.fn=$e;qe.min=Yat;qe.max=qat;qe.now=Kat;qe.utc=ml;qe.unix=Clt;qe.months=Elt;qe.isDate=cb;qe.locale=Dd;qe.invalid=eI;qe.duration=du;qe.isMoment=ou;qe.weekdays=Ilt;qe.parseZone=Slt;qe.localeData=Tc;qe.isDuration=Ik;qe.monthsShort=_lt;qe.weekdaysMin=Nlt;qe.defineLocale=v4;qe.updateLocale=Sat;qe.locales=Eat;qe.weekdaysShort=Tlt;qe.normalizeUnits=ka;qe.relativeTimeRounding=nct;qe.relativeTimeThreshold=rct;qe.calendarFormat=but;qe.prototype=$e;qe.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const _4={addProduct(t,e){return Nn.post("/products/addProduct",t,{headers:{Authorization:`Bearer ${e}`}})},getAllProduct(){return Nn.get("/products")},getAllProductByUserId(t,e){return Nn.get(`/products/${t}`,{headers:{Authorization:`Bearer ${e}`}})}},zie="ALL_PRODUCT",Uie="ALL_PRODUCT_ALL",sct=t=>({type:zie,payload:t}),ict=t=>({type:Uie,payload:t});function act(t,e){return n=>{_4.getAllProductByUserId(t,e).then(r=>{console.log("dataProduct",r),r.status===200||r.status===201?n(sct(r.data)):console.log("fail")}).catch(r=>{console.error("Error while fetching all products:",r)})}}function Vie(){return t=>{_4.getAllProduct().then(e=>{console.log("dataProduct",e),e.status===200||e.status===201?t(ict(e.data)):console.log("fail")}).catch(e=>{console.error("Error while fetching all products:",e)})}}function uct(t,e){return async n=>{const r=await _4.addProduct(t,e);r.status===200||r.status===201?(Rt.success("New Product has been added successfully ~"),n(Vie())):console.log("fail")}}function lct(){const[t,e]=D.useState(""),[n,r]=D.useState(""),[o,s]=D.useState([]),[i,a]=D.useState([]),u=xr(),[l,c]=D.useState(!1),d=Tt(E=>E.USER.currentUser),f=Ao(),h=localStorage.getItem("ACCESS_TOKEN"),p=D.useRef(null),m=D.useRef(null),g=()=>{e(""),r(""),s([]),a([]),p.current.value="",m.current.value=""},v=E=>{if(E.preventDefault(),!t||!n||o.length===0||i.length===0){Rt.error("Vui lòng điền tất cả các trường và chọn ít nhất một ảnh và một video!");return}let I=new FormData;I.append("name",t),I.append("description",n),I.append("host_id",d._id),o.forEach((T,N)=>{I.append("image",T.file)}),i.forEach((T,N)=>{I.append("video",T.file)}),c(!0),f(uct(I,h)).then(()=>{c(!1),g(),u("/manage-product")})},y=E=>o.some(I=>I.url===E),x=E=>{const I=E.target.files,T=Array.from(I).filter(N=>!y(URL.createObjectURL(N))).map(N=>({file:N,url:URL.createObjectURL(N)}));s(N=>[...N,...T])},b=E=>{const I=E.target.files,T=Array.from(I).map(N=>({file:N,url:URL.createObjectURL(N)}));a(N=>[...N,...T])},C=E=>{const I=o[E].url,T=[...o];T.splice(E,1),s(T),URL.revokeObjectURL(I)},S=E=>{const I=i[E].url,T=[...i];T.splice(E,1),a(T),URL.revokeObjectURL(I)};return w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsxs(Fs,{children:[w.jsx("h1",{children:"Tạo sản phẩm"}),w.jsxs(ve,{onSubmit:v,children:[w.jsxs(Vt,{className:"mb-4",children:[w.jsx(rt,{md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Upload Ảnh Sản Phẩm"}),w.jsxs(ve.Group,{controlId:"formFileMultiple",className:"mb-3",children:[w.jsx(ve.Label,{children:"Chọn ảnh sản phẩm"}),w.jsx(ve.Control,{type:"file",multiple:!0,onChange:x,ref:p})]}),o.map((E,I)=>w.jsxs("div",{style:{position:"relative"},children:[w.jsx("img",{src:E.url,alt:"Product",style:{maxWidth:"100%"}}),w.jsx(vt,{variant:"danger",onClick:()=>C(I),style:{position:"absolute",top:0,right:0},children:w.jsx(CW,{})})]},I))]})})}),w.jsx(rt,{md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Upload Video Sản Phẩm"}),w.jsxs(ve.Group,{controlId:"formFileMultipleVideo",className:"mb-3",children:[w.jsx(ve.Label,{children:"Chọn video sản phẩm"}),w.jsx(ve.Control,{type:"file",multiple:!0,accept:"video/*",onChange:b,ref:m})]}),i.map((E,I)=>w.jsxs("div",{style:{position:"relative",marginTop:"20px"},children:[w.jsxs("video",{controls:!0,style:{maxWidth:"100%"},children:[w.jsx("source",{src:E.url,type:"video/mp4"}),"Your browser does not support the video tag."]}),w.jsx(vt,{variant:"danger",onClick:()=>S(I),style:{position:"absolute",top:0,right:0},children:w.jsx(CW,{})})]},I))]})})})]}),w.jsxs(Vt,{children:[w.jsx(rt,{md:12,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Thông Tin Sản Phẩm"}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Tên sản phẩm"}),w.jsx(ve.Control,{type:"text",placeholder:"Nhập tên sản phẩm",value:t,onChange:E=>e(E.target.value)})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Mô tả"}),w.jsx(ve.Control,{as:"textarea",rows:3,placeholder:"Mô tả sản phẩm",value:n,onChange:E=>r(E.target.value)})]})]})})}),w.jsxs(rt,{xs:"auto",className:"mt-2",children:[w.jsx(vt,{variant:"primary",type:"submit",className:"me-2",children:"Create Product"}),w.jsx(vt,{variant:"danger",type:"submit",onClick:()=>u(-1),children:"Cancel"}),l?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"overlay"}),w.jsx("div",{className:"spinner-container",children:w.jsx(k0e,{animation:"border",role:"status",children:w.jsx("span",{className:"visually-hidden",children:"Loading..."})})})]}):""]})]})]})]})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}const Hie=t=>{const{deleteData:e=[],showProp:n,handleClose:r}=t,o=async()=>{};return w.jsx(w.Fragment,{children:w.jsxs(Zt,{show:n,onHide:r,backdrop:"static",keyboard:!1,children:[w.jsx(Zt.Header,{closeButton:!0,children:w.jsxs(Zt.Title,{children:["Delete Product ",e._id]})}),w.jsx(Zt.Body,{children:w.jsxs("div",{children:["You want to delete product: ",e.name]})}),w.jsxs(Zt.Footer,{children:[w.jsx(vt,{variant:"secondary",onClick:r,children:"Close"}),w.jsx(vt,{variant:"primary",onClick:o,children:"Confirm"})]})]})})};Hie.propTypes={deleteData:ye.shape({id:ye.number,name:ye.string}).isRequired,showProp:ye.bool.isRequired,handleClose:ye.func.isRequired};function cct(){const[t,e]=D.useState(!1),[n,r]=D.useState({}),o=localStorage.getItem("ACCESS_TOKEN"),s=Tt(f=>f.USER.currentUser);console.log("user",s);const i=f=>{if(!f)return"";const h=new Date(f);return Qm(h,"dd/MM/yyyy - HH:mm")},a=Tt(f=>f.PRODUCT.products);console.log("products",a);const u=Ao();D.useEffect(()=>{u(act(s==null?void 0:s._id,o))},[s]);const l=xr(),c=f=>{console.log("Delete item with id:",f.name),r(f),e(!0)},d=f=>{l(`/product-detail/${f._id}`)};return w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsxs(Vt,{children:[w.jsx(rt,{xs:12,children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{children:w.jsx("strong",{children:"Product"})}),w.jsxs(me.Body,{children:[w.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[w.jsx("p",{className:"text-medium-emphasis small mb-0",children:"Display auctions in the system"}),w.jsx(vt,{variant:"success",onClick:()=>{l("/create-product")},children:"Create New Product"})]}),w.jsxs(Vt,{children:[w.jsxs(rt,{xs:"auto",children:[" ",w.jsxs(ve,{className:"d-flex mb-3",role:"search",children:[w.jsx(ve.Control,{className:"me-2",type:"search",placeholder:"Search Name Product","aria-label":"Search"}),w.jsx(vt,{variant:"outline-success",type:"submit",children:"Search"})]})]}),w.jsxs(Vh,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"ID"}),w.jsx("th",{children:"Name"}),w.jsx("th",{children:"Status"}),w.jsx("th",{children:"Create Date"}),w.jsx("th",{children:"Actions"}),w.jsx("th",{children:"Auction"})]})}),w.jsx("tbody",{children:a&&(a==null?void 0:a.map((f,h)=>w.jsxs("tr",{children:[w.jsx("td",{children:h+1}),w.jsx("td",{children:f.name}),w.jsx("td",{children:f.status===!1?w.jsx(Jf,{bg:"warning",children:"chua dau gia"}):w.jsx(Jf,{bg:"success",children:"dang dau gia"})}),w.jsxs("td",{children:[" ",i(f==null?void 0:f.timestamp)]}),w.jsxs("td",{children:[d&&w.jsx(vt,{variant:"success",onClick:()=>d(f),children:"Detail"})," ",f.status===!1&&c&&w.jsx(vt,{variant:"danger",onClick:()=>c(f),children:"Delete"})]}),w.jsx("td",{children:f.status===!1?w.jsx(vt,{variant:"success",onClick:()=>l(`/create-auction/${f._id}`),children:"Create Auction"}):w.jsx("strong",{children:"Sản phẩm đang trên kệ"})})]},h)))})]})]})]})]})}),w.jsx(Hie,{showProp:t,handleClose:()=>e(!1),deleteData:n})]})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}var dct=Object.defineProperty,fct=(t,e)=>{for(var n in e)dct(t,n,{get:e[n],enumerable:!0})},su={};fct(su,{assign:()=>mct,colors:()=>Rd,createStringInterpolator:()=>A4,skipAnimation:()=>Jie,to:()=>Qie,willAdvance:()=>$4});var I4=mb(),Bt=t=>pb(t,I4),T4=mb();Bt.write=t=>pb(t,T4);var dI=mb();Bt.onStart=t=>pb(t,dI);var N4=mb();Bt.onFrame=t=>pb(t,N4);var D4=mb();Bt.onFinish=t=>pb(t,D4);var Om=[];Bt.setTimeout=(t,e)=>{const n=Bt.now()+e,r=()=>{const s=Om.findIndex(i=>i.cancel==r);~s&&Om.splice(s,1),cd-=~s?1:0},o={time:n,handler:t,cancel:r};return Om.splice(Gie(n),0,o),cd+=1,Yie(),o};var Gie=t=>~(~Om.findIndex(e=>e.time>t)||~Om.length);Bt.cancel=t=>{dI.delete(t),N4.delete(t),D4.delete(t),I4.delete(t),T4.delete(t)};Bt.sync=t=>{MA=!0,Bt.batchedUpdates(t),MA=!1};Bt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...o){e=o,Bt.onStart(n)}return r.handler=t,r.cancel=()=>{dI.delete(n),e=null},r};var R4=typeof window<"u"?window.requestAnimationFrame:()=>{};Bt.use=t=>R4=t;Bt.now=typeof performance<"u"?()=>performance.now():Date.now;Bt.batchedUpdates=t=>t();Bt.catch=console.error;Bt.frameLoop="always";Bt.advance=()=>{Bt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Kie()};var ld=-1,cd=0,MA=!1;function pb(t,e){MA?(e.delete(t),t(0)):(e.add(t),Yie())}function Yie(){ld<0&&(ld=0,Bt.frameLoop!=="demand"&&R4(qie))}function hct(){ld=-1}function qie(){~ld&&(R4(qie),Bt.batchedUpdates(Kie))}function Kie(){const t=ld;ld=Bt.now();const e=Gie(ld);if(e&&(Xie(Om.splice(0,e),n=>n.handler()),cd-=e),!cd){hct();return}dI.flush(),I4.flush(t?Math.min(64,ld-t):16.667),N4.flush(),T4.flush(),D4.flush()}function mb(){let t=new Set,e=t;return{add(n){cd+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return cd-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,cd-=e.size,Xie(e,r=>r(n)&&t.add(r)),cd+=t.size,e=t)}}}function Xie(t,e){t.forEach(n=>{try{e(n)}catch(r){Bt.catch(r)}})}function PA(){}var pct=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Fe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Rl(t,e){if(Fe.arr(t)){if(!Fe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var ln=(t,e)=>t.forEach(e);function ul(t,e,n){if(Fe.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Ci=t=>Fe.und(t)?[]:Fe.arr(t)?t:[t];function Oy(t,e){if(t.size){const n=Array.from(t);t.clear(),ln(n,e)}}var ly=(t,...e)=>Oy(t,n=>n(...e)),O4=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),A4,Qie,Rd=null,Jie=!1,$4=PA,mct=t=>{t.to&&(Qie=t.to),t.now&&(Bt.now=t.now),t.colors!==void 0&&(Rd=t.colors),t.skipAnimation!=null&&(Jie=t.skipAnimation),t.createStringInterpolator&&(A4=t.createStringInterpolator),t.requestAnimationFrame&&Bt.use(t.requestAnimationFrame),t.batchedUpdates&&(Bt.batchedUpdates=t.batchedUpdates),t.willAdvance&&($4=t.willAdvance),t.frameLoop&&(Bt.frameLoop=t.frameLoop)},Ay=new Set,Ji=[],QN=[],q2=0,fI={get idle(){return!Ay.size&&!Ji.length},start(t){q2>t.priority?(Ay.add(t),Bt.onStart(gct)):(Zie(t),Bt(FA))},advance:FA,sort(t){if(q2)Bt.onFrame(()=>fI.sort(t));else{const e=Ji.indexOf(t);~e&&(Ji.splice(e,1),eae(t))}},clear(){Ji=[],Ay.clear()}};function gct(){Ay.forEach(Zie),Ay.clear(),Bt(FA)}function Zie(t){Ji.includes(t)||eae(t)}function eae(t){Ji.splice(vct(Ji,e=>e.priority>t.priority),0,t)}function FA(t){const e=QN;for(let n=0;n<Ji.length;n++){const r=Ji[n];q2=r.priority,r.idle||($4(r),r.advance(t),r.idle||e.push(r))}return q2=0,QN=Ji,QN.length=0,Ji=e,Ji.length>0}function vct(t,e){const n=t.findIndex(e);return n<0?t.length:n}var yct=(t,e,n)=>Math.min(Math.max(n,t),e),xct={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ha="[-+]?\\d*\\.?\\d+",K2=Ha+"%";function hI(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var bct=new RegExp("rgb"+hI(Ha,Ha,Ha)),wct=new RegExp("rgba"+hI(Ha,Ha,Ha,Ha)),kct=new RegExp("hsl"+hI(Ha,K2,K2)),Cct=new RegExp("hsla"+hI(Ha,K2,K2,Ha)),Sct=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ect=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_ct=/^#([0-9a-fA-F]{6})$/,Ict=/^#([0-9a-fA-F]{8})$/;function Tct(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=_ct.exec(t))?parseInt(e[1]+"ff",16)>>>0:Rd&&Rd[t]!==void 0?Rd[t]:(e=bct.exec(t))?(Rp(e[1])<<24|Rp(e[2])<<16|Rp(e[3])<<8|255)>>>0:(e=wct.exec(t))?(Rp(e[1])<<24|Rp(e[2])<<16|Rp(e[3])<<8|j5(e[4]))>>>0:(e=Sct.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Ict.exec(t))?parseInt(e[1],16)>>>0:(e=Ect.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=kct.exec(t))?(L5(B5(e[1]),Gw(e[2]),Gw(e[3]))|255)>>>0:(e=Cct.exec(t))?(L5(B5(e[1]),Gw(e[2]),Gw(e[3]))|j5(e[4]))>>>0:null}function JN(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function L5(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,o=2*n-r,s=JN(o,r,t+1/3),i=JN(o,r,t),a=JN(o,r,t-1/3);return Math.round(s*255)<<24|Math.round(i*255)<<16|Math.round(a*255)<<8}function Rp(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function B5(t){return(parseFloat(t)%360+360)%360/360}function j5(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Gw(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function W5(t){let e=Tct(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,o=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${o}, ${s})`}var q0=(t,e,n)=>{if(Fe.fun(t))return t;if(Fe.arr(t))return q0({range:t,output:e,extrapolate:n});if(Fe.str(t.output[0]))return A4(t);const r=t,o=r.output,s=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",u=r.easing||(l=>l);return l=>{const c=Dct(l,s);return Nct(l,s[c],s[c+1],o[c],o[c+1],u,i,a,r.map)}};function Nct(t,e,n,r,o,s,i,a,u){let l=u?u(t):t;if(l<e){if(i==="identity")return l;i==="clamp"&&(l=e)}if(l>n){if(a==="identity")return l;a==="clamp"&&(l=n)}return r===o?r:e===n?t<=e?r:o:(e===-1/0?l=-l:n===1/0?l=l-e:l=(l-e)/(n-e),l=s(l),r===-1/0?l=-l:o===1/0?l=l+r:l=l*(o-r)+r,l)}function Dct(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var Rct=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,o=e==="end"?Math.floor(r):Math.ceil(r);return yct(0,1,o/t)},X2=1.70158,Yw=X2*1.525,z5=X2+1,U5=2*Math.PI/3,V5=2*Math.PI/4.5,qw=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,Oct={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>z5*t*t*t-X2*t*t,easeOutBack:t=>1+z5*Math.pow(t-1,3)+X2*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Yw+1)*2*t-Yw)/2:(Math.pow(2*t-2,2)*((Yw+1)*(t*2-2)+Yw)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*U5),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*U5)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*V5))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*V5)/2+1,easeInBounce:t=>1-qw(1-t),easeOutBounce:qw,easeInOutBounce:t=>t<.5?(1-qw(1-2*t))/2:(1+qw(2*t-1))/2,steps:Rct},K0=Symbol.for("FluidValue.get"),kg=Symbol.for("FluidValue.observers"),Ki=t=>!!(t&&t[K0]),Us=t=>t&&t[K0]?t[K0]():t,H5=t=>t[kg]||null;function Act(t,e){t.eventObserved?t.eventObserved(e):t(e)}function X0(t,e){const n=t[kg];n&&n.forEach(r=>{Act(r,e)})}var tae=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");$ct(this,t)}},$ct=(t,e)=>nae(t,K0,e);function sv(t,e){if(t[K0]){let n=t[kg];n||nae(t,kg,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Q0(t,e){const n=t[kg];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[kg]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var nae=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Nk=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Mct=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,G5=new RegExp(`(${Nk.source})(%|[a-z]+)`,"i"),Pct=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,pI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,rae=t=>{const[e,n]=Fct(t);if(!e||O4())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(n);return o||t}else{if(n&&pI.test(n))return rae(n);if(n)return n}return t},Fct=t=>{const e=pI.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},ZN,Lct=(t,e,n,r,o)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,oae=t=>{ZN||(ZN=Rd?new RegExp(`(${Object.keys(Rd).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Us(s).replace(pI,rae).replace(Mct,W5).replace(ZN,W5)),n=e.map(s=>s.match(Nk).map(Number)),o=n[0].map((s,i)=>n.map(a=>{if(!(i in a))throw Error('The arity of each "output" value must be equal');return a[i]})).map(s=>q0({...t,output:s}));return s=>{var u;const i=!G5.test(e[0])&&((u=e.find(l=>G5.test(l)))==null?void 0:u.replace(Nk,""));let a=0;return e[0].replace(Nk,()=>`${o[a++](s)}${i||""}`).replace(Pct,Lct)}},M4="react-spring: ",sae=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${M4}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},Bct=sae(console.warn);function jct(){Bct(`${M4}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Wct=sae(console.warn);function zct(){Wct(`${M4}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function mI(t){return Fe.str(t)&&(t[0]=="#"||/\d/.test(t)||!O4()&&pI.test(t)||t in(Rd||{}))}var P4=O4()?D.useEffect:D.useLayoutEffect,Uct=()=>{const t=D.useRef(!1);return P4(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function iae(){const t=D.useState()[1],e=Uct();return()=>{e.current&&t(Math.random())}}function Vct(t,e){const[n]=D.useState(()=>({inputs:e,result:t()})),r=D.useRef(),o=r.current;let s=o;return s?e&&s.inputs&&Hct(e,s.inputs)||(s={inputs:e,result:t()}):s=n,D.useEffect(()=>{r.current=s,o==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Hct(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var aae=t=>D.useEffect(t,Gct),Gct=[];function Y5(t){const e=D.useRef();return D.useEffect(()=>{e.current=t}),e.current}var J0=Symbol.for("Animated:node"),Yct=t=>!!t&&t[J0]===t,wu=t=>t&&t[J0],F4=(t,e)=>pct(t,J0,e),gI=t=>t&&t[J0]&&t[J0].getPayload(),uae=class{constructor(){F4(this,this)}getPayload(){return this.payload||[]}},gb=class extends uae{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,Fe.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new gb(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return Fe.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Fe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Z0=class extends gb{constructor(t){super(0),this._string=null,this._toString=q0({output:[t,t]})}static create(t){return new Z0(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(Fe.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=q0({output:[this.getValue(),t]})),this._value=0,super.reset()}},Q2={dependencies:null},vI=class extends uae{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return ul(this.source,(n,r)=>{Yct(n)?e[r]=n.getValue(t):Ki(n)?e[r]=Us(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&ln(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return ul(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Q2.dependencies&&Ki(t)&&Q2.dependencies.add(t);const e=gI(t);e&&ln(e,n=>this.add(n))}},lae=class extends vI{constructor(t){super(t)}static create(t){return new lae(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(qct)),!0)}};function qct(t){return(mI(t)?Z0:gb).create(t)}function LA(t){const e=wu(t);return e?e.constructor:Fe.arr(t)?lae:mI(t)?Z0:gb}var q5=(t,e)=>{const n=!Fe.fun(t)||t.prototype&&t.prototype.isReactComponent;return D.forwardRef((r,o)=>{const s=D.useRef(null),i=n&&D.useCallback(p=>{s.current=Qct(o,p)},[o]),[a,u]=Xct(r,e),l=iae(),c=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&l()},d=new Kct(c,u),f=D.useRef();P4(()=>(f.current=d,ln(u,p=>sv(p,d)),()=>{f.current&&(ln(f.current.deps,p=>Q0(p,f.current)),Bt.cancel(f.current.update))})),D.useEffect(c,[]),aae(()=>()=>{const p=f.current;ln(p.deps,m=>Q0(m,p))});const h=e.getComponentProps(a.getValue());return D.createElement(t,{...h,ref:i})})},Kct=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Bt.write(this.update)}};function Xct(t,e){const n=new Set;return Q2.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new vI(t),Q2.dependencies=null,[t,n]}function Qct(t,e){return t&&(Fe.fun(t)?t(e):t.current=e),e}var K5=Symbol.for("AnimatedComponent"),Jct=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=o=>new vI(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=i=>{const a=X5(i)||"Anonymous";return Fe.str(i)?i=s[i]||(s[i]=q5(i,o)):i=i[K5]||(i[K5]=q5(i,o)),i.displayName=`Animated(${a})`,i};return ul(t,(i,a)=>{Fe.arr(t)&&(a=X5(i)),s[a]=s(i)}),{animated:s}},X5=t=>Fe.str(t)?t:t&&Fe.str(t.displayName)?t.displayName:Fe.fun(t)&&t.name||null;function Pf(t,...e){return Fe.fun(t)?t(...e):t}var $y=(t,e)=>t===!0||!!(e&&t&&(Fe.fun(t)?t(e):Ci(t).includes(e))),cae=(t,e)=>Fe.obj(t)?e&&t[e]:t,dae=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Zct=t=>t,L4=(t,e=Zct)=>{let n=edt;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const o of n){const s=e(t[o],o);Fe.und(s)||(r[o]=s)}return r},edt=["config","onProps","onStart","onChange","onPause","onResume","onRest"],tdt={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function ndt(t){const e={};let n=0;if(ul(t,(r,o)=>{tdt[o]||(e[o]=r,n++)}),n)return e}function fae(t){const e=ndt(t);if(e){const n={to:e};return ul(t,(r,o)=>o in e||(n[o]=r)),n}return{...t}}function ex(t){return t=Us(t),Fe.arr(t)?t.map(ex):mI(t)?su.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function rdt(t){for(const e in t)return!0;return!1}function BA(t){return Fe.fun(t)||Fe.arr(t)&&Fe.obj(t[0])}function odt(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function sdt(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var idt={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},jA={...idt.default,mass:1,damping:1,easing:Oct.linear,clamp:!1},adt=class{constructor(){this.velocity=0,Object.assign(this,jA)}};function udt(t,e,n){n&&(n={...n},Q5(n,e),e={...n,...e}),Q5(t,e),Object.assign(t,e);for(const i in jA)t[i]==null&&(t[i]=jA[i]);let{frequency:r,damping:o}=t;const{mass:s}=t;return Fe.und(r)||(r<.01&&(r=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*o*s/r),t}function Q5(t,e){if(!Fe.und(e.decay))t.duration=void 0;else{const n=!Fe.und(e.tension)||!Fe.und(e.friction);(n||!Fe.und(e.frequency)||!Fe.und(e.damping)||!Fe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var J5=[],ldt=class{constructor(){this.changed=!1,this.values=J5,this.toValues=null,this.fromValues=J5,this.config=new adt,this.immediate=!1}};function hae(t,{key:e,props:n,defaultProps:r,state:o,actions:s}){return new Promise((i,a)=>{let u,l,c=$y(n.cancel??(r==null?void 0:r.cancel),e);if(c)h();else{Fe.und(n.pause)||(o.paused=$y(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=o.paused||$y(p,e)),u=Pf(n.delay||0,e),p?(o.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){o.resumeQueue.add(f),o.timeouts.delete(l),l.cancel(),u=l.time-Bt.now()}function f(){u>0&&!su.skipAnimation?(o.delayed=!0,l=Bt.setTimeout(h,u),o.pauseQueue.add(d),o.timeouts.add(l)):h()}function h(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(d),o.timeouts.delete(l),t<=(o.cancelId||0)&&(c=!0);try{s.start({...n,callId:t,cancel:c},i)}catch(p){a(p)}}})}var B4=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Am(t.get()):e.every(n=>n.noop)?pae(t.get()):Ba(t.get(),e.every(n=>n.finished)),pae=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ba=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Am=t=>({value:t,cancelled:!0,finished:!1});function mae(t,e,n,r){const{callId:o,parentId:s,onRest:i}=e,{asyncTo:a,promise:u}=n;return!s&&t===a&&!e.reset?u:n.promise=(async()=>{n.asyncId=o,n.asyncTo=t;const l=L4(e,(g,v)=>v==="onRest"?void 0:g);let c,d;const f=new Promise((g,v)=>(c=g,d=v)),h=g=>{const v=o<=(n.cancelId||0)&&Am(r)||o!==n.asyncId&&Ba(r,!1);if(v)throw g.result=v,d(g),g},p=(g,v)=>{const y=new Z5,x=new eH;return(async()=>{if(su.skipAnimation)throw tx(n),x.result=Ba(r,!1),d(x),x;h(y);const b=Fe.obj(g)?{...g}:{...v,to:g};b.parentId=o,ul(l,(S,E)=>{Fe.und(b[E])&&(b[E]=S)});const C=await r.start(b);return h(y),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),C})()};let m;if(su.skipAnimation)return tx(n),Ba(r,!1);try{let g;Fe.arr(t)?g=(async v=>{for(const y of v)await p(y)})(t):g=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([g.then(c),f]),m=Ba(r.get(),!0,!1)}catch(g){if(g instanceof Z5)m=g.result;else if(g instanceof eH)m=g.result;else throw g}finally{o==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?u:void 0)}return Fe.fun(i)&&Bt.batchedUpdates(()=>{i(m,r,r.item)}),m})()}function tx(t,e){Oy(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Z5=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},eH=class extends Error{constructor(){super("SkipAnimationSignal")}},WA=t=>t instanceof j4,cdt=1,j4=class extends tae{constructor(){super(...arguments),this.id=cdt++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=wu(this);return t&&t.getValue()}to(...t){return su.to(this,t)}interpolate(...t){return jct(),su.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){X0(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||fI.sort(this),X0(this,{type:"priority",parent:this,priority:t})}},Lh=Symbol.for("SpringPhase"),gae=1,zA=2,UA=4,eD=t=>(t[Lh]&gae)>0,jc=t=>(t[Lh]&zA)>0,Vv=t=>(t[Lh]&UA)>0,tH=(t,e)=>e?t[Lh]|=zA|gae:t[Lh]&=~zA,nH=(t,e)=>e?t[Lh]|=UA:t[Lh]&=~UA,ddt=class extends j4{constructor(t,e){if(super(),this.animation=new ldt,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Fe.und(t)||!Fe.und(e)){const n=Fe.obj(t)?{...t}:{...e,from:t};Fe.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(jc(this)||this._state.asyncTo)||Vv(this)}get goal(){return Us(this.animation.to)}get velocity(){const t=wu(this);return t instanceof gb?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return eD(this)}get isAnimating(){return jc(this)}get isPaused(){return Vv(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:o}=r;const{config:s}=r,i=gI(r.to);!i&&Ki(r.to)&&(o=Ci(Us(r.to))),r.values.forEach((l,c)=>{if(l.done)return;const d=l.constructor==Z0?1:i?i[c].lastPosition:o[c];let f=r.immediate,h=d;if(!f){if(h=l.lastPosition,s.tension<=0){l.done=!0;return}let p=l.elapsedTime+=t;const m=r.fromValues[c],g=l.v0!=null?l.v0:l.v0=Fe.arr(s.velocity)?s.velocity[c]:s.velocity;let v;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(Fe.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,b=Math.exp(-(1-x)*p);h=m+g/(1-x)*(1-b),f=Math.abs(l.lastPosition-h)<=y,v=g*b}else{v=l.lastVelocity==null?g:l.lastVelocity;const x=s.restVelocity||y/10,b=s.clamp?0:s.bounce,C=!Fe.und(b),S=m==d?l.v0>0:m<d;let E,I=!1;const T=1,N=Math.ceil(t/T);for(let O=0;O<N&&(E=Math.abs(v)>x,!(!E&&(f=Math.abs(d-h)<=y,f)));++O){C&&(I=h==d||h>d==S,I&&(v=-v*b,h=d));const $=-s.tension*1e-6*(h-d),A=-s.friction*.001*v,P=($+A)/s.mass;v=v+P*T,h=h+v*T}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,l.durationProgress>0&&(l.elapsedTime=s.duration*l.durationProgress,p=l.elapsedTime+=t)),x=(s.progress||0)+p/this._memoizedDuration,x=x>1?1:x<0?0:x,l.durationProgress=x),h=m+s.easing(x)*(d-m),v=(h-l.lastPosition)/t,f=x==1}l.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}i&&!i[c].done&&(f=!1),f?l.done=!0:e=!1,l.setValue(h,s.round)&&(n=!0)});const a=wu(this),u=a.getValue();if(e){const l=Us(r.to);(u!==l||n)&&!s.decay?(a.setValue(l),this._onChange(l)):n&&s.decay&&this._onChange(u),this._stop()}else n&&this._onChange(u)}set(t){return Bt.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(jc(this)){const{to:t,config:e}=this.animation;Bt.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return Fe.und(t)?(n=this.queue||[],this.queue=[]):n=[Fe.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>B4(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),tx(this._state,t&&this._lastCallId),Bt.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=Fe.obj(n)?n[e]:n,(n==null||BA(n))&&(n=void 0),r=Fe.obj(r)?r[e]:r,r==null&&(r=void 0);const o={to:n,from:r};return eD(this)||(t.reverse&&([n,r]=[r,n]),r=Us(r),Fe.und(r)?wu(this)||this._set(n):this._set(r)),o}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,L4(t,(i,a)=>/^on/.test(a)?cae(i,n):i)),oH(this,t,"onProps"),Gv(this,"onProps",t,this);const o=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return hae(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{Vv(this)||(nH(this,!0),ly(s.pauseQueue),Gv(this,"onPause",Ba(this,Hv(this,this.animation.to)),this))},resume:()=>{Vv(this)&&(nH(this,!1),jc(this)&&this._resume(),ly(s.resumeQueue),Gv(this,"onResume",Ba(this,Hv(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(i=>{if(t.loop&&i.finished&&!(e&&i.noop)){const a=vae(t);if(a)return this._update(a,!0)}return i})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Am(this));const r=!Fe.und(t.to),o=!Fe.und(t.from);if(r||o)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Am(this));const{key:s,defaultProps:i,animation:a}=this,{to:u,from:l}=a;let{to:c=u,from:d=l}=t;o&&!r&&(!e.default||Fe.und(c))&&(c=d),e.reverse&&([c,d]=[d,c]);const f=!Rl(d,l);f&&(a.from=d),d=Us(d);const h=!Rl(c,u);h&&this._focus(c);const p=BA(e.to),{config:m}=a,{decay:g,velocity:v}=m;(r||o)&&(m.velocity=0),e.config&&!p&&udt(m,Pf(e.config,s),e.config!==i.config?Pf(i.config,s):void 0);let y=wu(this);if(!y||Fe.und(c))return n(Ba(this,!0));const x=Fe.und(e.reset)?o&&!e.default:!Fe.und(d)&&$y(e.reset,s),b=x?d:this.get(),C=ex(c),S=Fe.num(C)||Fe.arr(C)||mI(C),E=!p&&(!S||$y(i.immediate||e.immediate,s));if(h){const O=LA(c);if(O!==y.constructor)if(E)y=this._set(C);else throw Error(`Cannot animate between ${y.constructor.name} and ${O.name}, as the "to" prop suggests`)}const I=y.constructor;let T=Ki(c),N=!1;if(!T){const O=x||!eD(this)&&f;(h||O)&&(N=Rl(ex(b),C),T=!N),(!Rl(a.immediate,E)&&!E||!Rl(m.decay,g)||!Rl(m.velocity,v))&&(T=!0)}if(N&&jc(this)&&(a.changed&&!x?T=!0:T||this._stop(u)),!p&&((T||Ki(u))&&(a.values=y.getPayload(),a.toValues=Ki(c)?null:I==Z0?[1]:Ci(C)),a.immediate!=E&&(a.immediate=E,!E&&!x&&this._set(u)),T)){const{onRest:O}=a;ln(hdt,A=>oH(this,e,A));const $=Ba(this,Hv(this,u));ly(this._pendingCalls,$),this._pendingCalls.add(n),a.changed&&Bt.batchedUpdates(()=>{var A;a.changed=!x,O==null||O($,this),x?Pf(i.onRest,$):(A=a.onStart)==null||A.call(a,$,this)})}x&&this._set(b),p?n(mae(e.to,e,this._state,this)):T?this._start():jc(this)&&!h?this._pendingCalls.add(n):n(pae(b))}_focus(t){const e=this.animation;t!==e.to&&(H5(this)&&this._detach(),e.to=t,H5(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Ki(e)&&(sv(e,this),WA(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Ki(t)&&Q0(t,this)}_set(t,e=!0){const n=Us(t);if(!Fe.und(n)){const r=wu(this);if(!r||!Rl(n,r.getValue())){const o=LA(n);!r||r.constructor!=o?F4(this,o.create(n)):r.setValue(n),r&&Bt.batchedUpdates(()=>{this._onChange(n,e)})}}return wu(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Gv(this,"onStart",Ba(this,Hv(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Pf(this.animation.onChange,t,this)),Pf(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;wu(this).reset(Us(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),jc(this)||(tH(this,!0),Vv(this)||this._resume())}_resume(){su.skipAnimation?this.finish():fI.start(this)}_stop(t,e){if(jc(this)){tH(this,!1);const n=this.animation;ln(n.values,o=>{o.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),X0(this,{type:"idle",parent:this});const r=e?Am(this.get()):Ba(this.get(),Hv(this,t??n.to));ly(this._pendingCalls,r),n.changed&&(n.changed=!1,Gv(this,"onRest",r,this))}}};function Hv(t,e){const n=ex(e),r=ex(t.get());return Rl(r,n)}function vae(t,e=t.loop,n=t.to){const r=Pf(e);if(r){const o=r!==!0&&fae(r),s=(o||t).reverse,i=!o||o.reset;return nx({...t,loop:e,default:!1,pause:void 0,to:!s||BA(n)?n:void 0,from:i?t.from:void 0,reset:i,...o})}}function nx(t){const{to:e,from:n}=t=fae(t),r=new Set;return Fe.obj(e)&&rH(e,r),Fe.obj(n)&&rH(n,r),t.keys=r.size?Array.from(r):null,t}function fdt(t){const e=nx(t);return Fe.und(e.default)&&(e.default=L4(e)),e}function rH(t,e){ul(t,(n,r)=>n!=null&&e.add(r))}var hdt=["onStart","onRest","onChange","onPause","onResume"];function oH(t,e,n){t.animation[n]=e[n]!==dae(e,n)?cae(e[n],t.key):void 0}function Gv(t,e,...n){var r,o,s,i;(o=(r=t.animation)[e])==null||o.call(r,...n),(i=(s=t.defaultProps)[e])==null||i.call(s,...n)}var pdt=["onStart","onChange","onRest"],mdt=1,gdt=class{constructor(t,e){this.id=mdt++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];Fe.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(nx(t)),this}start(t){let{queue:e}=this;return t?e=Ci(t).map(nx):this.queue=[],this._flush?this._flush(this,e):(kae(this,e),VA(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;ln(Ci(e),r=>n[r].stop(!!t))}else tx(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(Fe.und(t))this.start({pause:!0});else{const e=this.springs;ln(Ci(t),n=>e[n].pause())}return this}resume(t){if(Fe.und(t))this.start({pause:!1});else{const e=this.springs;ln(Ci(t),n=>e[n].resume())}return this}each(t){ul(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,o=this._changed.size>0;(r&&!this._started||o&&!this._started)&&(this._started=!0,Oy(t,([a,u])=>{u.value=this.get(),a(u,this,this._item)}));const s=!r&&this._started,i=o||s&&n.size?this.get():null;o&&e.size&&Oy(e,([a,u])=>{u.value=i,a(u,this,this._item)}),s&&(this._started=!1,Oy(n,([a,u])=>{u.value=i,a(u,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Bt.onFrame(this._onFrame)}};function VA(t,e){return Promise.all(e.map(n=>yae(t,n))).then(n=>B4(t,n))}async function yae(t,e,n){const{keys:r,to:o,from:s,loop:i,onRest:a,onResolve:u}=e,l=Fe.obj(e.default)&&e.default;i&&(e.loop=!1),o===!1&&(e.to=null),s===!1&&(e.from=null);const c=Fe.arr(o)||Fe.fun(o)?o:void 0;c?(e.to=void 0,e.onRest=void 0,l&&(l.onRest=void 0)):ln(pdt,m=>{const g=e[m];if(Fe.fun(g)){const v=t._events[m];e[m]=({finished:y,cancelled:x})=>{const b=v.get(g);b?(y||(b.finished=!1),x&&(b.cancelled=!0)):v.set(g,{value:null,finished:y||!1,cancelled:x||!1})},l&&(l[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,ly(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(r||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),h=e.cancel===!0||dae(e,"cancel")===!0;(c||h&&d.asyncId)&&f.push(hae(++t._lastAsyncId,{props:e,state:d,actions:{pause:PA,resume:PA,start(m,g){h?(tx(d,t._lastAsyncId),g(Am(t))):(m.onRest=a,g(mae(c,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const p=B4(t,await Promise.all(f));if(i&&p.finished&&!(n&&p.noop)){const m=vae(e,i,o);if(m)return kae(t,[m]),yae(t,m,!0)}return u&&Bt.batchedUpdates(()=>u(p,t,t.item)),p}function sH(t,e){const n={...t.springs};return e&&ln(Ci(e),r=>{Fe.und(r.keys)&&(r=nx(r)),Fe.obj(r.to)||(r={...r,to:void 0}),wae(n,r,o=>bae(o))}),xae(t,n),n}function xae(t,e){ul(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,sv(n,t))})}function bae(t,e){const n=new ddt;return n.key=t,e&&sv(n,e),n}function wae(t,e,n){e.keys&&ln(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function kae(t,e){ln(e,n=>{wae(t.springs,n,r=>bae(r,t))})}var yI=({children:t,...e})=>{const n=D.useContext(J2),r=e.pause||!!n.pause,o=e.immediate||!!n.immediate;e=Vct(()=>({pause:r,immediate:o}),[r,o]);const{Provider:s}=J2;return D.createElement(s,{value:e},t)},J2=vdt(yI,{});yI.Provider=J2.Provider;yI.Consumer=J2.Consumer;function vdt(t,e){return Object.assign(t,D.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var ydt=()=>{const t=[],e=function(r){zct();const o=[];return ln(t,(s,i)=>{if(Fe.und(r))o.push(s.start());else{const a=n(r,s,i);a&&o.push(s.start(a))}}),o};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const o=t.indexOf(r);~o&&t.splice(o,1)},e.pause=function(){return ln(t,r=>r.pause(...arguments)),this},e.resume=function(){return ln(t,r=>r.resume(...arguments)),this},e.set=function(r){ln(t,(o,s)=>{const i=Fe.fun(r)?r(s,o):r;i&&o.set(i)})},e.start=function(r){const o=[];return ln(t,(s,i)=>{if(Fe.und(r))o.push(s.start());else{const a=this._getProps(r,s,i);a&&o.push(s.start(a))}}),o},e.stop=function(){return ln(t,r=>r.stop(...arguments)),this},e.update=function(r){return ln(t,(o,s)=>o.update(this._getProps(r,o,s))),this};const n=function(r,o,s){return Fe.fun(r)?r(s,o):r};return e._getProps=n,e};function xdt(t,e,n){const r=Fe.fun(e)&&e;r&&!n&&(n=[]);const o=D.useMemo(()=>r||arguments.length==3?ydt():void 0,[]),s=D.useRef(0),i=iae(),a=D.useMemo(()=>({ctrls:[],queue:[],flush(v,y){const x=sH(v,y);return s.current>0&&!a.queue.length&&!Object.keys(x).some(C=>!v.springs[C])?VA(v,y):new Promise(C=>{xae(v,x),a.queue.push(()=>{C(VA(v,y))}),i()})}}),[]),u=D.useRef([...a.ctrls]),l=[],c=Y5(t)||0;D.useMemo(()=>{ln(u.current.slice(t,c),v=>{odt(v,o),v.stop(!0)}),u.current.length=t,d(c,t)},[t]),D.useMemo(()=>{d(0,Math.min(c,t))},n);function d(v,y){for(let x=v;x<y;x++){const b=u.current[x]||(u.current[x]=new gdt(null,a.flush)),C=r?r(x,b):e[x];C&&(l[x]=fdt(C))}}const f=u.current.map((v,y)=>sH(v,l[y])),h=D.useContext(yI),p=Y5(h),m=h!==p&&rdt(h);P4(()=>{s.current++,a.ctrls=u.current;const{queue:v}=a;v.length&&(a.queue=[],ln(v,y=>y())),ln(u.current,(y,x)=>{o==null||o.add(y),m&&y.start({default:h});const b=l[x];b&&(sdt(y,b.ref),y.ref?y.queue.push(b):y.start(b))})}),aae(()=>()=>{ln(a.ctrls,v=>v.stop(!0))});const g=f.map(v=>({...v}));return o?[g,o]:g}function bdt(t,e){const n=Fe.fun(t),[[r],o]=xdt(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,o]:r}var wdt=class extends j4{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=q0(...e);const n=this._get(),r=LA(n);F4(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Rl(e,n)||(wu(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&iH(this._active)&&tD(this)}_get(){const t=Fe.arr(this.source)?this.source.map(Us):Ci(Us(this.source));return this.calc(...t)}_start(){this.idle&&!iH(this._active)&&(this.idle=!1,ln(gI(this),t=>{t.done=!1}),su.skipAnimation?(Bt.batchedUpdates(()=>this.advance()),tD(this)):fI.start(this))}_attach(){let t=1;ln(Ci(this.source),e=>{Ki(e)&&sv(e,this),WA(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){ln(Ci(this.source),t=>{Ki(t)&&Q0(t,this)}),this._active.clear(),tD(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Ci(this.source).reduce((e,n)=>Math.max(e,(WA(n)?n.priority:0)+1),0))}};function kdt(t){return t.idle!==!1}function iH(t){return!t.size||Array.from(t).every(kdt)}function tD(t){t.idle||(t.idle=!0,ln(gI(t),e=>{e.done=!0}),X0(t,{type:"idle",parent:t}))}su.assign({createStringInterpolator:oae,to:(t,e)=>new wdt(t,e)});var Cae=/^--/;function Cdt(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!Cae.test(t)&&!(My.hasOwnProperty(t)&&My[t])?e+"px":(""+e).trim()}var aH={};function Sdt(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:o,scrollTop:s,scrollLeft:i,viewBox:a,...u}=e,l=Object.values(u),c=Object.keys(u).map(d=>n||t.hasAttribute(d)?d:aH[d]||(aH[d]=d.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));o!==void 0&&(t.textContent=o);for(const d in r)if(r.hasOwnProperty(d)){const f=Cdt(d,r[d]);Cae.test(d)?t.style.setProperty(d,f):t.style[d]=f}c.forEach((d,f)=>{t.setAttribute(d,l[f])}),s!==void 0&&(t.scrollTop=s),i!==void 0&&(t.scrollLeft=i),a!==void 0&&t.setAttribute("viewBox",a)}var My={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Edt=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),_dt=["Webkit","Ms","Moz","O"];My=Object.keys(My).reduce((t,e)=>(_dt.forEach(n=>t[Edt(n,e)]=t[e]),t),My);var Idt=/^(matrix|translate|scale|rotate|skew)/,Tdt=/^(translate)/,Ndt=/^(rotate|skew)/,nD=(t,e)=>Fe.num(t)&&t!==0?t+e:t,Dk=(t,e)=>Fe.arr(t)?t.every(n=>Dk(n,e)):Fe.num(t)?t===e:parseFloat(t)===e,Ddt=class extends vI{constructor({x:t,y:e,z:n,...r}){const o=[],s=[];(t||e||n)&&(o.push([t||0,e||0,n||0]),s.push(i=>[`translate3d(${i.map(a=>nD(a,"px")).join(",")})`,Dk(i,0)])),ul(r,(i,a)=>{if(a==="transform")o.push([i||""]),s.push(u=>[u,u===""]);else if(Idt.test(a)){if(delete r[a],Fe.und(i))return;const u=Tdt.test(a)?"px":Ndt.test(a)?"deg":"";o.push(Ci(i)),s.push(a==="rotate3d"?([l,c,d,f])=>[`rotate3d(${l},${c},${d},${nD(f,u)})`,Dk(f,0)]:l=>[`${a}(${l.map(c=>nD(c,u)).join(",")})`,Dk(l,a.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new Rdt(o,s)),super(r)}},Rdt=class extends tae{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return ln(this.inputs,(n,r)=>{const o=Us(n[0]),[s,i]=this.transforms[r](Fe.arr(o)?o:n.map(Us));t+=" "+s,e=e&&i}),e?"none":t}observerAdded(t){t==1&&ln(this.inputs,e=>ln(e,n=>Ki(n)&&sv(n,this)))}observerRemoved(t){t==0&&ln(this.inputs,e=>ln(e,n=>Ki(n)&&Q0(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),X0(this,t)}},Odt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];su.assign({batchedUpdates:_g.unstable_batchedUpdates,createStringInterpolator:oae,colors:xct});Jct(Odt,{applyAnimatedValues:Sdt,createAnimatedStyle:t=>new Ddt(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n});const Kw=Kl("https://be-orchid-auction.onrender.com");function Adt(){var C,S,E,I,T,N,O,$;bdt({from:{opacity:0,transform:"translateY(-50px)"},to:{opacity:1,transform:"translateY(0)"},config:{duration:500}});const[t,e]=D.useState(""),[n,r]=D.useState(""),[o,s]=D.useState(""),[i,a]=D.useState(!0),[u,l]=D.useState(!1);D.useState(null);const{auctionID:c}=yx(),d=Ao();console.log("id",c);const f=localStorage.getItem("ACCESS_TOKEN"),h=Tt(A=>A.USER.currentUser),p=Tt(A=>A.AUCTION.mostPrice);console.log("mostPrice",p);const m=Tt(A=>A.AUCTION.auctions),g=Tt(A=>A.AUCTION.memberPriceAuction);console.log("memberJoin",m),console.log("aucctionsssBid",o),console.log("memberPriceAuction",g),D.useEffect(()=>{const A=m.find(P=>P._id===c);s(A)},[m,c]);const v=A=>{r(A)};D.useEffect(()=>{const A=new Date(o==null?void 0:o.end_time).getTime();let P={winner_id:p==null?void 0:p.customer_id,auction_id:c,host_id:h==null?void 0:h._id,price:p==null?void 0:p.price};const L=setInterval(()=>{new Date().getTime()>=A&&(a(!1),l(!0),Kw.emit("auctionEnded",P),clearInterval(L))},1e3);return()=>clearInterval(L)},[o==null?void 0:o.end_time,c]),D.useEffect(()=>{let A={auctionId:c};return Kw.on("bidAccepted",P=>{e(P),d(c2(A,f)),d(RO(A,f))}),d(c2(A,f)),d(RO(A,f)),()=>{Kw.off("bidAccepted")}},[]),console.log("newBid",n),console.log("dataBID",t);const y=()=>{let A={auctionId:o==null?void 0:o._id,customerId:h==null?void 0:h._id,price:+n};d(F7e(A,f)),r(""),Kw.emit("submitBid")};function x(A){return A==null?void 0:A.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}const b=A=>{if(!A)return"";const P=new Date(A);return Qm(P,"dd/MM/yyyy - HH:mm")};return w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsxs(Vt,{children:[w.jsx(rt,{children:w.jsxs(me,{children:[w.jsxs(ps,{children:[(S=(C=o==null?void 0:o.product_id)==null?void 0:C.image)==null?void 0:S.map((A,P)=>w.jsx(ps.Item,{children:w.jsx("img",{className:"d-block w-100",src:A,alt:`Slide ${P+1}`,style:{objectFit:"cover",height:"400px",width:"100%"}})},P)),(I=(E=o==null?void 0:o.product_id)==null?void 0:E.video)==null?void 0:I.map((A,P)=>w.jsx(ps.Item,{children:w.jsxs("video",{controls:!0,style:{maxHeight:"400px",width:"100%",objectFit:"cover"},children:[w.jsx("source",{src:A,type:"video/mp4"}),"Your browser does not support the video tag."]})},`video-${P}`))]}),w.jsx(me.Body,{children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Thông Tin Sản Phẩm"}),w.jsx("div",{className:"mb-3",children:w.jsxs("strong",{children:["Tên sản phẩm: ",(T=o==null?void 0:o.product_id)==null?void 0:T.name]})}),w.jsx("div",{className:"mb-3",children:w.jsxs("strong",{children:["Mô tả: ",(N=o==null?void 0:o.product_id)==null?void 0:N.description]})}),w.jsxs("div",{className:"mb-3",children:[w.jsxs("strong",{children:["Giá khởi điểm:"," ",x(o==null?void 0:o.starting_price)]})," "]}),w.jsxs("div",{className:"mb-3",children:[w.jsxs("strong",{children:["Bước giá: ",x(o==null?void 0:o.price_step)]})," "]})]})})})]})}),w.jsx(rt,{children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Thời gian còn lại đến khi kết thúc đấu Giá"}),w.jsx(me.Title,{style:{textAlign:"center"},children:w.jsx("strong",{children:w.jsx(Nd,{date:new Date(o==null?void 0:o.end_time),renderer:({days:A,hours:P,minutes:L,seconds:W,completed:z})=>z?"Expired":w.jsxs(w.Fragment,{children:[A," days ",P," hours ",L," minutes"," ",W," seconds"," "]})})})}),w.jsxs(me,{className:"mt-3 mb-3",children:[w.jsxs(me.Body,{children:[w.jsx(me.Title,{style:{textAlign:"center"},children:i===!0?"Số tiền hiện tại:":"Số tiền thắng đấu giá:"}),w.jsx(me.Text,{style:{textAlign:"center"},children:w.jsx("strong",{children:x(p==null?void 0:p.price)})})]}),w.jsx(me.Body,{children:w.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:w.jsxs(Vh,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"ID"}),w.jsx("th",{children:"Name"}),w.jsx("th",{children:"Money Add"}),w.jsx("th",{children:"Bid Time Auction"})]})}),w.jsx("tbody",{children:g==null?void 0:g.map((A,P)=>{var L;return w.jsxs("tr",{children:[w.jsx("td",{style:{color:`${(A==null?void 0:A.customer_id)===(h==null?void 0:h._id)?"green":""}`},children:P+1}),w.jsx("td",{style:{color:`${(A==null?void 0:A.customer_id)===(h==null?void 0:h._id)?"green":""}`},children:(A==null?void 0:A.customer_id)===(h==null?void 0:h._id)?w.jsx(w.Fragment,{children:"YOU"}):w.jsxs(w.Fragment,{children:[w.jsx("span",{style:{fontWeight:"600"},children:"xxxx"}),(L=A==null?void 0:A.customer_id)==null?void 0:L.slice(-4)]})}),w.jsx("td",{style:{color:`${(A==null?void 0:A.customer_id)===(h==null?void 0:h._id)?"green":""}`},children:x(A==null?void 0:A.price)}),w.jsx("td",{style:{color:`${(A==null?void 0:A.customer_id)===(h==null?void 0:h._id)?"green":""}`},children:b(A==null?void 0:A.create_time)})]},P)})})]})})})]}),((O=h==null?void 0:h.role_id)==null?void 0:O.title)==="MEMBER"?w.jsx(w.Fragment,{children:i===!0?w.jsx(ve,{children:w.jsxs(ve.Group,{as:Vt,className:"mb-3",controlId:"formPlaintextBid",children:[w.jsx(rt,{sm:"8",children:w.jsx(ve.Control,{as:U0,thousandSeparator:!0,decimalSeparator:".",allowNegative:!1,placeholder:"Nhập số tiền đấu giá",value:n,onValueChange:A=>{const{value:P}=A;v(P)},suffix:" đ"})}),w.jsx(rt,{sm:"4",children:w.jsx(vt,{variant:"primary",onClick:y,children:"Đấu Giá"})})]})}):w.jsx("h6",{children:"Buổi đấu giá đã kết thúc"})}):w.jsx(w.Fragment,{})]})})})]}),w.jsxs(Zt,{show:u,onHide:()=>l(!1),children:[w.jsx(Zt.Header,{closeButton:!0,children:w.jsx(Zt.Title,{children:"Người Chiến Thắng"})}),w.jsxs(Zt.Body,{children:[w.jsx("p",{children:(h==null?void 0:h._id)===(p==null?void 0:p.customer_id)?w.jsx(w.Fragment,{children:"Chúc mừng bạn là người chiến thắng"}):w.jsxs(w.Fragment,{children:["Người chiến thắng: ",($=p==null?void 0:p.customer_id)==null?void 0:$.slice(-4)]})}),w.jsxs("p",{children:["Giá thầu cao nhất: "," ",w.jsx(U0,{value:p==null?void 0:p.price,displayType:"text",thousandSeparator:!0,prefix:""}),"đ"]})]}),w.jsx(Zt.Footer,{children:w.jsx(vt,{variant:"secondary",onClick:()=>l(!1),children:"Đóng"})})]})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}const $dt=()=>{var i,a;const{productId:t}=yx(),e=xr(),n=Tt(u=>u.PRODUCT.productsALL);console.log("Product: ",n),localStorage.getItem("ACCESS_TOKEN");const r=Ao(),[o,s]=D.useState("");return D.useEffect(()=>{r(Vie())},[]),D.useEffect(()=>{const u=n.find(l=>l._id===t);s(u)},[t,n]),console.log("auctionDetail",o),w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsx(Vt,{children:w.jsx(rt,{xs:12,children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{children:w.jsxs("strong",{children:["Thông Tin Chi Tiết Product với ID ",t," "]})}),w.jsx(me.Body,{children:w.jsxs(ve,{children:[w.jsxs(Vt,{className:"mb-4",children:[w.jsx(rt,{md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Ảnh Sản Phẩm"}),w.jsx(ps,{children:(i=o==null?void 0:o.image)==null?void 0:i.map((u,l)=>w.jsx(ps.Item,{children:w.jsx("img",{className:"d-block w-100",src:u,alt:`Slide ${l+1}`,style:{height:"400px",objectFit:"cover",width:"100%"}})},l))})]})})}),w.jsx(rt,{md:6,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Video Sản Phẩm"}),w.jsx("div",{style:{position:"relative",marginTop:"20px"},children:w.jsxs("video",{controls:!0,style:{maxWidth:"100%"},children:[(a=o==null?void 0:o.video)==null?void 0:a.map((u,l)=>w.jsx("source",{src:u,type:"video/mp4"},l)),"Your browser does not support the video tag."]})})]})})})]}),w.jsxs(Vt,{children:[w.jsx(rt,{md:12,children:w.jsx(me,{children:w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:"Thông Tin Sản Phẩm"}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Tên sản phẩm"}),w.jsx(ve.Control,{type:"text",placeholder:"Nhập tên sản phẩm",readOnly:t,value:o==null?void 0:o.name})]}),w.jsxs(ve.Group,{className:"mb-3",children:[w.jsx(ve.Label,{children:"Mô tả"}),w.jsx(ve.Control,{as:"textarea",rows:3,placeholder:"Mô tả sản phẩm",readOnly:t,value:o==null?void 0:o.description})]})]})})}),w.jsxs(rt,{xs:"auto",className:"mt-2",children:[w.jsx(vt,{variant:"success",onClick:()=>e(-1),children:"Back"})," ",(o==null?void 0:o.status)===!1?w.jsx(vt,{variant:"danger",onClick:()=>e(`/create-auction/${o._id}`),children:"Create Auction"}):w.jsx("strong",{children:"San pham dang tren ke"})]})]})]})})]})})})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})},W4=({data:t=[],onUpdate:e,onDelete:n})=>{const r=new Date(t==null?void 0:t.regitration_end_time).getTime();console.log("End time",r);const o=new Date().getTime(),s=r-o;return w.jsxs(Vt,{children:[w.jsxs(rt,{xs:"12",children:[" ",w.jsxs(ve,{className:"d-flex mb-3",role:"search",children:[w.jsx(ve.Control,{className:"me-2",type:"search",placeholder:"Search Name Auction","aria-label":"Search"}),w.jsx(vt,{variant:"outline-success",type:"submit",children:"Search"})]})]}),t==null?void 0:t.map((i,a)=>{var u,l,c,d;return w.jsx(rt,{sm:12,md:4,className:"mb-4",children:w.jsxs(me,{children:[w.jsx(ps,{children:(l=(u=i==null?void 0:i.product_id)==null?void 0:u.image)==null?void 0:l.map((f,h)=>w.jsx(ps.Item,{children:w.jsx("img",{className:"d-block w-100",src:f,alt:`Slide ${h+1}`,style:{height:"200px",objectFit:"cover",width:"100%"}})},h))}),w.jsxs(me.Body,{children:[w.jsx(me.Title,{children:(c=i==null?void 0:i.product_id)==null?void 0:c.name}),w.jsxs(me.Text,{children:["Người tổ chức: ",(d=i==null?void 0:i.host_id)==null?void 0:d.fullName]}),(i==null?void 0:i.status)==="not yet auctioned"?w.jsx(me.Text,{children:"Thời gian còn lại đến khi hết đang kí"}):w.jsx(me.Text,{children:"Thời gian còn lại đến khi đấu giá"}),w.jsxs(me.Text,{children:[" ",w.jsx("div",{className:"countdown-container",children:s>0?w.jsx("div",{className:"countdown-container",children:w.jsx(Nd,{date:Date.now()+s,renderer:({days:f,hours:h,minutes:p,seconds:m})=>w.jsxs("div",{children:[w.jsxs("span",{children:[f," days"]})," -"," ",w.jsxs("span",{children:[h," hours"]})," -"," ",w.jsxs("span",{children:[p," minutes"]})," -"," ",w.jsxs("span",{children:[m," seconds"]})]})})}):w.jsx("p",{children:"0 days - 0 hours - 0 minutes - 0 seconds"})})]}),w.jsx(vt,{variant:"primary",onClick:()=>e(i),children:"Chi tiết"})]})]})},a)})]})};W4.propTypes={data:ye.arrayOf(ye.shape({id:ye.number,name:ye.string,status:ye.string})),onUpdate:ye.func,onDelete:ye.func};function Mdt(){const t=localStorage.getItem("ACCESS_TOKEN"),e=Tt(i=>i.AUCTION.notYetAuctionCustomer);console.log("notyet",e);const n=Ao(),r=Tt(i=>i.USER.currentUser);console.log("user",r),D.useEffect(()=>{n(pf(t)),n(NV(t))},[r]);const o=xr(),s=i=>{o(`/detail/${i._id}`),console.log("Update user at id:",i._id)};return D.useEffect(()=>{const i=Kl("https://be-orchid-auction.onrender.com");return i.on("auction_status_changed",()=>{n(NV(t)),console.log("Auction status changed")}),()=>{i.disconnect()}},[]),w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsx(Vt,{children:w.jsx(rt,{xs:12,children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{className:"d-flex justify-content-center align-items-center",children:w.jsx("strong",{children:"Danh sách các buổi đấu giá đã công bố"})}),w.jsx(me.Body,{children:w.jsx(W4,{data:e,onUpdate:s})})]})})})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}function Pdt(){const t=localStorage.getItem("ACCESS_TOKEN"),e=Tt(i=>i.AUCTION.aboutToAuctionCustomer),n=Ao(),r=Tt(i=>i.USER.currentUser);console.log("user",r),D.useEffect(()=>{n(pf(t)),n(RV(t))},[r]);const o=xr(),s=i=>{o(`/auction-detail/${i._id}`),console.log("Update user at id:",i._id)};return D.useEffect(()=>{const i=Kl("https://be-orchid-auction.onrender.com");return i.on("auction_status_changed",()=>{n(RV(t)),console.log("Auction status changed")}),()=>{i.disconnect()}},[]),w.jsxs("div",{className:"app-container",children:[w.jsx("div",{className:"header-container",children:w.jsx(ui,{})}),w.jsxs("div",{className:"body-container",children:[w.jsx("div",{className:"container",style:{marginBottom:"20px"}}),w.jsx(Vt,{children:w.jsx(rt,{xs:12,children:w.jsxs(me,{className:"mb-4",children:[w.jsx(me.Header,{className:"d-flex justify-content-center align-items-center",children:w.jsx("strong",{children:"Danh sách các buổi đấu giá đã sắp đấu giá"})}),w.jsx(me.Body,{children:w.jsx(W4,{data:e,onUpdate:s})})]})})})]}),w.jsx("div",{className:"footer-container",children:w.jsx(li,{})})]})}function Fdt(){var o,s,i,a,u;const t=localStorage.getItem("ACCESS_TOKEN");xr();const e=Ao(),n=Tt(l=>l.USER.currentUser);console.log("user",n);const r=qe("2024-03-05T01:56:00.000+00:00").format("YYYY-MM-DD HH:mm:ss");return console.log("time",r),D.useEffect(()=>{N0.fetchMe(t).then(l=>{if(console.log("res",l),l.data&&l.data.user){const c=l.data.user,d=l.data.user.title;e(hne(c,t,d))}else alert("Please login")}).catch(l=>{l.response}),e(pf(t))},[]),w.jsx(w.Fragment,{children:w.jsxs(tme,{children:[w.jsx(lo,{path:"/",element:w.jsx(W7e,{})}),w.jsx(lo,{path:"/login",element:w.jsx(G7e,{})}),w.jsx(lo,{path:"/signup",element:w.jsx(iot,{})}),w.jsx(lo,{path:"/auction",element:w.jsx(z9,{})}),w.jsx(lo,{path:"/detail/:id",element:w.jsx(Lot,{})}),w.jsx(lo,{path:"/payment",element:w.jsx(wot,{})}),w.jsx(lo,{path:"/room-auction",element:((o=n==null?void 0:n.role_id)==null?void 0:o.title)==="HOST"?w.jsx(Sv,{to:"/",replace:!0}):w.jsx(kot,{})}),w.jsx(lo,{path:"/join-room-auction/:auctionID",element:w.jsx(Adt,{})}),w.jsx(lo,{path:"/create-product",element:w.jsx(lct,{})}),w.jsx(lo,{path:"/create-auction/:productID",element:w.jsx(qst,{})}),w.jsx(lo,{path:"/manage-auction",element:((s=n==null?void 0:n.role_id)==null?void 0:s.title)==="MEMBER"?w.jsx(Sv,{to:"/",replace:!0}):w.jsx(Xst,{})}),w.jsx(lo,{path:"/manage-product",element:((i=n==null?void 0:n.role_id)==null?void 0:i.title)==="MEMBER"?w.jsx(Sv,{to:"/",replace:!0}):w.jsx(cct,{})}),w.jsx(lo,{path:"/auction-detail/:auctionId",element:w.jsx(Qst,{})}),w.jsx(lo,{path:"/product-detail/:productId",element:w.jsx($dt,{})}),w.jsx(lo,{path:"/paid-item",element:w.jsx(Yse,{})}),w.jsx(lo,{path:"profile",element:w.jsx(oit,{})}),w.jsx(lo,{path:"/notyetauction-customer",element:((a=n==null?void 0:n.role_id)==null?void 0:a.title)==="HOST"?w.jsx(Sv,{to:"/",replace:!0}):w.jsx(Mdt,{})}),w.jsx(lo,{path:"/abouttoauction-customer",element:((u=n==null?void 0:n.role_id)==null?void 0:u.title)==="HOST"?w.jsx(Sv,{to:"/",replace:!0}):w.jsx(Pdt,{})})]})})}function rx(t){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rx(t)}function Ldt(t,e){if(rx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bdt(t){var e=Ldt(t,"string");return rx(e)=="symbol"?e:String(e)}function jdt(t,e,n){return e=Bdt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function lH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uH(Object(n),!0).forEach(function(r){jdt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ns(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var cH=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),rD=function(){return Math.random().toString(36).substring(7).split("").join(".")},Z2={INIT:"@@redux/INIT"+rD(),REPLACE:"@@redux/REPLACE"+rD(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+rD()}};function Wdt(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Sae(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ns(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ns(1));return n(Sae)(t,e)}if(typeof t!="function")throw new Error(ns(2));var o=t,s=e,i=[],a=i,u=!1;function l(){a===i&&(a=i.slice())}function c(){if(u)throw new Error(ns(3));return s}function d(m){if(typeof m!="function")throw new Error(ns(4));if(u)throw new Error(ns(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ns(6));g=!1,l();var y=a.indexOf(m);a.splice(y,1),i=null}}}function f(m){if(!Wdt(m))throw new Error(ns(7));if(typeof m.type>"u")throw new Error(ns(8));if(u)throw new Error(ns(9));try{u=!0,s=o(s,m)}finally{u=!1}for(var g=i=a,v=0;v<g.length;v++){var y=g[v];y()}return m}function h(m){if(typeof m!="function")throw new Error(ns(10));o=m,f({type:Z2.REPLACE})}function p(){var m,g=d;return m={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(ns(11));function x(){y.next&&y.next(c())}x();var b=g(x);return{unsubscribe:b}}},m[cH]=function(){return this},m}return f({type:Z2.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[cH]=p,r}function zdt(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Z2.INIT});if(typeof r>"u")throw new Error(ns(12));if(typeof n(void 0,{type:Z2.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ns(13))})}function Udt(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var o=e[r];typeof t[o]=="function"&&(n[o]=t[o])}var s=Object.keys(n),i;try{zdt(n)}catch(a){i=a}return function(u,l){if(u===void 0&&(u={}),i)throw i;for(var c=!1,d={},f=0;f<s.length;f++){var h=s[f],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ns(14));d[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?d:u}}function Vdt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,o){return function(){return r(o.apply(void 0,arguments))}})}function Hdt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var o=r.apply(void 0,arguments),s=function(){throw new Error(ns(15))},i={getState:o.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(u){return u(i)});return s=Vdt.apply(void 0,a)(o.dispatch),lH(lH({},o),{},{dispatch:s})}}}function Eae(t){var e=function(r){var o=r.dispatch,s=r.getState;return function(i){return function(a){return typeof a=="function"?a(o,s,t):i(a)}}};return e}var _ae=Eae();_ae.withExtraArgument=Eae;const Gdt=_ae,Ydt={users:[],token:null,currentUser:null,roles:[]},qdt=(t=Ydt,e)=>{switch(e.type){case dne:return localStorage.setItem("ACCESS_TOKEN",e.payload.token),{...t,currentUser:e.payload.currentUser,token:e.payload.token,role:e.payload.role};case z7e:return localStorage.setItem("ACCESS_TOKEN",null),{...t,token:e.payload};case fne:return{...t,roles:e.payload};default:return t}},Kdt={products:[],productsALL:[]},Xdt=(t=Kdt,e)=>{switch(e.type){case zie:return{...t,products:e.payload};case Uie:return{...t,productsALL:e.payload};default:return t}},Qdt={auctions:[],notYetAuction:[],aboutToAuction:[],auctioning:[],auctined:[],notYetAuctionCustomer:[],aboutToAuctionCustomer:[],auctioningCustomer:[],auctinedCustomer:[],notYetAuctionMember:[],aboutToAuctionMember:[],auctioningMember:[],auctinedMember:[],mostPrice:"",memberPriceAuction:[],allMemberJoinInAuction:[]},Jdt=(t=Qdt,e)=>{switch(e.type){case qte:return{...t,auctions:e.payload};case Kte:return{...t,notYetAuction:e.payload};case Xte:return{...t,aboutToAuction:e.payload};case Qte:return{...t,auctioning:e.payload};case Jte:return{...t,auctined:e.payload};case ene:return{...t,notYetAuctionCustomer:e.payload};case tne:return{...t,aboutToAuctionCustomer:e.payload};case Zte:return{...t,auctioningCustomer:e.payload};case b7e:return{...t,auctinedCustomer:e.payload};case sne:return{...t,notYetAuctionMember:e.payload};case ine:return{...t,aboutToAuctionMember:e.payload};case ane:return{...t,auctioningMember:e.payload};case une:return{...t,auctinedMember:e.payload};case nne:return{...t,mostPrice:e.payload};case rne:return{...t,allMemberJoinInAuction:e.payload};default:return t}},Zdt={wallet:"",walletHistory:[]},eft=(t=Zdt,e)=>{switch(e.type){case Ise:return{...t,wallet:e.payload};case Tse:return{...t,walletHistory:e.payload};default:return t}},tft={configMoney:[]},nft=(t=tft,e)=>{switch(e.type){case cne:return{...t,configMoney:e.payload};default:return t}},rft=Udt({USER:qdt,PRODUCT:Xdt,AUCTION:Jdt,WALLET:eft,MONEYCONFIG:nft}),oft=Sae(rft,Hdt(Gdt));oD.createRoot(document.getElementById("root")).render(w.jsx(ume,{children:w.jsx(zhe,{store:oft,children:w.jsx(Fdt,{})})}))});export default sft();
